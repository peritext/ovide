!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=348)}([function(e,t,n){"use strict";var r=function(e,t,n){return e.fields=t||[],e.fname=n,e};function i(e){return null==e?null:e.fname}function o(e){return null==e?null:e.fields}var a=function(e){throw Error(e)},s=function(e){var t,n,r,i=[],o=null,s=0,l=e.length,u="";function c(){i.push(u+e.substring(t,n)),u="",t=n+1}for(e+="",t=n=0;n<l;++n)if("\\"===(r=e[n]))u+=e.substring(t,n),t=++n;else if(r===o)c(),o=null,s=-1;else{if(o)continue;t===s&&'"'===r?(t=n+1,o=r):t===s&&"'"===r?(t=n+1,o=r):"."!==r||s?"["===r?(n>t&&c(),s=t=n+1):"]"===r&&(s||a("Access path missing open bracket: "+e),s>0&&c(),s=0,t=n+1):n>t?c():t=n+1}return s&&a("Access path missing closing bracket: "+e),o&&a("Access path missing closing quote: "+e),n>t&&(n++,c()),i},l=Array.isArray,u=function(e){return e===Object(e)},c=function(e){return"string"==typeof e};function f(e){return l(e)?"["+e.map(f)+"]":u(e)||c(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var d=function(e,t){var n=s(e),i="return _["+n.map(f).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)},p=[],h=d("id"),m=r((function(e){return e}),p,"identity"),g=r((function(){return 0}),p,"zero"),b=r((function(){return 1}),p,"one"),y=r((function(){return!0}),p,"true"),v=r((function(){return!1}),p,"false");function x(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var _=function(e,t){var n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&x(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&x(t||"warn","WARN",arguments),this},info:function(){return n>=3&&x(t||"log","INFO",arguments),this},debug:function(){return n>=4&&x(t||"log","DEBUG",arguments),this}}};function w(...e){return e.reduce((e,t)=>{for(var n in t)if("signals"===n)e.signals=E(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;O(e,n,t[n],r)}return e},{})}function O(e,t,n,r){var i,o;if(u(n)&&!l(n))for(i in o=u(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?O(o,i,n[i]):o[i]=n[i];else e[t]=n}function E(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}var k=function(e){return e[e.length-1]},S=function(e){return null==e||""===e?null:+e};function T(e){return function(t){return e*Math.exp(t)}}function j(e){return function(t){return Math.log(e*t)}}function A(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function P(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function C(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function N(e,t,n,r){var i=n(e[0]),o=n(k(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function M(e,t){return N(e,t,S,m)}function I(e,t){var n=Math.sign(e[0]);return N(e,t,j(n),T(n))}function D(e,t,n){return N(e,t,C(n),C(1/n))}function R(e,t,n){return N(e,t,A(n),P(n))}function z(e,t,n,r,i){var o=r(e[0]),a=r(k(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function L(e,t,n){return z(e,t,n,S,m)}function F(e,t,n){var r=Math.sign(e[0]);return z(e,t,n,j(r),T(r))}function B(e,t,n,r){return z(e,t,n,C(r),C(1/r))}function U(e,t,n,r){return z(e,t,n,A(r),P(r))}function q(e){return 1+~~(new Date(e).getMonth()/3)}function $(e){return 1+~~(new Date(e).getUTCMonth()/3)}var H=function(e){return null!=e?l(e)?e:[e]:[]},W=function(e,t,n){var r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),(r=o-i)>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]},V=function(e){return"function"==typeof e},G=function(e,t){var n,i,a,l,u,c,d,p,h,m=[],g=(e=H(e)).map((function(e,t){return null==e?null:(m.push(t),V(e)?e:s(e).map(f).join("]["))})),b=m.length-1,y=H(t),v="var u,v;return ";if(b<0)return null;for(i=0;i<=b;++i)a=g[n=m[i]],V(a)?(l="(u=this."+(c="f"+n)+"(a))",u="(v=this."+c+"(b))",(d=d||{})[c]=a):(l="(u=a["+a+"])",u="(v=b["+a+"])"),c="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?(h=1,p=-1):(h=-1,p=1),v+="("+l+"<"+u+"||u==null)&&v!=null?"+p+":(u>v||v==null)&&u!=null?"+h+":"+c+"!==u&&v===v?"+p+":v!==v&&u===u?"+h+(n<b?":":":0");return a=Function("a","b",v+";"),d&&(a=a.bind(d)),e=e.reduce((function(e,t){return V(t)?(o(t)||[]).forEach((function(t){e[t]=1})):null!=t&&(e[t+""]=1),e}),{}),r(a,Object.keys(e))},Y=function(e){return V(e)?e:function(){return e}},X=function(e,t){var n,r;function i(){t(r),n=r=null}return function(t){r=t,n&&clearTimeout(n),n=setTimeout(i,e)}},K=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e},J=function(e,t){var n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];null==r||r!=r;r=e[++a]);for(i=o=r;a<n;++a)null!=(r=e[a])&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);null==r||r!=r;r=t(e[++a]));for(i=o=r;a<n;++a)null!=(r=t(e[a]))&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]},Z=function(e,t){var n,r,i,o,a,s=-1,l=e.length;if(null==t){for(;++s<l;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(o=a=s;++s<l;)null!=(r=e[s])&&(n>r&&(n=r,o=s),i<r&&(i=r,a=s))}else{for(;++s<l;)if(null!=(r=t(e[s],s,e))&&r>=r){n=i=r;break}for(o=a=s;++s<l;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,o=s),i<r&&(i=r,a=s))}return[o,a]};const Q=Object.prototype.hasOwnProperty;var ee=function(e,t){return Q.call(e,t)},te={},ne=function(e){var t,n,r={};function i(e){return ee(r,e)&&r[e]!==te}return t={size:0,empty:0,object:r,has:i,get:function(e){return i(e)?r[e]:void 0},set:function(e,n){return i(e)||(++t.size,r[e]===te&&--t.empty),r[e]=n,this},delete:function(e){return i(e)&&(--t.size,++t.empty,r[e]=te),this},clear:function(){t.size=t.empty=0,t.object=r={}},test:function(e){return arguments.length?(n=e,t):n},clean:function(){var e,i,o={},a=0;for(e in r)(i=r[e])===te||n&&n(i)||(o[e]=i,++a);t.size=a,t.empty=0,t.object=r=o}},e&&Object.keys(e).forEach((function(n){t.set(n,e[n])})),t},re=function(e,t,n,r,i,o){if(!n&&0!==n)return o;var a,s,l=e[0],u=k(e),c=+n;return u<l&&(a=l,l=u,u=a),(a=Math.abs(t-l))<(s=Math.abs(u-t))&&a<=c?r:s<=c?i:o},ie=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},oe=function(e,t,n,r){var i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)},ae=function(e){return"boolean"==typeof e},se=function(e){return"[object Date]"===Object.prototype.toString.call(e)},le=function(e){return"number"==typeof e},ue=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},ce=function(e,t){e&&(e=t?H(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):H(e));var n=e&&e.length?Function("_","return ''+"+e.map((function(e){return"_["+(t?f(e):s(e).map(f).join("]["))+"]"})).join("+'|'+")+";"):function(){return""};return r(n,e,"key")},fe=function(e,t){const n=e[0],r=k(e),i=+t;return i?1===i?r:n+i*(r-n):n},de=function(e,t,n,r){var i=t.length,o=n.length;if(!o)return t;if(!i)return n;for(var a=r||new t.constructor(i+o),s=0,l=0,u=0;s<i&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<i;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a},pe=function(e,t){for(var n="";--t>=0;)n+=e;return n},he=function(e,t,n,r){var i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?pe(i,a)+o:"center"===r?pe(i,~~(a/2))+o+pe(i,Math.ceil(a/2)):o+pe(i,a)},me=function(e){return e&&k(e)-e[0]||0},ge=function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e};function be(e){return le(e)?e:se(e)?e:Date.parse(e)}var ye=function(e,t){return t=t||be,null==e||""===e?null:t(e)},ve=function(e){return null==e||""===e?null:e+""},xe=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t},_e=function(e,t,n,r){var i=null!=r?r:"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i},we=function(e,t,n){if(e){var r,i=0,o=e.length;if(t)for(;i<o;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}};n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"w",(function(){return h})),n.d(t,"x",(function(){return m})),n.d(t,"jb",(function(){return g})),n.d(t,"N",(function(){return b})),n.d(t,"fb",(function(){return y})),n.d(t,"r",(function(){return v})),n.d(t,"K",(function(){return _})),n.d(t,"d",(function(){return 0})),n.d(t,"b",(function(){return 1})),n.d(t,"e",(function(){return 2})),n.d(t,"c",(function(){return 3})),n.d(t,"a",(function(){return 4})),n.d(t,"M",(function(){return w})),n.d(t,"ib",(function(){return O})),n.d(t,"P",(function(){return M})),n.d(t,"Q",(function(){return I})),n.d(t,"R",(function(){return D})),n.d(t,"S",(function(){return R})),n.d(t,"kb",(function(){return L})),n.d(t,"lb",(function(){return F})),n.d(t,"mb",(function(){return B})),n.d(t,"nb",(function(){return U})),n.d(t,"U",(function(){return q})),n.d(t,"gb",(function(){return $})),n.d(t,"i",(function(){return H})),n.d(t,"j",(function(){return W})),n.d(t,"k",(function(){return G})),n.d(t,"l",(function(){return Y})),n.d(t,"m",(function(){return X})),n.d(t,"n",(function(){return a})),n.d(t,"o",(function(){return K})),n.d(t,"p",(function(){return J})),n.d(t,"q",(function(){return Z})),n.d(t,"s",(function(){return ne})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return re})),n.d(t,"v",(function(){return ee})),n.d(t,"y",(function(){return ie})),n.d(t,"z",(function(){return oe})),n.d(t,"A",(function(){return l})),n.d(t,"B",(function(){return ae})),n.d(t,"C",(function(){return se})),n.d(t,"D",(function(){return V})),n.d(t,"E",(function(){return le})),n.d(t,"F",(function(){return u})),n.d(t,"G",(function(){return ue})),n.d(t,"H",(function(){return c})),n.d(t,"I",(function(){return ce})),n.d(t,"J",(function(){return fe})),n.d(t,"L",(function(){return de})),n.d(t,"O",(function(){return he})),n.d(t,"T",(function(){return k})),n.d(t,"V",(function(){return pe})),n.d(t,"W",(function(){return me})),n.d(t,"X",(function(){return s})),n.d(t,"Y",(function(){return f})),n.d(t,"Z",(function(){return ge})),n.d(t,"ab",(function(){return ye})),n.d(t,"bb",(function(){return S})),n.d(t,"db",(function(){return ve})),n.d(t,"cb",(function(){return xe})),n.d(t,"eb",(function(){return _e})),n.d(t,"hb",(function(){return we}))},function(e,t,n){e.exports=n(358)()},function(e,t,n){"use strict";e.exports=n(351)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}l((r=r.apply(e,t||[])).next())}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildBibliography",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"buildCitations",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildCitationRepresentations",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"buildContextContent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"buildGlossary",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"resourceHasContents",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getResourceTitle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"buildResourceSectionsSummary",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"resourceToCslJSON",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"StructuredCOinS",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"chooseAppropriateAsset",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"chooseAppropriateSubAsset",{enumerable:!0,get:function(){return p.chooseAppropriateSubAsset}}),Object.defineProperty(t,"getRelatedAssetsIds",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"defaultSortResourceSections",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"getContextualizationMentions",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"preprocessEditionData",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"getContextualizationsFromEdition",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"loadAssetsForEdition",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"buildHTMLMetadata",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"abbrevString",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"generateOpenUrl",{enumerable:!0,get:function(){return w.generateOpenUrl}}),Object.defineProperty(t,"bibToSchema",{enumerable:!0,get:function(){return w.bibToSchema}});var r=O(n(231)),i=O(n(244)),o=O(n(245)),a=O(n(134)),s=O(n(246)),l=O(n(234)),u=O(n(247)),c=O(n(232)),f=O(n(135)),d=O(n(516)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(517)),h=O(n(248)),m=O(n(233)),g=O(n(136)),b=O(n(521)),y=O(n(69)),v=O(n(522)),x=O(n(523)),_=O(n(524)),w=n(532);function O(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},i=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,s=(o.left,a);var l=function(e){return null===e?NaN:+e},u=Array.prototype,c=(u.slice,u.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}),f=Math.sqrt(50),d=Math.sqrt(10),p=Math.sqrt(2),h=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=m(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function m(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=f?10:o>=d?5:o>=p?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=f?10:o>=d?5:o>=p?2:1)}function g(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=f?i*=10:o>=d?i*=5:o>=p&&(i*=2),t<e?-i:i}var b=function(e,t,n){if(null==n&&(n=l),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}},y=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n};n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return g}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=new Date,i=new Date;function o(e,t,n,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return a},s.filter=function(n){return o((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(s.count=function(t,o){return r.setTime(+t),i.setTime(+o),e(r),e(i),Math.floor(n(r,i))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return s}));var r=1e3,i=6e4,o=36e5,a=864e5,s=6048e5},function(e,t,n){"use strict";var r=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},i=function(e){return(e=r(Math.abs(e)))?e[1]:NaN},o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){if(!(t=o.exec(e)))throw new Error("invalid format: "+e);var t;return new s({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function s(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}a.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l,u,c,f,d=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e},p=function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},h={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return p(100*e,t)},r:p,s:function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],o=n[1],a=o-(l=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+r(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},m=function(e){return e},g=Array.prototype.map,b=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],y=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?m:(t=g.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",u=void 0===e.decimal?".":e.decimal+"",c=void 0===e.numerals?m:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(g.call(e.numerals,String)),f=void 0===e.percent?"%":e.percent+"",p=void 0===e.minus?"-":e.minus+"",y=void 0===e.nan?"NaN":e.nan+"";function v(e){var t=(e=a(e)).fill,n=e.align,i=e.sign,m=e.symbol,g=e.zero,v=e.width,x=e.comma,_=e.precision,w=e.trim,O=e.type;"n"===O?(x=!0,O="g"):h[O]||(void 0===_&&(_=12),w=!0,O="g"),(g||"0"===t&&"="===n)&&(g=!0,t="0",n="=");var E="$"===m?o:"#"===m&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",k="$"===m?s:/[%p]/.test(O)?f:"",S=h[O],T=/[defgprs%]/.test(O);function j(e){var o,a,s,f=E,h=k;if("c"===O)h=S(e)+h,e="";else{var m=(e=+e)<0;if(e=isNaN(e)?y:S(Math.abs(e),_),w&&(e=d(e)),m&&0==+e&&(m=!1),f=(m?"("===i?i:p:"-"===i||"("===i?"":i)+f,h=("s"===O?b[8+l/3]:"")+h+(m&&"("===i?")":""),T)for(o=-1,a=e.length;++o<a;)if(48>(s=e.charCodeAt(o))||s>57){h=(46===s?u+e.slice(o+1):e.slice(o))+h,e=e.slice(0,o);break}}x&&!g&&(e=r(e,1/0));var j=f.length+e.length+h.length,A=j<v?new Array(v-j+1).join(t):"";switch(x&&g&&(e=r(A+e,A.length?v-h.length:1/0),A=""),n){case"<":e=f+e+h+A;break;case"=":e=f+A+e+h;break;case"^":e=A.slice(0,j=A.length>>1)+f+e+h+A.slice(j);break;default:e=A+f+e+h}return c(e)}return _=void 0===_?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),j.toString=function(){return e+""},j}return{format:v,formatPrefix:function(e,t){var n=v(((e=a(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(i(t)/3))),o=Math.pow(10,-r),s=b[8+r/3];return function(e){return n(o*e)+s}}}};function v(e){return u=y(e),c=u.format,f=u.formatPrefix,u}v({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var x=function(e){return Math.max(0,-i(Math.abs(e)))},_=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(t)/3)))-i(Math.abs(e)))},w=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,i(t)-i(e))+1};n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return w}))},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(16);function i(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}var o=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],s=r>0?e[r-1]:2*o-a,l=r<t-1?e[r+2]:2*a-o;return i((n-r/t)*t,s,o,a,l)}},a=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],s=e[(r+1)%t],l=e[(r+2)%t];return i((n-r/t)*t,o,a,s,l)}},s=function(e){return function(){return e}};function l(e,t){return function(n){return e+n*t}}function u(e,t){var n=t-e;return n?l(e,n>180||n<-180?n-360*Math.round(n/360):n):s(isNaN(e)?t:e)}function c(e){return 1==(e=+e)?f:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):s(isNaN(t)?n:t)}}function f(e,t){var n=t-e;return n?l(e,n):s(isNaN(e)?t:e)}var d=function e(t){var n=c(t);function i(e,t){var i=n((e=Object(r.g)(e)).r,(t=Object(r.g)(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),s=f(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function p(e){return function(t){var n,i,o=t.length,a=new Array(o),s=new Array(o),l=new Array(o);for(n=0;n<o;++n)i=Object(r.g)(t[n]),a[n]=i.r||0,s[n]=i.g||0,l[n]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}var h=p(o),m=p(a),g=function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=T(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}},b=function(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}},y=function(e,t){return t-=e=+e,function(n){return e+t*n}},v=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=T(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(x.source,"g");var w,O,E,k,S=function(e,t){var n,r,i,o=x.lastIndex=_.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=x.exec(e))&&(r=_.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:y(n,r)})),o=_.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})},T=function(e,t){var n,i=typeof t;return null==t||"boolean"===i?s(t):("number"===i?y:"string"===i?(n=Object(r.e)(t))?(t=n,d):S:t instanceof r.e?d:t instanceof Date?b:Array.isArray(t)?g:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?v:y)(e,t)},j=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},A=function(e,t){var n=u(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},P=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},C=180/Math.PI,N={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},M=function(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*C,skewX:Math.atan(l)*C,scaleX:a,scaleY:s}};function I(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:y(e,i)},{i:l-2,x:y(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:y(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:y(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:y(e,n)},{i:s-2,x:y(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var D=I((function(e){return"none"===e?N:(w||(w=document.createElement("DIV"),O=document.documentElement,E=document.defaultView),w.style.transform=e,e=E.getComputedStyle(O.appendChild(w),null).getPropertyValue("transform"),O.removeChild(w),e=e.slice(7,-1).split(","),M(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),R=I((function(e){return null==e?N:(k||(k=document.createElementNS("http://www.w3.org/2000/svg","g")),k.setAttribute("transform",e),(e=k.transform.baseVal.consolidate())?(e=e.matrix,M(e.a,e.b,e.c,e.d,e.e,e.f)):N)}),", ",")",")"),z=Math.SQRT2;function L(e){return((e=Math.exp(e))+1/e)/2}var F=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],u=t[2],c=s-i,f=l-o,d=c*c+f*f;if(d<1e-12)r=Math.log(u/a)/z,n=function(e){return[i+e*c,o+e*f,a*Math.exp(z*e*r)]};else{var p=Math.sqrt(d),h=(u*u-a*a+4*d)/(2*a*2*p),m=(u*u-a*a-4*d)/(2*u*2*p),g=Math.log(Math.sqrt(h*h+1)-h),b=Math.log(Math.sqrt(m*m+1)-m);r=(b-g)/z,n=function(e){var t,n=e*r,s=L(g),l=a/(2*p)*(s*(t=z*n+g,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+l*c,o+l*f,a*s/L(z*n+g)]}}return n.duration=1e3*r,n};function B(e){return function(t,n){var i=e((t=Object(r.f)(t)).h,(n=Object(r.f)(n)).h),o=f(t.s,n.s),a=f(t.l,n.l),s=f(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(e),t.opacity=s(e),t+""}}}var U=B(u),q=B(f),$=n(980);function H(e,t){var n=f((e=Object($.a)(e)).l,(t=Object($.a)(t)).l),r=f(e.a,t.a),i=f(e.b,t.b),o=f(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}function W(e){return function(t,n){var r=e((t=Object($.b)(t)).h,(n=Object($.b)(n)).h),i=f(t.c,n.c),o=f(t.l,n.l),a=f(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var V=W(u),G=W(f),Y=n(17),X=n(62),K=-.14861,J=1.78277,Z=-.29227,Q=-.90649,ee=1.97294,te=ee*Q,ne=ee*J,re=J*Z-Q*K;function ie(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof oe)return new oe(e.h,e.s,e.l,e.opacity);e instanceof r.b||(e=Object(r.h)(e));var t=e.r/255,n=e.g/255,i=e.b/255,o=(re*i+te*t-ne*n)/(re+te-ne),a=i-o,s=(ee*(n-o)-Z*a)/Q,l=Math.sqrt(s*s+a*a)/(ee*o*(1-o)),u=l?Math.atan2(s,a)*X.b-120:NaN;return new oe(u<0?u+360:u,l,o,e.opacity)}(e):new oe(e,t,n,null==i?1:i)}function oe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ae(e){return function t(n){function r(t,r){var i=e((t=ie(t)).h,(r=ie(r)).h),o=f(t.s,r.s),a=f(t.l,r.l),s=f(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}Object(Y.a)(oe,ie,Object(Y.b)(r.a,{brighter:function(e){return e=null==e?r.c:Math.pow(r.c,e),new oe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?r.d:Math.pow(r.d,e),new oe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*X.a,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),o=Math.sin(e);return new r.b(255*(t+n*(K*i+J*o)),255*(t+n*(Z*i+Q*o)),255*(t+n*(ee*i)),this.opacity)}}));var se=ae(u),le=ae(f);function ue(e,t){for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}var ce=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};n.d(t,"interpolate",(function(){return T})),n.d(t,"interpolateArray",(function(){return g})),n.d(t,"interpolateBasis",(function(){return o})),n.d(t,"interpolateBasisClosed",(function(){return a})),n.d(t,"interpolateDate",(function(){return b})),n.d(t,"interpolateDiscrete",(function(){return j})),n.d(t,"interpolateHue",(function(){return A})),n.d(t,"interpolateNumber",(function(){return y})),n.d(t,"interpolateObject",(function(){return v})),n.d(t,"interpolateRound",(function(){return P})),n.d(t,"interpolateString",(function(){return S})),n.d(t,"interpolateTransformCss",(function(){return D})),n.d(t,"interpolateTransformSvg",(function(){return R})),n.d(t,"interpolateZoom",(function(){return F})),n.d(t,"interpolateRgb",(function(){return d})),n.d(t,"interpolateRgbBasis",(function(){return h})),n.d(t,"interpolateRgbBasisClosed",(function(){return m})),n.d(t,"interpolateHsl",(function(){return U})),n.d(t,"interpolateHslLong",(function(){return q})),n.d(t,"interpolateLab",(function(){return H})),n.d(t,"interpolateHcl",(function(){return V})),n.d(t,"interpolateHclLong",(function(){return G})),n.d(t,"interpolateCubehelix",(function(){return se})),n.d(t,"interpolateCubehelixLong",(function(){return le})),n.d(t,"piecewise",(function(){return ue})),n.d(t,"quantize",(function(){return ce}))},function(e,t,n){e.exports={constants:n(478),production:n(479),resource:n(111),contextualizer:n(480)}},function(e,t,n){"use strict";var r,i,o,a,s,l="RawCode",u="Literal",c="Property",f="Identifier",d="ArrayExpression",p="BinaryExpression",h="CallExpression",m="ConditionalExpression",g="LogicalExpression",b="MemberExpression",y="ObjectExpression",v="UnaryExpression";function x(e){this.type=e}x.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case d:return e.elements;case p:case g:return[e.left,e.right];case h:var t=e.arguments.slice();return t.unshift(e.callee),t;case m:return[e.test,e.consequent,e.alternate];case b:return[e.object,e.property];case y:return e.properties;case c:return[e.key,e.value];case v:return[e.argument];case f:case u:case l:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};var _=1,w=2,O=3,E=4,k=5,S=6,T=7,j=8;(r={})[_]="Boolean",r[w]="<end>",r[O]="Identifier",r[E]="Keyword",r[k]="Null",r[S]="Numeric",r[T]="Punctuator",r[j]="String",r[9]="RegularExpression";var A="ArrayExpression",P="BinaryExpression",C="CallExpression",N="ConditionalExpression",M="Identifier",I="Literal",D="LogicalExpression",R="MemberExpression",z="ObjectExpression",L="Property",F="UnaryExpression",B="Unexpected token %0",U="Unexpected number",q="Unexpected string",$="Unexpected identifier",H="Unexpected reserved word",W="Unexpected end of input",V="Invalid regular expression",G="Invalid regular expression: missing /",Y="Octal literals are not allowed in strict mode.",X="Duplicate data property in object literal not allowed in strict mode",K="ILLEGAL",J="Disabled.",Z=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Q=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ee(e,t){if(!e)throw new Error("ASSERT: "+t)}function te(e){return e>=48&&e<=57}function ne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function re(e){return"01234567".indexOf(e)>=0}function ie(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function oe(e){return 10===e||13===e||8232===e||8233===e}function ae(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Z.test(String.fromCharCode(e))}function se(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Q.test(String.fromCharCode(e))}var le={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function ue(){for(var e;o<a&&(ie(e=i.charCodeAt(o))||oe(e));)++o}function ce(e){var t,n,r,s=0;for(n="u"===e?4:2,t=0;t<n;++t)o<a&&ne(i[o])?(r=i[o++],s=16*s+"0123456789abcdef".indexOf(r.toLowerCase())):Se({},B,K);return String.fromCharCode(s)}function fe(){var e,t,n,r;for(t=0,"}"===(e=i[o])&&Se({},B,K);o<a&&ne(e=i[o++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Se({},B,K),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function de(){var e,t;for(e=i.charCodeAt(o++),t=String.fromCharCode(e),92===e&&(117!==i.charCodeAt(o)&&Se({},B,K),++o,(e=ce("u"))&&"\\"!==e&&ae(e.charCodeAt(0))||Se({},B,K),t=e);o<a&&se(e=i.charCodeAt(o));)++o,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==i.charCodeAt(o)&&Se({},B,K),++o,(e=ce("u"))&&"\\"!==e&&se(e.charCodeAt(0))||Se({},B,K),t+=e);return t}function pe(){var e,t;return e=o,{type:1===(t=92===i.charCodeAt(o)?de():function(){var e,t;for(e=o++;o<a;){if(92===(t=i.charCodeAt(o)))return o=e,de();if(!se(t))break;++o}return i.slice(e,o)}()).length?O:le.hasOwnProperty(t)?E:"null"===t?k:"true"===t||"false"===t?_:O,value:t,start:e,end:o}}function he(){var e,t,n,r,a=o,s=i.charCodeAt(o),l=i[o];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++o,{type:T,value:String.fromCharCode(s),start:a,end:o};default:if(61===(e=i.charCodeAt(o+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return o+=2,{type:T,value:String.fromCharCode(s)+String.fromCharCode(e),start:a,end:o};case 33:case 61:return o+=2,61===i.charCodeAt(o)&&++o,{type:T,value:i.slice(a,o),start:a,end:o}}}return">>>="===(r=i.substr(o,4))?{type:T,value:r,start:a,end:o+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:T,value:n,start:a,end:o+=3}:l===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(l)>=0||"=>"===t?{type:T,value:t,start:a,end:o+=2}:"<>=!+-*%&|^/".indexOf(l)>=0?{type:T,value:l,start:a,end:++o}:void Se({},B,K)}function me(){var e,t,n;if(ee(te((n=i[o]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=o,e="","."!==n){if(e=i[o++],n=i[o],"0"===e){if("x"===n||"X"===n)return++o,function(e){for(var t="";o<a&&ne(i[o]);)t+=i[o++];return 0===t.length&&Se({},B,K),ae(i.charCodeAt(o))&&Se({},B,K),{type:S,value:parseInt("0x"+t,16),start:e,end:o}}(t);if(re(n))return function(e){for(var t="0"+i[o++];o<a&&re(i[o]);)t+=i[o++];return(ae(i.charCodeAt(o))||te(i.charCodeAt(o)))&&Se({},B,K),{type:S,value:parseInt(t,8),octal:!0,start:e,end:o}}(t);n&&te(n.charCodeAt(0))&&Se({},B,K)}for(;te(i.charCodeAt(o));)e+=i[o++];n=i[o]}if("."===n){for(e+=i[o++];te(i.charCodeAt(o));)e+=i[o++];n=i[o]}if("e"===n||"E"===n)if(e+=i[o++],"+"!==(n=i[o])&&"-"!==n||(e+=i[o++]),te(i.charCodeAt(o)))for(;te(i.charCodeAt(o));)e+=i[o++];else Se({},B,K);return ae(i.charCodeAt(o))&&Se({},B,K),{type:S,value:parseFloat(e),start:t,end:o}}function ge(){var e,t,n,r;return s=null,ue(),e=o,t=function(){var e,t,n,r;for(ee("/"===(e=i[o]),"Regular expression literal must start with a slash"),t=i[o++],n=!1,r=!1;o<a;)if(t+=e=i[o++],"\\"===e)oe((e=i[o++]).charCodeAt(0))&&Se({},G),t+=e;else if(oe(e.charCodeAt(0)))Se({},G);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Se({},G),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";o<a&&se((e=i[o]).charCodeAt(0));)++o,"\\"===e&&o<a?Se({},B,K):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Se({},V,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";Se({},V)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){Se({},V)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:o}}function be(){var e;return ue(),o>=a?{type:w,start:o,end:o}:ae(e=i.charCodeAt(o))?pe():40===e||41===e||59===e?he():39===e||34===e?function(){var e,t,n,r,s="",l=!1;for(ee("'"===(e=i[o])||'"'===e,"String literal must starts with a quote"),t=o,++o;o<a;){if((n=i[o++])===e){e="";break}if("\\"===n)if((n=i[o++])&&oe(n.charCodeAt(0)))"\r"===n&&"\n"===i[o]&&++o;else switch(n){case"u":case"x":"{"===i[o]?(++o,s+=fe()):s+=ce(n);break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;default:re(n)?(0!==(r="01234567".indexOf(n))&&(l=!0),o<a&&re(i[o])&&(l=!0,r=8*r+"01234567".indexOf(i[o++]),"0123".indexOf(n)>=0&&o<a&&re(i[o])&&(r=8*r+"01234567".indexOf(i[o++]))),s+=String.fromCharCode(r)):s+=n}else{if(oe(n.charCodeAt(0)))break;s+=n}}return""!==e&&Se({},B,K),{type:j,value:s,octal:l,start:t,end:o}}():46===e?te(i.charCodeAt(o+1))?me():he():te(e)?me():he()}function ye(){var e;return o=(e=s).end,s=be(),o=e.end,e}function ve(){var e;e=o,s=be(),o=e}function xe(e,t,n){var r=new x("||"===e||"&&"===e?D:P);return r.operator=e,r.left=t,r.right=n,r}function _e(e,t){var n=new x(C);return n.callee=e,n.arguments=t,n}function we(e){var t=new x(M);return t.name=e,t}function Oe(e){var t=new x(I);return t.value=e.value,t.raw=i.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ee(e,t,n){var r=new x(R);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function ke(e,t,n){var r=new x(L);return r.key=t,r.value=n,r.kind=e,r}function Se(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return ee(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(i)).index=o,n.description=i,n}function Te(e){e.type===w&&Se(e,W),e.type===S&&Se(e,U),e.type===j&&Se(e,q),e.type===O&&Se(e,$),e.type===E&&Se(e,H),Se(e,B,e.value)}function je(e){var t=ye();t.type===T&&t.value===e||Te(t)}function Ae(e){return s.type===T&&s.value===e}function Pe(e){return s.type===E&&s.value===e}function Ce(){var e=[];for(o=s.start,je("[");!Ae("]");)Ae(",")?(ye(),e.push(null)):(e.push($e()),Ae("]")||je(","));return ye(),function(e){var t=new x(A);return t.elements=e,t}(e)}function Ne(){var e;return o=s.start,(e=ye()).type===j||e.type===S?(e.octal&&Se(e,Y),Oe(e)):we(e.value)}function Me(){var e,t,n;return o=s.start,(e=s).type===O?(n=Ne(),je(":"),ke("init",n,$e())):e.type!==w&&e.type!==T?(t=Ne(),je(":"),ke("init",t,$e())):void Te(e)}function Ie(){var e,t,n=[],r={},i=String;for(o=s.start,je("{");!Ae("}");)t="$"+((e=Me()).key.type===M?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?Se({},X):r[t]=!0,n.push(e),Ae("}")||je(",");return je("}"),function(e){var t=new x(z);return t.properties=e,t}(n)}var De={if:1,this:1};function Re(){var e,t,n;if(Ae("("))return function(){var e;return je("("),e=He(),je(")"),e}();if(Ae("["))return Ce();if(Ae("{"))return Ie();if(e=s.type,o=s.start,e===O||De[s.value])n=we(ye().value);else if(e===j||e===S)s.octal&&Se(s,Y),n=Oe(ye());else{if(e===E)throw new Error(J);e===_?((t=ye()).value="true"===t.value,n=Oe(t)):e===k?((t=ye()).value=null,n=Oe(t)):Ae("/")||Ae("/=")?(n=Oe(ge()),ve()):Te(ye())}return n}function ze(){var e=[];if(je("("),!Ae(")"))for(;o<a&&(e.push($e()),!Ae(")"));)je(",");return je(")"),e}function Le(){var e;return o=s.start,function(e){return e.type===O||e.type===E||e.type===_||e.type===k}(e=ye())||Te(e),we(e.value)}function Fe(){var e;return je("["),e=He(),je("]"),e}function Be(){var e=function(){var e;for(e=Re();;)if(Ae("."))je("."),e=Ee(".",e,Le());else if(Ae("("))e=_e(e,ze());else{if(!Ae("["))break;e=Ee("[",e,Fe())}return e}();if(s.type===T&&(Ae("++")||Ae("--")))throw new Error(J);return e}function Ue(){var e,t,n,r,i;if(s.type!==T&&s.type!==E)t=Be();else{if(Ae("++")||Ae("--"))throw new Error(J);if(Ae("+")||Ae("-")||Ae("~")||Ae("!"))e=ye(),t=Ue(),n=e.value,r=t,(i=new x(F)).operator=n,i.argument=r,i.prefix=!0,t=i;else{if(Pe("delete")||Pe("void")||Pe("typeof"))throw new Error(J);t=Be()}}return t}function qe(e){var t=0;if(e.type!==T&&e.type!==E)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function $e(){var e,t;return e=function(){var e,t,n,r,i,o,a,l,u,c;if(e=s,u=Ue(),0===(i=qe(r=s)))return u;for(r.prec=i,ye(),t=[e,s],o=[u,r,a=Ue()];(i=qe(s))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),l=o.pop().value,u=o.pop(),t.pop(),n=xe(l,u,a),o.push(n);(r=ye()).prec=i,o.push(r),t.push(s),n=Ue(),o.push(n)}for(n=o[c=o.length-1],t.pop();c>1;)t.pop(),n=xe(o[c-1].value,o[c-2],n),c-=2;return n}(),Ae("?")&&(ye(),t=$e(),je(":"),e=function(e,t,n){var r=new x(N);return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,$e())),e}function He(){var e=$e();if(Ae(","))throw new Error(J);return e}var We=function(e){o=0,a=(i=e).length,s=null,ve();var t=He();if(s.type!==w)throw new Error("Unexpect token after expression.");return t},Ve={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},Ge=n(0),Ye=function(e){function t(t,n,r){return function(i){return function(t,n,r,i){var o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}}var n="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&Object(Ge.n)("Missing arguments to clamp function."),t.length>3&&Object(Ge.n)("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),join:t("join",null),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),reverse:function(t){return"("+e(t[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase","String",0),lower:t("toLowerCase","String",0),substring:t("substring","String"),split:t("split","String"),replace:t("replace","String"),trim:t("trim","String",0),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&Object(Ge.n)("Missing arguments to if function."),t.length>3&&Object(Ge.n)("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};var Xe=function(e){var t=(e=e||{}).whitelist?Object(Ge.cb)(e.whitelist):{},n=e.blacklist?Object(Ge.cb)(e.blacklist):{},r=e.constants||Ve,i=(e.functions||Ye)(f),o=e.globalvar,a=e.fieldvar,s={},l={},u=0,c=Object(Ge.D)(o)?o:function(e){return o+'["'+e+'"]'};function f(e){if(Object(Ge.H)(e))return e;var t=d[e.type];return null==t&&Object(Ge.n)("Unsupported type: "+e.type),t(e)}var d={Literal:function(e){return e.raw},Identifier:function(e){var i=e.name;return u>0?i:Object(Ge.v)(n,i)?Object(Ge.n)("Illegal identifier: "+i):Object(Ge.v)(r,i)?r[i]:Object(Ge.v)(t,i)?i:(s[i]=1,c(i))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(u+=1);var r=f(e.property);return n===a&&(l[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(u-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Object(Ge.n)("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=Object(Ge.v)(i,t)&&i[t];return r||Object(Ge.n)("Unrecognized function: "+t),Object(Ge.D)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){u+=1;var t=f(e.key);return u-=1,t+":"+f(e.value)}};function p(e){var t={code:f(e),globals:Object.keys(s),fields:Object.keys(l)};return s={},l={},t}return p.functions=i,p.constants=r,p};n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return We})),n.d(t,"d",(function(){return Xe})),n.d(t,"f",(function(){return Ye})),n.d(t,"e",(function(){return Ve}))},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=14},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return x})),n.d(t,"h",(function(){return O})),n.d(t,"g",(function(){return E})),n.d(t,"b",(function(){return k})),n.d(t,"f",(function(){return C}));var r=n(17);function i(){}var o=.7,a=1/o,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,f=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[s,s,s,l]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,l]+"\\)$"),m=new RegExp("^hsl\\("+[l,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[l,u,u,l]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?_(t):3===n?new k(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new k(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new k(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=f.exec(e))?new k(t[1],t[2],t[3],1):(t=d.exec(e))?new k(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=p.exec(e))?w(t[1],t[2],t[3],t[4]):(t=h.exec(e))?w(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m.exec(e))?A(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?A(t[1],t[2]/100,t[3]/100,t[4]):b.hasOwnProperty(e)?_(b[e]):"transparent"===e?new k(NaN,NaN,NaN,0):null}function _(e){return new k(e>>16&255,e>>8&255,255&e,1)}function w(e,t,n,r){return r<=0&&(e=t=n=NaN),new k(e,t,n,r)}function O(e){return e instanceof i||(e=x(e)),e?new k((e=e.rgb()).r,e.g,e.b,e.opacity):new k}function E(e,t,n,r){return 1===arguments.length?O(e):new k(e,t,n,null==r?1:r)}function k(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function S(){return"#"+j(this.r)+j(this.g)+j(this.b)}function T(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function j(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function A(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new N(e,t,n,r)}function P(e){if(e instanceof N)return new N(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=x(e)),!e)return new N;if(e instanceof N)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-o,u=(a+o)/2;return l?(s=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=u<.5?a+o:2-a-o,s*=60):l=u>0&&u<1?0:s,new N(s,l,u,e.opacity)}function C(e,t,n,r){return 1===arguments.length?P(e):new N(e,t,n,null==r?1:r)}function N(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function M(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Object(r.a)(i,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return P(this).formatHsl()},formatRgb:v,toString:v}),Object(r.a)(k,E,Object(r.b)(i,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new k(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?o:Math.pow(o,e),new k(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:T,toString:T})),Object(r.a)(N,C,Object(r.b)(i,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new N(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?o:Math.pow(o,e),new N(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new k(M(e>=240?e-240:e+120,i,r),M(e,i,r),M(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},function(e,t,n){"use strict";function r(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}n.d(t,"b",(function(){return r})),t.a=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return h(e,c)},t.parseEndTime=function(e){return h(e,f)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getSDK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.default;if(window[t]&&i(window[t]))return Promise.resolve(window[t]);return new Promise((function(r,i){if(m[e])m[e].push({resolve:r,reject:i});else{m[e]=[{resolve:r,reject:i}];var a=function(t){m[e].forEach((function(e){return e.resolve(t)}))};if(n){var s=window[n];window[n]=function(){s&&s(),a(window[t])}}o(e,(function(r){r?(m[e].forEach((function(e){return e.reject(r)})),m[e]=[]):n||a(window[t])}))}}))},t.getConfig=function(e,t,n){var r=(0,i.default)(t.config,e.config),a=!0,s=!1,u=void 0;try{for(var c,f=o.DEPRECATED_CONFIG_PROPS[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var d=c.value;if(e[d]){var p=d.replace(/Config$/,"");if(r=(0,i.default)(r,l({},p,e[d])),n){var h="ReactPlayer: %c".concat(d," %cis deprecated, please use the config prop instead – ").concat("https://github.com/CookPete/react-player#config-prop");console.warn(h,"font-weight: bold","")}}}}catch(e){s=!0,u=e}finally{try{a||null==f.return||f.return()}finally{if(s)throw u}}return r},t.omit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=(t=[]).concat.apply(t,r),a={},s=Object.keys(e),l=0,u=s;l<u.length;l++){var c=u[l];-1===o.indexOf(c)&&(a[c]=e[c])}return a},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c – ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(t=this.player)[e].apply(t,i)},t.isObject=g,t.isEqual=function e(t,n){if("function"==typeof t&&"function"==typeof n)return!0;if(t instanceof Array&&n instanceof Array){if(t.length!==n.length)return!1;for(var r=0;r!==t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(g(t)&&g(n)){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t===n},t.isMediaStream=function(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream};var r=a(n(557)),i=a(n(558)),o=n(92);function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=/[?&#](?:start|t)=([0-9hms]+)/,f=/[?&#]end=([0-9hms]+)/,d=/(\d+)(h|m|s)/g,p=/^\d+$/;function h(e,t){var n=e.match(t);if(n){var r=n[1];if(r.match(d))return function(e){var t=0,n=d.exec(e);for(;null!==n;){var r=u(n,3),i=r[1],o=r[2];"h"===o&&(t+=60*parseInt(i,10)*60),"m"===o&&(t+=60*parseInt(i,10)),"s"===o&&(t+=parseInt(i,10)),n=d.exec(e)}return t}(r);if(p.test(r))return parseInt(r)}}var m={};function g(e){return null!==e&&"object"===s(e)}},function(e,t,n){"use strict";e.exports=function(e){return i.test("number"==typeof e?r(e):e.charAt(0))};var r=String.fromCharCode,i=/\s/},function(e,t,n){"use strict";var r,i,o=function(e,t,n){return r=t||a,i=n||g,y(e.trim()).map(v)},a="view",s="[",l="]",u="{",c="}",f=":",d=",",p="@",h=">",m=/[[\]{}]/,g={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function b(e,t,n,r,i){for(var o,a=0,s=e.length;t<s;++t){if(o=e[t],!a&&o===n)return t;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return t}function y(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=b(e,i,d,s+u,l+c),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function v(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=b(e,i,l,s,l))===r)throw"Empty between selector: "+e;if(2!==(t=y(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==h)throw"Expected '>' after between selector: "+e;if(t=t.map(v),(n=v(e.slice(1).trim())).between)return{between:t,stream:n};n.between=t;return n}(e):function(e){var t,n,o={source:r},a=[],h=[0,0],g=0,y=0,v=e.length,x=0;if(e[v-1]===c){if(!((x=e.lastIndexOf(u))>=0))throw"Unmatched right brace: "+e;try{h=function(e){var t=e.split(d);if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!=n)throw e;return n}))}(e.substring(x+1,v-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,x).trim(),v=e.length,x=0}if(!v)throw e;e[0]===p&&(g=++x);(t=b(e,x,f))<v&&(a.push(e.substring(y,t).trim()),y=x=++t);if((x=b(e,x,s))===v)a.push(e.substring(y,v).trim());else if(a.push(e.substring(y,x).trim()),n=[],(y=++x)===v)throw"Unmatched left bracket: "+e;for(;x<v;){if((x=b(e,x,l))===v)throw"Unmatched left bracket: "+e;if(n.push(e.substring(y,x).trim()),x<v-1&&e[++x]!==s)throw"Expected left bracket: "+e;y=++x}if(!(v=a.length)||m.test(a[v-1]))throw"Invalid event selector: "+e;v>1?(o.type=a[1],g?o.markname=a[0].slice(1):(_=a[0],i[_]?o.marktype=a[0]:o.source=a[0])):o.type=a[0];var _;"!"===o.type.slice(-1)&&(o.consume=!0,o.type=o.type.slice(0,-1));null!=n&&(o.filter=n);h[0]&&(o.throttle=h[0]);h[1]&&(o.debounce=h[1]);return o}(e)}n.d(t,"a",(function(){return o}))},function(e,t){var n=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(38),i=n(84);e.exports=function(e){return function t(n,o){switch(arguments.length){case 0:return t;case 1:return i(n)?t:r((function(t){return e(n,t)}));default:return i(n)&&i(o)?t:i(n)?r((function(t){return e(t,o)})):i(o)?r((function(t){return e(n,t)})):e(n,o)}}}},function(e,t,n){var r=n(238),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;return n=t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return m(e)}(this,(e=h(n)).call.apply(e,[this].concat(i))),b(m(t),"config",(0,a.getConfig)(t.props,o.defaultProps,!0)),b(m(t),"getDuration",(function(){return t.player?t.player.getDuration():null})),b(m(t),"getCurrentTime",(function(){return t.player?t.player.getCurrentTime():null})),b(m(t),"getSecondsLoaded",(function(){return t.player?t.player.getSecondsLoaded():null})),b(m(t),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return t.player?t.player.getInternalPlayer(e):null})),b(m(t),"seekTo",(function(e,n){if(!t.player)return null;t.player.seekTo(e,n)})),b(m(t),"ref",(function(e){t.player=e})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,t),function(e,t,n){t&&p(e.prototype,t);n&&p(e,n)}(n,[{key:"shouldComponentUpdate",value:function(e){return!(0,a.isEqual)(this.props,e)}},{key:"componentDidUpdate",value:function(){this.config=(0,a.getConfig)(this.props,o.defaultProps)}},{key:"render",value:function(){var t=this.config.file,n=t.forceVideo,r=t.forceAudio,l=t.forceHLS,u=t.forceDASH,f=n||r||l||u;if(!e.canPlay(this.props.url)&&!f)return null;var p=this.props,h=p.style,m=p.width,g=p.height,b=p.wrapper,v=(0,a.omit)(this.props,y,o.DEPRECATED_CONFIG_PROPS);return i.default.createElement(b,c({style:d({},h,{width:m,height:g})},v),i.default.createElement(s.default,c({},this.props,{ref:this.ref,activePlayer:e,config:this.config})))}}]),n}(i.Component),b(t,"displayName","".concat(e.displayName,"Player")),b(t,"propTypes",o.propTypes),b(t,"defaultProps",o.defaultProps),b(t,"canPlay",e.canPlay),n};var r,i=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(92),a=n(18),s=(r=n(147))&&r.__esModule?r:{default:r};function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=Object.keys(o.propTypes)},,function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBibliography=t.ReferencesManager=t.Bibliography=void 0;var r=a(n(359)),i=a(n(471)),o=a(n(477));function a(e){return e&&e.__esModule?e:{default:e}}t.Bibliography=r.default,t.ReferencesManager=i.default,t.makeBibliography=o.default},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports=!n(50)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(31),i=n(21),o=n(193),a=n(48),s=n(35),l=function(e,t,n){var u,c,f,d=e&l.F,p=e&l.G,h=e&l.S,m=e&l.P,g=e&l.B,b=e&l.W,y=p?i:i[t]||(i[t]={}),v=y.prototype,x=p?r:h?r[t]:(r[t]||{}).prototype;for(u in p&&(n=t),n)(c=!d&&x&&void 0!==x[u])&&s(y,u)||(f=c?x[u]:n[u],y[u]=p&&"function"!=typeof x[u]?n[u]:g&&c?o(f,r):b&&x[u]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):m&&"function"==typeof f?o(Function.call,f):f,m&&((y.virtual||(y.virtual={}))[u]=f,e&l.R&&v&&!v[u]&&a(v,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var r=n(66),i=n(194),o=n(118),a=Object.defineProperty;t.f=n(32)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(84);e.exports=function(e){return function t(n){return 0===arguments.length||r(n)?t:e.apply(this,arguments)}}},function(e,t,n){var r=n(487),i=n(492);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,p=2,h=4,m=1,g=2,b=1,y=2,v=4,x=8,_=16,w=32,O=64,E=128,k=256,S=512,T=30,j="...",A=800,P=16,C=1,N=2,M=1/0,I=9007199254740991,D=17976931348623157e292,R=NaN,z=4294967295,L=z-1,F=z>>>1,B=[["ary",E],["bind",b],["bindKey",y],["curry",x],["curryRight",_],["flip",S],["partial",w],["partialRight",O],["rearg",k]],U="[object Arguments]",q="[object Array]",$="[object AsyncFunction]",H="[object Boolean]",W="[object Date]",V="[object DOMException]",G="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",K="[object Map]",J="[object Number]",Z="[object Null]",Q="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",le="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",fe="[object Float64Array]",de="[object Int8Array]",pe="[object Int16Array]",he="[object Int32Array]",me="[object Uint8Array]",ge="[object Uint8ClampedArray]",be="[object Uint16Array]",ye="[object Uint32Array]",ve=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Oe=/[&<>"']/g,Ee=RegExp(we.source),ke=RegExp(Oe.source),Se=/<%-([\s\S]+?)%>/g,Te=/<%([\s\S]+?)%>/g,je=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(Ne.source),Ie=/^\s+|\s+$/g,De=/^\s+/,Re=/\s+$/,ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$e=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,Je=/['\n\r\u2028\u2029\\]/g,Ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Qe+"]",nt="["+Ze+"]",rt="\\d+",it="[\\u2700-\\u27bf]",ot="[a-z\\xdf-\\xf6\\xf8-\\xff]",at="[^\\ud800-\\udfff"+Qe+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",lt="[^\\ud800-\\udfff]",ut="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",ft="[A-Z\\xc0-\\xd6\\xd8-\\xde]",dt="(?:"+ot+"|"+at+")",pt="(?:"+ft+"|"+at+")",ht="(?:"+nt+"|"+st+")"+"?",mt="[\\ufe0e\\ufe0f]?"+ht+("(?:\\u200d(?:"+[lt,ut,ct].join("|")+")[\\ufe0e\\ufe0f]?"+ht+")*"),gt="(?:"+[it,ut,ct].join("|")+")"+mt,bt="(?:"+[lt+nt+"?",nt,ut,ct,et].join("|")+")",yt=RegExp("['’]","g"),vt=RegExp(nt,"g"),xt=RegExp(st+"(?="+st+")|"+bt+mt,"g"),_t=RegExp([ft+"?"+ot+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,ft,"$"].join("|")+")",pt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,ft+dt,"$"].join("|")+")",ft+"?"+dt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ft+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,gt].join("|"),"g"),wt=RegExp("[\\u200d\\ud800-\\udfff"+Ze+"\\ufe0e\\ufe0f]"),Ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kt=-1,St={};St[ce]=St[fe]=St[de]=St[pe]=St[he]=St[me]=St[ge]=St[be]=St[ye]=!0,St[U]=St[q]=St[le]=St[H]=St[ue]=St[W]=St[G]=St[Y]=St[K]=St[J]=St[Q]=St[te]=St[ne]=St[re]=St[ae]=!1;var Tt={};Tt[U]=Tt[q]=Tt[le]=Tt[ue]=Tt[H]=Tt[W]=Tt[ce]=Tt[fe]=Tt[de]=Tt[pe]=Tt[he]=Tt[K]=Tt[J]=Tt[Q]=Tt[te]=Tt[ne]=Tt[re]=Tt[ie]=Tt[me]=Tt[ge]=Tt[be]=Tt[ye]=!0,Tt[G]=Tt[Y]=Tt[ae]=!1;var jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},At=parseFloat,Pt=parseInt,Ct="object"==typeof e&&e&&e.Object===Object&&e,Nt="object"==typeof self&&self&&self.Object===Object&&self,Mt=Ct||Nt||Function("return this")(),It=t&&!t.nodeType&&t,Dt=It&&"object"==typeof r&&r&&!r.nodeType&&r,Rt=Dt&&Dt.exports===It,zt=Rt&&Ct.process,Lt=function(){try{var e=Dt&&Dt.require&&Dt.require("util").types;return e||zt&&zt.binding&&zt.binding("util")}catch(e){}}(),Ft=Lt&&Lt.isArrayBuffer,Bt=Lt&&Lt.isDate,Ut=Lt&&Lt.isMap,qt=Lt&&Lt.isRegExp,$t=Lt&&Lt.isSet,Ht=Lt&&Lt.isTypedArray;function Wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Vt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Gt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Yt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Kt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Jt(e,t){return!!(null==e?0:e.length)&&ln(e,t,0)>-1}function Zt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Qt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function en(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function tn(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function nn(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function rn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var on=dn("length");function an(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function sn(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function ln(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):sn(e,cn,n)}function un(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function cn(e){return e!=e}function fn(e,t){var n=null==e?0:e.length;return n?mn(e,t)/n:R}function dn(e){return function(t){return null==t?o:t[e]}}function pn(e){return function(t){return null==e?o:e[t]}}function hn(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function mn(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function gn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function bn(e){return function(t){return e(t)}}function yn(e,t){return Qt(t,(function(t){return e[t]}))}function vn(e,t){return e.has(t)}function xn(e,t){for(var n=-1,r=e.length;++n<r&&ln(t,e[n],0)>-1;);return n}function _n(e,t){for(var n=e.length;n--&&ln(t,e[n],0)>-1;);return n}var wn=pn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),On=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function En(e){return"\\"+jt[e]}function kn(e){return wt.test(e)}function Sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Tn(e,t){return function(n){return e(t(n))}}function jn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==f||(e[n]=f,o[i++]=n)}return o}function An(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Cn(e){return kn(e)?function(e){var t=xt.lastIndex=0;for(;xt.test(e);)++t;return t}(e):on(e)}function Nn(e){return kn(e)?function(e){return e.match(xt)||[]}(e):function(e){return e.split("")}(e)}var Mn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var In=function e(t){var n,r=(t=null==t?Mt:In.defaults(Mt.Object(),t,In.pick(Mt,Et))).Array,i=t.Date,Ze=t.Error,Qe=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,it=t.TypeError,ot=r.prototype,at=Qe.prototype,st=tt.prototype,lt=t["__core-js_shared__"],ut=at.toString,ct=st.hasOwnProperty,ft=0,dt=(n=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",pt=st.toString,ht=ut.call(tt),mt=Mt._,gt=nt("^"+ut.call(ct).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=Rt?t.Buffer:o,xt=t.Symbol,wt=t.Uint8Array,jt=bt?bt.allocUnsafe:o,Ct=Tn(tt.getPrototypeOf,tt),Nt=tt.create,It=st.propertyIsEnumerable,Dt=ot.splice,zt=xt?xt.isConcatSpreadable:o,Lt=xt?xt.iterator:o,on=xt?xt.toStringTag:o,pn=function(){try{var e=Fo(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Dn=t.clearTimeout!==Mt.clearTimeout&&t.clearTimeout,Rn=i&&i.now!==Mt.Date.now&&i.now,zn=t.setTimeout!==Mt.setTimeout&&t.setTimeout,Ln=et.ceil,Fn=et.floor,Bn=tt.getOwnPropertySymbols,Un=bt?bt.isBuffer:o,qn=t.isFinite,$n=ot.join,Hn=Tn(tt.keys,tt),Wn=et.max,Vn=et.min,Gn=i.now,Yn=t.parseInt,Xn=et.random,Kn=ot.reverse,Jn=Fo(t,"DataView"),Zn=Fo(t,"Map"),Qn=Fo(t,"Promise"),er=Fo(t,"Set"),tr=Fo(t,"WeakMap"),nr=Fo(tt,"create"),rr=tr&&new tr,ir={},or=fa(Jn),ar=fa(Zn),sr=fa(Qn),lr=fa(er),ur=fa(tr),cr=xt?xt.prototype:o,fr=cr?cr.valueOf:o,dr=cr?cr.toString:o;function pr(e){if(js(e)&&!bs(e)&&!(e instanceof br)){if(e instanceof gr)return e;if(ct.call(e,"__wrapped__"))return da(e)}return new gr(e)}var hr=function(){function e(){}return function(t){if(!Ts(t))return{};if(Nt)return Nt(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function mr(){}function gr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function br(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function yr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function vr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function xr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new xr;++t<n;)this.add(e[t])}function wr(e){var t=this.__data__=new vr(e);this.size=t.size}function Or(e,t){var n=bs(e),r=!n&&gs(e),i=!n&&!r&&_s(e),o=!n&&!r&&!i&&Rs(e),a=n||r||i||o,s=a?gn(e.length,rt):[],l=s.length;for(var u in e)!t&&!ct.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Vo(u,l))||s.push(u);return s}function Er(e){var t=e.length;return t?e[_i(0,t-1)]:o}function kr(e,t){return la(no(e),Ir(t,0,e.length))}function Sr(e){return la(no(e))}function Tr(e,t,n){(n===o||ps(e[t],n))&&(n!==o||t in e)||Nr(e,t,n)}function jr(e,t,n){var r=e[t];ct.call(e,t)&&ps(r,n)&&(n!==o||t in e)||Nr(e,t,n)}function Ar(e,t){for(var n=e.length;n--;)if(ps(e[n][0],t))return n;return-1}function Pr(e,t,n,r){return Fr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Cr(e,t){return e&&ro(t,il(t),e)}function Nr(e,t,n){"__proto__"==t&&pn?pn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Mr(e,t){for(var n=-1,i=t.length,a=r(i),s=null==e;++n<i;)a[n]=s?o:Qs(e,t[n]);return a}function Ir(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function Dr(e,t,n,r,i,a){var s,l=t&d,u=t&p,c=t&h;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!Ts(e))return e;var f=bs(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&ct.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return no(e,s)}else{var m=qo(e),g=m==Y||m==X;if(_s(e))return Ki(e,l);if(m==Q||m==U||g&&!i){if(s=u||g?{}:Ho(e),!l)return u?function(e,t){return ro(e,Uo(e),t)}(e,function(e,t){return e&&ro(t,ol(t),e)}(s,e)):function(e,t){return ro(e,Bo(e),t)}(e,Cr(s,e))}else{if(!Tt[m])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case le:return Ji(e);case H:case W:return new r(+e);case ue:return function(e,t){var n=t?Ji(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ce:case fe:case de:case pe:case he:case me:case ge:case be:case ye:return Zi(e,n);case K:return new r;case J:case re:return new r(e);case te:return function(e){var t=new e.constructor(e.source,$e.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ne:return new r;case ie:return i=e,fr?tt(fr.call(i)):{}}var i}(e,m,l)}}a||(a=new wr);var b=a.get(e);if(b)return b;a.set(e,s),Ms(e)?e.forEach((function(r){s.add(Dr(r,t,n,r,e,a))})):As(e)&&e.forEach((function(r,i){s.set(i,Dr(r,t,n,i,e,a))}));var y=f?o:(c?u?No:Co:u?ol:il)(e);return Gt(y||e,(function(r,i){y&&(r=e[i=r]),jr(s,i,Dr(r,t,n,i,e,a))})),s}function Rr(e,t,n){var r=n.length;if(null==e)return!r;for(e=tt(e);r--;){var i=n[r],a=t[i],s=e[i];if(s===o&&!(i in e)||!a(s))return!1}return!0}function zr(e,t,n){if("function"!=typeof e)throw new it(l);return ia((function(){e.apply(o,n)}),t)}function Lr(e,t,n,r){var i=-1,o=Jt,s=!0,l=e.length,u=[],c=t.length;if(!l)return u;n&&(t=Qt(t,bn(n))),r?(o=Zt,s=!1):t.length>=a&&(o=vn,s=!1,t=new _r(t));e:for(;++i<l;){var f=e[i],d=null==n?f:n(f);if(f=r||0!==f?f:0,s&&d==d){for(var p=c;p--;)if(t[p]===d)continue e;u.push(f)}else o(t,d,r)||u.push(f)}return u}pr.templateSettings={escape:Se,evaluate:Te,interpolate:je,variable:"",imports:{_:pr}},pr.prototype=mr.prototype,pr.prototype.constructor=pr,gr.prototype=hr(mr.prototype),gr.prototype.constructor=gr,br.prototype=hr(mr.prototype),br.prototype.constructor=br,yr.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},yr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yr.prototype.get=function(e){var t=this.__data__;if(nr){var n=t[e];return n===u?o:n}return ct.call(t,e)?t[e]:o},yr.prototype.has=function(e){var t=this.__data__;return nr?t[e]!==o:ct.call(t,e)},yr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nr&&t===o?u:t,this},vr.prototype.clear=function(){this.__data__=[],this.size=0},vr.prototype.delete=function(e){var t=this.__data__,n=Ar(t,e);return!(n<0)&&(n==t.length-1?t.pop():Dt.call(t,n,1),--this.size,!0)},vr.prototype.get=function(e){var t=this.__data__,n=Ar(t,e);return n<0?o:t[n][1]},vr.prototype.has=function(e){return Ar(this.__data__,e)>-1},vr.prototype.set=function(e,t){var n=this.__data__,r=Ar(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},xr.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(Zn||vr),string:new yr}},xr.prototype.delete=function(e){var t=zo(this,e).delete(e);return this.size-=t?1:0,t},xr.prototype.get=function(e){return zo(this,e).get(e)},xr.prototype.has=function(e){return zo(this,e).has(e)},xr.prototype.set=function(e,t){var n=zo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(e){return this.__data__.set(e,u),this},_r.prototype.has=function(e){return this.__data__.has(e)},wr.prototype.clear=function(){this.__data__=new vr,this.size=0},wr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},wr.prototype.get=function(e){return this.__data__.get(e)},wr.prototype.has=function(e){return this.__data__.has(e)},wr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof vr){var r=n.__data__;if(!Zn||r.length<a-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new xr(r)}return n.set(e,t),this.size=n.size,this};var Fr=ao(Gr),Br=ao(Yr,!0);function Ur(e,t){var n=!0;return Fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function qr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(l===o?s==s&&!Ds(s):n(s,l)))var l=s,u=a}return u}function $r(e,t){var n=[];return Fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Hr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Wo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Hr(s,t-1,n,r,i):en(i,s):r||(i[i.length]=s)}return i}var Wr=so(),Vr=so(!0);function Gr(e,t){return e&&Wr(e,t,il)}function Yr(e,t){return e&&Vr(e,t,il)}function Xr(e,t){return Kt(t,(function(t){return Es(e[t])}))}function Kr(e,t){for(var n=0,r=(t=Vi(t,e)).length;null!=e&&n<r;)e=e[ca(t[n++])];return n&&n==r?e:o}function Jr(e,t,n){var r=t(e);return bs(e)?r:en(r,n(e))}function Zr(e){return null==e?e===o?oe:Z:on&&on in tt(e)?function(e){var t=ct.call(e,on),n=e[on];try{e[on]=o;var r=!0}catch(e){}var i=pt.call(e);r&&(t?e[on]=n:delete e[on]);return i}(e):function(e){return pt.call(e)}(e)}function Qr(e,t){return e>t}function ei(e,t){return null!=e&&ct.call(e,t)}function ti(e,t){return null!=e&&t in tt(e)}function ni(e,t,n){for(var i=n?Zt:Jt,a=e[0].length,s=e.length,l=s,u=r(s),c=1/0,f=[];l--;){var d=e[l];l&&t&&(d=Qt(d,bn(t))),c=Vn(d.length,c),u[l]=!n&&(t||a>=120&&d.length>=120)?new _r(l&&d):o}d=e[0];var p=-1,h=u[0];e:for(;++p<a&&f.length<c;){var m=d[p],g=t?t(m):m;if(m=n||0!==m?m:0,!(h?vn(h,g):i(f,g,n))){for(l=s;--l;){var b=u[l];if(!(b?vn(b,g):i(e[l],g,n)))continue e}h&&h.push(g),f.push(m)}}return f}function ri(e,t,n){var r=null==(e=ta(e,t=Vi(t,e)))?e:e[ca(Oa(t))];return null==r?o:Wt(r,e,n)}function ii(e){return js(e)&&Zr(e)==U}function oi(e,t,n,r,i){return e===t||(null==e||null==t||!js(e)&&!js(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var s=bs(e),l=bs(t),u=s?q:qo(e),c=l?q:qo(t),f=(u=u==U?Q:u)==Q,d=(c=c==U?Q:c)==Q,p=u==c;if(p&&_s(e)){if(!_s(t))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new wr),s||Rs(e)?Ao(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(n){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case le:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case H:case W:case J:return ps(+e,+t);case G:return e.name==t.name&&e.message==t.message;case te:case re:return e==t+"";case K:var s=Sn;case ne:var l=r&m;if(s||(s=An),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=g,a.set(e,t);var c=Ao(s(e),s(t),r,i,o,a);return a.delete(e),c;case ie:if(fr)return fr.call(e)==fr.call(t)}return!1}(e,t,u,n,r,i,a);if(!(n&m)){var h=f&&ct.call(e,"__wrapped__"),b=d&&ct.call(t,"__wrapped__");if(h||b){var y=h?e.value():e,v=b?t.value():t;return a||(a=new wr),i(y,v,n,r,a)}}if(!p)return!1;return a||(a=new wr),function(e,t,n,r,i,a){var s=n&m,l=Co(e),u=l.length,c=Co(t).length;if(u!=c&&!s)return!1;var f=u;for(;f--;){var d=l[f];if(!(s?d in t:ct.call(t,d)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var h=!0;a.set(e,t),a.set(t,e);var g=s;for(;++f<u;){d=l[f];var b=e[d],y=t[d];if(r)var v=s?r(y,b,d,t,e,a):r(b,y,d,e,t,a);if(!(v===o?b===y||i(b,y,n,r,a):v)){h=!1;break}g||(g="constructor"==d)}if(h&&!g){var x=e.constructor,_=t.constructor;x!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,r,i,a)}(e,t,n,r,oi,i))}function ai(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=tt(e);i--;){var l=n[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var u=(l=n[i])[0],c=e[u],f=l[1];if(s&&l[2]){if(c===o&&!(u in e))return!1}else{var d=new wr;if(r)var p=r(c,f,u,e,t,d);if(!(p===o?oi(f,c,m|g,r,d):p))return!1}}return!0}function si(e){return!(!Ts(e)||(t=e,dt&&dt in t))&&(Es(e)?gt:Ve).test(fa(e));var t}function li(e){return"function"==typeof e?e:null==e?Pl:"object"==typeof e?bs(e)?hi(e[0],e[1]):pi(e):Fl(e)}function ui(e){if(!Jo(e))return Hn(e);var t=[];for(var n in tt(e))ct.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ci(e){if(!Ts(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Jo(e),n=[];for(var r in e)("constructor"!=r||!t&&ct.call(e,r))&&n.push(r);return n}function fi(e,t){return e<t}function di(e,t){var n=-1,i=vs(e)?r(e.length):[];return Fr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function pi(e){var t=Lo(e);return 1==t.length&&t[0][2]?Qo(t[0][0],t[0][1]):function(n){return n===e||ai(n,e,t)}}function hi(e,t){return Yo(e)&&Zo(t)?Qo(ca(e),t):function(n){var r=Qs(n,e);return r===o&&r===t?el(n,e):oi(t,r,m|g)}}function mi(e,t,n,r,i){e!==t&&Wr(t,(function(a,s){if(i||(i=new wr),Ts(a))!function(e,t,n,r,i,a,s){var l=na(e,n),u=na(t,n),c=s.get(u);if(c)return void Tr(e,n,c);var f=a?a(l,u,n+"",e,t,s):o,d=f===o;if(d){var p=bs(u),h=!p&&_s(u),m=!p&&!h&&Rs(u);f=u,p||h||m?bs(l)?f=l:xs(l)?f=no(l):h?(d=!1,f=Ki(u,!0)):m?(d=!1,f=Zi(u,!0)):f=[]:Cs(u)||gs(u)?(f=l,gs(l)?f=Hs(l):Ts(l)&&!Es(l)||(f=Ho(u))):d=!1}d&&(s.set(u,f),i(f,u,r,a,s),s.delete(u));Tr(e,n,f)}(e,t,s,n,mi,r,i);else{var l=r?r(na(e,s),a,s+"",e,t,i):o;l===o&&(l=a),Tr(e,s,l)}}),ol)}function gi(e,t){var n=e.length;if(n)return Vo(t+=t<0?n:0,n)?e[t]:o}function bi(e,t,n){var r=-1;return t=Qt(t.length?t:[Pl],bn(Ro())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(di(e,(function(e,n,i){return{criteria:Qt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var l=Qi(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function yi(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Kr(e,a);n(s,a)&&Si(o,Vi(a,e),s)}return o}function vi(e,t,n,r){var i=r?un:ln,o=-1,a=t.length,s=e;for(e===t&&(t=no(t)),n&&(s=Qt(e,bn(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Dt.call(s,l,1),Dt.call(e,l,1);return e}function xi(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Vo(i)?Dt.call(e,i,1):Li(e,i)}}return e}function _i(e,t){return e+Fn(Xn()*(t-e+1))}function wi(e,t){var n="";if(!e||t<1||t>I)return n;do{t%2&&(n+=e),(t=Fn(t/2))&&(e+=e)}while(t);return n}function Oi(e,t){return oa(ea(e,t,Pl),e+"")}function Ei(e){return Er(pl(e))}function ki(e,t){var n=pl(e);return la(n,Ir(t,0,n.length))}function Si(e,t,n,r){if(!Ts(e))return e;for(var i=-1,a=(t=Vi(t,e)).length,s=a-1,l=e;null!=l&&++i<a;){var u=ca(t[i]),c=n;if(i!=s){var f=l[u];(c=r?r(f,u,l):o)===o&&(c=Ts(f)?f:Vo(t[i+1])?[]:{})}jr(l,u,c),l=l[u]}return e}var Ti=rr?function(e,t){return rr.set(e,t),e}:Pl,ji=pn?function(e,t){return pn(e,"toString",{configurable:!0,enumerable:!1,value:Tl(t),writable:!0})}:Pl;function Ai(e){return la(pl(e))}function Pi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function Ci(e,t){var n;return Fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Ni(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=F){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Ds(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Mi(e,t,Pl,n)}function Mi(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,s=t!=t,l=null===t,u=Ds(t),c=t===o;i<a;){var f=Fn((i+a)/2),d=n(e[f]),p=d!==o,h=null===d,m=d==d,g=Ds(d);if(s)var b=r||m;else b=c?m&&(r||p):l?m&&p&&(r||!h):u?m&&p&&!h&&(r||!g):!h&&!g&&(r?d<=t:d<t);b?i=f+1:a=f}return Vn(a,L)}function Ii(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!ps(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function Di(e){return"number"==typeof e?e:Ds(e)?R:+e}function Ri(e){if("string"==typeof e)return e;if(bs(e))return Qt(e,Ri)+"";if(Ds(e))return dr?dr.call(e):"";var t=e+"";return"0"==t&&1/e==-M?"-0":t}function zi(e,t,n){var r=-1,i=Jt,o=e.length,s=!0,l=[],u=l;if(n)s=!1,i=Zt;else if(o>=a){var c=t?null:Oo(e);if(c)return An(c);s=!1,i=vn,u=new _r}else u=t?[]:l;e:for(;++r<o;){var f=e[r],d=t?t(f):f;if(f=n||0!==f?f:0,s&&d==d){for(var p=u.length;p--;)if(u[p]===d)continue e;t&&u.push(d),l.push(f)}else i(u,d,n)||(u!==l&&u.push(d),l.push(f))}return l}function Li(e,t){return null==(e=ta(e,t=Vi(t,e)))||delete e[ca(Oa(t))]}function Fi(e,t,n,r){return Si(e,t,n(Kr(e,t)),r)}function Bi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Pi(e,r?0:o,r?o+1:i):Pi(e,r?o+1:0,r?i:o)}function Ui(e,t){var n=e;return n instanceof br&&(n=n.value()),tn(t,(function(e,t){return t.func.apply(t.thisArg,en([e],t.args))}),n)}function qi(e,t,n){var i=e.length;if(i<2)return i?zi(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],l=-1;++l<i;)l!=o&&(a[o]=Lr(a[o]||s,e[l],t,n));return zi(Hr(a,1),t,n)}function $i(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;){var l=r<a?t[r]:o;n(s,e[r],l)}return s}function Hi(e){return xs(e)?e:[]}function Wi(e){return"function"==typeof e?e:Pl}function Vi(e,t){return bs(e)?e:Yo(e,t)?[e]:ua(Ws(e))}var Gi=Oi;function Yi(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:Pi(e,t,n)}var Xi=Dn||function(e){return Mt.clearTimeout(e)};function Ki(e,t){if(t)return e.slice();var n=e.length,r=jt?jt(n):new e.constructor(n);return e.copy(r),r}function Ji(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function Zi(e,t){var n=t?Ji(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Qi(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,a=Ds(e),s=t!==o,l=null===t,u=t==t,c=Ds(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!a&&!c&&e<t||c&&n&&i&&!r&&!a||l&&n&&i||!s&&i||!u)return-1}return 0}function eo(e,t,n,i){for(var o=-1,a=e.length,s=n.length,l=-1,u=t.length,c=Wn(a-s,0),f=r(u+c),d=!i;++l<u;)f[l]=t[l];for(;++o<s;)(d||o<a)&&(f[n[o]]=e[o]);for(;c--;)f[l++]=e[o++];return f}function to(e,t,n,i){for(var o=-1,a=e.length,s=-1,l=n.length,u=-1,c=t.length,f=Wn(a-l,0),d=r(f+c),p=!i;++o<f;)d[o]=e[o];for(var h=o;++u<c;)d[h+u]=t[u];for(;++s<l;)(p||o<a)&&(d[h+n[s]]=e[o++]);return d}function no(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function ro(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=r?r(n[l],e[l],l,n,e):o;u===o&&(u=e[l]),i?Nr(n,l,u):jr(n,l,u)}return n}function io(e,t){return function(n,r){var i=bs(n)?Vt:Pr,o=t?t():{};return i(n,e,Ro(r,2),o)}}function oo(e){return Oi((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,s&&Go(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=tt(t);++r<i;){var l=n[r];l&&e(t,l,r,a)}return t}))}function ao(e,t){return function(n,r){if(null==n)return n;if(!vs(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=tt(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function so(e){return function(t,n,r){for(var i=-1,o=tt(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function lo(e){return function(t){var n=kn(t=Ws(t))?Nn(t):o,r=n?n[0]:t.charAt(0),i=n?Yi(n,1).join(""):t.slice(1);return r[e]()+i}}function uo(e){return function(t){return tn(El(gl(t).replace(yt,"")),e,"")}}function co(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=hr(e.prototype),r=e.apply(n,t);return Ts(r)?r:n}}function fo(e){return function(t,n,r){var i=tt(t);if(!vs(t)){var a=Ro(n,3);t=il(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function po(e){return Po((function(t){var n=t.length,r=n,i=gr.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new it(l);if(i&&!s&&"wrapper"==Io(a))var s=new gr([],!0)}for(r=s?r:n;++r<n;){var u=Io(a=t[r]),c="wrapper"==u?Mo(a):o;s=c&&Xo(c[0])&&c[1]==(E|x|w|k)&&!c[4].length&&1==c[9]?s[Io(c[0])].apply(s,c[3]):1==a.length&&Xo(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&bs(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function ho(e,t,n,i,a,s,l,u,c,f){var d=t&E,p=t&b,h=t&y,m=t&(x|_),g=t&S,v=h?o:co(e);return function b(){for(var y=arguments.length,x=r(y),_=y;_--;)x[_]=arguments[_];if(m)var w=Do(b),O=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(x,w);if(i&&(x=eo(x,i,a,m)),s&&(x=to(x,s,l,m)),y-=O,m&&y<f){var E=jn(x,w);return _o(e,t,ho,b.placeholder,n,x,E,u,c,f-y)}var k=p?n:this,S=h?k[e]:e;return y=x.length,u?x=function(e,t){var n=e.length,r=Vn(t.length,n),i=no(e);for(;r--;){var a=t[r];e[r]=Vo(a,n)?i[a]:o}return e}(x,u):g&&y>1&&x.reverse(),d&&c<y&&(x.length=c),this&&this!==Mt&&this instanceof b&&(S=v||co(S)),S.apply(k,x)}}function mo(e,t){return function(n,r){return function(e,t,n,r){return Gr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function go(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Ri(n),r=Ri(r)):(n=Di(n),r=Di(r)),i=e(n,r)}return i}}function bo(e){return Po((function(t){return t=Qt(t,bn(Ro())),Oi((function(n){var r=this;return e(t,(function(e){return Wt(e,r,n)}))}))}))}function yo(e,t){var n=(t=t===o?" ":Ri(t)).length;if(n<2)return n?wi(t,e):t;var r=wi(t,Ln(e/Cn(t)));return kn(t)?Yi(Nn(r),0,e).join(""):r.slice(0,e)}function vo(e){return function(t,n,i){return i&&"number"!=typeof i&&Go(t,n,i)&&(n=i=o),t=Bs(t),n===o?(n=t,t=0):n=Bs(n),function(e,t,n,i){for(var o=-1,a=Wn(Ln((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,i=i===o?t<n?1:-1:Bs(i),e)}}function xo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=$s(t),n=$s(n)),e(t,n)}}function _o(e,t,n,r,i,a,s,l,u,c){var f=t&x;t|=f?w:O,(t&=~(f?O:w))&v||(t&=~(b|y));var d=[e,t,i,f?a:o,f?s:o,f?o:a,f?o:s,l,u,c],p=n.apply(o,d);return Xo(e)&&ra(p,d),p.placeholder=r,aa(p,e,t)}function wo(e){var t=et[e];return function(e,n){if(e=$s(e),(n=null==n?0:Vn(Us(n),292))&&qn(e)){var r=(Ws(e)+"e").split("e");return+((r=(Ws(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Oo=er&&1/An(new er([,-0]))[1]==M?function(e){return new er(e)}:Dl;function Eo(e){return function(t){var n=qo(t);return n==K?Sn(t):n==ne?Pn(t):function(e,t){return Qt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function ko(e,t,n,i,a,s,u,c){var d=t&y;if(!d&&"function"!=typeof e)throw new it(l);var p=i?i.length:0;if(p||(t&=~(w|O),i=a=o),u=u===o?u:Wn(Us(u),0),c=c===o?c:Us(c),p-=a?a.length:0,t&O){var h=i,m=a;i=a=o}var g=d?o:Mo(e),S=[e,t,n,i,a,h,m,s,u,c];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(b|y|E),a=r==E&&n==x||r==E&&n==k&&e[7].length<=t[8]||r==(E|k)&&t[7].length<=t[8]&&n==x;if(!o&&!a)return e;r&b&&(e[2]=t[2],i|=n&b?0:v);var s=t[3];if(s){var l=e[3];e[3]=l?eo(l,s,t[4]):s,e[4]=l?jn(e[3],f):t[4]}(s=t[5])&&(l=e[5],e[5]=l?to(l,s,t[6]):s,e[6]=l?jn(e[5],f):t[6]);(s=t[7])&&(e[7]=s);r&E&&(e[8]=null==e[8]?t[8]:Vn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(S,g),e=S[0],t=S[1],n=S[2],i=S[3],a=S[4],!(c=S[9]=S[9]===o?d?0:e.length:Wn(S[9]-p,0))&&t&(x|_)&&(t&=~(x|_)),t&&t!=b)T=t==x||t==_?function(e,t,n){var i=co(e);return function a(){for(var s=arguments.length,l=r(s),u=s,c=Do(a);u--;)l[u]=arguments[u];var f=s<3&&l[0]!==c&&l[s-1]!==c?[]:jn(l,c);return(s-=f.length)<n?_o(e,t,ho,a.placeholder,o,l,f,o,o,n-s):Wt(this&&this!==Mt&&this instanceof a?i:e,this,l)}}(e,t,c):t!=w&&t!=(b|w)||a.length?ho.apply(o,S):function(e,t,n,i){var o=t&b,a=co(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=i.length,f=r(c+l),d=this&&this!==Mt&&this instanceof t?a:e;++u<c;)f[u]=i[u];for(;l--;)f[u++]=arguments[++s];return Wt(d,o?n:this,f)}}(e,t,n,i);else var T=function(e,t,n){var r=t&b,i=co(e);return function t(){return(this&&this!==Mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return aa((g?Ti:ra)(T,S),e,t)}function So(e,t,n,r){return e===o||ps(e,st[n])&&!ct.call(r,n)?t:e}function To(e,t,n,r,i,a){return Ts(e)&&Ts(t)&&(a.set(t,e),mi(e,t,o,To,a),a.delete(t)),e}function jo(e){return Cs(e)?o:e}function Ao(e,t,n,r,i,a){var s=n&m,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var f=-1,d=!0,p=n&g?new _r:o;for(a.set(e,t),a.set(t,e);++f<l;){var h=e[f],b=t[f];if(r)var y=s?r(b,h,f,t,e,a):r(h,b,f,e,t,a);if(y!==o){if(y)continue;d=!1;break}if(p){if(!rn(t,(function(e,t){if(!vn(p,t)&&(h===e||i(h,e,n,r,a)))return p.push(t)}))){d=!1;break}}else if(h!==b&&!i(h,b,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Po(e){return oa(ea(e,o,ya),e+"")}function Co(e){return Jr(e,il,Bo)}function No(e){return Jr(e,ol,Uo)}var Mo=rr?function(e){return rr.get(e)}:Dl;function Io(e){for(var t=e.name+"",n=ir[t],r=ct.call(ir,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Do(e){return(ct.call(pr,"placeholder")?pr:e).placeholder}function Ro(){var e=pr.iteratee||Cl;return e=e===Cl?li:e,arguments.length?e(arguments[0],arguments[1]):e}function zo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Lo(e){for(var t=il(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Zo(i)]}return t}function Fo(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return si(n)?n:o}var Bo=Bn?function(e){return null==e?[]:(e=tt(e),Kt(Bn(e),(function(t){return It.call(e,t)})))}:ql,Uo=Bn?function(e){for(var t=[];e;)en(t,Bo(e)),e=Ct(e);return t}:ql,qo=Zr;function $o(e,t,n){for(var r=-1,i=(t=Vi(t,e)).length,o=!1;++r<i;){var a=ca(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ss(i)&&Vo(a,i)&&(bs(e)||gs(e))}function Ho(e){return"function"!=typeof e.constructor||Jo(e)?{}:hr(Ct(e))}function Wo(e){return bs(e)||gs(e)||!!(zt&&e&&e[zt])}function Vo(e,t){var n=typeof e;return!!(t=null==t?I:t)&&("number"==n||"symbol"!=n&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function Go(e,t,n){if(!Ts(n))return!1;var r=typeof t;return!!("number"==r?vs(n)&&Vo(t,n.length):"string"==r&&t in n)&&ps(n[t],e)}function Yo(e,t){if(bs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ds(e))||(Pe.test(e)||!Ae.test(e)||null!=t&&e in tt(t))}function Xo(e){var t=Io(e),n=pr[t];if("function"!=typeof n||!(t in br.prototype))return!1;if(e===n)return!0;var r=Mo(n);return!!r&&e===r[0]}(Jn&&qo(new Jn(new ArrayBuffer(1)))!=ue||Zn&&qo(new Zn)!=K||Qn&&"[object Promise]"!=qo(Qn.resolve())||er&&qo(new er)!=ne||tr&&qo(new tr)!=ae)&&(qo=function(e){var t=Zr(e),n=t==Q?e.constructor:o,r=n?fa(n):"";if(r)switch(r){case or:return ue;case ar:return K;case sr:return"[object Promise]";case lr:return ne;case ur:return ae}return t});var Ko=lt?Es:$l;function Jo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function Zo(e){return e==e&&!Ts(e)}function Qo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in tt(n)))}}function ea(e,t,n){return t=Wn(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=Wn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var l=r(t+1);++o<t;)l[o]=i[o];return l[t]=n(s),Wt(e,this,l)}}function ta(e,t){return t.length<2?e:Kr(e,Pi(t,0,-1))}function na(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ra=sa(Ti),ia=zn||function(e,t){return Mt.setTimeout(e,t)},oa=sa(ji);function aa(e,t,n){var r=t+"";return oa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ze,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Gt(B,(function(n){var r="_."+n[0];t&n[1]&&!Jt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Le);return t?t[1].split(Fe):[]}(r),n)))}function sa(e){var t=0,n=0;return function(){var r=Gn(),i=P-(r-n);if(n=r,i>0){if(++t>=A)return arguments[0]}else t=0;return e.apply(o,arguments)}}function la(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=_i(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var ua=function(e){var t=ss(e,(function(e){return n.size===c&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ce,(function(e,n,r,i){t.push(r?i.replace(Ue,"$1"):n||e)})),t}));function ca(e){if("string"==typeof e||Ds(e))return e;var t=e+"";return"0"==t&&1/e==-M?"-0":t}function fa(e){if(null!=e){try{return ut.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function da(e){if(e instanceof br)return e.clone();var t=new gr(e.__wrapped__,e.__chain__);return t.__actions__=no(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var pa=Oi((function(e,t){return xs(e)?Lr(e,Hr(t,1,xs,!0)):[]})),ha=Oi((function(e,t){var n=Oa(t);return xs(n)&&(n=o),xs(e)?Lr(e,Hr(t,1,xs,!0),Ro(n,2)):[]})),ma=Oi((function(e,t){var n=Oa(t);return xs(n)&&(n=o),xs(e)?Lr(e,Hr(t,1,xs,!0),o,n):[]}));function ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Us(n);return i<0&&(i=Wn(r+i,0)),sn(e,Ro(t,3),i)}function ba(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Us(n),i=n<0?Wn(r+i,0):Vn(i,r-1)),sn(e,Ro(t,3),i,!0)}function ya(e){return(null==e?0:e.length)?Hr(e,1):[]}function va(e){return e&&e.length?e[0]:o}var xa=Oi((function(e){var t=Qt(e,Hi);return t.length&&t[0]===e[0]?ni(t):[]})),_a=Oi((function(e){var t=Oa(e),n=Qt(e,Hi);return t===Oa(n)?t=o:n.pop(),n.length&&n[0]===e[0]?ni(n,Ro(t,2)):[]})),wa=Oi((function(e){var t=Oa(e),n=Qt(e,Hi);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?ni(n,o,t):[]}));function Oa(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Ea=Oi(ka);function ka(e,t){return e&&e.length&&t&&t.length?vi(e,t):e}var Sa=Po((function(e,t){var n=null==e?0:e.length,r=Mr(e,t);return xi(e,Qt(t,(function(e){return Vo(e,n)?+e:e})).sort(Qi)),r}));function Ta(e){return null==e?e:Kn.call(e)}var ja=Oi((function(e){return zi(Hr(e,1,xs,!0))})),Aa=Oi((function(e){var t=Oa(e);return xs(t)&&(t=o),zi(Hr(e,1,xs,!0),Ro(t,2))})),Pa=Oi((function(e){var t=Oa(e);return t="function"==typeof t?t:o,zi(Hr(e,1,xs,!0),o,t)}));function Ca(e){if(!e||!e.length)return[];var t=0;return e=Kt(e,(function(e){if(xs(e))return t=Wn(e.length,t),!0})),gn(t,(function(t){return Qt(e,dn(t))}))}function Na(e,t){if(!e||!e.length)return[];var n=Ca(e);return null==t?n:Qt(n,(function(e){return Wt(t,o,e)}))}var Ma=Oi((function(e,t){return xs(e)?Lr(e,t):[]})),Ia=Oi((function(e){return qi(Kt(e,xs))})),Da=Oi((function(e){var t=Oa(e);return xs(t)&&(t=o),qi(Kt(e,xs),Ro(t,2))})),Ra=Oi((function(e){var t=Oa(e);return t="function"==typeof t?t:o,qi(Kt(e,xs),o,t)})),za=Oi(Ca);var La=Oi((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,Na(e,n)}));function Fa(e){var t=pr(e);return t.__chain__=!0,t}function Ba(e,t){return t(e)}var Ua=Po((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Mr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof br&&Vo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ba,args:[i],thisArg:o}),new gr(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)}));var qa=io((function(e,t,n){ct.call(e,n)?++e[n]:Nr(e,n,1)}));var $a=fo(ga),Ha=fo(ba);function Wa(e,t){return(bs(e)?Gt:Fr)(e,Ro(t,3))}function Va(e,t){return(bs(e)?Yt:Br)(e,Ro(t,3))}var Ga=io((function(e,t,n){ct.call(e,n)?e[n].push(t):Nr(e,n,[t])}));var Ya=Oi((function(e,t,n){var i=-1,o="function"==typeof t,a=vs(e)?r(e.length):[];return Fr(e,(function(e){a[++i]=o?Wt(t,e,n):ri(e,t,n)})),a})),Xa=io((function(e,t,n){Nr(e,n,t)}));function Ka(e,t){return(bs(e)?Qt:di)(e,Ro(t,3))}var Ja=io((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Za=Oi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Go(e,t[0],t[1])?t=[]:n>2&&Go(t[0],t[1],t[2])&&(t=[t[0]]),bi(e,Hr(t,1),[])})),Qa=Rn||function(){return Mt.Date.now()};function es(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,ko(e,E,o,o,o,o,t)}function ts(e,t){var n;if("function"!=typeof t)throw new it(l);return e=Us(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var ns=Oi((function(e,t,n){var r=b;if(n.length){var i=jn(n,Do(ns));r|=w}return ko(e,r,t,n,i)})),rs=Oi((function(e,t,n){var r=b|y;if(n.length){var i=jn(n,Do(rs));r|=w}return ko(t,r,e,n,i)}));function is(e,t,n){var r,i,a,s,u,c,f=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw new it(l);function m(t){var n=r,a=i;return r=i=o,f=t,s=e.apply(a,n)}function g(e){var n=e-c;return c===o||n>=t||n<0||p&&e-f>=a}function b(){var e=Qa();if(g(e))return y(e);u=ia(b,function(e){var n=t-(e-c);return p?Vn(n,a-(e-f)):n}(e))}function y(e){return u=o,h&&r?m(e):(r=i=o,s)}function v(){var e=Qa(),n=g(e);if(r=arguments,i=this,c=e,n){if(u===o)return function(e){return f=e,u=ia(b,t),d?m(e):s}(c);if(p)return Xi(u),u=ia(b,t),m(c)}return u===o&&(u=ia(b,t)),s}return t=$s(t)||0,Ts(n)&&(d=!!n.leading,a=(p="maxWait"in n)?Wn($s(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),v.cancel=function(){u!==o&&Xi(u),f=0,r=c=i=u=o},v.flush=function(){return u===o?s:y(Qa())},v}var os=Oi((function(e,t){return zr(e,1,t)})),as=Oi((function(e,t,n){return zr(e,$s(t)||0,n)}));function ss(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(l);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ss.Cache||xr),n}function ls(e){if("function"!=typeof e)throw new it(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ss.Cache=xr;var us=Gi((function(e,t){var n=(t=1==t.length&&bs(t[0])?Qt(t[0],bn(Ro())):Qt(Hr(t,1),bn(Ro()))).length;return Oi((function(r){for(var i=-1,o=Vn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Wt(e,this,r)}))})),cs=Oi((function(e,t){var n=jn(t,Do(cs));return ko(e,w,o,t,n)})),fs=Oi((function(e,t){var n=jn(t,Do(fs));return ko(e,O,o,t,n)})),ds=Po((function(e,t){return ko(e,k,o,o,o,t)}));function ps(e,t){return e===t||e!=e&&t!=t}var hs=xo(Qr),ms=xo((function(e,t){return e>=t})),gs=ii(function(){return arguments}())?ii:function(e){return js(e)&&ct.call(e,"callee")&&!It.call(e,"callee")},bs=r.isArray,ys=Ft?bn(Ft):function(e){return js(e)&&Zr(e)==le};function vs(e){return null!=e&&Ss(e.length)&&!Es(e)}function xs(e){return js(e)&&vs(e)}var _s=Un||$l,ws=Bt?bn(Bt):function(e){return js(e)&&Zr(e)==W};function Os(e){if(!js(e))return!1;var t=Zr(e);return t==G||t==V||"string"==typeof e.message&&"string"==typeof e.name&&!Cs(e)}function Es(e){if(!Ts(e))return!1;var t=Zr(e);return t==Y||t==X||t==$||t==ee}function ks(e){return"number"==typeof e&&e==Us(e)}function Ss(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=I}function Ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function js(e){return null!=e&&"object"==typeof e}var As=Ut?bn(Ut):function(e){return js(e)&&qo(e)==K};function Ps(e){return"number"==typeof e||js(e)&&Zr(e)==J}function Cs(e){if(!js(e)||Zr(e)!=Q)return!1;var t=Ct(e);if(null===t)return!0;var n=ct.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ut.call(n)==ht}var Ns=qt?bn(qt):function(e){return js(e)&&Zr(e)==te};var Ms=$t?bn($t):function(e){return js(e)&&qo(e)==ne};function Is(e){return"string"==typeof e||!bs(e)&&js(e)&&Zr(e)==re}function Ds(e){return"symbol"==typeof e||js(e)&&Zr(e)==ie}var Rs=Ht?bn(Ht):function(e){return js(e)&&Ss(e.length)&&!!St[Zr(e)]};var zs=xo(fi),Ls=xo((function(e,t){return e<=t}));function Fs(e){if(!e)return[];if(vs(e))return Is(e)?Nn(e):no(e);if(Lt&&e[Lt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Lt]());var t=qo(e);return(t==K?Sn:t==ne?An:pl)(e)}function Bs(e){return e?(e=$s(e))===M||e===-M?(e<0?-1:1)*D:e==e?e:0:0===e?e:0}function Us(e){var t=Bs(e),n=t%1;return t==t?n?t-n:t:0}function qs(e){return e?Ir(Us(e),0,z):0}function $s(e){if("number"==typeof e)return e;if(Ds(e))return R;if(Ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ie,"");var n=We.test(e);return n||Ge.test(e)?Pt(e.slice(2),n?2:8):He.test(e)?R:+e}function Hs(e){return ro(e,ol(e))}function Ws(e){return null==e?"":Ri(e)}var Vs=oo((function(e,t){if(Jo(t)||vs(t))ro(t,il(t),e);else for(var n in t)ct.call(t,n)&&jr(e,n,t[n])})),Gs=oo((function(e,t){ro(t,ol(t),e)})),Ys=oo((function(e,t,n,r){ro(t,ol(t),e,r)})),Xs=oo((function(e,t,n,r){ro(t,il(t),e,r)})),Ks=Po(Mr);var Js=Oi((function(e,t){e=tt(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&Go(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=ol(a),l=-1,u=s.length;++l<u;){var c=s[l],f=e[c];(f===o||ps(f,st[c])&&!ct.call(e,c))&&(e[c]=a[c])}return e})),Zs=Oi((function(e){return e.push(o,To),Wt(sl,o,e)}));function Qs(e,t,n){var r=null==e?o:Kr(e,t);return r===o?n:r}function el(e,t){return null!=e&&$o(e,t,ti)}var tl=mo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),e[t]=n}),Tl(Pl)),nl=mo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),ct.call(e,t)?e[t].push(n):e[t]=[n]}),Ro),rl=Oi(ri);function il(e){return vs(e)?Or(e):ui(e)}function ol(e){return vs(e)?Or(e,!0):ci(e)}var al=oo((function(e,t,n){mi(e,t,n)})),sl=oo((function(e,t,n,r){mi(e,t,n,r)})),ll=Po((function(e,t){var n={};if(null==e)return n;var r=!1;t=Qt(t,(function(t){return t=Vi(t,e),r||(r=t.length>1),t})),ro(e,No(e),n),r&&(n=Dr(n,d|p|h,jo));for(var i=t.length;i--;)Li(n,t[i]);return n}));var ul=Po((function(e,t){return null==e?{}:function(e,t){return yi(e,t,(function(t,n){return el(e,n)}))}(e,t)}));function cl(e,t){if(null==e)return{};var n=Qt(No(e),(function(e){return[e]}));return t=Ro(t),yi(e,n,(function(e,n){return t(e,n[0])}))}var fl=Eo(il),dl=Eo(ol);function pl(e){return null==e?[]:yn(e,il(e))}var hl=uo((function(e,t,n){return t=t.toLowerCase(),e+(n?ml(t):t)}));function ml(e){return Ol(Ws(e).toLowerCase())}function gl(e){return(e=Ws(e))&&e.replace(Xe,wn).replace(vt,"")}var bl=uo((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),yl=uo((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),vl=lo("toLowerCase");var xl=uo((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var _l=uo((function(e,t,n){return e+(n?" ":"")+Ol(t)}));var wl=uo((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ol=lo("toUpperCase");function El(e,t,n){return e=Ws(e),(t=n?o:t)===o?function(e){return Ot.test(e)}(e)?function(e){return e.match(_t)||[]}(e):function(e){return e.match(Be)||[]}(e):e.match(t)||[]}var kl=Oi((function(e,t){try{return Wt(e,o,t)}catch(e){return Os(e)?e:new Ze(e)}})),Sl=Po((function(e,t){return Gt(t,(function(t){t=ca(t),Nr(e,t,ns(e[t],e))})),e}));function Tl(e){return function(){return e}}var jl=po(),Al=po(!0);function Pl(e){return e}function Cl(e){return li("function"==typeof e?e:Dr(e,d))}var Nl=Oi((function(e,t){return function(n){return ri(n,e,t)}})),Ml=Oi((function(e,t){return function(n){return ri(e,n,t)}}));function Il(e,t,n){var r=il(t),i=Xr(t,r);null!=n||Ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Xr(t,il(t)));var o=!(Ts(n)&&"chain"in n&&!n.chain),a=Es(e);return Gt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=no(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,en([this.value()],arguments))})})),e}function Dl(){}var Rl=bo(Qt),zl=bo(Xt),Ll=bo(rn);function Fl(e){return Yo(e)?dn(ca(e)):function(e){return function(t){return Kr(t,e)}}(e)}var Bl=vo(),Ul=vo(!0);function ql(){return[]}function $l(){return!1}var Hl=go((function(e,t){return e+t}),0),Wl=wo("ceil"),Vl=go((function(e,t){return e/t}),1),Gl=wo("floor");var Yl,Xl=go((function(e,t){return e*t}),1),Kl=wo("round"),Jl=go((function(e,t){return e-t}),0);return pr.after=function(e,t){if("function"!=typeof t)throw new it(l);return e=Us(e),function(){if(--e<1)return t.apply(this,arguments)}},pr.ary=es,pr.assign=Vs,pr.assignIn=Gs,pr.assignInWith=Ys,pr.assignWith=Xs,pr.at=Ks,pr.before=ts,pr.bind=ns,pr.bindAll=Sl,pr.bindKey=rs,pr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return bs(e)?e:[e]},pr.chain=Fa,pr.chunk=function(e,t,n){t=(n?Go(e,t,n):t===o)?1:Wn(Us(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,l=r(Ln(i/t));a<i;)l[s++]=Pi(e,a,a+=t);return l},pr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},pr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return en(bs(n)?no(n):[n],Hr(t,1))},pr.cond=function(e){var t=null==e?0:e.length,n=Ro();return e=t?Qt(e,(function(e){if("function"!=typeof e[1])throw new it(l);return[n(e[0]),e[1]]})):[],Oi((function(n){for(var r=-1;++r<t;){var i=e[r];if(Wt(i[0],this,n))return Wt(i[1],this,n)}}))},pr.conforms=function(e){return function(e){var t=il(e);return function(n){return Rr(n,e,t)}}(Dr(e,d))},pr.constant=Tl,pr.countBy=qa,pr.create=function(e,t){var n=hr(e);return null==t?n:Cr(n,t)},pr.curry=function e(t,n,r){var i=ko(t,x,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},pr.curryRight=function e(t,n,r){var i=ko(t,_,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},pr.debounce=is,pr.defaults=Js,pr.defaultsDeep=Zs,pr.defer=os,pr.delay=as,pr.difference=pa,pr.differenceBy=ha,pr.differenceWith=ma,pr.drop=function(e,t,n){var r=null==e?0:e.length;return r?Pi(e,(t=n||t===o?1:Us(t))<0?0:t,r):[]},pr.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Pi(e,0,(t=r-(t=n||t===o?1:Us(t)))<0?0:t):[]},pr.dropRightWhile=function(e,t){return e&&e.length?Bi(e,Ro(t,3),!0,!0):[]},pr.dropWhile=function(e,t){return e&&e.length?Bi(e,Ro(t,3),!0):[]},pr.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Go(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=Us(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:Us(r))<0&&(r+=i),r=n>r?0:qs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},pr.filter=function(e,t){return(bs(e)?Kt:$r)(e,Ro(t,3))},pr.flatMap=function(e,t){return Hr(Ka(e,t),1)},pr.flatMapDeep=function(e,t){return Hr(Ka(e,t),M)},pr.flatMapDepth=function(e,t,n){return n=n===o?1:Us(n),Hr(Ka(e,t),n)},pr.flatten=ya,pr.flattenDeep=function(e){return(null==e?0:e.length)?Hr(e,M):[]},pr.flattenDepth=function(e,t){return(null==e?0:e.length)?Hr(e,t=t===o?1:Us(t)):[]},pr.flip=function(e){return ko(e,S)},pr.flow=jl,pr.flowRight=Al,pr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},pr.functions=function(e){return null==e?[]:Xr(e,il(e))},pr.functionsIn=function(e){return null==e?[]:Xr(e,ol(e))},pr.groupBy=Ga,pr.initial=function(e){return(null==e?0:e.length)?Pi(e,0,-1):[]},pr.intersection=xa,pr.intersectionBy=_a,pr.intersectionWith=wa,pr.invert=tl,pr.invertBy=nl,pr.invokeMap=Ya,pr.iteratee=Cl,pr.keyBy=Xa,pr.keys=il,pr.keysIn=ol,pr.map=Ka,pr.mapKeys=function(e,t){var n={};return t=Ro(t,3),Gr(e,(function(e,r,i){Nr(n,t(e,r,i),e)})),n},pr.mapValues=function(e,t){var n={};return t=Ro(t,3),Gr(e,(function(e,r,i){Nr(n,r,t(e,r,i))})),n},pr.matches=function(e){return pi(Dr(e,d))},pr.matchesProperty=function(e,t){return hi(e,Dr(t,d))},pr.memoize=ss,pr.merge=al,pr.mergeWith=sl,pr.method=Nl,pr.methodOf=Ml,pr.mixin=Il,pr.negate=ls,pr.nthArg=function(e){return e=Us(e),Oi((function(t){return gi(t,e)}))},pr.omit=ll,pr.omitBy=function(e,t){return cl(e,ls(Ro(t)))},pr.once=function(e){return ts(2,e)},pr.orderBy=function(e,t,n,r){return null==e?[]:(bs(t)||(t=null==t?[]:[t]),bs(n=r?o:n)||(n=null==n?[]:[n]),bi(e,t,n))},pr.over=Rl,pr.overArgs=us,pr.overEvery=zl,pr.overSome=Ll,pr.partial=cs,pr.partialRight=fs,pr.partition=Ja,pr.pick=ul,pr.pickBy=cl,pr.property=Fl,pr.propertyOf=function(e){return function(t){return null==e?o:Kr(e,t)}},pr.pull=Ea,pr.pullAll=ka,pr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?vi(e,t,Ro(n,2)):e},pr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?vi(e,t,o,n):e},pr.pullAt=Sa,pr.range=Bl,pr.rangeRight=Ul,pr.rearg=ds,pr.reject=function(e,t){return(bs(e)?Kt:$r)(e,ls(Ro(t,3)))},pr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ro(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return xi(e,i),n},pr.rest=function(e,t){if("function"!=typeof e)throw new it(l);return Oi(e,t=t===o?t:Us(t))},pr.reverse=Ta,pr.sampleSize=function(e,t,n){return t=(n?Go(e,t,n):t===o)?1:Us(t),(bs(e)?kr:ki)(e,t)},pr.set=function(e,t,n){return null==e?e:Si(e,t,n)},pr.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Si(e,t,n,r)},pr.shuffle=function(e){return(bs(e)?Sr:Ai)(e)},pr.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Go(e,t,n)?(t=0,n=r):(t=null==t?0:Us(t),n=n===o?r:Us(n)),Pi(e,t,n)):[]},pr.sortBy=Za,pr.sortedUniq=function(e){return e&&e.length?Ii(e):[]},pr.sortedUniqBy=function(e,t){return e&&e.length?Ii(e,Ro(t,2)):[]},pr.split=function(e,t,n){return n&&"number"!=typeof n&&Go(e,t,n)&&(t=n=o),(n=n===o?z:n>>>0)?(e=Ws(e))&&("string"==typeof t||null!=t&&!Ns(t))&&!(t=Ri(t))&&kn(e)?Yi(Nn(e),0,n):e.split(t,n):[]},pr.spread=function(e,t){if("function"!=typeof e)throw new it(l);return t=null==t?0:Wn(Us(t),0),Oi((function(n){var r=n[t],i=Yi(n,0,t);return r&&en(i,r),Wt(e,this,i)}))},pr.tail=function(e){var t=null==e?0:e.length;return t?Pi(e,1,t):[]},pr.take=function(e,t,n){return e&&e.length?Pi(e,0,(t=n||t===o?1:Us(t))<0?0:t):[]},pr.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Pi(e,(t=r-(t=n||t===o?1:Us(t)))<0?0:t,r):[]},pr.takeRightWhile=function(e,t){return e&&e.length?Bi(e,Ro(t,3),!1,!0):[]},pr.takeWhile=function(e,t){return e&&e.length?Bi(e,Ro(t,3)):[]},pr.tap=function(e,t){return t(e),e},pr.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new it(l);return Ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),is(e,t,{leading:r,maxWait:t,trailing:i})},pr.thru=Ba,pr.toArray=Fs,pr.toPairs=fl,pr.toPairsIn=dl,pr.toPath=function(e){return bs(e)?Qt(e,ca):Ds(e)?[e]:no(ua(Ws(e)))},pr.toPlainObject=Hs,pr.transform=function(e,t,n){var r=bs(e),i=r||_s(e)||Rs(e);if(t=Ro(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ts(e)&&Es(o)?hr(Ct(e)):{}}return(i?Gt:Gr)(e,(function(e,r,i){return t(n,e,r,i)})),n},pr.unary=function(e){return es(e,1)},pr.union=ja,pr.unionBy=Aa,pr.unionWith=Pa,pr.uniq=function(e){return e&&e.length?zi(e):[]},pr.uniqBy=function(e,t){return e&&e.length?zi(e,Ro(t,2)):[]},pr.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?zi(e,o,t):[]},pr.unset=function(e,t){return null==e||Li(e,t)},pr.unzip=Ca,pr.unzipWith=Na,pr.update=function(e,t,n){return null==e?e:Fi(e,t,Wi(n))},pr.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Fi(e,t,Wi(n),r)},pr.values=pl,pr.valuesIn=function(e){return null==e?[]:yn(e,ol(e))},pr.without=Ma,pr.words=El,pr.wrap=function(e,t){return cs(Wi(t),e)},pr.xor=Ia,pr.xorBy=Da,pr.xorWith=Ra,pr.zip=za,pr.zipObject=function(e,t){return $i(e||[],t||[],jr)},pr.zipObjectDeep=function(e,t){return $i(e||[],t||[],Si)},pr.zipWith=La,pr.entries=fl,pr.entriesIn=dl,pr.extend=Gs,pr.extendWith=Ys,Il(pr,pr),pr.add=Hl,pr.attempt=kl,pr.camelCase=hl,pr.capitalize=ml,pr.ceil=Wl,pr.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=$s(n))==n?n:0),t!==o&&(t=(t=$s(t))==t?t:0),Ir($s(e),t,n)},pr.clone=function(e){return Dr(e,h)},pr.cloneDeep=function(e){return Dr(e,d|h)},pr.cloneDeepWith=function(e,t){return Dr(e,d|h,t="function"==typeof t?t:o)},pr.cloneWith=function(e,t){return Dr(e,h,t="function"==typeof t?t:o)},pr.conformsTo=function(e,t){return null==t||Rr(e,t,il(t))},pr.deburr=gl,pr.defaultTo=function(e,t){return null==e||e!=e?t:e},pr.divide=Vl,pr.endsWith=function(e,t,n){e=Ws(e),t=Ri(t);var r=e.length,i=n=n===o?r:Ir(Us(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},pr.eq=ps,pr.escape=function(e){return(e=Ws(e))&&ke.test(e)?e.replace(Oe,On):e},pr.escapeRegExp=function(e){return(e=Ws(e))&&Me.test(e)?e.replace(Ne,"\\$&"):e},pr.every=function(e,t,n){var r=bs(e)?Xt:Ur;return n&&Go(e,t,n)&&(t=o),r(e,Ro(t,3))},pr.find=$a,pr.findIndex=ga,pr.findKey=function(e,t){return an(e,Ro(t,3),Gr)},pr.findLast=Ha,pr.findLastIndex=ba,pr.findLastKey=function(e,t){return an(e,Ro(t,3),Yr)},pr.floor=Gl,pr.forEach=Wa,pr.forEachRight=Va,pr.forIn=function(e,t){return null==e?e:Wr(e,Ro(t,3),ol)},pr.forInRight=function(e,t){return null==e?e:Vr(e,Ro(t,3),ol)},pr.forOwn=function(e,t){return e&&Gr(e,Ro(t,3))},pr.forOwnRight=function(e,t){return e&&Yr(e,Ro(t,3))},pr.get=Qs,pr.gt=hs,pr.gte=ms,pr.has=function(e,t){return null!=e&&$o(e,t,ei)},pr.hasIn=el,pr.head=va,pr.identity=Pl,pr.includes=function(e,t,n,r){e=vs(e)?e:pl(e),n=n&&!r?Us(n):0;var i=e.length;return n<0&&(n=Wn(i+n,0)),Is(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&ln(e,t,n)>-1},pr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Us(n);return i<0&&(i=Wn(r+i,0)),ln(e,t,i)},pr.inRange=function(e,t,n){return t=Bs(t),n===o?(n=t,t=0):n=Bs(n),function(e,t,n){return e>=Vn(t,n)&&e<Wn(t,n)}(e=$s(e),t,n)},pr.invoke=rl,pr.isArguments=gs,pr.isArray=bs,pr.isArrayBuffer=ys,pr.isArrayLike=vs,pr.isArrayLikeObject=xs,pr.isBoolean=function(e){return!0===e||!1===e||js(e)&&Zr(e)==H},pr.isBuffer=_s,pr.isDate=ws,pr.isElement=function(e){return js(e)&&1===e.nodeType&&!Cs(e)},pr.isEmpty=function(e){if(null==e)return!0;if(vs(e)&&(bs(e)||"string"==typeof e||"function"==typeof e.splice||_s(e)||Rs(e)||gs(e)))return!e.length;var t=qo(e);if(t==K||t==ne)return!e.size;if(Jo(e))return!ui(e).length;for(var n in e)if(ct.call(e,n))return!1;return!0},pr.isEqual=function(e,t){return oi(e,t)},pr.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?oi(e,t,o,n):!!r},pr.isError=Os,pr.isFinite=function(e){return"number"==typeof e&&qn(e)},pr.isFunction=Es,pr.isInteger=ks,pr.isLength=Ss,pr.isMap=As,pr.isMatch=function(e,t){return e===t||ai(e,t,Lo(t))},pr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,ai(e,t,Lo(t),n)},pr.isNaN=function(e){return Ps(e)&&e!=+e},pr.isNative=function(e){if(Ko(e))throw new Ze(s);return si(e)},pr.isNil=function(e){return null==e},pr.isNull=function(e){return null===e},pr.isNumber=Ps,pr.isObject=Ts,pr.isObjectLike=js,pr.isPlainObject=Cs,pr.isRegExp=Ns,pr.isSafeInteger=function(e){return ks(e)&&e>=-I&&e<=I},pr.isSet=Ms,pr.isString=Is,pr.isSymbol=Ds,pr.isTypedArray=Rs,pr.isUndefined=function(e){return e===o},pr.isWeakMap=function(e){return js(e)&&qo(e)==ae},pr.isWeakSet=function(e){return js(e)&&Zr(e)==se},pr.join=function(e,t){return null==e?"":$n.call(e,t)},pr.kebabCase=bl,pr.last=Oa,pr.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=Us(n))<0?Wn(r+i,0):Vn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):sn(e,cn,i,!0)},pr.lowerCase=yl,pr.lowerFirst=vl,pr.lt=zs,pr.lte=Ls,pr.max=function(e){return e&&e.length?qr(e,Pl,Qr):o},pr.maxBy=function(e,t){return e&&e.length?qr(e,Ro(t,2),Qr):o},pr.mean=function(e){return fn(e,Pl)},pr.meanBy=function(e,t){return fn(e,Ro(t,2))},pr.min=function(e){return e&&e.length?qr(e,Pl,fi):o},pr.minBy=function(e,t){return e&&e.length?qr(e,Ro(t,2),fi):o},pr.stubArray=ql,pr.stubFalse=$l,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Xl,pr.nth=function(e,t){return e&&e.length?gi(e,Us(t)):o},pr.noConflict=function(){return Mt._===this&&(Mt._=mt),this},pr.noop=Dl,pr.now=Qa,pr.pad=function(e,t,n){e=Ws(e);var r=(t=Us(t))?Cn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return yo(Fn(i),n)+e+yo(Ln(i),n)},pr.padEnd=function(e,t,n){e=Ws(e);var r=(t=Us(t))?Cn(e):0;return t&&r<t?e+yo(t-r,n):e},pr.padStart=function(e,t,n){e=Ws(e);var r=(t=Us(t))?Cn(e):0;return t&&r<t?yo(t-r,n)+e:e},pr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Yn(Ws(e).replace(De,""),t||0)},pr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Go(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=Bs(e),t===o?(t=e,e=0):t=Bs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Xn();return Vn(e+i*(t-e+At("1e-"+((i+"").length-1))),t)}return _i(e,t)},pr.reduce=function(e,t,n){var r=bs(e)?tn:hn,i=arguments.length<3;return r(e,Ro(t,4),n,i,Fr)},pr.reduceRight=function(e,t,n){var r=bs(e)?nn:hn,i=arguments.length<3;return r(e,Ro(t,4),n,i,Br)},pr.repeat=function(e,t,n){return t=(n?Go(e,t,n):t===o)?1:Us(t),wi(Ws(e),t)},pr.replace=function(){var e=arguments,t=Ws(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pr.result=function(e,t,n){var r=-1,i=(t=Vi(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[ca(t[r])];a===o&&(r=i,a=n),e=Es(a)?a.call(e):a}return e},pr.round=Kl,pr.runInContext=e,pr.sample=function(e){return(bs(e)?Er:Ei)(e)},pr.size=function(e){if(null==e)return 0;if(vs(e))return Is(e)?Cn(e):e.length;var t=qo(e);return t==K||t==ne?e.size:ui(e).length},pr.snakeCase=xl,pr.some=function(e,t,n){var r=bs(e)?rn:Ci;return n&&Go(e,t,n)&&(t=o),r(e,Ro(t,3))},pr.sortedIndex=function(e,t){return Ni(e,t)},pr.sortedIndexBy=function(e,t,n){return Mi(e,t,Ro(n,2))},pr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Ni(e,t);if(r<n&&ps(e[r],t))return r}return-1},pr.sortedLastIndex=function(e,t){return Ni(e,t,!0)},pr.sortedLastIndexBy=function(e,t,n){return Mi(e,t,Ro(n,2),!0)},pr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Ni(e,t,!0)-1;if(ps(e[n],t))return n}return-1},pr.startCase=_l,pr.startsWith=function(e,t,n){return e=Ws(e),n=null==n?0:Ir(Us(n),0,e.length),t=Ri(t),e.slice(n,n+t.length)==t},pr.subtract=Jl,pr.sum=function(e){return e&&e.length?mn(e,Pl):0},pr.sumBy=function(e,t){return e&&e.length?mn(e,Ro(t,2)):0},pr.template=function(e,t,n){var r=pr.templateSettings;n&&Go(e,t,n)&&(t=o),e=Ws(e),t=Ys({},t,r,So);var i,a,s=Ys({},t.imports,r.imports,So),l=il(s),u=yn(s,l),c=0,f=t.interpolate||Ke,d="__p += '",p=nt((t.escape||Ke).source+"|"+f.source+"|"+(f===je?qe:Ke).source+"|"+(t.evaluate||Ke).source+"|$","g"),h="//# sourceURL="+(ct.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++kt+"]")+"\n";e.replace(p,(function(t,n,r,o,s,l){return r||(r=o),d+=e.slice(c,l).replace(Je,En),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var m=ct.call(t,"variable")&&t.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(ve,""):d).replace(xe,"$1").replace(_e,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=kl((function(){return Qe(l,h+"return "+d).apply(o,u)}));if(g.source=d,Os(g))throw g;return g},pr.times=function(e,t){if((e=Us(e))<1||e>I)return[];var n=z,r=Vn(e,z);t=Ro(t),e-=z;for(var i=gn(r,t);++n<e;)t(n);return i},pr.toFinite=Bs,pr.toInteger=Us,pr.toLength=qs,pr.toLower=function(e){return Ws(e).toLowerCase()},pr.toNumber=$s,pr.toSafeInteger=function(e){return e?Ir(Us(e),-I,I):0===e?e:0},pr.toString=Ws,pr.toUpper=function(e){return Ws(e).toUpperCase()},pr.trim=function(e,t,n){if((e=Ws(e))&&(n||t===o))return e.replace(Ie,"");if(!e||!(t=Ri(t)))return e;var r=Nn(e),i=Nn(t);return Yi(r,xn(r,i),_n(r,i)+1).join("")},pr.trimEnd=function(e,t,n){if((e=Ws(e))&&(n||t===o))return e.replace(Re,"");if(!e||!(t=Ri(t)))return e;var r=Nn(e);return Yi(r,0,_n(r,Nn(t))+1).join("")},pr.trimStart=function(e,t,n){if((e=Ws(e))&&(n||t===o))return e.replace(De,"");if(!e||!(t=Ri(t)))return e;var r=Nn(e);return Yi(r,xn(r,Nn(t))).join("")},pr.truncate=function(e,t){var n=T,r=j;if(Ts(t)){var i="separator"in t?t.separator:i;n="length"in t?Us(t.length):n,r="omission"in t?Ri(t.omission):r}var a=(e=Ws(e)).length;if(kn(e)){var s=Nn(e);a=s.length}if(n>=a)return e;var l=n-Cn(r);if(l<1)return r;var u=s?Yi(s,0,l).join(""):e.slice(0,l);if(i===o)return u+r;if(s&&(l+=u.length-l),Ns(i)){if(e.slice(l).search(i)){var c,f=u;for(i.global||(i=nt(i.source,Ws($e.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;u=u.slice(0,d===o?l:d)}}else if(e.indexOf(Ri(i),l)!=l){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+r},pr.unescape=function(e){return(e=Ws(e))&&Ee.test(e)?e.replace(we,Mn):e},pr.uniqueId=function(e){var t=++ft;return Ws(e)+t},pr.upperCase=wl,pr.upperFirst=Ol,pr.each=Wa,pr.eachRight=Va,pr.first=va,Il(pr,(Yl={},Gr(pr,(function(e,t){ct.call(pr.prototype,t)||(Yl[t]=e)})),Yl),{chain:!1}),pr.VERSION="4.17.15",Gt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){pr[e].placeholder=pr})),Gt(["drop","take"],(function(e,t){br.prototype[e]=function(n){n=n===o?1:Wn(Us(n),0);var r=this.__filtered__&&!t?new br(this):this.clone();return r.__filtered__?r.__takeCount__=Vn(n,r.__takeCount__):r.__views__.push({size:Vn(n,z),type:e+(r.__dir__<0?"Right":"")}),r},br.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Gt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=n==C||3==n;br.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ro(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Gt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");br.prototype[e]=function(){return this[n](1).value()[0]}})),Gt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");br.prototype[e]=function(){return this.__filtered__?new br(this):this[n](1)}})),br.prototype.compact=function(){return this.filter(Pl)},br.prototype.find=function(e){return this.filter(e).head()},br.prototype.findLast=function(e){return this.reverse().find(e)},br.prototype.invokeMap=Oi((function(e,t){return"function"==typeof e?new br(this):this.map((function(n){return ri(n,e,t)}))})),br.prototype.reject=function(e){return this.filter(ls(Ro(e)))},br.prototype.slice=function(e,t){e=Us(e);var n=this;return n.__filtered__&&(e>0||t<0)?new br(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=Us(t))<0?n.dropRight(-t):n.take(t-e)),n)},br.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},br.prototype.toArray=function(){return this.take(z)},Gr(br.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=pr[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(pr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof br,u=s[0],c=l||bs(t),f=function(e){var t=i.apply(pr,en([e],s));return r&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,m=l&&!p;if(!a&&c){t=m?t:new br(this);var g=e.apply(t,s);return g.__actions__.push({func:Ba,args:[f],thisArg:o}),new gr(g,d)}return h&&m?e.apply(this,s):(g=this.thru(f),h?r?g.value()[0]:g.value():g)})})),Gt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ot[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);pr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(bs(i)?i:[],e)}return this[n]((function(n){return t.apply(bs(n)?n:[],e)}))}})),Gr(br.prototype,(function(e,t){var n=pr[t];if(n){var r=n.name+"";ct.call(ir,r)||(ir[r]=[]),ir[r].push({name:t,func:n})}})),ir[ho(o,y).name]=[{name:"wrapper",func:o}],br.prototype.clone=function(){var e=new br(this.__wrapped__);return e.__actions__=no(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=no(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=no(this.__views__),e},br.prototype.reverse=function(){if(this.__filtered__){var e=new br(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},br.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=bs(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Vn(t,e+a);break;case"takeRight":e=Wn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,p=Vn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return Ui(e,this.__actions__);var h=[];e:for(;l--&&d<p;){for(var m=-1,g=e[u+=t];++m<f;){var b=c[m],y=b.iteratee,v=b.type,x=y(g);if(v==N)g=x;else if(!x){if(v==C)continue e;break e}}h[d++]=g}return h},pr.prototype.at=Ua,pr.prototype.chain=function(){return Fa(this)},pr.prototype.commit=function(){return new gr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===o&&(this.__values__=Fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},pr.prototype.plant=function(e){for(var t,n=this;n instanceof mr;){var r=da(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},pr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof br){var t=e;return this.__actions__.length&&(t=new br(this)),(t=t.reverse()).__actions__.push({func:Ba,args:[Ta],thisArg:o}),new gr(t,this.__chain__)}return this.thru(Ta)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Ui(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Lt&&(pr.prototype[Lt]=function(){return this}),pr}();Mt._=In,(i=function(){return In}.call(t,n,t,r))===o||(r.exports=i)}).call(this)}).call(this,n(33),n(90)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={container:{background:"rgba(0, 0, 0, 0.8)",gutter:{horizontal:10,vertical:10},zIndex:2001},header:{height:40},close:{fill:"white"},footer:{color:"white",count:{color:"rgba(255, 255, 255, 0.75)",fontSize:"0.85em"},height:40,gutter:{horizontal:0,vertical:5}},thumbnail:{activeBorderColor:"white",size:50,gutter:2},arrow:{background:"none",fill:"white",height:120}};t.default=r},function(e,t,n){e.exports=n(598)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(94));function o(e){return e&&e.__esModule?e:{default:e}}t.default=({src:e=""})=>r.default.createElement(i.default,{source:e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const s=(e,{LinkComponent:t,navigateTo:n})=>{return r.default.createElement(t,a({},e,{onClick:()=>{n(e.to)}}))};s.contextTypes={LinkComponent:i.default.func,navigateTo:i.default.func};var l=s;t.default=l},,function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(352)},function(e,t,n){var r=n(190),i=n(113);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(37),i=n(80);e.exports=n(32)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(116)("wks"),i=n(79),o=n(31).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(29),i=n(212),o=(n(125),n(211),Object.prototype.hasOwnProperty),a=n(213),s={key:!0,ref:!0,__self:!0,__source:!0};function l(e){return void 0!==e.ref}function u(e){return void 0!==e.key}var c=function(e,t,n,r,i,o,s){return{$$typeof:a,type:e,key:t,ref:n,props:s,_owner:o}};c.createElement=function(e,t,n){var r,a={},f=null,d=null;if(null!=t)for(r in l(t)&&(d=t.ref),u(t)&&(f=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source,t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);var p=arguments.length-2;if(1===p)a.children=n;else if(p>1){for(var h=Array(p),m=0;m<p;m++)h[m]=arguments[m+2];0,a.children=h}if(e&&e.defaultProps){var g=e.defaultProps;for(r in g)void 0===a[r]&&(a[r]=g[r])}return c(e,f,d,0,0,i.current,a)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){return c(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},c.cloneElement=function(e,t,n){var a,f,d=r({},e.props),p=e.key,h=e.ref,m=(e._self,e._source,e._owner);if(null!=t)for(a in l(t)&&(h=t.ref,m=i.current),u(t)&&(p=""+t.key),e.type&&e.type.defaultProps&&(f=e.type.defaultProps),t)o.call(t,a)&&!s.hasOwnProperty(a)&&(void 0===t[a]&&void 0!==f?d[a]=f[a]:d[a]=t[a]);var g=arguments.length-2;if(1===g)d.children=n;else if(g>1){for(var b=Array(g),y=0;y<g;y++)b[y]=arguments[y+2];d.children=b}return c(e.type,p,h,0,0,m,d)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},e.exports=c},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i({},t);return Object.keys(n).forEach((function(i){"object"===r(n[i])&&n[i]&&t[i]?o[i]=e(t[i],n[i]):o[i]=n[i]})),o}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,f=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),i=c(n(1)),o=c(n(172)),a=n(4),s=c(n(305)),l=c(n(44)),u=c(n(306));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=({production:e,edition:t,assetId:n,resourceId:i},{translate:c})=>{const d=e.contextualizations[n],p=i||d.sourceId,h=(0,a.getContextualizationsFromEdition)(e,t).filter(({contextualization:{id:t}})=>n?t!==n&&e.contextualizations[t]&&e.contextualizations[t].sourceId===p:e.contextualizations[t]&&e.contextualizations[t].sourceId===p).filter(e=>e).map(({contextualization:t})=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e})({},t,(0,a.buildContextContent)(e,t.id))),m=e.resources[p];let g=(0,a.resourceToCslJSON)(m);return g=g&&g.length?g[0]:{},r.default.createElement("div",{className:"related-contexts"},r.default.createElement("div",{className:"header"},r.default.createElement(u.default,{resource:m,production:e,edition:t,showTitle:!1}),r.default.createElement("div",{className:"related-contexts-actions"},g.URL&&r.default.createElement("a",{target:"blank",rel:"noopener",href:g.URL},c("Browse online")))),h.length?r.default.createElement("div",{className:"related-contexts-container"},r.default.createElement("div",{className:"mentions-title-container"},r.default.createElement("span",{className:"mentions-title"},c("mentions"))),r.default.createElement("ul",{className:"related-contexts-list"},h.filter(e=>void 0!==e.targetContents).map(t=>r.default.createElement("li",{className:"related-context",key:t.id},r.default.createElement(s.default,{targetContents:t.targetContents,contents:t.contents,sectionTitle:(0,a.getResourceTitle)(e.resources[t.targetId]),targetId:t.targetId,contextualizationId:t.id}))))):r.default.createElement("div",{className:"body"}),r.default.createElement("div",{className:"footer"},r.default.createElement("div",null,r.default.createElement(l.default,{to:{routeClass:"resourceSheet",routeParams:{resourceId:m.id}},target:"blank",rel:"noopener"},c("print mentions"))),(0,a.resourceHasContents)(m)&&r.default.createElement("div",null,r.default.createElement(l.default,{to:{routeClass:"resourcePage",routeParams:{resourceId:m.id}},target:"blank",rel:"noopener"},c("expand contents")))),r.default.createElement(o.default,{id:"tooltip"}))};d.contextTypes={translate:i.default.func};var p=d;t.default=p},function(e,t,n){t.__esModule=!0,t.Helmet=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(2)),a=f(n(1)),s=f(n(784)),l=f(n(785)),u=n(786),c=n(309);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var p,h,m,g=(0,s.default)(u.reducePropsToState,u.handleClientStateChange,u.mapStateOnServer)((function(){return null})),b=(p=g,m=h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!(0,l.default)(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case c.TAG_NAMES.SCRIPT:case c.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case c.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,i=e.arrayTypeChildren,o=e.newChildProps,a=e.nestedChildren;return r({},i,((t={})[n.type]=[].concat(i[n.type]||[],[r({},o,this.mapNestedChildrenToProps(n,a))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,i=e.child,o=e.newProps,a=e.newChildProps,s=e.nestedChildren;switch(i.type){case c.TAG_NAMES.TITLE:return r({},o,((t={})[i.type]=s,t.titleAttributes=r({},a),t));case c.TAG_NAMES.BODY:return r({},o,{bodyAttributes:r({},a)});case c.TAG_NAMES.HTML:return r({},o,{htmlAttributes:r({},a)})}return r({},o,((n={})[i.type]=r({},a),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=r({},t);return Object.keys(e).forEach((function(t){var i;n=r({},n,((i={})[t]=e[t],i))})),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return o.default.Children.forEach(e,(function(e){if(e&&e.props){var i=e.props,o=i.children,a=d(i,["children"]),s=(0,u.convertReactPropstoHtmlAttributes)(a);switch(n.warnOnInvalidChildren(e,o),e.type){case c.TAG_NAMES.LINK:case c.TAG_NAMES.META:case c.TAG_NAMES.NOSCRIPT:case c.TAG_NAMES.SCRIPT:case c.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o})}}})),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=d(e,["children"]),i=r({},n);return t&&(i=this.mapChildrenToProps(t,i)),o.default.createElement(p,i)},i(t,null,[{key:"canUseDOM",set:function(e){p.canUseDOM=e}}]),t}(o.default.Component),h.propTypes={base:a.default.object,bodyAttributes:a.default.object,children:a.default.oneOfType([a.default.arrayOf(a.default.node),a.default.node]),defaultTitle:a.default.string,defer:a.default.bool,encodeSpecialCharacters:a.default.bool,htmlAttributes:a.default.object,link:a.default.arrayOf(a.default.object),meta:a.default.arrayOf(a.default.object),noscript:a.default.arrayOf(a.default.object),onChangeClientState:a.default.func,script:a.default.arrayOf(a.default.object),style:a.default.arrayOf(a.default.object),title:a.default.string,titleAttributes:a.default.object,titleTemplate:a.default.string},h.defaultProps={defer:!0,encodeSpecialCharacters:!0},h.peek=p.peek,h.rewind=function(){var e=p.rewind();return e||(e=(0,u.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},m);b.renderStatic=b.rewind,t.Helmet=b,t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e,isActive:t,title:n="",onClose:i},{toggleAsideVisible:o})=>r.default.createElement("aside",{className:`aside ${t?"is-active":""}`},r.default.createElement("button",{className:"aside-toggle",onClick:o},"▶"),r.default.createElement("div",{className:"aside-content"},r.default.createElement("div",{className:"aside-header"},r.default.createElement("h4",{className:"aside-title"},n),"function"==typeof i&&r.default.createElement("button",{onClick:i,className:"aside-close-btn"},"×")),r.default.createElement("div",{className:"aside-body"},e)));a.contextTypes={toggleAsideVisible:i.default.func};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const s=(e,{LinkComponent:t,navigateTo:n})=>{return r.default.createElement(t,a({},e,{onClick:()=>{n(e.to)}}))};s.contextTypes={LinkComponent:i.default.func,navigateTo:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(10),i=n.n(r),o=n(2),a=n.n(o),s=n(1),l=n.n(s);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function f(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var d=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&c(e),a=t&&c(t),s=o||a;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var u=0,d=i.length;d>=0;d--){var p=i[d];"."===p?f(i,d):".."===p?(f(i,d),u++):u&&(f(i,d),u--)}if(!s)for(;u--;u)i.unshift("..");!s||""===i[0]||i[0]&&c(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};function p(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var h=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"==typeof t||"object"==typeof n){var r=p(t),i=p(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},m=!0,g="Invariant failed";var b=function(e,t){if(!e)throw m?new Error(g):new Error(g+": "+(t||""))};function y(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function x(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function _(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function w(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function O(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=u({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=d(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function E(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var k=!("undefined"==typeof window||!window.document||!window.document.createElement);function S(e,t){t(window.confirm(e))}var T="popstate",j="hashchange";function A(){try{return window.history.state||{}}catch(e){return{}}}function P(e){void 0===e&&(e={}),k||b(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,c=void 0===l?S:l,f=o.keyLength,d=void 0===f?6:f,p=e.basename?_(y(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return p&&(o=x(o,p)),O(o,r,n)}function m(){return Math.random().toString(36).substr(2,d)}var g=E();function v(e){u(U,e),U.length=n.length,g.notifyListeners(U.location,U.action)}function P(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(h(e.state))}function C(){M(h(A()))}var N=!1;function M(e){if(N)N=!1,v();else{g.confirmTransitionTo(e,"POP",c,(function(t){t?v({action:"POP",location:e}):function(e){var t=U.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,z(i))}(e)}))}}var I=h(A()),D=[I.key];function R(e){return p+w(e)}function z(e){n.go(e)}var L=0;function F(e){1===(L+=e)&&1===e?(window.addEventListener(T,P),i&&window.addEventListener(j,C)):0===L&&(window.removeEventListener(T,P),i&&window.removeEventListener(j,C))}var B=!1;var U={length:n.length,action:"POP",location:I,createHref:R,push:function(e,t){var i=O(e,t,m(),U.location);g.confirmTransitionTo(i,"PUSH",c,(function(e){if(e){var t=R(i),o=i.key,a=i.state;if(r)if(n.pushState({key:o,state:a},null,t),s)window.location.href=t;else{var l=D.indexOf(U.location.key),u=D.slice(0,l+1);u.push(i.key),D=u,v({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(e,t){var i=O(e,t,m(),U.location);g.confirmTransitionTo(i,"REPLACE",c,(function(e){if(e){var t=R(i),o=i.key,a=i.state;if(r)if(n.replaceState({key:o,state:a},null,t),s)window.location.replace(t);else{var l=D.indexOf(U.location.key);-1!==l&&(D[l]=i.key),v({action:"REPLACE",location:i})}else window.location.replace(t)}}))},go:z,goBack:function(){z(-1)},goForward:function(){z(1)},block:function(e){void 0===e&&(e=!1);var t=g.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=g.appendListener(e);return F(1),function(){F(-1),t()}}};return U}var C="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:y},slash:{encodePath:y,decodePath:y}};function M(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function I(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function D(e){window.location.replace(M(window.location.href)+"#"+e)}function R(e){void 0===e&&(e={}),k||b(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?S:r,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?_(y(e.basename)):"",l=N[a],c=l.encodePath,f=l.decodePath;function d(){var e=f(I());return s&&(e=x(e,s)),O(e)}var p=E();function h(e){u(B,e),B.length=t.length,p.notifyListeners(B.location,B.action)}var m=!1,g=null;function v(){var e,t,n=I(),r=c(n);if(n!==r)D(r);else{var o=d(),a=B.location;if(!m&&(t=o,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(g===w(o))return;g=null,function(e){if(m)m=!1,h();else{p.confirmTransitionTo(e,"POP",i,(function(t){t?h({action:"POP",location:e}):function(e){var t=B.location,n=P.lastIndexOf(w(t));-1===n&&(n=0);var r=P.lastIndexOf(w(e));-1===r&&(r=0);var i=n-r;i&&(m=!0,R(i))}(e)}))}}(o)}}var T=I(),j=c(T);T!==j&&D(j);var A=d(),P=[w(A)];function R(e){t.go(e)}var z=0;function L(e){1===(z+=e)&&1===e?window.addEventListener(C,v):0===z&&window.removeEventListener(C,v)}var F=!1;var B={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=M(window.location.href)),n+"#"+c(s+w(e))},push:function(e,t){var n=O(e,void 0,void 0,B.location);p.confirmTransitionTo(n,"PUSH",i,(function(e){if(e){var t=w(n),r=c(s+t);if(I()!==r){g=t,function(e){window.location.hash=e}(r);var i=P.lastIndexOf(w(B.location)),o=P.slice(0,i+1);o.push(t),P=o,h({action:"PUSH",location:n})}else h()}}))},replace:function(e,t){var n=O(e,void 0,void 0,B.location);p.confirmTransitionTo(n,"REPLACE",i,(function(e){if(e){var t=w(n),r=c(s+t);I()!==r&&(g=t,D(r));var i=P.indexOf(w(B.location));-1!==i&&(P[i]=t),h({action:"REPLACE",location:n})}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return F||(L(1),F=!0),function(){return F&&(F=!1,L(-1)),t()}},listen:function(e){var t=p.appendListener(e);return L(1),function(){L(-1),t()}}};return B}function z(e,t,n){return Math.min(Math.max(e,t),n)}var L=n(15),F=n.n(L),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var q=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=U(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},U(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:B({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;F()(null==n||1===a.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen((function(){e.setState({match:e.computeMatch(r.location.pathname)})}))},t.prototype.componentWillReceiveProps=function(e){i()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?a.a.Children.only(e):null},t}(a.a.Component);q.propTypes={history:l.a.object.isRequired,children:l.a.node},q.contextTypes={router:l.a.object},q.childContextTypes={router:l.a.object.isRequired};var $=q,H=$;function W(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var V=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=W(this,e.call.apply(e,[this].concat(o))),r.history=P(r.props),W(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(H,{history:this.history,children:this.props.children})},t}(a.a.Component);V.propTypes={basename:l.a.string,forceRefresh:l.a.bool,getUserConfirmation:l.a.func,keyLength:l.a.number,children:l.a.node};var G=V;function Y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var X=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Y(this,e.call.apply(e,[this].concat(o))),r.history=R(r.props),Y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(H,{history:this.history,children:this.props.children})},t}(a.a.Component);X.propTypes={basename:l.a.string,getUserConfirmation:l.a.func,hashType:l.a.oneOf(["hashbang","noslash","slash"]),children:l.a.node};var K=X,J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Q=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},ee=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Z(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!Q(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},Z(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);F()(this.context.router,"You should not use <Link> outside a <Router>"),F()(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof t?O(t,null,null,i.location):t,s=i.createHref(o);return a.a.createElement("a",J({},r,{onClick:this.handleClick,href:s,ref:n}))},t}(a.a.Component);ee.propTypes={onClick:l.a.func,target:l.a.string,replace:l.a.bool,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired,innerRef:l.a.oneOfType([l.a.string,l.a.func])},ee.defaultProps={replace:!1},ee.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired,createHref:l.a.func.isRequired}).isRequired}).isRequired};var te=ee;function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var re=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=ne(this,e.call.apply(e,[this].concat(o))),r.history=function(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,l=void 0===s?6:s,c=E();function f(e){u(b,e),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function d(){return Math.random().toString(36).substr(2,l)}var p=z(a,0,i.length-1),h=i.map((function(e){return O(e,void 0,"string"==typeof e?d():e.key||d())})),m=w;function g(e){var t=z(b.index+e,0,b.entries.length-1),r=b.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var b={length:h.length,action:"POP",location:h[p],index:p,entries:h,createHref:m,push:function(e,t){var r=O(e,t,d(),b.location);c.confirmTransitionTo(r,"PUSH",n,(function(e){if(e){var t=b.index+1,n=b.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),f({action:"PUSH",location:r,index:t,entries:n})}}))},replace:function(e,t){var r=O(e,t,d(),b.location);c.confirmTransitionTo(r,"REPLACE",n,(function(e){e&&(b.entries[b.index]=r,f({action:"REPLACE",location:r}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return b}(r.props),ne(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement($,{history:this.history,children:this.props.children})},t}(a.a.Component);re.propTypes={initialEntries:l.a.array,initialIndex:l.a.number,getUserConfirmation:l.a.func,keyLength:l.a.number,children:l.a.node};var ie=re,oe=n(104),ae=n.n(oe),se={},le=0,ue=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=se[n]||(se[n]={});if(r[e])return r[e];var i=[],o={re:ae()(e,i,t),keys:i};return le<1e4&&(r[e]=o,le++),o},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,l=void 0!==s&&s,u=r.sensitive,c=void 0!==u&&u;if(null==i)return n;var f=ue(i,{end:a,strict:l,sensitive:c}),d=f.re,p=f.keys,h=d.exec(e);if(!h)return null;var m=h[0],g=h.slice(1),b=e===m;return a&&!b?null:{path:i,url:"/"===i&&""===m?"/":m,isExact:b,params:p.reduce((function(e,t,n){return e[t.name]=g[n],e}),{})}},fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function de(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var pe=function(e){return 0===a.a.Children.count(e)},he=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=de(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},de(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:fe({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;F()(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,u=(r||l.location).pathname;return ce(u,{path:i,strict:o,exact:a,sensitive:s},l.match)},t.prototype.componentWillMount=function(){i()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),i()(!(this.props.component&&this.props.children&&!pe(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),i()(!(this.props.render&&this.props.children&&!pe(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){i()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,s=o.history,l=o.route,u=o.staticContext,c={match:e,location:this.props.location||l.location,history:s,staticContext:u};return r?e?a.a.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!pe(n)?a.a.Children.only(n):null},t}(a.a.Component);he.propTypes={computedMatch:l.a.object,path:l.a.string,exact:l.a.bool,strict:l.a.bool,sensitive:l.a.bool,component:l.a.func,render:l.a.func,children:l.a.oneOfType([l.a.func,l.a.node]),location:l.a.object},he.contextTypes={router:l.a.shape({history:l.a.object.isRequired,route:l.a.object.isRequired,staticContext:l.a.object})},he.childContextTypes={router:l.a.object.isRequired};var me=he,ge=me,be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var ve=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,o=e.activeClassName,s=e.className,l=e.activeStyle,u=e.style,c=e.isActive,f=e["aria-current"],d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),p="object"===(void 0===t?"undefined":ye(t))?t.pathname:t,h=p&&p.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return a.a.createElement(ge,{path:h,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(c?c(r,n):r);return a.a.createElement(te,be({to:t,className:i?[s,o].filter((function(e){return e})).join(" "):s,style:i?be({},u,l):u,"aria-current":i&&f||null},d))}})};ve.propTypes={to:te.propTypes.to,exact:l.a.bool,strict:l.a.bool,location:l.a.object,activeClassName:l.a.string,className:l.a.string,activeStyle:l.a.object,style:l.a.object,isActive:l.a.func,"aria-current":l.a.oneOf(["page","step","location","date","time","true"])},ve.defaultProps={activeClassName:"active","aria-current":"page"};var xe=ve;var _e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){F()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(a.a.Component);_e.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},_e.defaultProps={when:!0},_e.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired};var we=_e,Oe={},Ee=0,ke=function(e){var t=e,n=Oe[t]||(Oe[t]={});if(n[e])return n[e];var r=ae.a.compile(e);return Ee<1e4&&(n[e]=r,Ee++),r},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("/"===e)return e;var n=ke(e);return n(t,{pretty:!0})},Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){F()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t,n,r=O(e.to),o=O(this.props.to);(n=o,(t=r).pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&h(t.state,n.state))?i()(!1,"You tried to redirect to the same route you're currently on: \""+o.pathname+o.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?Se(n,t.params):Te({},n,{pathname:Se(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(a.a.Component);je.propTypes={computedMatch:l.a.object,push:l.a.bool,from:l.a.string,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired},je.defaultProps={push:!1},je.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired}).isRequired,staticContext:l.a.object}).isRequired};var Ae=je,Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ne=function(e){return"/"===e.charAt(0)?e:"/"+e},Me=function(e,t){return e?Pe({},t,{pathname:Ne(e)+t.pathname}):t},Ie=function(e,t){if(!e)return t;var n=Ne(e);return 0!==t.pathname.indexOf(n)?t:Pe({},t,{pathname:t.pathname.substr(n.length)})},De=function(e){return"string"==typeof e?e:w(e)},Re=function(e){return function(){F()(!1,"You cannot %s with <StaticRouter>",e)}},ze=function(){},Le=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Ce(this,e.call.apply(e,[this].concat(o))),r.createHref=function(e){return Ne(r.props.basename+De(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=Me(n,O(e)),i.url=De(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=Me(n,O(e)),i.url=De(i.location)},r.handleListen=function(){return ze},r.handleBlock=function(){return ze},Ce(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){i()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:Ie(t,O(n)),push:this.handlePush,replace:this.handleReplace,go:Re("go"),goBack:Re("goBack"),goForward:Re("goForward"),listen:this.handleListen,block:this.handleBlock};return a.a.createElement($,Pe({},r,{history:i}))},t}(a.a.Component);Le.propTypes={basename:l.a.string,context:l.a.object.isRequired,location:l.a.oneOfType([l.a.string,l.a.object])},Le.defaultProps={basename:"",location:"/"},Le.childContextTypes={router:l.a.object.isRequired};var Fe=Le;var Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){F()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){i()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return a.a.Children.forEach(t,(function(t){if(null==r&&a.a.isValidElement(t)){var o=t.props,s=o.path,l=o.exact,u=o.strict,c=o.sensitive,f=o.from,d=s||f;i=t,r=ce(n.pathname,{path:d,exact:l,strict:u,sensitive:c},e.match)}})),r?a.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(a.a.Component);Be.contextTypes={router:l.a.shape({route:l.a.object.isRequired}).isRequired},Be.propTypes={children:l.a.node,location:l.a.object};var Ue=Be,qe=Se,$e=ce,He=n(347),We=n.n(He),Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Ge=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return a.a.createElement(me,{children:function(t){return a.a.createElement(e,Ve({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:l.a.func},We()(t,e)};n.d(t,"BrowserRouter",(function(){return G})),n.d(t,"HashRouter",(function(){return K})),n.d(t,"Link",(function(){return te})),n.d(t,"MemoryRouter",(function(){return ie})),n.d(t,"NavLink",(function(){return xe})),n.d(t,"Prompt",(function(){return we})),n.d(t,"Redirect",(function(){return Ae})),n.d(t,"Route",(function(){return ge})),n.d(t,"Router",(function(){return H})),n.d(t,"StaticRouter",(function(){return Fe})),n.d(t,"Switch",(function(){return Ue})),n.d(t,"generatePath",(function(){return qe})),n.d(t,"matchPath",(function(){return $e})),n.d(t,"withRouter",(function(){return Ge}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=Math.PI/180,i=180/Math.PI},,function(e,t,n){var r=n(113);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(189),i=n(117);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(49);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r,i,o,a,s,l,u,c,f,d,p={PROCESSOR_VERSION:"1.2.27",error:function(e){throw"undefined"==typeof Error?new Error("citeproc-js error: "+e):"citeproc-js error: "+e},debug:function(e){"undefined"==typeof console?dump("CSL: "+e+"\n"):console.log("citeproc-js warning: "+e)},LOCATOR_LABELS_REGEXP:new RegExp("^((art|ch|subch|col|fig|l|n|no|op|p|pp|para|subpara|supp|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:art|bk|ch|subch|col|fig|fol|l|n|no|op|p|pp|para|subpara|supp|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:art|bk|ch|subch|col|fig|fol|l|n|no|op|p|pp|para|subpara|supp|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"art.":"article","bk.":"book","ch.":"chapter","subch.":"subchapter","p.":"page","pp.":"page","para.":"paragraph","subpara.":"subparagraph","pt.":"part","r.":"rule","sec.":"section","subsec.":"subsection","supp.":"supplement","sch.":"schedule","tit.":"title","col.":"column","fig.":"figure","fol.":"folio","l.":"line","n.":"note","no.":"issue","op.":"opus","sv.":"sub-verbo","vrs.":"verse","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{article:"art.",book:"bk.",chapter:"ch.",subchapter:"subch.",page:"p.",paragraph:"para.",subparagraph:"subpara.",part:"pt.",rule:"r.",section:"sec.",subsection:"subsec.",supplement:"supp.",schedule:"sch.",title:"tit.",column:"col.",figure:"fig.",folio:"fol.",line:"l.",note:"n.",issue:"no.",opus:"op.","sub-verbo":"sv.","sub verbo":"sv.",verse:"vrs.",volume:"vol."},LOCATOR_LABELS_MAP:{art:"article",bk:"book",ch:"chapter",subch:"subchapter",col:"column",fig:"figure",fol:"folio",l:"line",n:"note",no:"issue",op:"opus",p:"page",pp:"page",para:"paragraph",subpara:"subparagraph",pt:"part",r:"rule",sec:"section",subsec:"subsection",supp:"supplement",sv:"sub-verbo",sch:"schedule",tit:"title",vrs:"verse",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0},checkNestedBrace:function(e){"note"===e.opt.xclass?(this.depth=0,this.update=function(e){for(var t=(e=e||"").split(/([\(\)])/),n=1,r=t.length;n<r;n+=2)"("===t[n]?(1==this.depth%2&&(t[n]="["),this.depth+=1):")"===t[n]&&(0==this.depth%2&&(t[n]="]"),this.depth-=1);return t.join("")}):this.update=function(e){return e}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"collection-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(e){if(this.opt.development_extensions.locator_date_and_revision&&e.locator){e.locator=""+e.locator;var t=e.locator.indexOf("|");if(t>-1){var n=e.locator;e.locator=n.slice(0,t);var r=(n=n.slice(t+1)).match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);r&&(e["locator-date"]=this.fun.dateparser.parseDateToObject(r[1]),n=n.slice(r[1].length)),e["locator-extra"]=n.replace(/^\s+/,"").replace(/\s+$/,"")}}return e.locator&&(e.locator=(""+e.locator).replace(/\s+$/,"")),e},normalizeLocaleStr:function(e){if(e){var t=e.split("-");return t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),t.join("-")}},parseNoteFieldHacks:function(e,t,n){if("string"==typeof e.note){for(var r=[],i=e.note.split("\n"),o=0,a=i.length;o<a;o++){r=[];var s=(h=i[o]).match(p.NOTE_FIELDS_REGEXP);if(s){for(var l=h.split(p.NOTE_FIELDS_REGEXP),u=0,c=l.length-1;u<c;u++)r.push(l[u]),r.push(s[u]);r.push(l[l.length-1]);for(u=1,c=r.length;u<c&&(!r[u-1].trim()||!(o>0||u>1)||r[u-1].match(p.NOTE_FIELD_REGEXP));u+=2)r[u]="\n"+r[u].slice(2,-1).trim()+"\n";i[o]=r.join("")}}var f=0,d={};for(o=0,a=(i=i.join("\n").split("\n")).length;o<a;o++){var h,m=(h=i[o]).match(p.NOTE_FIELD_REGEXP);if(h.trim()){if(!m){if(0===o)continue;f=o;break}var g=m[1],b=m[2].replace(/^\s+/,"").replace(/\s+$/,"");if("type"===g)e.type=b,i[o]="";else if(p.DATE_VARIABLES.indexOf(g.replace(/^alt-/,""))>-1)e[g]&&!n||(e[g]=p.DateParser.parseDateToArray(b),(!t||t[g]&&this.isDateString(b))&&(i[o]=""));else if(!e[g]){if(p.NAME_VARIABLES.indexOf(g.replace(/^alt-/,""))>-1){d[g]||(d[g]=[]);var y=b.split(/\s*\|\|\s*/);if(1===y.length)d[g].push({literal:y[0]});else if(2===y.length){var v={family:y[0],given:y[1]};p.parseParticles(v),d[g].push(v)}}else e[g]=b;t&&!t[g]||(i[o]="")}}}for(var g in d)e[g]=d[g];if(t){i[f].trim()&&(i[f]="\n"+i[f]);for(o=f-1;o>-1;o--)i[o].trim()||(i=i.slice(0,o).concat(i.slice(o+1)))}e.note=i.join("\n").trim()}},checkPrefixSpaceAppend:function(e,t){t||(t="");var n="",r=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),i=r.slice(-1);return r.match(p.ENDSWITH_ROMANESQUE_REGEXP)?n=" ":p.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(i)>-1?n=" ":i.match(/[\)\],0-9]/)&&(n=" "),t=(t+n).replace(/\s+/g," ")},checkIgnorePredecessor:function(e,t){var n=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,"").slice(-1);return p.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(n)>-1&&t.trim().indexOf(" ")>-1&&(e.tmp.term_predecessor=!1,!0)},checkSuffixSpacePrepend:function(e,t){return t?((t.match(p.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(t.slice(0,1))>-1)&&(t=" "+t),t):""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],PARALLEL_MATCH_VARS:["container-title"],PARALLEL_TYPES:["bill","gazette","regulation","legislation","legal_case","treaty","article-magazine","article-journal"],PARALLEL_COLLAPSING_MID_VARSET:["volume","issue","container-title","section","collection-number"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","collection-editor","composer","container-author","director","editor","editorial-director","illustrator","interviewer","original-author","recipient","reviewed-author","translator","commenter"],CREATORS:["author","collection-editor","composer","container-author","director","editor","editorial-director","illustrator","interviewer","original-author","recipient","reviewed-author","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(e){for(var t=["title","short","main","sub","subjoin"],n={},r=0,i=t.length;r<i;r++)n[t[r]]=e+"title"+("title"===t[r]?"":"-"+t[r]);return n},demoteNoiseWords:function(e,t,n){var r=e.locale[e.opt.lang].opts["leading-noise-words"];if(t&&n){(t=t.split(/\s+/)).reverse();for(var i=[],o=t.length-1;o>-1&&r.indexOf(t[o].toLowerCase())>-1;o+=-1)i.push(t.pop());t.reverse();var a=t.join(" "),s=i.join(" ");"drop"!==n&&s?"demote"===n&&(t=[a,s].join(", ")):t=a}return t},extractTitleAndSubtitle:function(e,t){for(var n=t?" ":"",r=["","container-"],i=0,o=r.length;i<o;i++){var a=r[i],s=p.TITLE_FIELD_SPLITS(a),l=[!1];if(e.multi)for(var u in e.multi._keys[s.short])l.push(u);for(var c=0,f=l.length;c<f;c++){var d={};(u=l[c])?(e.multi._keys[s.title]&&(d[s.title]=e.multi._keys[s.title][u]),e.multi._keys[s.short]&&(d[s.short]=e.multi._keys[s.short][u])):(d[s.title]=e[s.title],d[s.short]=e[s.short]),d[s.main]=d[s.title],d[s.sub]=!1;var h=d[s.short];if(d[s.title]){if(h&&h.toLowerCase()===d[s.title].toLowerCase())d[s.main]=d[s.title],d[s.subjoin]="",d[s.sub]="";else if(h){var m=d[s.title].slice(h.replace(/[\?\!]+$/,"").length),g=d[s.title].replace(m.replace(/^[\?\!]+/,""),"").trim();if((v=p.TITLE_SPLIT_REGEXP.matchfirst.exec(m))&&g.toLowerCase()===h.toLowerCase())d[s.main]=g,d[s.subjoin]=v[1].replace(/[\?\!]+(\s*)$/,"$1"),d[s.sub]=m.replace(p.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(d[s.short]=d[s.main]);else 3==(b=p.TITLE_SPLIT(d[s.title])).length?(d[s.main]=b[0],d[s.subjoin]=b[1],d[s.sub]=b[2]):(d[s.main]=d[s.title],d[s.subjoin]="",d[s.sub]="")}else{var b;if(3==(b=p.TITLE_SPLIT(d[s.title])).length){if(d[s.main]=b[0],d[s.subjoin]=b[1],d[s.sub]=b[2],this.opt.development_extensions.implicit_short_title&&!e[s.short]&&!d[s.main].match(/^[\-\.[0-9]+$/)){var y=d[s.subjoin].trim();-1===["?","!"].indexOf(y)&&(y=""),d[s.short]=d[s.main]+y}}else d[s.main]=d[s.title],d[s.subjoin]="",d[s.sub]=""}if(d[s.subjoin]&&d[s.subjoin].match(/([\?\!])/)){var v=d[s.subjoin].match(/(\s*)$/);d[s.main]=d[s.main]+n+d[s.subjoin].trim(),d[s.subjoin]=v[1]}}if(d[s.subjoin]&&(d[s.subjoin].indexOf(":")>-1&&(d[s.subjoin]=n+": "),(d[s.subjoin].indexOf("-")>-1||d[s.subjoin].indexOf("—")>-1)&&(d[s.subjoin]="—")),u)for(var x in d)e.multi._keys[x]||(e.multi._keys[x]={}),e.multi._keys[x][u]=d[x];else for(var x in d)e[x]=d[x]}}},titlecaseSentenceOrNormal:function(e,t,n,r,i){var o=p.TITLE_FIELD_SPLITS(n),a={};if(r&&t.multi?(t.multi._keys[o.title]&&(a[o.title]=t.multi._keys[o.title][r]),t.multi._keys[o.main]&&(a[o.main]=t.multi._keys[o.main][r]),t.multi._keys[o.sub]&&(a[o.sub]=t.multi._keys[o.sub][r]),t.multi._keys[o.subjoin]&&(a[o.subjoin]=t.multi._keys[o.subjoin][r])):(a[o.title]=t[o.title],a[o.main]=t[o.main],a[o.sub]=t[o.sub],a[o.subjoin]=t[o.subjoin]),a[o.main]&&a[o.sub]){var s=a[o.main],l=a[o.subjoin],u=a[o.sub];return i?(s=p.Output.Formatters.sentence(e,s),u=p.Output.Formatters.sentence(e,u)):e.opt.development_extensions.uppercase_subtitles&&(u=p.Output.Formatters["capitalize-first"](e,u)),[s,l,u].join("")}if(a[o.title]){if(i)return p.Output.Formatters.sentence(e,a[o.title]);if(e.opt.development_extensions.uppercase_subtitles){for(var c=p.TITLE_SPLIT(a[o.title]),f=0,d=c.length;f<d;f+=2)c[f]=p.Output.Formatters["capitalize-first"](e,c[f]);for(f=1,d=c.length-1;f<d;f+=2){var h=c[f].match(/([:\?\!] )/);if(h){var m="fr"===e.opt["default-locale"][0].slice(0,2).toLowerCase()?" ":"";c[f]=m+h[1]}(c[f].indexOf("-")>-1||c[f].indexOf("—")>-1)&&(c[f]="—")}return a[o.title]=c.join(""),a[o.title]}return a[o.title]}return""},getSafeEscape:function(e){if(["bibliography","citation"].indexOf(e.tmp.area)>-1){var t=[];return e.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===e.opt.mode&&t.push((function(e){return e.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')})),t.length?function(n){for(var r=0,i=t.length;r<i;r+=1)n=t[r](n);return p.Output.Formats[e.opt.mode].text_escape(n)}:p.Output.Formats[e.opt.mode].text_escape}return function(e){return e}},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-à-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokmål)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{"ª":"a","²":"2","³":"3","¹":"1","º":"o","ʰ":"h","ʱ":"ɦ","ʲ":"j","ʳ":"r","ʴ":"ɹ","ʵ":"ɻ","ʶ":"ʁ","ʷ":"w","ʸ":"y","ˠ":"ɣ","ˡ":"l","ˢ":"s","ˣ":"x","ˤ":"ʕ","ᴬ":"A","ᴭ":"Æ","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴲ":"Ǝ","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴽ":"Ȣ","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ᵂ":"W","ᵃ":"a","ᵄ":"ɐ","ᵅ":"ɑ","ᵆ":"ᴂ","ᵇ":"b","ᵈ":"d","ᵉ":"e","ᵊ":"ə","ᵋ":"ɛ","ᵌ":"ɜ","ᵍ":"g","ᵏ":"k","ᵐ":"m","ᵑ":"ŋ","ᵒ":"o","ᵓ":"ɔ","ᵔ":"ᴖ","ᵕ":"ᴗ","ᵖ":"p","ᵗ":"t","ᵘ":"u","ᵙ":"ᴝ","ᵚ":"ɯ","ᵛ":"v","ᵜ":"ᴥ","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"φ","ᵡ":"χ","⁰":"0","ⁱ":"i","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"−","⁼":"=","⁽":"(","⁾":")","ⁿ":"n","℠":"SM","™":"TM","㆒":"一","㆓":"二","㆔":"三","㆕":"四","㆖":"上","㆗":"中","㆘":"下","㆙":"甲","㆚":"乙","㆛":"丙","㆜":"丁","㆝":"天","㆞":"地","㆟":"人","ˀ":"ʔ","ˁ":"ʕ","ۥ":"و","ۦ":"ي"},SUPERSCRIPTS_REGEXP:new RegExp("[ª²³¹ºʰʱʲʳʴʵʶʷʸˠˡˢˣˤᴬᴭᴮᴰᴱᴲᴳᴴᴵᴶᴷᴸᴹᴺᴼᴽᴾᴿᵀᵁᵂᵃᵄᵅᵆᵇᵈᵉᵊᵋᵌᵍᵏᵐᵑᵒᵓᵔᵕᵖᵗᵘᵙᵚᵛᵜᵝᵞᵟᵠᵡ⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ℠™㆒㆓㆔㆕㆖㆗㆘㆙㆚㆛㆜㆝㆞㆟ˀˁۥۦ]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(e,t,n){e.tmp.group_context.tip.condition?e.tmp.group_context.tip.condition.test&&(e.tmp.group_context.tip.condition.termtxt=t,e.tmp.group_context.tip.condition.valueTerm=n):t.slice(-1).match(/[0-9]/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1},EVALUATE_GROUP_CONDITION:function(e,t){var n;if("empty-label"===t.condition.test)n=!t.condition.termtxt;else if("empty-label-no-decor"===t.condition.test)n=!t.condition.termtxt||t.condition.termtxt.indexOf("%s")>-1;else if("comma-safe"===t.condition.test){var r=!t.condition.termtxt,i=!1;t.condition.termtxt&&(i=t.condition.termtxt.slice(0,1).match(p.ALL_ROMANESQUE_REGEXP));var o=e.tmp.just_did_number;n=r?!!o:!t.condition.valueTerm&&!!i}if(n)var a=!1;else a=!0;return t.condition.not&&(a=!a),a},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title"],TITLE_SPLIT_REGEXP:(r=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*—\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"],{match:new RegExp("("+r.join("|")+")","g"),matchfirst:new RegExp("^("+r.join("|")+")"),split:new RegExp("(?:"+r.join("|")+")")}),TITLE_SPLIT:function(e){if(!e)return e;for(var t=e.match(p.TITLE_SPLIT_REGEXP.match),n=e.split(p.TITLE_SPLIT_REGEXP.split),r=n.length-2;r>-1;r--)n[r]=n[r].trim(),n[r]&&n[r].slice(-1).toLowerCase()!==n[r].slice(-1)?(n[r]=n[r]+t[r]+n[r+1],n=n.slice(0,r+1).concat(n.slice(r+2))):n=n.slice(0,r+1).concat([t[r]]).concat(n.slice(r+1));return n},GET_COURT_CLASS:function(e,t,n){var r="",i=null,o=t.jurisdiction?t.jurisdiction.split(":")[0]:null,a="court_condition_classes";return n&&(a="court_key_classes"),o&&t.authority&&("string"==typeof t.authority?i=t.authority:t.authority[0]&&t.authority[0].literal&&(i=t.authority[0].literal)),i&&(this.lang&&e.locale[this.lang].opts[a]&&e.locale[this.lang].opts[a][o]&&e.locale[this.lang].opts[a][o][i]?r=e.locale[this.lang].opts[a][o][i]:e.locale[e.opt["default-locale"][0]].opts[a]&&e.locale[e.opt["default-locale"][0]].opts[a][o]&&e.locale[e.opt["default-locale"][0]].opts[a][o][i]&&(r=e.locale[e.opt["default-locale"][0]].opts[a][o][i])),r},SET_COURT_CLASSES:function(e,t,n,r){for(var i=n.getNodesByName(r,"court-class"),o=0,a=n.numberofnodes(i);o<a;o+=1){var s=i[o],l=n.attributes(s),u=l["@name"],c=l["@country"],f=l["@courts"],d="court_key_classes";if(e.registry&&(d="court_condition_classes"),u&&c&&f){f=f.trim().split(/\s+/),e.locale[t].opts[d]||(e.locale[t].opts[d]={}),e.locale[t].opts[d][c]||(e.locale[t].opts[d][c]={});for(var p=0,h=f.length;p<h;p++)e.locale[t].opts[d][c][f[p]]=u}}},INIT_JURISDICTION_MACROS:function(e,t,n){if(!e.sys.retrieveStyleModule||!p.MODULE_MACROS[n]||!t.jurisdiction)return!1;var r=e.getJurisdictionList(t.jurisdiction);if(!e.opt.jurisdictions_seen[r[0]]){var i=e.retrieveAllStyleModules(r);for(var o in i){e.juris[o]={};var a=p.setupXml(i[o]);a.addMissingNameNodes(a.dataObj),a.addInstitutionNodes(a.dataObj),a.insertPublisherAndPlace(a.dataObj),a.flagDateMacros(a.dataObj);for(var s=0,l=(h=a.getNodesByName(a.dataObj,"law-module")).length;s<l;s++){var u=a.getAttributeValue(h[s],"types");if(u){e.juris[o].types={};for(var c=0,f=(u=u.split(/\s+/)).length;c<f;c++)e.juris[o].types[u[c]]=!0}}var d=e.opt.lang?e.opt.lang:e.opt["default-locale"][0];p.SET_COURT_CLASSES(e,d,a,a.dataObj),e.juris[o].types||(e.juris[o].types=p.MODULE_TYPES);var h;for(s=0,l=(h=a.getNodesByName(a.dataObj,"macro")).length;s<l;s++){var m=a.getAttributeValue(h[s],"name");p.MODULE_MACROS[m]?(e.juris[o][m]=[],e.buildTokenLists(h[s],e.juris[o][m]),e.configureTokenList(e.juris[o][m])):p.debug('CSL: skipping non-modular macro name "'+m+'" in module context')}}}e.opt.parallel.enable&&(e.parallel||(e.parallel=new p.Parallel(e)));for(s=0,l=r.length;s<l;s++){o=r[s];if(e.juris[o]&&e.juris[o].types[t.type])return t["best-jurisdiction"]=o,!0}return!1}};p.XmlJSON=function(e){this.dataObj=e,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", ","substitute-use-first":"1","use-last":"1"},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}},p.XmlJSON.prototype.clean=function(e){return e},p.XmlJSON.prototype.getStyleId=function(e,t){var n="id";t&&(n="title");for(var r="",i=e.children,o=0,a=i.length;o<a;o++)if("info"===i[o].name)for(var s=i[o].children,l=0,u=s.length;l<u;l++)s[l].name===n&&(r=s[l].children[0]);return r},p.XmlJSON.prototype.children=function(e){return!(!e||!e.children.length)&&e.children.slice()},p.XmlJSON.prototype.nodename=function(e){return e?e.name:null},p.XmlJSON.prototype.attributes=function(e){var t={};for(var n in e.attrs)t["@"+n]=e.attrs[n];return t},p.XmlJSON.prototype.content=function(e){var t="";if(!e||!e.children)return t;for(var n=0,r=e.children.length;n<r;n+=1)"string"==typeof e.children[n]&&(t+=e.children[n]);return t},p.XmlJSON.prototype.namespace={},p.XmlJSON.prototype.numberofnodes=function(e){return e&&"number"==typeof e.length?e.length:0},p.XmlJSON.prototype.getAttributeValue=function(e,t,n){var r="";return n&&(t=n+":"+t),e&&e.attrs&&(r=e.attrs[t]?e.attrs[t]:""),r},p.XmlJSON.prototype.getNodeValue=function(e,t){var n="";if(t)for(var r=0,i=e.children.length;r<i;r+=1)e.children[r].name===t&&(n=e.children[r].children.length?e.children[r]:"");else e&&(n=e);return n&&n.children&&1==n.children.length&&"string"==typeof n.children[0]&&(n=n.children[0]),n},p.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,n,r,i){"@"===r.slice(0,1)&&(r=r.slice(1));for(var o=0,a=e.children.length;o<a;o+=1)e.children[o].name===t&&e.children[o].attrs.name===n&&(e.children[o].attrs[r]=i)},p.XmlJSON.prototype.deleteNodeByNameAttribute=function(e,t){var n,r;for(n=0,r=e.children.length;n<r;n+=1)e.children[n]&&"string"!=typeof e.children[n]&&e.children[n].attrs.name==t&&(e.children=e.children.slice(0,n).concat(e.children.slice(n+1)))},p.XmlJSON.prototype.deleteAttribute=function(e,t){void 0!==e.attrs[t]&&e.attrs.pop(t)},p.XmlJSON.prototype.setAttribute=function(e,t,n){return e.attrs[t]=n,!1},p.XmlJSON.prototype.nodeCopy=function(e,t){if(!t)t={};if("object"==typeof t&&void 0===t.length)for(var n in e)"string"==typeof e[n]?t[n]=e[n]:"object"==typeof e[n]&&(void 0===e[n].length?t[n]=this.nodeCopy(e[n],{}):t[n]=this.nodeCopy(e[n],[]));else for(var r=0,i=e.length;r<i;r+=1)"string"==typeof e[r]?t[r]=e[r]:t[r]=this.nodeCopy(e[r],{});return t},p.XmlJSON.prototype.getNodesByName=function(e,t,n,r){if(!r)r=[];if(!e||!e.children)return r;t===e.name&&(n?n===e.attrs.name&&r.push(e):r.push(e));for(var i=0,o=e.children.length;i<o;i+=1)"object"==typeof e.children[i]&&this.getNodesByName(e.children[i],t,n,r);return r},p.XmlJSON.prototype.nodeNameIs=function(e,t){return void 0!==e&&t==e.name},p.XmlJSON.prototype.makeXml=function(e){return"string"==typeof e&&(e="<"===e.slice(0,1)?this.jsonStringWalker.walkToObject(e):JSON.parse(e)),e},p.XmlJSON.prototype.insertChildNodeAfter=function(e,t,n,r){for(var i=0,o=e.children.length;i<o;i+=1)if(t===e.children[i]){e.children=e.children.slice(0,i).concat([r]).concat(e.children.slice(i+1));break}return e},p.XmlJSON.prototype.insertPublisherAndPlace=function(e){if("group"===e.name){for(var t=!0,n=["publisher","publisher-place"],r=0,i=e.children.length;r<i;r+=1){var o=n.indexOf(e.children[r].attrs.variable);if(!("text"===e.children[r].name&&o>-1)||e.children[r].attrs.prefix||e.children[r].attrs.suffix){t=!1;break}n=n.slice(0,o).concat(n.slice(o+1))}t&&!n.length&&(e.attrs["has-publisher-and-publisher-place"]=!0)}for(r=0,i=e.children.length;r<i;r+=1)"object"==typeof e.children[r]&&this.insertPublisherAndPlace(e.children[r])},p.XmlJSON.prototype.isChildOfSubstitute=function(e){if(e.length>0){var t=e.slice();return"substitute"===t.pop()||this.isChildOfSubstitute(t)}return!1},p.XmlJSON.prototype.addMissingNameNodes=function(e,t){if(t||(t=[]),"names"===e.name&&!this.isChildOfSubstitute(t)){for(var n=!0,r=0,i=e.children.length;r<i;r++)if("name"===e.children[r].name){n=!1;break}n&&(e.children=[{name:"name",attrs:{},children:[]}].concat(e.children))}t.push(e.name);for(r=0,i=e.children.length;r<i;r+=1)"object"==typeof e.children[r]&&this.addMissingNameNodes(e.children[r],t);t.pop()},p.XmlJSON.prototype.addInstitutionNodes=function(e){if("names"===e.name){for(var t={},n=-1,r=0,i=e.children.length;r<i;r+=1){if("name"==e.children[r].name){for(var o in e.children[r].attrs)t[o]=e.children[r].attrs[o];t.delimiter=e.children[r].attrs.delimiter,t.and=e.children[r].attrs.and,n=r;for(var a=0,s=e.children[r].children.length;a<s;a+=1)if("family"===e.children[r].children[a].attrs.name)for(var o in e.children[r].children[a].attrs)t[o]=e.children[r].children[a].attrs[o]}if("institution"==e.children[r].name){n=-1;break}}if(n>-1){var l=this.nodeCopy(this.institution);for(r=0,i=p.INSTITUTION_KEYS.length;r<i;r+=1){var u=p.INSTITUTION_KEYS[r];void 0!==t[u]&&(l.children[0].attrs[u]=t[u]),t.delimiter&&(l.attrs.delimiter=t.delimiter),t.and&&(l.attrs.and="text")}e.children=e.children.slice(0,n+1).concat([l]).concat(e.children.slice(n+1))}}for(r=0,i=e.children.length;r<i;r+=1)"string"!=typeof e.children[r]&&this.addInstitutionNodes(e.children[r])},p.XmlJSON.prototype.flagDateMacros=function(e){for(var t=0,n=e.children.length;t<n;t+=1)"macro"===e.children[t].name&&this.inspectDateMacros(e.children[t])&&(e.children[t].attrs["macro-has-date"]="true")},p.XmlJSON.prototype.inspectDateMacros=function(e){if(!e||!e.children)return!1;if("date"===e.name)return!0;for(var t=0,n=e.children.length;t<n;t+=1)if(this.inspectDateMacros(e.children[t]))return!0;return!1},p.stripXmlProcessingInstruction=function(e){return e?e=(e=(e=(e=e.replace(/^<\?[^?]+\?>/,"")).replace(/<!--[^>]+-->/g,"")).replace(/^\s+/g,"")).replace(/\s+$/g,""):e},p.parseXml=function(e){var t={children:[]},n=[t.children];function r(e){return e.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,(function(e,t){var n=parseInt(t,10);return String.fromCharCode(n)})).replace(/&#x([a-f0-9]{1,6});/gi,(function(e,t){var n=parseInt(t,16);return String.fromCharCode(n)}))}function i(e,t){var n=RegExp("^.*[\t ]+"+t+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),r=e.match(n);return r?r[1].slice(1,-1):null}function o(e){var t=RegExp("^<([^\t />]+)"),n=e.match(t);return n?n[1]:null}function a(e){var t={};t.name=o(e),t.attrs={};var n=function(e){var t=e.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(t)for(var n=0,r=t.length;n<r;n++)t[n]=t[n].replace(/=.*/,"");return t}(e);if(n)for(var a=0,s=n.length;a<s;a++){var l={name:n[a],value:i(e,n[a])};t.attrs[l.name]=r(l.value)}return t.children=[],t}function s(e){return r(e.match(/^.*>([^<]*)<.*$/)[1])}function l(e){n.slice(-1)[0].push(e)}function u(e){var t;e.slice(1).indexOf("<")>-1?((t=a(e.slice(0,e.indexOf(">")+1))).children=[s(e)],l(t)):"/>"===e.slice(-2)?(t=a(e),"term"===o(e)&&t.children.push(""),l(t)):"</"===e.slice(0,2)?n.pop():(l(t=a(e)),function(e){n.push(e.children)}(t))}for(var c=function(e){for(var t=(e=e.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),n=null,r=0,i=t.length;r<i;r++)r>0&&(t[r]="<"+t[r]),r<t.length-1&&(t[r]=t[r]+">"),"number"!=typeof n&&("<style "!==t[r].slice(0,7)&&"<locale "!=t[r].slice(0,8)||(n=r));for(r=(t=t.slice(n)).length-2;r>-1;r--)if(-1===t[r].slice(1).indexOf("<")){var o=t[r].slice(0,5);"/>"!==t[r].slice(-2)&&("<term"===o?"</term"===t[r+1].slice(0,6)&&(t[r]=t[r]+t[r+1],t=t.slice(0,r+1).concat(t.slice(r+2))):["<sing","<mult"].indexOf(o)>-1&&"/>"!==t[r].slice(-2)&&"<"===t[r+1].slice(0,1)&&(t[r]=t[r]+t[r+1],t=t.slice(0,r+1).concat(t.slice(r+2))))}return t}(e),f=0,d=c.length;f<d;f++){u(c[f])}return t.children[0]},p.XmlDOM=function(e){this.dataObj=e,"undefined"==typeof DOMParser?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e,t){var n;return"undefined"!=typeof ActiveXObject?((n=new ActiveXObject("MSXML.DomDocument")).async=!1,n.loadXML(e),n):"undefined"!=typeof XMLHttpRequest?(t||(t="text/xml"),(n=new XMLHttpRequest).open("GET","data:"+t+";charset=utf-8,"+encodeURIComponent(e),!1),n.overrideMimeType&&n.overrideMimeType(t),n.send(null),n.responseXML):"undefined"!=typeof marknote?(new marknote.Parser).parse(e):void 0},this.hasAttributes=function(e){return!(!e.attributes||!e.attributes.length)}):this.hasAttributes=function(e){return!(!e.attributes||!e.attributes.length)},this.importNode=function(e,t){return void 0===e.importNode?this._importNode(e,t,!0):e.importNode(t,!0)},this._importNode=function(e,t,n){switch(t.nodeType){case 1:var r=e.createElement(t.nodeName);if(t.attributes&&t.attributes.length>0)for(var i=0,o=t.attributes.length;i<o;)r.setAttribute(t.attributes[i].nodeName,t.getAttribute(t.attributes[i++].nodeName));if(n&&t.childNodes&&t.childNodes.length>0)for(i=0,o=t.childNodes.length;i<o;)r.appendChild(this._importNode(e,t.childNodes[i++],n));return r}},this.parser=new DOMParser;var t=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),n=t.getElementsByTagName("institution");this.institution=n.item(0);var r=t.getElementsByTagName("institution-part");this.institutionpart=r.item(0),this.ns="http://purl.org/net/xbiblio/csl"},p.XmlDOM.prototype.clean=function(e){return e=(e=(e=(e=(e=e.replace(/<\?[^?]+\?>/g,"")).replace(/<![^>]+>/g,"")).replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^\n*/,"")},p.XmlDOM.prototype.getStyleId=function(e,t){var n="",r="id";t&&(r="title");var i=e.getElementsByTagName(r);return i&&i.length&&(i=i.item(0)),i&&(n=i.textContent),n||(n=i.innerText),n||(n=i.innerHTML),n},p.XmlDOM.prototype.children=function(e){var t,n,r,i;if(e){for(i=[],n=0,r=(t=e.childNodes).length;n<r;n+=1)"#text"!=t[n].nodeName&&i.push(t[n]);return i}return[]},p.XmlDOM.prototype.nodename=function(e){return e.nodeName},p.XmlDOM.prototype.attributes=function(e){var t,n,r,i,o;if(t=new Object,e&&this.hasAttributes(e))for(i=0,o=(n=e.attributes).length;i<o;i+=1)t["@"+(r=n[i]).name]=r.value;return t},p.XmlDOM.prototype.content=function(e){return void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.txt},p.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},p.XmlDOM.prototype.numberofnodes=function(e){return e?e.length:0},p.XmlDOM.prototype.getAttributeName=function(e){return e.name},p.XmlDOM.prototype.getAttributeValue=function(e,t,n){var r="";return n&&(t=n+":"+t),e&&this.hasAttributes(e)&&e.getAttribute(t)&&(r=e.getAttribute(t)),r},p.XmlDOM.prototype.getNodeValue=function(e,t){var n=null;if(t){var r=e.getElementsByTagName(t);r.length>0&&(n=void 0!==r[0].textContent?r[0].textContent:void 0!==r[0].innerText?r[0].innerText:r[0].text)}return null===n&&e&&e.childNodes&&(0==e.childNodes.length||1==e.childNodes.length&&"#text"==e.firstChild.nodeName)&&(n=void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.text),null===n&&(n=e),n},p.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,n,r,i){var o,a,s,l;for("@"===r.slice(0,1)&&(r=r.slice(1)),o=0,a=(s=e.getElementsByTagName(t)).length;o<a;o+=1)(l=s[o]).getAttribute("name")==n&&l.setAttribute(r,i)},p.XmlDOM.prototype.deleteNodeByNameAttribute=function(e,t){var n,r,i,o;for(n=0,r=(o=e.childNodes).length;n<r;n+=1)(i=o[n])&&i.nodeType!=i.TEXT_NODE&&this.hasAttributes(i)&&i.getAttribute("name")==t&&e.removeChild(o[n])},p.XmlDOM.prototype.deleteAttribute=function(e,t){e.removeAttribute(t)},p.XmlDOM.prototype.setAttribute=function(e,t,n){return e.ownerDocument||(e=e.firstChild),["function","unknown"].indexOf(typeof e.setAttribute)>-1&&e.setAttribute(t,n),!1},p.XmlDOM.prototype.nodeCopy=function(e){return e.cloneNode(!0)},p.XmlDOM.prototype.getNodesByName=function(e,t,n){var r,i,o,a,s;for(r=[],a=0,s=(i=e.getElementsByTagName(t)).length;a<s;a+=1)o=i.item(a),(!n||this.hasAttributes(o)&&o.getAttribute("name")==n)&&r.push(o);return r},p.XmlDOM.prototype.nodeNameIs=function(e,t){return t==e.nodeName},p.XmlDOM.prototype.makeXml=function(e){return e||(e="<docco><bogus/></docco>"),e=e.replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(e,"application/xml").firstChild},p.XmlDOM.prototype.insertChildNodeAfter=function(e,t,n,r){var i;return i=this.importNode(t.ownerDocument,r),e.replaceChild(i,t),e},p.XmlDOM.prototype.insertPublisherAndPlace=function(e){for(var t=e.getElementsByTagName("group"),n=0,r=t.length;n<r;n+=1){for(var i=t.item(n),o=[],a=0,s=i.childNodes.length;a<s;a+=1)1!==i.childNodes.item(a).nodeType&&o.push(a);if(i.childNodes.length-o.length==2){var l=[];for(a=0,s=2;a<s;a+=1)if(!(o.indexOf(a)>-1)){for(var u=i.childNodes.item(a),c=[],f=0,d=u.childNodes.length;f<d;f+=1)1!==u.childNodes.item(f).nodeType&&c.push(f);if(u.childNodes.length-c.length==0&&(l.push(u.getAttribute("variable")),u.getAttribute("suffix")||u.getAttribute("prefix"))){l=[];break}}l.indexOf("publisher")>-1&&l.indexOf("publisher-place")>-1&&i.setAttribute("has-publisher-and-publisher-place",!0)}}},p.XmlDOM.prototype.isChildOfSubstitute=function(e){return!!e.parentNode&&("substitute"===e.parentNode.tagName.toLowerCase()||this.isChildOfSubstitute(e.parentNode))},p.XmlDOM.prototype.addMissingNameNodes=function(e){for(var t=e.getElementsByTagName("names"),n=0,r=t.length;n<r;n+=1){var i=t.item(n),o=i.getElementsByTagName("name");if(!(o&&0!==o.length||this.isChildOfSubstitute(i))){var a=i.ownerDocument.createElement("name");i.appendChild(a)}}},p.XmlDOM.prototype.addInstitutionNodes=function(e){var t,n,r,i,o,a,s,l;for(s=0,l=(t=e.getElementsByTagName("names")).length;s<l;s+=1)if(0!=(o=(n=t.item(s)).getElementsByTagName("name")).length&&0==n.getElementsByTagName("institution").length){i=(r=this.importNode(e.ownerDocument,this.institution)).getElementsByTagName("institution-part").item(0),a=o.item(0),n.insertBefore(r,a.nextSibling);for(var u=0,c=p.INSTITUTION_KEYS.length;u<c;u+=1){var f=p.INSTITUTION_KEYS[u];(g=a.getAttribute(f))&&i.setAttribute(f,g)}var d=a.getElementsByTagName("name-part");for(u=0,c=d.length;u<c;u+=1)if("family"===d[u].getAttribute("name"))for(var h=0,m=p.INSTITUTION_KEYS.length;h<m;h+=1){var g;f=p.INSTITUTION_KEYS[h];(g=d[u].getAttribute(f))&&i.setAttribute(f,g)}}},p.XmlDOM.prototype.flagDateMacros=function(e){var t,n,r,i=e.getElementsByTagName("macro");for(t=0,n=i.length;t<n;t+=1)(r=i.item(t)).getElementsByTagName("date").length&&r.setAttribute("macro-has-date","true")},p.setupXml=function(e){var t={},n=null;return void 0!==e?"string"==typeof e?(t="<"===(e=e.replace("^\ufeff","").replace(/^\s+/,"")).slice(0,1)?p.parseXml(e):JSON.parse(e),n=new p.XmlJSON(t)):n=void 0!==e.getAttribute?new p.XmlDOM(e):void 0!==e.toXMLString?new p.XmlE4X(e):new p.XmlJSON(e):p.error("unable to parse XML input"),n||p.error("citeproc-js error: unable to parse CSL style or locale object"),n},p.getSortCompare=function(e){if(p.stringCompare)return p.stringCompare;var t,n={sensitivity:"base",ignorePunctuation:!0,numeric:!0};e||(e="en-US");var r=function(e){return e.replace(/^[\[\]\'\"]*/g,"")},i=!!(t=function(t,r){return t.toLocaleLowerCase().localeCompare(r.toLocaleLowerCase(),e,n)})("[x","x")&&function(e,n){return t(r(e),r(n))};return function(e,n){return i?i(e,n):t(e,n)}},p.ambigConfigDiff=function(e,t){var n,r,i,o;if(e.names.length!==t.names.length)return 1;for(n=0,r=e.names.length;n<r;n+=1){if(e.names[n]!==t.names[n])return 1;for(i=0,o=e.givens[n];i<o;i+=1)if(e.givens[n][i]!==t.givens[n][i])return 1}return e.disambiguate!=t.disambiguate?1:e.year_suffix!==t.year_suffix?1:0},p.cloneAmbigConfig=function(e,t){var n,r,i,o,a,s={names:[],givens:[],year_suffix:!1,disambiguate:!1};for(n=0,r=e.names.length;n<r;n+=1)a=e.names[n],s.names[n]=a;for(n=0,r=e.givens.length;n<r;n+=1){for(a=[],i=0,o=e.givens[n].length;i<o;i+=1)a.push(e.givens[n][i]);s.givens.push(a)}return t?(s.year_suffix=t.year_suffix,s.disambiguate=t.disambiguate):(s.year_suffix=e.year_suffix,s.disambiguate=e.disambiguate),s},p.getAmbigConfig=function(){var e;return(e=this.tmp.disambig_request)||(e=this.tmp.disambig_settings),p.cloneAmbigConfig(e)},p.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},p.getMinVal=function(){return this.tmp["et-al-min"]},p.tokenExec=function(e,t,n){var r,i;r=e.next,i=!1;e.test&&(r=function(t){return t?(this.tmp.jump.replace("succeed"),e.succeed):(this.tmp.jump.replace("fail"),e.fail)}.call(this,e.test(t,n)));for(var o=0,a=e.execs.length;o<a;o++)(i=e.execs[o].call(e,this,t,n))&&(r=i);return r},p.expandMacro=function(e,t){var n,r,i;n=e.postponed_macro;var o=e.strings.sort_direction;e=new p.Token("group",p.START);var a=!1,s=!1;(r=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",n)).length&&(s=this.cslXml.getAttributeValue(r[0],"cslid"),a=this.cslXml.getAttributeValue(r[0],"macro-has-date")),a&&(n=n+"@"+this.build.current_default_locale,c=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!0)},e.execs.push(c)),this.build.macro_stack.indexOf(n)>-1?p.error('CSL processor error: call to macro "'+n+'" would cause an infinite loop'):this.build.macro_stack.push(n),e.cslid=s,p.MODULE_MACROS[n]&&(e.juris=n,this.opt.update_mode=p.POSITION),p.Node.group.build.call(e,this,t,!0),this.cslXml.getNodeValue(r)||p.error('CSL style error: undefined macro "'+n+'"');var l,u=p.getMacroTarget.call(this,n);if(u&&(p.buildMacro.call(this,u,r),p.configureMacro.call(this,u)),!this.build.extension){var c=(l=n,function(e,t,n){for(var r=0;r<e.macros[l].length;)r=p.tokenExec.call(e,e.macros[l][r],t,n)}),f=new p.Token("text",p.SINGLETON);f.execs.push(c),t.push(f)}(i=new p.Token("group",p.END)).strings.sort_direction=o,a&&(c=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!1)},i.execs.push(c)),e.juris&&(i.juris=n),p.Node.group.build.call(i,this,t,!0),this.build.macro_stack.pop()},p.getMacroTarget=function(e){var t=!1;return this.build.extension?t=this[this.build.root+this.build.extension].tokens:this.macros[e]||(t=[],this.macros[e]=t),t},p.buildMacro=function(e,t){p.makeBuilder(this,e)(void 0===t.length?t:t[0])},p.configureMacro=function(e){this.build.extension||this.configureTokenList(e)},p.XmlToToken=function(e,t,n,r){var i,o,a,s,l,u;if(i=e.cslXml.nodename(this),!e.build.skip||e.build.skip===i)if(i){if(p.Node[e.cslXml.nodename(this)]||p.error('Undefined node name "'+i+'".'),[],a=e.cslXml.attributes(this),s=p.setDecorations.call(this,e,a),l=new p.Token(i,t),t!==p.END||"if"===i||"else-if"===i||"layout"===i){for(var c in a)if(a.hasOwnProperty(c)){if(t===p.END&&"@language"!==c&&"@locale"!==c)continue;if(a.hasOwnProperty(c))if(p.Attributes[c])try{p.Attributes[c].call(l,e,""+a[c])}catch(e){p.error(c+" attribute: "+e)}else p.debug('warning: undefined attribute "'+c+'" in style')}l.decorations=s,p.DATE_VARIABLES.indexOf(a["@variable"])>-1&&r.push(l.variables)}else t===p.END&&a["@variable"]&&(l.hasVariable=!0,p.DATE_VARIABLES.indexOf(a["@variable"])>-1&&(l.variables=r.pop()));u=n||e[e.build.area].tokens,p.Node[i].build.call(l,e,u,!0)}else(o=e.cslXml.content(this))&&(e.build.text=o)},p.DateParser=function(){for(var e=[["明治",1867],["大正",1911],["昭和",1925],["平成",1988]],t={},n=0,r=e.length;n<r;n++){var i=e[n][0],o=e[n][1];t[i]=o}var a=[],s={};for(n=0,r=e.length;n<r;n++){var l=e[n];o=l[0];a.push(o),s[l[0]]=l[1]}var u=a.join("|"),c=new RegExp("(?:"+u+")(?:[0-9]+)"),f=new RegExp("(?:"+u+")(?:[0-9]+)","g"),d=/(\u6708|\u5E74)/g,h=/\u65E5/g,m=/\u301c/g,g="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",b=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),y=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),v=new RegExp(g.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var e=0,t=this.monthStrings.length;e<t;e++)this.monthSets.push([this.monthStrings[e]]);this.monthAbbrevs=[];for(e=0,t=this.monthSets.length;e<t;e++){this.monthAbbrevs.push([]);for(var n=0,r=this.monthSets[e].length;n<r;n++)this.monthAbbrevs[e].push(this.monthSets[e][0].slice(0,3))}this.monthRexes=[];for(e=0,t=this.monthAbbrevs.length;e<t;e++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[e].join("|")+")"))},this.addDateParserMonths=function(e){if("string"==typeof e&&(e=e.split(/\s+/)),12===e.length||16===e.length){for(var t=0,n=e.length;t<n;t++){for(var r=null,i=!1,o=3,a={},s=0,l=this.monthAbbrevs.length;s<l;s++){if(a[s]={},s===t){for(var u=0,c=this.monthAbbrevs[t].length;u<c;u++)if(this.monthAbbrevs[t][u]===e[t].slice(0,this.monthAbbrevs[t][u].length)){i=!0;break}}else for(u=0,c=this.monthAbbrevs[s].length;u<c;u++)if(r=this.monthAbbrevs[s][u].length,this.monthAbbrevs[s][u]===e[t].slice(0,r)){for(;this.monthSets[s][u].slice(0,r)===e[t].slice(0,r);){if(r>e[t].length||r>this.monthSets[s][u].length){p.debug("unable to disambiguate month string in date parser: "+e[t]);break}r+=1}o=r,a[s][u]=r}for(var f in a)for(var d in a[f])r=a[f][d],f=parseInt(f,10),d=parseInt(d,10),this.monthAbbrevs[f][d]=this.monthSets[f][d].slice(0,r)}i||(this.monthSets[t].push(e[t]),this.monthAbbrevs[t].push(e[t].slice(0,o)))}this.monthRexes=[],this.monthRexStrs=[];for(t=0,n=this.monthAbbrevs.length;t<n;t++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[t].join("|")+")");if(18===this.monthAbbrevs.length)for(t=12,n=14;t<n;t++)this.monthRexes[t+4]=new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")"),this.monthRexStrs[t+4]="^(?:"+this.monthAbbrevs[t].join("|")+")"}else p.debug("month [+season] list of "+e.length+", expected 12 or 16. Ignoring.")},this.convertDateObjectToArray=function(e){e["date-parts"]=[],e["date-parts"].push([]);for(var t,n=0,r=0,i=3;r<i&&e[t=["year","month","day"][r]];r++)n+=1,e["date-parts"][0].push(e[t]),delete e[t];e["date-parts"].push([]);for(r=0,i=n;r<i&&e[t=["year_end","month_end","day_end"][r]];r++)e["date-parts"][1].push(e[t]),delete e[t];return e["date-parts"][0].length!==e["date-parts"][1].length&&e["date-parts"].pop(),e},this.convertDateObjectToString=function(e){for(var t=[],n=0;n<3&&e[p.DATE_PARTS_ALL[n]];n+=1)t.push(e[p.DATE_PARTS_ALL[n]]);return t.join("-")},this._parseNumericDate=function(e,t,n,r){n||(n="");for(var i=r.split(t),o=0,a=i.length;o<a;o++)if(4===i[o].length){e["year"+n]=i[o].replace(/^0*/,""),i=o?i.slice(0,o):i.slice(1);break}for(o=0,a=i.length;o<a;o++)i[o]=parseInt(i[o],10);1===i.length||2===i.length&&!i[1]?e["month"+n]=""+i[0]:2===i.length&&(i[this.monthGuess]>12?(e["month"+n]=""+i[this.dayGuess],e["day"+n]=""+i[this.monthGuess]):(e["month"+n]=""+i[this.monthGuess],e["day"+n]=""+i[this.dayGuess]))},this.parseDateToObject=function(e){var t,n=e,r=-1,i=-1,o=!1;if(e){if("-"===e.slice(0,1)&&(o=!0,e=e.slice(1)),e.match(/^[0-9]{1,3}$/))for(;e.length<4;)e="0"+e;if(j=(e=(e=""+e).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(d)){var a=(e=(e=(e=(e=(e=(e=e.replace(/\s+/g,"")).replace(h,"")).replace(d,"-")).replace(m,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(c);t=[];var l=e.match(f);if(l){for(var u=[],g=0,x=l.length;g<x;g++)u=u.concat(l[g].match(/([^0-9]+)([0-9]+)/).slice(1));for(g=0,x=a.length;g<x;g++)if(t.push(a[g]),g!==x-1){var _=2*g;t.push(u[_]),t.push(u[_+1])}}else t=a;for(g=1,x=t.length;g<x;g+=3)t[g+1]=s[t[g]]+parseInt(t[g+1],10),t[g]="";r=(e=(e=(e=(e=t.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),i=e.indexOf("-")}}var w,O,E="",k="",S={};if('"'===(e=e.replace(/([A-Za-z])\./g,"$1")).slice(0,1)&&'"'===e.slice(-1))return S.literal=e.slice(1,-1),S;r>-1&&i>-1?e.split("/").length>3?(w="-",O="/",t=(e=e.replace(/\_/g,"-")).split(v)):(w="/",O="-",t=(e=e.replace(/\_/g,"/")).split(y)):(w="-",O="-",t=(e=(e=e.replace(/\//g,"-")).replace(/\_/g,"-")).split(b));var T=[];for(g=0,x=t.length;g<x;g++){var j;(j=t[g].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/))&&T.push(j[1])}var A=T.indexOf(w),P=[],C=!1;A>-1?(P.push([0,A]),P.push([A+1,T.length]),C=!0):P.push([0,T.length]);var N="";for(g=0,x=P.length;g<x;g++){var M=P[g],I=T.slice(M[0],M[1]);e:for(var D=0,R=I.length;D<R;D++){var z=I[D];if(z.indexOf(O)>-1)this._parseNumericDate(S,O,N,z);else if(z.match(/[0-9]{4}/))S["year"+N]=z.replace(/^0*/,"");else{("~"===z||"?"===z||"c"===z||z.match(/^cir/))&&(S.circa=!0);for(var L=0,F=this.monthRexes.length;L<F;L++)if(z.toLocaleLowerCase().match(this.monthRexes[L])){S["month"+N]=""+(parseInt(L,10)+1);continue e}z.match(/^[0-9]+$/)&&(E=z),z.toLocaleLowerCase().match(/^bc/)&&E?(S["year"+N]=""+-1*E,E=""):z.toLocaleLowerCase().match(/^ad/)&&E?(S["year"+N]=""+E,E=""):!z.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)||S["season"+N]||(k=z)}}E&&(S["day"+N]=E,E=""),k&&!S["season"+N]&&(S["season"+N]=k.trim(),k=""),N="_end"}if(C)for(D=0,R=p.DATE_PARTS_ALL.length;D<R;D++){var B=p.DATE_PARTS_ALL[D];S[B]&&!S[B+"_end"]?S[B+"_end"]=S[B]:!S[B]&&S[B+"_end"]&&(S[B]=S[B+"_end"])}(!S.year||S.year&&S.day&&!S.month)&&(S={literal:n});var U=["year","month","day","year_end","month_end","day_end"];for(g=0,x=U.length;g<x;g++){var q=U[g];"string"==typeof S[q]&&S[q].match(/^[0-9]+$/)&&(S[q]=parseInt(S[q],10))}return o&&Object.keys(S).indexOf("year")>-1&&(S.year=-1*S.year),S},this.parseDateToArray=function(e){return this.convertDateObjectToArray(this.parseDateToObject(e))},this.parseDateToString=function(e){return this.convertDateObjectToString(this.parseDateToObject(e))},this.parse=function(e){return this.parseDateToObject(e)},this.setOrderMonthDay(),this.resetDateParserMonths()},p.DateParser=new p.DateParser,p.Engine=function(e,t,n,r){var i,o;for(var a in this.processor_version=p.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=e,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},writable:!0,configurable:!0}),e.variableWrapper&&(p.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(p.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),p.retrieveStyleModule&&(this.sys.retrieveStyleModule=p.retrieveStyleModule),p.getAbbreviation&&(this.sys.getAbbreviation=p.getAbbreviation),this.sys.stringCompare&&(p.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=p.AbbreviationSegments,this.transform=new p.Transform(this),this.setParseNames=function(e){this.opt["parse-names"]=e},this.opt=new p.Engine.Opt,this.tmp=new p.Engine.Tmp,this.build=new p.Engine.Build,this.fun=new p.Engine.Fun(this),this.configure=new p.Engine.Configure,this.citation_sort=new p.Engine.CitationSort,this.bibliography_sort=new p.Engine.BibliographySort,this.citation=new p.Engine.Citation(this),this.bibliography=new p.Engine.Bibliography,this.intext=new p.Engine.InText,this.output=new p.Output.Queue(this),this.dateput=new p.Output.Queue(this),this.cslXml=p.setupXml(t),p.SYS_OPTIONS){var s=p.SYS_OPTIONS[a];"boolean"==typeof this.sys[s]&&(this.opt.development_extensions[s]=this.sys[s])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(e,t){var n=this.cslXml.children(e);this.cslXml.setAttribute(e,"cslid",this.build.cslNodeId),this.opt.nodenames.push(t),this.build.cslNodeId+=1;for(var r=0,i=this.cslXml.numberofnodes(n);r<i;r+=1)(t=this.cslXml.nodename(n[r]))&&this.setCslNodeIds(n[r],t)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),void 0===this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.static_statute_locator=!0,this.opt.development_extensions.handle_parallel_articles=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0),n&&(n=n.replace("_","-"),n=p.normalizeLocaleStr(n)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=p.normalizeLocaleStr(this.opt["default-locale"][0])),n&&r&&(this.opt["default-locale"]=[n]),n&&!r&&this.opt["default-locale"][0]&&(n=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(n||(n="en-US"),this.opt["default-locale"].push("en-US")),n||(n=this.opt["default-locale"][0]),i=p.localeResolve(n),this.opt.lang=i.best,this.opt["default-locale"][0]=i.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(i),this.locale[this.opt.lang].opts["skip-words-regexp"]=(o=(o=this.locale[this.opt.lang].opts["skip-words"]).slice(),new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+o.join("|")+")(?=[!?:]*\\s+|-|$))","g")),this.output.adjust=new p.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new p.Registry(this),this.macros={},this.build.area="citation";var l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(l,this[this.build.area].tokens),this.build.area="bibliography";l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(l,this[this.build.area].tokens),this.build.area="intext";l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(l,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new p.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new p.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=p.DateParser,this.fun.flipflopper=new p.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=p.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=p.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},p.Engine.prototype.setCloseQuotesArray=function(){var e;(e=[]).push(this.getTerm("close-quote")),e.push(this.getTerm("close-inner-quote")),e.push('"'),e.push("'"),this.opt.close_quotes_array=e},p.makeBuilder=function(e,t){var n=[],r=[];function i(i){r.push(i),p.XmlToToken.call(i,e,p.START,t,n)}function o(){var i=r.pop();p.XmlToToken.call(i,e,p.END,t,n)}function a(r){p.XmlToToken.call(r,e,p.SINGLETON,t,n)}return function t(n,r,s){s||(s=[]),n||(n=[]),void 0===n.length&&(n=[n]);for(var l=0;l<n.length;l++){var u=n[l];null!==e.cslXml.nodename(u)&&(r&&"date"===e.cslXml.nodename(u)&&(p.Util.fixDateNode.call(e,r,l,u),u=e.cslXml.children(r)[l]),e.cslXml.numberofnodes(e.cslXml.children(u))?(i(u),t(e.cslXml.children(u),u,s),o()):a(u))}}},p.Engine.prototype.buildTokenLists=function(e,t){this.cslXml.getNodeValue(e)&&p.makeBuilder(this,t)(void 0===e.length?e:e[0])},p.Engine.prototype.setStyleAttributes=function(){var e,t,n={};for(t in n.name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj))e.hasOwnProperty(t)&&p.Attributes[t].call(n,this,e[t])},p.Engine.prototype.getTerm=function(e,t,n,r,i,o){var a;e&&e.match(/[A-Z]/)&&e===e.toUpperCase()&&(p.debug("Warning: term key is in uppercase form: "+e),e=e.toLowerCase()),a=o?this.opt["default-locale"][0]:this.opt.lang;var s=p.Engine.getField(p.LOOSE,this.locale[a].terms,e,t,n,r);return s||"range-delimiter"!==e||(s="–"),void 0===s&&(i===p.STRICT?p.error('Error in getTerm: term "'+e+'" does not exist.'):i===p.TOLERANT&&(s="")),s&&(this.tmp.cite_renders_content=!0),s},p.Engine.prototype.getDate=function(e,t){var n;return n=t?this.opt["default-locale"]:this.opt.lang,!!this.locale[n].dates[e]&&this.locale[n].dates[e]},p.Engine.prototype.getOpt=function(e){return void 0!==this.locale[this.opt.lang].opts[e]&&this.locale[this.opt.lang].opts[e]},p.Engine.prototype.getVariable=function(e,t,n,r){return p.Engine.getField(p.LOOSE,e,t,n,r)},p.Engine.prototype.getDateNum=function(e,t){return void 0===e?0:e[t]},p.Engine.getField=function(e,t,n,r,i,o){var a,s,l,u,c,f;if(a="",void 0===t[n]){if(e!==p.STRICT)return;p.error('Error in getField: term "'+n+'" does not exist.')}for(f=o&&t[n][o]?t[n][o]:t[n],s=[],"symbol"===r?s=["symbol","short"]:"verb-short"===r?s=["verb-short","verb"]:"long"!==r&&(s=[r]),c=(s=s.concat(["long"])).length,u=0;u<c;u+=1)if(l=s[u],"string"==typeof f||"number"==typeof f)a=f;else if(void 0!==f[l]){a="string"==typeof f[l]||"number"==typeof f[l]?f[l]:"number"==typeof i?f[l][i]:f[l][0];break}return a},p.Engine.prototype.configureTokenLists=function(){var e,t;for(t=p.AREAS.length,e=0;e<t;e+=1){var n=this[p.AREAS[e]].tokens;this.configureTokenList(n)}return this.version=p.version,this.state},p.Engine.prototype.configureTokenList=function(e){var t,n,r,i,o,a;for(t=["year","month","day"],i=e.length-1;i>-1;i+=-1){if("date"===(n=e[i]).name&&p.END===n.tokentype&&(r=[]),"date-part"===n.name&&n.strings.name)for(a=t.length,o=0;o<a;o+=1)t[o]===n.strings.name&&r.push(n.strings.name);"date"===n.name&&p.START===n.tokentype&&(r.reverse(),n.dateparts=r),n.next=i+1,n.name&&p.Node[n.name].configure&&p.Node[n.name].configure.call(n,this,i)}},p.Engine.prototype.refetchItems=function(e){for(var t=[],n=0,r=e.length;n<r;n+=1)t.push(this.refetchItem(""+e[n]));return t},p.ITERATION=0,p.Engine.prototype.retrieveItem=function(e){var t,n;if(this.tmp.loadedItemIDs[e])return this.registry.refhash[e];if(this.tmp.loadedItemIDs[e]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var r=0,i=this.opt["default-locale"].length;r<i;r+=1)this.opt["default-locale"][r]=this.opt["default-locale"][r].toLowerCase();for(r=0,i=this.opt["locale-translit"].length;r<i;r+=1)this.opt["locale-translit"][r]=this.opt["locale-translit"][r].toLowerCase();for(r=0,i=this.opt["locale-translat"].length;r<i;r+=1)this.opt["locale-translat"][r]=this.opt["locale-translat"][r].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(p.ITERATION+=1,t=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+e))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(t.multi){if(t.multi._keys)for(var o in t.multi._keys)for(var a in t.multi._keys[o])a!==a.toLowerCase()&&(t.multi._keys[o][a.toLowerCase()]=t.multi._keys[o][a],delete t.multi._keys[o][a]);if(t.multi.main)for(var o in t.multi.main)t.multi.main[o]=t.multi.main[o].toLowerCase()}for(r=0,i=p.NAME_VARIABLES.length;r>i;r+=1){var s=p.NAME_VARIABLES[r];if(t[s]&&t[s].multi)for(var l=0,u=t[s].length;l<u;l+=1){var c=t[s][l];if(c.multi){if(c.multi._key)for(var a in c.multi._key)a!==a.toLowerCase()&&(c.multi._key[a.toLowerCase()]=c.multi._key[a],delete c.multi._key[a]);c.multi.main&&(c.multi.main=c.multi.main.toLowerCase())}}}}t.language&&t.language.match(/[><]/)&&("<"===(n=t.language.match(/(.*?)([<>])(.*)/))[2]?(t["language-name"]=n[1],t["language-name-original"]=n[3]):(t["language-name"]=n[3],t["language-name-original"]=n[1]),this.opt.multi_layout?t["language-name-original"]&&(t.language=t["language-name-original"]):t["language-name"]&&(t.language=t["language-name"]));t.page&&(t["page-first"]=t.page,"\\"!==(n=(""+t.page).split(/\s*(?:&|, |-|\u2013)\s*/))[0].slice(-1)&&(t["page-first"]=n[0]));for(var a in this.opt.development_extensions.field_hack&&t.note&&p.parseNoteFieldHacks(t,!1,this.opt.development_extensions.allow_field_hack_date_override),t)if(p.DATE_VARIABLES.indexOf(a.replace(/^alt-/,""))>-1){var f=t[a];f&&(this.opt.development_extensions.raw_date_parsing&&(!f.raw||f["date-parts"]&&0!==f["date-parts"].length||(f=this.fun.dateparser.parseDateToObject(f.raw))),t[a]=this.dateParseArray(f))}if(this.opt.development_extensions.static_statute_locator&&t.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1){var d,h=["type","title","jurisdiction","genre","volume","container-title"],m=[];for(r=0,i=h.length;r<i;r+=1)t[d=h[r]]&&m.push(t[d]);for(r=0,i=(h=["original-date","issued"]).length;r<i;r+=1)if(t[d=h[r]]&&t[d].year){var g=t[d].year;m.push(g);break}t.legislation_id=m.join("::")}if(this.opt.development_extensions.force_jurisdiction&&"string"==typeof t.authority&&(t.authority=[{literal:t.authority,multi:{_key:{}}}],t.multi&&t.multi._keys&&t.multi._keys.authority))for(var a in t.authority[0].multi._key={},t.multi._keys.authority)t.authority[0].multi._key[a]={literal:t.multi._keys.authority[a]};if(t["title-short"]||(t["title-short"]=t.shortTitle),this.opt.development_extensions.main_title_from_short_title){var b="fr"===this.opt["default-locale"][0].slice(0,2).toLowerCase();p.extractTitleAndSubtitle.call(this,t,b)}var y,v=["bill","legal_case","legislation","gazette","regulation"].indexOf(t.type)>-1;if(this.opt.development_extensions.force_jurisdiction&&v&&(t.jurisdiction||(t.jurisdiction="us")),!v&&t.title&&this.sys.getAbbreviation){t.jurisdiction||!0,y=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(t.title):t.title;var x=this.transform.loadAbbreviation(t.jurisdiction,"title",y,t.type);this.transform.abbrevs[x].title&&this.transform.abbrevs[x].title[y]&&(t["title-short"]=this.transform.abbrevs[x].title[y])}if(t["container-title-short"]||(t["container-title-short"]=t.journalAbbreviation),t["container-title"]&&this.sys.getAbbreviation){y=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(t["container-title"]):t["container-title"];x=this.transform.loadAbbreviation(t.jurisdiction,"container-title",y);this.transform.abbrevs[x]["container-title"]&&this.transform.abbrevs[x]["container-title"][y]&&(t["container-title-short"]=this.transform.abbrevs[x]["container-title"][y])}if(t.jurisdiction&&(t.country=t.jurisdiction.split(":")[0]),this.registry.refhash[e]){if(JSON.stringify(this.registry.refhash[e])!=JSON.stringify(t)){for(var a in this.registry.refhash[e])delete this.registry.refhash[e][a];this.tmp.taintedItemIDs[t.id]=!0,Object.assign(this.registry.refhash[e],t)}}else this.registry.refhash[e]=t;return this.registry.refhash[e]},p.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]},p.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]},p.Engine.prototype.setOpt=function(e,t,n){"style"===e.name||"cslstyle"===e.name?(this.opt.inheritedAttributes[t]=n,this.citation.opt.inheritedAttributes[t]=n,this.bibliography.opt.inheritedAttributes[t]=n):["citation","bibliography"].indexOf(e.name)>-1?this[e.name].opt.inheritedAttributes[t]=n:e.strings[t]=n},p.Engine.prototype.inheritOpt=function(e,t,n,r){if(void 0!==e.strings[t])return e.strings[t];var i=this[this.tmp.root].opt.inheritedAttributes[n||t];return void 0!==i?i:r},p.Engine.prototype.remapSectionVariable=function(e){for(var t=0,n=e.length;t<n;t+=1){var r=e[t][0],i=e[t][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(r.type)>-1){if(i.locator)i.locator=i.locator.trim(),(a=i.locator.match(p.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))||(i.label?i.locator=p.STATUTE_SUBDIV_STRINGS_REVERSE[i.label]+" "+i.locator:i.locator="p. "+i.locator);var o=null;if(r.section)r.section=r.section.trim(),(a=r.section.match(p.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))?o=a[0].trim():(r.section="sec. "+r.section,o="sec.");if(r.section)if(i.locator){var a,s=" ";(a=i.locator.match(/^([^ ]*)\s*(.*)/))?("p."===a[1]&&"p."!==o&&(i.locator=a[2]),["[","(",".",",",";",":","?"].indexOf(i.locator.slice(0,1))>-1&&(s="")):s="",i.locator=r.section+s+i.locator}else i.locator=r.section;i.label=""}}},p.Engine.prototype.setNumberLabels=function(e){if(e.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)>-1&&this.opt.development_extensions.static_statute_locator&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var t=""+e.number,n=(t=t.split("\\").join("")).split(/\s+/)[0],r=p.STATUTE_SUBDIV_STRINGS[n];if(r){var i=t.split(p.STATUTE_SUBDIV_PLAIN_REGEX);if(i.length>1){for(var o=[],a=1,s=i.length;a<s;a+=1)o.push(i[a].replace(/\s*$/,"").replace(/^\s*/,""));t=o.join(" ")}else t=i[0];this.tmp.shadow_numbers.number.label=r,this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!0}},p.substituteOne=function(e){return function(t,n){return n?e.replace("%%STRING%%",n):""}},p.substituteTwo=function(e){return function(t){var n=e.replace("%%PARAM%%",t);return function(e,t){return t?n.replace("%%STRING%%",t):""}}},p.Mode=function(e){var t,n,r,i,o,a;for(r in t={},n=p.Output.Formats[e])"@"===r.slice(0,1)?(i=!1,o=n[r],a=r.split("/"),"string"==typeof o&&o.indexOf("%%STRING%%")>-1?i=o.indexOf("%%PARAM%%")>-1?p.substituteTwo(o):p.substituteOne(o):"boolean"!=typeof o||o?"function"==typeof o?i=o:p.error("Bad "+e+" config entry for "+r+": "+o):i=p.Output.Formatters.passthrough,1===a.length?t[a[0]]=i:2===a.length&&(t[a[0]]||(t[a[0]]={}),t[a[0]][a[1]]=i)):t[r]=n[r];return t},p.setDecorations=function(e,t){var n,r;for(r in n=[],p.FORMAT_KEY_SEQUENCE){var i;t[i=p.FORMAT_KEY_SEQUENCE[r]]&&(n.push([i,t[i]]),delete t[i])}return n},p.Doppeler=function(e,t){var n=new RegExp("("+e+")","g"),r=new RegExp(e,"g");this.split=function(e){t&&(e=t(e));var i=e.match(n);if(!i)return{tags:[],strings:[e]};for(var o=e.split(r),a=i.length-1;a>-1;a--){"number"==typeof i[a]&&(i[a]=""),"'"===i[a]&&o[a+1].length>0&&(o[a+1]=i[a]+o[a+1],i[a]="")}return{tags:i,strings:o,origStrings:o.slice()}},this.join=function(e){for(var t=e.strings.slice(-1),n=e.tags.length-1;n>-1;n--)t.push(e.tags[n]),t.push(e.strings[n]);return t.reverse(),t.join("")}},p.Engine.prototype.normalDecorIsOrphan=function(e,t){if("normal"===t[1]){for(var n,r=!1,i=(n="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(e.alldecor):e.alldecor).length-1;i>-1;i+=-1)for(var o=n[i].length-1;o>-1;o+=-1)n[i][o][0]===t[0]&&"normal"!==n[i][o][1]&&(r=!0);if(!r)return!0}return!1},p.Engine.prototype.getCitationLabel=function(e){var t="",n=this.getTrigraphParams(),r=n[0],i=this.getTerm("reference","short",0);void 0===i&&(i="reference"),i=(i=i.replace(".","")).slice(0,1).toUpperCase()+i.slice(1);for(var o=0,a=p.NAME_VARIABLES.length;o<a;o+=1){var s=p.NAME_VARIABLES[o];if(e[s]){var l=e[s];r=l.length>n.length?n[n.length-1]:n[l.length-1];for(var u=0,c=l.length;u<c&&u!==r.authors.length;u+=1){var f=this.nameOutput.getName(l[u],"locale-translit",!0).name;f&&f.family?i=(i=f.family).replace(/^([ \'\u2019a-z]+\s+)/,""):f&&f.literal&&(i=f.literal);var d=i.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(d&&(i=i.slice(d[1].length)),!(i=i.replace(p.ROMANESQUE_NOT_REGEXP,"")))break;(i=i.slice(0,r.authors[u])).length>1?i=i.slice(0,1).toUpperCase()+i.slice(1).toLowerCase():1===i.length&&(i=i.toUpperCase()),t+=i}break}}if(!t&&e.title){var h=this.locale[this.opt.lang].opts["skip-words"],m=e.title.split(/\s+/);for(o=m.length-1;o>-1;o--)h.indexOf(m[o])>-1&&(m=m.slice(0,o).concat(m.slice(o+1)));var g=m.join("");(g=g.slice(0,n[0].authors[0])).length>1?g=g.slice(0,1).toUpperCase()+g.slice(1).toLowerCase():1===g.length&&(g=g.toUpperCase()),t=g}var b="0000";return e.issued&&e.issued.year&&(b=""+e.issued.year),t+=b=b.slice(-1*r.year)},p.Engine.prototype.getTrigraphParams=function(){var e=[],t=this.opt.trigraph.split(":");this.opt.trigraph&&"A"===this.opt.trigraph.slice(0,1)||p.error("Bad trigraph definition: "+this.opt.trigraph);for(var n=0,r=t.length;n<r;n+=1){for(var i=t[n],o={authors:[],year:0},a=0,s=i.length;a<s;a+=1)switch(i.slice(a,a+1)){case"A":o.authors.push(1);break;case"a":o.authors[o.authors.length-1]+=1;break;case"0":o.year+=1;break;default:p.error("Invalid character in trigraph definition: "+this.opt.trigraph)}e.push(o)}return e},p.Engine.prototype.setOutputFormat=function(e){this.opt.mode=e,this.fun.decorate=p.Mode(e),this.output[e]||(this.output[e]={},this.output[e].tmp={})},p.Engine.prototype.getSortFunc=function(){return function(e,t){return e=e.split("-"),t=t.split("-"),e.length<t.length?1:e.length>t.length?-1:(e=e.slice(-1)[0],t=t.slice(-1)[0],e.length<t.length?1:e.length>t.length?-1:0)}},p.Engine.prototype.setLangTagsForCslSort=function(e){var t,n;if(e)for(this.opt["locale-sort"]=[],t=0,n=e.length;t<n;t+=1)this.opt["locale-sort"].push(e[t]);this.opt["locale-sort"].sort(this.getSortFunc())},p.Engine.prototype.setLangTagsForCslTransliteration=function(e){var t,n;if(this.opt["locale-translit"]=[],e)for(t=0,n=e.length;t<n;t+=1)this.opt["locale-translit"].push(e[t]);this.opt["locale-translit"].sort(this.getSortFunc())},p.Engine.prototype.setLangTagsForCslTranslation=function(e){var t,n;if(this.opt["locale-translat"]=[],e)for(t=0,n=e.length;t<n;t+=1)this.opt["locale-translat"].push(e[t]);this.opt["locale-translat"].sort(this.getSortFunc())},p.Engine.prototype.setLangPrefsForCites=function(e,t){var n=this.opt["cite-lang-prefs"];t||(t=function(e){return e.toLowerCase()});for(var r=["Persons","Institutions","Titles","Journals","Publishers","Places"],i=0,o=r.length;i<o;i+=1){var a=t(r[i]),s=r[i].toLowerCase();if(e[a]){for(var l=[];e[a].length>1;)l.push(e[a].pop());var u={orig:1,translit:2,translat:3};for(2===l.length&&u[l[0]]<u[l[1]]&&l.reverse();l.length;)e[a].push(l.pop());for(var c=n[s];c.length;)c.pop();for(var f=0,d=e[a].length;f<d;f+=1)c.push(e[a][f])}}},p.Engine.prototype.setLangPrefsForCiteAffixes=function(e){if(e&&48===e.length){for(var t,n=this.opt.citeAffixes,r=0,i=["persons","institutions","titles","journals","publishers","places"],o=["translit","orig","translit","translat"],a=0,s=i.length;a<s;a+=1)for(var l=0,u=o.length;l<u;l+=1)t="",r%8==4&&(n[i[a]]["locale-"+o[l]].prefix||n[i[a]]["locale-"+o[l]].suffix)||(t=e[r]?e[r]:"",n[i[a]]["locale-"+o[l]].prefix=t,t=e[r]?e[r+1]:"",n[i[a]]["locale-"+o[l]].suffix=t),r+=2;this.opt.citeAffixes=n}},p.Engine.prototype.setAutoVietnameseNamesOption=function(e){this.opt["auto-vietnamese-names"]=!!e},p.Engine.prototype.setAbbreviations=function(e){this.sys.setAbbreviations&&this.sys.setAbbreviations(e)},p.Engine.prototype.setSuppressTrailingPunctuation=function(e){this.citation.opt.suppressTrailingPunctuation=!!e},p.Output={},p.Output.Queue=function(e){this.levelname=["top"],this.state=e,this.queue=[],this.empty=new p.Token("empty");var t={};t.empty=this.empty,this.formats=new p.Stack(t),this.current=new p.Stack(this.queue)},p.Output.Queue.prototype.pop=function(){var e=this.current.value();return e.length?e.pop():e.blobs.pop()},p.Output.Queue.prototype.getToken=function(e){return this.formats.value()[e]},p.Output.Queue.prototype.mergeTokenStrings=function(e,t){var n,r,i;if(i=n=this.formats.value()[e],r=this.formats.value()[t]){n||((n=new p.Token(e,p.SINGLETON)).decorations=[]),i=new p.Token(e,p.SINGLETON);var o="";for(var o in n.strings)n.strings.hasOwnProperty(o)&&(i.strings[o]=n.strings[o]);for(var o in r.strings)r.strings.hasOwnProperty(o)&&(i.strings[o]=r.strings[o]);i.decorations=n.decorations.concat(r.decorations)}return i},p.Output.Queue.prototype.addToken=function(e,t,n){var r,i;if(r=new p.Token("output"),"string"==typeof n&&(n=this.formats.value()[n]),n&&n.strings){for(i in n.strings)n.strings.hasOwnProperty(i)&&(r.strings[i]=n.strings[i]);r.decorations=n.decorations}"string"==typeof t&&(r.strings.delimiter=t),this.formats.value()[e]=r},p.Output.Queue.prototype.pushFormats=function(e){e||(e={}),e.empty=this.empty,this.formats.push(e)},p.Output.Queue.prototype.popFormats=function(){this.formats.pop()},p.Output.Queue.prototype.startTag=function(e,t){var n={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(t=this.empty,e="empty"),n[e]=t,this.pushFormats(n),this.openLevel(e)},p.Output.Queue.prototype.endTag=function(e){this.closeLevel(e),this.popFormats()},p.Output.Queue.prototype.openLevel=function(e){var t,n;"object"==typeof e?t=new p.Blob(void 0,e):void 0===e?t=new p.Blob(void 0,this.formats.value().empty,"empty"):(this.formats.value()&&this.formats.value()[e]||p.error('CSL processor error: call to nonexistent format token "'+e+'"'),t=new p.Blob(void 0,this.formats.value()[e],e)),n=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.prefix=this.checkNestedBrace.update(t.strings.prefix)),n.push(t),this.current.push(t)},p.Output.Queue.prototype.closeLevel=function(e){e&&e!==this.current.value().levelname&&p.error("Level mismatch error:  wanted "+e+" but found "+this.current.value().levelname);var t=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.suffix=this.checkNestedBrace.update(t.strings.suffix))},p.Output.Queue.prototype.append=function(e,t,n,r,i){var o,a,s,l=!0;if(n&&(r=!0),this.state.tmp["doing-macro-with-date"]&&!n){if("macro-with-date"!==t)return!1;"macro-with-date"===t&&(t="empty")}if(void 0===e)return!1;if("number"==typeof e&&(e=""+e),!n&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value())return!1;if(a=!1,t?"literal"===t?(o=!0,l=!1):o="string"==typeof t?this.formats.value()[t]:t:o=this.formats.value().empty,o||p.error("CSL processor error: unknown format token name: "+t),o.strings&&void 0===o.strings.delimiter&&(o.strings.delimiter=""),"string"==typeof e&&e.length&&(e=e.replace(/ ([:;?!\u00bb])/g," $1").replace(/\u00ab /g,"« "),this.last_char_rendered=e.slice(-1),e=e.replace(/\s+'/g," '"),n||(e=e.replace(/^'/g," '")),r?n&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),a=new p.Blob(e,o),void 0===(s=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),s=this.current.value()),"string"==typeof a.blobs&&(r?n&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),"string"==typeof e){if("string"==typeof a.blobs&&" "!==a.blobs.slice(0,1)){for(var u="",c=a.blobs;p.TERMINAL_PUNCTUATION.indexOf(c.slice(0,1))>-1;)u+=c.slice(0,1),c=c.slice(1);c&&u&&(a.strings.prefix=a.strings.prefix+u,a.blobs=c)}a.strings["text-case"]&&(a.blobs=p.Output.Formatters[a.strings["text-case"]](this.state,e)),this.state.tmp.strip_periods&&!i&&(a.blobs=a.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var f=a.decorations.length-1;f>-1;f+=-1)"@quotes"===a.decorations[f][0]&&"false"!==a.decorations[f][1]&&(a.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),a.blobs.match(p.ROMANESQUE_REGEXP)||"@font-style"===a.decorations[f][0]&&(a.decorations=a.decorations.slice(0,f).concat(a.decorations.slice(f+1)));s.push(a),this.state.fun.flipflopper.processTags(a)}else l?s.push(a):s.push(e);return!0},p.Output.Queue.prototype.string=function(e,t,n){var r,i=p.getSafeEscape(this.state),o=t.slice(),a=[];if(0===o.length)return a;var s,l,u,c,f="";n?f=n.strings.delimiter:(e.tmp.count_offset_characters=!1,e.tmp.offset_characters=0),n&&n.new_locale&&(n.old_locale=e.opt.lang,e.opt.lang=n.new_locale);for(var d=0,h=o.length;d<h;d+=1){if((s=o[d]).strings.first_blob&&(e.tmp.count_offset_characters=s.strings.first_blob),"string"==typeof s.blobs){if("number"==typeof s.num)a.push(s);else if(s.blobs){s.particle&&(s.blobs=s.particle+s.blobs,s.particle="");var m=(r=i(s.blobs)).length;if(!e.tmp.suppress_decorations)for(y=0,v=s.decorations.length;y<v;y+=1)"@showid"!==(c=s.decorations[y])[0]&&(e.normalDecorIsOrphan(s,c)||(r=e.fun.decorate[c[0]][c[1]].call(s,e,r,c[2])));if(r&&r.length){if(r=i(s.strings.prefix)+r+i(s.strings.suffix),e.opt.development_extensions.csl_reverse_lookup_support&&!e.tmp.suppress_decorations)for(y=0,v=s.decorations.length;y<v;y+=1)"@showid"===(c=s.decorations[y])[0]&&(r=e.fun.decorate[c[0]][c[1]].call(s,e,r,c[2]));a.push(r),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=m+s.strings.suffix.length+s.strings.prefix.length)}}}else if(s.blobs.length){var g=e.output.string(e,s.blobs,s);if(n&&"string"!==g&&g.length>1&&s.strings.delimiter)for(var b=!1,y=0,v=g.length;y<v;y++)"string"!=typeof g[y]?b=!0:b&&(g[y]=s.strings.delimiter+g[y]);a=a.concat(g)}s.strings.first_blob&&e.registry.registry[s.strings.first_blob]&&(e.registry.registry[s.strings.first_blob].offset=e.tmp.offset_characters,e.tmp.count_offset_characters=!1)}for(d=0,h=a.length-1;d<h;d+=1)"number"!=typeof a[d].num||"number"!=typeof a[d+1].num||a[d+1].UGLY_DELIMITER_SUPPRESS_HACK||(a[d].strings.suffix=a[d].strings.suffix+(f||""),a[d+1].successor_prefix="",a[d+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);var x=0;for(d=0,h=a.length;d<h;d+=1)"string"==typeof a[d]&&(x=parseInt(d,10)+1,d<a.length-1&&"object"==typeof a[d+1]&&(f&&!a[d+1].UGLY_DELIMITER_SUPPRESS_HACK&&(a[d]+=i(f)),a[d+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(n&&(n.decorations.length||n.strings.suffix))x=a.length;else if(n&&n.strings.prefix)for(d=0,h=a.length;d<h;d++)if(void 0!==a[d].num){x=d,0===d&&(a[d].strings.prefix=n.strings.prefix+a[d].strings.prefix);break}var _=e.output.renderBlobs(a.slice(0,x),f,!1,n);if(_&&n&&(n.decorations.length||n.strings.suffix||n.strings.prefix)){if(!e.tmp.suppress_decorations)for(d=0,h=n.decorations.length;d<h;d+=1)c=n.decorations[d],["@cite","@bibliography","@display","@showid"].indexOf(c[0])>-1||e.normalDecorIsOrphan(s,c)||"string"==typeof _&&(_=e.fun.decorate[c[0]][c[1]].call(n,e,_,c[2]));if(r=_,l=n.strings.suffix,r&&r.length&&(r=i(u=n.strings.prefix)+r+i(l),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=u.length+l.length)),_=r,!e.tmp.suppress_decorations)for(d=0,h=n.decorations.length;d<h;d+=1)c=n.decorations[d],-1!==["@cite","@bibliography","@display","@showid"].indexOf(c[0])&&"string"==typeof _&&(_=e.fun.decorate[c[0]][c[1]].call(n,e,_,c[2]))}var w=a.slice(x,a.length);return!w.length&&_?a=[_]:w.length&&!_?a=w:_&&w.length&&(a=[_].concat(w)),void 0===n?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),e.tmp.suppress_decorations&&(a=e.output.renderBlobs(a,void 0,!1))):"boolean"==typeof n&&(a=e.output.renderBlobs(a,void 0,!0)),n&&n.new_locale&&(e.opt.lang=n.old_locale),a},p.Output.Queue.prototype.clearlevel=function(){var e,t,n;for(n=(e=this.current.value()).blobs.length,t=0;t<n;t+=1)e.blobs.pop()},p.Output.Queue.prototype.renderBlobs=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,m;if(m=p.getSafeEscape(this.state),t||(t=""),i=this.state,o="",[],a="",u=e.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===u&&"object"==typeof e[0]&&r)return e[0].strings.prefix=r.strings.prefix+e[0].strings.prefix,e[0].strings.suffix=e[0].strings.suffix+r.strings.suffix,e[0].decorations=e[0].decorations.concat(r.decorations),e[0].params=r.params,e[0];var g=!0;for(l=0;l<u;l+=1)e[l].checkNext?(e[l].checkNext(e[l+1],g),g=!1):g=!e[l+1]||!e[l+1].splice_prefix;var b=!0;for(l=e.length-1;l>0;l+=-1)e[l].checkLast?b&&e[l].checkLast(e[l-1])&&(b=!1):b=!0;for(u=e.length,l=0;l<u;l+=1)if(o&&(a=t),"string"==typeof(s=e[l]))o+=m(a),o+=s,i.tmp.count_offset_characters&&(i.tmp.offset_characters+=a.length);else if(n)o=o?[o,s]:[s];else if(s.status!==p.SUPPRESS){var y=(d=s.particle?s.particle+s.num:s.formatter.format(s.num,s.gender)).replace(/<[^>]*>/g,"").length;this.append(d,"empty",!0);var v=this.pop(),x=i.tmp.count_offset_characters;if(d=this.string(i,[v],!1),i.tmp.count_offset_characters=x,s.strings["text-case"]&&(d=p.Output.Formatters[s.strings["text-case"]](this.state,d)),d&&this.state.tmp.strip_periods&&(d=d.replace(/\.([^a-z]|$)/g,"$1")),!i.tmp.suppress_decorations)for(f=s.decorations.length,c=0;c<f;c+=1)h=s.decorations[c],i.normalDecorIsOrphan(s,h)||(d=i.fun.decorate[h[0]][h[1]].call(s,i,d,h[2]));d=m(s.strings.prefix)+d+m(s.strings.suffix);var _="";s.status===p.END?_=m(s.range_prefix):s.status===p.SUCCESSOR?_=m(s.successor_prefix):s.status===p.START?_=l>0&&!s.suppress_splice_prefix?m(s.splice_prefix):"":s.status===p.SEEN&&(_=m(s.splice_prefix)),o+=_,o+=d,i.tmp.count_offset_characters&&(i.tmp.offset_characters+=_.length+s.strings.prefix.length+y+s.strings.suffix.length)}return o},p.Output.Queue.purgeEmptyBlobs=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;t>-1;t--){p.Output.Queue.purgeEmptyBlobs(e.blobs[t]);var n=e.blobs[t];if(!n||!n.blobs||!n.blobs.length){for(var r=[];e.blobs.length-1>t;)r.push(e.blobs.pop());for(e.blobs.pop();r.length;)e.blobs.push(r.pop())}}},p.Output.Queue.adjust=function(e){var t={";":!0,":":!0},n={".":!0,"!":!0,"?":!0},r={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},i={},o={},a={},s={};for(var l in r)a[l]=!0,s[l]=!0,t[l]||(i[l]=!0),n[l]||(o[l]=!0);s[" "]=!0,s[" "]=!0;var u={};for(var l in r)for(var c in r[l])u[c]||(u[c]={}),u[c][l]=r[l][c];function f(e){return"number"==typeof e.num||e.blobs&&1===e.blobs.length&&"number"==typeof e.blobs[0].num}function d(e){return"number"==typeof e.num||!(!e.blobs||"object"!=typeof e.blobs)&&(!!d(e.blobs[e.blobs.length-1])||void 0)}function p(e,t){var n=!1,r=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(t&&r.push("@quotes"),e.decorations)for(var i=0,o=e.decorations.length;i<o;i++)if(r.indexOf(e.decorations[i][0])>-1){n=!0;break}return n}function h(e){if(e.decorations)for(var t=0,n=e.decorations.length;t<n;t++)if("@quotes"===e.decorations[t][0]&&"false"!==e.decorations[t][1])return!0;return"object"==typeof e.blobs&&h(e.blobs[e.blobs.length-1])}function m(e,t){var n=t.strings.suffix.slice(-1);n||"string"!=typeof t.blobs||(n=t.blobs.slice(-1));var r=u[e][n];return!(!r||1!==r.length)||"object"==typeof t.blobs&&!!m(e,t.blobs[t.blobs.length-1])}function g(e,t){if(!a[t])return!1;if("string"==typeof e.blobs)return e.blobs.slice(-1)===t;var n=e.blobs[e.blobs.length-1];return!!n&&(n.strings.suffix.slice(-1)?n.strings.suffix.slice(-1)==t:g(n,t))}function b(e,t,n,i,o){var a="blobs"===t?e:e.strings,s="blobs"===i?n:n.strings,l=a[t].slice(-1),c=s[i].slice(0,1);function f(){s[i]=s[i].slice(1)}function d(){a[t]=a[t].slice(0,-1)}function p(e){s[i]=e+s[i]}function h(e){a[t]+=e}var m=o?function(){return r[l]}:function(){return u[c]};var g=o?function(){var e=r[l][c];"string"==typeof e?(d(),f(),p(e)):(p(l),d())}:function(){var e=u[c][l];"string"==typeof e?(d(),f(),h(e)):(h(c),f())};l===c?(o?d:f)():m()&&g()}function y(e){var t=e.strings.suffix.slice(0,1);if("string"==typeof e.blobs)for(;i[t];)b(e,"blobs",e,"suffix"),t=e.strings.suffix.slice(0,1);else for(;i[t];)b(e.blobs[e.blobs.length-1],"suffix",e,"suffix"),t=e.strings.suffix.slice(0,1)}function v(e){if("string"==typeof e.blobs)for(var t=e.blobs.slice(-1);o[t];)b(e,"blobs",e,"suffix",!0),t=e.blobs.slice(-1);else for(t=e.blobs[e.blobs.length-1].strings.suffix.slice(-1);o[t];)b(e.blobs[e.blobs.length-1],"suffix",e,"suffix",!0),t=e.blobs[e.blobs.length-1].strings.suffix.slice(-1)}this.upward=function(e){if(e.blobs&&"string"==typeof e.blobs)a[e.strings.suffix.slice(0,1)]&&e.strings.suffix.slice(0,1)===e.blobs.slice(-1)&&(e.strings.suffix=e.strings.suffix.slice(1));else if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=p(e,!0),n=e.blobs.length-1;n>-1;n--){this.upward(e.blobs[n]);var r=e.strings,i=e.blobs[n].strings;if(0===n){" "===r.prefix.slice(-1)&&" "===i.prefix.slice(0,1)&&(i.prefix=i.prefix.slice(1));var o=i.prefix.slice(0,1);t||!s[o]||r.prefix||(r.prefix+=o,i.prefix=i.prefix.slice(1))}if(n===e.blobs.length-1){o=i.suffix.slice(-1);!t&&[" "].indexOf(o)>-1&&(r.suffix.slice(0,1)!==o&&(r.suffix=o+r.suffix),i.suffix=i.suffix.slice(0,-1))}r.delimiter&&n>0&&s[r.delimiter.slice(-1)]&&r.delimiter.slice(-1)===i.prefix.slice(0,1)&&(i.prefix=i.prefix.slice(1))}},this.leftward=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;t>-1;t--)if(this.leftward(e.blobs[t]),t<e.blobs.length-1&&!e.strings.delimiter){var n=e.blobs[t],r=n.strings.suffix.slice(-1),i=e.blobs[t+1],o=i.strings.prefix.slice(0,1),s="number"==typeof r||"number"==typeof o;if(!(p(n)||p(i))&&!s&&a[o]&&!s){var l=o===n.strings.suffix.slice(-1),u=!n.strings.suffix&&"string"==typeof n.blobs&&n.blobs.slice(-1)===o;l||u?i.strings.prefix=i.strings.prefix.slice(1):b(n,"suffix",i,"prefix")}}},this.downward=function(t){if(t.blobs&&"string"==typeof t.blobs)a[t.strings.suffix.slice(0,1)]&&t.strings.suffix.slice(0,1)===t.blobs.slice(-1)&&(t.strings.suffix=t.strings.suffix.slice(1));else if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var n=t.strings,r=0,i=t.blobs.length;r<i;r++)if(f(t.blobs[r])){!0;break}if(n.delimiter&&a[n.delimiter.slice(0,1)]){var o=n.delimiter.slice(0,1);for(r=t.blobs.length-2;r>-1;r--){(u=t.blobs[r].strings).suffix.slice(-1)!==o&&(u.suffix+=o)}n.delimiter=n.delimiter.slice(1)}for(r=t.blobs.length-1;r>-1;r--){var l=t.blobs[r],u=t.blobs[r].strings,c=p(l,!0),y=f(l);if(r===t.blobs.length-1){var v=n.suffix.slice(0,1),x=!1;a[v]&&!(x=m(v,l))&&e&&(x=h(l)),x&&a[v]&&(d(l)||("string"==typeof l.blobs?b(l,"blobs",t,"suffix"):b(l,"suffix",t,"suffix"),"."===n.suffix.slice(0,1)&&(u.suffix+=n.suffix.slice(0,1),n.suffix=n.suffix.slice(1))))," "===u.suffix.slice(-1)&&" "===n.suffix.slice(0,1)&&(n.suffix=n.suffix.slice(1)),s[u.suffix.slice(0,1)]&&("string"==typeof l.blobs&&l.blobs.slice(-1)===u.suffix.slice(0,1)&&(u.suffix=u.suffix.slice(1)),u.suffix.slice(-1)===n.suffix.slice(0,1)&&(n.suffix=n.suffix.slice(0,-1))),g(t,t.strings.suffix.slice(0,1))&&(t.strings.suffix=t.strings.suffix.slice(1))}else if(n.delimiter)s[n.delimiter.slice(0,1)]&&n.delimiter.slice(0,1)===u.suffix.slice(-1)&&(t.blobs[r].strings.suffix=t.blobs[r].strings.suffix.slice(0,-1));else{var _=t.blobs[r+1].strings;f(l)||c||!s[u.suffix.slice(-1)]||u.suffix.slice(-1)!==_.prefix.slice(0,1)||(_.prefix=_.prefix.slice(1))}y||c||!a[u.suffix.slice(0,1)]||"string"!=typeof l.blobs||b(l,"blobs",l,"suffix"),this.downward(t.blobs[r])}}},this.fix=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var n,r=0,i=t.blobs.length;r<i;r++){for(var o=t.blobs[r],a=!1,s=0,l=o.decorations.length;s<l;s++){var u=o.decorations[s];"@quotes"===u[0]&&"false"!==u[1]&&(a=!0)}a&&(e?y(o):v(o)),n=this.fix(t.blobs[r]),o.blobs&&"string"==typeof o.blobs&&(n=o.blobs.slice(-1))}return n}}},p.Engine.Opt=function(){this.parallel={enable:!1,no_repeat:null,changes_in:{}},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=p.NONE,this.bib_mode=p.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.static_statute_locator=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.handle_parallel_articles=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1},p.Engine.Tmp=function(){this.names_max=new p.Stack,this.names_base=new p.Stack,this.givens_base=new p.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new p.Stack(0,p.LITERAL),this.element_rendered_ok=!1,this.element_trace=new p.Stack("style"),this.nameset_counter=0,this.group_context=new p.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_condition:void 0,parallel_result:void 0,parallel_repeats:void 0,no_repeat_condition:void 0,no_repeat_repeats:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new p.Stack(0,p.LITERAL),this.decorations=new p.Stack,this.tokenstore_stack=new p.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new p.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new p.AmbigConfig,this.bib_sort_keys=[],this.prefix=new p.Stack("",p.LITERAL),this.suffix=new p.Stack("",p.LITERAL),this.delimiter=new p.Stack("",p.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]},p.Engine.Fun=function(e){this.match=new p.Util.Match,this.suffixator=new p.Util.Suffixator(p.SUFFIX_CHARS),this.romanizer=new p.Util.Romanizer,this.ordinalizer=new p.Util.Ordinalizer(e),this.long_ordinalizer=new p.Util.LongOrdinalizer},p.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new p.Stack(0,p.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0},p.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]},p.Engine.Citation=function(e){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new p.Registry.Comparifier(e,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},p.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},p.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=p.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"},p.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},p.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"},p.Engine.prototype.previewCitationCluster=function(e,t,n,r){var i=this.opt.mode;this.setOutputFormat(r),e.citationID&&delete e.citationID;var o=this.processCitationCluster(e,t,n,p.PREVIEW);return this.setOutputFormat(i),o[1]},p.Engine.prototype.appendCitationCluster=function(e){for(var t=[],n=this.registry.citationreg.citationByIndex.length,r=0;r<n;r+=1){var i=this.registry.citationreg.citationByIndex[r];t.push([""+i.citationID,i.properties.noteIndex])}return this.processCitationCluster(e,t,[])[1]},p.Engine.prototype.processCitationCluster=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,h,m,g,b,y,v,x,_;if(this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(e),r===p.PREVIEW){this.debug&&p.debug("****** start state save *********"),v=this.registry.citationreg.citationByIndex.slice(),x=this.registry.reflist.slice();for(var w=t.concat(n),O={},E=[],k=0,S=w.length;k<S;k+=1)for(s=0,l=(i=this.registry.citationreg.citationById[w[k][0]]).citationItems.length;s<l;s+=1)O[i.citationItems[s].id]=!0,E.push(""+i.citationItems[s].id);for(s=0,l=e.citationItems.length;s<l;s+=1)O[e.citationItems[s].id]=!0,E.push(""+e.citationItems[s].id);_={};for(k=0,S=x.length;k<S;k+=1)if(!O[x[k].id]){var T=this.registry.registry[x[k].id].ambig,j=this.registry.ambigcites[T];if(j)for(s=0,l=j.length;s<l;s+=1)_[j[s]]=p.cloneAmbigConfig(this.registry.registry[j[s]].disambig)}this.debug&&p.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};var A=[],P={};for(k=0,S=e.citationItems.length;k<S;k+=1){for(var C in m={},e.citationItems[k])m[C]=e.citationItems[k][C];var N;if((h=this.retrieveItem(""+m.id)).id&&this.transform.loadAbbreviation("default","hereinafter",h.id),m=p.parseLocator.call(this,m),this.opt.development_extensions.static_statute_locator&&this.remapSectionVariable([[h,m]]),this.opt.development_extensions.locator_label_parse)if(m.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(h.type)&&(!m.label||"page"===m.label))if(N=p.LOCATOR_LABELS_REGEXP.exec(m.locator)){var M=p.LOCATOR_LABELS_MAP[N[2]];this.getTerm(M)&&(m.label=M,m.locator=N[3])}var I=[h,m];A.push(I),e.citationItems[k].item=h}e.sortedItems=A;var D,R=[],z={};for(k=0,S=t.length;k<S;k+=1)o=t[k],this.opt.development_extensions.strict_inputs&&(z[o[0]]&&p.error("Previously referenced citationID "+o[0]+" encountered in citationsPre"),o[1]&&(D>o[1]&&p.debug("Note index sequence is not sane at citationsPre["+k+"]"),D=o[1])),this.registry.citationreg.citationById[o[0]].properties.noteIndex=o[1],R.push(this.registry.citationreg.citationById[o[0]]),z[o[0]]=this.registry.citationreg.citationById[o[0]];for(e.properties||(e.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(z[e.citationID]&&p.error("Citation with previously referenced citationID "+e.citationID),e.properties.noteIndex&&(D>e.properties.noteIndex&&p.debug("Note index sequence is not sane for citation "+e.citationID),D=e.properties.noteIndex)),R.push(e),z[e.citationID]=e,k=0,S=n.length;k<S;k+=1)a=n[k],this.opt.development_extensions.strict_inputs&&(z[a[0]]&&p.error("Previously referenced citationID "+a[0]+" encountered in citationsPost"),a[1]&&(D>a[1]&&p.debug("Note index sequence is not sane at postCitation["+k+"]"),D=a[1])),this.registry.citationreg.citationById[a[0]].properties.noteIndex=a[1],R.push(this.registry.citationreg.citationById[a[0]]),z[a[0]]=this.registry.citationreg.citationById[a[0]];this.registry.citationreg.citationByIndex=R,this.registry.citationreg.citationById=z,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===p.POSITION&&(b=[],g=[],y={});var L,F=[];for(k=0,S=R.length;k<S;k+=1){for(R[k].properties.index=k,s=0,l=R[k].sortedItems.length;s<l;s+=1)m=R[k].sortedItems[s],this.registry.citationreg.citationsByItemId[m[1].id]||(this.registry.citationreg.citationsByItemId[m[1].id]=[],F.push(""+m[1].id)),-1===this.registry.citationreg.citationsByItemId[m[1].id].indexOf(R[k])&&this.registry.citationreg.citationsByItemId[m[1].id].push(R[k]);this.opt.update_mode===p.POSITION&&(R[k].properties.noteIndex?g.push(R[k]):(R[k].properties.noteIndex=0,b.push(R[k])))}if(r!==p.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&p.debug("****** start update items *********"),this.updateItems(F,null,null,!0),this.debug&&p.debug("****** endo update items *********")),!this.opt.citation_number_sort&&A&&A.length>1&&this.citation_sort.tokens.length>0){for(k=0,S=A.length;k<S;k+=1)A[k][1].sortkeys=p.getSortKeys.call(this,A[k][0],"citation_sort");if(this.opt.grouped_sort&&!e.properties.unsorted){for(k=0,S=A.length;k<S;k+=1){var B=A[k][1].sortkeys;this.tmp.authorstring_request=!0;var U=this.registry.registry[A[k][0].id].disambig;this.tmp.authorstring_request=!0,p.getAmbiguousCite.call(this,A[k][0],U);var q=this.registry.authorstrings[A[k][0].id];this.tmp.authorstring_request=!1,A[k][1].sortkeys=[q].concat(B)}A.sort(this.citation.srt.compareCompositeKeys);var $=!1,H=!1,W=!1;for(k=0,S=A.length;k<S;k+=1)A[k][1].sortkeys[0]!==$&&(W=A[k][1].sortkeys[0],H=A[k][1].sortkeys[1]),A[k][1].sortkeys[0]=""+H+k,$=W}e.properties.unsorted||A.sort(this.citation.srt.compareCompositeKeys)}if(this.opt.parallel.enable&&this.parallel.StartCitation(e.sortedItems),this.opt.update_mode===p.POSITION)for(k=0;k<2;k+=1){var V={},G={};for(s=0,l=(L=[b,g][k]).length;s<l;s+=1){var Y=L[s];for(L[s].properties.noteIndex||(L[s].properties.noteIndex=0),L[s].properties.noteIndex=parseInt(L[s].properties.noteIndex,10),s>0&&L[s-1].properties.noteIndex>L[s].properties.noteIndex&&(y={},V={},G={}),u=0,c=Y.sortedItems.length;u<c;u+=1)Y.sortedItems[u][1].parallel&&"first"!==Y.sortedItems[u][1].parallel||(y[Y.properties.noteIndex]?y[Y.properties.noteIndex]+=1:y[Y.properties.noteIndex]=1);for(u=0,c=L[s].sortedItems.length;u<c;u+=1){var X,K,J=(m=L[s].sortedItems[u])[0].id,Z=m[1]["locator-extra"],Q=m[1].locator,ee=m[1].label;if(m[0].legislation_id&&(J=m[0].legislation_id),u>0)if(Y.sortedItems[u-1][0].legislation_id)X=Y.sortedItems[u-1][0].legislation_id;else{X=Y.sortedItems[u-1][1].id,K=Y.sortedItems[u-1][1]["locator-extra"];for(var te=u-2;te>-1;te--)"first"===Y.sortedItems[te][1].parallel&&(X=Y.sortedItems[te][1].id,K=Y.sortedItems[te][1]["locator-extra"])}if(r!==p.PREVIEW||Y.citationID==e.citationID){var ne,re,ie={};if(ie.position=m[1].position,ie["first-reference-note-number"]=m[1]["first-reference-note-number"],ie["near-note"]=m[1]["near-note"],m[1]["first-reference-note-number"]=0,m[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[J]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var oe=this.registry.registry[J]["citation-count"],ae=this.registry.citationreg.citationsByItemId[J].length;if(this.registry.registry[J]["citation-count"]=this.registry.citationreg.citationsByItemId[J].length,"number"==typeof oe){if(oe<2!==ae<2){te=0;for(var se=this.registry.citationreg.citationsByItemId[J].length;te<se;te++)P[this.registry.registry[J].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[J][te].citationID]=!0}}else for(te=0,se=this.registry.citationreg.citationsByItemId[J].length;te<se;te++)P[this.registry.registry[J].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[J][te].citationID]=!0}if(void 0===V[J]&&"author-only"!==Y.properties.mode)V[J]=Y.properties.noteIndex,this.registry.registry[J]&&(this.registry.registry[J]["first-reference-note-number"]=Y.properties.noteIndex),G[J]=Y.properties.noteIndex,m[1].position=p.POSITION_FIRST;else{var le=!1,ue=!1,ce=null;if(s>0)ce=L[s-1];var fe,de,pe,he,me=L[s];if(s>0){var ge=1;"author-only"===ce.properties.mode&&s>1&&(ge=2),ne=L[s-ge].sortedItems.slice(-1)[0][1].id,re=L[s-ge].sortedItems.slice(-1)[0][1]["locator-extra"],ce.sortedItems[0].slice(-1)[0].legislation_id&&(ne=ce.sortedItems[0].slice(-1)[0].legislation_id)}if(s>0&&0===u&&ce.properties.noteIndex!==me.properties.noteIndex){var be=!1,ye=ce.sortedItems[0][0].id;if(ce.sortedItems[0][0].legislation_id&&(ye=ce.sortedItems[0][0].legislation_id),ye==J&&ce.properties.noteIndex>=me.properties.noteIndex-1){var ve=ce.sortedItems[0][1]["locator-extra"],xe=me.sortedItems[0][1]["locator-extra"];1!==y[ce.properties.noteIndex]&&0!==ce.properties.noteIndex||ve!==xe||(be=!0)}be?le=!0:ue=!0}else u>0&&X==J&&K==Z?le=!0:0===u&&s>0&&ce.properties.noteIndex==me.properties.noteIndex&&ce.sortedItems.length&&ne==J&&re==Z?le=!0:ue=!0;if(le&&((fe=u>0?Y.sortedItems[u-1][1]:L[s-1].sortedItems[0][1]).locator?(pe=fe.label?fe.label:"",de=""+fe.locator+pe):de=fe.locator,he=Q?""+Q+(ee||""):Q),le&&de&&!he&&(le=!1,ue=!0),le&&(!de&&he?m[1].position=p.POSITION_IBID_WITH_LOCATOR:de||he?de&&he===de?m[1].position=p.POSITION_IBID:de&&he&&he!==de?m[1].position=p.POSITION_IBID_WITH_LOCATOR:(le=!1,ue=!0):m[1].position=p.POSITION_IBID),ue&&(m[1].position=p.POSITION_SUBSEQUENT),(ue||le)&&("author-only"===Y.properties.mode&&(m[1].position=p.POSITION_FIRST),V[J]!=Y.properties.noteIndex&&(m[1]["first-reference-note-number"]=V[J],this.registry.registry[J]))){var _e=this.registry.citationreg.citationsByItemId[J][0].properties.noteIndex,we=Y.properties.noteIndex;this.registry.registry[J]["first-reference-note-number"]=we<_e?we:_e}}if(Y.properties.noteIndex){var Oe=parseInt(Y.properties.noteIndex,10)-parseInt(G[J],10);m[1].position!==p.POSITION_FIRST&&Oe<=this.citation.opt["near-note-distance"]&&(m[1]["near-note"]=!0),G[J]=Y.properties.noteIndex}if(Y.citationID!=e.citationID)for(f=0,d=p.POSITION_TEST_VARS.length;f<d;f+=1){var Ee=p.POSITION_TEST_VARS[f];m[1][Ee]!==ie[Ee]&&(this.registry.registry[J]&&"first-reference-note-number"===Ee&&(P[this.registry.registry[J].ambig]=!0,this.tmp.taintedItemIDs[J]=!0),this.tmp.taintedCitationIDs[Y.citationID]=!0)}this.sys.variableWrapper&&(m[1].index=Y.properties.index,m[1].noteIndex=Y.properties.noteIndex)}else void 0===V[m[1].id]?(V[J]=Y.properties.noteIndex,G[J]=Y.properties.noteIndex):G[J]=Y.properties.noteIndex}}}if(this.opt.citation_number_sort&&A&&A.length>1&&this.citation_sort.tokens.length>0&&!e.properties.unsorted){for(k=0,S=A.length;k<S;k+=1)A[k][1].sortkeys=p.getSortKeys.call(this,A[k][0],"citation_sort");A.sort(this.citation.srt.compareCompositeKeys)}for(var C in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(C)&&(L=this.registry.citationreg.citationsByItemId[C]))for(k=0,S=L.length;k<S;k+=1)this.tmp.taintedCitationIDs[L[k].citationID]=!0;var ke=[];if(r===p.PREVIEW){this.debug&&p.debug("****** start run processor *********");try{ke=this.process_CitationCluster.call(this,e.sortedItems,e)}catch(e){p.error("Error running CSL processor for preview: "+e)}this.debug&&(p.debug("****** end run processor *********"),p.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=v,this.registry.citationreg.citationById={};for(k=0,S=v.length;k<S;k+=1)this.registry.citationreg.citationById[v[k].citationID]=v[k];this.debug&&p.debug("****** start final update *********");var Se=[];for(k=0,S=x.length;k<S;k+=1)Se.push(""+x[k].id);for(var C in this.updateItems(Se,null,null,!0),this.debug&&p.debug("****** end final update *********"),_)_.hasOwnProperty(C)&&(this.registry.registry[C].disambig=_[C]);this.debug&&p.debug("****** end state restore *********")}else{for(var Te in P)this.disambiguate.run(Te,e);var je;for(var C in this.tmp.taintedCitationIDs)if(C!=e.citationID){var Ae=this.registry.citationreg.citationById[C];if(!Ae.properties.unsorted){for(k=0,S=Ae.sortedItems.length;k<S;k+=1)Ae.sortedItems[k][1].sortkeys=p.getSortKeys.call(this,Ae.sortedItems[k][0],"citation_sort");Ae.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=Ae.properties.index,this.tmp.citation_note_index=Ae.properties.noteIndex,this.tmp.citation_id=""+Ae.citationID,(je=[]).push(Ae.properties.index),je.push(this.process_CitationCluster.call(this,Ae.sortedItems,Ae)),je.push(Ae.citationID),ke.push(je)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=e.properties.index,this.tmp.citation_note_index=e.properties.noteIndex,this.tmp.citation_id=""+e.citationID,(je=[]).push(t.length),je.push(this.process_CitationCluster.call(this,A,e)),je.push(e.citationID),ke.push(je),ke.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0}))}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,ke]},p.Engine.prototype.process_CitationCluster=function(e,t){var n="";if(t&&t.properties&&"composite"===t.properties.mode){t.properties.mode="author-only";var r=p.getCitationCluster.call(this,e,t);t.properties.mode="suppress-author";var i="";t.properties.infix&&(this.output.append(t.properties.infix),"object"==typeof(i=this.output.string(this,this.output.queue))&&(i=i.join("")));var o=p.getCitationCluster.call(this,e,t);t.properties.mode="composite",r&&i&&p.SWAPPING_PUNCTUATION.concat(["’","'"]).indexOf(i[0])>-1&&(r+=i,i=!1),n=[r,i,o].filter((function(e){return e})).join(" ")}else n=p.getCitationCluster.call(this,e,t);return n},p.Engine.prototype.makeCitationCluster=function(e){var t,n,r,i,o,a;for(t=[],i=e.length,r=0;r<i;r+=1){for(var s in o={},e[r])o[s]=e[r][s];if(a=this.retrieveItem(""+o.id),this.opt.development_extensions.locator_label_parse&&o.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(a.type)&&(!o.label||"page"===o.label)){var l=p.LOCATOR_LABELS_REGEXP.exec(o.locator);if(l){var u=p.LOCATOR_LABELS_MAP[l[2]];this.getTerm(u)&&(o.label=u,o.locator=l[3])}}o.locator&&(o.locator=(""+o.locator).replace(/\s+$/,"")),n=[a,o],t.push(n)}if(this.opt.development_extensions.static_statute_locator&&this.remapSectionVariable(t),t&&t.length>1&&this.citation_sort.tokens.length>0){for(i=t.length,r=0;r<i;r+=1)t[r][1].sortkeys=p.getSortKeys.call(this,t[r][0],"citation_sort");t.sort(this.citation.srt.compareCompositeKeys)}return this.tmp.citation_errors=[],this.opt.parallel.enable&&this.parallel.StartCitation(t),p.getCitationCluster.call(this,t)},p.getAmbiguousCite=function(e,t,n,r){var i=this.tmp.group_context.tip,o={term_intended:i.term_intended,variable_attempt:i.variable_attempt,variable_success:i.variable_success,output_tip:i.output_tip,label_form:i.label_form,parallel_condition:i.parallel_condition,parallel_result:i.parallel_result,changes_in_condition:i.changes_in_condition,no_repeat_condition:i.no_repeat_condition,parallel_delimiter_override:i.parallel_delimiter_override,parallel_repeats:i.parallel_repeats,no_repeat_repeats:i.no_repeat_repeats,condition:i.condition,force_suppress:i.force_suppress,done_vars:i.done_vars.slice()};this.tmp.disambig_request=t||!1;var a={position:1,"near-note":!0};r&&(a.locator=r.locator,a.label=r.label),this.registry.registry[e.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[e.id]&&this.registry.citationreg.citationsByItemId[e.id].length&&n&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(a["first-reference-note-number"]=this.registry.registry[e.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation";var s=this.tmp.suppress_decorations;this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,p.getCite.call(this,e,a,null,!1);for(var l=0,u=this.output.queue.length;l<u;l+=1)p.Output.Queue.purgeEmptyBlobs(this.output.queue[l]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var c=0,f=this.output.queue.length;c<f;c+=1)this.output.adjust.upward(this.output.queue[c]),this.output.adjust.leftward(this.output.queue[c]),this.output.adjust.downward(this.output.queue[c]),this.output.adjust.fix(this.output.queue[c]);var d=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=s,this.tmp.group_context.replace(o),d},p.getSpliceDelimiter=function(e,t,n){if(void 0!==this.citation.opt["after-collapse-delimiter"])e?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:t&&!this.tmp.have_collapsed?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:t||this.tmp.have_collapsed||"year-suffix"===this.citation.opt.collapse?this.tmp.splice_delimiter=this.citation.opt.layout_delimiter:this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"];else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==p.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[n-1]){var r=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[n-1]];r&&r.delimiter&&(this.tmp.splice_delimiter=r.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter},p.getCitationCluster=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,m,g,b,y,v,x,_,w,O,E="";this.output.checkNestedBrace=new p.checkNestedBrace(this),t&&(_=t.citationID,w="author-only"===t.properties.mode&&!!t.properties.mode,"note"!==this.opt.xclass&&(O="suppress-author"===t.properties.mode&&!!t.properties.mode),t.properties.prefix&&(E=p.checkPrefixSpaceAppend(this,t.properties.prefix))),e=e||[],this.tmp.last_primary_names_string=!1,v=p.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",n="",r=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[];var k=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+E),S=!1;if("note"===this.opt.xclass&&this.citation.opt.suppressTrailingPunctuation&&(S=!0),_&&this.registry.citationreg.citationById[_].properties["suppress-trailing-punctuation"]&&(S=!0),"note"===this.opt.xclass){for(var T=[],j=!1,A=!1,P=[],C=0,N=e.length;C<N;C+=1){var M=e[C][0].type,I=e[C][0].title,D=e[C][1].position,R=e[C][0].id;I&&"legal_case"===M&&R!==A&&D&&(I===j&&0!==T.length||(P=[],T.push(P)),P.push(e[C][1])),j=I,D,A=R}for(C=0,N=T.length;C<N;C+=1)if(!((P=T[C]).length<2)){var z=P.slice(-1)[0].locator;if(z)for(var L=0,F=P.length-1;L<F;L+=1)P[L].locator&&(z=!1);z&&(P[0].locator=z,delete P.slice(-1)[0].locator,P[0].label=P.slice(-1)[0].label,P.slice(-1)[0].label&&delete P.slice(-1)[0].label)}}for(i=[],o=e.length,e[0]&&e[0][1]&&(w?(delete e[0][1]["suppress-author"],e[0][1]["author-only"]=!0):O&&(delete e[0][1]["author-only"],e[0][1]["suppress-author"]=!0)),a=0;a<o;a+=1){h=e[a][0],s=e[a][1],s=p.parseLocator.call(this,s),l=this.tmp.have_collapsed;var B=!1;if(a>0&&e[a-1][1]&&(B=!!e[a-1][1].locator),u={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var U=this.output;this.output=new p.Output.Queue(this),this.output.adjust=new p.Output.Queue.adjust,p.getAmbiguousCite.call(this,h,null,!1,s),this.output=U}if(this.tmp.in_cite_predecessor=!1,a>0?p.getCite.call(this,h,s,""+e[a-1][0].id,!0):(this.tmp.term_predecessor=!1,p.getCite.call(this,h,s,null,!0)),this.tmp.cite_renders_content||(x={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+h.id,citationItems_pos:a,error_code:p.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(x)),u.splice_delimiter=p.getSpliceDelimiter.call(this,B,l,a),s&&s["author-only"]&&(this.tmp.suppress_decorations=!0),a>0){var q=(y=e[a-1][1]).suffix&&[";",".",","].indexOf(y.suffix.slice(-1))>-1,$=!y.suffix&&s.prefix&&[";",".",","].indexOf(s.prefix.slice(0,1))>-1;if(q||$){var H=u.splice_delimiter.indexOf(" ");u.splice_delimiter=H>-1&&!$?u.splice_delimiter.slice(H):""}}if(u.suppress_decorations=this.tmp.suppress_decorations,u.have_collapsed=this.tmp.have_collapsed,i.push(u),s["author-only"])break}this.opt.parallel.enable&&this.parallel.purgeGroupsIfParallel(),d=this.output.queue.slice();var W="";t&&(W=p.checkSuffixSpacePrepend(this,t.properties.suffix));var V=this.citation.opt.layout_suffix,G=this.tmp.cite_locales[this.tmp.cite_locales.length-1];G&&this.tmp.cite_affixes[this.tmp.area][G]&&this.tmp.cite_affixes[this.tmp.area][G].suffix&&(V=this.tmp.cite_affixes[this.tmp.area][G].suffix),p.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(V.slice(0,1))>-1&&(V=V.slice(0,1)),V=this.output.checkNestedBrace.update(W+V);for(C=0,N=this.output.queue.length;C<N;C+=1)p.Output.Queue.purgeEmptyBlobs(this.output.queue[C]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(S||(this.output.queue[this.output.queue.length-1].strings.suffix=V),this.output.queue[0].strings.prefix=k)),this.opt.development_extensions.clean_up_csl_flaws)for(L=0,F=this.output.queue.length;L<F;L+=1)this.output.adjust.upward(this.output.queue[L]),this.output.adjust.leftward(this.output.queue[L]),this.output.adjust.downward(this.output.queue[L]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[L]);for(a=0,o=d.length;a<o;a+=1){var Y=[];if(this.output.queue=[d[a]],this.tmp.suppress_decorations=i[a].suppress_decorations,this.tmp.splice_delimiter=i[a].splice_delimiter,d[a].parallel_delimiter&&(this.tmp.splice_delimiter=d[a].parallel_delimiter),this.tmp.have_collapsed=i[a].have_collapsed,c=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof c)return this.tmp.suppress_decorations=!1,c||(this.opt.development_extensions.throw_on_empty?p.error("Citation would render no content"):c="[NO_PRINTED_FORM]"),c;if("object"==typeof c&&0===c.length&&!s["suppress-author"]){var X=0===a?v(this.citation.opt.layout_prefix):"",K=a===d.length-1?v(this.citation.opt.layout_suffix):"";c.push(X+"[CSL STYLE ERROR: reference with no printed form.]"+K)}if(Y.length&&"string"==typeof c[0]){c.reverse();var J=c.pop();J&&","===J.slice(0,1)?Y.push(J):"string"==typeof Y.slice(-1)[0]&&","===Y.slice(-1)[0].slice(-1)?Y.push(" "+J):J&&Y.push(v(this.tmp.splice_delimiter)+J)}else c.reverse(),void 0!==(f=c.pop())&&(Y.length&&"string"==typeof Y[Y.length-1]&&(Y[Y.length-1]+=f.successor_prefix),Y.push(f));for(m=c.length,g=0;g<m;g+=1)"string"!=typeof(b=c[g])?void 0!==(f=c.pop())&&Y.push(f):Y.push(v(this.tmp.splice_delimiter)+b);0!==Y.length||e[a][1]["suppress-author"]||1,Y.length>1&&"string"!=typeof Y[0]&&(Y=[this.output.renderBlobs(Y)]),Y.length&&("string"==typeof Y[0]?a>0&&(Y[0]=v(this.tmp.splice_delimiter)+Y[0]):Y[0].splice_prefix=a>0?this.tmp.splice_delimiter:""),r=r.concat(Y)}if((n+=this.output.renderBlobs(r))&&!this.tmp.suppress_decorations)for(o=this.citation.opt.layout_decorations.length,a=0;a<o;a+=1)"normal"!==(u=this.citation.opt.layout_decorations[a])[1]&&(s&&s["author-only"]||(n=this.fun.decorate[u[0]][u[1]](this,n)));return this.tmp.suppress_decorations=!1,n||(this.opt.development_extensions.throw_on_empty?p.error("Citation would render no content"):n="[NO_PRINTED_FORM]"),n},p.getCite=function(e,t,n,r){var i,o,a=this.tmp.area;for(t&&t["author-only"]&&this.intext&&this.intext.tokens.length>0&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,p.citeStart.call(this,e,t,r),i=0,this.tmp.name_node={},this.nameOutput=new p.NameOutput(this,e,t);i<this[this.tmp.area].tokens.length;)i=p.tokenExec.call(this,this[this.tmp.area].tokens[i],e,t);return p.citeEnd.call(this,e,t),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"===this.tmp.area&&(o={index:this.tmp.bibliography_pos,itemID:""+e.id,error_code:p.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(o)),this.tmp.area=a,""+e.id},p.citeStart=function(e,t,n){if(n||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[e.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[e.id].disambig,this.tmp.disambig_settings=this.registry.registry[e.id].disambig):this.tmp.disambig_settings=new p.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[e.id]){if(this.tmp.disambig_restore=p.cloneAmbigConfig(this.registry.registry[e.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[e.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[e.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[e.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[e.id].disambig.givens.slice();for(var r=0,i=this.tmp.disambig_settings.givens.length;r<i;r+=1)this.tmp.disambig_settings.givens[r]=this.registry.registry[e.id].disambig.givens[r].slice();for(r=0,i=this.tmp.disambig_request.givens.length;r<i;r+=1)this.tmp.disambig_request.givens[r]=this.registry.registry[e.id].disambig.givens[r].slice()}}else this.tmp.disambig_restore=new p.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&t&&!t.position&&this.registry.registry[e.id]&&(this.tmp.disambig_restore=p.cloneAmbigConfig(this.registry.registry[e.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},p.citeEnd=function(e,t){if(this.tmp.disambig_restore&&this.registry.registry[e.id]){this.registry.registry[e.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[e.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var n=0,r=this.registry.registry[e.id].disambig.givens.length;n<r;n+=1)this.registry.registry[e.id].disambig.givens[n]=this.tmp.disambig_restore.givens[n].slice()}if(this.tmp.disambig_restore=!1,t&&t.suffix?this.tmp.last_suffix_used=t.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){var i=[];for(n=this.tmp.issued_date.list.length-1;n>this.tmp.issued_date.pos;n+=-1)i.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),n=i.length-1;n>-1;n+=-1)this.tmp.issued_date.list.push(i.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},p.Engine.prototype.makeBibliography=function(e){var t,n,r,i,o,a,s;if(!1,!e&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(e={exclude:[]},this.bibliography.opt.exclude_types)for(var l in this.bibliography.opt.exclude_types){var u=this.bibliography.opt.exclude_types[l];e.exclude.push({field:"type",value:u})}if(this.bibliography.opt.exclude_with_fields)for(var l in this.bibliography.opt.exclude_with_fields){var c=this.bibliography.opt.exclude_with_fields[l];e.exclude.push({field:c,value:!0})}}if(!this.bibliography.tokens.length)return!1;"string"==typeof e&&(this.opt.citation_number_slug=e,e=!1),a=(t=p.getBibliographyEntries.call(this,e))[0],s=t[1];var f=t[2];for(n={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:a,bibliography_errors:this.tmp.bibliography_errors.slice(),done:f},this.bibliography.opt["second-field-align"]&&(n["second-field-align"]=this.bibliography.opt["second-field-align"]),0,i=this.registry.reflist.length,o=0;o<i;o+=1)(r=this.registry.reflist[o]).offset>n.maxoffset&&(n.maxoffset=r.offset);return this.bibliography.opt.hangingindent&&(n.hangingindent=this.bibliography.opt.hangingindent),n.bibstart=this.fun.decorate.bibstart,n.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[n,s]},p.getBibliographyEntries=function(e){var t,n,r,i,o,a,s,l,u,c,f,d,h,m,g,b,y,v,x,_,w;function O(e,t){return e===t}function E(e,t){return"boolean"!=typeof e&&e?"string"==typeof t?O(e,t):!!t&&function(e,t){for(c=t.length,f=0;f<c;f+=1)if(O(e,t[f]))return!0;return!1}(e,t):e?!!t:!t}if(t=[],_=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,n=e&&e.page_start&&e.page_length?this.registry.getSortedIds():this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,y={},e&&e.page_start&&e.page_length&&(w=0,!0!==e.page_start))for(g=0,b=n.length;g<b&&(y[n[g]]=!0,e.page_start!=n[g]);g+=1);var k=[];for(g=0,b=n.length;g<b;g+=1){if(e&&e.page_start&&e.page_length){if(y[n[g]])continue;if(l=this.refetchItem(n[g]),w===e.page_length)break}else if(y[(l=n[g]).id])continue;if(e){if(r=!0,e.include){for(r=!1,T=0,j=e.include.length;T<j;T+=1)if(E((u=e.include[T]).value,l[u.field])){r=!0;break}}else if(e.exclude){for(i=!1,T=0,j=e.exclude.length;T<j;T+=1)if(E((u=e.exclude[T]).value,l[u.field])){i=!0;break}i&&(r=!1)}else if(e.select){for(r=!1,o=!0,T=0,j=e.select.length;T<j;T+=1)E((u=e.select[T]).value,l[u.field])||(o=!1);o&&(r=!0)}if(e.quash){for(o=!0,T=0,j=e.quash.length;T<j;T+=1)E((u=e.quash[T]).value,l[u.field])||(o=!1);o&&(r=!1)}if(!r)continue}if((a=new p.Token("group",p.START)).decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",a),l.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=l.system_id:this.output.current.value().system_id=l.id,h=[],!this.registry.registry[l.id].master||e&&e.page_start&&e.page_length)this.registry.registry[l.id].siblings||(this.tmp.term_predecessor=!1,h.push(""+p.getCite.call(this,l)),e&&e.page_start&&e.page_length&&(w+=1));else{v=[[l,{id:l.id}]];for(var S,T=0,j=(S=this.registry.registry[l.id].siblings).length;T<j;T++)v.push([{id:S[T]},{id:S[T]}]);for(m=!0,this.parallel.StartCitation(v),this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,h.push(""+p.getCite.call(this,l,v[0][1])),y[l.id]=!0,T=0,j=(S=this.registry.registry[l.id].siblings).length;T<j;T+=1){var A=this.registry.registry[l.id].siblings[T];x=this.refetchItem(A),h.push(""+p.getCite.call(this,x,v[T+1][1])),y[x.id]=!0}this.parallel.purgeGroupsIfParallel()}for(_.push(""),this.tmp.bibliography_pos+=1,k.push(h),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&(m||!this.output.queue[0].blobs[0].blobs[0].strings?(d=this.output.queue[0].blobs,m=!1):d=this.output.queue[0].blobs[0].blobs,d[0].strings.prefix=this.bibliography.opt.layout_prefix+d[0].strings.prefix),T=0,j=this.output.queue.length;T<j;T+=1)p.Output.Queue.purgeEmptyBlobs(this.output.queue[T]);for(T=0,j=this.output.queue.length;T<j;T+=1)this.output.adjust.upward(this.output.queue[T]),this.output.adjust.leftward(this.output.queue[T]),this.output.adjust.downward(this.output.queue[T],!0),this.output.adjust.fix(this.output.queue[T]);if(!(s=this.output.string(this,this.output.queue)[0])&&this.opt.update_mode===p.NUMERIC){var P=t.length+1+". [CSL STYLE ERROR: reference with no printed form.]";s=p.Output.Formats[this.opt.mode]["@bibliography/entry"](this,P)}s&&t.push(s)}var C=!1;if(e&&e.page_start&&e.page_length){var N=n.slice(-1)[0],M=k.slice(-1)[0];N&&M&&N!=M||(C=!0)}return this.tmp.disambig_override=!1,[k,t,C]},p.Engine.prototype.setCitationId=function(e,t){var n,r,i;if(n=!1,!e.citationID||t){for(r=Math.floor(1e14*Math.random());;){if(i=0,!this.registry.citationreg.citationById[r]){e.citationID="a"+r.toString(32);break}r+=1===(i=!i&&r<5e13?1:-1)?1:-1}n=""+r}return this.registry.citationreg.citationById[e.citationID]=e,n},p.Engine.prototype.rebuildProcessorState=function(e,t,n){e||(e=[]),t||(t="html");for(var r={},i=[],o=0,a=e.length;o<a;o+=1)for(var s=0,l=e[o].citationItems.length;s<l;s+=1){var u=""+e[o].citationItems[s].id;r[u]||i.push(u),r[u]=!0}this.updateItems(i);var c=[],f=[],d=[],h=this.opt.mode;this.setOutputFormat(t);for(o=0,a=e.length;o<a;o+=1){var m=this.processCitationCluster(e[o],c,f,p.ASSUME_ALL_ITEMS_REGISTERED);c.push([e[o].citationID,e[o].properties.noteIndex]);for(s=0,l=m[1].length;s<l;s+=1){var g=m[1][s][0];d[g]=[c[g][0],c[g][1],m[1][s][1]]}}return this.updateUncitedItems(n),this.setOutputFormat(h),d},p.Engine.prototype.restoreProcessorState=function(e){var t,n,r,i,o,a,s,l,u,c;l=[],u=[],e||(e=[]);var f=[],d={};for(t=0,n=e.length;t<n;t+=1)d[e[t].citationID]&&this.setCitationId(e[t],!0),d[e[t].citationID]=!0,f.push(e[t].properties.index);var h=e.slice();for(h.sort((function(e,t){return e.properties.index<t.properties.index?-1:e.properties.index>t.properties.index?1:0})),t=0,n=h.length;t<n;t+=1)h[t].properties.index=t;for(t=0,n=h.length;t<n;t+=1){for(c=[],r=0,i=h[t].citationItems.length;r<i;r+=1)void 0===(o=h[t].citationItems[r]).sortkeys&&(o.sortkeys=[]),s=[a=this.retrieveItem(""+o.id),o],c.push(s),h[t].citationItems[r].item=a,u.push(""+o.id);h[t].properties.unsorted||c.sort(this.citation.srt.compareCompositeKeys),h[t].sortedItems=c,this.registry.citationreg.citationById[h[t].citationID]=h[t]}for(this.updateItems(u),t=0,n=e.length;t<n;t+=1)l.push([""+e[t].citationID,e[t].properties.noteIndex]);var m=[];return e&&e.length?m=this.processCitationCluster(e[0],[],l.slice(1)):(this.registry=new p.Registry(this),this.tmp=new p.Engine.Tmp,this.disambiguate=new p.Disambiguation(this)),m},p.Engine.prototype.updateItems=function(e,t,n,r){var i=this.tmp.area,o=this.tmp.root,a=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",r||(this.tmp.loadedItemIDs={}),this.registry.init(e),n)for(var s in this.registry.ambigcites)this.registry.ambigsTouched[s]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=a,this.tmp.area=i,this.tmp.root=o,this.registry.getSortedIds()},p.Engine.prototype.updateUncitedItems=function(e,t){var n,r=this.tmp.area,i=this.tmp.root,o=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},e||(e=[]),"object"==typeof e)if(void 0===e.length)for(var a in n=e,e=[],n)e.push(a);else if("number"==typeof e.length){n={};for(var s=0,l=e.length;s<l;s+=1)n[e[s]]=!0}return this.registry.init(e,!0),this.registry.dopurge(n),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=o,this.tmp.area=r,this.tmp.root=i,this.registry.getSortedIds()},p.localeResolve=function(e,t){var n,r;return t||(t="en-US"),e||(e=t),n={},r=e.split(/[\-_]/),n.base=p.LANG_BASES[r[0]],void 0===n.base?{base:t,best:e,bare:r[0]}:(1===r.length&&(n.generic=!0),1===r.length||"x"===r[1]?n.best=n.base.replace("_","-"):n.best=r.slice(0,2).join("-"),n.base=n.base.replace("_","-"),n.bare=r[0],n)},p.Engine.prototype.localeConfigure=function(e,t){var n;if((!t||!this.locale[e.best])&&("en-US"===e.best?(n=p.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(n,"en-US",e.best)):"en-US"!==e.best&&(e.base!==e.best&&(n=p.setupXml(this.sys.retrieveLocale(e.base)),this.localeSet(n,e.base,e.best)),n=p.setupXml(this.sys.retrieveLocale(e.best)),this.localeSet(n,e.best,e.best)),this.localeSet(this.cslXml,"",e.best),this.localeSet(this.cslXml,e.bare,e.best),e.base!==e.best&&this.localeSet(this.cslXml,e.base,e.best),this.localeSet(this.cslXml,e.best,e.best),void 0===this.locale[e.best].terms["page-range-delimiter"]&&(["fr","pt"].indexOf(e.best.slice(0,2).toLowerCase())>-1?this.locale[e.best].terms["page-range-delimiter"]="-":this.locale[e.best].terms["page-range-delimiter"]="–"),void 0===this.locale[e.best].terms["year-range-delimiter"]&&(this.locale[e.best].terms["year-range-delimiter"]="–"),void 0===this.locale[e.best].terms["citation-range-delimiter"]&&(this.locale[e.best].terms["citation-range-delimiter"]="–"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var r=["default-locale","locale-sort","locale-translit","locale-translat"],i=0,o=r.length;i<o;i+=1)for(var a=0,s=this.opt[r[i]].length;a<s;a+=1)this.opt[r[i]][a]=this.opt[r[i]][a].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},p.Engine.prototype.localeSet=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,h,m;if(t=t.replace("_","-"),n=n.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(t=t.toLowerCase(),n=n.toLowerCase()),this.locale[n]||(this.locale[n]={},this.locale[n].terms={},this.locale[n].opts={},this.locale[n].opts["skip-words"]=p.SKIP_WORDS,this.locale[n].opts["leading-noise-words"]||(this.locale[n].opts["leading-noise-words"]=[]),this.locale[n].dates={},this.locale[n].ord={"1.0.1":!1,keys:{}},this.locale[n]["noun-genders"]={}),i=e.makeXml(),e.nodeNameIs(e.dataObj,"locale"))i=e.dataObj;else for(o=e.getNodesByName(e.dataObj,"locale"),s=0,h=e.numberofnodes(o);s<h;s+=1)if(r=o[s],e.getAttributeValue(r,"lang","xml")===t){i=r;break}for(o=e.getNodesByName(i,"type"),M=0,I=e.numberofnodes(o);M<I;M+=1){var g=o[M],b=e.getAttributeValue(g,"name"),y=e.getAttributeValue(g,"gender");this.opt.gender[b]=y}if(e.getNodesByName(i,"term","ordinal").length){for(var v in this.locale[n].ord.keys)delete this.locale[n].terms[v];this.locale[n].ord={"1.0.1":!1,keys:{}}}o=e.getNodesByName(i,"term");var x={"last-digit":{},"last-two-digits":{},"whole-number":{}},_=!1,w={};for(s=0,h=e.numberofnodes(o);s<h;s+=1){if(l=o[s],"sub verbo"===(c=e.getAttributeValue(l,"name"))&&(c="sub-verbo"),"ordinal"===c.slice(0,7)){if("ordinal"===c)_=!0;else{var O,E=e.getAttributeValue(l,"match"),k=c.slice(8);(O=e.getAttributeValue(l,"gender-form"))||(O="neuter"),E||(E="last-two-digits","0"===k.slice(0,1)&&(E="last-digit")),"0"===k.slice(0,1)&&(k=k.slice(1)),x[E][k]||(x[E][k]={}),x[E][k][O]=c}this.locale[n].ord.keys[c]=!0}void 0===this.locale[n].terms[c]&&(this.locale[n].terms[c]={}),u="long",O=!1,e.getAttributeValue(l,"form")&&(u=e.getAttributeValue(l,"form")),e.getAttributeValue(l,"gender-form")&&(O=e.getAttributeValue(l,"gender-form")),e.getAttributeValue(l,"gender")&&(this.locale[n]["noun-genders"][c]=e.getAttributeValue(l,"gender")),O?(this.locale[n].terms[c][O]={},this.locale[n].terms[c][O][u]=[],m=this.locale[n].terms[c][O],w[c]=!0):(this.locale[n].terms[c][u]=[],m=this.locale[n].terms[c]),e.numberofnodes(e.getNodesByName(l,"multiple"))?(m[u][0]=e.getNodeValue(l,"single"),m[u][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),m[u][1]=e.getNodeValue(l,"multiple"),m[u][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(m[u]=e.getNodeValue(l),m[u].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[n].terms.supplement||(this.locale[n].terms.supplement={}),this.locale[n].terms.supplement.long||(this.locale[n].terms.supplement.long=["supplement","supplements"]),_){for(var S in w){var T={},j=0;for(var A in this.locale[n].terms[S])["masculine","feminine"].indexOf(A)>-1?T[A]=this.locale[n].terms[S][A]:j+=1;if(!j)if(T.feminine)for(var A in T.feminine)this.locale[n].terms[S][A]=T.feminine[A];else if(T.masculine)for(var A in T.masculine)this.locale[n].terms[S][A]=T.masculine[A]}this.locale[n].ord["1.0.1"]=x}for(c in this.locale[n].terms)for(M=0,I=2;M<I;M+=1)if(O=p.GENDERS[M],this.locale[n].terms[c][O])for(u in this.locale[n].terms[c])this.locale[n].terms[c][O][u]||(this.locale[n].terms[c][O][u]=this.locale[n].terms[c][u]);for(o=e.getNodesByName(i,"style-options"),s=0,h=e.numberofnodes(o);s<h;s+=1)for(d in f=o[s],a=e.attributes(f))if(a.hasOwnProperty(d))if("@punctuation-in-quote"===d||"@limit-day-ordinals-to-day-1"===d)"true"===a[d]?this.locale[n].opts[d.slice(1)]=!0:this.locale[n].opts[d.slice(1)]=!1;else if("@jurisdiction-preference"===d){var P=a[d].split(/\s+/);this.locale[n].opts[d.slice(1)]=P}else if("@skip-words"===d){var C=a[d].split(/\s*,\s*/);this.locale[n].opts[d.slice(1)]=C}else if("@leading-noise-words"===d){var N=a[d].split(/\s*,\s*/);this.locale[n].opts["leading-noise-words"]=N}else if("@name-as-sort-order"===d){this.locale[n].opts["name-as-sort-order"]={};for(var M=0,I=(D=a[d].split(/\s+/)).length;M<I;M+=1)this.locale[n].opts["name-as-sort-order"][D[M]]=!0}else if("@name-as-reverse-order"===d){this.locale[n].opts["name-as-reverse-order"]={};for(M=0,I=(D=a[d].split(/\s+/)).length;M<I;M+=1)this.locale[n].opts["name-as-reverse-order"][D[M]]=!0}else if("@name-never-short"===d){this.locale[n].opts["name-never-short"]={};var D;for(M=0,I=(D=a[d].split(/\s+/)).length;M<I;M+=1)this.locale[n].opts["name-never-short"][D[M]]=!0}for(o=e.getNodesByName(i,"date"),s=0,h=e.numberofnodes(o);s<h;s+=1){var R=o[s];this.locale[n].dates[e.getAttributeValue(R,"form")]=R}p.SET_COURT_CLASSES(this,n,e,i)},p.getLocaleNames=function(e,t){var n=p.setupXml(e);function r(e,t){var n=["base","best"];if(t)for(var r=p.localeResolve(t),i=0,o=n.length;i<o;i++)r[n[i]]&&-1===e.indexOf(r[n[i]])&&e.push(r[n[i]])}var i=["en-US"];function o(e){for(var t=n.getNodesByName(n.dataObj,e),r=0,o=t.length;r<o;r++){var a=n.getAttributeValue(t[r],"locale");if(a)for(var s=0,l=(a=a.split(/ +/)).length;s<l;s++)this.extendLocaleList(i,a[s])}}r(i,t);var a=n.getNodesByName(n.dataObj,"style")[0],s=n.getAttributeValue(a,"default-locale");r(i,s);for(var l=["layout","if","else-if","condition"],u=0,c=l.length;u<c;u++)o(n);return i},p.Node={},p.Node.bibliography={build:function(e,t){if(this.tokentype===p.START){e.build.area="bibliography",e.build.root="bibliography",e.build.extension="";this.execs.push((function(e){e.tmp.area="bibliography",e.tmp.root="bibliography",e.tmp.extension=""}))}t.push(this)}},p.Node.choose={build:function(e,t){var n;this.tokentype===p.START&&(n=function(e){e.tmp.jump.push(void 0,p.LITERAL)}),this.tokentype===p.END&&(n=function(e){e.tmp.jump.pop()}),this.execs.push(n),t.push(this)},configure:function(e,t){this.tokentype===p.END?(e.configure.fail.push(t),e.configure.succeed.push(t)):(e.configure.fail.pop(),e.configure.succeed.pop())}},p.Node.citation={build:function(e,t){if(this.tokentype===p.START){e.build.area="citation",e.build.root="citation",e.build.extension="";this.execs.push((function(e){e.tmp.area="citation",e.tmp.root="citation",e.tmp.extension=""}))}if(this.tokentype===p.END){if(e.opt.grouped_sort="in-text"===e.opt.xclass&&e.citation.opt.collapse&&e.citation.opt.collapse.length||e.citation.opt.cite_group_delimiter&&e.citation.opt.cite_group_delimiter.length&&e.opt.update_mode!==p.POSITION&&e.opt.update_mode!==p.NUMERIC,e.opt.grouped_sort&&e.citation_sort.opt.sort_directions.length){var n=e.citation_sort.opt.sort_directions[0].slice();e.citation_sort.opt.sort_directions=[n].concat(e.citation_sort.opt.sort_directions)}e.citation.srt=new p.Registry.Comparifier(e,"citation_sort")}t.push(this)}},p.Node["#comment"]={build:function(){}},p.Node.date={build:function(e,t){var n,r,i,o,a,s,l,u,c,f;this.tokentype!==p.START&&this.tokentype!==p.SINGLETON||(e.dateput.string(e,e.dateput.queue),e.tmp.date_token=p.Util.cloneToken(this),e.tmp.date_token.strings.prefix="",e.tmp.date_token.strings.suffix="",e.dateput.openLevel(this),e.build.date_parts=[],e.build.date_variables=this.variables,e.build.extension||p.Util.substituteStart.call(this,e,t),n=e.build.extension?p.dateMacroAsSortKey:function(e,t,n){var d;if(e.tmp.element_rendered_ok=!1,e.tmp.donesies=[],e.tmp.dateparts=[],d=[],!this.variables.length||e.tmp.just_looking&&"accessed"===this.variables[0])e.tmp.date_object=!1;else{for(void 0===(r=t[this.variables[0]])&&(r={"date-parts":[[0]]},e.opt.development_extensions.locator_date_and_revision&&n&&"locator-date"===this.variables[0]&&n["locator-date"]&&(r=n["locator-date"])),e.tmp.date_object=r,i=this.dateparts.length,o=0;o<i;o+=1)a=this.dateparts[o],void 0!==e.tmp.date_object[a+"_end"]?d.push(a):"month"===a&&void 0!==e.tmp.date_object.season_end&&d.push(a);for(s=[],i=(l=["year","month","day"]).length,o=0;o<i;o+=1)d.indexOf(l[o])>-1&&s.push(l[o]);for(d=s.slice(),u=2,i=d.length,o=0;o<i;o+=1)if(a=d[o],c=e.tmp.date_object[a],f=e.tmp.date_object[a+"_end"],c!==f){u=o;break}e.tmp.date_collapse_at=d.slice(u)}},this.execs.push(n),n=function(e,t){if(t[this.variables[0]]&&(e.output.startTag("date",this),"issued"===this.variables[0]&&"legal_case"===t.type&&!e.tmp.extension&&""+t["collection-number"]==""+e.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0]))for(var n in e.tmp.date_object)if(e.tmp.date_object.hasOwnProperty(n)&&"year"===n.slice(0,4)){e.tmp.issued_date={};var r=e.output.current.mystack.slice(-2)[0].blobs;e.tmp.issued_date.list=r,e.tmp.issued_date.pos=r.length-1}},this.execs.push(n)),e.build.extension||this.tokentype!==p.END&&this.tokentype!==p.SINGLETON||(n=function(e,t){t[this.variables[0]]&&e.output.endTag()},this.execs.push(n)),t.push(this),this.tokentype!==p.END&&this.tokentype!==p.SINGLETON||e.build.extension||p.Util.substituteEnd.call(this,e,t)}},p.Node["date-part"]={build:function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,m,g,b,y,v,x,_;this.strings.form||(this.strings.form="long"),e.build.date_parts.push(this.strings.name);var w=e.build.date_variables[0];function O(t,n,r){if(!r)return r;if(r=""+p.Util.Dates[this.strings.name][t](e,r,n,this.default_locale),"month"===this.strings.name)if(e.tmp.strip_periods)r=r.replace(/\./g,"");else for(var i=0,o=this.decorations.length;i<o;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){r=r.replace(/\./g,"");break}return r}n=function(e,t){if(e.tmp.date_object){if(e.tmp.probably_rendered_something=!0,o=!0,a="",s="",e.tmp.donesies.push(this.strings.name),e.tmp.date_object.literal&&"year"===this.strings.name&&e.output.append(e.tmp.date_object.literal,this),e.tmp.date_object&&(a=e.tmp.date_object[this.strings.name],s=e.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==a||e.tmp.suppress_decorations||(a=!1),l=!e.tmp.suppress_decorations,u=e.tmp.have_collapsed,c="year-suffix"===e[e.tmp.area].opt.collapse||"year-suffix-ranged"===e[e.tmp.area].opt.collapse,f=e.opt["disambiguate-add-year-suffix"],l&&f&&c&&(e.tmp.years_used.push(a),e.tmp.last_years_used.length>=e.tmp.years_used.length&&u&&e.tmp.last_years_used[e.tmp.years_used.length-1]===a&&(a=!1)),void 0!==a){d=!1,h=!1,!1,!1,"year"===this.strings.name&&(parseInt(a,10)<500&&parseInt(a,10)>0&&(h=e.getTerm("ad")),parseInt(a,10)<0&&(d=e.getTerm("bc"),a=-1*parseInt(a,10)),s&&(parseInt(s,10)<500&&parseInt(s,10)>0&&e.getTerm("ad"),parseInt(s,10)<0&&(e.getTerm("bc"),s=-1*parseInt(s,10))));for(var n=""+e.tmp.date_object.month;n.length<2;)n="0"+n;n="month-"+n;var E=e.locale[e.opt.lang]["noun-genders"][n];if(this.strings.form){var k=this.strings.form;"day"===this.strings.name&&"ordinal"===k&&e.locale[e.opt.lang].opts["limit-day-ordinals-to-day-1"]&&""+a!="1"&&(k="numeric"),a=O.call(this,k,E,a),s=O.call(this,k,E,s)}if(e.output.openLevel("empty"),e.tmp.date_collapse_at.length){for(m=!0,i=e.tmp.date_collapse_at.length,r=0;r<i;r+=1)if(_=e.tmp.date_collapse_at[r],-1===e.tmp.donesies.indexOf(_)){m=!1;break}if(m){if(""+s!="0"){if(0===e.dateput.queue.length&&(o=!0),e.opt["year-range-format"]&&"expanded"!==e.opt["year-range-format"]&&!e.tmp.date_object.day&&!e.tmp.date_object.month&&!e.tmp.date_object.season&&"year"===this.strings.name&&a&&s){s=e.fun.year_mangler(a+"-"+s,!0);var S=e.getTerm("year-range-delimiter");s=s.slice(s.indexOf(S)+1)}e.dateput.append(s,this),o&&(e.dateput.current.value().blobs[0].strings.prefix="")}e.output.append(a,this),(g=e.output.current.value()).blobs[g.blobs.length-1].strings.suffix="",this.strings["range-delimiter"]?e.output.append(this.strings["range-delimiter"]):e.output.append(e.getTerm("year-range-delimiter"),"empty"),e.dateput.closeLevel(),b=e.dateput.current.value(),g.blobs=g.blobs.concat(b),e.dateput.string(e,e.dateput.queue),e.dateput.openLevel(e.tmp.date_token),e.tmp.date_collapse_at=[]}else e.output.append(a,this),e.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+s!="0"&&(0===e.dateput.queue.length&&(o=!0),e.dateput.openLevel("empty"),e.dateput.append(s,this),o&&(e.dateput.current.value().blobs[0].strings.prefix=""),d&&e.dateput.append(d),h&&e.dateput.append(h),e.dateput.closeLevel())}else e.output.append(a,this);d&&e.output.append(d),h&&e.output.append(h),e.output.closeLevel()}else"month"===this.strings.name&&e.tmp.date_object.season&&((a=""+e.tmp.date_object.season)&&a.match(/^[1-4]$/)?(e.tmp.group_context.tip.variable_success=!0,e.output.append(e.getTerm("season-0"+a),this)):a&&e.output.append(a,this));e.tmp.value=[],!t[w]||!a&&!e.tmp.have_collapsed||e.opt.has_year_suffix||"year"!==this.strings.name||e.tmp.just_looking||e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.has_done_year_suffix&&(e.tmp.has_done_year_suffix=!0,v=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),y=new p.NumericBlob(!1,v,this,t.id),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,x=new p.Util.Suffixator(p.SUFFIX_CHARS),y.setFormatter(x),"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(y.range_prefix=e.getTerm("citation-range-delimiter")),e[e.tmp.area].opt.cite_group_delimiter?y.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter:e[e.tmp.area].opt["year-suffix-delimiter"]?y.successor_prefix=e[e.tmp.area].opt["year-suffix-delimiter"]:y.successor_prefix=e[e.tmp.area].opt.layout_delimiter,y.UGLY_DELIMITER_SUPPRESS_HACK=!0,e.output.append(y,"literal"))}},this.execs.push(n),t.push(this)}},p.Node["else-if"]={build:function(e,t){p.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){p.Conditions.Configure.call(this,e,t)}},p.Node.else={build:function(e,t){t.push(this)},configure:function(e,t){this.tokentype===p.START&&(e.configure.fail[e.configure.fail.length-1]=t)}},p.Node["et-al"]={build:function(e,t){if("citation"===e.build.area||"bibliography"===e.build.area){this.execs.push((function(e){e.tmp.etal_node=this,"string"==typeof this.strings.term&&(e.tmp.etal_term=this.strings.term)}))}t.push(this)}},p.Node.group={build:function(e,t,n){var r,i,o;if(this.realGroup=n,this.tokentype===p.START&&(p.Util.substituteStart.call(this,e,t),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()+1),this.juris||t.push(this),(i=[]).push(r=function(e){if(e.output.startTag("group",this),this.strings.label_form_override&&(e.tmp.group_context.tip.label_form||(e.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.strings.label_capitalize_if_first_override&&(e.tmp.group_context.tip.label_capitalize_if_first||(e.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override)),this.realGroup){var t=!1,n=!1;e.tmp.group_context.mystack.length&&(e.output.current.value().parent=e.tmp.group_context.tip.output_tip);var r=e.tmp.group_context.tip.label_form;r||(r=this.strings.label_form_override);var i=e.tmp.group_context.tip.label_capitalize_if_first;i||(i=this.strings.label_capitalize_if_first),e.tmp.group_context.tip.condition?(t=e.tmp.group_context.tip.condition,n=e.tmp.group_context.tip.force_suppress):this.strings.reject?(t={test:this.strings.reject,not:!0},[]):this.strings.require&&(t={test:this.strings.require,not:!1},[]),e.tmp.group_context.push({old_term_predecessor:e.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:e.tmp.group_context.tip.variable_success,output_tip:e.output.current.tip,label_form:r,label_capitalize_if_first:i,parallel_condition:this.strings.set_parallel_condition,changes_in_condition:this.strings.set_changes_in_condition,no_repeat_condition:this.strings.set_no_repeat_condition,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_result:void 0,parallel_repeats:void 0,condition:t,force_suppress:n,done_vars:e.tmp.group_context.tip.done_vars.slice()})}}),this.execs=i.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(e.build["publisher-special"]=!0,this.strings["subgroup-delimiter"]&&(r=function(e,t){if(t.publisher&&t["publisher-place"]){var n=t.publisher.split(/;\s*/),r=t["publisher-place"].split(/;\s*/);n.length>1&&n.length===r.length&&(e.publisherOutput=new p.PublisherOutput(e,this),e.publisherOutput["publisher-list"]=n,e.publisherOutput["publisher-place-list"]=r)}},this.execs.push(r))),this.juris)){var a=new p.Token("choose",p.START);p.Node.choose.build.call(a,e,t);var s=new p.Token("if",p.START);o=this.juris,r=function(t){return p.INIT_JURISDICTION_MACROS(e,t,o)},s.tests||(s.tests=[]),s.tests.push(r),s.test=e.fun.match.any(s,e,s.tests),t.push(s);var l=new p.Token("text",p.SINGLETON);r=function(e,t,n){var r=0;if(e.juris[t["best-jurisdiction"]][this.juris])for(;r<e.juris[t["best-jurisdiction"]][this.juris].length;)r=p.tokenExec.call(e,e.juris[t["best-jurisdiction"]][this.juris][r],t,n)},l.juris=this.juris,l.execs.push(r),t.push(l);var u=new p.Token("if",p.END);p.Node.if.build.call(u,e,t);var c=new p.Token("else",p.START);p.Node.else.build.call(c,e,t)}if(this.tokentype===p.END&&(e.build["publisher-special"]&&(e.build["publisher-special"]=!1,r=function(e){e.publisherOutput&&(e.publisherOutput.render(),e.publisherOutput=!1)},this.execs.push(r)),r=function(e,t,n){if(e.output.endTag(),this.realGroup){var r=e.tmp.group_context.pop();if("bibliography_sort"===e.tmp.area){var i=r.done_vars.indexOf("citation-number");this.strings.sort_direction&&i>-1&&1==e.tmp.group_context.length()&&(this.strings.sort_direction===p.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=p.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=p.ASCENDING,r.done_vars=r.done_vars.slice(0,i).concat(r.done_vars.slice(i+1)))}if(r.condition&&(r.force_suppress=p.EVALUATE_GROUP_CONDITION(e,r)),e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.force_suppress=r.force_suppress),!r.force_suppress&&(r.variable_success||r.term_intended&&!r.variable_attempt)){this.isJurisLocatorLabel||(e.tmp.group_context.tip.variable_success=!0);var o=e.output.current.value().blobs,a=e.output.current.value().blobs.length-1;if(!e.tmp.just_looking&&(r.parallel_condition||r.no_repeat_condition||r.parallel_delimiter_override)){var s={blobs:o,condition:r.condition,parallel_condition:r.parallel_condition,parallel_result:r.parallel_result,changes_in_condition:r.changes_in_condition,parallel_repeats:r.parallel_repeats,no_repeat_condition:r.no_repeat_condition,no_repeat_repeats:r.no_repeat_repeats,parallel_delimiter_override:r.parallel_delimiter_override,id:t.id,pos:a};e.parallel.checkRepeats(s)&&(o&&o.pop(),s.parallel_delimiter_override&&(e.output.queue.slice(-1)[0].parallel_delimiter=s.parallel_delimiter_override)),e.parallel.checkParallels(s,t)&&o&&o.pop(),"citation"===e.tmp.area&&!n.prefix&&["mid","last"].indexOf(s.parallel_result)>-1&&s.parallel_delimiter_override&&(e.output.queue.slice(-1)[0].parallel_delimiter=s.parallel_delimiter_override)}}else{if(e.tmp.term_predecessor=r.old_term_predecessor,e.tmp.group_context.tip.variable_attempt=r.variable_attempt,r.force_suppress&&!e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.variable_attempt=!0,e.tmp.group_context.tip.variable_success=r.variable_success_parent),r.force_suppress)for(var l=0,u=r.done_vars.length;l<u;l++)for(var c=r.done_vars[l],f=0,d=e.tmp.done_vars.length;f<d;f++)e.tmp.done_vars[f]===c&&(e.tmp.done_vars=e.tmp.done_vars.slice(0,f).concat(e.tmp.done_vars.slice(f+1)));e.output.current.value().blobs&&e.output.current.value().blobs.pop()}}},this.execs.push(r),this.juris)){var f=new p.Token("else",p.END);p.Node.else.build.call(f,e,t);var d=new p.Token("choose",p.END);p.Node.choose.build.call(d,e,t)}this.tokentype===p.END&&(this.juris||t.push(this),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()-1),p.Util.substituteEnd.call(this,e,t))}},p.Node.if={build:function(e,t){p.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){p.Conditions.Configure.call(this,e,t)}},p.Node.conditions={build:function(e){this.tokentype===p.START&&e.tmp.conditions.addMatch(this.match),this.tokentype===p.END&&e.tmp.conditions.matchCombine()}},p.Node.condition={build:function(e){if(this.tokentype===p.SINGLETON){var t=e.fun.match[this.match](this,e,this.tests);e.tmp.conditions.addTest(t)}}},p.Conditions={},p.Conditions.TopNode=function(e){var t;this.tokentype!==p.START&&this.tokentype!==p.SINGLETON||(this.locale&&(e.opt.lang=this.locale),this.tests&&this.tests.length?this.test=e.fun.match[this.match](this,e,this.tests):e.tmp.conditions=new p.Conditions.Engine(e,this),0===e.build.substitute_level.value()&&(t=function(e){e.tmp.condition_counter++},this.execs.push(t))),this.tokentype!==p.END&&this.tokentype!==p.SINGLETON||(0===e.build.substitute_level.value()&&(t=function(e){(e.tmp.condition_counter--,e.tmp.condition_lang_counter_arr.length>0)&&(e.tmp.condition_lang_counter_arr.slice(-1)[0]===e.tmp.condition_counter&&(e.opt.lang=e.tmp.condition_lang_val_arr.pop(),e.tmp.condition_lang_counter_arr.pop()));this.locale_default&&(e.output.current.value().old_locale=this.locale_default,e.output.closeLevel("empty"),e.opt.lang=this.locale_default)},this.execs.push(t)),t=function(e){return this[e.tmp.jump.value()]},this.execs.push(t),this.locale_default&&(e.opt.lang=this.locale_default))},p.Conditions.Configure=function(e,t){this.tokentype===p.START?(this.fail=e.configure.fail.slice(-1)[0],this.succeed=this.next,e.configure.fail[e.configure.fail.length-1]=t):this.tokentype===p.SINGLETON?(this.fail=this.next,this.succeed=e.configure.succeed.slice(-1)[0],e.configure.fail[e.configure.fail.length-1]=t):(this.succeed=e.configure.succeed.slice(-1)[0],this.fail=this.next)},p.Conditions.Engine=function(e,t){this.token=t,this.state=e},p.Conditions.Engine.prototype.addTest=function(e){this.token.tests||(this.token.tests=[]),this.token.tests.push(e)},p.Conditions.Engine.prototype.addMatch=function(e){this.token.match=e},p.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},p.Node.info={build:function(e){this.tokentype===p.START?e.build.skip="info":e.build.skip=!1}},p.Node.institution={build:function(e,t){if([p.SINGLETON,p.START].indexOf(this.tokentype)>-1){this.execs.push((function(e){"string"==typeof this.strings.delimiter?e.tmp.institution_delimiter=this.strings.delimiter:e.tmp.institution_delimiter=e.tmp.name_delimiter,"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")?e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&":"none"===e.inheritOpt(this,"and")&&(this.and_term=e.tmp.institution_delimiter),void 0===this.and_term&&e.tmp.and_term&&(this.and_term=e.getTerm("and","long",0)),p.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.institution_delimiter&&(this.and_prefix_multiple=e.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.institution_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},void 0!==this.and_term?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new p.Blob(e.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new p.Blob(e.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),e.nameOutput.institution=this}))}t.push(this)},configure:function(e){[p.SINGLETON,p.START].indexOf(this.tokentype)>-1&&(e.build.has_institution=!0)}},p.Node["institution-part"]={build:function(e,t){var n;"long"===this.strings.name?n=this.strings["if-short"]?function(e){e.nameOutput.institutionpart["long-with-short"]=this}:function(e){e.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(n=function(e){e.nameOutput.institutionpart.short=this}),this.execs.push(n),t.push(this)}},p.Node.key={build:function(e,t){var n;t=e[e.build.root+"_sort"].tokens;var r=new p.Token("key",p.START);e.tmp.root=e.build.root,r.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),r.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),r.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),n=function(e){e.tmp.done_vars=[]},r.execs.push(n),n=function(e){e.output.openLevel("empty")},r.execs.push(n);var i=[];if(this.strings.sort_direction===p.DESCENDING?(i.push(1),i.push(-1)):(i.push(-1),i.push(1)),e[e.build.area].opt.sort_directions.push(i),p.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(e.build.date_key=!0),n=function(e){e.tmp.sort_key_flag=!0,e.inheritOpt(this,"et-al-min")&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),e.inheritOpt(this,"et-al-use-first")&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),"boolean"==typeof e.inheritOpt(this,"et-al-use-last")&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"))},r.execs.push(n),t.push(r),this.variables.length){var o=this.variables[0];if(p.NAME_VARIABLES.indexOf(o)>-1){var a=new p.Token("names",p.START);a.tokentype=p.START,a.variables=this.variables,p.Node.names.build.call(a,e,t);var s=new p.Token("name",p.SINGLETON);s.tokentype=p.SINGLETON,s.strings["name-as-sort-order"]="all",s.strings["sort-separator"]=" ",s.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),s.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),s.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),p.Node.name.build.call(s,e,t);var l=new p.Token("institution",p.SINGLETON);l.tokentype=p.SINGLETON,p.Node.institution.build.call(l,e,t);var u=new p.Token("names",p.END);u.tokentype=p.END,p.Node.names.build.call(u,e,t)}else{var c=new p.Token("text",p.SINGLETON);if(c.strings.sort_direction=this.strings.sort_direction,c.dateparts=this.dateparts,p.NUMERIC_VARIABLES.indexOf(o)>-1)n="citation-number"===o?function(e,t){if("bibliography_sort"===e.tmp.area&&(this.strings.sort_direction===p.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=p.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=p.ASCENDING),"citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map)var n=e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq];else n=e.registry.registry[t.id].seq;n&&(n=p.Util.padding(""+n)),e.output.append(n,this)}:function(e,t){var n=!1;(n=t[o])&&(n=p.Util.padding(n)),e.output.append(n,this)};else if("citation-label"===o)n=function(e,t){var n=e.getCitationLabel(t);e.output.append(n,this)};else if(p.DATE_VARIABLES.indexOf(o)>-1)n=p.dateAsSortKey,c.variables=this.variables;else if("title"===o){n=e.transform.getOutputFunction(this.variables,"title",!1,!1,!0)}else n="court-class"===o?function(e,t){p.INIT_JURISDICTION_MACROS(e,t,"juris-main");var n=p.GET_COURT_CLASS(e,t,!0);e.output.append(n,"empty")}:function(e,t){var n=t[o];e.output.append(n,"empty")};c.execs.push(n),t.push(c)}}else{var f=new p.Token("text",p.SINGLETON);f.strings.sort_direction=this.strings.sort_direction,f.postponed_macro=this.postponed_macro,p.expandMacro.call(e,f,t)}var d=new p.Token("key",p.END);n=function(e){var t=e.output.string(e,e.output.queue);e.sys.normalizeUnicode&&(t=e.sys.normalizeUnicode(t)),""===(t=t?t.split(" ").join(e.opt.sort_sep)+e.opt.sort_sep:"")&&(t=void 0),("string"!=typeof t||e.tmp.empty_date)&&(t=void 0,e.tmp.empty_date=!1),e[e[e.tmp.area].root+"_sort"].keys.push(t),e.tmp.value=[]},d.execs.push(n),e.build.date_key&&("citation"===e.build.area&&"_sort"===e.build.extension&&(e[e.build.area].opt.sort_directions.push([-1,1]),n=function(e,t){var n=e.registry.registry[t.id].disambig.year_suffix;n||(n=0);var r=p.Util.padding(""+n);e[e.tmp.area].keys.push(r)},d.execs.push(n)),e.build.date_key=!1),n=function(e){e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-use-last"]=void 0,e.tmp.sort_key_flag=!1},d.execs.push(n),t.push(d)}},p.Node.label={build:function(e,t){if(this.strings.term){this.execs.push((function(e,t,n){var r=p.evaluateLabel(this,e,t,n);n&&"locator"===this.strings.term&&(n.section_form_override=this.strings.form),r&&(e.tmp.group_context.tip.term_intended=!0),p.UPDATE_GROUP_CONTEXT_CONDITION(e,r),-1===r.indexOf("%s")&&(this.strings.capitalize_if_first&&(e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area||(r=p.Output.Formatters["capitalize-first"](e,r))),e.output.append(r,this))}))}else{this.strings.form||(this.strings.form="long");for(var n=e.build.names_variables[e.build.names_variables.length-1],r=e.build.name_label[e.build.name_label.length-1],i=0,o=n.length;i<o;i+=1)r[n[i]]||(r[n[i]]={});if(e.build.name_flag)for(i=0,o=n.length;i<o;i+=1)r[n[i]].after=this;else for(var i=0,o=n.length;i<o;i+=1)r[n[i]].before=this}t.push(this)}},p.Node.layout={build:function(e,t){var n,r,i,o,a;function s(){"bibliography"===e.build.area&&(i=new p.Token("text",p.SINGLETON),n=function(e){var t;t=e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale]?e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale].suffix:e.bibliography.opt.layout_suffix;var n=e.output.current.value();e.opt.using_display?n.blobs[n.blobs.length-1].strings.suffix=t:n.strings.suffix=t,e.bibliography.opt["second-field-align"]&&e.output.endTag("bib_other")},i.execs.push(n),t.push(i))}if(this.tokentype===p.START&&(this.locale_raw?e.build.current_default_locale=this.locale_raw:e.build.current_default_locale=e.opt["default-locale"],n=function(e,t,n){if(e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area){var r=new p.Token("group",p.START);r.decorations=[["@cite","entry"]],e.output.startTag("cite_entry",r),e.output.current.value().item_id=t.system_id,n&&(e.output.current.value().locator_txt=n.locator_txt,e.output.current.value().suffix_txt=n.suffix_txt)}},this.execs.push(n)),this.tokentype!==p.START||e.tmp.cite_affixes[e.build.area]||(n=function(e,t){e.tmp.done_vars=[],e.opt.suppressedJurisdictions[t.country]&&t.country&&-1===["treaty","patent"].indexOf(t.type)&&e.tmp.done_vars.push("country"),!e.tmp.just_looking&&e.registry.registry[t.id]&&e.registry.registry[t.id].parallel&&e.tmp.done_vars.push("first-reference-note-number"),e.tmp.rendered_name=!1},this.execs.push(n),n=function(e){e.tmp.sort_key_flag=!1},this.execs.push(n),n=function(e){e.tmp.nameset_counter=0},this.execs.push(n),n=function(e,t){var n=new p.Token;e.output.openLevel(n)},this.execs.push(n),t.push(this),"citation"===e.build.area&&(r=new p.Token("text",p.SINGLETON),n=function(e,t,n){if(n&&n.prefix){var r=p.checkPrefixSpaceAppend(e,n.prefix);e.tmp.just_looking||(r=e.output.checkNestedBrace.update(r));var i=p.checkIgnorePredecessor(e,r);e.output.append(r,this,!1,i)}},r.execs.push(n),t.push(r))),this.locale_raw&&((a=new p.Token("dummy",p.START)).locale=this.locale_raw,a.strings.delimiter=this.strings.delimiter,a.strings.suffix=this.strings.suffix,e.tmp.cite_affixes[e.build.area]||(e.tmp.cite_affixes[e.build.area]={})),this.tokentype===p.START&&(e.build.layout_flag=!0,this.locale_raw||(e[e.tmp.area].opt.topdecor=[this.decorations],e[e.tmp.area+"_sort"].opt.topdecor=[this.decorations],e[e.build.area].opt.layout_prefix=this.strings.prefix,e[e.build.area].opt.layout_suffix=this.strings.suffix,e[e.build.area].opt.layout_delimiter=this.strings.delimiter,e[e.build.area].opt.layout_decorations=this.decorations,e.tmp.cite_affixes[e.build.area]&&(o=new p.Token("else",p.START),p.Node.else.build.call(o,e,t))),this.locale_raw)){if(e.build.layout_locale_flag)a.name="else-if",p.Attributes["@locale-internal"].call(a,e,this.locale_raw),p.Node["else-if"].build.call(a,e,t);else{var l=new p.Token("choose",p.START);p.Node.choose.build.call(l,e,t),a.name="if",p.Attributes["@locale-internal"].call(a,e,this.locale_raw),p.Node.if.build.call(a,e,t)}e.tmp.cite_affixes[e.build.area][a.locale]={},e.tmp.cite_affixes[e.build.area][a.locale].delimiter=this.strings.delimiter,e.tmp.cite_affixes[e.build.area][a.locale].suffix=this.strings.suffix}this.tokentype===p.END&&(this.locale_raw&&(s(),e.build.layout_locale_flag?(a.name="else-if",a.tokentype=p.END,p.Attributes["@locale-internal"].call(a,e,this.locale_raw),p.Node["else-if"].build.call(a,e,t)):(a.name="if",a.tokentype=p.END,p.Attributes["@locale-internal"].call(a,e,this.locale_raw),p.Node.if.build.call(a,e,t),e.build.layout_locale_flag=!0)),this.locale_raw||(s(),e.tmp.cite_affixes[e.build.area]&&e.build.layout_locale_flag&&(o=new p.Token("else",p.END),p.Node.else.build.call(o,e,t),o=new p.Token("choose",p.END),p.Node.choose.build.call(o,e,t)),e.build_layout_locale_flag=!0,"citation"===e.build.area&&(i=new p.Token("text",p.SINGLETON),n=function(e,t,n){if(n&&n.suffix){var r=p.checkSuffixSpacePrepend(e,n.suffix);e.tmp.just_looking||(r=e.output.checkNestedBrace.update(r)),e.output.append(r,this)}},i.execs.push(n),t.push(i)),n=function(e){e.output.closeLevel()},this.execs.push(n),n=function(e,t){e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area&&e.output.endTag()},this.execs.push(n),t.push(this),e.build.layout_flag=!1,e.build.layout_locale_flag=!1))}},p.Node.macro={build:function(){}},p.Node.alternative={build:function(e,t){if(this.tokentype===p.START){var n=new p.Token("choose",p.START);p.Node.choose.build.call(n,e,t);var r=new p.Token("if",p.START);p.Attributes["@alternative-node-internal"].call(r,e),p.Node.if.build.call(r,e,t);var i=function(e,t){if(e.tmp.oldItem=t,e.tmp.oldLang=e.opt.lang,e.tmp.abort_alternative=!0,t["language-name"]&&t["language-name-original"]){var n=JSON.parse(JSON.stringify(t));n.language=n["language-name"];var r=p.localeResolve(n.language,e.opt["default-locale"][0]);if(e.opt.multi_layout)for(var i in e.opt.multi_layout){var o=e.opt.multi_layout[i],a=!1;for(var s in o){var l=o[s];if(r.best===l.best||r.base===l.base||r.bare===l.bare){a=o[0].best;break}}a||(a=e.opt["default-locale"][0]),e.opt.lang=a}for(var u in n)if(-1===["id","type","language","multi"].indexOf(u)&&"alt-"!==u.slice(0,4))if(n.multi&&n.multi._keys[u]){var c=!0;for(var f in n.multi._keys[u])if(r.bare===f.replace(/^([a-zA-Z]+).*/,"$1")){c=!1;break}c&&delete n[u]}else delete n[u];for(var u in n)"alt-"===u.slice(0,4)?(n[u.slice(4)]=n[u],e.tmp.abort_alternative=!1):n.multi&&n.multi._keys&&!n["alt-"+u]&&n.multi._keys[u]&&(n.multi._keys[u][r.best]?(n[u]=n.multi._keys[u][r.best],e.tmp.abort_alternative=!1):n.multi._keys[u][r.base]?(n[u]=n.multi._keys[u][r.base],e.tmp.abort_alternative=!1):n.multi._keys[u][r.bare]&&(n[u]=n.multi._keys[u][r.bare],e.tmp.abort_alternative=!1))}e.output.openLevel(this),e.registry.refhash[t.id]=n,e.nameOutput=new p.NameOutput(e,n)};this.execs.push(i),t.push(this);n=new p.Token("choose",p.START);p.Node.choose.build.call(n,e,t);r=new p.Token("if",p.START);p.Attributes["@alternative-node-internal"].call(r,e);i=function(e){e.tmp.abort_alternative=!0};r.execs.push(i),p.Node.if.build.call(r,e,t)}else if(this.tokentype===p.END){r=new p.Token("if",p.END);p.Node.if.build.call(r,e,t);n=new p.Token("choose",p.END);p.Node.choose.build.call(n,e,t);i=function(e,t){e.output.closeLevel(),e.registry.refhash[t.id]=e.tmp.oldItem,e.opt.lang=e.tmp.oldLang,e.nameOutput=new p.NameOutput(e,e.tmp.oldItem),e.tmp.abort_alternative=!1};this.execs.push(i),t.push(this);r=new p.Token("if",p.END);p.Node.if.build.call(r,e,t);n=new p.Token("choose",p.END);p.Node.choose.build.call(n,e,t)}}},p.Node["alternative-text"]={build:function(e,t){if(this.tokentype===p.SINGLETON){this.execs.push((function(e,t){t=e.refetchItem(t.id);p.getCite.call(e,t)}))}t.push(this)}},p.NameOutput=function(e,t,n){this.debug=!1,this.debug&&print("(1)"),this.state=e,this.Item=t,this.item=n,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},p.NameOutput.prototype.init=function(e){this.requireMatch=e.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=e,this.variables=e.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var t=0,n=this.variables.length;t<n;t+=1)this.Item[this.variables[t]]&&this.Item[this.variables[t]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[t]]));if((this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length)&&this.checkCommonAuthor(this.requireMatch)){for(var t in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var r=this.state.tmp.done_vars.indexOf(this.variables[t]);r>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,r).concat(this.state.tmp.done_vars.slice(t+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}},p.NameOutput.prototype.reinit=function(e,t){if(this.requireMatch=e.requireMatch,this.labelVariable=t,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=e.variables;var n=this.state.tmp.value.slice();this.state.tmp.value=[];for(var r=0,i=this.variables.length;r<i;r+=1)this.Item[this.variables[r]]&&this.Item[this.variables[r]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[r]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,p.LITERAL),this.state.tmp.value=n}if(this.checkCommonAuthor(this.requireMatch)){for(var r in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var o=this.state.tmp.done_vars.indexOf(this.variables[r]);o>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,o).concat(this.state.tmp.done_vars.slice(r+1)))}this.variables=[]}},p.NameOutput.prototype.outputNames=function(){var e=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=p.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",h=0,m=this.family.execs.length;h<m;h+=1)this.family.execs[h].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=p.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",h=0,m=this.given.execs.length;h<m;h+=1)this.given.execs[h].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&print("(2)"),this.getEtAlConfig(),this.debug&&print("(3)"),this.divideAndTransliterateNames(),this.debug&&print("(4)"),this.truncatePersonalNameLists(),this.debug&&print("(5)"),this.debug&&print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&print("(7)"),"count"!==this.name.strings.form){this.debug&&print("(8)"),this.setEtAlParameters(),this.debug&&print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&print("(10)"),this.state.tmp.name_node={},this.state.tmp.name_node.children=[],this.renderAllNames(),this.debug&&print("(11)");var t=[];for(h=0,m=e.length;h<m;h+=1){var n=e[h],r=[],i=!1,o=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){this.debug&&print("(11a)");for(var a=0,s=this.institutions[n].length;a<s;a+=1)r.push(this.joinPersonsAndInstitutions([this.persons[n][a],this.institutions[n][a]]));if(this.debug&&print("(11b)"),this.institutions[n].length){var l=this.nameset_base+this.variable_offset[n];this.freeters[n].length&&(l+=1),i=this.joinInstitutionSets(r,l)}this.debug&&print("(11c)");o=this.joinFreetersAndInstitutionSets([this.freeters[n],i]);this.debug&&print("(11d)")}else o=this._join([this.freeters[n]],"");if(o&&(this.state.tmp.extension||(o=this._applyLabels(o,n)),t.push(o)),this.debug&&print("(11e)"),this.common_term)break}for(this.debug&&print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&print("(13)"),h=0,m=t.length;h<m;h+=1)this.state.output.append(t[h],"literal",!0);!this.state.tmp.just_looking&&t.length>0&&(this.state.tmp.probably_rendered_something=!0),this.debug&&print("(14)"),this.state.output.closeLevel("empty"),this.debug&&print("(15)");var u=this.state.output.pop();this.state.tmp.name_node.top=u,this.debug&&print("(16)");var c=p.Util.cloneToken(this.names);if(this.state.output.append(u,c),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&print("(17)"),this.debug&&print("(18)"),"authority"!==e[0]){var f=[],d=this.Item[e[0]];if(d)for(var h=0,m=d.length;h<m;h+=1){var g=p.Util.Names.getRawName(d[h]);g&&f.push(g)}(f=f.join(", "))&&(this.state.tmp.name_node.string=f)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type&&this.state.tmp.first_name_string){var b=[];b.push(this.state.tmp.first_name_string),this.Item.title&&b.push(this.Item.title),(b=b.join(", "))&&this.state.sys.getAbbreviation&&(this.state.transform.loadAbbreviation("default","classic",b),this.state.transform.abbrevs.default.classic[b]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[b],"empty",!0),u=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(u)))}this._collapseAuthor(),this.variables=[],this.debug&&print("(19)")}else(this.state.tmp.extension||0!=this.names_count)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0)},p.NameOutput.prototype._applyLabels=function(e,t){var n;if(!this.label||!this.label[this.labelVariable])return e;var r=0,i=this.freeters_count[t]+this.institutions_count[t];if(i>1)r=1;else{for(var o=0,a=this.persons[t].length;o<a;o+=1)i+=this.persons_count[t][o];i>1&&(r=1)}return this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(r=this.label[this.labelVariable].before.strings.plural),n=this._buildLabel(t,r,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(n,this.label[this.labelVariable].before,!0),this.state.output.append(e,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(r=this.label[this.labelVariable].after.strings.plural),n=this._buildLabel(t,r,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(e,"literal",!0),this.state.output.append(n,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()),e},p.NameOutput.prototype._buildLabel=function(e,t,n,r){this.common_term&&(e=this.common_term);var i=!1,o=this.label[r][n];return o&&(i=p.castLabel(this.state,o,e,t,p.TOLERANT)),i},p.NameOutput.prototype._collapseAuthor=function(){var e,t,n;0!==this.state.tmp.name_node.top.blobs.length&&(0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,n=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),this.state.tmp.offset_characters=n,this.state.registry.authorstrings[this.Item.id]=t):this.state.tmp.just_looking||this.state.tmp.suppress_decorations||!(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)||(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,n=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),t===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=n),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=t,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=n,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1)))))},p.NameOutput.prototype.isPerson=function(e){return!(e.literal||!e.given&&e.family&&e.isInstitution)},p.NameOutput.prototype.truncatePersonalNameLists=function(){var e,t,n,r;for(e in this.freeters_count={},this.persons_count={},this.institutions_count={},this.freeters)this.freeters.hasOwnProperty(e)&&(this.freeters_count[e]=this.freeters[e].length,this.freeters[e]=this._truncateNameList(this.freeters,e));for(e in this.persons)if(this.persons.hasOwnProperty(e))for(this.institutions_count[e]=this.institutions[e].length,this._truncateNameList(this.institutions,e),this.persons[e]=this.persons[e].slice(0,this.institutions[e].length),this.persons_count[e]=[],i=0,o=this.persons[e].length;i<o;i+=1)this.persons_count[e][i]=this.persons[e][i].length,this.persons[e][i]=this._truncateNameList(this.persons,e,i);if((r=1===this.etal_min&&1===this.etal_use_first&&!this.state.tmp.extension&&!this.state.tmp.just_looking&&e)||this._please_chop)for(t=0,n=this.variables.length;t<n;t+=1){e=this.variables[t],this.freeters[e].length&&(this._please_chop===e?(this.freeters[e]=this.freeters[e].slice(1),this.freeters_count[e]+=-1,this._please_chop=!1):r&&!this._please_chop&&(this.freeters[e]=this.freeters[e].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=r));for(var i=0,o=this.persons[e].length;i<o;i++)if(this.persons[e][i].length){if(this._please_chop===e){this.persons[e][i]=this.persons[e][i].slice(1),this.persons_count[e][i]+=-1,this._please_chop=!1;break}if(r&&!this._please_chop){this.freeters[e]=this.persons[e][i].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],[],this._please_chop=r;break}}this.institutions[e].length&&(this._please_chop===e?(this.institutions[e]=this.institutions[e].slice(1),this.institutions_count[e]+=-1,this._please_chop=!1):r&&!this._please_chop&&(this.institutions[e]=this.institutions[e].slice(0,1),this.institutions_count[e]=1,[],this._please_chop=r))}for(t=0,n=this.variables.length;t<n;t+=1){this.institutions[e].length&&(this.nameset_offset+=1);for(i=0,o=this.persons[e].length;i<o;i++)this.persons[e][i].length&&(this.nameset_offset+=1)}},p.NameOutput.prototype._truncateNameList=function(e,t,n){var r;if(r=void 0===n?e[t]:e[t][n],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&r.length>50&&r.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var i=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;r=r.slice(0,i+1).concat(r.slice(-1))}return r},p.NameOutput.prototype.divideAndTransliterateNames=function(){var e,t,n,r,i=this.Item,o=this.variables;for(this.varnames=o.slice(),this.freeters={},this.persons={},this.institutions={},e=0,t=o.length;e<t;e+=1){var a=o[e];this.variable_offset[a]=this.nameset_offset;var s=this._normalizeVariableValue(i,a);if(this.name.strings["suppress-min"]&&s.length>=this.name.strings["suppress-min"]&&(s=[]),this.name.strings["suppress-max"]&&s.length<=this.name.strings["suppress-max"]&&(s=[]),this._getFreeters(a,s),this._getPersonsAndInstitutions(a,s),this.state.opt.development_extensions.spoof_institutional_affiliations)if(0===this.name.strings["suppress-min"])for(this.freeters[a]=[],n=0,r=this.persons[a].length;n<r;n+=1)this.persons[a][n]=[];else if(0===this.institution.strings["suppress-min"]){for(this.institutions[a]=[],this.freeters[a]=this.freeters[a].concat(this.persons[a]),n=0,r=this.persons[a].length;n<r;n+=1)for(var l=0,u=this.persons[a][n].length;l<u;l+=1)this.freeters[a].push(this.persons[a][n][l]);this.persons[a]=[]}}},p.NameOutput.prototype._normalizeVariableValue=function(e,t){var n;return"string"==typeof e[t]||"number"==typeof e[t]?(p.debug('name variable "'+t+'" is string or number, not array. Attempting to fix.'),n=[{literal:e[t]+""}]):e[t]?"number"!=typeof e[t].length?(p.debug('name variable "'+t+'" is object, not array. Attempting to fix.'),e[t]=[e[t]],n=e[t].slice()):n=e[t].slice():n=[],n},p.NameOutput.prototype._getFreeters=function(e,t){if(this.freeters[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var n=t.length-1;n>-1&&this.isPerson(t[n]);n--){(r=this._checkNickname(t.pop()))&&this.freeters[e].push(r)}else for(n=t.length-1;n>-1;n--){var r=t.pop();if(this.isPerson(r))r=this._checkNickname(r);this.freeters[e].push(r)}this.freeters[e].reverse(),this.freeters[e].length&&(this.nameset_offset+=1)},p.NameOutput.prototype._getPersonsAndInstitutions=function(e,t){if(this.persons[e]=[],this.institutions[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var n=[],r=!1,i=!0,o=t.length-1;o>-1;o+=-1)if(this.isPerson(t[o])){var a=this._checkNickname(t[o]);a&&n.push(a)}else r=!0,this.institutions[e].push(t[o]),i||(n.reverse(),this.persons[e].push(n),n=[]),i=!1;r&&(n.reverse(),this.persons[e].push(n),this.persons[e].reverse(),this.institutions[e].reverse())}},p.NameOutput.prototype._clearValues=function(e){for(var t=e.length-1;t>-1;t+=-1)e.pop()},p.NameOutput.prototype._checkNickname=function(e){if(["interview","personal_communication"].indexOf(this.Item.type)>-1){var t;if((t=p.Util.Names.getRawName(e))&&this.state.sys.getAbbreviation&&(!this.item||!this.item["suppress-author"])){var n=t;this.state.sys.normalizeAbbrevsKey&&(n=this.state.sys.normalizeAbbrevsKey("author",t)),this.state.transform.loadAbbreviation("default","nickname",n);var r=this.state.transform.abbrevs.default.nickname[n];r&&(e="!here>>>"!==r&&{family:r,given:""})}}return e},p.NameOutput.prototype.joinPersons=function(e,t,n,r){return r||(r="name"),void 0===n?1===this.etal_spec[t].freeters?this._joinEtAl(e,r):2===this.etal_spec[t].freeters?this._joinEllipsis(e,r):this.state.tmp.sort_key_flag?this._join(e," "):this._joinAnd(e,r):1===this.etal_spec[t].persons[n]?this._joinEtAl(e,r):2===this.etal_spec[t].persons[n]?this._joinEllipsis(e,r):this.state.tmp.sort_key_flag?this._join(e," "):this._joinAnd(e,r)},p.NameOutput.prototype.joinInstitutionSets=function(e,t){return 1===this.etal_spec[t].institutions?this._joinEtAl(e,"institution"):2===this.etal_spec[t].institutions?this._joinEllipsis(e,"institution"):this._joinAnd(e,"institution")},p.NameOutput.prototype.joinPersonsAndInstitutions=function(e){return this._join(e,this.state.tmp.name_delimiter)},p.NameOutput.prototype.joinFreetersAndInstitutionSets=function(e){return this._join(e,"[never here]",this.with.single,this.with.multiple)},p.NameOutput.prototype._joinEtAl=function(e,t){var n=this._join(e,this.state.tmp.name_delimiter);return this.state.output.openLevel(this._getToken(t)),this.state.output.current.value().strings.delimiter="",this.state.output.append(n,"literal",!0),e.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):1===e.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},p.NameOutput.prototype._joinEllipsis=function(e,t){return this._join(e,this.state.tmp.name_delimiter,this.name.ellipsis.single,this.name.ellipsis.multiple,t)},p.NameOutput.prototype._joinAnd=function(e,t){return this._join(e,this.state.inheritOpt(this[t],"delimiter",t+"-delimiter",", "),this[t].and.single,this[t].and.multiple,t)},p.NameOutput.prototype._join=function(e,t,n,r){var i,o;if(!e)return!1;for(i=e.length-1;i>-1;i+=-1)e[i]&&0!==e[i].length&&e[i].blobs.length||(e=e.slice(0,i).concat(e.slice(i+1)));if(!e.length)return!1;if(n&&2===e.length)n&&(n=new p.Blob(n.blobs,n)),e=[e[0],n,e[1]];else{var a;for(a=r?2:1,i=0,o=e.length-a;i<o;i+=1)e[i].strings.suffix+=t;if(e.length>1){var s=e.pop();r?(r=new p.Blob(r.blobs,r),e.push(r)):(n&&(n=new p.Blob(n.blobs,n)),e.push(n)),e.push(s)}}for(this.state.output.openLevel(),n&&r&&(this.state.output.current.value().strings.delimiter=""),i=0,o=e.length;i<o;i+=1)this.state.output.append(e[i],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},p.NameOutput.prototype._getToken=function(e){var t=this[e];return"institution"===e?new p.Token:t},p.NameOutput.prototype.checkCommonAuthor=function(e){if(!e)return!1;var t=!1;if(2===this.variables.length){var n=this.variables.slice();n.sort(),t=n.join("")}if(!t)return!1;var r=!1;if(this.state.locale[this.state.opt.lang].terms[t]&&(r=!0),!r)return this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),!1;var i=this.Item[this.variables[0]],o=this.Item[this.variables[1]],a=this._compareNamesets(i,o);return!0===a&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),!a},p.NameOutput.prototype.setCommonTerm=function(){var e=this.variables.slice();if(e.sort(),this.common_term=e.join(""),this.common_term){var t=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?t=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(t=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!t||this.variables.length<2)this.common_term=!1;else for(var n=0,r=this.variables.length-1;n<r;n+=1){var i=this.variables[n],o=this.variables[n+1];if(this.freeters[i].length||this.freeters[o].length){if(this.etal_spec[i].freeters!==this.etal_spec[o].freeters||!this._compareNamesets(this.freeters[i],this.freeters[o]))return void(this.common_term=!1);1}if(this.persons[i].length!==this.persons[o].length)return void(this.common_term=!1);for(var a=0,s=this.persons[i].length;a<s;a+=1)if(this.etal_spec[i].persons[a]!==this.etal_spec[o].persons[a]||!this._compareNamesets(this.persons[i][a],this.persons[o][a]))return void(this.common_term=!1)}}},p.NameOutput.prototype._compareNamesets=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0,r=t.length;n<r;n+=1)for(var i=0,o=p.NAME_PARTS.length;i<o;i+=1){var a=p.NAME_PARTS[i];if(!e[n]||e[n][a]!=t[n][a])return!1}return!0},p.NameOutput.prototype.constrainNames=function(){var e;this.names_count=0;for(var t=0,n=this.variables.length;t<n;t+=1){var r=this.variables[t];e=this.nameset_base+t,this.freeters[r].length&&(this.state.tmp.names_max.push(this.freeters[r].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,r,e),this.names_count+=this.freeters[r].length),this.institutions[r].length&&(this.state.tmp.names_max.push(this.institutions[r].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,r,e),this.persons[r]=this.persons[r].slice(0,this.institutions[r].length),this.names_count+=this.institutions[r].length);for(var i=0,o=this.persons[r].length;i<o;i+=1)this.persons[r][i].length&&(this.state.tmp.names_max.push(this.persons[r][i].length,"literal"),this._imposeNameConstraints(this.persons[r],this.persons_count[r],i,e),this.names_count+=this.persons[r][i].length)}},p.NameOutput.prototype._imposeNameConstraints=function(e,t,n,r){var i=e[n],o=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]?o=this.state.tmp.disambig_request.names[r]:t[n]>=this.etal_min&&(o=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]>this.etal_use_first?o=t[n]<this.etal_min?t[n]:this.state.tmp.disambig_request.names[r]:t[n]>=this.etal_min&&(o=this.etal_use_first),this.etal_use_last&&o>this.etal_min-2&&(o=this.etal_min-2));var a=this.etal_min>=this.etal_use_first,s=t[n]>o;o>t[n]&&(o=i.length),a&&s&&(this.etal_use_last?e[n]=i.slice(0,o).concat(i.slice(-1)):e[n]=i.slice(0,o)),this.state.tmp.disambig_settings.names[r]=e[n].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},p.NameOutput.prototype.disambigNames=function(){for(var e,t=0,n=this.variables.length;t<n;t+=1){var r=this.variables[t];if(e=this.nameset_base+t,this.freeters[r].length&&this._runDisambigNames(this.freeters[r],e),this.institutions[r].length){void 0===this.state.tmp.disambig_settings.givens[e]&&(this.state.tmp.disambig_settings.givens[e]=[]);for(var i=0,o=this.institutions[r].length;i<o;i+=1)void 0===this.state.tmp.disambig_settings.givens[e][i]&&this.state.tmp.disambig_settings.givens[e].push(2)}for(i=0,o=this.persons[r].length;i<o;i+=1)this.persons[r][i].length&&this._runDisambigNames(this.persons[r][i],e)}},p.NameOutput.prototype._runDisambigNames=function(e,t){var n,r,i,o,a,s;for(o=0,a=e.length;o<a;o+=1)if(e[o].given||e[o].family){if(r=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,e[o],o),void 0===this.state.tmp.disambig_settings.givens[t])for(var l=0,u=t+1;l<u;l+=1)this.state.tmp.disambig_settings.givens[l]||(this.state.tmp.disambig_settings.givens[l]=[]);if(void 0===this.state.tmp.disambig_settings.givens[t][o]&&(n=this.state.inheritOpt(this.name,"form","name-form","long"),i=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,n,r),this.state.tmp.disambig_settings.givens[t].push(i)),n=this.state.inheritOpt(this.name,"form","name-form","long"),s=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,n,r),this.state.tmp.disambig_request){var c=this.state.tmp.disambig_settings.givens[t][o];1!==c||"by-cite"!==this.state.citation.opt["givenname-disambiguation-rule"]||void 0!==this.state.inheritOpt(this.name,"initialize-with")&&void 0!==e[o].given||(c=2),i=c,this.state.opt["disambiguate-add-givenname"]&&e[o].given&&(i=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,i,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))}else i=s;!this.state.tmp.just_looking&&this.item&&this.item.position===p.POSITION_FIRST&&s>i&&(i=s),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[t][o]=i,"string"!=typeof r||void 0!==this.name.strings.initialize&&!0!==this.name.strings.initialize||(this.state.tmp.disambig_settings.use_initials=!0))}},p.NameOutput.prototype.getEtAlConfig=function(){var e=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,void 0===e&&(e={}),e.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},p.NameOutput.prototype.setEtAlParameters=function(){var e,t,n,r;for(e=0,t=this.variables.length;e<t;e+=1){var i=this.variables[e];for(void 0===this.etal_spec[i]&&(this.etal_spec[i]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+e]=this.etal_spec[i],this.freeters[i].length&&this._setEtAlParameter("freeters",i),n=0,r=this.persons[i].length;n<r;n+=1)void 0===this.etal_spec[i][n]&&(this.etal_spec[i].persons[n]=0),this._setEtAlParameter("persons",i,n);this.institutions[i].length&&this._setEtAlParameter("institutions",i)}},p.NameOutput.prototype._setEtAlParameter=function(e,t,n){var r,i;"persons"===e?(r=this.persons[t][n],i=this.persons_count[t][n]):(r=this[e][t],i=this[e+"_count"][t]),r.length<i&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===e?this.etal_spec[t].persons[n]=2:this.etal_spec[t][e]=2:"persons"===e?this.etal_spec[t].persons[n]=1:this.etal_spec[t][e]=1:"persons"===e?this.etal_spec[t].persons[n]=0:this.etal_spec[t][e]=0},p.NameOutput.prototype.renderAllNames=function(){for(var e,t=0,n=this.variables.length;t<n;t+=1){var r=this.variables[t];(this.freeters[r].length||this.institutions[r].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),e=this.nameset_base+t,this.freeters[r].length&&(this.freeters[r]=this._renderNames(r,this.freeters[r],e));for(var i=0,o=this.institutions[r].length;i<o;i+=1)this.persons[r][i]=this._renderNames(r,this.persons[r][i],e,i)}this.renderInstitutionNames()},p.NameOutput.prototype.renderInstitutionNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1)for(var n=this.variables[e],r=0,i=this.institutions[n].length;r<i;r+=1){var o,a=this.institutions[n][r],s={primary:"locale-orig",secondary:!1,tertiary:!1};if(o=this.state.tmp.extension?["sort"]:a.isInstitution||a.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var l=["primary","secondary","tertiary"],u=0,c=l.length;u<c&&!(o.length-1<u);u+=1)o[u]&&(s[l[u]]="locale-"+o[u]);else s.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(s.secondary=!1,s.tertiary=!1),this.setRenderedName(a);var f=this._renderInstitutionName(n,a,s,r);this.institutions[n][r]=f}},p.NameOutput.prototype._renderInstitutionName=function(e,t,n,r){var i,o,a,s,l,u=this.getName(t,n.primary,!0),c=u.name,f=u.usedOrig;if(c&&(c=this.fixupInstitution(c,e,r)),d=!1,n.secondary){var d=(u=this.getName(t,n.secondary,!1,f)).name;f=u.usedOrig,d&&(d=this.fixupInstitution(d,e,r))}i=!1,n.tertiary&&(i=(u=this.getName(t,n.tertiary,!1,f)).name)&&(i=this.fixupInstitution(i,e,r));var p={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(c&&(p.l.pri=c.long,p.s.pri=c.short.length?c.short:c.long),d&&(p.l.sec=d.long,p.s.sec=d.short.length?d.short:d.long),i&&(p.l.ter=i.long,p.s.ter=i.short.length?i.short:i.long),this.institution.strings["institution-parts"]){case"short":c.short.length?(a=this._getShortStyle(),s=[this._composeOneInstitutionPart([p.s.pri,p.s.sec,p.s.ter],n,a,e)]):(o=this._getLongStyle(c,e,r),s=[this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],n,o,e)]);break;case"short-long":o=this._getLongStyle(c,e,r),a=this._getShortStyle(),s=[l=this._renderOneInstitutionPart(c.short,a),this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],n,o,e)];break;case"long-short":o=this._getLongStyle(c,e,r),a=this._getShortStyle(),l=this._renderOneInstitutionPart(c.short,a),s=[this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],n,o,e),l];break;default:o=this._getLongStyle(c,e,r),s=[this._composeOneInstitutionPart([p.l.pri,p.l.sec,p.l.ter],n,o,e)]}var h=this._join(s," ");return this.state.tmp.name_node.children.push(h),h},p.NameOutput.prototype._composeOneInstitutionPart=function(e,t,n){var r,i,o,a,s=!1,l=!1,u=!1;if(e[0]){if(r=p.Util.cloneToken(n),this.state.opt.citeAffixes[t.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[t.primary].prefix){for(var c=!1,f=0,d=r.decorations.length;f<d;f+=1)"@font-style"===n.decorations[f][0]&&"italic"===r.decorations[f][1]&&(c=!0);c||r.decorations.push(["@font-style","italic"])}s=this._renderOneInstitutionPart(e[0],r)}if(e[1]&&(l=this._renderOneInstitutionPart(e[1],n)),e[2]&&(u=this._renderOneInstitutionPart(e[2],n)),l||u){this.state.output.openLevel("empty"),this.state.output.append(s),i=p.Util.cloneToken(n),t.secondary&&(i.strings.prefix=this.state.opt.citeAffixes.institutions[t.secondary].prefix,i.strings.suffix=this.state.opt.citeAffixes.institutions[t.secondary].suffix,i.strings.prefix||(i.strings.prefix=" "));var h=new p.Token;h.decorations.push(["@font-style","normal"]),h.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(h),this.state.output.append(l,i),this.state.output.closeLevel(),o=p.Util.cloneToken(n),t.tertiary&&(o.strings.prefix=this.state.opt.citeAffixes.institutions[t.tertiary].prefix,o.strings.suffix=this.state.opt.citeAffixes.institutions[t.tertiary].suffix,o.strings.prefix||(o.strings.prefix=" "));var m=new p.Token;m.decorations.push(["@font-style","normal"]),m.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(m),this.state.output.append(u,o),this.state.output.closeLevel(),this.state.output.closeLevel(),a=this.state.output.pop()}else a=s;return a},p.NameOutput.prototype._renderOneInstitutionPart=function(e,t){for(var n=0,r=e.length;n<r;n+=1)if(e[n]){var i=e[n];if(this.state.tmp.strip_periods)i=i.replace(/\./g,"");else for(var o=0,a=t.decorations.length;o<a;o+=1)if("@strip-periods"===t.decorations[o][0]&&"true"===t.decorations[o][1]){i=i.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,p.LITERAL),"!here>>>"===i?e[n]=!1:(this.state.output.append(i,t,!0),e[n]=this.state.output.pop())}return void 0===this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(e,this.institution.strings["part-separator"])},p.NameOutput.prototype._renderNames=function(e,t,n,r){var i=!1;if(t.length){for(var o=[],a=0,s=t.length;a<s;a+=1){var l,u=t[a],c={primary:"locale-orig",secondary:!1,tertiary:!1};if(l=this.state.tmp.extension?["sort"]:u.isInstitution||u.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var f=["primary","secondary","tertiary"],d=0,h=f.length;d<h&&!(l.length-1<d);d+=1)c[f[d]]="locale-"+l[d];else c.primary="locale-translat";if((this.state.tmp.sort_key_flag||"bibliography"!==this.state.tmp.area&&("citation"!==this.state.tmp.area||"note"!==this.state.opt.xclass||!this.item||this.item.position))&&(c.secondary=!1,c.tertiary=!1),this.setRenderedName(u),u.literal||u.isInstitution)o.push(this._renderInstitutionName(e,u,c,r));else{var m=this._renderPersonalName(e,u,c,n,a,r),g=p.Util.cloneToken(this.name);this.state.output.append(m,g,!0),o.push(this.state.output.pop())}}i=this.joinPersons(o,n,r)}return i},p.NameOutput.prototype._renderPersonalName=function(e,t,n,r,i,o){var a=this.getName(t,n.primary,!0),s=this._renderOnePersonalName(a.name,r,i,o),l=!1;n.secondary&&(a=this.getName(t,n.secondary,!1,a.usedOrig)).name&&(l=this._renderOnePersonalName(a.name,r,i,o));var u,c=!1;if(n.tertiary&&(a=this.getName(t,n.tertiary,!1,a.usedOrig)).name&&(c=this._renderOnePersonalName(a.name,r,i,o)),l||c){this.state.output.openLevel("empty"),this.state.output.append(s);var f=new p.Token;n.secondary&&(f.strings.prefix=this.state.opt.citeAffixes.persons[n.secondary].prefix,f.strings.suffix=this.state.opt.citeAffixes.persons[n.secondary].suffix,f.strings.prefix||(f.strings.prefix=" ")),this.state.output.append(l,f);var d=new p.Token;n.tertiary&&(d.strings.prefix=this.state.opt.citeAffixes.persons[n.tertiary].prefix,d.strings.suffix=this.state.opt.citeAffixes.persons[n.tertiary].suffix,d.strings.prefix||(d.strings.prefix=" ")),this.state.output.append(c,d),this.state.output.closeLevel(),u=this.state.output.pop()}else u=s;return u},p.NameOutput.prototype._isRomanesque=function(e){var t,n=2;return e.family.replace(/\"/g,"").match(p.ROMANESQUE_REGEXP)||(n=0),!n&&e.given&&e.given.match(p.STARTSWITH_ROMANESQUE_REGEXP)&&(n=1),2==n&&(e.multi&&e.multi.main?t=e.multi.main.slice(0,2):this.Item.language&&(t=this.Item.language.slice(0,2)),["ja","zh"].indexOf(t)>-1&&(n=1)),n},p.NameOutput.prototype._renderOnePersonalName=function(e,t,n,r){var i=e,o=this._droppingParticle(i,t,r),a=this._familyName(i),s=this._nonDroppingParticle(i),l=this._givenName(i,t,n),u=this._nameSuffix(i);!1===l&&(o=!1,u=!1);var c,f=this.state.inheritOpt(this.name,"sort-separator");f||(f=""),c=i["comma-suffix"]?", ":" ";var d=this._isRomanesque(i);var h,m,g,b,y=function e(t){return!!t&&("string"==typeof t.blobs?["’","'","-"," "].indexOf(t.blobs.slice(-1))>-1:e(t.blobs[t.blobs.length-1]))}(s);if(0===d)h=this._join([s,a,l],"");else if(1===d||i["static-ordering"])h=this._join([s,a,l]," ");else if(i["reverse-ordering"])h=this._join([l,s,a]," ");else if(this.state.tmp.sort_key_flag)"never"===this.state.opt["demote-non-dropping-particle"]?(g=this._join([s,a,o]," "),m=this._join([g,l],this.state.opt.sort_sep),h=this._join([m,u]," ")):(b=this._join([l,o,s]," "),m=this._join([a,b],this.state.opt.sort_sep),h=this._join([m,u]," "));else if("all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===n&&(0===r||void 0===r))["Lord","Lady"].indexOf(i.given)>-1&&(f=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(b=this._join([l,o],i["comma-dropping-particle"]+" "),(b=this._join([b,s]," "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),a&&this.family&&(a.strings.prefix=this.family.strings.prefix,a.strings.suffix=this.family.strings.suffix),m=this._join([a,b],f),h=this._join([m,u],f)):((g=y?this._join([s,a],""):this._join([s,a]," "))&&this.family&&(g.strings.prefix=this.family.strings.prefix,g.strings.suffix=this.family.strings.suffix),(b=this._join([l,o],i["comma-dropping-particle"]+" "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),m=this._join([g,b],f),h=this._join([m,u],f));else{if(i["dropping-particle"]&&i.family&&!i["non-dropping-particle"]){var v=i["dropping-particle"];["'","ʼ","’","-"].indexOf(v.slice(-1))>-1&&"de"!==v.slice(0,-1)&&(a=this._join([o,a],""),o=!1)}var x=" ";this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1&&(x=" "),y?(b=this._join([s,a],""),b=this._join([o,b],x)):b=this._join([o,s,a],x),(b=this._join([b,u],c))&&this.family&&(b.strings.prefix=this.family.strings.prefix,b.strings.suffix=this.family.strings.suffix),l&&this.given&&(l.strings.prefix=this.given.strings.prefix,l.strings.suffix=this.given.strings.suffix),b.strings.prefix&&(i["comma-dropping-particle"]=""),h=this._join([l,b],i["comma-dropping-particle"]+x)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,p.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(h),h},p.NameOutput.prototype._normalizeNameInput=function(e){var t={literal:e.literal,family:e.family,isInstitution:e.isInstitution,given:e.given,suffix:e.suffix,"comma-suffix":e["comma-suffix"],"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],"static-ordering":e["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":e["reverse-ordering"],"full-form-always":e["full-form-always"],"parse-names":e["parse-names"],"comma-dropping-particle":"",block_initialize:e.block_initialize,multi:e.multi};return this._parseName(t),t},p.NameOutput.prototype._stripPeriods=function(e,t){var n=this[e+"_decor"];if(t)if(this.state.tmp.strip_periods)t=t.replace(/\./g,"");else if(n)for(var r=0,i=n.decorations.length;r<i;r+=1)if("@strip-periods"===n.decorations[r][0]&&"true"===n.decorations[r][1]){t=t.replace(/\./g,"");break}return t},p.NameOutput.prototype._nonDroppingParticle=function(e){var t=e["non-dropping-particle"];t&&this.state.tmp.sort_key_flag&&(t=t.replace(/[\'\u2019]/,""));var n=this._stripPeriods("family",t);return!!this.state.output.append(n,this.family_decor,!0)&&this.state.output.pop()},p.NameOutput.prototype._droppingParticle=function(e,t,n){var r=e["dropping-particle"];r&&this.state.tmp.sort_key_flag&&(r=r.replace(/[\'\u2019]/,""));var i=this._stripPeriods("given",r);if(e["dropping-particle"]&&e["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===n?this.etal_spec[t].freeters=2:this.etal_spec[t].persons=2:void 0===n?this.etal_spec[t].freeters=1:this.etal_spec[t].persons=1,e["comma-dropping-particle"]="";else if(this.state.output.append(i,this.given_decor,!0))return this.state.output.pop();return!1},p.NameOutput.prototype._familyName=function(e){var t=this._stripPeriods("family",e.family);return!!this.state.output.append(t,this.family_decor,!0)&&this.state.output.pop()},p.NameOutput.prototype._givenName=function(e,t,n){var r,i,o="long"!==this.state.inheritOpt(this.name,"form","name-form","long"),a=!1!==this.state.inheritOpt(this.name,"initialize"),s="string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&!e.block_initialize;if(e["full-form-always"])i=2;else{r=o?0:s?1:2;var l=this.state.tmp.disambig_settings.givens[t][n];i=l>r?l:r}var u=this.state.citation.opt["givenname-disambiguation-rule"];if(u&&"-with-initials"===u.slice(-14)&&(s=!0),e.family&&1===i)if(s){var c=this.state.inheritOpt(this.name,"initialize-with",!1,"");e.given=p.Util.Names.initializeWith(this.state,e.given,c,!a)}else e.given=p.Util.Names.unInitialize(this.state,e.given);else{if(0===i)return!1;2===i&&(e.given=p.Util.Names.unInitialize(this.state,e.given))}var f=this._stripPeriods("given",e.given);return!!this.state.output.append(f,this.given_decor,!0)&&this.state.output.pop()},p.NameOutput.prototype._nameSuffix=function(e){var t,n=e.suffix;"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(n=p.Util.Names.initializeWith(this.state,e.suffix,this.state.inheritOpt(this.name,"initialize-with"),!0));var r="";return(n=this._stripPeriods("family",n))&&"."===n.slice(-1)&&(n=n.slice(0,-1),r="."),!!this.state.output.append(n,"empty",!0)&&((t=this.state.output.pop()).strings.suffix=r+t.strings.suffix,t)},p.NameOutput.prototype._getLongStyle=function(e){var t;return(t=e.short.length&&this.institutionpart["long-with-short"]?this.institutionpart["long-with-short"]:this.institutionpart.long)||(t=new p.Token),t},p.NameOutput.prototype._getShortStyle=function(){return this.institutionpart.short?this.institutionpart.short:new p.Token},p.NameOutput.prototype._parseName=function(e){if(!e["parse-names"]&&void 0!==e["parse-names"])return e;var t;e.family&&!e.given&&e.isInstitution&&(e.literal=e.family,e.family=void 0,e.isInstitution=void 0),e.family&&'"'===e.family.slice(0,1)&&'"'===e.family.slice(-1)||!e["parse-names"]&&void 0!==e["parse-names"]?(e.family=e.family.slice(1,-1),t=!0,e["parse-names"]=0):t=!1,this.state.opt.development_extensions.parse_names&&!e["non-dropping-particle"]&&e.family&&!t&&e.given&&(e["static-particles"]||p.parseParticles(e,!0))},p.NameOutput.prototype.getName=function(e,t,n,r){if(r&&"locale-orig"===t)return{name:!1,usedOrig:r};e.family||(e.family=""),e.given||(e.given="");var i={};i["static-ordering"]=this.getStaticOrder(e);var o,a=!0;if("locale-orig"!==t&&(a=!1,e.multi))for(var s=this.state.opt[t],l=0,u=s.length;l<u;l+=1)if(o=s[l],e.multi._key[o]){a=!0;var c=e.isInstitution;(e=e.multi._key[o]).isInstitution=c,(i=this.getNameParams(o)).transliterated=!0;break}return a||(o=!1,e.multi&&e.multi.main?o=e.multi.main:this.Item.language&&(o=this.Item.language),o&&(i=this.getNameParams(o))),n||a?(e.family||(e.family=""),e.given||(e.given=""),e.literal&&(delete e.family,delete e.given),!(e={family:e.family,given:e.given,"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],suffix:e.suffix,"static-ordering":i["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":i["reverse-ordering"],"full-form-always":i["full-form-always"],"parse-names":e["parse-names"],"comma-suffix":e["comma-suffix"],"comma-dropping-particle":e["comma-dropping-particle"],transliterated:i.transliterated,block_initialize:i["block-initialize"],literal:e.literal,isInstitution:e.isInstitution,multi:e.multi}).literal&&!e.given&&e.family&&e.isInstitution&&(e.literal=e.family),e.literal&&(delete e.family,delete e.given),{name:e=this._normalizeNameInput(e),usedOrig:r||!a}):{name:!1,usedOrig:r}},p.NameOutput.prototype.getNameParams=function(e){var t={},n=p.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),r=this.state.locale[n.best]?n.best:this.state.opt["default-locale"][0],i=this.state.locale[r].opts["name-as-sort-order"],o=this.state.locale[r].opts["name-as-reverse-order"],a=this.state.locale[r].opts["name-never-short"],s=e.split("-")[0];return i&&i[s]&&(t["static-ordering"]=!0,t["reverse-ordering"]=!1),o&&o[s]&&(t["reverse-ordering"]=!0,t["static-ordering"]=!1),a&&a[s]&&(t["full-form-always"]=!0),t["static-ordering"]&&(t["block-initialize"]=!0),t},p.NameOutput.prototype.setRenderedName=function(e){if("bibliography"===this.state.tmp.area){for(var t="",n=0,r=p.NAME_PARTS.length;n<r;n+=1)e[p.NAME_PARTS[n]]&&(t+=e[p.NAME_PARTS[n]]);this.state.tmp.rendered_name.push(t)}},p.NameOutput.prototype.fixupInstitution=function(e,t,n){e=this._splitInstitution(e,t,n),this.institution.strings["reverse-order"]&&e.long.reverse();var r=e.long,i=e.long.slice(),o=!1;if(this.state.sys.getAbbreviation)for(var a=this.Item.jurisdiction,s=0,l=r.length;s<l;s+=1){var u=r[s];a=this.state.transform.loadAbbreviation(a,"institution-part",u),this.state.transform.abbrevs[a]["institution-part"][u]&&(i[s]=this.state.transform.abbrevs[a]["institution-part"][u],o=!0)}return e.short=o?i:[],e},p.NameOutput.prototype.getStaticOrder=function(e,t){var n=!1;return!t&&e["static-ordering"]?n=!0:0===this._isRomanesque(e)?n=!0:(!e.multi||!e.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1?n=!0:e.multi&&e.multi.main&&["vi","hu"].indexOf(e.multi.main.slice(0,2))>-1?n=!0:this.state.opt["auto-vietnamese-names"]&&p.VIETNAMESE_NAMES.exec(e.family+" "+e.given)&&p.VIETNAMESE_SPECIALS.exec(e.family+e.given)&&(n=!0),n},p.NameOutput.prototype._splitInstitution=function(e,t,n){var r={};!e.literal&&e.family&&(e.literal=e.family,delete e.family);var i=e.literal.replace(/\s*\|\s*/g,"|");if(i=i.split("|"),"short"===this.institution.strings.form&&this.state.sys.getAbbreviation)for(var o=this.Item.jurisdiction,a=i.length;a>0;a+=-1){var s=i.slice(0,a).join("|");if(o=this.state.transform.loadAbbreviation(o,"institution-entire",s),this.state.transform.abbrevs[o]["institution-entire"][s]){var l=this.state.transform.abbrevs[o]["institution-entire"][s],u=(l=this.state.transform.quashCheck(l)).split(/>>[0-9]{4}>>/),c=l.match(/>>([0-9]{4})>>/);if(l=u.pop(),u.length>0&&this.Item["original-date"]&&this.Item["original-date"].year)for(var f=c.length-1;f>0&&!(parseInt(this.Item["original-date"].year,10)>=parseInt(c[f],10));f+=-1)l=u.pop();i=[l=l.replace(/\s*\|\s*/g,"|")];break}}return i.reverse(),r.long=this._trimInstitution(i,t,n),r},p.NameOutput.prototype._trimInstitution=function(e,t){var n=!1,r=!1,i=e.slice(),o=!1;return this.institution&&(void 0!==this.institution.strings["use-first"]&&(n=this.institution.strings["use-first"]),void 0!==this.institution.strings["stop-last"]?o=this.institution.strings["stop-last"]:"authority"===t&&this.state.tmp.authority_stop_last&&(o=this.state.tmp.authority_stop_last),o&&(i=i.slice(0,o),e=e.slice(0,o)),void 0!==this.institution.strings["use-last"]&&(r=this.institution.strings["use-last"]),"authority"===t&&(o&&(this.state.tmp.authority_stop_last=o),r&&(this.state.tmp.authority_stop_last+=-1*r))),!1===n&&(0===this.persons[t].length&&(n=this.institution.strings["substitute-use-first"]),n||(n=0)),!1===r&&(r=n?0:e.length),n>e.length-r&&(n=e.length-r),e=e.slice(0,n),i=i.slice(n),r&&(r>i.length&&(r=i.length),r&&(e=e.concat(i.slice(i.length-r)))),e},p.PublisherOutput=function(e,t){this.state=e,this.group_tok=t,this.varlist=[]},p.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},p.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var e=!1;"text"===this.group_tok.strings.and?e=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(e="&");var t=new p.Token;t.strings.suffix=" ",t.strings.prefix=" ",this.state.output.append(e,t,!0);var n=this.state.output.pop();t.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(e,t,!0);var r=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,e&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=r:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=n,this.and_blob.multiple=n):(this.and_blob.single=n,this.and_blob.multiple=r))},p.PublisherOutput.prototype.composeElements=function(){for(var e=0;e<2;e+=1)for(var t=["publisher","publisher-place"][e],n=0,r=this["publisher-list"].length;n<r;n+=1){var i=this[t+"-list"][n],o=this[t+"-token"];this.state.output.append(i,o,!0),this[t+"-list"][n]=this.state.output.pop()}},p.PublisherOutput.prototype.composePublishers=function(){for(var e,t=0,n=this["publisher-list"].length;t<n;t+=1)e=[this[this.varlist[0]+"-list"][t],this[this.varlist[1]+"-list"][t]],this["publisher-list"][t]=this._join(e,this.group_tok.strings.delimiter)},p.PublisherOutput.prototype.joinPublishers=function(){var e=this["publisher-list"],t=this._join(e,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(t,"literal")},p.PublisherOutput.prototype._join=p.NameOutput.prototype._join,p.PublisherOutput.prototype._getToken=p.NameOutput.prototype._getToken,p.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},p.evaluateLabel=function(e,t,n,r){var i;"locator"===e.strings.term?(r&&r.label&&(i="sub verbo"===r.label?"sub-verbo":r.label),i||(i="page")):i=e.strings.term;var o=e.strings.plural;if("number"!=typeof o){var a=r&&"locator"===e.strings.term?r:n;a[e.strings.term]&&(t.processNumber(!1,a,e.strings.term,n.type),o=t.tmp.shadow_numbers[e.strings.term].plural,t.tmp.shadow_numbers[e.strings.term].labelForm||t.tmp.shadow_numbers[e.strings.term].labelDecorations||(t.tmp.shadow_numbers[e.strings.term].labelForm=e.strings.form,t.tmp.shadow_numbers[e.strings.term].labelCapitalizeIfFirst=e.strings.capitalize_if_first,t.tmp.shadow_numbers[e.strings.term].labelDecorations=e.decorations.slice()),["locator","number","page"].indexOf(e.strings.term)>-1&&t.tmp.shadow_numbers[e.strings.term].label&&(i=t.tmp.shadow_numbers[e.strings.term].label),e.decorations&&t.opt.development_extensions.csl_reverse_lookup_support&&(e.decorations.reverse(),e.decorations.push(["@showid","true",e.cslid]),e.decorations.reverse()))}return p.castLabel(t,e,i,o,p.TOLERANT)},p.castLabel=function(e,t,n,r,i){var o=t.strings.form,a=t.strings.capitalize_if_first;e.tmp.group_context.tip.label_form&&"static"!==o&&(o=e.tmp.group_context.tip.label_form),e.tmp.group_context.tip.label_capitalize_if_first&&(a=e.tmp.group_context.tip.label_capitalize_if_first);var s=e.getTerm(n,o,r,!1,i,t.default_locale);if(a&&(s=p.Output.Formatters["capitalize-first"](e,s)),e.tmp.strip_periods)s=s.replace(/\./g,"");else for(var l=0,u=t.decorations.length;l<u;l+=1)if("@strip-periods"===t.decorations[l][0]&&"true"===t.decorations[l][1]){s=s.replace(/\./g,"");break}return s},p.Node.name={build:function(e,t){var n,r;[p.SINGLETON,p.START].indexOf(this.tokentype)>-1&&(void 0===e.tmp.root?(r=void 0,e.tmp.root="citation"):r=e.tmp.root,e.inheritOpt(this,"et-al-subsequent-min")&&e.inheritOpt(this,"et-al-subsequent-min")!==e.inheritOpt(this,"et-al-min")&&(e.opt.update_mode=p.POSITION),e.inheritOpt(this,"et-al-subsequent-use-first")&&e.inheritOpt(this,"et-al-subsequent-use-first")!==e.inheritOpt(this,"et-al-use-first")&&(e.opt.update_mode=p.POSITION),e.tmp.root=r,n=function(e){e.tmp.etal_term="et-al",e.tmp.name_delimiter=e.inheritOpt(this,"delimiter","name-delimiter",", "),e.tmp["delimiter-precedes-et-al"]=e.inheritOpt(this,"delimiter-precedes-et-al"),"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")&&(e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&"),e.tmp.and_term=this.and_term,p.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.name_delimiter&&(this.and_prefix_multiple=e.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.name_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===e.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=e.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},e.inheritOpt(this,"and")?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):e.tmp.name_delimiter&&(this.and.single=new p.Blob(e.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new p.Blob(e.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},e.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="…",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=e.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new p.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new p.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),void 0===e.tmp["et-al-min"]&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),void 0===e.tmp["et-al-use-first"]&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),void 0===e.tmp["et-al-use-last"]&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last")),e.nameOutput.name=this},e.build.name_flag=!0,this.execs.push(n));t.push(this)}},p.Node["name-part"]={build:function(e){e.build[this.strings.name]=this}},p.Node.names={build:function(e,t){var n;if(this.tokentype!==p.START&&this.tokentype!==p.SINGLETON||(p.Util.substituteStart.call(this,e,t),e.build.substitute_level.push(1)),this.tokentype===p.SINGLETON){for(var r in e.build.names_variables[e.build.names_variables.length-1].concat(this.variables),this.variables){var i=this.variables[r],o=e.build.name_label[e.build.name_label.length-1];Object.keys(o).length&&(o[i]=o[Object.keys(o)[0]])}n=function(e){e.nameOutput.reinit(this,this.variables_real[0])},this.execs.push(n)}if(this.tokentype===p.START&&(e.build.names_flag=!0,e.build.name_flag=!1,e.build.names_level+=1,e.build.names_variables.push(this.variables),e.build.name_label.push({}),n=function(e){e.tmp.can_substitute.push(!0),e.nameOutput.init(this)},this.execs.push(n)),this.tokentype===p.END){for(r=0;r<3;r+=1){var a=["family","given","et-al"][r];this[a]=e.build[a],1===e.build.names_level&&(e.build[a]=void 0)}this.label=e.build.name_label[e.build.name_label.length-1],e.build.names_level+=-1,e.build.names_variables.pop(),e.build.name_label.pop(),n=function(e){e.tmp.etal_node?this.etal_style=e.tmp.etal_node:this.etal_style="empty",this.etal_term=e.getTerm(e.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=e.tmp.name_delimiter,"always"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=e.tmp.name_delimiter:"never"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===e.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=e.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",p.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(" "===this.etal_prefix_single&&(this.etal_prefix_single="")," "===this.etal_prefix_multiple&&(this.etal_prefix_multiple="")," "===this.etal_suffix&&(this.etal_suffix=""));for(var t=0;t<3;t+=1){var n=["family","given"][t];e.nameOutput[n]=this[n]}e.nameOutput.with=this.with;var r="",i="";p.STARTSWITH_ROMANESQUE_REGEXP.test("with")&&(r=" ",i=" ");var o={};o.single=new p.Blob("with"),o.single.strings.suffix=i,o.multiple=new p.Blob("with"),o.multiple.strings.suffix=i,"always"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(o.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),o.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(o.single.strings.prefix=r,o.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"after-inverted-name"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(o.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),o.multiple.strings.prefix=r):(o.single.strings.prefix=r,o.multiple.strings.prefix=r),e.nameOutput.with=o,e.nameOutput.label=this.label,e.nameOutput.etal_style=this.etal_style,e.nameOutput.etal_term=this.etal_term,e.nameOutput.etal_prefix_single=this.etal_prefix_single,e.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,e.nameOutput.etal_suffix=this.etal_suffix,e.nameOutput.outputNames(),e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-last"]=void 0},this.execs.push(n),n=function(e){e.tmp.can_substitute.pop()||e.tmp.can_substitute.replace(!1,p.LITERAL),1===e.tmp.can_substitute.mystack.length&&(e.tmp.can_block_substitute=!1)},this.execs.push(n),e.build.name_flag=!1}t.push(this),this.tokentype!==p.END&&this.tokentype!==p.SINGLETON||(e.build.substitute_level.pop(),p.Util.substituteEnd.call(this,e,t))}},p.Node.number={build:function(e,t){var n;p.Util.substituteStart.call(this,e,t),"roman"===this.strings.form?this.formatter=e.fun.romanizer:"ordinal"===this.strings.form?this.formatter=e.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=e.fun.long_ordinalizer),void 0===this.successor_prefix&&(this.successor_prefix=e[e.build.area].opt.layout_delimiter),void 0===this.splice_prefix&&(this.splice_prefix=e[e.build.area].opt.layout_delimiter),n=function(e,t,n){if(0!==this.variables.length){var r;if(r=this.variables[0],void 0===n)n={};if(["locator","locator-extra"].indexOf(r)>-1){if(e.tmp.just_looking)return;if(!n[r])return}else if(!t[r])return;"collection-number"===r&&"legal_case"===t.type&&(e.tmp.renders_collection_number=!0);if(e.tmp.group_context.tip.force_suppress)return!1;["locator","locator-extra"].indexOf(r)>-1?e.processNumber.call(e,this,n,r,t.type):(e.tmp.group_context.tip.condition||(e.tmp.just_did_number=!0),e.processNumber.call(e,this,t,r,t.type)),p.Util.outputNumericField(e,r,t.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!e.tmp.just_looking&&(e.tmp.done_vars.push(this.variables_real[0]),e.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}},this.execs.push(n),t.push(this),p.Util.substituteEnd.call(this,e,t)}},p.Node.sort={build:function(e,t){if(t=e[e.build.root+"_sort"].tokens,this.tokentype===p.START){"citation"===e.build.area&&(e.opt.sort_citations=!0),e.build.area=e.build.root+"_sort",e.build.extension="_sort";var n=function(e,t){if(e.opt.has_layout_locale){for(var n,r=p.localeResolve(t.language,e.opt["default-locale"][0]),i=e[e.tmp.area.slice(0,-5)].opt.sort_locales,o=0,a=i.length;o<a&&((n=i[o][r.bare])||(n=i[o][r.best]),!n);o+=1);n||(n=e.opt["default-locale"][0]),e.tmp.lang_sort_hold=e.opt.lang,e.opt.lang=n}};this.execs.push(n)}if(this.tokentype===p.END){e.build.area=e.build.root,e.build.extension="";n=function(e){e.opt.has_layout_locale&&(e.opt.lang=e.tmp.lang_sort_hold,delete e.tmp.lang_sort_hold)};this.execs.push(n)}t.push(this)}},p.Node.substitute={build:function(e,t){var n;if(this.tokentype===p.START){var r=new p.Token("choose",p.START);p.Node.choose.build.call(r,e,t);var i=new p.Token("if",p.SINGLETON);n=function(){return!(!e.tmp.value.length||e.tmp.common_term_match_fail)},i.tests=[n],i.test=e.fun.match.any(i,e,i.tests),t.push(i),n=function(e){e.tmp.can_block_substitute=!0,e.tmp.value.length&&!e.tmp.common_term_match_fail&&e.tmp.can_substitute.replace(!1,p.LITERAL),e.tmp.common_term_match_fail=!1},this.execs.push(n),t.push(this)}if(this.tokentype===p.END){t.push(this);var o=new p.Token("choose",p.END);p.Node.choose.build.call(o,e,t)}}},p.Node.text={build:function(e,t){var n,r,i,o,a,s,l,u,c,f,d;if(this.postponed_macro){var h=p.Util.cloneToken(this);h.name="group",h.tokentype=p.START,p.Node.group.build.call(h,e,t),p.expandMacro.call(e,this,t);var m=p.Util.cloneToken(this);m.name="group",m.tokentype=p.END,"juris-locator-label"===this.postponed_macro&&(m.isJurisLocatorLabel=!0),p.Node.group.build.call(m,e,t)}else{if(p.Util.substituteStart.call(this,e,t),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),r="long",i=0,this.strings.form&&(r=this.strings.form),this.strings.plural&&(i=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0])"citation-number"===this.variables_real[0]?("citation"===e.build.root&&(e.opt.update_mode=p.NUMERIC),"bibliography"===e.build.root&&(e.opt.bib_mode=p.NUMERIC),"citation-number"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,n=function(e,t,n){if(o=""+t.id,!e.tmp.just_looking){if("_sort"===e.tmp.area.slice(-5)&&"citation-number"===this.variables[0]){if("bibliography_sort"===e.tmp.area&&e.tmp.group_context.tip.done_vars.push("citation-number"),"citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map)var r=e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq];else r=e.registry.registry[t.id].seq;return r&&(r=p.Util.padding(""+r)),void e.output.append(r,this)}n&&n["author-only"]&&e.tmp.element_trace.replace("suppress-me"),r="bibliography_sort"!==e.tmp.area&&e.bibliography_sort.tmp.citation_number_map&&e.bibliography_sort.opt.citation_number_sort_direction===p.DESCENDING?e.bibliography_sort.tmp.citation_number_map[e.registry.registry[o].seq]:e.registry.registry[o].seq,e.opt.citation_number_slug?e.output.append(e.opt.citation_number_slug,this):(s=new p.NumericBlob(!1,r,this,t.id),e.tmp.in_cite_predecessor&&(s.suppress_splice_prefix=!0),e.output.append(s,"literal"))}},this.execs.push(n)):"year-suffix"===this.variables_real[0]?(e.opt.has_year_suffix=!0,"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,e[e.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=e[e.build.area].opt["year-suffix-delimiter"]),n=function(e,t){if(e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.just_looking){a=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),e[e.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter),s=new p.NumericBlob(!1,a,this,t.id),l=new p.Util.Suffixator(p.SUFFIX_CHARS),s.setFormatter(l),e.output.append(s,"literal"),u=!1;for(var n=0,r=e.tmp.group_context.mystack.length;n<r;n++){var i=e.tmp.group_context.mystack[n];if(!i.variable_success&&(i.variable_attempt||!i.variable_attempt&&!i.term_intended)){u=!0;break}}c=e[e.tmp.area].opt["year-suffix-delimiter"],u&&c&&!e.tmp.sort_key_flag&&(e.tmp.splice_delimiter=e[e.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(n)):"citation-label"===this.variables_real[0]&&("bibliography"===e.build.root&&(e.opt.bib_mode=p.TRIGRAPH),e.opt.has_year_suffix=!0,n=function(e,t){(f=t["citation-label"])||(f=e.getCitationLabel(t)),e.tmp.just_looking||(d="",e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&(a=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),d=e.fun.suffixator.format(a)),f+=d),e.output.append(f,this)},this.execs.push(n));else if(this.strings.term)n=function(e,t){var n,o=e.opt.gender[t.type],a=this.strings.term;if(""!==(a=e.getTerm(a,r,i,o,p.TOLERANT,this.default_locale))&&(e.tmp.group_context.tip.term_intended=!0),p.UPDATE_GROUP_CONTEXT_CONDITION(e,a),n=e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area?a:p.Output.Formatters["capitalize-first"](e,a),e.tmp.strip_periods)n=n.replace(/\./g,"");else for(var s=0,l=this.decorations.length;s<l;s+=1)if("@strip-periods"===this.decorations[s][0]&&"true"===this.decorations[s][1]){n=n.replace(/\./g,"");break}e.output.append(n,this)},this.execs.push(n),e.build.term=!1,e.build.form=!1,e.build.plural=!1;else if(this.variables_real.length){if(n=function(e,t){"locator"!==this.variables_real[0]&&(e.tmp.have_collapsed=!1),!e.tmp.group_context.tip.condition&&t[this.variables[0]]&&(e.tmp.just_did_number=!1);var n=t[this.variables[0]];n&&!e.tmp.group_context.tip.condition&&((""+n).slice(-1).match(/[0-9]/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)},this.execs.push(n),p.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var g=this.variables[0],b=!1,y=!1,v=!1;"short"===r?"-short"!==this.variables_real[0].slice(-6)&&(y=this.variables_real[0]+"-short"):g=!1,e.build.extension?v=!0:(v=!0,b=!0),n=e.transform.getOutputFunction(this.variables,g,b,y,v)}else n=p.CITE_FIELDS.indexOf(this.variables_real[0])>-1?function(e,t,n){n&&n[this.variables[0]]&&(e.processNumber(this,n,this.variables[0],t.type),p.Util.outputNumericField(e,this.variables[0],t.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!e.tmp.just_looking&&e.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?function(e,t){e.processNumber(this,t,this.variables[0],t.type),p.Util.outputNumericField(e,this.variables[0],t.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?function(e,t){var n;if(this.variables[0]&&(n=e.getVariable(t,this.variables[0],r)))if("URL"===this.variables[0]&&"short"===r&&(n=n.replace(/(.*\.[^\/]+)\/.*/,"$1")).match(/\/\/www\./)&&(n=n.replace(/https?:\/\//,"")),e.opt.development_extensions.wrap_url_and_doi)if(this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0])e.output.append(n,this,!1,!1,!0);else{var i=p.Util.cloneToken(this),o=new p.Blob(null,null,"url-wrapper");if(o.decorations.push(["@DOI","true"]),"DOI"===this.variables_real[0]){var a;this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(a=(n=n.replace(/^https?:\/\/doi\.org\//,"")).match(/^https?:\/\//)?"":"https://doi.org/",i.strings.prefix=this.strings.prefix.slice(0,i.strings.prefix.length-16));var s=new p.Blob(a),l=new p.Blob(n);o.push(s),o.push(l),e.output.append(o,i,!1,!1,!0)}else{l=new p.Blob(n);o.push(l),e.output.append(o,i,!1,!1,!0)}}else{if(this.decorations.length)for(var u=this.decorations.length-1;u>-1;u--)this.decorations[u][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,u).concat(this.decorations.slice(u+1)));e.output.append(n,this,!1,!1,!0)}}:"section"===this.variables_real[0]?function(e,t){var n;(n=e.getVariable(t,this.variables[0],r))&&e.output.append(n,this)}:"hereinafter"===this.variables_real[0]?function(e,t){var n=e.transform.abbrevs.default.hereinafter[t.id];n&&(e.output.append(n,this),e.tmp.group_context.tip.variable_success=!0)}:function(e,t){var n;this.variables[0]&&(n=e.getVariable(t,this.variables[0],r))&&(n=(n=""+n).split("\\").join(""),e.output.append(n,this))};this.execs.push(n)}else this.strings.value&&(n=function(e){e.tmp.group_context.tip.term_intended=!0,p.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.value,!0),e.output.append(this.strings.value,this)},this.execs.push(n));t.push(this),p.Util.substituteEnd.call(this,e,t)}}},p.Node.intext={build:function(e,t){if(this.tokentype===p.START){e.build.area="intext",e.build.root="intext",e.build.extension="";this.execs.push((function(e,t){e.tmp.area="intext",e.tmp.root="intext",e.tmp.extension=""}))}this.tokentype===p.END&&(e.intext_sort={opt:{sort_directions:e.citation_sort.opt.sort_directions}},e.intext.srt=e.citation.srt),t.push(this)}},p.Attributes={},p.Attributes["@disambiguate"]=function(e,t){if(this.tests||(this.tests=[]),"true"===t){e.opt.has_disambiguate=!0;var n=function(t){if("bibliography"===e.tmp.area){if(e.tmp.disambiguate_count<e.registry.registry[t.id].disambig.disambiguate)return e.tmp.disambiguate_count+=1,!0}else if(e.tmp.disambiguate_maxMax+=1,e.tmp.disambig_settings.disambiguate&&e.tmp.disambiguate_count<e.tmp.disambig_settings.disambiguate)return e.tmp.disambiguate_count+=1,!0;return!1};this.tests.push(n)}else if("check-ambiguity-and-backreference"===t){n=function(t){return!!(e.registry.registry[t.id].disambig.disambiguate&&e.registry.registry[t.id]["citation-count"]>1)};this.tests.push(n)}},p.Attributes["@is-numeric"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(t){return function(n,r){var i=n;if(r&&["locator","locator-extra"].indexOf(t)>-1&&(i=r),!i[t])return!1;if(p.NUMERIC_VARIABLES.indexOf(t)>-1){if(e.tmp.shadow_numbers[t]||e.processNumber(!1,i,t,n.type),e.tmp.shadow_numbers[t].numeric)return!0}else if(["title","locator-extra","version"].indexOf(t)>-1&&i[t].slice(-1)===""+parseInt(i[t].slice(-1),10))return!0;return!1}},i=0;i<n.length;i+=1)this.tests.push(r(n[i]))},p.Attributes["@is-uncertain-date"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(e){return function(t){return!(!t[e]||!t[e].circa)}},i=0,o=n.length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@locator"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.replace("sub verbo","sub-verbo"),r=function(t){return function(n,r){var i;return e.processNumber(!1,r,"locator"),i=e.tmp.shadow_numbers.locator.label,t===i}},i=0,o=(n=n.split(/\s+/)).length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@position"]=function(e,t){this.tests||(this.tests=[]),e.opt.update_mode=p.POSITION;for(var n=t.split(/\s+/),r=function(e,t){return!!(t&&t.position>=p.POSITION_SUBSEQUENT&&t["near-note"])},i=function(e,t){return!(!t||t.position!=p.POSITION_SUBSEQUENT||t["near-note"])},o=function(t){return function(n,r){if("bibliography"===e.tmp.area)return!1;if(r&&void 0===r.position&&(r.position=0),r&&"number"==typeof r.position){if(0===r.position&&0===t)return!0;if(t>0&&r.position>=t)return!0}else if(0===t)return!0;return!1}},a=0,s=n.length;a<s;a+=1){var l;"first"===(l=n[a])?l=p.POSITION_FIRST:"subsequent"===l?l=p.POSITION_SUBSEQUENT:"ibid"===l?l=p.POSITION_IBID:"ibid-with-locator"===l&&(l=p.POSITION_IBID_WITH_LOCATOR),"near-note"===l?this.tests.push(r):"far-note"===l?this.tests.push(i):this.tests.push(o(l))}},p.Attributes["@type"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(e){return function(t){return!!(t.type===e)}},i=[],o=0,a=n.length;o<a;o+=1)i.push(r(n[o]));this.tests.push(e.fun.match.any(this,e,i))},p.Attributes["@variable"]=function(e,t){var n;if(this.tests||(this.tests=[]),this.variables=t.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)n=function(e,t,n){for(var r=this.variables.length-1;r>-1;r+=-1)this.variables.pop();r=0;for(var i=this.variables_real.length;r<i;r++)-1===e.tmp.done_vars.indexOf(this.variables_real[r])&&this.variables.push(this.variables_real[r]),e.tmp.can_block_substitute&&e.tmp.done_vars.push(this.variables_real[r])},this.execs.push(n),n=function(e,t,n){for(var r=!1,i=0,o=this.variables.length;i<o;i++){var a=this.variables[i];if(["authority","committee"].indexOf(a)>-1&&"string"==typeof t[a]&&"names"===this.name){var s=!0,l=t[a].split(/\s*;\s*/),u={};if(t.multi&&t.multi._keys[a])for(var c in t.multi._keys[a])if(u[c]=t.multi._keys[a][c].split(/\s*;\s*/),u[c].length!==l.length){s=!1;break}s||(l=[t[a]],u=t.multi._keys[a]);for(var f=0,d=l.length;f<d;f++){var h={literal:l[f],multi:{_key:{}}};for(var c in u){var m={literal:u[c][f]};h.multi._key[c]=m}l[f]=h}t[a]=l}if("short"!==this.strings.form||t[a]||("title"===a?a="title-short":"container-title"===a&&(a="container-title-short")),"year-suffix"===a){r=!0;break}if(p.DATE_VARIABLES.indexOf(a)>-1){if(e.opt.development_extensions.locator_date_and_revision&&"locator-date"===a){r=!0;break}if(t[a]){for(var g in t[a])if((-1!==this.dateparts.indexOf(g)||"literal"===g)&&t[a][g]){r=!0;break}if(r)break}}else{if("locator"===a){n&&n.locator&&(r=!0);break}if("locator-extra"===a){n&&n["locator-extra"]&&(r=!0);break}if(["citation-number","citation-label"].indexOf(a)>-1){r=!0;break}if("first-reference-note-number"===a){n&&n["first-reference-note-number"]&&(r=!0);break}if("hereinafter"===a){e.transform.abbrevs.default.hereinafter[t.id]&&e.sys.getAbbreviation&&t.id&&(r=!0);break}if("object"==typeof t[a])break;if("string"==typeof t[a]&&t[a]){r=!0;break}if("number"==typeof t[a]){r=!0;break}}if(r)break}if(r){for(i=0,o=this.variables_real.length;i<o;i++){"citation-number"===(a=this.variables_real[i])&&"bibliography"===e.tmp.area||(e.tmp.cite_renders_content=!0),e.tmp.group_context.tip.variable_success=!0,e.tmp.can_substitute.value()&&"bibliography"===e.tmp.area&&"string"==typeof t[a]&&(e.tmp.name_node.top=e.output.current.value(),e.tmp.rendered_name.push(t[a]))}e.tmp.can_substitute.replace(!1,p.LITERAL)}else e.tmp.group_context.tip.variable_attempt=!0},this.execs.push(n);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var r=function(t){return function(n,r){var i=n;if(r&&["locator","locator-extra","first-reference-note-number","locator-date"].indexOf(t)>-1&&(i=r),"hereinafter"===t&&e.sys.getAbbreviation&&i.id){if(e.transform.abbrevs.default.hereinafter[i.id])return!0}else if(i[t]){if("number"==typeof i[t]||"string"==typeof i[t])return!0;if("object"==typeof i[t])for(var o in i[t])if(i[t][o])return!0}return!1}},i=0,o=this.variables.length;i<o;i+=1)this.tests.push(r(this.variables[i]))},p.Attributes["@page"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.replace("sub verbo","sub-verbo"),r=function(t){return function(n){var r;return e.processNumber(!1,n,"page",n.type),r=e.tmp.shadow_numbers.page.label?"sub verbo"===e.tmp.shadow_numbers.page.label?"sub-verbo":e.tmp.shadow_numbers.page.label:"page",t===r}},i=0,o=(n=n.split(/\s+/)).length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@number"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(t){return function(n){var r;return e.processNumber(!1,n,"number",n.type),r=e.tmp.shadow_numbers.number.label?e.tmp.shadow_numbers.number.label:"number",t===r}},i=0,o=n.length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@jurisdiction"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=0,i=n.length;r<i;r+=1)n[r]=n[r].split(":");var o=function(e){return function(t){if(!t.jurisdiction)return!1;for(var n=t.jurisdiction.split(":"),r=0,i=n.length;r<i;r+=1)n[r]=n[r].split(":");for(r=e.length;r>0;r+=-1){if(e.slice(0,r).join(":")!==n.slice(0,r).join(":"))return!1}return!0}};for(r=0,i=n.length;r<i;r+=1){var a=n[r].slice();this.tests.push(o(a))}},p.Attributes["@context"]=function(e,t){this.tests||(this.tests=[]);this.tests.push((function(){return["bibliography","citation"].indexOf(t)>-1?e.tmp.area.slice(0,t.length)===t:"alternative"===t?!!e.tmp.abort_alternative:void 0}))},p.Attributes["@has-year-only"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(e){return function(t){var n=t[e];return!(!n||n.month||n.season)}},i=0,o=n.length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@has-to-month-or-season"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(e){return function(t){var n=t[e];return!(!n||!n.month&&!n.season||n.day)}},i=0,o=n.length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@has-day"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(e){return function(t){var n=t[e];return!(!n||!n.day)}},i=0,o=n.length;i<o;i+=1)this.tests.push(r(n[i]))},p.Attributes["@is-plural"]=function(e,t){this.tests||(this.tests=[]);this.tests.push((function(n){var r=n[t];if(r&&r.length){for(var i=0,o=0,a=!1,s=0,l=r.length;s<l;s+=1)e.opt.development_extensions.spoof_institutional_affiliations&&(r[s].literal||r[s].isInstitution&&r[s].family&&!r[s].given)?(o+=1,a=!1):(i+=1,a=!0);if(i>1)return!0;if(o>1)return!0;if(o&&a)return!0}return!1}))},p.Attributes["@locale"]=function(e,t){var n,r,i;this.tests||(this.tests=[]);var o=e.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=t,this.tokentype===p.START){e.opt.multi_layout||(e.opt.multi_layout=[]);var a=[],s=t.split(/\s+/),l={},u=p.localeResolve(s[0],o);a.push(u),u.generic?l[u.generic]=u.best:l[u.best]=u.best;for(var c=1,f=s.length;c<f;c+=1){var d=p.localeResolve(s[c],o);a.push(d),d.generic?l[d.generic]=u.best:l[d.best]=u.best}e[e.build.area].opt.sort_locales.push(l),e.opt.multi_layout.push(a)}e.opt.has_layout_locale=!0}else{i=t.split(/\s+/);var h=[];for(c=0,f=i.length;c<f;c+=1)r=i[c],n=p.localeResolve(r,o),2===i[c].length&&h.push(n.bare),e.localeConfigure(n,!0),i[c]=n;var m=i.slice();this.tests.push(function(t,n,r){return function(i){var o;[],o=!1;var a,s;for(s=i.language?i.language:n,a=p.localeResolve(s,n),c=0,f=t.length;c<f;c+=1)if(a.best===t[c].best){e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=t[0].best,o=!0;break}return!o&&r.indexOf(a.bare)>-1&&(e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=t[0].best,o=!0),o}}(m,o,h))}},p.Attributes["@alternative-node-internal"]=function(e){this.tests||(this.tests=[]);this.tests.push((function(){return!e.tmp.abort_alternative}))},p.Attributes["@locale-internal"]=function(e,t){var n,r,i,o,a;for(this.tests||(this.tests=[]),i=t.split(/\s+/),this.locale_bares=[],o=0,a=i.length;o<a;o+=1)r=i[o],n=p.localeResolve(r,e.opt["default-locale"][0]),2===i[o].length&&this.locale_bares.push(n.bare),e.localeConfigure(n),i[o]=n;this.locale_default=e.opt["default-locale"][0],this.locale=i[0].best,this.locale_list=i.slice();this.tests.push(function(t){return function(n){var i;i=!1;var s=!1;if(n.language&&(r=n.language,(s=p.localeResolve(r,e.opt["default-locale"][0])).best===e.opt["default-locale"][0]&&(s=!1)),s){for(o=0,a=t.locale_list.length;o<a;o+=1)if(s.best===t.locale_list[o].best){e.opt.lang=t.locale,e.tmp.last_cite_locale=t.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=t.locale,i=!0;break}!i&&t.locale_bares.indexOf(s.bare)>-1&&(e.opt.lang=t.locale,e.tmp.last_cite_locale=t.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=t.locale,i=!0)}return i}}(this))},p.Attributes["@court-class"]=function(e,t){this.tests||(this.tests=[]);for(var n=t.split(/\s+/),r=function(t){return function(n){return p.GET_COURT_CLASS(e,n)===t}},i=0,o=n.length;i<o;i++)this.tests.push(r(n[i]))},p.Attributes["@is-parallel"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_condition=t},p.Attributes["@changes-in"]=function(e,t){for(var n=t.split(/\s+/),r=0,i=n.length;r<i;r++)e.opt.parallel.changes_in[n[r]]=!0;this.strings.set_changes_in_condition=n},p.Attributes["@no-repeat"]=function(e,t){e.opt.parallel.no_repeat||(e.opt.parallel.no_repeat={});var n=t.split(/\s+/);e.opt.parallel.enable=!0;for(var r=0,i=n.length;r<i;r++)e.opt.parallel.no_repeat[n[r]]=!0;this.strings.set_no_repeat_condition=n},p.Attributes["@parallel-delimiter-override"]=function(e,t){this.strings.set_parallel_delimiter_override=t},p.Attributes["@require"]=function(e,t){this.strings.require=t},p.Attributes["@reject"]=function(e,t){this.strings.reject=t},p.Attributes["@gender"]=function(e,t){this.gender=t},p.Attributes["@cslid"]=function(e,t){this.cslid=parseInt(t,10)},p.Attributes["@capitalize-if-first"]=function(e,t){this.strings.capitalize_if_first_override=t},p.Attributes["@label-capitalize-if-first"]=function(e,t){this.strings.label_capitalize_if_first_override=t},p.Attributes["@label-form"]=function(e,t){this.strings.label_form_override=t},p.Attributes["@part-separator"]=function(e,t){this.strings["part-separator"]=t},p.Attributes["@leading-noise-words"]=function(e,t){this["leading-noise-words"]=t},p.Attributes["@name-never-short"]=function(e,t){this["name-never-short"]=t},p.Attributes["@class"]=function(e,t){e.opt.class=t},p.Attributes["@version"]=function(e,t){e.opt.version=t},p.Attributes["@value"]=function(e,t){this.strings.value=t},p.Attributes["@name"]=function(e,t){this.strings.name=t},p.Attributes["@form"]=function(e,t){this.strings.form=t},p.Attributes["@date-parts"]=function(e,t){this.strings["date-parts"]=t},p.Attributes["@range-delimiter"]=function(e,t){this.strings["range-delimiter"]=t},p.Attributes["@macro"]=function(e,t){this.postponed_macro=t},p.Attributes["@term"]=function(e,t){this.strings.term="sub verbo"===t?"sub-verbo":t},p.Attributes["@xmlns"]=function(){},p.Attributes["@lang"]=function(e,t){t&&(e.build.lang=t)},p.Attributes["@lingo"]=function(){},p.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0},p.Attributes["@suffix"]=function(e,t){this.strings.suffix=t},p.Attributes["@prefix"]=function(e,t){this.strings.prefix=t},p.Attributes["@delimiter"]=function(e,t){this.strings.delimiter=t},p.Attributes["@match"]=function(e,t){this.match=t},p.Attributes["@names-min"]=function(e,t){var n=parseInt(t,10);e[e.build.area].opt.max_number_of_names<n&&(e[e.build.area].opt.max_number_of_names=n),this.strings["et-al-min"]=n},p.Attributes["@names-use-first"]=function(e,t){this.strings["et-al-use-first"]=parseInt(t,10)},p.Attributes["@names-use-last"]=function(e,t){this.strings["et-al-use-last"]="true"===t},p.Attributes["@sort"]=function(e,t){"descending"===t&&(this.strings.sort_direction=p.DESCENDING)},p.Attributes["@plural"]=function(e,t){"always"===t||"true"===t?this.strings.plural=1:"never"===t||"false"===t?this.strings.plural=0:"contextual"===t&&(this.strings.plural=!1)},p.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0},p.Attributes["@publisher-delimiter-precedes-last"]=function(e,t){this.strings["publisher-delimiter-precedes-last"]=t},p.Attributes["@publisher-delimiter"]=function(e,t){this.strings["publisher-delimiter"]=t},p.Attributes["@publisher-and"]=function(e,t){this.strings["publisher-and"]=t},p.Attributes["@givenname-disambiguation-rule"]=function(e,t){p.GIVENNAME_DISAMBIGUATION_RULES.indexOf(t)>-1&&(e.citation.opt["givenname-disambiguation-rule"]=t)},p.Attributes["@collapse"]=function(e,t){t&&(e[this.name].opt.collapse=t)},p.Attributes["@cite-group-delimiter"]=function(e,t){t&&(e[e.tmp.area].opt.cite_group_delimiter=t)},p.Attributes["@names-delimiter"]=function(e,t){e.setOpt(this,"names-delimiter",t)},p.Attributes["@name-form"]=function(e,t){e.setOpt(this,"name-form",t)},p.Attributes["@subgroup-delimiter"]=function(e,t){this.strings["subgroup-delimiter"]=t},p.Attributes["@subgroup-delimiter-precedes-last"]=function(e,t){this.strings["subgroup-delimiter-precedes-last"]=t},p.Attributes["@name-delimiter"]=function(e,t){e.setOpt(this,"name-delimiter",t)},p.Attributes["@et-al-min"]=function(e,t){var n=parseInt(t,10);e[e.build.area].opt.max_number_of_names<n&&(e[e.build.area].opt.max_number_of_names=n),e.setOpt(this,"et-al-min",n)},p.Attributes["@et-al-use-first"]=function(e,t){e.setOpt(this,"et-al-use-first",parseInt(t,10))},p.Attributes["@et-al-use-last"]=function(e,t){"true"===t?e.setOpt(this,"et-al-use-last",!0):e.setOpt(this,"et-al-use-last",!1)},p.Attributes["@et-al-subsequent-min"]=function(e,t){var n=parseInt(t,10);e[e.build.area].opt.max_number_of_names<n&&(e[e.build.area].opt.max_number_of_names=n),e.setOpt(this,"et-al-subsequent-min",n)},p.Attributes["@et-al-subsequent-use-first"]=function(e,t){e.setOpt(this,"et-al-subsequent-use-first",parseInt(t,10))},p.Attributes["@suppress-min"]=function(e,t){this.strings["suppress-min"]=parseInt(t,10)},p.Attributes["@suppress-max"]=function(e,t){this.strings["suppress-max"]=parseInt(t,10)},p.Attributes["@and"]=function(e,t){e.setOpt(this,"and",t)},p.Attributes["@delimiter-precedes-last"]=function(e,t){e.setOpt(this,"delimiter-precedes-last",t)},p.Attributes["@delimiter-precedes-et-al"]=function(e,t){e.setOpt(this,"delimiter-precedes-et-al",t)},p.Attributes["@initialize-with"]=function(e,t){e.setOpt(this,"initialize-with",t)},p.Attributes["@initialize"]=function(e,t){"false"===t&&e.setOpt(this,"initialize",!1)},p.Attributes["@name-as-reverse-order"]=function(e,t){this["name-as-reverse-order"]=t},p.Attributes["@name-as-sort-order"]=function(e,t){"style-options"===this.name?this["name-as-sort-order"]=t:e.setOpt(this,"name-as-sort-order",t)},p.Attributes["@sort-separator"]=function(e,t){e.setOpt(this,"sort-separator",t)},p.Attributes["@require-match"]=function(e,t){"true"===t&&(this.requireMatch=!0)},p.Attributes["@exclude-types"]=function(e,t){e.bibliography.opt.exclude_types=t.split(/\s+/)},p.Attributes["@exclude-with-fields"]=function(e,t){e.bibliography.opt.exclude_with_fields=t.split(/\s+/)},p.Attributes["@year-suffix-delimiter"]=function(e,t){e[this.name].opt["year-suffix-delimiter"]=t},p.Attributes["@after-collapse-delimiter"]=function(e,t){e[this.name].opt["after-collapse-delimiter"]=t},p.Attributes["@subsequent-author-substitute"]=function(e,t){e[this.name].opt["subsequent-author-substitute"]=t},p.Attributes["@subsequent-author-substitute-rule"]=function(e,t){e[this.name].opt["subsequent-author-substitute-rule"]=t},p.Attributes["@disambiguate-add-names"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-names"]=!0)},p.Attributes["@disambiguate-add-givenname"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-givenname"]=!0)},p.Attributes["@disambiguate-add-year-suffix"]=function(e,t){"true"===t&&"numeric"!==e.opt.xclass&&(e.opt["disambiguate-add-year-suffix"]=!0)},p.Attributes["@second-field-align"]=function(e,t){"flush"!==t&&"margin"!==t||(e[this.name].opt["second-field-align"]=t)},p.Attributes["@hanging-indent"]=function(e,t){"true"===t&&(e.opt.development_extensions.hanging_indent_legacy_number?e[this.name].opt.hangingindent=2:e[this.name].opt.hangingindent=!0)},p.Attributes["@line-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["line-spacing"]=parseFloat(t,10))},p.Attributes["@entry-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["entry-spacing"]=parseFloat(t,10))},p.Attributes["@near-note-distance"]=function(e,t){e[this.name].opt["near-note-distance"]=parseInt(t,10)},p.Attributes["@text-case"]=function(e,t){this.execs.push((function(e,n){"normal"===t?this.text_case_normal=!0:(this.strings["text-case"]=t,"title"===t&&n.jurisdiction&&(this.strings["text-case"]="passthrough"))}))},p.Attributes["@page-range-format"]=function(e,t){e.opt["page-range-format"]=t},p.Attributes["@year-range-format"]=function(e,t){e.opt["year-range-format"]=t},p.Attributes["@default-locale"]=function(e,t){if("style"===this.name){var n,r,i,o,a;if(a=t.match(/-x-(sort|translit|translat)-/g))for(i=0,r=a.length;i<r;i+=1)a[i]=a[i].replace(/^-x-/,"").replace(/-$/,"");for(o=[(n=t.split(/-x-(?:sort|translit|translat)-/))[0]],i=1,r=n.length;i<r;i+=1)o.push(a[i-1]),o.push(n[i]);for(r=(n=o.slice()).length,i=1;i<r;i+=2)e.opt["locale-"+n[i]].push(n[i+1].replace(/^\s*/g,"").replace(/\s*$/g,""));n.length?e.opt["default-locale"]=n.slice(0,1):e.opt["default-locale"]=["en"]}else"true"===t&&(this.default_locale=!0)},p.Attributes["@default-locale-sort"]=function(e,t){e.opt["default-locale-sort"]=t},p.Attributes["@demote-non-dropping-particle"]=function(e,t){e.opt["demote-non-dropping-particle"]=t},p.Attributes["@initialize-with-hyphen"]=function(e,t){"false"===t&&(e.opt["initialize-with-hyphen"]=!1)},p.Attributes["@institution-parts"]=function(e,t){this.strings["institution-parts"]=t},p.Attributes["@if-short"]=function(e,t){"true"===t&&(this.strings["if-short"]=!0)},p.Attributes["@substitute-use-first"]=function(e,t){this.strings["substitute-use-first"]=parseInt(t,10)},p.Attributes["@use-first"]=function(e,t){this.strings["use-first"]=parseInt(t,10)},p.Attributes["@stop-last"]=function(e,t){this.strings["stop-last"]=-1*parseInt(t,10)},p.Attributes["@use-last"]=function(e,t){this.strings["use-last"]=parseInt(t,10)},p.Attributes["@reverse-order"]=function(e,t){"true"===t&&(this.strings["reverse-order"]=!0)},p.Attributes["@display"]=function(e,t){2===e.bibliography.tokens.length&&(e.opt.using_display=!0),this.strings.cls=t},p.Stack=function(e,t){this.mystack=[],(t||e)&&this.mystack.push(e),this.tip=this.mystack[0]},p.Stack.prototype.push=function(e,t){t||e?this.mystack.push(e):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},p.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},p.Stack.prototype.replace=function(e,t){0===this.mystack.length&&p.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+e),this.mystack[this.mystack.length-1]=t||e?e:"",this.tip=this.mystack[this.mystack.length-1]},p.Stack.prototype.pop=function(){var e=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},e},p.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},p.Stack.prototype.length=function(){return this.mystack.length},p.Parallel=function(e){this.state=e},p.Parallel.Partnerships=function(e,t){this.state=e,this.items=t.concat([[{},{}]]),this.partnerMap=null,this.partnerStatus=null,this.repeatMap=null},p.Parallel.Partnerships.prototype.update=function(e){this.items[e][0];var t=this.items[e+1][0];this.partnerStatus=null,this.partnerMap?this.partnerMap[t.id]?this.partnerStatus="mid":(this.partnerMap=null,this.partnerStatus="last"):this._setPartnerMap(e)&&(this.partnerStatus="first")},p.Parallel.Partnerships.prototype.getPartnerStatus=function(e){return this.partnerStatus},p.Parallel.Partnerships.prototype.getID=function(e){return this.items[e][0].id},p.Parallel.Partnerships.prototype._setPartnerMap=function(e){var t=this.items[e][0],n=this.items[e+1][0],r=!1;if(t.seeAlso&&t.seeAlso.indexOf(n.id)>-1){this.partnerMap={};for(var i=0,o=t.seeAlso.length;i<o;i++)this.partnerMap[t.seeAlso[i]]=!0;r=!0}return r},p.Parallel.Partnerships.prototype._getPartnerRepeats=function(e,t){var n=this.items[e][0],r=this.items[e+1][0],i=/(?:type|multi|id|seeAlso|.*-sub|.*-subjoin|.*-main)/,o={};for(var a in this.state.opt.parallel[t])if(n[a]){if(a.match(i))continue;if(!n[a])continue;"string"==typeof n[a]?n[a]===r[a]&&(o[a]=!0):"object"==typeof n[a]&&JSON.stringify(n[a])===JSON.stringify(r[a])&&(o[a]=!0)}return o},p.Parallel.prototype.StartCitation=function(e,t){if(this.parallel_conditional_blobs_list=[],e.length>1)for(var n=new p.Parallel.Partnerships(this.state,e),r=!1,i=0,o=e.length;i<o;i++){n.update(i);var a=n.getPartnerStatus(),s=n.getID(i);"first"===a?(e[i][1].parallel="first",i<o-1&&(e[i+1][1].parallel_repeats=n._getPartnerRepeats(i,"changes_in"),e[i][1].parallel_repeats=e[i+1][1].parallel_repeats),r=s,this.state.registry.registry[r].master=!0,this.state.registry.registry[r].siblings=[]):"mid"===a?(e[i][1].parallel="mid",i<o-1&&(e[i+1][1].parallel_repeats=n._getPartnerRepeats(i,"changes_in")),this.state.registry.registry[r].siblings.push(s),this.state.registry.masterMap[s]=r):"last"===a&&(e[i][1].parallel="last",i<o-1&&(e[i+1][1].parallel_repeats=n._getPartnerRepeats(i,"changes_in")),this.state.registry.registry[r].siblings.push(s),this.state.registry.masterMap[s]=r),this.state.opt.parallel.no_repeat&&i<o-1&&(e[i+1][1].no_repeat_repeats=n._getPartnerRepeats(i,"no_repeat"))}},p.Parallel.prototype.checkRepeats=function(e){var t=!1;if(e.no_repeat_repeats&&e.no_repeat_condition){for(var n=0,r=0,i=e.no_repeat_condition.length;r<i;r++)e.no_repeat_repeats[e.no_repeat_condition[r]]&&(n+=1);n===e.no_repeat_condition.length&&(t=!0)}return t},p.Parallel.prototype.checkParallels=function(e,t){var n=!1;if(e.parallel_result&&e.parallel_condition&&(n=!0,e.parallel_result===e.parallel_condition&&(n=!1),n&&e.changes_in_condition&&e.parallel_repeats)){n=!1;for(var r=0,i=0,o=e.changes_in_condition.length;i<o;i++)e.parallel_repeats[e.changes_in_condition[i]]&&(r+=1);r===e.changes_in_condition.length&&(n=!0)}return n},p.Parallel.prototype.purgeGroupsIfParallel=function(){},p.Util={},p.Util.Match=function(){this.any=function(e,t,n){return function(e,t){for(var r=0,i=n.length;r<i;r+=1){if(n[r](e,t))return!0}return!1}},this.none=function(e,t,n){return function(e,t){for(var r=0,i=n.length;r<i;r+=1){if(n[r](e,t))return!1}return!0}},this.all=function(e,t,n){return function(e,t){for(var r=0,i=n.length;r<i;r+=1){if(!n[r](e,t))return!1}return!0}},this[void 0]=this.all,this.nand=function(e,t,n){return function(e,t){for(var r=0,i=n.length;r<i;r+=1){if(!n[r](e,t))return!0}return!1}}},p.Transform=function(e){function t(t,n,r){var i="";return e.sys.getHumanForm&&("country"===t?i=(i=e.sys.getHumanForm(n.toLowerCase(),!1,!0)).split("|")[0]:"jurisdiction"===t&&(i=e.sys.getHumanForm(n.toLowerCase(),!1,!0),i=r?"":i.split("|").slice(1).join(", "))),i}function n(e,n,r,i,o,a,s){var l,u="",c=p.FIELD_CATEGORY_REMAP[a];if(!c)return o;var f=a,d=o;e.sys.normalizeAbbrevsKey&&(d=e.sys.normalizeAbbrevsKey(a,o));var h=!1;if("jurisdiction"===f&&d&&(h=-1===d.indexOf(":")),e.sys.getAbbreviation){l=["jurisdiction","country","language-name","language-name-original"].indexOf(f)>-1?"default":r.jurisdiction?r.jurisdiction:"default";var m=e.transform.loadAbbreviation(l,c,d,r.type);if(e.transform.abbrevs[m][c]&&d){var g=e.transform.abbrevs[m][c][d];u="short"===n.strings.form&&g?h?"":g:t(f,d,h)}}return u||e.opt.development_extensions.require_explicit_legal_case_title_short&&"legal_case"===r.type||!i||!r[i]||!s||(u=r[i]),u||e.sys.getAbbreviation||!e.sys.getHumanForm||(u=t(f,d,h)),u||h||e.sys.getHumanForm&&"jurisdiction"===f||(u=o),u}function r(t,n){var r,i=e.opt["default-locale"][0].slice(0,2);if(r=e.opt.development_extensions.strict_text_case_locales?new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),t.language){var o=(""+t.language).match(r);i=o?o[1]:"tlh"}return t.multi&&t.multi&&t.multi.main&&t.multi.main[n]&&(i=t.multi.main[n]),e.opt.development_extensions.strict_text_case_locales&&!e.opt.development_extensions.normalize_lang_keys_to_lowercase||(i=i.toLowerCase()),i}function i(t,n,i,o,a,s){var l,u,c,f=a,d=!1;if(!t[n])return{name:"",usedOrig:a,token:p.Util.cloneToken(this)};var h=!1;p.VARIABLES_WITH_SHORT_FORM.indexOf(n)>-1&&s&&(n+="-short",h=!0);var m=!1,g=null,b=[];"-short"===n.slice(-6)?(b.push(n),b.push(n.slice(0,-6))):b.push(n);for(var y=0,v=b.length;y<v;y++){var x=!1;w={name:"",usedOrig:a,locale:r(t,n=b[y])},c=e.opt[i];var _=!1;if("locale-orig"===i)w=a?{name:"",usedOrig:a}:{name:t[n],usedOrig:!1,locale:r(t,n)},_=!0,d=!0;else if(o&&(void 0===c||0===c.length)){var w={name:t[n],usedOrig:!0,locale:r(t,n)};_=!0,d=!0}if(!_){for(var O=0,E=c.length;O<E;O+=1){if(u=(l=c[O]).split(/[\-_]/)[0],l&&t.multi&&t.multi._keys[n]&&t.multi._keys[n][l]){w.name=t.multi._keys[n][l],w.locale=l,_=!0,x=!0,d=!1;break}if(u&&t.multi&&t.multi._keys[n]&&t.multi._keys[n][u]){w.name=t.multi._keys[n][u],w.locale=u,_=!0,x=!0,d=!1;break}}!w.name&&o&&(w={name:t[n],usedOrig:!0,locale:r(t,n)},d=!0)}if(w.token=p.Util.cloneToken(this),0===y?(x&&(w.found_variant_ok=!0),g=w,h||void 0!==c&&0!==c.length||(m=!0),x&&(m=!0)):h||x||!g?x&&(w.found_variant_ok=!0):(w=g,n=b[0]),["title","container-title"].indexOf(n)>-1&&!(f||w.token.strings["text-case"]&&"sentence"!==w.token.strings["text-case"]&&"normal"!==w.token.strings["text-case"])){var k;e.opt.lang;k=!d&&w.locale;var S=n.slice(0,-5),T="sentence"===w.token.strings["text-case"];w.name=p.titlecaseSentenceOrNormal(e,t,S,k,T),delete w.token.strings["text-case"]}if(m)break}return w}function o(t,r,i,o){var a=t.variables[0];if(e.publisherOutput&&i){if(-1===["publisher","publisher-place"].indexOf(a))return!1;e.publisherOutput[a+"-token"]=t,e.publisherOutput.varlist.push(a);var s=i.split(/;\s*/);s.length===e.publisherOutput[a+"-list"].length&&(e.publisherOutput[a+"-list"]=s);for(var l=0,u=s.length;l<u;l+=1)s[l]=n(e,t,r,!1,s[l],o,!0);return e.tmp[a+"-token"]=t,!0}return!1}function a(t){var n=t.match(/^!([-,_a-z]+)>>>/);if(n){var r=n[1].split(",");t=t.slice(n[0].length);for(var i=0,o=r.length;i<o;i+=1)-1===e.tmp.done_vars.indexOf(r[i])&&e.tmp.done_vars.push(r[i])}return t}this.abbrevs={},this.abbrevs.default=new e.sys.AbbreviationSegments,this.getTextSubField=i,this.loadAbbreviation=function(t,n,r,i){return t||(t="default"),r?(e.sys.getAbbreviation&&((t=e.sys.getAbbreviation(e.opt.styleID,e.transform.abbrevs,t,n,r,i,!0))||(t="default")),t):(e.transform.abbrevs[t]||(e.transform.abbrevs[t]=new e.sys.AbbreviationSegments),e.transform.abbrevs[t][n]||(e.transform.abbrevs[t][n]={}),t)},this.quashCheck=a,this.getOutputFunction=function(t,r,s,l){var u,c=p.LangPrefsMap[t[0]];return u=!!c&&e.opt["cite-lang-prefs"][c],function(e,s,f){var d,h,m,g,b,y;if(!t[0]||!s[t[0]]&&!s[l])return null;if(!e.tmp.just_looking&&f&&f["suppress-author"]&&!e.tmp.probably_rendered_something&&e.tmp.can_substitute.length()>1)return null;var v={primary:!1,secondary:!1,tertiary:!1};if("_sort"===e.tmp.area.slice(-5))v.primary="locale-sort";else if(u&&1===u.length&&"locale-orig"===u[0])v.primary="locale-orig",u=!1;else if(u&&!e.tmp.multi_layout)for(var x=["primary","secondary","tertiary"],_=0,w=x.length;_<w&&!(u.length-1<_);_+=1)u[_]&&(v[x[_]]="locale-"+u[_]);else v.primary="locale-orig";if("title-short"!==t[0]&&("bibliography"===e.tmp.area||"citation"===e.tmp.area&&"note"===e.opt.xclass&&f&&!f.position)||(v.secondary=!1,v.tertiary=!1),e.tmp.multi_layout&&(v.secondary=!1,v.tertiary=!1),e.tmp["publisher-list"])return"publisher"===t[0]?e.tmp["publisher-token"]=this:"publisher-place"===t[0]&&(e.tmp["publisher-place-token"]=this),null;var O=i.call(this,s,t[0],v.primary,!0,null,r);d=O.name,h=O.locale;var E,k,S,T=O.token,j=O.usedOrig;if(r&&!O.found_variant_ok&&(d=n(e,T,s,l,d,r,!0))&&(d=a(d)),o(this,s,d,r))return null;if(m=!1,b=!1,v.secondary&&(m=(O=i.call(this,s,t[0],v.secondary,!1,O.usedOrig,null,r)).name,g=O.locale,E=O.token,r&&!O.found_variant_ok&&m&&(m=n(e,E,s,!1,m,r,!0))),v.tertiary&&(b=(O=i.call(this,s,t[0],v.tertiary,!1,O.usedOrig,null,r)).name,y=O.locale,k=O.token,r&&!O.found_variant_ok&&b&&(b=n(e,k,s,!1,b,r,!0))),"locale-translit"===v.primary&&(S=e.opt.citeAffixes[c][v.primary].prefix),"<i>"===S&&"title"===t[0]&&!j){var A=!1;for(_=0,w=T.decorations.length;_<w;_+=1)"@font-style"===T.decorations[_][0]&&"italic"===T.decorations[_][1]&&(A=!0);A||T.decorations.push(["@font-style","italic"])}if("en"!==h&&"title"===T.strings["text-case"]&&(T.strings["text-case"]="passthrough"),"title"===t[0]&&(d=p.demoteNoiseWords(e,d,this["leading-noise-words"])),m||b){if(e.output.openLevel("empty"),T.strings.suffix=T.strings.suffix.replace(/[ .,]+$/,""),e.output.append(d,T),e.tmp.probably_rendered_something=!0,d===m&&(m=!1),m){E.strings.prefix=e.opt.citeAffixes[c][v.secondary].prefix,E.strings.suffix=e.opt.citeAffixes[c][v.secondary].suffix,E.strings.prefix||(E.strings.prefix=" ");for(_=E.decorations.length-1;_>-1;_+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(E.decorations[_].join("/"))>-1&&(E.decorations=E.decorations.slice(0,_).concat(E.decorations.slice(_+1)));"en"!==g&&"title"===E.strings["text-case"]&&(E.strings["text-case"]="passthrough");var P=new p.Token;P.decorations.push(["@font-style","normal"]),P.decorations.push(["@font-weight","normal"]),e.output.openLevel(P),e.output.append(m,E),e.output.closeLevel();e.output.current.value(),e.output.current.value().blobs.length}if(d===b&&(b=!1),b){k.strings.prefix=e.opt.citeAffixes[c][v.tertiary].prefix,k.strings.suffix=e.opt.citeAffixes[c][v.tertiary].suffix,k.strings.prefix||(k.strings.prefix=" ");for(_=k.decorations.length-1;_>-1;_+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(k.decorations[_].join("/"))>-1&&(k.decorations=k.decorations.slice(0,_).concat(k.decorations.slice(_+1)));"en"!==y&&"title"===k.strings["text-case"]&&(k.strings["text-case"]="passthrough");var C=new p.Token;C.decorations.push(["@font-style","normal"]),C.decorations.push(["@font-weight","normal"]),e.output.openLevel(C),e.output.append(b,k),e.output.closeLevel();e.output.current.value(),e.output.current.value().blobs.length}e.output.closeLevel()}else e.output.append(d,T),e.tmp.probably_rendered_something=!0;return null}}},p.Token=function(e,t,n){this.name=e,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=t},p.Util.cloneToken=function(e){var t,n,r;if("string"==typeof e)return e;for(var i in t=new p.Token(e.name,e.tokentype),e.strings)e.strings.hasOwnProperty(i)&&(t.strings[i]=e.strings[i]);if(e.decorations)for(t.decorations=[],n=0,r=e.decorations.length;n<r;n+=1)t.decorations.push(e.decorations[n].slice());return e.variables&&(t.variables=e.variables.slice()),e.execs&&(t.execs=e.execs.slice(),e.tests&&(t.tests=e.tests.slice())),t},p.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},p.Blob=function(e,t,n){var r,i;if(this.levelname=n,t){for(var o in this.strings={prefix:"",suffix:""},t.strings)t.strings.hasOwnProperty(o)&&(this.strings[o]=t.strings[o]);for(this.decorations=[],r=void 0===t.decorations?0:t.decorations.length,i=0;i<r;i+=1)this.decorations.push(t.decorations[i].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];this.blobs="string"==typeof e?e:e?[e]:[],this.alldecor=[this.decorations]},p.Blob.prototype.push=function(e){"string"==typeof this.blobs?p.error("Attempt to push blob onto string object"):!1!==e&&(e.alldecor=e.alldecor.concat(this.alldecor),this.blobs.push(e))},p.NumericBlob=function(e,t,n,r){this.id=r,this.alldecor=[],this.num=t,this.particle=e,this.blobs=t.toString(),this.status=p.START,this.strings={},n?(this.gender=n.gender,this.decorations=n.decorations,this.strings.prefix=n.strings.prefix,this.strings.suffix=n.strings.suffix,this.strings["text-case"]=n.strings["text-case"],this.successor_prefix=n.successor_prefix,this.range_prefix=n.range_prefix,this.splice_prefix=n.splice_prefix,this.formatter=n.formatter,this.formatter||(this.formatter=new p.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))):(this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new p.Output.DefaultFormatter)},p.NumericBlob.prototype.setFormatter=function(e){this.formatter=e,this.type=this.formatter.format(1)},p.Output.DefaultFormatter=function(){},p.Output.DefaultFormatter.prototype.format=function(e){return e.toString()},p.NumericBlob.prototype.checkNext=function(e,t){t?(this.status=p.START,"object"==typeof e&&(e.num===this.num+1?e.status=p.SUCCESSOR:e.status=p.SEEN)):e&&e.num&&this.type===e.type&&e.num===this.num+1?this.status===p.START||this.status===p.SEEN?e.status=p.SUCCESSOR:this.status!==p.SUCCESSOR&&this.status!==p.SUCCESSOR_OF_SUCCESSOR||(this.range_prefix?(e.status=p.SUCCESSOR_OF_SUCCESSOR,this.status=p.SUPPRESS):e.status=p.SUCCESSOR):(this.status===p.SUCCESSOR_OF_SUCCESSOR&&(this.status=p.END),"object"==typeof e&&(e.status=p.SEEN))},p.NumericBlob.prototype.checkLast=function(e){return(this.status===p.SEEN||e.num!==this.num-1&&this.status===p.SUCCESSOR)&&(this.status=p.SUCCESSOR,!0)},p.Util.fixDateNode=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,p,h,m,g=this.cslXml.getAttributeValue(n,"lingo"),b=this.cslXml.getAttributeValue(n,"default-locale");if(this.build.date_key=!0,r=this.cslXml.getAttributeValue(n,"form"),g=b?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(n,"lingo"),!this.getDate(r,b))return e;var y=this.cslXml.getAttributeValue(n,"date-parts");for(var v in i=this.cslXml.getAttributeValue(n,"variable"),c=this.cslXml.getAttributeValue(n,"prefix"),f=this.cslXml.getAttributeValue(n,"suffix"),h=this.cslXml.getAttributeValue(n,"display"),m=this.cslXml.getAttributeValue(n,"cslid"),o=this.cslXml.nodeCopy(this.getDate(r,b)),this.cslXml.setAttribute(o,"lingo",this.opt.lang),this.cslXml.setAttribute(o,"form",r),this.cslXml.setAttribute(o,"date-parts",y),this.cslXml.setAttribute(o,"cslid",m),this.cslXml.setAttribute(o,"variable",i),this.cslXml.setAttribute(o,"default-locale",b),c&&this.cslXml.setAttribute(o,"prefix",c),f&&this.cslXml.setAttribute(o,"suffix",f),h&&this.cslXml.setAttribute(o,"display",h),d=this.cslXml.children(o))a=d[v],"date-part"===this.cslXml.nodename(a)&&(s=this.cslXml.getAttributeValue(a,"name"),b&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(o,"date-part",s,"@default-locale","true"));for(var v in d=this.cslXml.children(n))if(a=d[v],"date-part"===this.cslXml.nodename(a))for(l in s=this.cslXml.getAttributeValue(a,"name"),p=this.cslXml.attributes(a))"@name"!==l&&(g&&g!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(l)>-1||(u=p[l],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(o,"date-part",s,l,u)));if("year"===this.cslXml.getAttributeValue(n,"date-parts"))this.cslXml.deleteNodeByNameAttribute(o,"month"),this.cslXml.deleteNodeByNameAttribute(o,"day");else if("year-month"===this.cslXml.getAttributeValue(n,"date-parts"))this.cslXml.deleteNodeByNameAttribute(o,"day");else if("month-day"===this.cslXml.getAttributeValue(n,"date-parts")){for(var x=this.cslXml.children(o),_=1,w=this.cslXml.numberofnodes(x);_<w;_++)if("year"===this.cslXml.getAttributeValue(x[_],"name")){this.cslXml.setAttribute(x[_-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(o,"year")}return this.cslXml.insertChildNodeAfter(e,n,t,o)},p.dateMacroAsSortKey=function(e,t){p.dateAsSortKey.call(this,e,t,!0)},p.dateAsSortKey=function(e,t,n){var r,i,o,a,s,l,u,c=this.variables[0],f="empty";for(n&&e.tmp.extension&&(f="macro-with-date"),void 0===(r=t[c])&&((r={"date-parts":[[0]]}).year||(e.tmp.empty_date=!0)),void 0===this.dateparts&&(this.dateparts=["year","month","day"]),r.raw?r=e.fun.dateparser.parseDateToArray(r.raw):r["date-parts"]&&(r=e.dateParseArray(r)),void 0===r&&(r={}),l=0,u=p.DATE_PARTS_INTERNAL.length;l<u;l+=1)if(o=0,"_end"===(a=i=p.DATE_PARTS_INTERNAL[l]).slice(-4)&&(a=a.slice(0,-4)),r[i]&&this.dateparts.indexOf(a)>-1&&(o=r[i]),"year"===i.slice(0,4)){var d="Y";"-"===(s=p.Util.Dates[a].numeric(e,o))[0]&&(d="X",s=s.slice(1),s=9999-parseInt(s,10)),e.output.append(p.Util.Dates[i.slice(0,4)].numeric(e,d+s),f)}else(o=p.Util.Dates[a]["numeric-leading-zeros"](e,o))||(o="00"),e.output.append(o,f)},p.Engine.prototype.dateParseArray=function(e){var t,n,r,i;for(n in t={},e)if("date-parts"===n){(r=e["date-parts"]).length>1&&r[0].length!==r[1].length&&p.error("CSL data error: element mismatch in date range input."),i=["","_end"];for(var o=0,a=r.length;o<a;o+=1)for(var s=0,l=p.DATE_PARTS.length;s<l;s+=1)isNaN(parseInt(r[o][s],10))?t[p.DATE_PARTS[s]+i[o]]=void 0:t[p.DATE_PARTS[s]+i[o]]=parseInt(r[o][s],10)}else e.hasOwnProperty(n)&&("literal"===n&&"object"==typeof e.literal&&"string"==typeof e.literal.part?(p.debug("Warning: fixing up weird literal date value"),t.literal=e.literal.part):t[n]=e[n]);return t},p.Util.Names={},p.Util.Names.compareNamesets=p.NameOutput.prototype._compareNamesets,p.Util.Names.unInitialize=function(e,t){var n,r,i,o,a;if(!t)return"";for(i=t.split(/(?:\-|\s+)/),o=t.match(/(\-|\s+)/g),a="",n=0,r=i.length;n<r;n+=1)a+=i[n],n<r-1&&(a+=o[n]);return a},p.Util.Names.initializeWith=function(e,t,n,r){var i,o,a;if(!t)return"";if(n||(n=""),["Lord","Lady"].indexOf(t)>-1||!t.match(p.STARTSWITH_ROMANESQUE_REGEXP)&&!n.match("%s"))return t;var s=t;!1===e.opt["initialize-with-hyphen"]&&(s=s.replace(/\-/g," "));for(var l=(s=(s=s.replace(/\s*\-\s*/g,"-").replace(/\s+/g," ")).replace(/-([a-z])/g,"–$1")).length-2;l>-1;l+=-1)"."===s.slice(l,l+1)&&" "!==s.slice(l+1,l+2)&&(s=s.slice(0,l)+". "+s.slice(l+1));if(o=s.match(/[\-\s]+/g),a=s.split(/[\-\s]+/),null===o){var u=a[0].match(/[^\.]+$/);u&&1===u[0].length&&u[0]!==u[0].toLowerCase()&&(a[0]+=".")}if(0===a.length)s=o;else for(s=[a[0]],l=1,i=a.length;l<i;l+=1)s.push(o[l-1]),s.push(a[l]);return a=s,(r?p.Util.Names.doNormalize(e,a,n):p.Util.Names.doInitialize(e,a,n)).replace(/\u2013([a-z])/g,"-$1")},p.Util.Names.doNormalize=function(e,t,n){var r,i;n=n||"";var o=[];for(r=0,i=t.length;r<i;r+=1)t[r].length>1&&"."===t[r].slice(-1)?(t[r]=t[r].slice(0,-1),o.push(!0)):1===t[r].length&&t[r].toUpperCase()===t[r]?o.push(!0):o.push(!1);for(r=0,i=t.length;r<i;r+=2)o[r]&&(r<t.length-2&&(t[r+1]="",o[r+2]||(t[r+1]=" "),t[r+2].length>1?t[r]=t[r]+n.replace(/\ufeff$/,""):t[r]=t[r]+n),r===t.length-1&&(t[r]=t[r]+n));return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},p.Util.Names.doInitialize=function(e,t,n){var r,i,o,a,s,l,u;for(r=0,i=t.length;r<i;r+=2)if(u=t[r])if(!(o=u.match(p.NAME_INITIAL_REGEXP))&&!u.match(p.STARTSWITH_ROMANESQUE_REGEXP)&&u.length>1&&n.match("%s")&&(o=u.match(/(.)(.*)/)),o&&o[2]&&o[3]&&(o[1]=o[1]+o[2],o[2]=""),o&&o[1].slice(0,1)===o[1].slice(0,1).toUpperCase()){var c="";if(o[2]){var f="";for(a=0,s=(l=o[2].split("")).length;a<s;a+=1){var d=l[a];if(d!==d.toUpperCase())break;f+=d}f.length<o[2].length&&(c=f.toLocaleLowerCase())}t[r]=o[1]+c,r<i-1?n.match("%s")?t[r]=n.replace("%s",t[r]):t[r+1].indexOf("-")>-1?t[r+1]=n+t[r+1]:t[r+1]=n:n.match("%s")?t[r]=n.replace("%s",t[r]):t.push(n)}else!u.match(p.ROMANESQUE_REGEXP)||o&&o[3]||(t[r]=" "+u);var h=t.join("");return h=h.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},p.Util.Names.getRawName=function(e){var t=[];return e.literal?t.push(e.literal):(e.given&&t.push(e.given),e.family&&t.push(e.family)),t.join(" ")},p.Util.Dates={},p.Util.Dates.year={},p.Util.Dates.year.long=function(e,t){return t||(t="boolean"==typeof t?"":0),t.toString()},p.Util.Dates.year.imperial=function(e,t,n){var r="";t||(t="boolean"==typeof t?"":0),n=n?"_end":"";var i=e.tmp.date_object["month"+n];for(i=i?""+i:"1";i.length<2;)i="0"+i;var o=e.tmp.date_object["day"+n];for(o=o?""+o:"1";o.length<2;)o="0"+o;var a,s,l=parseInt(t+i+o,10);if(l>=18680908&&l<19120730?(a="明治",s=1867):l>=19120730&&l<19261225?(a="大正",s=1911):l>=19261225&&l<19890108?(a="昭和",s=1925):l>=19890108&&(a="平成",s=1988),a&&s){var u=a;e.sys.normalizeAbbrevsKey&&(u=e.sys.normalizeAbbrevsKey("number",a)),e.transform.abbrevs.default.number[u]||e.transform.loadAbbreviation("default","number",u),e.transform.abbrevs.default.number[u]&&(a=e.transform.abbrevs.default.number[u]),r=a+(t-s)}return r},p.Util.Dates.year.short=function(e,t){if((t=t.toString())&&4===t.length)return t.substr(2)},p.Util.Dates.year.numeric=function(e,t){var n,r;for((r=(t=""+t).match(/([0-9]*)$/))?(n=t.slice(0,-1*r[1].length),t=r[1]):(n=t,t="");t.length<4;)t="0"+t;return n+t},p.Util.Dates.normalizeMonth=function(e,t){var n;if(e||(e=0),(e=""+e).match(/^[0-9]+$/)||(e=0),e=parseInt(e,10),t){var r={stub:"month-",num:e};if(r.num<1||r.num>24)r.num=0;else{for(;r.num>16;)r.num=r.num-4;r.num>12&&(r.stub="season-",r.num=r.num-12)}n=r}else(e<1||e>12)&&(e=0),n=e;return n},p.Util.Dates.month={},p.Util.Dates.month.numeric=function(e,t){return(t=p.Util.Dates.normalizeMonth(t))||(t=""),t},p.Util.Dates.month["numeric-leading-zeros"]=function(e,t){if(t=p.Util.Dates.normalizeMonth(t))for(t=""+t;t.length<2;)t="0"+t;else t="";return t},p.Util.Dates.month.long=function(e,t,n,r){var i=p.Util.Dates.normalizeMonth(t,!0);if(t=i.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(i.stub+t,"long",0,0,!1,r)}else t="";return t},p.Util.Dates.month.short=function(e,t,n,r){var i=p.Util.Dates.normalizeMonth(t,!0);if(t=i.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(i.stub+t,"short",0,0,!1,r)}else t="";return t},p.Util.Dates.day={},p.Util.Dates.day.numeric=function(e,t){return t.toString()},p.Util.Dates.day.long=p.Util.Dates.day.numeric,p.Util.Dates.day["numeric-leading-zeros"]=function(e,t){for(t||(t=0),t=t.toString();t.length<2;)t="0"+t;return t.toString()},p.Util.Dates.day.ordinal=function(e,t,n){return e.fun.ordinalizer.format(t,n)},p.Util.Sort={},p.Util.Sort.strip_prepositions=function(e){var t;return"string"==typeof e&&(t=e.toLocaleLowerCase(),t=e.match(/^((a|an|the)\s+)/)),t&&(e=e.substr(t[1].length)),e},p.Util.substituteStart=function(e,t){var n,r,i,o,a,s,l;o=function(e,t,n){n&&n.parallel&&(e.tmp.group_context.tip.parallel_result=n.parallel),n&&n.parallel_repeats&&(e.tmp.group_context.tip.parallel_repeats=n.parallel_repeats),n&&n.no_repeat_repeats&&(e.tmp.group_context.tip.no_repeat_repeats=n.no_repeat_repeats);for(var r=0,i=this.decorations.length;r<i;r+=1)if("@strip-periods"===this.decorations[r][0]&&"true"===this.decorations[r][1]){e.tmp.strip_periods+=1;break}},this.execs.push(o),this.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),l=["number","date","names"],("text"===this.name&&!this.postponed_macro||l.indexOf(this.name)>-1)&&(n=function(e,t,n){"author"===e.tmp.element_trace.value()||"names"===this.name?(!e.tmp.just_looking&&n&&n["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"),!e.tmp.just_looking&&n&&n["suppress-author"]&&(e.tmp.probably_rendered_something||e.tmp.element_trace.push("suppress-me"))):"date"===this.name?!e.tmp.just_looking&&n&&n["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"):!e.tmp.just_looking&&n&&n["author-only"]&&"intext"!==e.tmp.area?!e.tmp.probably_rendered_something&&e.tmp.can_block_substitute||e.tmp.element_trace.push("suppress-me"):n&&n["suppress-author"]&&e.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(n)),r=this.strings.cls,this.strings.cls=!1,0===e.build.render_nesting_level&&("bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]?((i=new p.Token("group",p.START)).decorations=[["@display","left-margin"]],o=function(e,t){e.tmp.render_seen||(i.strings.first_blob=t.id,e.output.startTag("bib_first",i))},i.execs.push(o),t.push(i)):p.DISPLAY_CLASSES.indexOf(r)>-1&&((i=new p.Token("group",p.START)).decorations=[["@display",r]],o=function(e,t){i.strings.first_blob=t.id,e.output.startTag("bib_first",i)},i.execs.push(o),t.push(i)),e.build.cls=r),e.build.render_nesting_level+=1,1===e.build.substitute_level.value()&&(a=new p.Token("choose",p.START),p.Node.choose.build.call(a,e,t),o=function(){return!!e.tmp.can_substitute.value()},(s=new p.Token("if",p.START)).tests||(s.tests=[]),s.tests.push(o),s.test=e.fun.match.any(this,e,s.tests),t.push(s)),e.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(o=function(e,t,n){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){var r=new p.Token("text",p.START);r.decorations=[["@showid","true"]],e.output.startTag("variable_entry",r);var i=null;n&&(i=n.position),i||(i=0);var o=0;n&&n.noteIndex&&(o=n.noteIndex);var a=0;n&&n["first-reference-note-number"]&&(a=n["first-reference-note-number"]);var s=0;n&&n["citation-number"]&&(s=n["citation-number"]);var l=0;n&&n.index&&(l=n.index);var u={itemData:t,variableNames:this.variables,context:e.tmp.area,xclass:e.opt.xclass,position:["first","subsequent","ibid","ibid-with-locator"][i],"note-number":o,"first-reference-note-number":a,"citation-number":s,index:l,mode:e.opt.mode};e.output.current.value().params=u}},this.execs.push(o))},p.Util.substituteEnd=function(e,t){var n,r,i,o,a,s;e.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(n=function(e){e.tmp.just_looking||e.tmp.suppress_decorations||e.output.endTag("variable_entry")},this.execs.push(n)),n=function(e){for(var t=0,n=this.decorations.length;t<n;t+=1)if("@strip-periods"===this.decorations[t][0]&&"true"===this.decorations[t][1]){e.tmp.strip_periods+=-1;break}},this.execs.push(n),e.build.render_nesting_level+=-1,0===e.build.render_nesting_level&&(e.build.cls?(n=function(e){e.output.endTag("bib_first")},this.execs.push(n),e.build.cls=!1):"bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]&&(n=function(e){e.tmp.render_seen||e.output.endTag("bib_first")},(r=new p.Token("group",p.END)).execs.push(n),t.push(r),(i=new p.Token("group",p.START)).decorations=[["@display","right-inline"]],n=function(e){e.tmp.render_seen||(e.tmp.render_seen=!0,e.output.startTag("bib_other",i))},i.execs.push(n),t.push(i))),1===e.build.substitute_level.value()&&(o=new p.Token("if",p.END),t.push(o),a=new p.Token("choose",p.END),p.Node.choose.build.call(a,e,t)),("names"===this.name||"text"===this.name&&"title"!==this.variables_real)&&(new p.Token("text",p.SINGLETON),n=function(e,t){if("bibliography"===e.tmp.area&&"string"==typeof e.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||t[this.variables_real])&&e.tmp.substituted_variable===this.variables_real){var n,r,i=e.bibliography.opt["subsequent-author-substitute-rule"];if(!e.tmp.suppress_decorations&&e.tmp.subsequent_author_substitute_ok&&e.tmp.rendered_name){if("partial-each"===i||"partial-first"===i){var o=!0,a=[];for(n=0,r=e.tmp.name_node.children.length;n<r;n+=1){var l=e.tmp.rendered_name[n];o&&e.tmp.last_rendered_name&&e.tmp.last_rendered_name.length>n-1&&l&&!l.localeCompare(e.tmp.last_rendered_name[n])?(s=new p.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[n].blobs=[s],"partial-first"===i&&(o=!1)):o=!1,a.push(l)}e.tmp.last_rendered_name=a}else if("complete-each"===i){if(a=e.tmp.rendered_name.join(",")){if(e.tmp.last_rendered_name&&!a.localeCompare(e.tmp.last_rendered_name))for(n=0,r=e.tmp.name_node.children.length;n<r;n+=1)s=new p.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[n].blobs=[s];e.tmp.last_rendered_name=a}}else{(a=e.tmp.rendered_name.join(","))&&(e.tmp.last_rendered_name&&!a.localeCompare(e.tmp.last_rendered_name)&&(s=new p.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.label_blob?e.tmp.name_node.top.blobs=[s,e.tmp.label_blob]:e.tmp.name_node.top.blobs.length?e.tmp.name_node.top.blobs[0].blobs=[s]:e.tmp.name_node.top.blobs=[s],e.tmp.substituted_variable=this.variables_real),e.tmp.last_rendered_name=a)}e.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(n)),("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(n=function(e,t){e.tmp.element_trace.mystack.length>1&&e.tmp.element_trace.pop()},this.execs.push(n))},p.Util.padding=function(e){var t=e.match(/\s*(-{0,1}[0-9]+)/);if(t)for((e=parseInt(t[1],10))<0&&(e=1e20+e),e=""+e;e.length<20;)e="0"+e;return e},p.Util.LongOrdinalizer=function(){},p.Util.LongOrdinalizer.prototype.init=function(e){this.state=e},p.Util.LongOrdinalizer.prototype.format=function(e,t){e<10&&(e="0"+e);var n=p.Engine.getField(p.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+e,"long",0,t);return n||(n=this.state.fun.ordinalizer.format(e,t)),this.state.tmp.cite_renders_content=!0,n},p.Util.Ordinalizer=function(e){this.state=e,this.suffixes={}},p.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var e=0;e<3;e+=1){var t=[void 0,"masculine","feminine"][e];this.suffixes[this.state.opt.lang][t]=[];for(var n=1;n<5;n+=1){var r=this.state.getTerm("ordinal-0"+n,"long",!1,t);if(void 0===r){delete this.suffixes[this.state.opt.lang][t];break}this.suffixes[this.state.opt.lang][t].push(r)}}}},p.Util.Ordinalizer.prototype.format=function(e,t){var n;n=""+(e=parseInt(e,10));var r="",i=[];if(t&&i.push(t),i.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){var o;r=this.state.getTerm("ordinal",!1,0,t);for(var a=0,s=i.length;a<s;a+=1){o=i[a];var l=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(l["whole-number"][n]&&l["whole-number"][n][o]?r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][n][o],!1,0,t):l["last-two-digits"][n.slice(n.length-2)]&&l["last-two-digits"][n.slice(n.length-2)][o]?r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][n.slice(n.length-2)][o],!1,0,t):l["last-digit"][n.slice(n.length-1)]&&l["last-digit"][n.slice(n.length-1)][o]&&(r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][n.slice(n.length-1)][o],!1,0,t)),r)break}}else t||(t=void 0),this.state.fun.ordinalizer.init(),r=e/10%10==1||e>10&&e<20?this.suffixes[this.state.opt.lang][t][3]:e%10==1&&e%100!=11?this.suffixes[this.state.opt.lang][t][0]:e%10==2&&e%100!=12?this.suffixes[this.state.opt.lang][t][1]:e%10==3&&e%100!=13?this.suffixes[this.state.opt.lang][t][2]:this.suffixes[this.state.opt.lang][t][3];return n=n+=r},p.Util.Romanizer=function(){},p.Util.Romanizer.prototype.format=function(e){var t,n,r,i,o;if(t="",e<6e3)for((i=e.toString().split("")).reverse(),n=0,r=0,o=i.length,n=0;n<o;n+=1)r=parseInt(i[n],10),t=p.ROMAN_NUMERALS[n][r]+t;return t},p.Util.Suffixator=function(e){e||(e=p.SUFFIX_CHARS),this.slist=e.split(",")},p.Util.Suffixator.prototype.format=function(e){var t;e+=1;var n="";do{t=e%26==0?26:e%26;n=this.slist[t-1]+n;e=(e-t)/26}while(0!==e);return n},p.Engine.prototype.processNumber=function(e,t,n){var r,i=this,o=",\\s+and\\s+|\\s+and\\s+";"en"!==this.opt.lang.slice(0,2)&&(o+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+");var a=new RegExp("^\\s*&\\s*$"),s=new RegExp("(\\s*&\\s*|"+o+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),l=new RegExp("(?:\\s*&\\s*|"+o+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*|\\s*&\\s*)"),u=this.getTerm("and"),c=this.getTerm("and","symbol");function f(e,t,r,i){i=i||"";var o={};if(t||p.STATUTE_SUBDIV_STRINGS_REVERSE[n]||(t="var:"+n),t){var a=t.match(/(\s*)([^\s]+)(\s*)/);o.label=a[2],o.origLabel=e,o.labelSuffix=a[3]?a[3]:"",o.plural=0,o.labelVisibility=!1}return(a=r.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/))?(o.particle=a[1]?a[1]:"",o.value=a[2]):(o.particle="",o.value=r),o.joiningSuffix=i.replace(/\s*-\s*/,"-"),o}function d(e,t,n){var r=e[n.pos],i=e[t].value,o="\\-"===r.joiningSuffix;i.particle&&i.particle!==r.particle&&(n.collapsible=!1);var a=i.match(/^[0-9]+([-,:a-zA-Z]*)$/),s=r.value.match(/^[0-9]+([-,:a-zA-Z]*)$/);if(i&&a&&s&&!o||(n.collapsible=!1,i&&s||(n.numeric=!1),o&&n.count--),(a&&a[1]||s&&s[1])&&(n.collapsible=!1),void 0===e[t].collapsible){for(var l=t,u=t+n.count;l<u;l++)isNaN(parseInt(e[l].value))&&!e[l].value.match(/^[ivxlcmIVXLCM]+$/)?e[l].collapsible=!1:e[l].collapsible=!0;n.collapsible=e[t].collapsible}var c=n.collapsible;for(l=n.pos,u=n.pos+n.count;l<u;l++)n.count>1&&c&&(e[l].plural=1),e[l].numeric=n.numeric,e[l].collapsible=n.collapsible}function h(e,t,r){"var:"!==r.label.slice(0,4)&&(0===r.pos?(["locator","number","locator-extra"].indexOf(n)>-1&&(i.getTerm(p.STATUTE_SUBDIV_STRINGS[r.label])||(e[r.pos].labelVisibility=!0)),-1===["locator","number","locator-extra"].indexOf(n)&&p.STATUTE_SUBDIV_STRINGS[r.label]!==n&&(e[0].labelVisibility=!0)):e[r.pos].labelVisibility=!0)}function m(e){return e.replace("\\-","-")}function g(t){var n=p.Util.cloneToken(e),r=new p.Token;i.tmp.just_looking||(r.decorations=n.decorations,n.decorations=[],r.strings.prefix=n.strings.prefix,n.strings.prefix="",r.strings.suffix=n.strings.suffix,n.strings.suffix="");var o=t.length?t[0].label:null;if(t.length){for(var a=0,s=t.length;a<s;a++){var l=t[a],u=p.Util.cloneToken(n);u.gender=e.gender,o===l.label&&(u.formatter=e.formatter),l.numeric&&(u.successor_prefix=l.successor_prefix),u.strings.suffix=u.strings.suffix+m(l.joiningSuffix),l.styling=u}i.tmp.just_looking||'"'===t[0].value.slice(0,1)&&'"'===t[t.length-1].value.slice(-1)&&(t[0].value=t[0].value.slice(1),t[t.length-1].value=t[t.length-1].value.slice(0,-1),r.decorations.push(["@quotes",!0]))}return r}function b(e,t){return"page"===e||["locator","locator-extra"].indexOf(e)>-1&&(["p."].indexOf(t.label)>-1||["p."].indexOf(t.origLabel)>-1)}function y(e,t,n,r){var o=b(e,t);return function(e,t){var n,r=!0;return["locator","locator-extra"].indexOf(e)>-1&&(n=t.origLabel?t.origLabel:t.label,r=!!i.getTerm(p.STATUTE_SUBDIV_STRINGS[n])),r}(e,t)&&"-"===n&&r&&((o||["locator","locator-extra","issue","volume","edition","number"].indexOf(e)>-1)&&((n=i.getTerm("page-range-delimiter"))||(n="–")),"collection-number"===e&&((n=i.getTerm("year-range-delimiter"))||(n="–"))),n}function v(e,t,r){if(!(t<1)&&2===r.count&&e[t-1].particle===e[t].particle)if("-"===e[t-1].joiningSuffix)if(!i.opt["page-range-format"]&&parseInt(e[t-1].value,10)>parseInt(e[t].value,10))e[t-1].joiningSuffix=y(n,e[t],e[t-1].joiningSuffix,!0);else{var o,a=e[t];!b(n,a)||isNaN(parseInt(e[t-1].value))||isNaN(parseInt(e[t].value))?((""+e[t-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+e[t].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(e[t-1].joiningSuffix=i.getTerm("page-range-delimiter")),o=e[t-1].value+m(e[t-1].joiningSuffix)+e[t].value):(o=e[t-1].particle+e[t-1].value+" - "+e[t].particle+e[t].value,o=i.fun.page_mangler(o));var s=o.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);if(s){var l=s[3];l=y(n,a,l,e[t].numeric),e[t-1].particle=s[1],e[t-1].value=s[2],e[t-1].joiningSuffix=l,e[t].particle=s[4],e[t].value=s[5]}r.count=0}else r.count=1}function x(t){if(e&&-1!==["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(n)){for(var r={count:0,label:null,lastHadRangeDelimiter:!1},i=0,o=t.length;i<o;i++){var a=t[i];if(a.collapsible)r.label===a.label&&"-"===a.joiningSuffix?r.count=1:r.label===a.label&&"-"!==a.joiningSuffix?(r.count++,2===r.count&&v(t,i,r)):r.label!==a.label?(r.label=a.label,r.count=1):(r.count=1,r.label=a.label);else{r.count=0,r.label=null;var s=a.numeric;a.joiningSuffix=y(n,a,a.joiningSuffix,s)}}2===r.count&&v(t,t.length-1,r)}}if(u===c&&(c="&"),e&&this.tmp.shadow_numbers[n]&&this.tmp.shadow_numbers[n].values.length)return x(E=this.tmp.shadow_numbers[n].values),void(this.tmp.shadow_numbers[n].masterStyling=g(E));if(this.tmp.shadow_numbers[n]||(this.tmp.shadow_numbers[n]={values:[]}),t){var _=p.LangPrefsMap[n];if(_){var w=this.opt["cite-lang-prefs"][_][0];r=(r=this.transform.getTextSubField(t,n,"locale-"+w,!0)).name}else r=t[n];if(r&&this.sys.getAbbreviation){var O=this.transform.loadAbbreviation(t.jurisdiction,"number",r);this.transform.abbrevs[O].number&&(this.transform.abbrevs[O].number[r]?r=this.transform.abbrevs[O].number[r]:void 0!==this.transform.abbrevs[O].number[r]&&delete this.transform.abbrevs[O].number[r])}if(void 0!==r&&("string"==typeof r||"number"==typeof r)){"number"==typeof r&&(r=""+r);var E,k=p.STATUTE_SUBDIV_STRINGS_REVERSE[n];if(!this.tmp.shadow_numbers.values)!function(e){for(var t=0,n=e.length-1;t<n;t++)!e[t].joiningSuffix&&e[t+1].label&&(e[t].joiningSuffix=" ")}(E=function(e,r){r=r||"";var o=[];if(y=(e=function(e){var r=(e=e.trim()).match(/^([^ ]+)/);if(r&&!p.STATUTE_SUBDIV_STRINGS[r[1]]){var i=null;(i=["locator","locator-extra"].indexOf(n)>-1?t.label?p.STATUTE_SUBDIV_STRINGS_REVERSE[t.label]:"p.":p.STATUTE_SUBDIV_STRINGS_REVERSE[n])&&(e=i+" "+e)}return e}(e)).match(s)){for(var u=0,d=y.length;u<d;u++)y[u].match(a)&&(y[u]=" "+c+" ");var h=e.split(l);for(var u in h)if((""+h[u]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;for(u=0,d=h.length-1;u<d;u++)o.push(h[u]),o.push(y[u]);o.push(h[h.length-1]),o=function(e){for(var t=e.length-2;t>-1;t-=2)"-"===e[t]&&e[t-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&e[t+1].match(/^[,a-zA-Z]+$/)&&(e[t-1]=e.slice(t-1,t+2).join(""),e=e.slice(0,t).concat(e.slice(t+2)));return e}(o)}else o=[e];var m=[],g=r,b="";for(u=0,d=o.length;u<d;u+=2){var y;if(y=o[u].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])(?:\.| ) *)/g)){for(var v=(h=o[u].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])(?:\.| ) *)/)).length-1;v>0;v--)!h[v-1]||h[v].match(/^[0-9]+([-;,:a-zA-Z]*)$/)&&h[v-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||(h[v-1]=h[v-1]+y[v-1]+h[v],h=h.slice(0,v).concat(h.slice(v+1)),y=y.slice(0,v-1).concat(y.slice(v)));if(y.length>0){var x=y[0].trim();!p.STATUTE_SUBDIV_STRINGS[x]||!i.getTerm(p.STATUTE_SUBDIV_STRINGS[x])||-1===["locator","number","locator-extra"].indexOf(n)&&p.STATUTE_SUBDIV_STRINGS[x]!==n?0===u&&(y=y.slice(1),h[0]=h[0]+" "+x+" "+h[1],h=h.slice(0,1).concat(h.slice(2))):b=x}v=0;for(var _=h.length;v<_;v++){if(h[v]||v===h.length-1)w=b===(g=y[v-1]?y[v-1]:g).trim()?"":b,e=h[v]?h[v].trim():"",v===h.length-1?m.push(f(w,g,e,o[u+1])):m.push(f(w,g,e))}}else{var w;w=b===g.trim()?"":b,m.push(f(w,g,o[u],o[u+1]))}}return m}(r,k)),function(e){if(0!==e.length){for(var r=0,i=1,o=1,a=e.length;o<a;o++){var s=e[o-1],l=e[o];if(s.label===l.label&&s.particle==s.particle)i++;else(u=JSON.parse(JSON.stringify(e[r]))).pos=r,u.count=i,u.numeric=!0,d(e,r,u),s.label!==l.label&&h(e,0,u),r=o,i=1}var u;(u=JSON.parse(JSON.stringify(e[r]))).pos=r,u.count=i,u.numeric=!0,d(e,r,u),h(e,0,u),e.length&&e[0].numeric&&"number-of-"===n.slice(0,10)&&parseInt(t[n],10)>1&&(e[0].plural=1)}}(E),this.tmp.shadow_numbers[n].values=E;e&&(x(E),this.tmp.shadow_numbers[n].masterStyling=g(E)),function(e,t,n){var r=e[t];n.length&&(r.numeric=n[0].numeric,r.collapsible=n[0].collapsible,r.plural=n[0].plural,r.label=p.STATUTE_SUBDIV_STRINGS[n[0].label],"number"===t&&"issue"===r.label&&i.getTerm("number")&&(r.label="number"))}(this.tmp.shadow_numbers,n,E)}}},p.Util.outputNumericField=function(e,t,n){e.output.openLevel(e.tmp.shadow_numbers[t].masterStyling);var r,i=e.tmp.shadow_numbers[t].values,o=i.length?i[0].label:null,a=e.tmp.shadow_numbers[t].labelForm;r=a||"short";for(var s=e.tmp.shadow_numbers[t].labelCapitalizeIfFirst,l=e.tmp.shadow_numbers[t].labelDecorations,u=null,c=0,f=i.length;c<f;c++){var d,h=i[c],m="";h.label&&(d="var:"===h.label.slice(0,4)?h.label.slice(4):p.STATUTE_SUBDIV_STRINGS[h.label])&&(m=h.label===o?e.getTerm(d,a,h.plural):e.getTerm(d,r,h.plural),s&&(m=p.Output.Formatters["capitalize-first"](e,m)));var g=-1;m&&(g=m.indexOf("%s"));var b,y=p.Util.cloneToken(h.styling);if(y.formatter=h.styling.formatter,y.type=h.styling.type,y.num=h.styling.num,y.gender=h.styling.gender,g>0&&g<m.length-2)y.strings.prefix+=m.slice(0,g),y.strings.suffix=m.slice(g+2)+y.strings.suffix;else if(h.labelVisibility)if(m||(m=h.label,d=h.label),g>0){var v=new p.Token;v.decorations=l,e.output.append(m.slice(0,g),v)}else g!==m.length-2&&-1!==g||e.output.append(m+h.labelSuffix,"empty");if(h.collapsible)void 0===(b=h.value.match(/^[1-9][0-9]*$/)?new p.NumericBlob(h.particle,parseInt(h.value,10),y,n):new p.NumericBlob(h.particle,h.value,y,n)).gender&&(b.gender=e.locale[e.opt.lang]["noun-genders"][t]),e.output.append(b,"literal");else e.output.append(h.particle+h.value,y);if(0===g&&g<m.length-2&&(null===u&&(u=d),d!==u||c===i.length-1)){var x=new p.Token;x.decorations=l,e.output.append(m.slice(g+2),x)}u=d,e.tmp.term_predecessor=!0}e.output.closeLevel()},p.Util.PageRangeMangler={},p.Util.PageRangeMangler.getFunction=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,p,h,m,g,b,y,v=e.getTerm(t+"-range-delimiter");n=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,o=function(n){for(i=n.length,r=1;r<i;r+=2)"object"==typeof n[r]&&(n[r]=n[r].join(""));var o=n.join("");return o=o.replace(/([^\\])\-/g,"$1"+e.getTerm(t+"-range-delimiter"))},a=function(e){var t,n,o,a=new RegExp("([^\\\\])[-"+("-"===v?"":v)+"\\u2013]","g");e=e.replace(a,"$1 - ").replace(/\s+-\s+/g," - ");var s=new RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\\s+\\-\\s+(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g"),l=new RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\\s+\\-\\s+(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*");if(t=e.match(s),0===(n=e.split(l)).length)o=t;else for(o=[n[0]],r=1,i=n.length;r<i;r+=1)o.push(t[r-1].replace(/\s*\-\s*/g,"-")),o.push(n[r]);return o},s=function(e){for(f=a(e=""+e),i=f.length,r=1;r<i;r+=2)(d=f[r].match(n))&&(d[3]&&d[1]!==d[3]||(d[4].length<d[2].length&&(d[4]=d[2].slice(0,d[2].length-d[4].length)+d[4]),parseInt(d[2],10)<parseInt(d[4],10)&&(d[3]=v+(d[1]?d[1]:""),f[r]=d.slice(1)))),"string"==typeof f[r]&&(f[r]=f[r].replace(/\-/g,v));return f},l=function(e,t,n){i=e.length;for(var r=1,a=e.length;r<a;r+=2)"object"==typeof e[r]&&(e[r][3]=u(e[r][1],e[r][3],t,n),e[r][2].slice(1)===e[r][0]&&(e[r][2]=v));return o(e)},u=function(e,t,n,r){if(n||(n=0),p=(""+e).split(""),h=(""+t).split(""),(m=h.slice()).reverse(),p.length===h.length)for(var i=0,o=p.length;i<o;i+=1){if(!(p[i]===h[i]&&m.length>n)){if(n&&r&&3===m.length){var a=p.slice(0,i);a.reverse(),m=m.concat(a)}break}m.pop()}return m.reverse(),m.join("")},c=function(e){for(i=e.length,r=1;r<i;r+=2)"object"==typeof e[r]&&(d=e[r],g=parseInt(d[1],10),b=parseInt(d[3],10),g>100&&g%100&&parseInt(g/100,10)===parseInt(b/100,10)?d[3]=""+b%100:g>=1e4&&(d[3]=""+b%1e3)),d[2].slice(1)===d[0]&&(d[2]=v);return o(e)};var x=function(e,t,n,r){return t(s(e=""+e),n,r)};return e.opt[t+"-range-format"]?"expanded"===e.opt[t+"-range-format"]?y=function(e){return x(e,o)}:"minimal"===e.opt[t+"-range-format"]?y=function(e){return x(e,l)}:"minimal-two"===e.opt[t+"-range-format"]?y=function(e,t){return x(e,l,2,t)}:"chicago"===e.opt[t+"-range-format"]&&(y=function(e){return x(e,c)}):y=function(e){return x(e,o)},y},p.Util.FlipFlopper=function(e){var t=[],n={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};n['("']=n[' "'],n["('"]=n[" '"];var r=e.getTerm("open-quote"),i=e.getTerm("close-quote"),o=e.getTerm("open-inner-quote"),a=e.getTerm("close-inner-quote");function s(e){for(var t=[],r=Object.keys(n),i=0,o=r.length;i<o;i++){var a=r[i];"quote"===n[e].type&&n[e]||t.push(a)}var s=n[e];return s.opener=new RegExp("^(?:"+t.map((function(e){return e.replace("(","\\(")})).join("|")+")"),s}r&&i&&-1===[' "'," '",'"',"'"].indexOf(r)&&(n[r]=JSON.parse(JSON.stringify(n[' "'])),n[r].opener=r,n[r].closer=i),o&&a&&-1===[' "'," '",'"',"'"].indexOf(o)&&(n[o]=JSON.parse(JSON.stringify(n[" '"])),n[o].opener=o,n[o].closer=a);var l=function(){for(var e={},t=Object.keys(n),r=0,i=t.length;r<i;r++){var o=t[r];e[o]=s(o)}return e}(),u=function(){var e=[],t=[],n={};for(var r in l)e.push(r),n[l[r].closer]=!0;for(var i=Object.keys(n),o=0,a=i.length;o<a;o++){var s=i[o];t.push(s)}var u=e.concat(t).map((function(e){return e.replace("(","\\(")})).join("|");return{matchAll:new RegExp("((?:"+u+"))","g"),splitAll:new RegExp("(?:"+u+")","g"),open:new RegExp("(^(?:"+e.map((function(e){return e.replace("(","\\(")})).join("|")+")$)"),close:new RegExp("(^(?:"+t.join("|")+")$)")}}();function c(e,n){return e.match(u.open)?function(e,n){var r=t[t.length-1];return!r||e.match(r.opener)?(t.push({type:l[e].type,opener:l[e].opener,closer:l[e].closer,pos:n}),!1):(t.pop(),t.push({type:l[e].type,opener:l[e].opener,closer:l[e].closer,pos:n}),{fixtag:r.pos})}(e,n):function(e,n){var r=t[t.length-1];return r&&e===r.closer?(t.pop(),"nocase"===r.type&&{nocase:{open:r.pos,close:n}}):r?{fixtag:r.pos}:{fixtag:n}}(e,n)}function f(e,t){return c(e,t)}var d=function(t){var r=[];this.set=function(i){for(var o=n[i].attr,a=null,s=r.length-1;s>-1;s--){if((f=r[s])[0]===o){a=f;break}}if(!a){var l=[e[e.tmp.area].opt.layout_decorations].concat(t.alldecor);e:for(s=l.length-1;s>-1;s--){var u=l[s];if(u)for(var c=u.length-1;c>-1;c--){var f;if((f=u[c])[0]===o){a=f;break e}}}}a=a?[o,n[i].flipflop[a[1]]]:[o,n[i].outer],r.push(a)},this.pair=function(){return r[r.length-1]},this.pop=function(){r.pop()}};function h(e,t){if("'"===e){if(t&&t.match(/^[^\,\.\?\:\;\ ]/))return!0}else if(" '"===e&&t&&t.match(/^[\ ]/))return!0;return!1}this.processTags=function(r){var i=!1;" "!==(g=r.blobs).slice(0,1)||g.match(/^\s+[\'\"]/)||(i=!0);var o=new RegExp("("+p.ROMANESQUE_REGEXP.source+")’("+p.ROMANESQUE_REGEXP.source+")","g"),a=function(e){var t=[],r=(e=(e=e.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(u.matchAll);if(!r)return{tags:[],strings:[e],forcedSpaces:[]};for(var i=e.split(u.splitAll),o=0,a=r.length-1;o<a;o++)n[r[o]]&&(""===i[o+1]&&['"',"'"].indexOf(r[o+1])>-1?(r[o+1]=" "+r[o+1],t.push(!0)):t.push(!1));return{tags:r,strings:i,forcedSpaces:t}}(g=" "+g.replace(o,"$1'$2"));if(0!==a.tags.length){for(var s,l=!1,c=0,m=a.tags.length;c<m;c++){var g;if(h(x=a.tags[c],g=a.strings[c+1]))a.strings[c+1]=" '"===x?" ’"+a.strings[c+1]:"’"+a.strings[c+1],a.tags[c]="";else{for(var b;b=f(x,c);){if(!(Object.keys(b).indexOf("fixtag")>-1)){if(b.nocase){a.tags[b.nocase.open]="",a.tags[b.nocase.close]="";break}break}if(x.match(u.close)&&"'"===x)a.strings[c+1]="’"+a.strings[c+1],a.tags[c]="";else{var y=a.tags[b.fixtag];a.forcedSpaces[b.fixtag-1]&&(y=y.slice(1)),a.strings[b.fixtag+1]=y+a.strings[b.fixtag+1],a.tags[b.fixtag]=""}if(!(t.length>0))break;t.pop()}b&&(b.fixtag||0===b.fixtag)&&(a.strings[c+1]=a.tags[c]+a.strings[c+1],a.tags[c]="")}}for(c=t.length-1;c>-1;c--){var v=t[c].pos,x=a.tags[v];a.strings[v+1]=" '"===x||"'"===x?" ’"+a.strings[v+1]:a.tags[v]+a.strings[v+1],a.tags[v]="",t.pop()}for(c=a.tags.length-1;c>-1;c--)a.tags[c]||(a.tags=a.tags.slice(0,c).concat(a.tags.slice(c+1)),a.strings[c]=a.strings[c]+a.strings[c+1],a.strings=a.strings.slice(0,c+1).concat(a.strings.slice(c+2)));for(c=0,m=a.tags.length;c<m;c++){x=a.tags[c];var _=a.forcedSpaces[c-1];[' "'," '",'("',"('"].indexOf(x)>-1&&(l||(n[s=x].outer="true",n[{" '":' "',' "':" '",'("':"('","('":'("'}[s]].outer="inner",l=!0),_||(a.strings[c]+=x.slice(0,1)))}!function(t,n,r){var i=!0,o=new d(t);t.blobs=[];var a=new function(t){this.stack=[t],this.latest=t,this.addStyling=function(t,n){if(i&&(" "===t.slice(0,1)&&(t=t.slice(1))," "===t.slice(0,1)&&(t=t.slice(1)),i=!1),this.latest=this.stack[this.stack.length-1],n){if("string"==typeof this.latest.blobs)(h=new p.Blob).blobs=this.latest.blobs,h.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[h];var r=new p.Token;if((d=new p.Blob(null,r)).alldecor=this.latest.alldecor.slice(),"@class"===n[0]&&"nodecor"===n[1]){for(var o=[],a={},s=[e[e.tmp.area].opt.layout_decorations].concat(d.alldecor),l=s.length-1;l>-1;l--){var u=s[l];if(u)for(var c=u.length-1;c>-1;c--){var f=u[c];["@font-weight","@font-style","@font-variant"].indexOf(f[0])>-1&&!a[f[0]]&&("normal"!==n[1]&&(d.decorations.push([f[0],"normal"]),o.push([f[0],"normal"])),a[f[0]]=!0)}}d.alldecor.push(o)}else d.decorations.push(n),d.alldecor.push([n]);if(this.latest.blobs.push(d),this.stack.push(d),this.latest=d,t){var d;r=new p.Token;(d=new p.Blob(null,r)).blobs=t,d.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(d)}}else{var h;if(t)(h=new p.Blob).blobs=t,h.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(h)}},this.popStyling=function(){this.stack.pop()}}(t);if(n.strings.length){var s=n.strings[0];r&&(s=" "+s),a.addStyling(s)}for(var l=0,c=n.tags.length;l<c;l++){var f=n.tags[l];s=n.strings[l+1];f.match(u.open)?(o.set(f),a.addStyling(s,o.pair())):(o.pop(),a.popStyling(),a.addStyling(s))}}(r,a,i)}}},p.Output.Formatters=function(){var e=new p.Doppeler('(?:‘|’|“|”| "| \'|"|\'|[-–—/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',(function(e){return e.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")})),t=new p.Doppeler("(?:[   -​ 　]+)"),n={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"};function r(e){var t=e.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return!t||t[2].match(/^[\u0370-\u03FF]$/)&&!t[3]?e:t[1]+t[2].toUpperCase()+t[3]}function i(i,o){if(!o)return"";i.doppel=e.split(o);var a={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"‘":{opener:"‘",closer:"’"},"“":{opener:"“",closer:"”"}};function s(e,t){return["“","‘",' "'," '"].indexOf(e)>-1?function(e,t){if(0===i.quoteState.length||e===i.quoteState[i.quoteState.length-1].opener)return i.quoteState.push({opener:a[e].opener,closer:a[e].closer,pos:t}),!1;var n=i.quoteState[i.quoteState.length-1].pos;return i.quoteState.pop(),i.quoteState.push({opener:a[e].opener,closer:a[e].closer,positions:t}),n}(e,t):function(e,t){if(!(i.quoteState.length>0&&e===i.quoteState[i.quoteState.length-1].closer))return t;i.quoteState.pop()}(e,t)}function l(e,t){var n=e.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(n)return s(n[1],t)}i.doppel.strings.length&&i.doppel.strings[0].trim()&&(i.doppel.strings[0]=i.capitaliseWords(i.doppel.strings[0],0,i.doppel.tags[0]));for(var u=0,c=i.doppel.tags.length;u<c;u++){var f=i.doppel.tags[u],d=i.doppel.strings[u+1];if(null!==i.tagState&&(n[f]?i.tagState.push(n[f]):i.tagState.length&&f===i.tagState[i.tagState.length-1]&&i.tagState.pop()),null!==i.afterPunct&&f.match(/[\!\?\:]$/)&&(i.afterPunct=!0),0===i.tagState.length?i.doppel.strings[u+1]=i.capitaliseWords(d,u+1,i.doppel,i.doppel.tags[u+1]):i.doppel.strings[u+1].trim()&&(i.lastWordPos=null),null!==i.quoteState)if((h=l(f,u))||0===h){var p=i.doppel.origStrings[h+1].slice(0,1);i.doppel.strings[h+1]=p+i.doppel.strings[h+1].slice(1),i.lastWordPos=null}i.isFirst&&d.trim()&&(i.isFirst=!1),i.afterPunct&&d.trim()&&(i.afterPunct=!1)}if(i.quoteState)for(u=0,c=i.quoteState.length;u<c;u++){var h;if(void 0!==(h=i.quoteState[u].pos)){p=i.doppel.origStrings[h+1].slice(0,1);i.doppel.strings[h+1]=p+i.doppel.strings[h+1].slice(1)}}if(i.lastWordPos){var m=t.split(i.doppel.strings[i.lastWordPos.strings]),g=m.strings[i.lastWordPos.words];g.length>1&&g.toLowerCase().match(i.skipWordsRex)&&(g=r(g),m.strings[i.lastWordPos.words]=g),i.doppel.strings[i.lastWordPos.strings]=t.join(m)}return e.join(i.doppel)}return{passthrough:function(e,t){return t},lowercase:function(e,t){return i({quoteState:null,capitaliseWords:function(e){for(var t=e.split(" "),n=0,r=t.length;n<r;n++){var i=t[n];i&&(t[n]=i.toLowerCase())}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},t)},uppercase:function(e,t){return i({quoteState:null,capitaliseWords:function(e){for(var t=e.split(" "),n=0,r=t.length;n<r;n++){var i=t[n];i&&(t[n]=i.toUpperCase())}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},t)},sentence:function(e,t){var n={quoteState:[],capitaliseWords:function(e){for(var t=e.split(" "),i=0,o=t.length;i<o;i++){var a=t[i];a&&(n.isFirst?(t[i]=r(a),n.isFirst=!1):t[i]=a.toLowerCase())}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return i(n,t)},title:function(e,n){var o={quoteState:[],capitaliseWords:function(e,n,i){if(e.trim()){for(var a=e.split(/[ \u00A0]+/),s=t.split(e),l=0,u=(a=s.strings).length;l<u;l++){var c=a[l];c&&(c.length>1&&!c.toLowerCase().match(o.skipWordsRex)?a[l]=r(a[l]):l===a.length-1&&"-"===i?a[l]=r(a[l]):o.isFirst?a[l]=r(a[l]):o.afterPunct&&(a[l]=r(a[l])),o.afterPunct=!1,o.isFirst=!1,o.lastWordPos={strings:n,words:l})}e=t.join(s)}return e},skipWordsRex:e.locale[e.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return i(o,n)},"capitalize-first":function(e,t){var n={quoteState:[],capitaliseWords:function(e){for(var t=e.split(" "),i=0,o=t.length;i<o;i++){var a=t[i];if(a&&n.isFirst){t[i]=r(a),n.isFirst=!1;break}}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return i(n,t)},"capitalize-all":function(e,t){return i({quoteState:[],capitaliseWords:function(e){for(var t=e.split(" "),n=0,i=t.length;n<i;n++){var o=t[n];o&&(t[n]=r(o))}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},t)}}}(),p.Output.Formats=function(){},p.Output.Formats.prototype.html={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"  ").replace(p.SUPERSCRIPTS_REGEXP,(function(e){return"<sup>"+p.SUPERSCRIPTS[e]+"</sup>"}))},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":p.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":p.Output.Formatters.passthrough,"@strip-periods/false":p.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var n="";return e.sys.embedBibliographyEntry&&(n=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'  <div class="csl-entry">'+t+"</div>\n"+n},"@display/block":function(e,t){return'\n\n    <div class="csl-block">'+t+"</div>\n"},"@display/left-margin":function(e,t){return'\n    <div class="csl-left-margin">'+t+"</div>"},"@display/right-inline":function(e,t){return'<div class="csl-right-inline">'+t+"</div>\n  "},"@display/indent":function(e,t){return'<div class="csl-indent">'+t+"</div>\n  "},"@showid/true":function(e,t,n){if(e.tmp.just_looking||e.tmp.suppress_decorations)return t;if(n)return'<span class="'+e.opt.nodenames[n]+'" cslid="'+n+'">'+t+"</span>";if(this.params&&"string"==typeof t){var r="";if(t){var i=t.match(p.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var o="";return t&&p.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(o=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,o)}return t},"@URL/true":function(e,t){return'<a href="'+t+'">'+t+"</a>"},"@DOI/true":function(e,t){var n=t;return t.match(/^https?:\/\//)||(n="https://doi.org/"+t),'<a href="'+n+'">'+t+"</a>"}},p.Output.Formats.prototype.text={text_escape:function(e){return e||(e=""),e},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":p.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":p.Output.Formatters.passthrough,"@strip-periods/false":p.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},p.Output.Formats.prototype.rtf={text_escape:function(e){return e||(e=""),e.replace(/([\\{}])/g,"\\$1").replace(p.SUPERSCRIPTS_REGEXP,(function(e){return"\\super "+p.SUPERSCRIPTS[e]+"\\nosupersub{}"})).replace(/[\u007F-\uFFFF]/g,(function(e){return"\\uc0\\u"+e.charCodeAt(0).toString()+"{}"})).split("\t").join("\\tab{}")},"@passthrough/true":p.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":p.Output.Formatters.passthrough,"@strip-periods/false":p.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?p.Output.Formats.rtf.text_escape(e.getTerm("open-quote")):p.Output.Formats.rtf.text_escape(e.getTerm("open-quote"))+t+p.Output.Formats.rtf.text_escape(e.getTerm("close-quote"))},"@quotes/inner":function(e,t){return void 0===t?p.Output.Formats.rtf.text_escape("’"):p.Output.Formats.rtf.text_escape(e.getTerm("open-inner-quote"))+t+p.Output.Formats.rtf.text_escape(e.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t},"@display/left-margin":function(e,t){return t+"\\tab "},"@display/right-inline":function(e,t){return t+"\r\n"},"@display/indent":function(e,t){return"\n\\tab "+t+"\\line\r\n"},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations)return t;var n="";if(t){var r=t.match(p.VARIABLE_WRAPPER_PREPUNCT_REX);n=r[1],t=r[2]}var i="";return t&&p.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,n,t,i)},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},p.Output.Formats.prototype.asciidoc={text_escape:function(e){return e||(e=""),e.replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(p.SUPERSCRIPTS_REGEXP,(function(e){return"^"+p.SUPERSCRIPTS[e]+"^"}))},bibstart:"",bibend:"","@passthrough/true":p.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":p.Output.Formatters.passthrough,"@strip-periods/false":p.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?"``":"``"+t+"''"},"@quotes/inner":function(e,t){return void 0===t?"`":"`"+t+"'"},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return" "+t},"@display/indent":function(e,t){return" "+t},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t)return t;var n="";if(t){var r=t.match(p.VARIABLE_WRAPPER_PREPUNCT_REX);n=r[1],t=r[2]}var i="";return t&&p.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,n,t,i)},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){var n=t;return t.match(/^https?:\/\//)||(n="https://doi.org/"+t),n+"["+t+"]"}},p.Output.Formats.prototype.fo={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(p.SUPERSCRIPTS_REGEXP,(function(e){return'<fo:inline vertical-align="super">'+p.SUPERSCRIPTS[e]+"</fo:inline>"}))},bibstart:"",bibend:"","@passthrough/true":p.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":p.Output.Formatters.passthrough,"@strip-periods/false":p.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var n="";if(e.bibliography&&e.bibliography.opt&&e.bibliography.opt.hangingindent){var r=e.bibliography.opt.hangingindent;n=' start-indent="'+r+'em" text-indent="-'+r+'em"'}var i="";return e.sys.embedBibliographyEntry&&(i=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'<fo:block id="'+this.system_id+'"'+n+">"+t+"</fo:block>\n"+i},"@display/block":function(e,t){return"\n  <fo:block>"+t+"</fo:block>\n"},"@display/left-margin":function(e,t){return'\n  <fo:table table-layout="fixed" width="100%">\n    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>\n    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>\n    <fo:table-body>\n      <fo:table-row>\n        <fo:table-cell>\n          <fo:block>'+t+"</fo:block>\n        </fo:table-cell>\n        "},"@display/right-inline":function(e,t){return"<fo:table-cell>\n          <fo:block>"+t+"</fo:block>\n        </fo:table-cell>\n      </fo:table-row>\n    </fo:table-body>\n  </fo:table>\n"},"@display/indent":function(e,t){return'<fo:block margin-left="2em">'+t+"</fo:block>\n"},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t)return t;var n="";if(t){var r=t.match(p.VARIABLE_WRAPPER_PREPUNCT_REX);n=r[1],t=r[2]}var i="";return t&&p.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,n,t,i)},"@URL/true":function(e,t){return"<fo:basic-link external-destination=\"url('"+t+"')\">"+t+"</fo:basic-link>"},"@DOI/true":function(e,t){var n=t;return t.match(/^https?:\/\//)||(n="https://doi.org/"+t),"<fo:basic-link external-destination=\"url('"+n+"')\">"+t+"</fo:basic-link>"}},p.Output.Formats.prototype.latex={text_escape:function(e){return e||(e=""),e},bibstart:"\\begin{thebibliography}{4}",bibend:"end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":p.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":p.Output.Formatters.passthrough,"@strip-periods/false":p.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return"\\bibitem{"+e.sys.embedBibliographyEntry(this.item_id)+"}\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t,n){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},p.Output.Formats=new p.Output.Formats,p.Registry=function(e){this.debug=!1,this.state=e,this.registry={},this.reflist=[],this.refhash={},this.namereg=new p.Registry.NameReg(e),this.citationreg=new p.Registry.CitationReg(e),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new p.Registry.Comparifier(e,"bibliography_sort"),this.getSortedIds=function(){for(var e=[],t=0,n=this.reflist.length;t<n;t+=1)e.push(""+this.reflist[t].id);return e},this.getSortedRegistryItems=function(){for(var e=[],t=0,n=this.reflist.length;t<n;t+=1)e.push(this.reflist[t]);return e}},p.Registry.prototype.init=function(e,t){if(this.oldseq={},t){this.uncited={};for(var n=0,r=e.length;n<r;n+=1)this.myhash[e[n]]||this.mylist.push(""+e[n]),this.uncited[e[n]]=!0,this.myhash[e[n]]=!0}else{for(var i in this.uncited)e.push(i);var o={};for(n=e.length-1;n>-1;n+=-1)o[e[n]]?e=e.slice(0,n).concat(e.slice(n+1)):o[e[n]]=!0;this.mylist=e,this.myhash=o}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},p.Registry.prototype.dopurge=function(e){for(var t=this.mylist.length-1;t>-1;t+=-1)this.citationreg.citationsByItemId&&(this.citationreg.citationsByItemId[this.mylist[t]]||e[this.mylist[t]]||(delete this.myhash[this.mylist[t]],this.mylist=this.mylist.slice(0,t).concat(this.mylist.slice(t+1))));this.dodeletes(this.myhash)},p.Registry.prototype.dodeletes=function(e){var t,n,r,i,o,a,s;if("string"==typeof e){var l=e;(e={})[l]=!0}for(var l in this.registry)if(!e[l]){if(this.uncited[l])continue;for(o in this.namereg.delitems(l))this.refreshes[o]=!0;for(t=this.registry[l].ambig,(a=this.ambigcites[t].indexOf(l))>-1&&(i=this.ambigcites[t].slice(),this.ambigcites[t]=i.slice(0,a).concat(i.slice(a+1,i.length)),this.ambigresets[t]=this.ambigcites[t].length),r=this.ambigcites[t].length,n=0;n<r;n+=1)s=""+this.ambigcites[t][n],this.refreshes[s]=!0;if(this.registry[l].siblings)if(1==this.registry[l].siblings.length){var u=this.registry[l].siblings[0];this.registry[u].master=!0,this.registry[u].siblings.pop(),this.registry[u].parallel=!1}else if(this.registry[l].siblings.length>1){var c=[l];if(this.registry[l].master){var f=this.registry[l].siblings[0],d=this.registry[f];d.master=!0,d.parallel=!1,c.push(f);for(var p=0,h=this.registry[l].siblings.length;p<h;p+=1)this.registry[this.registry[l].siblings[p]].parallel=f}var m=[];for(p=this.registry[l].siblings.length-1;p>-1;p+=-1){var g=this.registry[l].siblings.pop();-1===c.indexOf(g)&&m.push(g)}for(p=m.length-1;p>-1;p+=-1)this.registry[l].siblings.push(m[p])}for(var b=this.reflist.length-1;b>-1;b--)this.reflist[b].id===l&&(this.reflist=this.reflist.slice(0,b).concat(this.reflist.slice(b+1)));delete this.registry[l],delete this.refhash[l],this.return_data.bibchange=!0}},p.Registry.prototype.doinserts=function(e){var t,n,r,i,o;"string"==typeof e&&(e=[e]);for(var a=0,s=e.length;a<s;a+=1)t=e[a],this.registry[t]||(n=this.state.retrieveItem(t),r=p.getAmbiguousCite.call(this.state,n),this.ambigsTouched[r]=!0,n.legislation_id||(this.akeys[r]=!0),i={id:""+t,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:n,newItem:!0},this.registry[t]=i,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[t]&&(this.registry[t]["first-reference-note-number"]=this.citationreg.citationsByItemId[t][0].properties.noteIndex),o=p.getAmbigConfig.call(this.state),this.registerAmbigToken(r,t,o),this.touched[t]=!0,this.return_data.bibchange=!0)},p.Registry.prototype.rebuildlist=function(e){var t,n,r,i;if(e)for(this.reflist=[],t=this.mylist.length,n=0;n<t;n+=1)r=this.mylist[n],i=this.registry[r],this.reflist.push(i),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=n+1;else for(this.reflist_inserts=[],t=this.mylist.length,n=0;n<t;n+=1)r=this.mylist[n],(i=this.registry[r]).newItem&&this.reflist_inserts.push(i),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=n+1},p.Registry.prototype.dorefreshes=function(){var e;for(var t in this.refreshes)if(e=this.registry[t]){e.sortkeys=void 0,o=this.state.refetchItem(t);var n=e.ambig;for(var r in void 0===n&&(this.state.tmp.disambig_settings=!1,n=p.getAmbiguousCite.call(this.state,o),a=p.getAmbigConfig.call(this.state),this.registerAmbigToken(n,t,a)),this.ambigresets)if(1===this.ambigresets[r]){var i=this.ambigcites[n][0],o=this.state.refetchItem(i);this.registry[i].disambig=new p.AmbigConfig,this.state.tmp.disambig_settings=!1;n=p.getAmbiguousCite.call(this.state,o);var a=p.getAmbigConfig.call(this.state);this.registerAmbigToken(n,i,a)}this.state.tmp.taintedItemIDs[t]=!0,this.ambigsTouched[n]=!0,o.legislation_id||(this.akeys[n]=!0),this.touched[t]=!0}},p.Registry.prototype.setdisambigs=function(){for(var e in this.ambigsTouched)this.state.disambiguate.run(e);this.ambigsTouched={},this.akeys={}},p.Registry.prototype.renumber=function(){var e,t,n;for(this.state.bibliography_sort.opt.citation_number_sort_direction===p.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),e=this.reflist.length,t=0;t<e;t+=1)(n=this.reflist[t]).seq=t+1,this.state.bibliography_sort.opt.citation_number_sort_direction===p.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[n.seq]=this.reflist.length-n.seq+1),this.state.opt.update_mode===p.NUMERIC&&n.seq!=this.oldseq[n.id]&&(this.state.tmp.taintedItemIDs[n.id]=!0),n.seq!=this.oldseq[n.id]&&(this.return_data.bibchange=!0)},p.Registry.prototype.setsortkeys=function(){for(var e=0,t=this.mylist.length;e<t;e+=1){var n=this.mylist[e];(this.touched[n]||this.state.tmp.taintedItemIDs[n]||!this.registry[n].sortkeys)&&(this.registry[n].sortkeys=p.getSortKeys.call(this.state,this.state.retrieveItem(n),"bibliography_sort"))}},p.Registry.prototype._insertItem=function(e,t){return t.splice(this._locationOf(e,t)+1,0,e),t},p.Registry.prototype._locationOf=function(e,t,n,r){if(0===t.length)return-1;var i=(n=n||0)+(r=r||t.length)>>1,o=this.sorter.compareKeys(e,t[i]);if(r-n<=1)return-1==o?i-1:i;switch(o){case-1:return this._locationOf(e,t,n,i);case 0:return i;case 1:return this._locationOf(e,t,i,r)}},p.Registry.prototype.sorttokens=function(e){var t,n,r;if(!e){for(this.reflist_inserts=[],t=this.mylist.length,r=0;r<t;r+=1)n=this.mylist[r],(s=this.registry[n]).newItem&&this.reflist_inserts.push(s);for(var i in this.state.tmp.taintedItemIDs)if(this.registry[i]&&!this.registry[i].newItem)for(var o=this.reflist.length-1;o>-1;o--)this.reflist[o].id===i&&(this.reflist_inserts.push(this.reflist[o]),this.reflist=this.reflist.slice(0,o).concat(this.reflist.slice(o+1)));o=0;for(var a=this.reflist_inserts.length;o<a;o++){var s;delete(s=this.reflist_inserts[o]).newItem,this.reflist=this._insertItem(s,this.reflist)}for(r=0;r<t;r+=1)n=this.mylist[r],s=this.registry[n],this.registry[n].seq=r+1}},p.Registry.Comparifier=function(e,t){var n,r,i,o,a=p.getSortCompare(e.opt["default-locale-sort"]);n=e[t].opt.sort_directions,this.compareKeys=function(e,t){for(r=e.sortkeys?e.sortkeys.length:0,i=0;i<r;i+=1){var o=0;if(0<(o=e.sortkeys[i]===t.sortkeys[i]?0:void 0===e.sortkeys[i]?n[i][1]:void 0===t.sortkeys[i]?n[i][0]:a(e.sortkeys[i],t.sortkeys[i])))return n[i][1];if(0>o)return n[i][0]}return e.seq>t.seq?1:e.seq<t.seq?-1:0},o=this.compareKeys,this.compareCompositeKeys=function(e,t){return o(e[1],t[1])}},p.Registry.prototype.compareRegistryTokens=function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0},p.Registry.prototype.registerAmbigToken=function(e,t,n){if(this.registry[t]||p.debug("Warning: unregistered item: itemID=("+t+"), akey=("+e+")"),this.registry[t]&&this.registry[t].disambig&&this.registry[t].disambig.names)for(var r=0,i=n.names.length;r<i;r+=1){if(n.names[r]!==this.registry[t].disambig.names[r])this.state.tmp.taintedItemIDs[t]=!0;else if(n.givens[r])for(var o=0,a=n.givens[r].length;o<a;o+=1){n.givens[r][o]!==this.registry[t].disambig.givens[r][o]&&(this.state.tmp.taintedItemIDs[t]=!0)}}this.ambigcites[e]||(this.ambigcites[e]=[]),-1===this.ambigcites[e].indexOf(""+t)&&this.ambigcites[e].push(""+t),this.registry[t].ambig=e,this.registry[t].disambig=p.cloneAmbigConfig(n)},p.getSortKeys=function(e,t){var n,r,i,o,a,s;for(n=this.tmp.area,r=this.tmp.root,i=this.tmp.extension,o=p.Util.Sort.strip_prepositions,this.tmp.area=t,this.tmp.root=t.indexOf("_")>-1?t.slice(0,-5):t,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,p.getCite.call(this,e),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,a=this[t].keys.length,s=0;s<a;s+=1)this[t].keys[s]=o(this[t].keys[s]);return this.tmp.area=n,this.tmp.root=r,this.tmp.extension=i,this[t].keys},p.Registry.NameReg=function(e){var t,n,r,i,o,a,s,l,u,c,f,d;this.state=e,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},s=function(e){return e||(e=""),e.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},l=function(e,i,o){t=s(o.family);var a=(r=s(o.given)).match(/[,\!]* ([^,]+)$/);a&&a[1]===a[1].toLowerCase()&&(r=r.replace(/[,\!]* [^,]+$/,"")),n=p.Util.Names.initializeWith(e,r,"%s"),"by-cite"===e.citation.opt["givenname-disambiguation-rule"]&&(t=""+i+t)},u=function(r,a,s,u,c,f){var d;if("bibliography"===e.tmp.area.slice(0,12)&&!c)return"string"==typeof f?1:2;a=e.nameOutput.getName(a,"locale-translit",!0).name,l(this.state,""+r,a),d=2,i=e.opt["disambiguate-add-givenname"];var p=o=e.citation.opt["givenname-disambiguation-rule"];return"by-cite"===o&&(o="all-names"),"short"===c?d=0:"string"==typeof f&&(d=1),void 0===this.namereg[t]||void 0===this.namereg[t].ikey[n]?d:"by-cite"===p&&d<=u?u:i?"string"==typeof o&&"primary-name"===o.slice(0,12)&&s>0?d:(o&&"all-names"!==o&&"primary-name"!==o?"all-names-with-initials"!==o&&"primary-name-with-initials"!==o||(d=this.namereg[t].count>1?1:0):(this.namereg[t].count>1&&(d=1),(this.namereg[t].ikey&&this.namereg[t].ikey[n].count>1||this.namereg[t].count>1&&"string"!=typeof f)&&(d=2)),e.registry.registry[r]?d:"short"==c?0:"string"==typeof f?1:void 0):d},c=function(i){var o,s,l,u,c;"string"!=typeof i&&"number"!=typeof i||(i=[""+i]);for(s=i.length,o=0;o<s;o+=1)if(u=""+i[o],this.nameind[u]){for(c in this.nameind[u])if(this.nameind[u].hasOwnProperty(c)){var f=c.split("::");if(t=f[0],n=f[1],r=f[2],void 0===this.namereg[t])continue;if(a=this.namereg[t].items,r&&this.namereg[t].ikey[n]&&this.namereg[t].ikey[n].skey[r]&&((l=(d=this.namereg[t].ikey[n].skey[r].items).indexOf(""+u))>-1&&(this.namereg[t].ikey[n].skey[r].items=d.slice(0,l).concat(d.slice([l+1]))),0===this.namereg[t].ikey[n].skey[r].items.length&&(delete this.namereg[t].ikey[n].skey[r],this.namereg[t].ikey[n].count+=-1,this.namereg[t].ikey[n].count<2)))for(var p=0,h=this.namereg[t].ikey[n].items.length;p<h;p+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[n].items[p]]=!0;if(n&&this.namereg[t].ikey[n]&&((l=this.namereg[t].ikey[n].items.indexOf(""+u))>-1&&(a=this.namereg[t].ikey[n].items.slice(),this.namereg[t].ikey[n].items=a.slice(0,l).concat(a.slice([l+1]))),0===this.namereg[t].ikey[n].items.length&&(delete this.namereg[t].ikey[n],this.namereg[t].count+=-1,this.namereg[t].count<2)))for(p=0,h=this.namereg[t].items.length;p<h;p+=1)e.tmp.taintedItemIDs[this.namereg[t].items[p]]=!0;t&&((l=this.namereg[t].items.indexOf(""+u))>-1&&(a=this.namereg[t].items.slice(),this.namereg[t].items=a.slice(0,l).concat(a.slice([l+1],a.length))),this.namereg[t].items.length<2&&delete this.namereg[t]),delete this.nameind[u][c]}delete this.nameind[u],delete this.nameindpkeys[u]}return{}},f=function(i,o,a){if(o=e.nameOutput.getName(o,"locale-translit",!0).name,!e.citation.opt["givenname-disambiguation-rule"]||"primary-"!==e.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===a){if(l(this.state,""+i,o),t&&(void 0===this.namereg[t]?(this.namereg[t]={},this.namereg[t].count=0,this.namereg[t].ikey={},this.namereg[t].items=[i]):-1===this.namereg[t].items.indexOf(i)&&this.namereg[t].items.push(i)),t&&n)if(void 0===this.namereg[t].ikey[n]){if(this.namereg[t].ikey[n]={},this.namereg[t].ikey[n].count=0,this.namereg[t].ikey[n].skey={},this.namereg[t].ikey[n].items=[i],this.namereg[t].count+=1,2===this.namereg[t].count)for(var s=0,u=this.namereg[t].items.length;s<u;s+=1)e.tmp.taintedItemIDs[this.namereg[t].items[s]]=!0}else-1===this.namereg[t].ikey[n].items.indexOf(i)&&this.namereg[t].ikey[n].items.push(i);if(t&&n&&r)if(void 0===this.namereg[t].ikey[n].skey[r]){if(this.namereg[t].ikey[n].skey[r]={},this.namereg[t].ikey[n].skey[r].items=[i],this.namereg[t].ikey[n].count+=1,2===this.namereg[t].ikey[n].count)for(s=0,u=this.namereg[t].ikey[n].items.length;s<u;s+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[n].items[s]]=!0}else-1===this.namereg[t].ikey[n].skey[r].items.indexOf(i)&&this.namereg[t].ikey[n].skey[r].items.push(i);void 0===this.nameind[i]&&(this.nameind[i]={},this.nameindpkeys[i]={}),t&&(this.nameind[i][t+"::"+n+"::"+r]=!0,this.nameindpkeys[i][t]=this.namereg[t])}},this.addname=f,this.delitems=c,this.evalname=u},p.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]},p.Disambiguation=function(e){this.state=e,this.sys=this.state.sys,this.registry=e.registry.registry,this.ambigcites=e.registry.ambigcites,this.configModes(),this.debug=!1},p.Disambiguation.prototype.run=function(e){this.modes.length&&(this.debug&&print("[A] === RUN ==="),this.akey=e,this.initVars(e)&&this.runDisambig())},p.Disambiguation.prototype.runDisambig=function(){var e;for(this.debug&&print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),e=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(e);this.lists=this.lists.slice(1)}},p.Disambiguation.prototype.scanItems=function(e){var t;this.debug&&print("[2] === scanItems() ==="),this.Item=e[1][0],this.ItemCite=p.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=e[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var n=0,r=1,i=e[1].length;r<i;r+=1){t=e[1][r];var o=p.getAmbiguousCite.call(this.state,t,this.base,!0);this.debug&&r>1&&print("  -----------"),this.ItemCite===o?(this.debug&&(print("  [CLASH]--\x3e "+this.Item.id+": "+this.ItemCite),print("             "+t.id+": "+o)),n+=1,this.partners.push(t)):(this.debug&&(print("  [clear]--\x3e "+this.Item.id+": "+this.ItemCite),print("             "+t.id+": "+o)),this.nonpartners.push(t))}this.clashes[0]=this.clashes[1],this.clashes[1]=n},p.Disambiguation.prototype.evalScan=function(e){this[this.modes[this.modeindex]](e),e&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},p.Disambiguation.prototype.disNames=function(e){if(this.debug&&print("[3] == disNames() =="),0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(print("  ** RESOLUTION [a]: lone partner, one nonpartner"),print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.debug&&(print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&print("  ** RESOLUTION [e]: no improvement, and clashes remain"),e&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&print("     (registering clashing entries because we've run out of options)");for(var t=0,n=this.partners.length;t<n;t+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[t].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},p.Disambiguation.prototype.disExtraText=function(){this.debug&&print("[3] === disExtraText ==");var e=!1;if(0===this.clashes[1]&&this.nonpartners.length<2&&(e=!0),e||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(e||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(e||this.modeindex===this.modes.length-1){var t=this.lists[this.listpos][0];for(n=0,r=this.lists[this.listpos][1].length;n<r;n+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][n].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][n].id,t);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1,(t=this.lists[this.listpos][0]).disambiguate=!0;for(n=0,r=this.lists[this.listpos][1].length;n<r;n+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][n].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][n].id,t)}}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var n=0,r=this.lists[this.listpos][1].length;n<r;n+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][n].id]=!0}},p.Disambiguation.prototype.disYears=function(){var e;this.debug&&print("[3] === disYears =="),e=[];var t=this.lists[this.listpos][0];if(this.clashes[1])for(var n=0,r=this.state.registry.mylist.length;n<r;n+=1)for(var i=this.state.registry.mylist[n],o=0,a=this.lists[this.listpos][1].length;o<a;o+=1){var s;if((s=this.lists[this.listpos][1][o]).id==i){e.push(this.registry[s.id]);break}}e.sort(this.state.registry.sorter.compareKeys);for(var l=0,u=e.length;l<u;l+=1){t.year_suffix=""+l;var c=this.state.registry.registry[e[l].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+e[l].id,t),p.ambigConfigDiff(c,t)&&(this.state.tmp.taintedItemIDs[e[l].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},p.Disambiguation.prototype.incrementDisambig=function(){if(this.debug&&print("\n[1] === incrementDisambig() ==="),this.initGivens)return this.initGivens=!1,!1;var e=!1,t=!0;if("disNames"===this.modes[this.modeindex]){t=!1,"number"!=typeof this.givensMax&&(t=!0);var n=!1;"number"!=typeof this.namesMax&&(n=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:t=!0),"number"==typeof this.namesMax&&t&&(this.state.opt["disambiguate-add-names"]?(n=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):n=!0):n=!0),"number"==typeof this.namesetsMax&&n&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(print("    ------------------"),print("    incremented values"),print("    ------------------"),print("    | gnameset: "+this.gnameset),print("    | gname: "+this.gname),print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):print("    | givens value: nil"),print("    | namesetsMax: "+this.namesetsMax),print("    | namesMax: "+this.namesMax),print("    | givensMax: "+this.givensMax)),"number"==typeof this.namesetsMax&&-1!==this.namesetsMax&&this.gnameset!==this.namesetsMax||this.state.opt["disambiguate-add-names"]&&"number"==typeof this.namesMax&&this.gname!==this.namesMax||"number"==typeof this.givensMax&&void 0!==this.base.givens[this.gnameset]&&void 0!==this.base.givens[this.gnameset][this.gname]&&this.base.givens[this.gnameset][this.gname]!==this.givensMax||(e=!0,this.debug&&print("    MAXED"))}else"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return e},p.Disambiguation.prototype.initVars=function(e){var t,n,r;if(this.debug&&print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=e,this.maxNamesByItemId={},n=[],!(t=this.ambigcites[e])||!t.length)return!1;var i=this.state.refetchItem(""+t[0]);if(this.getCiteData(i),this.base=p.getAmbigConfig.call(this.state),t&&t.length>1){n.push([this.maxNamesByItemId[i.id],i]);for(var o=1,a=t.length;o<a;o+=1)i=this.state.refetchItem(""+t[o]),this.getCiteData(i,this.base),n.push([this.maxNamesByItemId[i.id],i]);n.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:e[1].id>t[1].id?1:e[1].id<t[1].id?-1:0})),r=[];for(var o=0,a=n.length;o<a;o+=1)r.push(n[o][1]);this.lists.push([this.base,r]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+t[0]);return this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],this.namesMax=this.maxNamesByItemId[this.Item.id][0],this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},p.Disambiguation.prototype.padBase=function(e){for(var t=0,n=e.names.length;t<n;t+=1){e.givens[t]||(e.givens[t]=[]);for(var r=0,i=e.names[t];r<i;r+=1)e.givens[t][r]||(e.givens[t][r]=0)}},p.Disambiguation.prototype.configModes=function(){var e,t;this.modes=[],e=this.state.opt["disambiguate-add-givenname"],t=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||e&&"by-cite"===t)&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))},p.Disambiguation.prototype.getCiteData=function(e,t){if(!this.maxNamesByItemId[e.id]){p.getAmbiguousCite.call(this.state,e,t),t=p.getAmbigConfig.call(this.state),this.maxNamesByItemId[e.id]=p.getMaxVals.call(this.state),this.state.registry.registry[e.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var n=0,r=this.state.registry.registry[e.id].disambig.givens.length;n<r;n+=1)this.state.registry.registry[e.id].disambig.givens[n]=this.state.tmp.disambig_settings.givens[n].slice();this.namesetsMax=this.state.registry.registry[e.id].disambig.names.length-1,this.base||(this.base=t,this.betterbase=p.cloneAmbigConfig(t)),t.names.length<this.base.names.length&&(this.base=t);for(n=0,r=t.names.length;n<r;n+=1)t.names[n]>this.base.names[n]&&(this.base.givens[n]=t.givens[n].slice(),this.base.names[n]=t.names[n],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var i=0,o=this.base.givens.length;i<o;i+=1)this.betterbase.givens[i]=this.base.givens[i].slice()}},p.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&void 0!==this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},p.Engine.prototype.getJurisdictionList=function(e){for(var t=[],n=e.split(":"),r=n.length;r>0;r--)t.push(n.slice(0,r).join(":"));return-1===t.indexOf("us")&&t.push("us"),t},p.Engine.prototype.retrieveAllStyleModules=function(e){for(var t={},n=this.locale[this.opt.lang].opts["jurisdiction-preference"],r=(n=[""].concat(n=n||[])).length-1;r>-1;r--)for(var i=n[r],o=0,a=e.length;o<a;o++){var s=e[o];if(!this.opt.jurisdictions_seen[s]){var l=this.sys.retrieveStyleModule(s,i);(!l&&!i||l)&&(this.opt.jurisdictions_seen[s]=!0),l&&(t[s]=l)}}return t},p.ParticleList=[["'s",o=[[null,[0,1]]]],["'s-",o],["'t",o],["a",o],["aan 't",a=[[null,[0,2]]]],["aan de",a],["aan den",a],["aan der",a],["aan het",a],["aan t",a],["aan",o],["ad-",l=[[null,[0,1]],[[0,1],null]]],["adh-",l],["af",l],["al",l],["al-",l],["am de",a],["am",o],["an-",l],["ar-",l],["as-",l],["ash-",l],["at-",l],["ath-",l],["auf dem",f=[[[0,2],null],[null,[0,2]]]],["auf den",f],["auf der",f],["auf ter",a],["auf",c=[[[0,1],null],[null,[0,1]]]],["aus 'm",f],["aus dem",f],["aus den",f],["aus der",f],["aus m",f],["aus",c],["aus'm",f],["az-",l],["aš-",l],["aḍ-",l],["aḏ-",l],["aṣ-",l],["aṭ-",l],["aṯ-",l],["aẓ-",l],["ben",o],["bij 't",a],["bij de",a],["bij den",a],["bij het",a],["bij t",a],["bij",o],["bin",o],["boven d",a],["boven d'",a],["d",o],["d'",l],["da",l],["dal",o],["dal'",o],["dall'",o],["dalla",o],["das",l],["de die le",s=[[null,[0,3]]]],["de die",a],["de l",a],["de l'",a],["de la",d=[[null,[0,2]],[[0,1],[1,2]]]],["de las",d],["de le",a],["de li",u=[[null,[0,2]],[[0,2],null]]],["de van der",s],["de",l],["de'",l],["deca",o],["degli",l],["dei",l],["del",l],["dela",i=[[[0,1],null]]],["dell'",l],["della",l],["delle",l],["dello",l],["den",l],["der",l],["des",l],["di",l],["die le",a],["do",o],["don",o],["dos",l],["du",l],["ed-",l],["edh-",l],["el",l],["el-",l],["en-",l],["er-",l],["es-",l],["esh-",l],["et-",l],["eth-",l],["ez-",l],["eš-",l],["eḍ-",l],["eḏ-",l],["eṣ-",l],["eṭ-",l],["eṯ-",l],["eẓ-",l],["het",o],["i",o],["il",i],["im",o],["in 't",a],["in de",a],["in den",a],["in der",u],["in het",a],["in t",a],["in",o],["l",o],["l'",o],["la",o],["las",o],["le",o],["les",l],["lo",l],["los",o],["lou",o],["of",o],["onder 't",a],["onder de",a],["onder den",a],["onder het",a],["onder t",a],["onder",o],["op 't",a],["op de",u],["op den",a],["op der",a],["op gen",a],["op het",a],["op t",a],["op ten",a],["op",o],["over 't",a],["over de",a],["over den",a],["over het",a],["over t",a],["over",o],["s",o],["s'",o],["sen",i],["t",o],["te",o],["ten",o],["ter",o],["tho",o],["thoe",o],["thor",o],["to",o],["toe",o],["tot",o],["uijt 't",a],["uijt de",a],["uijt den",a],["uijt te de",s],["uijt ten",a],["uijt",o],["uit 't",a],["uit de",a],["uit den",a],["uit het",a],["uit t",a],["uit te de",s],["uit ten",a],["uit",o],["unter",o],["v",o],["v.",o],["v.d.",o],["van 't",a],["van de l",s],["van de l'",s],["van de",a],["van de",a],["van den",a],["van der",a],["van gen",a],["van het",a],["van la",a],["van t",a],["van ter",a],["van van de",s],["van",l],["vander",o],["vd",o],["ver",o],["vom und zum",[[[0,3],null]]],["vom",l],["von 't",a],["von dem",f],["von den",f],["von der",f],["von t",a],["von und zu",[[[0,3],null],[null,[0,3]]]],["von zu",f],["von",c],["voor 't",a],["voor de",a],["voor den",a],["voor in 't",s],["voor in t",s],["voor",o],["vor der",f],["vor",c],["z",i],["ze",i],["zu",c],["zum",l],["zur",l]],p.parseParticles=function(){function e(e,t,n){var r=e;e=n?e.toLowerCase():e;var i,o,a=[];t?(e=e.split("").reverse().join(""),i=p.PARTICLE_GIVEN_REGEXP):i=p.PARTICLE_FAMILY_REGEXP;for(var s=e.match(i);s;){var l,u=t?s[1].split("").reverse().join(""):s[1];if(!(o=!!(l=!!(l=!!s&&u)&&u.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"))&&l.toUpperCase()!==l))break;t?(a.push(r.slice(-1*u.length)),r=r.slice(0,-1*u.length)):(a.push(r.slice(0,u.length)),r=r.slice(u.length)),s=(e=s[2]).match(i)}if(t){e=e.split("").reverse().join(""),a.reverse();for(var c=1,f=a.length;c<f;c++)" "==a[c].slice(0,1)&&(a[c-1]+=" ");for(c=0,f=a.length;c<f;c++)" "==a[c].slice(0,1)&&(a[c]=a[c].slice(1));e=r.slice(0,e.length)}else e=r.slice(-1*e.length);return[o,e,a]}return function(t){var n=(s=e(t.family))[1],r=s[2];t.family=n;var i,o,a=(i=r.join(""),o=i.slice(-1),i=i.trim()," "===o&&["'","’"].indexOf(i.slice(-1))>-1&&(i+=" "),i);a&&(t["non-dropping-particle"]=a),function(e){if(!e.suffix&&e.given){var t=e.given.match(/(\s*,!*\s*)/);if(t){var n=e.given.indexOf(t[1]),r=e.given.slice(n+t[1].length),i=e.given.slice(n,n+t[1].length).replace(/\s*/g,"");"et al"!==r.replace(/\./g,"")||e["dropping-particle"]?(2===i.length&&(e["comma-suffix"]=!0),e.suffix=r):(e["dropping-particle"]=r,e["comma-dropping-particle"]=","),e.given=e.given.slice(0,n)}}}(t);var s,l=(s=e(t.given,!0))[1],u=s[2];t.given=l;var c=u.join("").trim();c&&(t["dropping-particle"]=c)}}(),e.exports=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(133);t.isTag=function(e){return r.isTag(e)},t.isCDATA=function(e){return"cdata"===e.type},t.isText=function(e){return"text"===e.type},t.isComment=function(e){return"comment"===e.type},t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t={}){const{contextualizations:n={},contextualizers:r={}}=e,{data:a={}}=t,{plan:s={}}=a,{summary:l=[]}=s,u=[],c=l.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({resourceId:e.resourceId,containerId:n.id})):e.sectionsOrder.map(({resourceId:e})=>({resourceId:e,containerId:n.id})),[...t,...r]}if("resourceSections"===n.type){const r=(0,i.default)({production:e,options:n.data}).map(({resourceId:e})=>({containerId:n.id,resourceId:e}));return u.push(...r.map(({resourceId:e})=>e)),[...t,...r]}return t},[]).reduce((e,t)=>{return[...e,...Object.keys(n).filter(e=>n[e].targetId===t.resourceId).map(e=>({contextualization:n[e],contextualizer:r[n[e].contextualizerId]}))]},[]),f=Object.keys(n).filter(t=>e.resources[n[t].targetId]&&"section"!==e.resources[n[t].targetId].metadata.type).map(e=>({contextualization:n[e],contextualizer:r[n[e].contextualizerId]}));return[...c,...f,...u.map(t=>{const n=e.resources[t],r=(0,o.v4)();return{contextualization:{id:(0,o.v4)(),contextualizerId:r,sourceId:t,targetId:t},contextualizer:{id:r,type:n.metadata.type,parameters:{}}}})]};var r,i=(r=n(232))&&r.__esModule?r:{default:r},o=n(70)},function(e,t,n){var r=n(481),i=n(482),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r=n(72),i=n(488),o=n(489),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:l&&l in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(23).Symbol;e.exports=r},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(518);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){"use strict";(function(t){var r=n(528),i=n(531);e.exports=function(e,n){if("string"!=typeof e)throw new Error("Expected first argument to be a string");if(!r(n)||n<0)throw new Error("Expected second argument be an integer greater than or equal to 0");for(var o=n;t.byteLength(e)>o;)e=i(e,0,n--);return e}}).call(this,n(91).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeDecorator=t.renderNode=t.RawParser=t.createBlockRenderer=t.createStylesRenderer=void 0;var r=l(n(294)),i=l(n(737)),o=n(738),a=l(n(296)),s=l(n(748));function l(e){return e&&e.__esModule?e:{default:e}}t.createStylesRenderer=i.default,t.createBlockRenderer=s.default,t.RawParser=r.default,t.renderNode=o.renderNode,t.CompositeDecorator=a.default,t.default=o.render},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"aggregate",(function(){return hn})),n.d(r,"bin",(function(){return gn})),n.d(r,"collect",(function(){return vn})),n.d(r,"compare",(function(){return xn})),n.d(r,"countpattern",(function(){return wn})),n.d(r,"cross",(function(){return En})),n.d(r,"density",(function(){return An})),n.d(r,"dotbin",(function(){return In})),n.d(r,"expression",(function(){return Dn})),n.d(r,"extent",(function(){return zn})),n.d(r,"facet",(function(){return Bn})),n.d(r,"field",(function(){return qn})),n.d(r,"filter",(function(){return Hn})),n.d(r,"flatten",(function(){return Wn})),n.d(r,"fold",(function(){return Vn})),n.d(r,"formula",(function(){return Gn})),n.d(r,"generate",(function(){return Yn})),n.d(r,"impute",(function(){return nr})),n.d(r,"joinaggregate",(function(){return rr})),n.d(r,"kde",(function(){return or})),n.d(r,"key",(function(){return ar})),n.d(r,"load",(function(){return lr})),n.d(r,"lookup",(function(){return cr})),n.d(r,"multiextent",(function(){return fr})),n.d(r,"multivalues",(function(){return pr})),n.d(r,"params",(function(){return mr})),n.d(r,"pivot",(function(){return gr})),n.d(r,"prefacet",(function(){return yr})),n.d(r,"project",(function(){return vr})),n.d(r,"proxy",(function(){return xr})),n.d(r,"quantile",(function(){return wr})),n.d(r,"relay",(function(){return Er})),n.d(r,"sample",(function(){return kr})),n.d(r,"sequence",(function(){return Sr})),n.d(r,"sieve",(function(){return Tr})),n.d(r,"subflow",(function(){return Ln})),n.d(r,"timeunit",(function(){return Hi})),n.d(r,"tupleindex",(function(){return Gi})),n.d(r,"values",(function(){return Yi})),n.d(r,"window",(function(){return eo}));var i={};n.r(i),n.d(i,"bound",(function(){return Vc})),n.d(i,"identifier",(function(){return Xc})),n.d(i,"mark",(function(){return Kc})),n.d(i,"overlap",(function(){return Jc})),n.d(i,"render",(function(){return af})),n.d(i,"viewlayout",(function(){return jf}));var o={};n.r(o),n.d(o,"axisticks",(function(){return Ip})),n.d(o,"datajoin",(function(){return Dp})),n.d(o,"encode",(function(){return Lp})),n.d(o,"legendentries",(function(){return Vp})),n.d(o,"linkpath",(function(){return Zp})),n.d(o,"pie",(function(){return rh})),n.d(o,"scale",(function(){return sh})),n.d(o,"sortitems",(function(){return fh})),n.d(o,"stack",(function(){return ph})),n.d(o,"validTicks",(function(){return Cp}));var a={};n.r(a),n.d(a,"contour",(function(){return Fh})),n.d(a,"geojson",(function(){return qh})),n.d(a,"geopath",(function(){return rv})),n.d(a,"geopoint",(function(){return iv})),n.d(a,"geoshape",(function(){return ov})),n.d(a,"graticule",(function(){return bv})),n.d(a,"heatmap",(function(){return vv})),n.d(a,"isocontour",(function(){return jh})),n.d(a,"kde2d",(function(){return Dh})),n.d(a,"projection",(function(){return _v}));var s={};n.r(s),n.d(s,"force",(function(){return yx}));var l={};n.r(l),n.d(l,"nest",(function(){return __})),n.d(l,"pack",(function(){return T_})),n.d(l,"partition",(function(){return P_})),n.d(l,"stratify",(function(){return N_})),n.d(l,"tree",(function(){return D_})),n.d(l,"treelinks",(function(){return z_})),n.d(l,"treemap",(function(){return B_}));var u={};n.r(u),n.d(u,"loess",(function(){return $_})),n.d(u,"regression",(function(){return W_}));var c={};n.r(c),n.d(c,"voronoi",(function(){return pw}));var f={};n.r(f),n.d(f,"wordcloud",(function(){return Aw}));var d={};n.r(d),n.d(d,"crossfilter",(function(){return Uw})),n.d(d,"resolvefilter",(function(){return $w}));var p=n(0);function h(e){var t=e||p.x,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,o=t(e);return r[o]&&(r[o]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}var m=async function(e,t){try{await t(e)}catch(t){e.error(t)}},g=Symbol("vega_id"),b=1;function y(e){return!(!e||!v(e))}function v(e){return e[g]}function x(e,t){return e[g]=t,e}function _(e){var t=e===Object(e)?e:{data:e};return v(t)?t:x(t,b++)}function w(e){return O(e,_({}))}function O(e,t){for(var n in e)t[n]=e[n];return t}function E(e,t){return x(t,v(e))}function k(e,t){return e?t?(n,r)=>e(n,r)||v(t(n))-v(t(r)):(t,n)=>e(t,n)||v(t)-v(n):null}function S(e){return e&&e.constructor===T}function T(){var e=[],t=[],n=[],r=[],i=[],o=!1;return{constructor:T,insert:function(t){for(var n=Object(p.i)(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=Object(p.D)(e)?r:t,i=Object(p.i)(e),o=0,a=i.length;o<a;++o)n.push(i[o]);return this},modify:function(e,t,r){var o={field:t,value:Object(p.l)(r)};return Object(p.D)(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode:function(e,t){return Object(p.D)(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return o=!0,this},pulse:function(a,s){var l,u,c,f,d,p,h={},m={};for(l=0,u=s.length;l<u;++l)h[v(s[l])]=1;for(l=0,u=t.length;l<u;++l)h[v(d=t[l])]=-1;for(l=0,u=r.length;l<u;++l)f=r[l],s.forEach((function(e){f(e)&&(h[v(e)]=-1)}));for(l=0,u=e.length;l<u;++l)p=v(d=e[l]),h[p]?h[p]=1:a.add.push(_(e[l]));for(l=0,u=s.length;l<u;++l)d=s[l],h[v(d)]<0&&a.rem.push(d);function g(e,t,n){n?e[t]=n(e):a.encode=t,o||(m[v(e)]=e)}for(l=0,u=n.length;l<u;++l)d=(c=n[l]).tuple,f=c.field,(p=h[v(d)])>0&&(g(d,f,c.value),a.modifies(f));for(l=0,u=i.length;l<u;++l)c=i[l],f=c.filter,s.forEach((function(e){f(e)&&h[v(e)]>0&&g(e,c.field,c.value)})),a.modifies(c.field);if(o)a.mod=t.length||r.length?s.filter((function(e){return h[v(e)]>0})):s.slice();else for(p in m)a.mod.push(m[p]);return a}}}var j="_:mod:_";function A(){Object.defineProperty(this,j,{writable:!0,value:{}})}var P=A.prototype;P.set=function(e,t,n,r){var i=this,o=i[e],a=i[j];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=Object(p.A)(n)?1+n.length:-1),i},P.modified=function(e,t){var n,r=this[j];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(p.A)(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},P.clear=function(){return this[j]={},this};var C=0,N=new A;function M(e,t,n,r){this.id=++C,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}var I=M.prototype;function D(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}I.targets=function(){return this._targets||(this._targets=h(p.w))},I.set=function(e){return this.value!==e?(this.value=e,1):0},I.skip=D(1),I.modified=D(2),I.parameters=function(e,t,n){t=!1!==t;var r,i,o,a,s=this,l=s._argval=s._argval||new A,u=s._argops=s._argops||[],c=[];function f(e,n,r){r instanceof M?(r!==s&&(t&&r.targets().add(s),c.push(r)),u.push({op:r,name:e,index:n})):l.set(e,n,r)}for(r in e)if(i=e[r],"pulse"===r)Object(p.i)(i).forEach((function(e){e instanceof M?e!==s&&(e.targets().add(s),c.push(e)):Object(p.n)("Pulse parameters must be operator instances.")})),s.source=i;else if(Object(p.A)(i))for(l.set(r,-1,Array(o=i.length)),a=0;a<o;++a)f(r,a,i[a]);else f(r,-1,i);return this.marshall().clear(),n&&(u.initonly=!0),c},I.marshall=function(e){var t,n,r,i,o,a=this._argval||N,s=this._argops;if(s){for(n=0,r=s.length;n<r;++n)o=(i=(t=s[n]).op).modified()&&i.stamp===e,a.set(t.name,t.index,i.value,o);if(s.initonly){for(n=0;n<r;++n)(t=s[n]).op.targets().remove(this);this._argops=null,this._update=null}}return a},I.evaluate=function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},I.run=function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e);var t};var R=0;function z(e,t,n){this.id=++R,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function L(e,t,n){return new z(e,t,n)}var F=z.prototype;F._filter=p.fb,F._apply=p.x,F.targets=function(){return this._targets||(this._targets=h(p.w))},F.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},F.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},F.filter=function(e){var t=L(e);return this.targets().add(t),t},F.apply=function(e){var t=L(null,e);return this.targets().add(t),t},F.merge=function(){var e=L();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},F.throttle=function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},F.debounce=function(e){var t=L();return this.targets().add(L(null,null,Object(p.m)(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},F.between=function(e,t){var n=!1;return e.targets().add(L(null,null,(function(){n=!0}))),t.targets().add(L(null,null,(function(){n=!1}))),this.filter((function(){return n}))};const B=/^([A-Za-z]+:)?\/\//,U=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,q=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$="file://";async function H(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function W(e,t){t=Object(p.o)({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=U.test(e.replace(q,""));null!=e&&"string"==typeof e&&s||Object(p.n)("Sanitize failure, invalid URI: "+Object(p.Y)(e));const l=B.test(e);return(a=t.baseURL)&&!l&&(e.startsWith("/")||"/"===a[a.length-1]||(e="/"+e),e=a+e),o=(i=e.startsWith($))||"file"===t.mode||"http"!==t.mode&&!l&&n,i?e=e.slice($.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),r}function V(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:G}async function G(){Object(p.n)("No file system access.")}function Y(e){return e?async function(t,n){const r=Object(p.o)({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Object(p.D)(o[i])?o[i]():o.text():Object(p.n)(o.status+""+o.statusText)}:X}async function X(){Object(p.n)("No HTTP fetch method available.")}var K={boolean:p.Z,integer:p.bb,number:p.bb,date:p.ab,string:p.db,unknown:p.x},J=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return te(e)&&Number.isInteger(+e)},te,function(e){return!Number.isNaN(Date.parse(e))}],Z=["boolean","integer","number","date"];function Q(e,t){if(!e||!e.length)return"unknown";var n,r,i,o,a=0,s=e.length,l=J.length,u=J.map((function(e,t){return t+1}));for(r=0,s=e.length;r<s;++r)for(n=t?e[r][t]:e[r],i=0;i<l;++i)if(u[i]&&(null!=(o=n)&&o==o)&&!J[i](n)&&(u[i]=0,++a===J.length))return"string";return a=u.reduce((function(e,t){return 0===e?t:e}),0)-1,Z[a]}function ee(e,t){return t.reduce((function(t,n){return t[n]=Q(e,n),t}),{})}function te(e){return!(Number.isNaN(+e)||e instanceof Date)}var ne={},re={},ie=34,oe=10,ae=13;function se(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}")}function le(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function ue(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function ce(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+ue(-t,6):t>9999?"+"+ue(t,6):ue(t,4))+"-"+ue(e.getUTCMonth()+1,2)+"-"+ue(e.getUTCDate(),2)+(o?"T"+ue(n,2)+":"+ue(r,2)+":"+ue(i,2)+"."+ue(o,3)+"Z":i?"T"+ue(n,2)+":"+ue(r,2)+":"+ue(i,2)+"Z":r||n?"T"+ue(n,2)+":"+ue(r,2)+"Z":"")}var fe=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return re;if(u)return u=!1,ne;var t,r,i=a;if(e.charCodeAt(i)===ie){for(;a++<o&&e.charCodeAt(a)!==ie||e.charCodeAt(++a)===ie;);return(t=a)>=o?l=!0:(r=e.charCodeAt(a++))===oe?u=!0:r===ae&&(u=!0,e.charCodeAt(a)===oe&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if((r=e.charCodeAt(t=a++))===oe)u=!0;else if(r===ae)u=!0,e.charCodeAt(a)===oe&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(e.charCodeAt(o-1)===oe&&--o,e.charCodeAt(o-1)===ae&&--o;(r=c())!==re;){for(var f=[];r!==ne&&r!==re;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?ce(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=se(e);return function(r,i){return t(n(r),i,e)}}(e,t):se(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=le(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=le(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")}}},de=fe(","),pe=(de.parse,de.parseRows,de.format,de.formatBody,de.formatRows,fe("\t"));pe.parse,pe.parseRows,pe.format,pe.formatBody,pe.formatRows;function he(e){const t=function(t,n){const r={delimiter:e};return me(t,n?Object(p.o)(n,r):r)};return t.responseType="text",t}function me(e,t){return t.header&&(e=t.header.map(p.Y).join(t.delimiter)+"\n"+e),fe(t.delimiter).parse(e+"")}me.responseType="text";var ge=n(103),be=function(e){return e},ye=function(e){if(null==e)return be;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var l=2,u=e.length,c=new Array(u);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;l<u;)c[l]=e[l],++l;return c}},ve=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n},xe=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return _e(e,t)}))}:_e(e,t)};function _e(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=we(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function we(e,t){var n=ye(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&ve(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(t)}var Oe=function(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],l=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=l,o=r[l]){delete r[o.start];var u=o===n?n:n.concat(o);r[u.start=n.start]=i[u.end=o.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=l]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o},Ee=function(e){return we(e,ke.apply(this,arguments))};function ke(e,t,n){var r,i,o;if(arguments.length>1)r=function(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function l(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(l)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Oe(e,r)}}const Se={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Te(e,t){let n,r,i,o;return e=Object(ge.a)(e,t),t&&t.feature?(n=xe,i=t.feature):t&&t.mesh?(n=Ee,i=t.mesh,o=Se[t.filter]):Object(p.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,o):Object(p.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}Te.responseType="json";const je={dsv:me,csv:he(","),tsv:he("\t"),json:ge.a,topojson:Te};function Ae(e,t){return arguments.length>1?(je[e]=t,this):Object(p.v)(je,e)?je[e]:null}function Pe(e){const t=Ae(e);return t&&t.responseType||"text"}var Ce=n(981),Ne=function(e,t,n){const r=Ae((t=t||{}).type||"json");return r||Object(p.n)("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(!e.length)return;n=n||Ce.c;var r,i,o,a,s,l,u,c=e.columns||Object.keys(e[0]);"auto"===t&&(t=ee(e,c));for(c=Object.keys(t),r=c.map((function(e){var r,i,o=t[e];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return("'"===(i=(r=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Object(Ce.e)(i):n(i);if(!K[o])throw Error("Illegal format pattern: "+e+":"+o);return K[o]})),a=0,l=e.length,u=c.length;a<l;++a)for(i=e[a],s=0;s<u;++s)o=c[s],i[o]=r[s](i[o])}(e,t.parse,n),Object(p.v)(e,"columns")&&delete e.columns,e};var Me=function(e,t){return function(n){return{options:n||{},sanitize:W,load:H,fileAccess:!!t,file:V(t),http:Y(e)}}}("undefined"!=typeof fetch&&fetch,null);const Ie=Ne;var De={skip:!0};function Re(e,t,n,r,i,o){var a,s,l=Object(p.o)({},o,De);Object(p.D)(n)||(n=Object(p.l)(n)),void 0===r?a=t=>e.touch(n(t)):Object(p.D)(r)?(s=new M(null,r,i,!1),a=t=>{s.evaluate(t);const r=n(t),i=s.value;S(i)?e.pulse(r,i,o):e.update(r,i,l)}):a=t=>e.update(n(t),r,l),t.apply(a)}function ze(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new M(null,function(e,t){return t=Object(p.D)(t)?t:Object(p.l)(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}var Le={};function Fe(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var Be=Fe.prototype;function Ue(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function qe(e,t){var n=[];return Object(p.hb)(e,t,(function(e){n.push(e)})),n}function $e(e,t){var n={};return e.visit(t,(function(e){n[v(e)]=1})),function(e){return n[v(e)]?null:e}}function He(e,t,n,r){var i,o,a,s,l,u=this,c=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,a=0,s=n.length;a<s;++a)if((i=n[a]).stamp===t){if(i.fields)for(l in o=u.fields||(u.fields={}),i.fields)o[l]=1;i.changed(u.ADD)&&(c|=u.ADD),i.changed(u.REM)&&(c|=u.REM),i.changed(u.MOD)&&(c|=u.MOD)}this.changes=c}Be.StopPropagation=Le,Be.ADD=1,Be.REM=2,Be.MOD=4,Be.ADD_REM=3,Be.ADD_MOD=5,Be.ALL=7,Be.REFLOW=8,Be.SOURCE=16,Be.NO_SOURCE=32,Be.NO_FIELDS=64,Be.fork=function(e){return new Fe(this.dataflow).init(this,e)},Be.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},Be.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?((e=new Fe(this.dataflow).init(this)).add=e.source,e):e},Be.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},Be.runAfter=function(e){this.dataflow.runAfter(e)},Be.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},Be.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,$e(this,1))),this},Be.modifies=function(e){var t=this.fields||(this.fields={});return Object(p.A)(e)?e.forEach(e=>t[e]=!0):t[e]=!0,this},Be.modified=function(e,t){var n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Object(p.A)(e)?e.some((function(e){return n[e]})):n[e]:!!n)},Be.filter=function(e,t){var n=this;return 1&e&&(n.addF=Ue(n.addF,t)),2&e&&(n.remF=Ue(n.remF,t)),4&e&&(n.modF=Ue(n.modF,t)),16&e&&(n.srcF=Ue(n.srcF,t)),n},Be.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=qe(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=qe(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=qe(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},Be.visit=function(e,t){var n,r,i=this,o=t;return 16&e?(Object(p.hb)(i.source,i.srcF,o),i):(1&e&&Object(p.hb)(i.add,i.addF,o),2&e&&Object(p.hb)(i.rem,i.remF,o),4&e&&Object(p.hb)(i.mod,i.modF,o),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(p.hb)(n,$e(i,5),o):Object(p.hb)(n,i.srcF,o))),i)};var We=Object(p.y)(He,Fe);function Ve(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}We.fork=function(e){var t=new Fe(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},We.changed=function(e){return this.changes&e},We.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Object(p.A)(e)?e.some((function(e){return n[e]})):n[e]:0},We.filter=function(){Object(p.n)("MultiPulse does not support filtering.")},We.materialize=function(){Object(p.n)("MultiPulse does not support materialization.")},We.visit=function(e,t){var n=this,r=n.pulses,i=r.length,o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n};var Ge={skip:!1,force:!1};function Ye(e){var t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Xe(t,0,t.length-1,e)),pop:()=>{var n,r=t.pop();return t.length?(n=t[0],t[0]=r,function(e,t,n){var r,i=t,o=e.length,a=e[t],s=1+(t<<1);for(;s<o;)(r=s+1)<o&&n(e[s],e[r])>=0&&(s=r),e[t]=e[s],s=1+((t=s)<<1);e[t]=a,Xe(e,i,t,n)}(t,0,e)):n=r,n}}}function Xe(e,t,n,r){var i,o,a;for(i=e[n];n>t&&r(i,o=e[a=n-1>>1])<0;)e[n]=o,n=a;return e[n]=i}function Ke(){this.logger(Object(p.K)()),this.logLevel(p.b),this._clock=0,this._rank=0;try{this._loader=Me()}catch(e){}this._touched=h(p.w),this._input={},this._pulse=null,this._heap=Ye((e,t)=>e.qrank-t.qrank),this._postrun=[]}var Je=Ke.prototype;function Ze(e){return function(){return this._log[e].apply(this,arguments)}}function Qe(e,t){M.call(this,e,null,t)}Je.stamp=function(){return this._clock},Je.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},Je.cleanThreshold=1e4,Je.add=function(e,t,n,r){var i,o=1;return e instanceof M?i=e:e&&e.prototype instanceof M?i=new e:Object(p.D)(e)?i=new M(null,e):(o=0,i=new M(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},Je.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},Je.rank=function(e){e.rank=++this._rank},Je.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&Object(p.n)("Cycle detected in dataflow graph.")},Je.pulse=function(e,t,n){this.touch(e,n||Ge);var r=new Fe(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},Je.touch=function(e,t){var n=t||Ge;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},Je.update=function(e,t,n){var r=n||Ge;return(e.set(t)||r.force)&&this.touch(e,r),this},Je.changeset=T,Je.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Ie(t,n)))},Je.parse=Ie,Je.preload=async function(e,t,n){const r=this,i=r._pending||function(e){var t,n=new Promise((function(e){t=e}));return n.requests=0,n.done=function(){0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(p.fb).insert(o.data||[])),i.done(),o},Je.request=async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:Pe(t&&t.type)});try{r=Ie(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},Je.events=function(e,t,n,r){for(var i,o=this,a=L(n,r),s=function(e){e.dataflow=o;try{a.receive(e)}catch(e){o.error(e)}finally{o.run()}},l=0,u=(i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Object(p.i)(e)).length;l<u;++l)i[l].addEventListener(t,s);return a},Je.on=function(e,t,n,r,i){return(e instanceof M?ze:Re)(this,e,t,n,r,i),this},Je.evaluate=async function(e,t,n){const r=this,i=r.logLevel();if(r._pulse)return Ve(r);if(r._pending&&await r._pending,t&&await m(r,t),!r._touched.length)return r.info("Dataflow invoked, but nothing to do."),r;let o,a,s,l,u=++r._clock,c=0;r._pulse=new Fe(r,u,e),i>=p.c&&(s=Date.now(),r.debug("-- START PROPAGATION ("+u+") -----")),r._touched.forEach(e=>r._enqueue(e,!0)),r._touched=h(p.w);try{for(;r._heap.size()>0;)(o=r._heap.pop()).rank===o.qrank?((a=o.run(r._getPulse(o,e))).then&&(a=await a),i>=p.a&&r.debug(o.id,a===Le?"STOP":a,o),a!==Le&&o._targets&&o._targets.forEach(e=>r._enqueue(e)),++c):r._enqueue(o,!0)}catch(e){r._heap.clear(),l=e}if(r._input={},r._pulse=null,i>=p.c&&(s=Date.now()-s,r.info("> Pulse "+u+": "+c+" operators; "+s+"ms")),l&&(r._postrun=[],r.error(l)),r._postrun.length){const e=r._postrun.sort((e,t)=>t.priority-e.priority);r._postrun=[];for(let t=0;t<e.length;++t)await m(r,e[t].callback)}return n&&await m(r,n),r},Je.run=function(e,t,n){return this._pulse?Ve(this):(this.evaluate(e,t,n),this)},Je.runAsync=async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},Je.runAfter=function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},Je._enqueue=function(e,t){var n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},Je._getPulse=function(e,t){var n=e.source,r=this._clock;return n&&Object(p.A)(n)?new He(this,r,n.map(e=>e.pulse),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==Le&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)},Je.logger=function(e){return arguments.length?(this._log=e,this):this._log},Je.error=Ze("error"),Je.warn=Ze("warn"),Je.info=Ze("info"),Je.debug=Ze("debug"),Je.logLevel=Ze("level");var et=Object(p.y)(Qe,M);et.run=function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e).then?t=t.then(e=>this.pulse=e):t!==e.StopPropagation&&(this.pulse=t),t);var t},et.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},et.transform=function(){};var tt={};function nt(e){var t=rt(e);return t&&t.Definition||null}function rt(e){return e=e&&e.toLowerCase(),Object(p.v)(tt,e)?tt[e]:null}function it(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function ot(e,t,n){return n||e+(t?"_"+t:"")}var at={values:ut({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:ut({name:"count",set:"cell.num"}),__count__:ut({name:"count",set:"this.missing + this.valid"}),missing:ut({name:"missing",set:"this.missing"}),valid:ut({name:"valid",set:"this.valid"}),sum:ut({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:ut({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:ut({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:ut({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:ut({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:ut({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:ut({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:ut({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:ut({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:ut({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:ut({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:ut({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:ut({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:ut({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:ut({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:ut({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:ut({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (Number.isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:ut({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (Number.isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},st=Object.keys(at);function lt(e,t){return at[e](t)}function ut(e){return function(t){var n=Object(p.o)({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function ct(e,t){return e.idx-t.idx}function ft(e,t){var n=t||p.x,r=function(e,t){var n,r=e.reduce((function e(n,r){function i(t){n[t]||e(n,n[t]=at[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n}),e.reduce((function(e,t){return e[t.name]=t,e}),{})),i=[];for(n in r)i.push(r[n]);return i.sort(ct)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",o="this.cell = cell; this.init();",a="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",s="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",l="var cell = this.cell;";return r.forEach((function(e){i+=e.init,a+=e.add,s+=e.rem})),e.slice().sort(ct).forEach((function(e){l+="t["+Object(p.Y)(e.out)+"]="+e.set+";"})),l+="return t;",(o=Function("cell",o)).prototype.init=Function(i),o.prototype.add=Function("v","t",a),o.prototype.rem=Function("v","t",s),o.prototype.set=Function("t",l),o.prototype.get=n,o.fields=e.map((function(e){return e.out})),o}var dt=function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}},pt=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};function ht(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function mt(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function gt(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}var bt=function(e){return null===e?NaN:+e};function yt(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return mt(e);if(t>=1)return ht(e);var r,i=(r-1)*t,o=Math.floor(i),a=ht(function e(t,n,r=0,i=t.length-1,o=pt){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}const a=t[n];let s=r,l=i;for(gt(t,r,n),o(t[i],a)>0&&gt(t,r,i);s<l;){for(gt(t,s,l),++s,--l;o(t[s],a)<0;)++s;for(;o(t[l],a)>0;)--l}0===o(t[r],a)?gt(t,r,l):gt(t,++l,i),l<=n&&(r=l+1),n<=l&&(i=l-1)}return t}(e,o).subarray(0,o+1));return a+(mt(e.subarray(o+1))-a)*(i-o)}}var vt=function(e,t,n){var r=Float64Array.from(dt(e,n));return r.sort(pt),t.map(e=>(function(e,t,n=bt){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}})(r,e))},xt=function(e,t){return vt(e,[.25,.5,.75],t)};var _t=function(e,t){var n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(o+=(n=t-i)*(t-(i+=n/++r)));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(o+=(n=s-i)*(s-(i+=n/++r)))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=xt(e,t),o=(i[2]-i[0])/1.34;return 1.06*(r=Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)},wt=function(e){var t,n,r,i,o,a,s,l,u=e.maxbins||20,c=e.base||10,f=Math.log(c),d=e.divide||[5,2],p=e.extent[0],h=e.extent[1],m=e.span||h-p||Math.abs(p)||1;if(e.step)t=e.step;else if(e.steps){for(o=m/u,a=0,s=e.steps.length;a<s&&e.steps[a]<o;++a);t=e.steps[Math.max(0,a-1)]}else{for(n=Math.ceil(Math.log(u)/f),r=e.minstep||0,t=Math.max(r,Math.pow(c,Math.round(Math.log(m)/f)-n));Math.ceil(m/t)>u;)t*=c;for(a=0,s=d.length;a<s;++a)(o=t/d[a])>=r&&m/o<=u&&(t=o)}return i=(o=Math.log(t))>=0?0:1+~~(-o/f),l=Math.pow(c,-i-1),(e.nice||void 0===e.nice)&&(p=p<(o=Math.floor(p/t+l)*t)?o-t:o,h=Math.ceil(h/t)*t),{start:p,stop:h===p?p+t:h,step:t}},Ot=Math.random;function Et(e){Ot=e}var kt=function(e,t,n,r){if(!e.length)return[void 0,void 0];var i,o,a,s,l=Float64Array.from(dt(e,r)),u=l.length,c=t;for(a=0,s=Array(c);a<c;++a){for(i=0,o=0;o<u;++o)i+=l[~~(Ot()*u)];s[a]=i/u}return s.sort(pt),[yt(s,n/2),yt(s,1-n/2)]},St=function(e,t,n,r){r=r||(e=>e);let i,o=0,a=1,s=e.length,l=new Float64Array(s),u=r(e[0]),c=u,f=u+t;for(;a<s;++a){if((i=r(e[a]))>=f){for(c=(u+c)/2;o<a;++o)l[o]=c;f=i+t,u=i}c=i}for(c=(u+c)/2;o<a;++o)l[o]=c;return n?function(e,t){let n,r,i=e.length,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<i;){for(n=a+1;e[a]===e[n];)++n;if(e[a]-e[a-1]<t){for(r=a+(o+n-a-a>>1);r<a;)e[r++]=e[a];for(;r>a;)e[r--]=e[o]}o=a,a=n}return e}(l,t+t/4):l};var Tt=function(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}},jt=function(e,t){null==t&&(t=e,e=0);var n,r,i,o={};return o.min=function(e){return arguments.length?(i=r-(n=e||0),o):n},o.max=function(e){return arguments.length?(i=(r=e||0)-n,o):r},o.sample=function(){return n+Math.floor(i*Ot())},o.pdf=function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},o.cdf=function(e){var t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},o.icdf=function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN},o.min(e).max(t)};const At=Math.sqrt(2*Math.PI),Pt=Math.SQRT2;let Ct=NaN;function Nt(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(Ct==Ct)i=Ct,Ct=NaN;else{do{n=(i=2*Ot()-1)*i+(o=2*Ot()-1)*o}while(0===n||n>1);i*=r=Math.sqrt(-2*Math.log(n)/n),Ct=o*r}return e+i*t}function Mt(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*At)}function It(e,t,n){let r,i=(e-(t=t||0))/(n=null==n?1:n),o=Math.abs(i);if(o>37)r=0;else{let e,t=Math.exp(-o*o/2);o<7.07106781186547?(r=t*(e=(e=(e=(e=(e=(e=.0352624965998911*o+.700383064443688)*o+6.37396220353165)*o+33.912866078383)*o+112.079291497871)*o+221.213596169931)*o+220.206867912376),r/=e=(e=(e=(e=(e=(e=(e=.0883883476483184*o+1.75566716318264)*o+16.064177579207)*o+86.7807322029461)*o+296.564248779674)*o+637.333633378831)*o+793.826512519948)*o+440.413735824752):r=t/(e=o+1/(e=o+2/(e=o+3/(e=o+4/(e=o+.65)))))/2.506628274631}return i>0?1-r:r}function Dt(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*Pt*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?t=1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?(n=Math.sqrt(n)-3.25,t=3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*n)*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*n-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n):t=1/0;return t*e}(2*e-1)}var Rt=function(e,t){var n,r,i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Nt(n,r),pdf:e=>Mt(e,n,r),cdf:e=>It(e,n,r),icdf:e=>Dt(e,n,r)};return i.mean(e).stdev(t)},zt=function(e,t){var n=Rt(),r={},i=0;return r.data=function(n){return arguments.length?(e=n,i=n?n.length:0,r.bandwidth(t)):e},r.bandwidth=function(n){return arguments.length?(!(t=n)&&e&&(t=_t(e)),r):t},r.sample=function(){return e[~~(Ot()*i)]+t*n.sample()},r.pdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.pdf((r-e[a])/t);return o/t/i},r.cdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.cdf((r-e[a])/t);return o/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(e)};function Lt(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Nt()*t)}function Ft(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*At*e)}function Bt(e,t,n){return It(Math.log(e),t,n)}function Ut(e,t,n){return Math.exp(Dt(e,t,n))}var qt=function(e,t){var n,r,i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Lt(n,r),pdf:e=>Ft(e,n,r),cdf:e=>Bt(e,n,r),icdf:e=>Ut(e,n,r)};return i.mean(e).stdev(t)},$t=function(e,t){var n,r={},i=0;function o(e){var t,n=[],r=0;for(t=0;t<i;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<i;++t)n[t]/=r;return n}return r.weights=function(e){return arguments.length?(n=o(t=e||[]),r):t},r.distributions=function(n){return arguments.length?(n?(i=n.length,e=n):(i=0,e=[]),r.weights(t)):e},r.sample=function(){for(var t=Ot(),r=e[i-1],o=n[0],a=0;a<i-1;o+=n[++a])if(t<o){r=e[a];break}return r.sample()},r.pdf=function(t){for(var r=0,o=0;o<i;++o)r+=n[o]*e[o].pdf(t);return r},r.cdf=function(t){for(var r=0,o=0;o<i;++o)r+=n[o]*e[o].cdf(t);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(e).weights(t)};function Ht(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Ot()}function Wt(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function Vt(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Gt(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}var Yt=function(e,t){var n,r,i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Ht(n,r),pdf:e=>Wt(e,n,r),cdf:e=>Vt(e,n,r),icdf:e=>Gt(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)},Xt=function(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]};function Kt(e,t,n,r){e=e.filter(e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&e.sort((e,n)=>t(e)-t(n));const i=new Float64Array(e.length),o=new Float64Array(e.length);let a=0;for(let r of e)i[a]=t(r),o[a]=n(r),++a;return[i,o]}function Jt(e,t,n,r){let i,o,a=-1,s=-1;for(let l of e)i=t(l,++a,e),o=n(l,a,e),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++s)}var Zt=function(e,t,n,r,i){let o=0,a=0;return Jt(e,t,n,(e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s}),1-o/a},Qt=function(e,t,n){let r=0,i=0,o=0,a=0,s=0;Jt(e,t,n,(e,t)=>{r+=e,i+=t,o+=e*t,a+=e*e,++s});const l=Xt(r/s,i/s,o/s,a/s),u=e=>l[0]+l[1]*e;return{coef:l,predict:u,rSquared:Zt(e,t,n,i/s,u)}},en=function(e,t,n){let r=0,i=0,o=0,a=0,s=0;Jt(e,t,n,(e,t)=>{e=Math.log(e),r+=e,i+=t,o+=e*t,a+=e*e,++s});const l=Xt(r/s,i/s,o/s,a/s),u=e=>l[0]+l[1]*Math.log(e);return{coef:l,predict:u,rSquared:Zt(e,t,n,i/s,u)}},tn=function(e,t,n){let r=0,i=0,o=0,a=0,s=0,l=0;Jt(e,t,n,(e,t)=>{const n=Math.log(t),u=e*t;r+=t,o+=u,s+=e*u,i+=t*n,a+=u*n,++l});const u=Xt(o/r,i/r,a/r,s/r),c=e=>u[0]*Math.exp(u[1]*e);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Zt(e,t,n,r/l,c)}},nn=function(e,t,n){let r=0,i=0,o=0,a=0,s=0,l=0;Jt(e,t,n,(e,t)=>{const n=Math.log(e),u=Math.log(t);r+=n,i+=u,o+=n*u,a+=n*n,s+=t,++l});const u=Xt(r/l,i/l,o/l,a/l),c=e=>u[0]*Math.pow(e,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Zt(e,t,n,s/l,c)}},rn=function(e,t,n){let r=0,i=0,o=0,a=0,s=0,l=0,u=0,c=0;Jt(e,t,n,(e,t)=>{const n=e*e;r+=e,i+=t,o+=n,a+=n*e,s+=n*n,l+=e*t,u+=n*t,++c});const f=o-r*r/c,d=a-o*r/c,p=s-o*o/c,h=f*p-d*d,m=((u-=o*(i/=c))*f-(l-=r*i)*d)/h,g=(l*p-u*d)/h,b=i-g*(r/c)-m*(o/c),y=e=>m*e*e+g*e+b;return{coef:[b,g,m],predict:y,rSquared:Zt(e,t,n,i,y)}},on=function(e,t,n,r){if(1===r)return Qt(e,t,n);if(2===r)return rn(e,t,n);const[i,o]=Kt(e,t,n),a=i.length,s=[],l=[],u=r+1;let c,f,d,p,h,m=0;for(c=0;c<a;++c)m+=o[c];for(c=0;c<u;++c){for(d=0,p=0;d<a;++d)p+=Math.pow(i[d],c)*o[d];for(s.push(p),h=new Float64Array(u),f=0;f<u;++f){for(d=0,p=0;d<a;++d)p+=Math.pow(i[d],c+f);h[f]=p}l.push(h)}l.push(s);const g=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(l),b=e=>{let t=0,n=0,r=g.length;for(;n<r;++n)t+=g[n]*Math.pow(e,n);return t};return{coef:g,predict:b,rSquared:Zt(e,t,n,m/a,b)}};var an=function(e,t,n,r){const[i,o]=Kt(e,t,n,!0),a=i.length,s=Math.max(2,~~(r*a)),l=new Float64Array(a),u=new Float64Array(a),c=new Float64Array(a).fill(1);for(let e=-1;++e<=2;){const t=[0,s-1];for(let e=0;e<a;++e){const n=i[e],r=t[0],a=t[1],s=n-i[r]>i[a]-n?r:a;let f=0,d=0,p=0,h=0,m=0,g=1/Math.abs(i[s]-n||1);for(let e=r;e<=a;++e){const t=i[e],r=o[e],a=sn(Math.abs(n-t)*g)*c[e],s=t*a;f+=a,d+=s,p+=r*a,h+=r*s,m+=t*s}const[b,y]=Xt(d/f,p/f,h/f,m/f);l[e]=b+y*n,u[e]=Math.abs(o[e]-l[e]),ln(i,e+1,t)}if(2===e)break;const n=yt(u,.5,void 0);if(Math.abs(n)<1e-12)break;for(let e,t,r=0;r<a;++r)e=u[r]/(6*n),c[r]=e>=1?1e-12:(t=1-e*e)*t}return function(e,t){const n=e.length,r=[];for(let i,o=0,a=0,s=[];o<n;++o)i=e[o],s[0]===i?s[1]+=(t[o]-s[1])/++a:(a=0,s=[i,t[o]],r.push(s));return r}(i,l)};function sn(e){return(e=1-e*e*e)*e*e}function ln(e,t,n){let r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const un=.1*Math.PI/180;var cn=function(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,l=s/r,u=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)u.push(i(o+e/n*s));return u.push(i(a)),u}c.push(i(a));for(let e=n;--e>0;)c.push(i(o+e/n*s));let f=u[0],d=c[c.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=l&&fn(f,e,d)>un?c.push(e):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u};function fn(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function dn(e){this._key=e?Object(p.t)(e):v,this.reset()}var pn=dn.prototype;function hn(e){Qe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}pn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},pn.add=function(e){this._add.push(e)},pn.rem=function(e){this._rem.push(e)},pn.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,o=this._key,a=r.length,s=i.length,l=Array(a-s),u={};for(e=0;e<s;++e)u[o(i[e])]=1;for(e=0,t=0;e<a;++e)u[o(n=r[e])]?u[o(n)]=0:l[t++]=n;return this._rem=[],this._add=l},pn.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},o=0;--r>=0;)t=e(n[r])+"",Object(p.v)(i,t)||(i[t]=1,++o);return o},pn.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Object(p.q)(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},pn.argmin=function(e){return this.extent(e)[0]||{}},pn.argmax=function(e){return this.extent(e)[1]||{}},pn.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):void 0},pn.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):void 0},pn.quartile=function(e){return this._get===e&&this._q||(this._q=xt(this.values(),e),this._get=e),this._q},pn.q1=function(e){return this.quartile(e)[0]},pn.q2=function(e){return this.quartile(e)[1]},pn.q3=function(e){return this.quartile(e)[2]},pn.ci=function(e){return this._get===e&&this._ci||(this._ci=kt(this.values(),1e3,.05,e),this._get=e),this._ci},pn.ci0=function(e){return this.ci(e)[0]},pn.ci1=function(e){return this.ci(e)[1]},hn.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:st},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var mn=Object(p.y)(hn,Qe);mn.transform=function(e,t){var n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,e=>n.add(e))):(n.value=n.value||n.init(e),t.visit(t.REM,e=>n.rem(e)),t.visit(t.ADD,e=>n.add(e))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),n.changes(r)},mn.cross=function(){var e=this,t=e.value,n=e._dnames,r=n.map((function(){return{}})),i=n.length;function o(e){var t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,l){var u,c,f=n[l],d=r[l++];for(u in d)s[f]=d[u],c=a?a+"|"+u:u,l<i?o(c,s,l):t[c]||e.cell(c,s)}("",{},0)},mn.init=function(e){var t=this._inputs=[],n=this._outputs=[],r={};function i(e){for(var n,i=Object(p.i)(Object(p.g)(e)),o=0,a=i.length;o<a;++o)r[n=i[o]]||(r[n]=1,t.push(n))}this._dims=Object(p.i)(e.groupby),this._dnames=this._dims.map((function(e){var t=Object(p.h)(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:it(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var o,a,s,l,u,c,f=e.fields||[null],d=e.ops||["count"],h=e.as||[],m=f.length,g={};for(m!==d.length&&Object(p.n)("Unmatched number of fields and aggregate ops."),c=0;c<m;++c)o=f[c],a=d[c],null==o&&"count"!==a&&Object(p.n)("Null aggregate field specified."),u=ot(a,l=Object(p.h)(o),h[c]),n.push(u),"count"!==a?((s=g[l])||(i(o),(s=g[l]=[]).field=o,this._measures.push(s)),"count"!==a&&(this._countOnly=!1),s.push(lt(a,u))):this._counts.push(u);return this._measures=this._measures.map((function(e){return ft(e,e.field)})),{}},mn.cellkey=it(),mn.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},mn.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,o=i.length;for(n.agg=Array(o),r=0;r<o;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new dn),n},mn.newtuple=function(e,t){var n,r,i=this._dnames,o=this._dims,a={};for(n=0,r=o.length;n<r;++n)a[i[n]]=o[n](e);return t?E(t.tuple,a):_(a)},mn.add=function(e){var t,n,r,i=this.cellkey(e),o=this.cell(i,e);if(o.num+=1,!this._countOnly)for(o.store&&o.data.add(e),n=0,r=(t=o.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},mn.rem=function(e){var t,n,r,i=this.cellkey(e),o=this.cell(i,e);if(o.num-=1,!this._countOnly)for(o.store&&o.data.rem(e),n=0,r=(t=o.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},mn.celltuple=function(e){var t,n,r,i=e.tuple,o=this._counts;for(e.store&&e.data.values(),n=0,r=o.length;n<r;++n)i[o[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},mn.changes=function(e){var t,n,r,i,o=this._adds,a=this._mods,s=this._prev,l=this._drop,u=e.add,c=e.rem,f=e.mod;if(s)for(n in s)t=s[n],l&&!t.num||c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)u.push(this.celltuple(o[r])),o[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=a[r]).num&&l?c:f).push(this.celltuple(t)),a[r]=null;return this._alen=this._mlen=0,this._prev=null,e};function gn(e){Qe.call(this,null,e)}gn.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var bn=Object(p.y)(gn,Qe);bn.transform=function(e,t){var n,r=!1!==e.interval,i=this._bins(e),o=i.start,a=i.step,s=e.as||["bin0","bin1"],l=s[0],u=s[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Object(p.g)(e.field))?t.ADD_MOD:t.ADD,t.visit(n,r?function(e){var t=i(e);e[l]=t,e[u]=null==t?null:o+a*(1+(t-o)/a)}:function(e){e[l]=i(e)}),t.modifies(r?s:l)},bn._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=wt(e),o=i.start,a=i.stop,s=i.step;null!=(t=e.anchor)&&(n=t-(o+s*Math.floor((t-o)/s)),o+=n,a+=n);var l=function(e){var t=r(e);return null==t?null:(t=Math.max(o,Math.min(+t,a-s)),o+s*Math.floor(1e-14+(t-o)/s))};return l.start=o,l.stop=a,l.step=s,this.value=Object(p.f)(l,Object(p.g)(r),e.name||"bin_"+Object(p.h)(r))};var yn=function(e,t,n){var r=e,i=t||[],o=n||[],a={},s=0;return{add:function(e){o.push(e)},remove:function(e){a[r(e)]=++s},size:function(){return i.length},data:function(e,t){return s&&(i=i.filter((function(e){return!a[r(e)]})),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?Object(p.L)(e,i,o.sort(e)):i.concat(o),o=[]),i}}};function vn(e){Qe.call(this,[],e)}function xn(e){M.call(this,null,_n,e)}function _n(e){return this.value&&!e.modified()?this.value:Object(p.k)(e.fields,e.orders)}function wn(e){Qe.call(this,null,e)}vn.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(p.y)(vn,Qe).transform=function(e,t){var n=t.fork(t.ALL),r=yn(v,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(k(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n},Object(p.y)(xn,M),wn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var On=Object(p.y)(wn,Qe);function En(e){Qe.call(this,null,e)}On.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],l=0,u=i.length;l<u;++l)a.test(r=i[l])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n((function(e){i[e]=1+(i[e]||0)})),c=n((function(e){i[e]-=1}));return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},On._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},On._finish=function(e,t){var n,r,i,o=this._counts,a=this._tuples||(this._tuples={}),s=t[0],l=t[1],u=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in o)r=a[n],i=o[n]||0,!r&&i?(a[n]=r=_({}),r[s]=n,r[l]=i,u.add.push(r)):0===i?(r&&u.rem.push(r),o[n]=null,a[n]=null):r[l]!==i&&(r[l]=i,u.mod.push(r));return u.modifies(t)},En.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(p.y)(En,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],o=i[0],a=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},l=e.length,u=0;u<l;++u)for(s[t]=o=e[u],i=0;i<l;++i)s[n]=e[i],r(s)&&(a.push(_(s)),(s={})[t]=o);return a}(r,o,a,e.filter||p.fb)):n.mod=r,n.source=this.value,n.modifies(i)};var kn={kde:zt,mixture:$t,normal:Rt,lognormal:qt,uniform:Yt},Sn="distributions",Tn="function",jn="field";function An(e){Qe.call(this,null,e)}var Pn=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Cn={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Pn},{name:"weights",type:"number",array:!0}]};function Nn(e,t){return e?e.map((function(e,n){return t[n]||Object(p.h)(e)})):null}function Mn(e,t,n){var r,i,o,a,s,l,u=[],c=function(e){return e(a)};if(null==t)u.push(e.map(n));else for(r={},i=0,o=e.length;i<o;++i)a=e[i],(l=r[s=t.map(c)])||(r[s]=l=[],l.dims=s,u.push(l)),l.push(n(a));return u}An.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Pn.concat(Cn)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(p.y)(An,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=function e(t,n){var r=t[Tn];Object(p.v)(kn,r)||Object(p.n)("Unknown distribution function: "+r);var i=kn[r]();for(var o in t)o===jn?i.data((t.from||n()).map(t[o])):o===Sn?i[o](t[o].map((function(t){return e(t,n)}))):typeof i[o]===Tn&&i[o](t[o]);return i}(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&Object(p.n)("Invalid density method: "+a),e.extent||r.data||Object(p.n)("Missing density extent parameter."),a=r[a];var s=e.as||["value","density"],l=e.extent||Object(p.p)(r.data()),u=cn(a,l,i,o).map(e=>{var t={};return t[s[0]]=e[0],t[s[1]]=e[1],_(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n};function In(e){Qe.call(this,null,e)}function Dn(e){M.call(this,null,Rn,e),this.modified(!0)}function Rn(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:Object(p.f)(n=>t(n,e),Object(p.g)(t),Object(p.h)(t))}function zn(e){Qe.call(this,[void 0,void 0],e)}function Ln(e,t){M.call(this,e),this.parent=t}In.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},Object(p.y)(In,Qe).transform=function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=Mn(t.source,e.groupby,p.x),i=e.smooth||!1,o=e.field,a=e.step||function(e,t){return Object(p.W)(Object(p.p)(e,t))/30}(n,o),s=k((e,t)=>o(e)-o(t)),l=e.as||"bin",u=r.length;let c,f=1/0,d=-1/0,h=0;for(;h<u;++h){const e=r[h].sort(s);c=-1;for(const t of St(e,a,i,o))t<f&&(f=t),t>d&&(d=t),e[++c][l]=t}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(l)},Object(p.y)(Dn,M),zn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(p.y)(zn,Qe).transform=function(e,t){var n,r=this.value,i=e.field,o=r[0],a=r[1];if(((n=t.changed()||t.modified(i.fields)||e.modified("field"))||null==o)&&(o=1/0,a=-1/0),t.visit(n?t.SOURCE:t.ADD,(function(e){var t=i(e);null!=t&&((t=+t)<o&&(o=t),t>a&&(a=t))})),!Number.isFinite(o)||!Number.isFinite(a)){let e=Object(p.h)(i);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]};var Fn=Object(p.y)(Ln,M);function Bn(e){Qe.call(this,{},e),this._keys=Object(p.s)();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}Fn.connect=function(e){return this.targets().add(e),e.source=this},Fn.add=function(e){this.value.add.push(e)},Fn.rem=function(e){this.value.rem.push(e)},Fn.mod=function(e){this.value.mod.push(e)},Fn.init=function(e){this.value.init(e,e.NO_SOURCE)},Fn.evaluate=function(){return this.value};var Un=Object(p.y)(Bn,Qe);function qn(e){M.call(this,null,$n,e)}function $n(e){return this.value&&!e.modified()?this.value:Object(p.A)(e.name)?Object(p.i)(e.name).map((function(e){return Object(p.t)(e)})):Object(p.t)(e.name,e.as)}function Hn(e){Qe.call(this,Object(p.s)(),e)}function Wn(e){Qe.call(this,[],e)}function Vn(e){Qe.call(this,[],e)}function Gn(e){Qe.call(this,null,e)}function Yn(e){Qe.call(this,[],e)}function Xn(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Kn(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}Un.activate=function(e){this._targets[this._targets.active++]=e},Un.subflow=function(e,t,n,r){var i,o,a=this.value,s=Object(p.v)(a,e)&&a[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[e])&&o.tuple,s=(i=n.dataflow).add(new Ln(n.fork(n.NO_SOURCE),this)).connect(t(i,e,o)),a[e]=s,this.activate(s)),s},Un.transform=function(e,t){var n=t.dataflow,r=this,i=e.key,o=e.subflow,a=this._keys,s=e.modified("key");function l(e){return r.subflow(e,o,t)}return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,(function(e){var t=v(e),n=a.get(t);void 0!==n&&(a.delete(t),l(n).rem(e))})),t.visit(t.ADD,(function(e){var t=i(e);a.set(v(e),t),l(t).add(e)})),s||t.modified(i.fields)?t.visit(t.MOD,(function(e){var t=v(e),n=a.get(t),r=i(e);n===r?l(r).mod(e):(a.set(t,r),l(n).rem(e),l(r).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){l(a.get(v(e))).mod(e)})),s&&t.visit(t.REFLOW,(function(e){var t=v(e),n=a.get(t),r=i(e);n!==r&&(a.set(t,r),l(n).rem(e),l(r).add(e))})),a.empty>n.cleanThreshold&&n.runAfter(a.clean),t},Object(p.y)(qn,M),Hn.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(p.y)(Hn,Qe).transform=function(e,t){var n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,l=e.expr,u=!0;function c(t){var n=v(t),i=l(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?u&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,(function(e){var t=v(e);r.has(t)?r.delete(t):a.push(e)})),t.visit(t.ADD,(function(t){l(t,e)?o.push(t):r.set(v(t),1)})),t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},Wn.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(p.y)(Wn,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Nn(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,s,l,u=r.map(t=>t(e)),c=u.reduce((e,t)=>Math.max(e,t.length),0),f=0;f<c;++f){for(s=w(e),t=0;t<a;++t)s[i[t]]=null==(l=u[t][f])?null:l;o&&(s[o]=f),n.add.push(s)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)},Vn.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(p.y)(Vn,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(p.h),o=e.as||["key","value"],a=o[0],s=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,o=0;o<l;++o)(t=w(e))[a]=i[o],t[s]=r[o](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(o)},Gn.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(p.y)(Gn,Qe).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,t=>t[r]=n(t,e))},Object(p.y)(Yn,Qe).transform=function(e,t){var n,r,i,o=this.value,a=t.fork(t.ALL),s=e.size-o.length,l=e.generator;if(s>0){for(n=[];--s>=0;)n.push(i=_(l(e))),o.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(n):n}else r=o.slice(0,-s),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,o=o.slice(-s);return a.source=this.value=o,a};var Jn=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};function Zn(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Qn(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return Kn(e);if(t>=1)return Xn(e);var r,i=(r-1)*t,o=Math.floor(i),a=Xn(function e(t,n,r=0,i=t.length-1,o=Jn){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}const a=t[n];let s=r,l=i;for(Zn(t,r,n),o(t[i],a)>0&&Zn(t,r,i);s<l;){for(Zn(t,s,l),++s,--l;o(t[s],a)<0;)++s;for(;o(t[l],a)>0;)--l}0===o(t[r],a)?Zn(t,r,l):Zn(t,++l,i),l<=n&&(r=l+1),n<=l&&(i=l-1)}return t}(e,o).subarray(0,o+1));return a+(Kn(e.subarray(o+1))-a)*(i-o)}}var er={value:"value",median:function(e,t){return Qn(e,.5,t)},mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:Kn,max:Xn},tr=[];function nr(e){Qe.call(this,[],e)}function rr(e){hn.call(this,e)}nr.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(p.y)(nr,Qe).transform=function(e,t){var n,r,i,o,a,s,l,u,c,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||er.value;if(null!=er[n])return n===er.value?(t=void 0!==e.value?e.value:0,function(){return t}):er[n];Object(p.n)("Unrecognized imputation method: "+n)}(e),m=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),g=Object(p.h)(e.field),b=Object(p.h)(e.key),y=(e.groupby||[]).map(p.h),v=function(e,t,n,r){var i,o,a,s,l,u,c,f,d=function(e){return e(f)},p=[],h=r?r.slice():[],m={},g={};for(h.forEach((function(e,t){m[e]=t+1})),s=0,c=e.length;s<c;++s)f=e[s],u=n(f),l=m[u]||(m[u]=h.push(u)),o=(i=t?t.map(d):tr)+"",(a=g[o])||(a=g[o]=[],p.push(a),a.values=i),a[l-1]=f;return p.domain=h,p}(t.source,e.groupby,e.key,e.keyvals),x=[],w=this.value,O=v.domain.length;for(a=0,u=v.length;a<u;++a)for(i=(n=v[a]).values,r=NaN,l=0;l<O;++l)if(null==n[l]){for(o=v.domain[l],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[b]=o,f[g]=Number.isNaN(r)?r=h(n,m):r,x.push(_(f))}return x.length&&(d.add=d.materialize(d.ADD).add.concat(x)),w.length&&(d.rem=d.materialize(d.REM).rem.concat(w)),this.value=x,d},rr.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:st},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var ir=Object(p.y)(rr,hn);function or(e){Qe.call(this,null,e)}function ar(e){M.call(this,null,sr,e)}function sr(e){return this.value&&!e.modified()?this.value:Object(p.I)(e.fields,e.flat)}function lr(e){Qe.call(this,[],e)}function ur(e,t,n){n.forEach(_);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.add=r.source=n,r}function cr(e){Qe.call(this,{},e)}function fr(e){M.call(this,null,dr,e)}function dr(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,o=-1/0,a=e.extents;for(t=0,n=a.length;t<n;++t)(r=a[t])[0]<i&&(i=r[0]),r[1]>o&&(o=r[1]);return[i,o]}function pr(e){M.call(this,null,hr,e)}function hr(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function mr(e){Qe.call(this,null,e)}function gr(e){hn.call(this,e)}ir.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs,!0))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){r.rem(e)})),t.visit(t.ADD,(function(e){r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){Object(p.o)(e,n[r.cellkey(e)].tuple)})),t.reflow(i).modifies(this._outputs)},ir.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},or.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(p.y)(or,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Mn(r,e.groupby,e.field),o=(e.groupby||[]).map(p.h),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(p.n)("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=Object(p.p)(r,e.field)),f=d=e.steps||d),i.forEach(t=>{const n=zt(t,a)[s],r=e.counts?t.length:1,i=c||Object(p.p)(t);cn(n,i,f,d).forEach(e=>{const n={};for(let e=0;e<o.length;++e)n[o[e]]=t.dims[e];n[l[0]]=e[0],n[l[1]]=e[1]*r,u.push(_(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n},Object(p.y)(ar,M),Object(p.y)(lr,Qe).transform=function(e,t){const n=t.dataflow;return e.values?ur(this,t,n.parse(e.values,e.format)):n.request(e.url,e.format).then(e=>ur(this,t,Object(p.i)(e.data)))},cr.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(p.y)(cr,Qe).transform=function(e,t){var n,r,i=t,o=e.as,a=e.fields,s=e.index,l=e.values,u=null==e.default?null:e.default,c=e.modified(),f=c?t.SOURCE:t.ADD,d=a.length;return l?(r=l.length,d>1&&!o&&Object(p.n)('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==d*r&&Object(p.n)('The "as" parameter has too few output field names.'),o=o||l.map(p.h),n=function(e){for(var t,n,i=0,c=0;i<d;++i)if(null==(n=s.get(a[i](e))))for(t=0;t<r;++t,++c)e[o[c]]=u;else for(t=0;t<r;++t,++c)e[o[c]]=l[t](n)}):(o||Object(p.n)("Missing output field names."),n=function(e){for(var t,n=0;n<d;++n)t=s.get(a[n](e)),e[o[n]]=null==t?u:t}),c?i=t.reflow(!0):f|=a.some((function(e){return t.modified(e.fields)}))?t.MOD:0,t.visit(f,n),i.modifies(o)},Object(p.y)(fr,M),Object(p.y)(pr,M),Object(p.y)(mr,Qe),mr.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},gr.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:st,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var br=Object(p.y)(gr,hn);function yr(e){Bn.call(this,e)}function vr(e){Qe.call(this,null,e)}function xr(e){Qe.call(this,null,e)}br._transform=br.transform,br.transform=function(e,t){return this._transform(function(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=Object(p.g)(n).concat(Object(p.g)(r)),a=function(e,t,n){var r={},i=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort((function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)})),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map((function(){return i})),fields:a.map((function(e){return function(e,t,n,r){return Object(p.f)((function(r){return t(r)===e?n(r):NaN}),r,e+"")}(e,n,r,o)})),as:a.map((function(e){return e+""})),modified:e.modified.bind(e)}}(e,t),t)},Object(p.y)(yr,Bn).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(Object(p.g)(i)))&&Object(p.n)("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,(function(e){var o=n.subflow(v(e),r,t,e);i?i(e).forEach((function(e){o.mod(e)})):o.mod(e)})),t.visit(t.ADD,(function(e){var o=n.subflow(v(e),r,t,e);i?i(e).forEach((function(e){o.add(_(e))})):o.add(e)})),t.visit(t.REM,(function(e){var o=n.subflow(v(e),r,t,e);i?i(e).forEach((function(e){o.rem(e)})):o.rem(e)})),t},vr.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(p.y)(vr,Qe).transform=function(e,t){var n,r,i=e.fields,o=Nn(e.fields,e.as||[]),a=i?function(e,t){return function(e,t,n,r){for(var i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,i,o)}:O;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=v(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=a(e,_({}));r[v(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){n.mod.push(a(e,r[v(e)]))})),n},Object(p.y)(xr,Qe).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var _r=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function wr(e){Qe.call(this,null,e)}wr.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Or=Object(p.y)(wr,Qe);function Er(e){Qe.call(this,null,e)}function kr(e){Qe.call(this,[],e),this.count=0}function Sr(e){Qe.call(this,null,e)}function Tr(e){Qe.call(this,null,e),this.modified(!0)}Or.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=Mn(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(p.h),a=[],s=e.step||.01,l=e.probs||_r(s/2,1-1e-14,s),u=l.length;return i.forEach(e=>{const t=vt(e,l);for(let n=0;n<u;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=l[n],i[r[1]]=t[n],a.push(_(i))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n},Object(p.y)(Er,Qe).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,e=>{var t=v(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,e=>{var t=w(e);r[v(e)]=t,n.add.push(t)}),t.visit(t.MOD,e=>{var t,i=r[v(e)];for(t in e)i[t]=e[t],n.modifies(t);n.mod.push(i)})),n},kr.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(p.y)(kr,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value,a=this.count,s=0,l=o.reduce((function(e,t){return e[v(t)]=1,e}),{});function u(e){var t,r;o.length<i?o.push(e):(r=~~((a+1)*Ot()))<o.length&&r>=s&&(t=o[r],l[v(t)]&&n.rem.push(t),o[r]=e),++a}if(t.rem.length&&(t.visit(t.REM,(function(e){var t=v(e);l[t]&&(l[t]=-1,n.rem.push(e)),--a})),o=o.filter((function(e){return-1!==l[v(e)]}))),(t.rem.length||r)&&o.length<i&&t.source&&(s=a=o.length,t.visit(t.SOURCE,(function(e){l[v(e)]||u(e)})),s=-1),r&&o.length>i){for(var c=0,f=o.length-i;c<f;++c)l[v(o[c])]=-1,n.rem.push(o[c]);o=o.slice(f)}return t.mod.length&&t.visit(t.MOD,(function(e){l[v(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,u),(t.add.length||s<0)&&(n.add=o.filter((function(e){return!l[v(e)]}))),this.count=a,this.value=n.source=o,n},Sr.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(p.y)(Sr,Qe).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=_r(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,_(t)})),n.add=t.add.concat(this.value),n}},Object(p.y)(Tr,Qe).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};const jr="year",Ar="quarter",Pr="month",Cr="week",Nr="date",Mr="day",Ir="hours",Dr="minutes",Rr="seconds",zr="milliseconds",Lr=[jr,Ar,Pr,Cr,Nr,Mr,Ir,Dr,Rr,zr].reduce((e,t,n)=>(e[t]=1+n,e),{});function Fr(e){const t=Object(p.i)(e).slice(),n={};return t.length||Object(p.n)("Missing time unit."),t.forEach(e=>{Object(p.v)(Lr,e)?n[e]=1:Object(p.n)(`Invalid time unit: ${e}.`)}),(n[Cr]||n[Mr])&&(n[Ar]||n[Pr]||n[Nr])&&Object(p.n)(`Incompatible time units: ${e}`),t.sort((e,t)=>Lr[e]-Lr[t]),t}var Br=n(968),Ur=n(966);const qr=new Date;function $r(e,t,n,r){const i=t||1,o=Object(p.T)(e),a=(e,t,r)=>(function(e,t,n){return t<=1?e:n?(r,i)=>n+t*Math.floor((e(r,i)-n)/t):(n,r)=>t*Math.floor(e(n,r)/t)})(n[r||e],e===o&&i,t),s=new Date,l=Object(p.cb)(e),u=l[jr]?a(jr):Object(p.l)(2012),c=l[Pr]?a(Pr):l[Ar]?a(Ar):p.jb,f=l[Cr]&&l[Mr]?a(Mr,1,Cr+Mr):l[Cr]?a(Cr,1):l[Mr]?a(Mr,1):l[Nr]?a(Nr,1):p.N,d=l[Ir]?a(Ir):p.jb,h=l[Dr]?a(Dr):p.jb,m=l[Rr]?a(Rr):p.jb,g=l[zr]?a(zr):p.jb;return function(e){s.setTime(+e);const t=u(s);return r(t,c(s),f(s,t),d(s),h(s),m(s),g(s))}}function Hr(e,t,n){return t+7*e-(n+6)%7}const Wr={[jr]:e=>e.getFullYear(),[Ar]:e=>3*~~(e.getMonth()/3),[Pr]:e=>e.getMonth(),[Nr]:e=>e.getDate(),[Ir]:e=>e.getHours(),[Dr]:e=>e.getMinutes(),[Rr]:e=>e.getSeconds(),[zr]:e=>e.getMilliseconds(),[Mr]:(e,t)=>Hr(1,e.getDay(),Yr(t)),[Cr]:(e,t)=>Hr(Gr(e),0,Yr(t)),[Cr+Mr]:(e,t)=>Hr(Gr(e),e.getDay(),Yr(t))};function Vr(e){return qr.setFullYear(e),qr.setMonth(0),qr.setDate(1),qr.setHours(0,0,0,0),qr}function Gr(e){return Br.b.count(Vr(e.getFullYear())-1,e)}function Yr(e){return Vr(e).getDay()}function Xr(e,t,n,r,i,o,a){if(0<=e&&e<100){var s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function Kr(e,t){return $r(e,t||1,Wr,Xr)}const Jr={[jr]:e=>e.getUTCFullYear(),[Ar]:e=>3*~~(e.getUTCMonth()/3),[Pr]:e=>e.getUTCMonth(),[Nr]:e=>e.getUTCDate(),[Ir]:e=>e.getUTCHours(),[Dr]:e=>e.getUTCMinutes(),[Rr]:e=>e.getUTCSeconds(),[zr]:e=>e.getUTCMilliseconds(),[Mr]:(e,t)=>Hr(1,e.getUTCDay(),Qr(t)),[Cr]:(e,t)=>Hr(Zr(e),0,Qr(t)),[Cr+Mr]:(e,t)=>Hr(Zr(e),e.getUTCDay(),Qr(t))};function Zr(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ur.b.count(t-1,e)}function Qr(e){return qr.setTime(Date.UTC(e,0,1)),qr.getUTCDay()}function ei(e,t,n,r,i,o,a){if(0<=e&&e<100){var s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function ti(e,t){return $r(e,t||1,Jr,ei)}var ni=n(970),ri=n(972),ii=n(969),oi=n(973),ai=n(974),si=n(975),li=n(976),ui=n(971),ci=n(977),fi=n(967),di=n(978),pi=n(979);const hi={[jr]:ni.a,[Ar]:ri.a.every(3),[Pr]:ri.a,[Cr]:Br.b,[Nr]:ii.a,[Mr]:ii.a,[Ir]:oi.a,[Dr]:ai.a,[Rr]:si.a,[zr]:li.a},mi={[jr]:ui.a,[Ar]:ci.a.every(3),[Pr]:ci.a,[Cr]:Ur.b,[Nr]:fi.a,[Mr]:fi.a,[Ir]:di.a,[Dr]:pi.a,[Rr]:si.a,[zr]:li.a};function gi(e){return hi[e]}function bi(e){return mi[e]}function yi(e,t,n){return e?e.offset(t,n):void 0}function vi(e,t,n){return yi(gi(e),t,n)}function xi(e,t,n){return yi(bi(e),t,n)}function _i(e,t,n,r){return e?e.range(t,n,r):void 0}function wi(e,t,n,r){return _i(gi(e),t,n,r)}function Oi(e,t,n,r){return _i(bi(e),t,n,r)}const Ei={[jr]:"%Y ",[Ar]:"Q%q ",[Pr]:"%b ",[Nr]:"%d ",[Cr]:"W%U ",[Mr]:"%a ",[Ir]:"%H:00",[Dr]:"00:%M",[Rr]:":%S",[zr]:".%L",[`${jr}-${Pr}`]:"%Y-%m ",[`${jr}-${Pr}-${Nr}`]:"%Y-%m-%d ",[`${Ir}-${Dr}`]:"%H:%M"};function ki(e,t){const n=Object(p.o)({},Ei,t),r=Fr(e),i=r.length;let o,a,s="",l=0;for(l=0;l<i;)for(o=r.length;o>l;--o)if(null!=n[a=r.slice(l,o).join("-")]){s+=n[a],l=o;break}return s.trim()}function Si(e){return ji(Ce.b,gi,e)}function Ti(e){return ji(Ce.d,bi,e)}function ji(e,t,n){return Object(p.H)(n)?e(n):function(e,t,n){n=n||{},Object(p.F)(n)||Object(p.n)(`Invalid time multi-format specifier: ${n}`);const r=t(Rr),i=t(Dr),o=t(Ir),a=t(Nr),s=t(Cr),l=t(Pr),u=t(Ar),c=t(jr),f=e(n[zr]||".%L"),d=e(n[Rr]||":%S"),h=e(n[Dr]||"%I:%M"),m=e(n[Ir]||"%I %p"),g=e(n[Nr]||n[Mr]||"%a %d"),b=e(n[Cr]||"%b %d"),y=e(n[Pr]||"%B"),v=e(n[Ar]||"%B"),x=e(n[jr]||"%Y");return function(e){return(r(e)<e?f:i(e)<e?d:o(e)<e?h:a(e)<e?m:l(e)<e?s(e)<e?g:b:c(e)<e?u(e)<e?y:v:x)(e)}}(e,t,n)}var Ai=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Pi=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Ai(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var Ci=Math.sqrt(50),Ni=Math.sqrt(10),Mi=Math.sqrt(2);function Ii(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ci?i*=10:o>=Ni?i*=5:o>=Mi&&(i*=2),t<e?-i:i}const Di=[jr,Pr,Nr,Ir,Dr,Rr,zr],Ri=Di.slice(0,-1),zi=Ri.slice(0,-1),Li=zi.slice(0,-1),Fi=Li.slice(0,-1),Bi=[jr,Pr],Ui=[jr],qi=[[Ri,1,1e3],[Ri,5,5e3],[Ri,15,15e3],[Ri,30,3e4],[zi,1,6e4],[zi,5,3e5],[zi,15,9e5],[zi,30,18e5],[Li,1,36e5],[Li,3,108e5],[Li,6,216e5],[Li,12,432e5],[Fi,1,864e5],[[jr,Cr],1,6048e5],[Bi,1,2592e6],[Bi,3,7776e6],[Ui,1,31536e6]];var $i=function(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Object(p.W)(t))/n;let i,o,a=Pi(e=>e[2]).right(qi,r);return a===qi.length?(i=Ui,o=Ii(t[0]/31536e6,t[1]/31536e6,n)):a?(i=(a=qi[r/qi[a-1][2]<qi[a][2]/r?a-1:a])[0],o=a[1]):(i=Di,o=Math.max(Ii(t[0],t[1],n),1)),{units:i,step:o}};function Hi(e){Qe.call(this,null,e)}const Wi=["unit0","unit1"];Hi.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"string",array:!0},{name:"step",type:"number",default:1},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Wi}]};var Vi=Object(p.y)(Hi,Qe);function Gi(e){Qe.call(this,Object(p.s)(),e)}function Yi(e){Qe.call(this,null,e)}Vi.transform=function(e,t){var n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?bi:gi)(o.unit).offset,s=e.as||Wi,l=s[0],u=s[1],c=o.start||1/0,f=o.stop||-1/0,d=o.step,h=t.ADD;return(e.modified()||t.modified(Object(p.g)(e.field)))&&(h=(t=t.reflow(!0)).SOURCE,c=1/0,f=-1/0),t.visit(h,(function(e){var t,i,s=n(e);null==s?(e[l]=null,r&&(e[u]=null)):(e[l]=t=i=o(s),r&&(e[u]=i=a(t,d)),t<c&&(c=t),i>f&&(f=i))})),o.start=c,o.stop=f,t.modifies(r?s:l)},Vi._floor=function(e,t){const n="utc"===e.timezone;let{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:$i({extent:Object(p.p)(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins});r=Fr(r);const o=this.value||{},a=(n?ti:Kr)(r,i);return a.unit=Object(p.T)(r),a.units=r,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a},Object(p.y)(Gi,Qe).transform=function(e,t){var n=t.dataflow,r=e.field,i=this.value,o=!0;function a(e){i.set(r(e),e)}return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,(function(e){i.delete(r(e))})),t.visit(t.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()},Object(p.y)(Yi,Qe).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(k(e.sort)):t.source).map(e.field))};const Xi={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){let e=Xi.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){(t=+t)>0||Object(p.n)("ntile num must be greater than zero.");let n=Xi.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{let r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{let r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||Object(p.n)("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t=null;return{next:n=>{let r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t=null,n=-1;return{next:r=>{let i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};var Ki=Object.keys(Xi);function Ji(e){let t=this,n=Object(p.i)(e.ops),r=Object(p.i)(e.fields),i=Object(p.i)(e.params),o=Object(p.i)(e.as),a=t.outputs=[],s=t.windows=[],l={},u={},c=!0,f=[],d=[];function h(e){Object(p.i)(Object(p.g)(e)).forEach(e=>l[e]=1)}h(e.sort),n.forEach((function(e,t){let n=r[t],l=Object(p.h)(n),m=ot(e,l,o[t]);if(h(n),a.push(m),Object(p.v)(Xi,e))s.push(function(e,t,n,r){let i=Xi[e](t,n);return{init:i.init||p.jb,update:function(e,t){t[r]=i.next(e)}}}(e,r[t],i[t],m));else{if(null==n&&"count"!==e&&Object(p.n)("Null aggregate field specified."),"count"===e)return void f.push(m);c=!1;let t=u[l];t||((t=u[l]=[]).field=n,d.push(t)),t.push(lt(e,m))}})),(f.length||d.length)&&(t.cell=function(e,t,n){e=e.map(e=>ft(e,e.field));let r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new dn;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(d,f,c)),t.inputs=Object.keys(l)}const Zi=Ji.prototype;Zi.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},Zi.update=function(e,t){let n,r=this.cell,i=this.windows,o=e.data,a=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(o[n]);for(n=e.p1;n<e.i1;++n)r.add(o[n]);r.set(t)}for(n=0;n<a;++n)i[n].update(e,t)};var Qi=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Jn(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};function eo(e){Qe.call(this,{},e),this._mlen=0,this._mods=[]}eo.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ki.concat(st)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var to=Object(p.y)(eo,Qe);function no(e,t,n,r){var i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),l=s.length,u=0,c=o?Qi(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(p.l)(-1)};for(t.init();u<l;++u)ro(f,a,u,l),o&&io(f,c),t.update(f,s[u])}function ro(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function io(e,t){var n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}to.transform=function(e,t){var n,r,i=this,o=i.state,a=e.modified(),s=k(e.sort);this.stamp=t.stamp,o&&!a||(o=i.state=new Ji(e));var l=it(e.groupby);function u(e){return i.group(l(e))}for(a||t.modified(o.inputs)?(i.value={},t.visit(t.SOURCE,(function(e){u(e).add(e)}))):(t.visit(t.REM,(function(e){u(e).remove(e)})),t.visit(t.ADD,(function(e){u(e).add(e)}))),n=0,r=i._mlen;n<r;++n)no(i._mods[n],o,s,e);return i._mlen=0,i._mods=[],t.reflow(a).modifies(o.outputs)},to.group=function(e){var t=this.value[e];return t||((t=this.value[e]=yn(v)).stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t};const oo="top",ao="left",so="right",lo="bottom",uo="top-left",co="top-right",fo="bottom-left",po="bottom-right",ho="start",mo="middle",go="end",bo="x",yo="y",vo="group",xo="axis",_o="title",wo="frame",Oo="scope",Eo="legend",ko="row-header",So="row-footer",To="row-title",jo="column-header",Ao="column-footer",Po="column-title",Co="padding",No="symbol",Mo="fit",Io="fit-x",Do="fit-y",Ro="pad",zo="none",Lo="all",Fo="each",Bo="flush",Uo="column",qo="row";function $o(e){this.clear(),e&&this.union(e)}var Ho=$o.prototype;Ho.clone=function(){return new $o(this)},Ho.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Ho.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Ho.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},Ho.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Ho.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Ho.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Ho.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Ho.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Ho.rotate=function(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},Ho.rotatedPoints=function(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[s*r-l*i+u,l*r+s*i+c,s*r-l*a+u,l*r+s*a+c,s*o-l*i+u,l*o+s*i+c,s*o-l*a+u,l*o+s*a+c]},Ho.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Ho.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Ho.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Ho.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Ho.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Ho.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Ho.width=function(){return this.x2-this.x1},Ho.height=function(){return this.y2-this.y1};var Wo=0;const Vo="p_";function Go(e){return e&&e.gradient}function Yo(e,t,n){let r=e.id,i=e.gradient,o="radial"===i?Vo:"";return r||(r=e.id="gradient_"+Wo++,"radial"===i?(e.x1=Xo(e.x1,.5),e.y1=Xo(e.y1,.5),e.r1=Xo(e.r1,0),e.x2=Xo(e.x2,.5),e.y2=Xo(e.y2,.5),e.r2=Xo(e.r2,.5),o=Vo):(e.x1=Xo(e.x1,0),e.y1=Xo(e.y1,0),e.x2=Xo(e.x2,1),e.y2=Xo(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function Xo(e,t){return null!=e?e:t}var Ko=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}};function Jo(e){this.mark=e,this.bounds=this.bounds||new $o}function Zo(e){Jo.call(this,e),this.items=this.items||[]}function Qo(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function ea(){return"undefined"!=typeof Image?Image:null}function ta(e){this._pending=0,this._loader=e||Me()}Object(p.y)(Zo,Jo);var na=ta.prototype;function ra(e){e._pending+=1}function ia(e){e._pending-=1}function oa(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function aa(e){this._context=e}na.pending=function(){return this._pending},na.sanitizeURL=function(e){var t=this;return ra(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return ia(t),e})).catch((function(){return ia(t),null}))},na.loadImage=function(e){var t=this,n=ea();return ra(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){ia(t)},i.onerror=function(){ia(t)},i.src=r,i})).catch((function(e){return ia(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},na.ready=function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))},aa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var sa=function(){};function la(e){this._context=e}la.prototype={areaStart:sa,areaEnd:sa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:oa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ua(e){this._context=e}ua.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:oa(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ca(e,t){this._basis=new aa(e),this._beta=t}ca.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var fa=function e(t){function n(e){return 1===t?new aa(e):new ca(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function da(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function pa(e,t){this._context=e,this._k=(1-t)/6}pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:da(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:da(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ha=function e(t){function n(e){return new pa(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ma(e,t){this._context=e,this._k=(1-t)/6}ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:da(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ga=function e(t){function n(e){return new ma(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ba(e,t){this._context=e,this._k=(1-t)/6}ba.prototype={areaStart:sa,areaEnd:sa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:da(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ya=function e(t){function n(e){return new ba(e,t)}return n.tension=function(t){return e(+t)},n}(0),va=Math.abs,xa=Math.atan2,_a=Math.cos,wa=Math.max,Oa=Math.min,Ea=Math.sin,ka=Math.sqrt,Sa=1e-12,Ta=Math.PI,ja=Ta/2,Aa=2*Ta;function Pa(e){return e>=1?ja:e<=-1?-ja:Math.asin(e)}function Ca(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Sa){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Sa){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function Na(e,t){this._context=e,this._alpha=t}Na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ca(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ma=function e(t){function n(e){return t?new Na(e,t):new pa(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ia(e,t){this._context=e,this._alpha=t}Ia.prototype={areaStart:sa,areaEnd:sa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ca(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Da=function e(t){function n(e){return t?new Ia(e,t):new ba(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ra(e,t){this._context=e,this._alpha=t}Ra.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ca(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var za=function e(t){function n(e){return t?new Ra(e,t):new ma(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function La(e){this._context=e}La.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Fa=function(e){return new La(e)};function Ba(e){this._context=e}Ba.prototype={areaStart:sa,areaEnd:sa,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ua(e){return e<0?-1:1}function qa(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ua(o)+Ua(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function $a(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ha(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Wa(e){this._context=e}function Va(e){this._context=new Ga(e)}function Ga(e){this._context=e}function Ya(e){this._context=e}function Xa(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ha(this,this._t0,$a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ha(this,$a(this,n=qa(this,e,t)),n);break;default:Ha(this,this._t0,n=qa(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Va.prototype=Object.create(Wa.prototype)).point=function(e,t){Wa.prototype.point.call(this,t,e)},Ga.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Xa(e),i=Xa(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ka(e,t){this._context=e,this._t=t}Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Ja={basis:{curve:function(e){return new aa(e)}},"basis-closed":{curve:function(e){return new la(e)}},"basis-open":{curve:function(e){return new ua(e)}},bundle:{curve:fa,tension:"beta",value:.85},cardinal:{curve:ha,tension:"tension",value:0},"cardinal-open":{curve:ga,tension:"tension",value:0},"cardinal-closed":{curve:ya,tension:"tension",value:0},"catmull-rom":{curve:Ma,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Da,tension:"alpha",value:.5},"catmull-rom-open":{curve:za,tension:"alpha",value:.5},linear:{curve:Fa},"linear-closed":{curve:function(e){return new Ba(e)}},monotone:{horizontal:function(e){return new Va(e)},vertical:function(e){return new Wa(e)}},natural:{curve:function(e){return new Ya(e)}},step:{curve:function(e){return new Ka(e,.5)}},"step-after":{curve:function(e){return new Ka(e,1)}},"step-before":{curve:function(e){return new Ka(e,0)}}};function Za(e,t,n){var r=Object(p.v)(Ja,e)&&Ja[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var Qa={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},es=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],ts=function(e){var t,n,r,i,o,a,s,l,u,c,f,d=[];for(l=0,c=(t=e.slice().replace(es[0],"###$1").split(es[1]).slice(1)).length;l<c;++l){for(r=(n=t[l]).slice(1).trim().replace(es[2],"$1###$2").split(es[3]),i=[a=n.charAt(0)],u=0,f=r.length;u<f;++u)(o=+r[u])===o&&i.push(o);if(s=Qa[a.toLowerCase()],i.length-1>s)for(u=1,f=i.length;u<f;u+=s)d.push([a].concat(i.slice(u,u+s)));else d.push(i)}return d},ns=Math.PI/180,rs=Math.PI/2,is=2*Math.PI,os=Math.sqrt(3)/2,as={},ss={},ls=[].join;function us(e){var t=ls.call(e);if(ss[t])return ss[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=u*a,f=-l*s,d=l*a,p=u*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),b=Math.sin(o),y=.5*(o-i),v=Math.sin(.5*y),x=8/3*v*v/Math.sin(y),_=n+h-x*m,w=r+m+x*h,O=n+g,E=r+b,k=O+x*b,S=E-x*g;return ss[t]=[c*_+f*w,d*_+p*w,c*k+f*S,d*k+p*S,c*O+f*E,d*O+p*E]}var cs=["l",0,0,0,0,0,0,0];function fs(e,t,n){var r=cs[0]=e[0];if("a"===r||"A"===r)cs[1]=t*e[1],cs[2]=n*e[2],cs[3]=e[3],cs[4]=e[4],cs[5]=e[5],cs[6]=t*e[6],cs[7]=n*e[7];else if("h"===r||"H"===r)cs[1]=t*e[1];else if("v"===r||"V"===r)cs[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)cs[i]=(i%2==1?t:n)*e[i];return cs}var ds=function(e,t,n,r,i,o){var a,s,l,u,c,f=null,d=0,p=0,h=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var g=0,b=t.length;g<b;++g){switch(a=t[g],1===i&&1===o||(a=fs(a,i,o)),a[0]){case"l":d+=a[1],p+=a[2],e.lineTo(d+n,p+r);break;case"L":d=a[1],p=a[2],e.lineTo(d+n,p+r);break;case"h":d+=a[1],e.lineTo(d+n,p+r);break;case"H":d=a[1],e.lineTo(d+n,p+r);break;case"v":p+=a[1],e.lineTo(d+n,p+r);break;case"V":p=a[1],e.lineTo(d+n,p+r);break;case"m":d+=a[1],p+=a[2],e.moveTo(d+n,p+r);break;case"M":d=a[1],p=a[2],e.moveTo(d+n,p+r);break;case"c":s=d+a[5],l=p+a[6],h=d+a[3],m=p+a[4],e.bezierCurveTo(d+a[1]+n,p+a[2]+r,h+n,m+r,s+n,l+r),d=s,p=l;break;case"C":d=a[5],p=a[6],h=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,m+r,d+n,p+r);break;case"s":s=d+a[3],l=p+a[4],h=2*d-h,m=2*p-m,e.bezierCurveTo(h+n,m+r,d+a[1]+n,p+a[2]+r,s+n,l+r),h=d+a[1],m=p+a[2],d=s,p=l;break;case"S":s=a[3],l=a[4],h=2*d-h,m=2*p-m,e.bezierCurveTo(h+n,m+r,a[1]+n,a[2]+r,s+n,l+r),d=s,p=l,h=a[1],m=a[2];break;case"q":s=d+a[3],l=p+a[4],h=d+a[1],m=p+a[2],e.quadraticCurveTo(h+n,m+r,s+n,l+r),d=s,p=l;break;case"Q":s=a[3],l=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,l+r),d=s,p=l,h=a[1],m=a[2];break;case"t":s=d+a[1],l=p+a[2],null===f[0].match(/[QqTt]/)?(h=d,m=p):"t"===f[0]?(h=2*d-u,m=2*p-c):"q"===f[0]&&(h=2*d-h,m=2*p-m),u=h,c=m,e.quadraticCurveTo(h+n,m+r,s+n,l+r),p=l,h=(d=s)+a[1],m=p+a[2];break;case"T":s=a[1],l=a[2],h=2*d-h,m=2*p-m,e.quadraticCurveTo(h+n,m+r,s+n,l+r),d=s,p=l;break;case"a":ps(e,d+n,p+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+p+r]),d+=a[6],p+=a[7];break;case"A":ps(e,d+n,p+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],p=a[7];break;case"z":case"Z":e.closePath()}f=a}};function ps(e,t,n,r){for(var i=function(e,t,n,r,i,o,a,s,l){var u=ls.call(arguments);if(as[u])return as[u];var c=a*ns,f=Math.sin(c),d=Math.cos(c),p=d*(s-e)*.5+f*(l-t)*.5,h=d*(l-t)*.5-f*(s-e)*.5,m=p*p/((n=Math.abs(n))*n)+h*h/((r=Math.abs(r))*r);m>1&&(n*=m=Math.sqrt(m),r*=m);var g=d/n,b=f/n,y=-f/r,v=d/r,x=g*s+b*l,_=y*s+v*l,w=g*e+b*t,O=y*e+v*t,E=1/((w-x)*(w-x)+(O-_)*(O-_))-.25;E<0&&(E=0);var k=Math.sqrt(E);o==i&&(k=-k);var S=.5*(x+w)-k*(O-_),T=.5*(_+O)+k*(w-x),j=Math.atan2(_-T,x-S),A=Math.atan2(O-T,w-S)-j;A<0&&1===o?A+=is:A>0&&0===o&&(A-=is);for(var P=Math.ceil(Math.abs(A/(rs+.001))),C=[],N=0;N<P;++N){var M=j+N*A/P,I=j+(N+1)*A/P;C[N]=[S,T,M,I,n,r,f,d]}return as[u]=C}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),o=0;o<i.length;++o){var a=us(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var hs={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,is)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=os*n,i=r-.5773502691896257*n,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=os*n,i=r-.5773502691896257*n;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=os*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=os*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=os*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=os*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function ms(e){return Object(p.v)(hs,e)?hs[e]:function(e){if(!Object(p.v)(gs,e)){var t=ts(e);gs[e]={draw:function(e,n){ds(e,t,0,0,Math.sqrt(n)/2)}}}return gs[e]}(e)}var gs={};var bs=Math.PI,ys=2*bs,vs=ys-1e-6;function xs(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function _s(){return new xs}xs.prototype=_s.prototype={constructor:xs,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,f=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(c*s-l*u)>1e-6&&i){var d=n-o,p=r-a,h=s*s+l*l,m=d*d+p*p,g=Math.sqrt(h),b=Math.sqrt(f),y=i*Math.tan((bs-Math.acos((h+f-m)/(2*g*b)))/2),v=y/b,x=y/g;Math.abs(v-1)>1e-6&&(this._+="L"+(e+v*u)+","+(t+v*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>u*p)+","+(this._x1=e+x*s)+","+(this._y1=t+x*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%ys+ys),f>vs?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=bs)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ws=_s;const Os=.448084975506;function Es(e){return e.x}function ks(e){return e.y}function Ss(e){return e.width}function Ts(e){return e.height}function js(e){return"function"==typeof e?e:()=>+e}function As(e,t,n){return Math.max(t,Math.min(e,n))}var Ps=function(){var e=Es,t=ks,n=Ss,r=Ts,i=js(0),o=i,a=i,s=i,l=null;function u(u,c,f){var d,p=null!=c?c:+e.call(this,u),h=null!=f?f:+t.call(this,u),m=+n.call(this,u),g=+r.call(this,u),b=Math.min(m,g)/2,y=As(+i.call(this,u),0,b),v=As(+o.call(this,u),0,b),x=As(+a.call(this,u),0,b),_=As(+s.call(this,u),0,b);if(l||(l=d=ws()),y<=0&&v<=0&&x<=0&&_<=0)l.rect(p,h,m,g);else{var w=p+m,O=h+g;l.moveTo(p+y,h),l.lineTo(w-v,h),l.bezierCurveTo(w-Os*v,h,w,h+Os*v,w,h+v),l.lineTo(w,O-_),l.bezierCurveTo(w,O-Os*_,w-Os*_,O,w-_,O),l.lineTo(p+x,O),l.bezierCurveTo(p+Os*x,O,p,O-Os*x,p,O-x),l.lineTo(p,h+y),l.bezierCurveTo(p,h+Os*y,p+Os*y,h,p+y,h),l.closePath()}if(d)return l=null,d+""||null}return u.x=function(t){return arguments.length?(e=js(t),u):e},u.y=function(e){return arguments.length?(t=js(e),u):t},u.width=function(e){return arguments.length?(n=js(e),u):n},u.height=function(e){return arguments.length?(r=js(e),u):r},u.cornerRadius=function(e,t,n,r){return arguments.length?(i=js(e),o=null!=t?js(t):i,s=null!=n?js(n):i,a=null!=r?js(r):o,u):i},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u},Cs=function(){var e,t,n,r,i,o,a,s,l=null;function u(e,t,n){var r=n/2;if(i){var u=a-t,c=e-o;if(u||c){var f=Math.sqrt(u*u+c*c),d=(u/=f)*s,p=(c/=f)*s,h=Math.atan2(c,u);l.moveTo(o-d,a-p),l.lineTo(e-u*r,t-c*r),l.arc(e,t,r,h-Math.PI,h),l.lineTo(o+d,a+p),l.arc(o,a,s,h,h+Math.PI)}else l.arc(e,t,r,0,is);l.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,f=o.length,d=!1;for(null==l&&(l=c=ws()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&u(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return l=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(l=null==e?null:e,c):l},c},Ns=function(e){return function(){return e}};function Ms(e){return e.innerRadius}function Is(e){return e.outerRadius}function Ds(e){return e.startAngle}function Rs(e){return e.endAngle}function zs(e){return e&&e.padAngle}function Ls(e,t,n,r,i,o,a){var s=e-n,l=t-r,u=(a?o:-o)/ka(s*s+l*l),c=u*l,f=-u*s,d=e+c,p=t+f,h=n+c,m=r+f,g=(d+h)/2,b=(p+m)/2,y=h-d,v=m-p,x=y*y+v*v,_=i-o,w=d*m-h*p,O=(v<0?-1:1)*ka(wa(0,_*_*x-w*w)),E=(w*v-y*O)/x,k=(-w*y-v*O)/x,S=(w*v+y*O)/x,T=(-w*y+v*O)/x,j=E-g,A=k-b,P=S-g,C=T-b;return j*j+A*A>P*P+C*C&&(E=S,k=T),{cx:E,cy:k,x01:-c,y01:-f,x11:E*(i/_-1),y11:k*(i/_-1)}}function Fs(e){return e[0]}function Bs(e){return e[1]}var Us=function(){var e=Fs,t=Bs,n=Ns(!0),r=null,i=Fa,o=null;function a(a){var s,l,u,c=a.length,f=!1;for(null==r&&(o=i(u=ws())),s=0;s<=c;++s)!(s<c&&n(l=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(l,s,a),+t(l,s,a));if(u)return o=null,u+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:Ns(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Ns(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:Ns(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},qs=function(){var e=Fs,t=null,n=Ns(0),r=Bs,i=Ns(!0),o=null,a=Fa,s=null;function l(l){var u,c,f,d,p,h=l.length,m=!1,g=new Array(h),b=new Array(h);for(null==o&&(s=a(p=ws())),u=0;u<=h;++u){if(!(u<h&&i(d=l[u],u,l))===m)if(m=!m)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=c;--f)s.point(g[f],b[f]);s.lineEnd(),s.areaEnd()}m&&(g[u]=+e(d,u,l),b[u]=+n(d,u,l),s.point(t?+t(d,u,l):g[u],r?+r(d,u,l):b[u]))}if(p)return s=null,p+""||null}function u(){return Us().defined(i).curve(a).context(o)}return l.x=function(n){return arguments.length?(e="function"==typeof n?n:Ns(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:Ns(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:Ns(+e),l):t},l.y=function(e){return arguments.length?(n="function"==typeof e?e:Ns(+e),r=null,l):n},l.y0=function(e){return arguments.length?(n="function"==typeof e?e:Ns(+e),l):n},l.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Ns(+e),l):r},l.lineX0=l.lineY0=function(){return u().x(e).y(n)},l.lineY1=function(){return u().x(e).y(r)},l.lineX1=function(){return u().x(t).y(n)},l.defined=function(e){return arguments.length?(i="function"==typeof e?e:Ns(!!e),l):i},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l},$s={draw:function(e,t){var n=Math.sqrt(t/Ta);e.moveTo(n,0),e.arc(0,0,n,0,Aa)}},Hs=(Math.sqrt(1/3),Math.sin(Ta/10)/Math.sin(7*Ta/10));Math.sin(Aa/10),Math.cos(Aa/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function Ws(e,t){return null!=e?e:t}const Vs=e=>e.x||0,Gs=e=>e.y||0,Ys=e=>!(!1===e.defined),Xs=function(){var e=Ms,t=Is,n=Ns(0),r=null,i=Ds,o=Rs,a=zs,s=null;function l(){var l,u,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),p=i.apply(this,arguments)-ja,h=o.apply(this,arguments)-ja,m=va(h-p),g=h>p;if(s||(s=l=ws()),d<f&&(u=d,d=f,f=u),d>Sa)if(m>Aa-Sa)s.moveTo(d*_a(p),d*Ea(p)),s.arc(0,0,d,p,h,!g),f>Sa&&(s.moveTo(f*_a(h),f*Ea(h)),s.arc(0,0,f,h,p,g));else{var b,y,v=p,x=h,_=p,w=h,O=m,E=m,k=a.apply(this,arguments)/2,S=k>Sa&&(r?+r.apply(this,arguments):ka(f*f+d*d)),T=Oa(va(d-f)/2,+n.apply(this,arguments)),j=T,A=T;if(S>Sa){var P=Pa(S/f*Ea(k)),C=Pa(S/d*Ea(k));(O-=2*P)>Sa?(_+=P*=g?1:-1,w-=P):(O=0,_=w=(p+h)/2),(E-=2*C)>Sa?(v+=C*=g?1:-1,x-=C):(E=0,v=x=(p+h)/2)}var N=d*_a(v),M=d*Ea(v),I=f*_a(w),D=f*Ea(w);if(T>Sa){var R,z=d*_a(x),L=d*Ea(x),F=f*_a(_),B=f*Ea(_);if(m<Ta&&(R=function(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,c=a-i,f=s-o,d=f*l-c*u;if(!(d*d<Sa))return[e+(d=(c*(t-o)-f*(e-i))/d)*l,t+d*u]}(N,M,F,B,z,L,I,D))){var U=N-R[0],q=M-R[1],$=z-R[0],H=L-R[1],W=1/Ea(((c=(U*$+q*H)/(ka(U*U+q*q)*ka($*$+H*H)))>1?0:c<-1?Ta:Math.acos(c))/2),V=ka(R[0]*R[0]+R[1]*R[1]);j=Oa(T,(f-V)/(W-1)),A=Oa(T,(d-V)/(W+1))}}E>Sa?A>Sa?(b=Ls(F,B,N,M,d,A,g),y=Ls(z,L,I,D,d,A,g),s.moveTo(b.cx+b.x01,b.cy+b.y01),A<T?s.arc(b.cx,b.cy,A,xa(b.y01,b.x01),xa(y.y01,y.x01),!g):(s.arc(b.cx,b.cy,A,xa(b.y01,b.x01),xa(b.y11,b.x11),!g),s.arc(0,0,d,xa(b.cy+b.y11,b.cx+b.x11),xa(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,A,xa(y.y11,y.x11),xa(y.y01,y.x01),!g))):(s.moveTo(N,M),s.arc(0,0,d,v,x,!g)):s.moveTo(N,M),f>Sa&&O>Sa?j>Sa?(b=Ls(I,D,z,L,f,-j,g),y=Ls(N,M,F,B,f,-j,g),s.lineTo(b.cx+b.x01,b.cy+b.y01),j<T?s.arc(b.cx,b.cy,j,xa(b.y01,b.x01),xa(y.y01,y.x01),!g):(s.arc(b.cx,b.cy,j,xa(b.y01,b.x01),xa(b.y11,b.x11),!g),s.arc(0,0,f,xa(b.cy+b.y11,b.cx+b.x11),xa(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,j,xa(y.y11,y.x11),xa(y.y01,y.x01),!g))):s.arc(0,0,f,w,_,g):s.lineTo(I,D)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Ta/2;return[_a(r)*n,Ea(r)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Ns(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Ns(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Ns(+e),l):n},l.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Ns(+e),l):r},l.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Ns(+e),l):i},l.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Ns(+e),l):o},l.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Ns(+e),l):a},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),Ks=qs().x(Vs).y1(Gs).y0(e=>(e.y||0)+(e.height||0)).defined(Ys),Js=qs().y(Gs).x1(Vs).x0(e=>(e.x||0)+(e.width||0)).defined(Ys),Zs=Us().x(Vs).y(Gs).defined(Ys),Qs=Ps().x(Vs).y(Gs).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>Ws(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>Ws(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>Ws(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>Ws(e.cornerRadiusBottomLeft,e.cornerRadius)||0),el=function(){var e=Ns($s),t=Ns(64),n=null;function r(){var r;if(n||(n=r=ws()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:Ns(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:Ns(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(e=>ms(e.shape||"circle")).size(e=>Ws(e.size,64)),tl=Cs().x(Vs).y(Gs).defined(Ys).size(e=>e.size||1);function nl(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function rl(e,t,n,r){return Qs.context(e)(t,n,r)}var il=function(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e};var ol,al=is-1e-8;function sl(e){return ol=e,sl}function ll(){}function ul(e,t){ol.add(e,t)}sl.beginPath=ll,sl.closePath=ll,sl.moveTo=ul,sl.lineTo=ul,sl.rect=function(e,t,n,r){ul(e,t),ul(e+n,t+r)},sl.quadraticCurveTo=function(e,t,n,r){ul(e,t),ul(n,r)},sl.bezierCurveTo=function(e,t,n,r,i,o){ul(e,t),ul(n,r),ul(i,o)},sl.arc=function(e,t,n,r,i,o){if(Math.abs(i-r)>al)return ul(e-n,t-n),void ul(e+n,t+n);var a,s,l,u,c=1/0,f=-1/0,d=1/0,p=-1/0;function h(e){l=n*Math.cos(e),u=n*Math.sin(e),l<c&&(c=l),l>f&&(f=l),u<d&&(d=u),u>p&&(p=u)}if(h(r),h(i),i!==r)if((r%=is)<0&&(r+=is),(i%=is)<0&&(i+=is),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=is,a=r-r%rs,s=0;s<4&&a>i;++s,a-=rs)h(a);else for(a=r-r%rs+rs,s=0;s<4&&a<i;++s,a+=rs)h(a);ul(e+c,t+d),ul(e+f,t+p)};var cl=(cl=Qo(1,1))?cl.getContext("2d"):null;const fl=new $o;function dl(e){return function(t,n){if(!cl)return!0;e(cl,t),fl.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=fl;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(cl.isPointInPath(t,e))return!0;return!1}}function pl(e,t){return t.contains(e.x||0,e.y||0)}function hl(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(fl.set(n,r,n+i,r+o))}function ml(e,t){const n=e.x||0,r=e.y||0;return gl(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function gl(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:l}=e,u=r-t,c=i-n;let f,d,p,h,m=0,g=1;for(h=0;h<4;++h){if(0===h&&(f=-u,d=-(o-t)),1===h&&(f=u,d=s-t),2===h&&(f=-c,d=-(a-n)),3===h&&(f=c,d=l-n),Math.abs(f)<1e-10&&d<0)return!1;if(p=d/f,f<0){if(p>g)return!1;p>m&&(m=p)}else if(f>0){if(p<m)return!1;p<g&&(g=p)}}return!0}function bl(e,t){return null==e?t:e}var yl=function(e,t,n){return Go(n)?function(e,t,n){const r=n.width(),i=n.height(),o=t.stops,a=o.length,s="radial"===t.gradient?e.createRadialGradient(n.x1+bl(t.x1,.5)*r,n.y1+bl(t.y1,.5)*i,Math.max(r,i)*bl(t.r1,0),n.x1+bl(t.x2,.5)*r,n.y1+bl(t.y2,.5)*i,Math.max(r,i)*bl(t.r2,.5)):e.createLinearGradient(n.x1+bl(t.x1,0)*r,n.y1+bl(t.y1,0)*i,n.x1+bl(t.x2,1)*r,n.y1+bl(t.y2,0)*i);for(let e=0;e<a;++e)s.addColorStop(o[e].offset,o[e].color);return s}(e,n,t.bounds):n},vl=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=yl(e,t,t.fill),!0)},xl=[],_l=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=yl(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||xl),e.lineDashOffset=t.strokeDashOffset||0),!0))};function wl(e,t){return e.zindex-t.zindex||e.index-t.index}function Ol(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(wl)}function El(e,t){var n,r,i=e.items;if(i&&i.length){var o=Ol(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}}function kl(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var o=Ol(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Sl(e){return function(t,n,r){El(n,(function(n){r&&!r.intersects(n.bounds)||Tl(e,t,n,n)}))}}function Tl(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&vl(t,n,i)&&t.fill(),n.stroke&&_l(t,n,i)&&t.stroke()))}function jl(e){return e=e||p.fb,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,kl(n,(function(n){var s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function Al(e,t){return function(n,r,i,o){var a,s,l=Array.isArray(r)?r[0]:r,u=null==t?l.fill:t,c=l.stroke&&n.isPointInStroke;return c&&(a=l.strokeWidth,s=l.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(u&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function Pl(e){return jl(Al(e))}function Cl(e,t){return"translate("+e+","+t+")"}function Nl(e){return"rotate("+e+")"}function Ml(e){return Cl(e.x||0,e.y||0)}function Il(e){return Cl(e.x||0,e.y||0)+(e.angle?" "+Nl(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}var Dl=function(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=ns),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",Il(n)),e("d",t(null,n))},bound:function(e,n){var r=n.x||0,i=n.y||0;return t(sl(e),n),il(e,n).translate(r,i),n.angle&&e.rotate(n.angle*ns,r,i),e},draw:Sl(r),pick:Pl(r),isect:n||dl(r)}},Rl=Dl("arc",(function(e,t){return Xs.context(e)(t)}));var zl=function(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i,o=Al(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(sl(e),r),il(e,r[0]))},draw:(i=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||Tl(i,e,t.items[0],t.items)}),pick:function(e,t,n,r,i,a){var s=t.items,l=t.bounds;return!s||!s.length||l&&!l.contains(i,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,o(e,s,n,r)?s[0]:null)},isect:pl,tip:n}},Ll=zl("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Js:Ks).curve(Za(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}));function Fl(e,t){e.beginPath(),nl(t)?rl(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}var Bl=1;function Ul(){Bl=1}var ql=function(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+Bl++),a=i.clipping[o]||(i.clipping[o]={id:o});return Object(p.D)(r)?a.path=r(null):nl(n)?a.path=rl(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"},$l=.5;function Hl(e,t){var n=t.stroke?$l:0;e.beginPath(),rl(e,t,n,n)}var Wl=Al(Hl);var Vl={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",Ml(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),il(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;El(t,(function(t){var i,o=t.x||0,a=t.y||0;e.save(),e.translate(o,a),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity)>0&&(Hl(e,t),t.fill&&vl(e,t,i)&&e.fill(),t.stroke&&_l(e,t,i)&&e.stroke()),t.clip&&Fl(e,t),n&&n.translate(-o,-a),El(t,(function(t){r.draw(e,t,n)})),n&&n.translate(o,a),e.restore()}))},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;var a=this,s=n*e.pixelRatio,l=r*e.pixelRatio;return kl(t,(function(u){var c,f,d,p,h,m,g;if((!(m=u.bounds)||m.contains(i,o))&&(f=u.x||0,d=u.y||0,p=f+(u.width||0),h=d+(u.height||0),!(g=u.clip)||!(i<f||i>p||o<f||o>h))){if(e.save(),e.translate(f,d),f=i-f,d=o-d,!g||!nl(u)||Wl(e,u,s,l))return!(c=kl(u,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?a.pick(e,n,r,f,d):null})))&&!1!==t.interactive&&(u.fill||u.stroke)&&Wl(e,u,s,l)&&(c=u),e.restore(),c||null;e.restore()}}))},isect:hl,background:function(e,t){var n=t.stroke?$l:0;e("class","background"),e("d",rl(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?ql(n,t,t):null)}};function Gl(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(t=>{e.image=t,e.image.url=e.url})),n}function Yl(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function Xl(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function Kl(e,t){return"center"===e?t/2:"right"===e?t:0}function Jl(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Zl={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=Gl(t,n),i=t.x||0,o=t.y||0,a=Yl(t,r),s=Xl(t,r),l=!1===t.aspect?"none":"xMidYMid";i-=Kl(t.align,a),o-=Jl(t.baseline,s),!r.src&&r.toDataURL?e("href",r.toDataURL(),"http://www.w3.org/1999/xlink","xlink:href"):e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",Cl(i,o)),e("width",a),e("height",s),e("preserveAspectRatio",l)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,o=Yl(t,n),a=Xl(t,n);return r-=Kl(t.align,o),i-=Jl(t.baseline,a),e.set(r,i,r+o,i+a)},draw:function(e,t,n){var r=this;El(t,(function(t){if(!n||n.intersects(t.bounds)){var i,o,a,s,l=Gl(t,r),u=t.x||0,c=t.y||0,f=Yl(t,l),d=Xl(t,l);u-=Kl(t.align,f),c-=Jl(t.baseline,d),!1!==t.aspect&&(o=l.width/l.height,a=t.width/t.height,o==o&&a==a&&o!==a&&(a<o?(c+=(d-(s=f/o))/2,d=s):(u+=(f-(s=d*o))/2,f=s))),(l.complete||l.toDataURL)&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(l,u,c,f,d))}}))},pick:jl(),isect:p.fb,get:Gl,xOffset:Kl,yOffset:Jl},Ql=zl("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return Zs.curve(Za(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}));function eu(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*ns,l=t.pathCache;l&&l.path===n||((t.pathCache=l=ts(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),ds(e,l,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):ds(e,l,r,i,o,a)}var tu={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",Il(t)),e("d",t.path)},bound:function(e,t){return eu(sl(e),t)?e.set(0,0,0,0):il(e,t,!0),t.angle&&e.rotate(t.angle*ns,t.x||0,t.y||0),e},draw:Sl(eu),pick:Pl(eu),isect:dl(eu)};function nu(e,t){e.beginPath(),rl(e,t)}var ru={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",rl(null,t))},bound:function(e,t){var n,r;return il(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:Sl(nu),pick:Pl(nu),isect:hl};function iu(e,t,n){var r,i,o,a;return!(!t.stroke||!_l(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var ou,au={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",Ml(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return il(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){El(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&iu(e,t,r)&&e.stroke()}}))},pick:jl((function(e,t,n,r){return!!e.isPointInStroke&&(iu(e,t,1)&&e.isPointInStroke(n,r))})),isect:ml},su=Dl("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),lu=Dl("symbol",(function(e,t){return el.context(e)(t)}),pl),uu={height:hu,measureWidth:du,estimateWidth:cu,width:cu,canvas:mu};function cu(e,t){return ou=hu(e),fu(vu(e,t))}function fu(e){return~~(.8*e.length*ou)}function du(e,t){return hu(e)<=0?0:(cl.font=_u(e),pu(vu(e,t)))}function pu(e){return cl.measureText(e).width}function hu(e){return null!=e.fontSize?e.fontSize:11}function mu(e){uu.width=e&&cl?du:cu}function gu(e){return null!=e.lineHeight?e.lineHeight:hu(e)+2}function bu(e){return t=e.lineBreak&&e.text&&!Object(p.A)(e.text)?e.text.split(e.lineBreak):e.text,Object(p.A)(t)?t.length>1?t:t[0]:t;var t}function yu(e){const t=bu(e);return(Object(p.A)(t)?t.length-1:0)*gu(e)}function vu(e,t){return null==t?"":e.limit>0?function(e,t){var n,r=+e.limit,i=t+"";uu.width===du?(cl.font=_u(e),n=pu):(ou=hu(e),n=fu);if(n(i)<r)return i;var o,a=e.ellipsis||"…",s="rtl"===e.dir,l=0,u=i.length;if(r-=n(a),s){for(;l<u;)o=l+u>>>1,n(i.slice(o))>r?l=o+1:u=o;return a+i.slice(l)}for(;l<u;)o=1+(l+u>>>1),n(i.slice(0,o))<r?l=o:u=o-1;return i.slice(0,l)+a}(e,t):t+""}function xu(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function _u(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+hu(e)+"px "+xu(e,t)}function wu(e){var t=e.baseline,n=hu(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}mu(!0);var Ou={left:"start",center:"middle",right:"end"},Eu=new $o;function ku(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-rs,n+=i*Math.cos(t),r+=i*Math.sin(t)),Eu.x1=n,Eu.y1=r,Eu}function Su(e,t,n){var r,i=uu.height(t),o=t.align,a=ku(t),s=a.x1,l=a.y1,u=t.dx||0,c=(t.dy||0)+wu(t)-Math.round(.8*i),f=bu(t);if(Object(p.A)(f)?(i+=gu(t)*(f.length-1),r=f.reduce((e,n)=>Math.max(e,uu.width(t,n)),0)):r=uu.width(t,f),"center"===o?u-=r/2:"right"===o&&(u-=r),e.set(u+=s,c+=l,u+r,c+i),t.angle&&!n)e.rotate(t.angle*ns,s,l);else if(2===n)return e.rotatedPoints(t.angle*ns,s,l);return e}var Tu={arc:Rl,area:Ll,group:Vl,image:Zl,line:Ql,path:tu,rect:ru,rule:au,shape:su,symbol:lu,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+wu(t),o=ku(t),a=o.x1,s=o.y1,l=t.angle||0;e("text-anchor",Ou[t.align]||"start"),l?(n=Cl(a,s)+" "+Nl(l),(r||i)&&(n+=" "+Cl(r,i))):n=Cl(a+r,s+i),e("transform",n)},bound:Su,draw:function(e,t,n){El(t,(function(t){var r,i,o,a,s,l,u,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=_u(t),e.textAlign=t.align||"left",i=(r=ku(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*ns),i=o=0),i+=t.dx||0,o+=(t.dy||0)+wu(t),l=bu(t),Object(p.A)(l))for(s=gu(t),a=0;a<l.length;++a)u=vu(t,l[a]),t.fill&&vl(e,t,c)&&e.fillText(u,i,o),t.stroke&&_l(e,t,c)&&e.strokeText(u,i,o),o+=s;else u=vu(t,l),t.fill&&vl(e,t,c)&&e.fillText(u,i,o),t.stroke&&_l(e,t,c)&&e.strokeText(u,i,o);t.angle&&e.restore()}}))},pick:jl((function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=ku(t),s=a.x1,l=a.y1,u=Su(Eu,t,1),c=-t.angle*ns,f=Math.cos(c),d=Math.sin(c),p=f*i-d*o+(s-f*s+d*l),h=d*i+f*o+(l-d*s-f*l);return u.contains(p,h)})),isect:function(e,t){var n=Su(Eu,e,2);return gl(t,n[0],n[1],n[2],n[3])||gl(t,n[0],n[1],n[4],n[5])||gl(t,n[4],n[5],n[6],n[7])||gl(t,n[2],n[3],n[6],n[7])}},trail:zl("trail",(function(e,t){return tl.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))},ju=function(e,t,n){var r=Tu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new $o),e,n)},Au={mark:null},Pu=function(e,t,n){var r,i,o,a,s=Tu[e.marktype],l=s.bound,u=e.items,c=u&&u.length;if(s.nested)return c?o=u[0]:(Au.mark=e,o=Au),a=ju(o,l,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new $o,c)for(r=0,i=u.length;r<i;++r)t.union(ju(u[r],l,n));return e.bounds=t},Cu=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant"];function Nu(e,t){return JSON.stringify(e,Cu,t)}function Mu(e){return function e(t){var n,r,i,o=t.marktype,a=t.items;if(a)for(r=0,i=a.length;r<i;++r)n=o?"mark":"group",a[r][n]=t,a[r].zindex&&(a[r][n].zdirty=!0),"group"===(o||n)&&e(a[r]);o&&Pu(t);return t}("string"==typeof e?JSON.parse(e):e)}function Iu(e){arguments.length?this.root=Mu(e):(this.root=Ru({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Zo(this.root)])}var Du=Iu.prototype;function Ru(e,t){return{bounds:new $o,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function zu(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Lu(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Fu(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=zu(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function Bu(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Uu(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}Du.toJSON=function(e){return Nu(this.root,e||0)},Du.mark=function(e,t,n){var r=Ru(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var qu=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function $u(e,t){this._active=null,this._handlers={},this._loader=e||Me(),this._tooltip=t||Hu}function Hu(e,t,n,r){e.element().setAttribute("title",r||"")}var Wu=$u.prototype;function Vu(e){this._el=null,this._bgcolor=null,this._loader=new ta(e)}Wu.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},Wu.element=function(){return this._el},Wu.canvas=function(){return this._el&&this._el.firstChild},Wu.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},Wu.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},Wu.on=function(){},Wu.off=function(){},Wu._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},Wu.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},Wu.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},Wu.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=zu(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},Wu.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=Tu[a.marktype]).tip){for((o=qu(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},Wu.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.x1+r[0]+n.left,a=i.y1+r[1]+n.top,s=i.width(),l=i.height();e.mark&&(e=e.mark.group);)o+=e.x||0,a+=e.y||0;return{x:o,y:a,width:s,height:l,left:o,top:a,right:o+s,bottom:a+l}}};var Gu=Vu.prototype;Gu.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},Gu.element=function(){return this._el},Gu.canvas=function(){return this._el&&this._el.firstChild},Gu.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},Gu.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},Gu.dirty=function(){},Gu.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},Gu._render=function(){},Gu.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},Gu._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},Gu.sanitizeURL=function(e){return this._load("sanitizeURL",e)},Gu.loadImage=function(e){return this._load("loadImage",e)};var Yu="mouseout";function Xu(e,t){$u.call(this,e,t),this._down=null,this._touch=null,this._first=!0}var Ku=Object(p.y)(Xu,$u);function Ju(e,t,n){return function(r){var i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function Zu(e){return function(t){this.fire(e,t),this._active=null}}Ku.initialize=function(e,t,n){var r=this._canvas=e&&Lu(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){Ku[e]?Ku[e].call(i,t):i.fire(e,t)}))}))}return $u.prototype.initialize.call(this,e,t,n)},Ku.canvas=function(){return this._canvas},Ku.context=function(){return this._canvas.getContext("2d")},Ku.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Ku.DOMMouseScroll=function(e){this.fire("mousewheel",e)},Ku.mousemove=Ju("mousemove","mouseover","mouseout"),Ku.dragover=Ju("dragover","dragenter","dragleave"),Ku.mouseout=Zu("mouseout"),Ku.dragleave=Zu("dragleave"),Ku.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},Ku.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},Ku.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},Ku.touchmove=function(e){this.fire("touchmove",e,!0)},Ku.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},Ku.fire=function(e,t,n){var r,i,o=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,"click"===e&&o&&o.href?this.handleHref(t,o,o.href):"mousemove"!==e&&e!==Yu||this.handleTooltip(t,o,e!==Yu),a)for(r=0,i=a.length;r<i;++r)a[r].handler.call(this._obj,t,o)},Ku.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},Ku.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},Ku.pickEvent=function(e){var t=qu(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},Ku.pick=function(e,t,n,r,i){var o=this.context();return Tu[e.marktype].pick.call(this,o,e,t,n,r,i)};var Qu="undefined"!=typeof window&&window.devicePixelRatio||1;function ec(e){Vu.call(this,e),this._redraw=!1,this._dirty=new $o}var tc=Object(p.y)(ec,Vu),nc=Vu.prototype,rc=new $o;function ic(e,t,n){return rc.set(0,0,t,n).translate(-e[0],-e[1])}function oc(e,t){$u.call(this,e,t);var n=this;n._hrefHandler=sc(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=sc(n,(function(e,t){n.handleTooltip(e,t,e.type!==Yu)}))}tc.initialize=function(e,t,n,r,i,o){return this._options=o,this._canvas=Qo(1,1,o&&o.type),e&&(Bu(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),nc.initialize.call(this,e,t,n,r,i)},tc.resize=function(e,t,n,r){return nc.resize.call(this,e,t,n,r),function(e,t,n,r,i,o){var a,s="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,l=e.getContext("2d"),u=s?Qu:i;for(a in e.width=t*u,e.height=n*u,o)l[a]=o[a];s&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},tc.canvas=function(){return this._canvas},tc.context=function(){return this._canvas?this._canvas.getContext("2d"):null},tc.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=rc.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},tc._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty;return t.save(),this._redraw||o.empty()?(this._redraw=!1,o=ic(n,r,i).expand(1)):o=function(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,o.intersect(ic(n,r,i)),n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,o),t.restore(),this._dirty.clear(),this},tc.draw=function(e,t,n){var r=Tu[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),Object(p.D)(n)?(e.beginPath(),n(e),e.clip()):Fl(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},tc.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var ac=Object(p.y)(oc,$u);function sc(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function lc(e,t,n){var r,i,o="<"+e;if(t)for(r in t)null!=(i=t[r])&&(o+=" "+r+'="'+i+'"');return n&&(o+=" "+n),o+">"}function uc(e){return"</"+e+">"}ac.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(Yu,this._tooltipHandler)),this._svg=r=e&&Lu(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(Yu,this._tooltipHandler)),$u.prototype.initialize.call(this,e,t,n)},ac.canvas=function(){return this._svg},ac.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:sc(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},ac.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var cc={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},fc={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},dc=Object.keys(fc),pc=cc.xmlns;function hc(e){Vu.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var mc=Object(p.y)(hc,Vu),gc=Vu.prototype;function bc(e,t,n){var r,i,o;if("radial"===t.gradient){var a=Fu(e,n++,"pattern",pc);a.setAttribute("id",Vo+t.id),a.setAttribute("viewBox","0,0,1,1"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("preserveAspectRatio","xMidYMid slice"),(a=Fu(a,0,"rect",pc)).setAttribute("width","1"),a.setAttribute("height","1"),a.setAttribute("fill","url("+Sc()+"#"+t.id+")"),(e=Fu(e,n++,"radialGradient",pc)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=Fu(e,n++,"linearGradient",pc)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r)(o=Fu(e,r,"stop",pc)).setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Bu(e,r),n}function yc(e,t,n){var r;return(e=Fu(e,n,"clipPath",pc)).setAttribute("id",t.id),t.path?(r=Fu(e,0,"path",pc)).setAttribute("d",t.path):((r=Fu(e,0,"rect",pc)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),n+1}function vc(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function xc(e,t,n,r,i){var o,a=e._svg;if(!a&&(a=zu(o=t.ownerDocument,r,pc),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){var s=zu(o,"path",pc);s.setAttribute("class","background"),a.appendChild(s),s.__data__=e;var l=zu(o,"g",pc);a.appendChild(l),l.__data__=e}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}mc.initialize=function(e,t,n,r){return e&&(this._svg=Fu(e,0,"svg",pc),this._svg.setAttribute("class","marks"),Bu(e,1),this._root=Fu(this._svg,0,"g",pc),Bu(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),gc.initialize.call(this,e,t,n,r)},mc.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),gc.background.apply(this,arguments)},mc.resize=function(e,t,n,r){return gc.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},mc.canvas=function(){return this._svg},mc.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in cc)e[t]=cc[t];var n=this._bgcolor?lc("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+uc("rect"):"";return lc("svg",e)+n+this._svg.innerHTML+uc("svg")},mc._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Bu(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},mc.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Fu(t,0,"defs",pc)),i=bc(r,n.gradient[e],i);for(e in n.clipping)r||(n.el=r=Fu(t,0,"defs",pc)),i=yc(r,n.clipping[e],i);r&&(0===i?(t.removeChild(r),n.el=null):Bu(r,i))},mc._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},mc.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},mc.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},mc._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,i,o,a,s,l=++this._dirtyID;for(o=0,a=e.length;o<a;++o)(n=(t=e[o]).mark).marktype!==r&&(r=n.marktype,i=Tu[r]),n.zdirty&&n.dirty!==l&&(this._dirtyAll=!1,vc(t,l),n.items.forEach((function(e){e.dirty=l}))),n.zdirty||(t.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):t._svg&&(s=t._svg.parentNode)&&s.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==l&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,vc(t,l)),t._update=l));return!this._dirtyAll},mc.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,i=this,o=this._svg,a=Tu[t.marktype],s=!1===t.interactive?"none":null,l="g"===a.tag,u=null,c=0;function f(e){var t=i.isDirty(e),n=xc(e,r,u,a.tag,o);t&&(i._update(a,n,e),l&&function(e,t,n){t=t.lastChild;var r,i=0;El(n,(function(n){r=e.draw(t,n,r),++i})),Bu(t,1+i)}(i,n,e)),u=n,++c}return(r=xc(t,e,n,"g",o)).setAttribute("class",Uu(t)),l||r.style.setProperty("pointer-events",s),t.clip?r.setAttribute("clip-path",ql(i,t,t.group)):r.removeAttribute("clip-path"),a.nested?t.items.length&&f(t.items[0]):El(t,f),Bu(r,c),r};var _c=null,wc=null,Oc={group:function(e,t,n){wc=t.__values__,_c=t.childNodes[1],e.foreground(kc,n,this),_c=t.childNodes[0],e.background(kc,n,this);var r=!1===n.mark.interactive?"none":null;r!==wc.events&&(_c.style.setProperty("pointer-events",r),wc.events=r)},image:function(e,t,n){!1===n.smooth?(Ec(t,"image-rendering","optimizeSpeed"),Ec(t,"image-rendering","pixelated")):Ec(t,"image-rendering",null)},text:function(e,t,n){var r,i,o,a,s=bu(n);Object(p.A)(s)?(r=(i=s.map(e=>vu(n,e))).join("\n"))!==wc.text&&(Bu(t,0),o=t.ownerDocument,a=gu(n),i.forEach((e,r)=>{const i=zu(o,"tspan",pc);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",a)),t.appendChild(i)}),wc.text=r):(i=vu(n,s))!==wc.text&&(t.textContent=i,wc.text=i),Ec(t,"font-family",xu(n)),Ec(t,"font-size",hu(n)+"px"),Ec(t,"font-style",n.fontStyle),Ec(t,"font-variant",n.fontVariant),Ec(t,"font-weight",n.fontWeight)}};function Ec(e,t,n){n!==wc[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),wc[t]=n)}function kc(e,t,n){t!==wc[e]&&(null!=t?n?_c.setAttributeNS(n,e,t):_c.setAttribute(e,t):n?_c.removeAttributeNS(n,e):_c.removeAttribute(e),wc[e]=t)}function Sc(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Tc(e){Vu.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}mc._update=function(e,t,n){_c=t,wc=t.__values__,e.attr(kc,n,this);var r=Oc[e.type];r&&r.call(this,e,t,n),this.style(_c,n)},mc.style=function(e,t){var n,r,i,o,a;if(null!=t)for(n=0,r=dc.length;n<r;++n)a=t[i=dc[n]],"font"===i&&(a=xu(t)),a!==wc[i]&&(o=fc[i],null==a?"fill"===o?e.style.setProperty(o,"none"):e.style.removeProperty(o):(Go(a)&&(a=Yo(a,this._defs.gradient,Sc())),e.style.setProperty(o,a+"")),wc[i]=a)};var jc,Ac=Object(p.y)(Tc,Vu),Pc=Vu.prototype;function Cc(e,t,n,r){jc[r||e]=t}function Nc(e,t,n,r){if(null==e)return"";var i,o,a,s,l,u="";for("bgrect"===n&&!1===t.interactive&&(u+="pointer-events: none; "),"image"===n&&!1===e.smooth&&(u+="image-rendering: optimizeSpeed; image-rendering: pixelated; "),"text"===n&&(u+="font-family: "+xu(e)+"; ",u+="font-size: "+hu(e)+"px; ",e.fontStyle&&(u+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(u+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(u+="font-weight: "+e.fontWeight+"; ")),i=0,o=dc.length;i<o;++i)a=dc[i],s=fc[a],null==(l=e[a])?"fill"===s&&(u+="fill: none; "):"transparent"!==l||"fill"!==s&&"stroke"!==s?(Go(l)&&(l=Yo(l,r.gradient,"")),u+=s+": "+l+"; "):u+=s+": none; ";return u?'style="'+u.trim()+'"':null}function Mc(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}Ac.resize=function(e,t,n,r){Pc.resize.call(this,e,t,n,r);var i=this._origin,o=this._text,a={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in cc)a[s]=cc[s];o.head=lc("svg",a);var l=this._bgcolor;return"transparent"!==l&&"none"!==l||(l=null),o.bg=l?lc("rect",{width:this._width,height:this._height,style:"fill: "+l+";"})+uc("rect"):"",o.root=lc("g",{transform:"translate("+i+")"}),o.foot=uc("g")+uc("svg"),this},Ac.background=function(){var e=Pc.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},Ac.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},Ac._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},Ac.buildDefs=function(){var e,t,n,r,i,o=this._defs,a="";for(t in o.gradient){for(i=(n=o.gradient[t]).stops,"radial"===n.gradient?(a+=lc(r="pattern",{id:Vo+t,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a+=lc("rect",{width:"1",height:"1",fill:"url(#"+t+")"})+uc("rect"),a+=uc(r),a+=lc(r="radialGradient",{id:t,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):a+=lc(r="linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<i.length;++e)a+=lc("stop",{offset:i[e].offset,"stop-color":i[e].color})+uc("stop");a+=uc(r)}for(t in o.clipping)n=o.clipping[t],a+=lc("clipPath",{id:t}),n.path?a+=lc("path",{d:n.path})+uc("path"):a+=lc("rect",{x:0,y:0,width:n.width,height:n.height})+uc("rect"),a+=uc("clipPath");return a.length>0?lc("defs")+a+uc("defs"):""},Ac.attributes=function(e,t){return jc={},e(Cc,t,this),jc},Ac.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},Ac.mark=function(e){var t,n=this,r=Tu[e.marktype],i=r.tag,o=this._defs,a="";function s(s){var l=n.href(s);if(l&&(a+=lc("a",l)),t="g"!==i?Nc(s,e,i,o):null,a+=lc(i,n.attributes(r.attr,s),t),"text"===i){const e=bu(s);if(Object(p.A)(e)){const t={x:0,dy:gu(s)};for(let n=0;n<e.length;++n)a+=lc("tspan",n?t:null)+Mc(vu(s,e[n]))+uc("tspan")}else a+=Mc(vu(s,e))}else"g"===i&&(a+=lc("path",n.attributes(r.background,s),Nc(s,e,"bgrect",o))+uc("path"),a+=lc("g",n.attributes(r.foreground,s))+n.markGroup(s)+uc("g"));a+=uc(i),l&&(a+=uc("a"))}return"g"!==i&&!1===e.interactive&&(t='style="pointer-events: none;"'),a+=lc("g",{class:Uu(e),"clip-path":e.clip?ql(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&s(e.items[0]):El(e,s),a+uc("g")},Ac.markGroup=function(e){var t=this,n="";return El(e,(function(e){n+=t.mark(e)})),n};var Ic={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},Dc={};function Rc(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Dc[e]=t,this):Dc[e]}function zc(e,t,n){const r=[],i=(new $o).union(t),o=e.marktype;return o?Lc(e,i,n,r):"group"===o?Fc(e,i,n,r):Object(p.n)("Intersect scene must be mark node or group item.")}function Lc(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)Fc(i[s],t,n,r);else for(const e=Tu[o].isect;s<a;++s){let n=i[s];Bc(n,t,e)&&r.push(n)}}return r}function Fc(e,t,n,r){n&&n(e.mark)&&Bc(e,t,Tu.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)Lc(i[e],t,n,r);t.translate(a,s)}return r}function Bc(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}Dc.canvas=Dc.png={renderer:ec,headless:ec,handler:Xu},Dc.svg={renderer:hc,headless:Tc,handler:oc},Dc.none={};var Uc=new $o,qc=function(e){var t=e.clip;if(Object(p.D)(t))t(sl(Uc.clear()));else{if(!t)return;Uc.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Uc)},$c=1e-9;function Hc(e,t,n){return e===t||("path"===n?Wc(e,t):e instanceof Date&&t instanceof Date?+e==+t:Object(p.E)(e)&&Object(p.E)(t)?Math.abs(e-t)<=$c:e&&t&&(Object(p.F)(e)||Object(p.F)(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!Hc(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function Wc(e,t){return Hc(ts(e),ts(t))}function Vc(e){Qe.call(this,null,e)}function Gc(e,t,n){return t(e.bounds.clear(),e,n)}Object(p.y)(Vc,Qe).transform=function(e,t){var n,r=t.dataflow,i=e.mark,o=i.marktype,a=Tu[o],s=a.bound,l=i.bounds;if(a.nested)i.items.length&&r.dirty(i.items[0]),l=Gc(i,s),i.items.forEach((function(e){e.bounds.clear().union(l)}));else if(o===vo||e.modified())switch(t.visit(t.MOD,(function(e){r.dirty(e)})),l.clear(),i.items.forEach((function(e){l.union(Gc(e,s))})),i.role){case xo:case Eo:case _o:t.reflow()}else n=t.changed(t.REM),t.visit(t.ADD,(function(e){l.union(Gc(e,s))})),t.visit(t.MOD,(function(e){n=n||l.alignsWith(e.bounds),r.dirty(e),l.union(Gc(e,s))})),n&&(l.clear(),i.items.forEach((function(e){l.union(e.bounds)})));return qc(i),t.modifies("bounds")};var Yc=":vega_identifier:";function Xc(e){Qe.call(this,0,e)}function Kc(e){Qe.call(this,null,e)}function Jc(e){Qe.call(this,null,e)}Xc.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(p.y)(Xc,Qe).transform=function(e,t){var n=function(e){var t=e._signals[Yc];t||(e._signals[Yc]=t=e.add(0));return t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,(function(e){e[i]||(e[i]=++r)})),n.set(this.value=r),t},Object(p.y)(Kc,Qe).transform=function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===vo?Zo:Jo;return t.visit(t.ADD,(function(e){r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var Zc=Object(p.y)(Jc,Qe),Qc={parity:function(e){return e.filter((e,t)=>t%2?e.opacity=0:1)},greedy:function(e,t){var n;return e.filter((e,r)=>r&&ef(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1))}};function ef(e,t,n){return n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)}function tf(e,t){for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(ef(o,n=e[r].bounds,t))return!0}function nf(e){var t=e.bounds;return t.width()>1&&t.height()>1}function rf(e){return e.forEach(e=>e.opacity=1),e}function of(e,t){return e.reflow(t.modified()).modifies("opacity")}function af(e){Qe.call(this,null,e)}Zc.transform=function(e,t){var n,r,i,o=Qc[e.method]||Qc.parity,a=t.materialize(t.SOURCE).source,s=e.separation||0;if(a&&a.length){if(!e.method)return e.modified("method")&&(rf(a),t=of(t,e)),t;if(e.sort&&(a=a.slice().sort(e.sort)),n=rf(a=a.filter(nf)),t=of(t,e),n.length>=3&&tf(n,s)){do{n=o(n,s)}while(n.length>=3&&tf(n,s));n.length<3&&!Object(p.T)(a).opacity&&(n.length>1&&(Object(p.T)(n).opacity=0),Object(p.T)(a).opacity=1)}var l,u,c,f,d;return e.boundScale&&e.boundTolerance>=0&&(l=e.boundScale,u=e.boundOrient,c=+e.boundTolerance,f=l.range(),d=new $o,u===oo||u===lo?d.set(f[0],-1/0,f[1],1/0):d.set(-1/0,f[0],1/0,f[1]),d.expand(c||1),r=e=>d.encloses(e.bounds),a.forEach(e=>{r(e)||(e.opacity=0)})),i=n[0].mark.bounds.clear(),a.forEach(e=>{e.opacity&&i.union(e.bounds)}),t}},Object(p.y)(af,Qe).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};const sf=new $o;function lf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function uf(e){var t=e.items[0].datum.orient;return t===ao||t===so}function cf(e,t,n,r){var i,o,a=t.items[0],s=a.datum,l=s.orient,u=null!=s.translate?s.translate:.5,c=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=a.range,d=a.offset,p=a.position,h=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],b=a.titlePadding,y=a.bounds,v=g&&yu(g),x=0,_=0;switch(sf.clear().union(y),y.clear(),(i=c[0])>-1&&y.union(a.items[i].bounds),(i=c[1])>-1&&y.union(a.items[i].bounds),l){case oo:x=p||0,_=-d,o=Math.max(h,Math.min(m,-y.y1)),g&&(o=ff(e,g,o,b,v,0,-1,y)),y.add(0,-o).add(f,0);break;case ao:x=-d,_=p||0,o=Math.max(h,Math.min(m,-y.x1)),g&&(o=ff(e,g,o,b,v,1,-1,y)),y.add(-o,0).add(0,f);break;case so:x=n+d,_=p||0,o=Math.max(h,Math.min(m,y.x2)),g&&(o=ff(e,g,o,b,v,1,1,y)),y.add(0,0).add(o,f);break;case lo:x=p||0,_=r+d,o=Math.max(h,Math.min(m,y.y2)),g&&(o=ff(e,g,o,b,0,0,1,y)),y.add(0,0).add(f,o);break;default:x=a.x,_=a.y}return il(y.translate(x,_),a),lf(a,"x",x+u)|lf(a,"y",_+u)&&(a.bounds=sf,e.dirty(a),a.bounds=y,e.dirty(a)),a.mark.bounds.clear().union(y)}function ff(e,t,n,r,i,o,a,s){var l=t.bounds,u=0,c=0;return t.auto?(e.dirty(t),n+=r,o?u=(t.x||0)-(t.x=a*(n+i)):c=(t.y||0)-(t.y=a*(n+i)),t.mark.bounds.clear().union(l.translate(-u,-c)),e.dirty(t),o?(s.add(0,l.y1).add(0,l.y2),n+=l.width()):(s.add(l.x1,0).add(l.x2,0),n+=l.height())):s.union(l),n}function df(e){return(new $o).set(0,0,e.width||0,e.height||0)}function pf(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function hf(e,t,n){var r=Object(p.F)(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function mf(e){return e<0?Math.ceil(-e):0}function gf(e,t,n){var r,i,o,a,s,l,u,c,f,d,p,h=!n.nodirty,m=n.bounds===Bo?df:pf,g=sf.set(0,0,0,0),b=hf(n.align,Uo),y=hf(n.align,qo),v=hf(n.padding,Uo),x=hf(n.padding,qo),_=n.columns||t.length,w=_<0?1:Math.ceil(t.length/_),O=t.length,E=Array(O),k=Array(_),S=0,T=Array(O),j=Array(w),A=0,P=Array(O),C=Array(O),N=Array(O);for(i=0;i<_;++i)k[i]=0;for(i=0;i<w;++i)j[i]=0;for(i=0;i<O;++i)l=t[i],s=N[i]=m(l),l.x=l.x||0,P[i]=0,l.y=l.y||0,C[i]=0,o=i%_,a=~~(i/_),S=Math.max(S,u=Math.ceil(s.x2)),A=Math.max(A,c=Math.ceil(s.y2)),k[o]=Math.max(k[o],u),j[a]=Math.max(j[a],c),E[i]=v+mf(s.x1),T[i]=x+mf(s.y1),h&&e.dirty(t[i]);for(i=0;i<O;++i)i%_==0&&(E[i]=0),i<_&&(T[i]=0);if(b===Fo)for(o=1;o<_;++o){for(p=0,i=o;i<O;i+=_)p<E[i]&&(p=E[i]);for(i=o;i<O;i+=_)E[i]=p+k[o-1]}else if(b===Lo){for(p=0,i=0;i<O;++i)i%_&&p<E[i]&&(p=E[i]);for(i=0;i<O;++i)i%_&&(E[i]=p+S)}else for(b=!1,o=1;o<_;++o)for(i=o;i<O;i+=_)E[i]+=k[o-1];if(y===Fo)for(a=1;a<w;++a){for(p=0,r=(i=a*_)+_;i<r;++i)p<T[i]&&(p=T[i]);for(i=a*_;i<r;++i)T[i]=p+j[a-1]}else if(y===Lo){for(p=0,i=_;i<O;++i)p<T[i]&&(p=T[i]);for(i=_;i<O;++i)T[i]=p+A}else for(y=!1,a=1;a<w;++a)for(r=(i=a*_)+_;i<r;++i)T[i]+=j[a-1];for(f=0,i=0;i<O;++i)f=E[i]+(i%_?f:0),P[i]+=f-t[i].x;for(o=0;o<_;++o)for(d=0,i=o;i<O;i+=_)d+=T[i],C[i]+=d-t[i].y;if(b&&hf(n.center,Uo)&&w>1)for(i=0;i<O;++i)(f=(s=b===Lo?S:k[i%_])-N[i].x2-t[i].x-P[i])>0&&(P[i]+=f/2);if(y&&hf(n.center,qo)&&1!==_)for(i=0;i<O;++i)(d=(s=y===Lo?A:j[~~(i/_)])-N[i].y2-t[i].y-C[i])>0&&(C[i]+=d/2);for(i=0;i<O;++i)g.union(N[i].translate(P[i],C[i]));switch(f=hf(n.anchor,bo),d=hf(n.anchor,yo),hf(n.anchor,Uo)){case go:f-=g.width();break;case mo:f-=g.width()/2}switch(hf(n.anchor,qo)){case go:d-=g.height();break;case mo:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<O;++i)t[i].mark.bounds.clear();for(i=0;i<O;++i)(l=t[i]).x+=P[i]+=f,l.y+=C[i]+=d,g.union(l.mark.bounds.union(l.bounds.translate(P[i],C[i]))),h&&e.dirty(l);return g}function bf(e,t,n){var r,i,o,a,s,l,u,c=function(e){for(var t,n,r=e.items,i=r.length,o=0,a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};o<i;++o)if(n=(t=r[o]).items,t.marktype===vo)switch(t.role){case xo:case Eo:case _o:break;case ko:a.rowheaders.push(...n);break;case So:a.rowfooters.push(...n);break;case jo:a.colheaders.push(...n);break;case Ao:a.colfooters.push(...n);break;case To:a.rowtitle=n[0];break;case Po:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),f=c.marks,d=n.bounds===Bo?yf:vf,p=n.offset,h=n.columns||f.length,m=h<0?1:Math.ceil(f.length/h),g=m*h;const b=gf(e,f,n);c.rowheaders&&(l=hf(n.headerBand,qo,null),r=wf(e,c.rowheaders,f,h,m,-hf(p,"rowHeader"),xf,0,d,"x1",0,h,1,l)),c.colheaders&&(l=hf(n.headerBand,Uo,null),i=wf(e,c.colheaders,f,h,h,-hf(p,"columnHeader"),xf,1,d,"y1",0,1,h,l)),c.rowfooters&&(l=hf(n.footerBand,qo,null),o=wf(e,c.rowfooters,f,h,m,hf(p,"rowFooter"),_f,0,d,"x2",h-1,h,1,l)),c.colfooters&&(l=hf(n.footerBand,Uo,null),a=wf(e,c.colfooters,f,h,h,hf(p,"columnFooter"),_f,1,d,"y2",g-h,1,h,l)),c.rowtitle&&(s=hf(n.titleAnchor,qo),u=hf(p,"rowTitle"),u=s===go?o+u:r-u,l=hf(n.titleBand,qo,.5),Of(e,c.rowtitle,u,0,b,l)),c.coltitle&&(s=hf(n.titleAnchor,Uo),u=hf(p,"columnTitle"),u=s===go?a+u:i-u,l=hf(n.titleBand,Uo,.5),Of(e,c.coltitle,u,1,b,l))}function yf(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function vf(e,t){return e.bounds[t]}function xf(e,t){return Math.floor(Math.min(e,t))}function _f(e,t){return Math.ceil(Math.max(e,t))}function wf(e,t,n,r,i,o,a,s,l,u,c,f,d,p){var h,m,g,b,y,v,x,_,w,O=n.length,E=0,k=0;if(!O)return E;for(h=c;h<O;h+=f)n[h]&&(E=a(E,l(n[h],u)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=o,m=0,b=t.length;m<b;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(h=c,m=0,b=t.length;m<b;++m,h+=f){for(y=(v=t[m]).mark.bounds,g=h;g>=0&&null==(x=n[g]);g-=d);s?(_=null==p?x.x:Math.round(x.bounds.x1+p*x.bounds.width()),w=E):(_=E,w=null==p?x.y:Math.round(x.bounds.y1+p*x.bounds.height())),y.union(v.bounds.translate(_-(v.x||0),w-(v.y||0))),v.x=_,v.y=w,e.dirty(v),k=a(k,y[u])}return k}function Of(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function Ef(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),l=(f=e,d=s("offset",0),p=-1/0,f.forEach(e=>{null!=e.offset&&(p=Math.max(p,e.offset))}),p>-1/0?p:d),u=s("anchor",ho),c=u===go?1:u===mo?.5:0;var f,d,p;const h={align:Fo,bounds:s("bounds",Bo),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case ao:h.anchor={x:Math.floor(r.x1)-l,column:go,y:c*(a||r.height()+2*r.y1),row:u};break;case so:h.anchor={x:Math.ceil(r.x2)+l,y:c*(a||r.height()+2*r.y1),row:u};break;case oo:h.anchor={y:Math.floor(i.y1)-l,row:go,x:c*(o||i.width()+2*i.x1),column:u};break;case lo:h.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case uo:h.anchor={x:l,y:l};break;case co:h.anchor={x:o-l,y:l,column:go};break;case fo:h.anchor={x:l,y:a-l,row:go};break;case po:h.anchor={x:o-l,y:a-l,column:go,row:go}}return h}function kf(e,t){var n,r,i,o,a=t.items[0],s=a.datum,l=a.orient,u=a.bounds,c=a.x,f=a.y;return a._bounds?a._bounds.clear().union(u):a._bounds=u.clone(),u.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=r-a.x,c=r-a.y;switch(a.orient){case ao:i+=Math.ceil(a.bounds.width())+l;break;case so:case lo:break;default:o+=a.bounds.height()+l}switch((i||o)&&Tf(e,n,i,o),a.orient){case ao:c+=Sf(t,n,a,s,1,1);break;case so:u+=Sf(t,n,a,go,0,0)+l,c+=Sf(t,n,a,s,1,1);break;case lo:u+=Sf(t,n,a,s,0,0),c+=Sf(t,n,a,go,-1,0,1)+l;break;default:u+=Sf(t,n,a,s,0,0)}(u||c)&&Tf(e,a,u,c),(u=Math.round(a.bounds.x1-r))<0&&(Tf(e,n,-u,0),Tf(e,a,-u,0))}else(i||o)&&Tf(e,n,i,o)}(e,a,a.items[0].items[0]),u=function(e,t){return e.items.forEach(e=>t.union(e.bounds)),t.x1=e.padding,t.y1=e.padding,t}(a,u),n=2*a.padding,r=2*a.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),s.type===No&&(i=a.items[0].items[0].items[0].items,o=i.reduce((function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e}),{}),i.forEach((function(e){e.width=o[e.column],e.height=e.bounds.y2-e.y}))),l!==zo&&(a.x=c=0,a.y=f=0),a.width=n,a.height=r,il(u.set(c,f,c+n,f+r),a),a.mark.bounds.clear().union(u),a}function Sf(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,l=n.datum.vgrad,u=(!s||!o&&l||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=l&&o?u:0,f=l&&o?0:u,d=i<=0?0:yu(n);return Math.round(r===ho?c:r===go?f-d:.5*(u-d))}function Tf(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function jf(e){Qe.call(this,null,e)}Object(p.y)(jf,Qe).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&bf(n,t,e.layout),function(e,t,n){var r,i,o,a,s,l=t.items,u=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new $o).set(0,0,u,c),d=f.clone(),p=f.clone(),h=[];for(a=0,s=l.length;a<s;++a)switch((i=l[a]).role){case xo:(uf(i)?d:p).union(cf(e,i,u,c));break;case _o:r=i;break;case Eo:h.push(kf(e,i));break;case wo:case Oo:case ko:case So:case To:case jo:case Ao:case Po:d.union(i.bounds),p.union(i.bounds);break;default:f.union(i.bounds)}if(h.length){const t={};h.forEach(e=>{(o=e.orient||so)!==zo&&(t[o]||(t[o]=[])).push(e)});for(let r in t){const i=t[r];gf(e,i,Ef(i,r,n.legends,d,p,u,c))}h.forEach(t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===Mo)switch(t.orient){case ao:case so:f.add(r.x1,0).add(r.x2,0);break;case oo:case lo:f.add(0,r.y1).add(0,r.y2)}else f.union(r)})}f.union(d).union(p),r&&f.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,l=a.orient,u=a.anchor,c=a.offset,f=a.padding,d=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],h=l===ao||l===so?r:n,m=0,g=0,b=0,y=0,v=0;if(s!==vo?l===ao?(m=i.y2,h=i.y1):l===so?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):l===ao&&(m=r,h=0),o=u===ho?m:u===go?h:(m+h)/2,p&&p.text){switch(l){case oo:case lo:v=d.bounds.height()+f;break;case ao:y=d.bounds.width()+f;break;case so:y=-d.bounds.width()-f}sf.clear().union(p.bounds),sf.translate(y-(p.x||0),v-(p.y||0)),lf(p,"x",y)|lf(p,"y",v)&&(e.dirty(p),p.bounds.clear().union(sf),p.mark.bounds.clear().union(sf),e.dirty(p)),sf.clear().union(p.bounds)}else sf.clear();switch(sf.union(d.bounds),l){case oo:g=o,b=i.y1-sf.height()-c;break;case ao:g=i.x1-sf.width()-c,b=o;break;case so:g=i.x2+sf.width()+c,b=o;break;case lo:g=o,b=i.y2+c;break;default:g=a.x,b=a.y}return lf(a,"x",g)|lf(a,"y",b)&&(sf.translate(g,b),e.dirty(a),a.bounds.clear().union(sf),t.bounds.clear().union(sf),e.dirty(a)),a.bounds}(e,r,u,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){var i=r.autosize||{},o=i.type,a=e._width,s=e._height,l=e.padding();if(e._autosize<1||!o)return;var u=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,Math.ceil(n.x2-u)),d=Math.max(0,t.height||0),p=Math.max(0,Math.ceil(-n.y1)),h=Math.max(0,Math.ceil(n.y2-d));i.contains===Co&&(a-=l.left+l.right,s-=l.top+l.bottom);o===zo?(c=0,p=0,u=a,d=s):o===Mo?(u=Math.max(0,a-c-f),d=Math.max(0,s-p-h)):o===Io?(u=Math.max(0,a-c-f),s=d+p+h):o===Do?(a=u+c+f,d=Math.max(0,s-p-h)):o===Ro&&(a=u+c+f,s=d+p+h);e._resizeView(a,s,u,d,[c,p],i.resize)}(e,t,f,n)}(n,t,e)})),e.modified()&&t.reflow(),t};var Af=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0};const Pf="identity",Cf="linear",Nf="log",Mf="pow",If="sqrt",Df="symlog",Rf="time",zf="utc",Lf="sequential",Ff="diverging",Bf="quantile",Uf="quantize",qf="threshold",$f="ordinal",Hf="point",Wf="band",Vf="bin-ordinal";function Gf(e){return e===Bf}function Yf(e){return function(e){return e&&e.startsWith(Lf)}(e)||function(e){return e&&e.startsWith(Ff)}(e)}function Xf(e){return e===Nf||e.endsWith("-log")}function Kf(e){switch(e){case Cf:case Nf:case Mf:case If:case Df:case Rf:case zf:case Lf:return!0}return!1}function Jf(e){return e===Vf||e===$f||e===Wf||e===Hf}function Zf(e){return e===Vf||e===Bf||e===Uf||e===qf}var Qf=function(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}},ed=function(e){return function(t){var n,r,i,o,a=e.range(),s=t[0],l=t[1],u=-1;for(l<s&&(r=s,s=l,l=r),i=0,o=a.length;i<o;++i)a[i]>=s&&a[i]<=l&&(u<0&&(u=i),n=i);if(!(u<0))return s=e.invertExtent(a[u]),l=e.invertExtent(a[n]),[void 0===s[0]?s[1]:s[0],void 0===l[1]?l[0]:l[1]]}},td=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o},nd=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},rd=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return nd(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var id=rd(nd),od=id.right,ad=(id.left,od);function sd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ld(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const ud=Symbol("implicit");function cd(){var e=new Map,t=[],n=[],r=ud;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==ud)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return cd(t,n).unknown(r)},sd.apply(i,arguments),i}function fd(){var e,t,n=cd().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,l=0,u=.5;function c(){var n=r().length,c=o[1]<o[0],f=o[c-0],d=o[1-c],p=Af(n,s,l);e=(d-f)/(p||1),a&&(e=Math.floor(e)),f+=(d-f-e*(n-s))*u,t=e*(1-s),a&&(f=Math.round(f),t=Math.round(t));var h=td(n).map((function(t){return f+e*t}));return i(c?h.reverse():h)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),c()):r()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,c()):a},n.padding=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),s=l,c()):s},n.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},n.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,a,s,l=+e[0],u=+e[1],c=o[1]<o[0],f=c?i().reverse():i(),d=f.length-1;if(l==l&&u==u&&(u<l&&(s=l,l=u,u=s),!(u<f[0]||l>o[1-c])))return n=Math.max(0,od(f,l)-1),a=l===u?n:od(f,u)-1,l-f[n]>t+1e-10&&++n,c&&(s=n,n=d-a,a=d-s),n>a?void 0:r().slice(n,a+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return fd().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}var dd=Math.sqrt(50),pd=Math.sqrt(10),hd=Math.sqrt(2),md=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=gd(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function gd(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=dd?10:o>=pd?5:o>=hd?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=dd?10:o>=pd?5:o>=hd?2:1)}function bd(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=dd?i*=10:o>=pd?i*=5:o>=hd&&(i*=2),t<e?-i:i}var yd=n(9),vd=function(e,t,n,r){var i,o=bd(e,t,n);switch((r=Object(yd.d)(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=Object(yd.f)(o,a))||(r.precision=i),Object(yd.c)(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Object(yd.g)(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Object(yd.e)(o))||(r.precision=i-2*("%"===r.type))}return Object(yd.a)(r)},xd=Array.prototype.map;function _d(e){return xd.call(e,(function(e){return+e}))}var wd=Array.prototype.slice;var Od=n(11),Ed=function(e){return function(){return e}},kd=function(e){return+e},Sd=[0,1];function Td(e){return e}function jd(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ed(isNaN(t)?NaN:.5)}function Ad(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=jd(i,r),o=n(a,o)):(r=jd(r,i),o=n(o,a)),function(e){return o(r(e))}}function Pd(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=jd(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=ad(e,t,1,r)-1;return o[n](i[n](t))}}function Cd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Nd(){var e,t,n,r,i,o,a=Sd,s=Sd,l=Od.interpolate,u=Td;function c(){var e,t,n,l=Math.min(a.length,s.length);return u!==Td&&(e=a[0],t=a[l-1],e>t&&(n=e,e=t,t=n),u=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?Pd:Ad,i=o=null,f}function f(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return f.invert=function(n){return u(t((o||(o=r(s,a.map(e),Od.interpolateNumber)))(n)))},f.domain=function(e){return arguments.length?(a=Array.from(e,kd),c()):a.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),l=Od.interpolateRound,c()},f.clamp=function(e){return arguments.length?(u=!!e||Td,c()):u!==Td},f.interpolate=function(e){return arguments.length?(l=e,c()):l},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function Md(){return Nd()(Td,Td)}function Id(e){var t=e.domain;return e.ticks=function(e){var n=t();return md(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return vd(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,s=i[o],l=i[a];return l<s&&(r=s,s=l,l=r,r=o,o=a,a=r),(r=gd(s,l,n))>0?r=gd(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=gd(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,t(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,t(i)),e},e}var Dd=function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e};function Rd(e){return Math.log(e)}function zd(e){return Math.exp(e)}function Ld(e){return-Math.log(-e)}function Fd(e){return-Math.exp(-e)}function Bd(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ud(e){return function(t){return-e(-t)}}function qd(e){var t,n,r=e(Rd,zd),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?Bd:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=Ud(t),n=Ud(n),e(Ld,Fd)):e(Rd,zd),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],l=a[a.length-1];(r=l<s)&&(d=s,s=l,l=d);var u,c,f,d=t(s),p=t(l),h=null==e?10:+e,m=[];if(!(o%1)&&p-d<h){if(d=Math.floor(d),p=Math.ceil(p),s>0){for(;d<=p;++d)for(c=1,u=n(d);c<o;++c)if(!((f=u*c)<s)){if(f>l)break;m.push(f)}}else for(;d<=p;++d)for(c=o-1,u=n(d);c>=1;--c)if(!((f=u*c)<s)){if(f>l)break;m.push(f)}2*m.length<h&&(m=md(s,l,h))}else m=md(d,p,Math.min(p-d,h)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Object(yd.a)(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(Dd(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function $d(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Hd(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Wd(e){return e<0?-e*e:e*e}function Vd(e){var t=e(Td,Td),n=1;function r(){return 1===n?e(Td,Td):.5===n?e(Hd,Wd):e($d(n),$d(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Id(t)}function Gd(){var e=Vd(Nd());return e.copy=function(){return Cd(e,Gd()).exponent(e.exponent())},sd.apply(e,arguments),e}function Yd(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Xd(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Kd(e){var t=1,n=e(Yd(t),Xd(t));return n.constant=function(n){return arguments.length?e(Yd(t=+n),Xd(t)):t},Id(n)}var Jd=1e3,Zd=60*Jd,Qd=60*Zd,ep=24*Qd,tp=7*ep,np=30*ep,rp=365*ep;function ip(e){return new Date(e)}function op(e){return e instanceof Date?+e:+new Date(+e)}function ap(e,t,n,r,i,o,a,s,l){var u=Md(),c=u.invert,f=u.domain,d=l(".%L"),p=l(":%S"),h=l("%I:%M"),m=l("%I %p"),g=l("%a %d"),b=l("%b %d"),y=l("%B"),v=l("%Y"),x=[[a,1,Jd],[a,5,5*Jd],[a,15,15*Jd],[a,30,30*Jd],[o,1,Zd],[o,5,5*Zd],[o,15,15*Zd],[o,30,30*Zd],[i,1,Qd],[i,3,3*Qd],[i,6,6*Qd],[i,12,12*Qd],[r,1,ep],[r,2,2*ep],[n,1,tp],[t,1,np],[t,3,3*np],[e,1,rp]];function _(s){return(a(s)<s?d:o(s)<s?p:i(s)<s?h:r(s)<s?m:t(s)<s?n(s)<s?g:b:e(s)<s?y:v)(s)}function w(t,n,r){if(null==t&&(t=10),"number"==typeof t){var i,o=Math.abs(r-n)/t,a=rd((function(e){return e[2]})).right(x,o);return a===x.length?(i=bd(n/rp,r/rp,t),t=e):a?(i=(a=x[o/x[a-1][2]<x[a][2]/o?a-1:a])[1],t=a[0]):(i=Math.max(bd(n,r,t),1),t=s),t.every(i)}return t}return u.invert=function(e){return new Date(c(e))},u.domain=function(e){return arguments.length?f(Array.from(e,op)):f().map(ip)},u.ticks=function(e){var t,n=f(),r=n[0],i=n[n.length-1],o=i<r;return o&&(t=r,r=i,i=t),t=(t=w(e,r,i))?t.range(r,i+1):[],o?t.reverse():t},u.tickFormat=function(e,t){return null==t?_:l(t)},u.nice=function(e){var t=f();return(e=w(e,t[0],t[t.length-1]))?f(Dd(t,e)):u},u.copy=function(){return Cd(u,ap(e,t,n,r,i,o,a,s,l))},u}function sp(){var e,t,n,r,i,o=0,a=1,s=Td,l=!1;function u(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),u):[o,a]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.range=c(Od.interpolate),u.rangeRound=c(Od.interpolateRound),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),u}}function lp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function up(){var e=Id(sp()(Td));return e.copy=function(){return lp(e,up())},ld.apply(e,arguments)}function cp(){var e=Vd(sp());return e.copy=function(){return lp(e,cp()).exponent(e.exponent())},ld.apply(e,arguments)}function fp(){var e,t,n,r,i,o,a,s=0,l=.5,u=1,c=1,f=Td,d=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function h(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=Object(Od.piecewise)(e,[n,r,i]),p):[f(0),f(.5),f(1)]}}return p.domain=function(a){return arguments.length?([s,l,u]=a,e=o(s=+s),t=o(l=+l),n=o(u=+u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p):[s,l,u]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(f=e,p):f},p.range=h(Od.interpolate),p.rangeRound=h(Od.interpolateRound),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p}}function dp(){var e=Vd(fp());return e.copy=function(){return lp(e,dp()).exponent(e.exponent())},ld.apply(e,arguments)}function pp(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function hp(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function mp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function gp(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return hp(e);if(t>=1)return pp(e);var r,i=(r-1)*t,o=Math.floor(i),a=pp(function e(t,n,r=0,i=t.length-1,o=nd){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}const a=t[n];let s=r,l=i;for(mp(t,r,n),o(t[i],a)>0&&mp(t,r,i);s<l;){for(mp(t,s,l),++s,--l;o(t[s],a)<0;)++s;for(;o(t[l],a)>0;)--l}0===o(t[r],a)?mp(t,r,l):mp(t,++l,i),l<=n&&(r=l+1),n<=l&&(i=l-1)}return t}(e,o).subarray(0,o+1));return a+(hp(e.subarray(o+1))-a)*(i-o)}}function bp(e,t){return arguments.length>1?(yp[e]=function(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Qf(n):n.invertExtent?ed(n):void 0),n.type=e,n}}(e,t),this):Object(p.v)(yp,e)?yp[e]:void 0}var yp={[Pf]:function e(t){var n;function r(e){return isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,kd),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,kd):[0,1],Id(r)},[Cf]:function e(){var t=Md();return t.copy=function(){return Cd(t,e())},sd.apply(t,arguments),Id(t)},[Nf]:function e(){var t=qd(Nd()).domain([1,10]);return t.copy=function(){return Cd(t,e()).base(t.base())},sd.apply(t,arguments),t},[Mf]:Gd,[If]:function(){return Gd.apply(null,arguments).exponent(.5)},[Df]:function e(){var t=Kd(Nd());return t.copy=function(){return Cd(t,e()).constant(t.constant())},sd.apply(t,arguments)},[Rf]:function(){return sd.apply(ap(ni.a,ri.a,Br.b,ii.a,oi.a,ai.a,si.a,li.a,Ce.b).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[zf]:function(){return sd.apply(ap(ui.a,ci.a,Ur.b,fi.a,di.a,pi.a,si.a,li.a,Ce.d).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[Lf]:up,[Lf+"-"+Cf]:up,[Lf+"-"+Nf]:function e(){var t=qd(sp()).domain([1,10]);return t.copy=function(){return lp(t,e()).base(t.base())},ld.apply(t,arguments)},[Lf+"-"+Mf]:cp,[Lf+"-"+If]:function(){return cp.apply(null,arguments).exponent(.5)},[Lf+"-"+Df]:function e(){var t=Kd(sp());return t.copy=function(){return lp(t,e()).constant(t.constant())},ld.apply(t,arguments)},[Ff+"-"+Cf]:function e(){var t=Id(fp()(Td));return t.copy=function(){return lp(t,e())},ld.apply(t,arguments)},[Ff+"-"+Nf]:function e(){var t=qd(fp()).domain([.1,1,10]);return t.copy=function(){return lp(t,e()).base(t.base())},ld.apply(t,arguments)},[Ff+"-"+Mf]:dp,[Ff+"-"+If]:function(){return dp.apply(null,arguments).exponent(.5)},[Ff+"-"+Df]:function e(){var t=Kd(fp());return t.copy=function(){return lp(t,e()).constant(t.constant())},ld.apply(t,arguments)},[Bf]:function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=gp(n,e/t);return a}function a(e){return isNaN(e=+e)?t:r[ad(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(nd),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},sd.apply(a,arguments)},[Uf]:function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return e<=e?a[ad(o,e,0,i)]:t}function l(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,l()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},sd.apply(Id(s),arguments)},[qf]:function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return e<=e?r[ad(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},sd.apply(o,arguments)},[Vf]:function e(){var t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(ad(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=_d(e),r):t.slice()},r.range=function(e){return arguments.length?(n=wd.call(e),r):n.slice()},r.tickFormat=function(e,n){return vd(t[0],Object(p.T)(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r},[$f]:cd,[Wf]:fd,[Hf]:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(fd().paddingInner(1))}};for(var vp in yp)bp(vp,yp[vp]);const xp=["clamp","base","constant","exponent"];function _p(e,t){var n=t[0],r=Object(p.T)(t)-n;return function(t){return e(n+t*r)}}function wp(e,t,n){return Od.piecewise(kp(t||"rgb",n),e)}function Op(e,t){for(var n=new Array(t),r=t+1,i=0;i<t;)n[i]=e(++i/r);return n}function Ep(e,t,n){var r,i,o,a=n-t;return a&&Number.isFinite(a)?(r=(i=e.type).indexOf("-"),i=r<0?i:i.slice(r+1),o=bp(i)().domain([t,n]).range([0,1]),xp.forEach(t=>e[t]?o[t](e[t]()):0),o):Object(p.l)(.5)}function kp(e,t){var n=Od[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Sp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Tp(e,t){for(let n in e)Ap(n,t(e[n]))}const jp={};function Ap(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(jp[e]=t,this):jp[e]}function Pp(e,t,n){var r;return Object(p.E)(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,~~(Object(p.W)(e.domain())/n)||1))),Object(p.F)(t)&&(r=t.step,t=t.interval),Object(p.H)(t)&&(t=e.type===Rf?gi(t):e.type==zf?bi(t):Object(p.n)("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function Cp(e,t,n){var r=e.range(),i=Math.floor(r[0]),o=Math.ceil(Object(p.T)(r));if(i>o&&(r=o,o=i,i=r),t=t.filter((function(t){return t=e(t),i<=t&&t<=o})),n>0&&t.length>1){for(var a=[t[0],Object(p.T)(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=a)}return t}function Np(e,t){return e.bins?Cp(e,e.bins):e.ticks?e.ticks(t):e.domain()}function Mp(e,t,n,r,i){var o,a,s=e.type,l=s===Rf||r===Rf?Si(n):s===zf||r===zf?Ti(n):e.tickFormat?e.tickFormat(t,n):n?Object(yd.a)(n):String;if(Xf(s)){var u=function(e){var t=Object(yd.d)(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return n=Object(yd.a)(t),r=Object(yd.a)(".1f")(1)[1],function(e){var t,i,o=n(e),a=o.indexOf(r);if(a<0)return o;for(i=(t=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(o,a))<o.length?o.slice(t):"";--t>a;)if("0"!==o[t]){++t;break}return o.slice(0,t)+i}}return Object(yd.a)(t);var n,r}(n);l=i||e.bins?u:(o=l,a=u,e=>o(e)?a(e):"")}return l}function Ip(e){Qe.call(this,null,e)}function Dp(e){Qe.call(this,null,e)}function Rp(){return _({})}function zp(e){return e.exit}function Lp(e){Qe.call(this,null,e)}Tp({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Sp),Tp({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>wp(Sp(e))),Object(p.y)(Ip,Qe).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,o=Pp(i,null==e.count?e.values?e.values.length:10:e.count,e.minstep),a=e.format||Mp(i,o,e.formatSpecifier,e.formatType,!!e.values),s=e.values?Cp(i,e.values,o):Np(i,o);return r&&(n.rem=r),r=s.map((function(e,t){return _({index:t/(s.length-1||1),value:e,label:a(e)})})),e.extra&&r.length&&r.push(_({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Object(p.y)(Dp,Qe).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Rp,o=e.key||v,a=this.value;return Object(p.A)(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&Object(p.n)("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=Object(p.s)().test(zp),a.lookup=function(e){return a.get(o(e))}),t.visit(t.ADD,(function(e){var t=o(e),n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(a.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&a.empty>n.cleanThreshold&&n.runAfter(a.clean),r},Object(p.y)(Lp,Qe).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(Object(p.A)(o)){if(!n.changed()&&!o.every((function(e){return i[e]})))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||p.r,l=i.enter||p.r,u=i.exit||p.r,c=(o&&!a?i[o]:s)||p.r;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){l(t,e),s(t,e)})),n.modifies(l.output),n.modifies(s.output),c!==p.r&&c!==s&&(t.visit(t.ADD,(function(t){c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&u!==p.r&&(t.visit(t.REM,(function(t){u(t,e)})),n.modifies(u.output)),a||c!==p.r){var f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,(function(t){var i=l(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)):t.visit(f,(function(t){(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation};var Fp="symbol",Bp="discrete";const Up={[Bf]:"quantiles",[Uf]:"thresholds",[qf]:"domain"},qp={[Bf]:"quantiles",[Uf]:"domain"};function $p(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=Object(p.T)(e),t}(e.bins):Up[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[Up[e.type]]()):Np(e,t)}function Hp(e,t,n,r,i,o){const a=qp[e.type]&&i!==Rf&&i!==zf?function(e,t){var n,r=e[qp[e.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0];for(n=1;n<i;++n)o=Math.min(o,r[n]-r[n-1]);return vd(0,o,30,t)}(e,r):Mp(e,t,r,i,o);return n===Fp&&function(e){return Up[e.type]||e.bins}(e)?function(e){return function(t,n,r){var i=r[n+1]||r.max||1/0,o=Wp(t,e),a=Wp(i,e);return o&&a?o+"–"+a:a?"< "+a:"≥ "+o}}(a):n===Bp?function(e){return function(t,n){return n?e(t):null}}(a):function(e){return function(t){return e(t)}}(a)}function Wp(e,t){return Number.isFinite(e)?t(e):null}function Vp(e){Qe.call(this,[],e)}Object(p.y)(Vp,Qe).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,u=e.type||Fp,c=e.scale,f=+e.limit,d=Pp(c,null==e.count?5:e.count,e.minstep),h=e.format||Hp(c,d,u,e.formatSpecifier,e.formatType,!!e.values),m=e.values||$p(c,d);return l&&(s.rem=l),u===Fp?(f&&m.length>f?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=m.slice(0,f-1),a=!0):l=m,Object(p.D)(i=e.size)?(e.values||0!==c(l[0])||(l=l.slice(1)),o=l.reduce((function(t,n){return Math.max(t,i(n,e))}),0)):i=Object(p.l)(o=i||8),l=l.map((function(t,n){return _({index:n,label:h(t,n,m),value:t,offset:o,size:i(t,e)})})),a&&(a=m[l.length],l.push(_({index:l.length,label:`…${m.length-l.length} entries`,value:a,offset:o,size:i(a,e)})))):"gradient"===u?(n=c.domain(),r=Ep(c,n[0],Object(p.T)(n)),m.length<3&&!e.values&&n[0]!==Object(p.T)(n)&&(m=[n[0],Object(p.T)(n)]),l=m.map((function(e,t){return _({index:t,label:h(e,t,m),value:e,perc:r(e)})}))):(i=m.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+Object(p.T)(t),o=i-r;if(e.type===qf){var a=n?o/n:.1;o=(i+=a)-(r-=a)}return function(e){return(e-r)/o}}(c),l=m.map((function(e,t){return _({index:t,label:h(e,t,m),value:e,perc:t?r(e):0,perc2:t===i?1:r(m[t+1])})}))),s.source=l,s.add=l,this.value=l,s};var Gp=Object(p.s)({line:Qp,"line-radial":function(e,t,n,r){return Qp(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:eh,"arc-radial":function(e,t,n,r){return eh(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:th,"curve-radial":function(e,t,n,r){return th(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*a+","+l*s+" "+r*a+","+r*s}});function Yp(e){return e.source.x}function Xp(e){return e.source.y}function Kp(e){return e.target.x}function Jp(e){return e.target.y}function Zp(e){Qe.call(this,{},e)}function Qp(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function eh(e,t,n,r){var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r}function th(e,t,n,r){var i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r}Zp.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(p.y)(Zp,Qe).transform=function(e,t){var n=e.sourceX||Yp,r=e.sourceY||Xp,i=e.targetX||Kp,o=e.targetY||Jp,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=Gp.get(l+"-"+s)||Gp.get(l);return u||Object(p.n)("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[a]=u(n(e),r(e),i(e),o(e))})),t.reflow(e.modified()).modifies(a)};var nh=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function rh(e){Qe.call(this,null,e)}rh.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(p.y)(rh,Qe).transform=function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],l=e.field||p.N,u=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(l),h=d.length,m=u,g=(c-u)/function(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}(d),b=nh(h);for(e.sort&&b.sort((function(e,t){return d[e]-d[t]})),n=0;n<h;++n)i=d[b[n]],(r=f[b[n]])[a]=m,r[s]=m+=i*g;return this.value=d,t.reflow(e.modified()).modifies(o)};var ih=5;function oh(e){return Kf(e)&&e!==Lf}var ah=Object(p.cb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function sh(e){Qe.call(this,null,e),this.modified(!0)}function lh(e,t,n){Xf(e)&&(Math.abs(t.reduce((function(e,t){return e+(t<0?-1:t>0?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+Object(p.Y)(t)));return t}function uh(e,t,n){return Object(p.D)(e)&&(t||n)?_p(e,ch(t||[0,1],n)):e}function ch(e,t){return t?e.slice().reverse():e}function fh(e){Qe.call(this,null,e)}Object(p.y)(sh,Qe).transform=function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===Lf)return Lf+"-"+Cf;(function(e){const t=e.type;return Kf(t)&&t!==Rf&&t!==zf&&(e.scheme||e.range&&e.range.length&&e.range.every(p.H))})(e)&&(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0,r=2===t?Lf+"-":3===t?Ff+"-":"");return(r+n||Cf).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=bp(i)()),e)if(!ah[i]){if("padding"===i&&oh(r.type))continue;Object(p.D)(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==Wf&&e!==Hf&&Object(p.n)("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===Hf?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Af(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i,o=t.schemeExtent;Object(p.A)(t.scheme)?i=wp(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),(i=Ap(r))||Object(p.n)(`Unrecognized scheme name: ${t.scheme}`));return n=e===qf?n+1:e===Vf?n-1:e===Bf||e===Uf?+t.schemeCount||ih:n,Yf(e)?uh(i,o,t.reverse):Object(p.D)(i)?Op(uh(i,o),n):e===$f?i:i.slice(0,n)}(r,t,n),Object(p.D)(o))){if(e.interpolator)return e.interpolator(o);Object(p.n)(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&Yf(r))return e.interpolator(wp(ch(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(kp(t.interpolate,t.interpolateGamma)):Object(p.D)(e.round)?e.round(i):Object(p.D)(e.rangeRound)&&e.interpolate(i?Od.interpolateRound:Od.interpolate);o&&e.range(ch(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!Object(p.A)(r)){let t=e.domain(),n=t[0],i=Object(p.T)(t),o=null==r.start?n:r.start,a=null==r.stop?i:r.stop,s=r.step;s||Object(p.n)("Scale bins parameter missing step property."),o<n&&(o=s*Math.ceil(n/s)),a>i&&(a=s*Math.floor(i/s)),r=nh(o,a+s/2,s)}r?e.bins=r:e.bins&&delete e.bins;e.type===Vf&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){var r=function(e,t,n){return t?(e.domain(lh(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,l=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===Cf||t===Mf||t===If)}(e);if(!a)return 0;oh(s)&&t.padding&&a[0]!==Object(p.T)(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(Object(p.T)(n)-n[0]),s=a/(a-2*r),l=e===Nf?Object(p.lb)(t,null,s):e===If?Object(p.mb)(t,null,s,.5):e===Mf?Object(p.mb)(t,null,s,i||1):e===Df?Object(p.nb)(t,null,s,o||1):Object(p.kb)(t,null,s);return(t=t.slice())[0]=l[0],t[t.length-1]=l[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));(l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,l&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid&&(((o=t.domainMid)<a[0]||o>a[i])&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(i,0,o)));e.domain(lh(s,a,n)),s===$f&&e.unknown(t.domainImplicit?ud:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&Pp(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)},Object(p.y)(fh,Qe).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(k(e.sort)),this.modified(n),t};var dh=["y0","y1"];function ph(e){Qe.call(this,null,e)}function hh(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,l=0;l<s;++l)(o=e[l])[r]=a,o[i]=a+=Math.abs(n(o))}function mh(e,t,n,r,i){for(var o,a=1/e.sum,s=0,l=e.length,u=0,c=0;u<l;++u)(o=e[u])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function gh(e,t,n,r,i){for(var o,a,s=0,l=0,u=e.length,c=0;c<u;++c)(o=+n(a=e[c]))<0?(a[r]=l,a[i]=l+=o):(a[r]=s,a[i]=s+=o)}function bh(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function yh(){}ph.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:dh}]},Object(p.y)(ph,Qe).transform=function(e,t){var n,r,i,o,a=e.as||dh,s=a[0],l=a[1],u=k(e.sort),c=e.field||p.N,f="center"===e.offset?hh:"normalize"===e.offset?mh:gh;for(n=function(e,t,n,r){var i,o,a,s,l,u,c,f,d,p=[],h=function(e){return e(l)};if(null==t)p.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(h),(c=i[u])||(i[u]=c=[],p.push(c)),c.push(l);for(u=0,d=0,s=p.length;u<s;++u){for(c=p[u],o=0,f=0,a=c.length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return p.max=d,p}(t.source,e.groupby,u,c),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,c,s,l);return t.reflow(e.modified()).modifies(a)};const vh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];var xh=function(){var e=1,t=1,n=a;function r(e,t){return t.map(t=>i(e,t))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,l,u,c,f,d=new Array,p=new Array;a=s=-1,u=n[0]>=r,vh[u<<1].forEach(h);for(;++a<e-1;)l=u,u=n[a+1]>=r,vh[l|u<<1].forEach(h);vh[u<<0].forEach(h);for(;++s<t-1;){for(a=-1,u=n[s*e+e]>=r,c=n[s*e]>=r,vh[u<<1|c<<2].forEach(h);++a<e-1;)l=u,u=n[s*e+e+a+1]>=r,f=c,c=n[s*e+a+1]>=r,vh[l|u<<1|c<<2|f<<3].forEach(h);vh[u|c<<3].forEach(h)}a=-1,c=n[s*e]>=r,vh[c<<2].forEach(h);for(;++a<e-1;)f=c,c=n[s*e+a+1]>=r,vh[c<<2|f<<3].forEach(h);function h(e){var t,n,r=[e[0][0]+a,e[0][1]+s],l=[e[1][0]+a,e[1][1]+s],u=o(r),c=o(l);(t=p[u])?(n=d[c])?(delete p[t.end],delete d[n.start],t===n?(t.ring.push(l),i(t.ring)):d[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(l),p[t.end=c]=t):(t=d[c])?(n=p[u])?(delete d[t.start],delete p[n.end],t===n?(t.ring.push(l),i(t.ring)):d[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=u]=t):d[u]=p[c]={start:u,end:c,ring:[r,l]}}vh[c<<3].forEach(h)}(r,i,(function(e){n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)})),s.forEach((function(e){for(var t,n=0,r=a.length;n<r;++n)if(-1!==_h((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],l=0|a,u=0|s,c=r[u*e+l];a>0&&a<e&&l===a&&(o=r[u*e+l-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&u===s&&(o=r[(u-1)*e+l],n[1]=s+(i-o)/(c-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.ceil(n[0]),o=Math.ceil(n[1]);return i>0&&o>0||Object(p.n)("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:yh,r):n===a},r};function _h(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=wh(e,t[r]))return n;return 0}function wh(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],f=e[s],d=f[0],p=f[1];if(Oh(l,f,t))return 0;c>r!=p>r&&n<(d-u)*(r-c)/(p-c)+u&&(i=-i)}return i}function Oh(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}var Eh=Math.sqrt(50),kh=Math.sqrt(10),Sh=Math.sqrt(2);var Th=function(e,t,n){return function(r){var i=Object(p.p)(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,l=t?function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Eh?i*=10:o>=kh?i*=5:o>=Sh&&(i*=2),t<e?-i:i}(o,a,e):s/(e+1);return function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(l,a,l)}};function jh(e){Qe.call(this,null,e)}function Ah(e,t){const n=e.x1||0,r=e.y1||0,i=null!=t?t:e.scale||1;function o(e){e.forEach(a)}function a(e){e.forEach(s)}function s(e){e[0]=(e[0]-n)*i,e[1]=(e[1]-r)*i}return function(e){return e.coordinates.forEach(o),e}}function Ph(e,t,n){const r=e>=0?e:_t(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Ch(e){return Object(p.D)(e)?e:Object(p.l)(+e)}jh.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(p.y)(jh,Qe).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||p.x,o=xh().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=Th(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map(e=>bh(t(e).values)))}(r,i,e),s=null===e.as?null:e.as||"contour",l=[];return r.forEach(t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,Object(p.A)(a)?a:a(n.values));if(e.scale||n.x1||n.y1||n.scale){var u=e.scale;r.forEach(Ah(n,Object(p.D)(u)?u(t,e):u))}r.forEach(e=>{l.push(O(t,_(null!=s?{[s]:e}:e)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n};var Nh=function(){var e=e=>e[0],t=e=>e[1],n=p.N,r=[-1,-1],i=960,o=500,a=2;function s(s,l){const u=Ph(r[0],s,e)>>a,c=Ph(r[1],s,t)>>a,f=u?u+2:0,d=c?c+2:0,p=2*f+(i>>a),h=2*d+(o>>a),m=new Float32Array(p*h),g=new Float32Array(p*h);let b=m;s.forEach(r=>{const i=f+(+e(r)>>a),o=d+(+t(r)>>a);i>=0&&i<p&&o>=0&&o<h&&(m[i+o*p]+=+n(r))}),u>0&&c>0?(Mh(p,h,m,g,u),Ih(p,h,g,m,c),Mh(p,h,m,g,u),Ih(p,h,g,m,c),Mh(p,h,m,g,u),Ih(p,h,g,m,c)):u>0?(Mh(p,h,m,g,u),Mh(p,h,g,m,u),Mh(p,h,m,g,u),b=g):c>0&&(Ih(p,h,m,g,c),Ih(p,h,g,m,c),Ih(p,h,m,g,c),b=g);let y=l?Math.pow(2,-2*a):1/function(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}(b);for(let e=0,t=p*h;e<t;++e)b[e]*=y;return{values:b,scale:1<<a,width:p,height:h,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(t){return arguments.length?(e=Ch(t),s):e},s.y=function(e){return arguments.length?(t=Ch(e),s):t},s.weight=function(e){return arguments.length?(n=Ch(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);return t>=0||t>=0||Object(p.n)("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||Object(p.n)("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=Object(p.i)(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&Object(p.n)("invalid bandwidth"),r=e,s):r},s};function Mh(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function Ih(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,l=0;s<t+i;++s)s<t&&(l+=n[a+s*e]),s>=i&&(s>=o&&(l-=n[a+(s-o)*e]),r[a+(s-i)*e]=l/Math.min(s+1,t-1+o-s,o))}function Dh(e){Qe.call(this,null,e)}Dh.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Rh=Object(p.y)(Dh,Qe);const zh=["x","y","weight","size","cellSize","bandwidth"];function Lh(e,t){return zh.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function Fh(e){Qe.call(this,null,e)}Rh.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,l=[],u=e=>e(o);if(null==t)l.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],a=t.map(u),(s=n[a])||(n[a]=s=[],s.dims=a,l.push(s)),s.push(o);return l}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(p.h),a=Lh(Nh(),e),s=e.as||"grid";return n=i.map(t=>_(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r},Fh.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(p.y)(Fh,Qe).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=xh().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||Th(e.count||10,e.nice,!!a),l=e.size;return a||(a=t.materialize(t.SOURCE).source,r=Ah(n=Lh(Nh(),e)(a,!0)),l=[n.width,n.height],a=n.values),s=Object(p.A)(s)?s:s(a),a=o.size(l)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(_),i};var Bh="Feature",Uh="FeatureCollection";function qh(e){Qe.call(this,null,e)}qh.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(p.y)(qh,Qe).transform=function(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],l=e.geojson||!o&&p.x,u=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(Object(p.g)(l))||a&&t.modified(Object(p.g)(a))||s&&t.modified(Object(p.g)(s)),this.value&&!n||(u=t.SOURCE,this._features=r=[],this._points=i=[]),l&&t.visit(u,(function(e){r.push(l(e))})),a&&s&&(t.visit(u,(function(e){var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:Bh,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:Uh,features:r}};var $h=function(){return new Hh};function Hh(){this.reset()}Hh.prototype={constructor:Hh,reset:function(){this.s=this.t=0},add:function(e){Vh(Wh,e,this.t),Vh(this,Wh.s,this.s),this.s?this.t+=Wh.t:this.s=Wh.t},valueOf:function(){return this.s}};var Wh=new Hh;function Vh(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var Gh=1e-6,Yh=1e-12,Xh=Math.PI,Kh=Xh/2,Jh=Xh/4,Zh=2*Xh,Qh=180/Xh,em=Xh/180,tm=Math.abs,nm=Math.atan,rm=Math.atan2,im=Math.cos,om=(Math.ceil,Math.exp),am=(Math.floor,Math.log),sm=Math.pow,lm=Math.sin,um=Math.sign||function(e){return e>0?1:e<0?-1:0},cm=Math.sqrt,fm=Math.tan;function dm(e){return e>1?0:e<-1?Xh:Math.acos(e)}function pm(e){return e>1?Kh:e<-1?-Kh:Math.asin(e)}function hm(){}function mm(e,t){e&&bm.hasOwnProperty(e.type)&&bm[e.type](e,t)}var gm={Feature:function(e,t){mm(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)mm(n[r].geometry,t)}},bm={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ym(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ym(n[r],t,0)},Polygon:function(e,t){vm(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vm(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)mm(n[r],t)}};function ym(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function vm(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ym(e[n],t,1);t.polygonEnd()}var xm,_m,wm,Om,Em,km=function(e,t){e&&gm.hasOwnProperty(e.type)?gm[e.type](e,t):mm(e,t)},Sm=$h(),Tm=$h(),jm={point:hm,lineStart:hm,lineEnd:hm,polygonStart:function(){Sm.reset(),jm.lineStart=Am,jm.lineEnd=Pm},polygonEnd:function(){var e=+Sm;Tm.add(e<0?Zh+e:e),this.lineStart=this.lineEnd=this.point=hm},sphere:function(){Tm.add(Zh)}};function Am(){jm.point=Cm}function Pm(){Nm(xm,_m)}function Cm(e,t){jm.point=Nm,xm=e,_m=t,wm=e*=em,Om=im(t=(t*=em)/2+Jh),Em=lm(t)}function Nm(e,t){var n=(e*=em)-wm,r=n>=0?1:-1,i=r*n,o=im(t=(t*=em)/2+Jh),a=lm(t),s=Em*a,l=Om*o+s*im(i),u=s*r*lm(i);Sm.add(rm(u,l)),wm=e,Om=o,Em=a}function Mm(e){return[rm(e[1],e[0]),pm(e[2])]}function Im(e){var t=e[0],n=e[1],r=im(n);return[r*im(t),r*lm(t),lm(n)]}function Dm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Rm(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zm(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Lm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Fm(e){var t=cm(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bm,Um,qm,$m,Hm,Wm,Vm,Gm,Ym,Xm,Km=$h(),Jm={point:Zm,lineStart:eg,lineEnd:tg,polygonStart:function(){Jm.point=ng,Jm.lineStart=rg,Jm.lineEnd=ig,Km.reset(),jm.polygonStart()},polygonEnd:function(){jm.polygonEnd(),Jm.point=Zm,Jm.lineStart=eg,Jm.lineEnd=tg,Sm<0?(Bm=-(qm=180),Um=-($m=90)):Km>Gh?$m=90:Km<-Gh&&(Um=-90),Xm[0]=Bm,Xm[1]=qm},sphere:function(){Bm=-(qm=180),Um=-($m=90)}};function Zm(e,t){Ym.push(Xm=[Bm=e,qm=e]),t<Um&&(Um=t),t>$m&&($m=t)}function Qm(e,t){var n=Im([e*em,t*em]);if(Gm){var r=Rm(Gm,n),i=Rm([r[1],-r[0],0],r);Fm(i),i=Mm(i);var o,a=e-Hm,s=a>0?1:-1,l=i[0]*Qh*s,u=tm(a)>180;u^(s*Hm<l&&l<s*e)?(o=i[1]*Qh)>$m&&($m=o):u^(s*Hm<(l=(l+360)%360-180)&&l<s*e)?(o=-i[1]*Qh)<Um&&(Um=o):(t<Um&&(Um=t),t>$m&&($m=t)),u?e<Hm?og(Bm,e)>og(Bm,qm)&&(qm=e):og(e,qm)>og(Bm,qm)&&(Bm=e):qm>=Bm?(e<Bm&&(Bm=e),e>qm&&(qm=e)):e>Hm?og(Bm,e)>og(Bm,qm)&&(qm=e):og(e,qm)>og(Bm,qm)&&(Bm=e)}else Ym.push(Xm=[Bm=e,qm=e]);t<Um&&(Um=t),t>$m&&($m=t),Gm=n,Hm=e}function eg(){Jm.point=Qm}function tg(){Xm[0]=Bm,Xm[1]=qm,Jm.point=Zm,Gm=null}function ng(e,t){if(Gm){var n=e-Hm;Km.add(tm(n)>180?n+(n>0?360:-360):n)}else Wm=e,Vm=t;jm.point(e,t),Qm(e,t)}function rg(){jm.lineStart()}function ig(){ng(Wm,Vm),jm.lineEnd(),tm(Km)>Gh&&(Bm=-(qm=180)),Xm[0]=Bm,Xm[1]=qm,Gm=null}function og(e,t){return(t-=e)<0?t+360:t}function ag(e,t){return e[0]-t[0]}function sg(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var lg,ug,cg,fg,dg,pg,hg,mg,gg,bg,yg,vg,xg,_g,wg,Og,Eg={sphere:hm,point:kg,lineStart:Tg,lineEnd:Pg,polygonStart:function(){Eg.lineStart=Cg,Eg.lineEnd=Ng},polygonEnd:function(){Eg.lineStart=Tg,Eg.lineEnd=Pg}};function kg(e,t){e*=em;var n=im(t*=em);Sg(n*im(e),n*lm(e),lm(t))}function Sg(e,t,n){cg+=(e-cg)/++lg,fg+=(t-fg)/lg,dg+=(n-dg)/lg}function Tg(){Eg.point=jg}function jg(e,t){e*=em;var n=im(t*=em);_g=n*im(e),wg=n*lm(e),Og=lm(t),Eg.point=Ag,Sg(_g,wg,Og)}function Ag(e,t){e*=em;var n=im(t*=em),r=n*im(e),i=n*lm(e),o=lm(t),a=rm(cm((a=wg*o-Og*i)*a+(a=Og*r-_g*o)*a+(a=_g*i-wg*r)*a),_g*r+wg*i+Og*o);ug+=a,pg+=a*(_g+(_g=r)),hg+=a*(wg+(wg=i)),mg+=a*(Og+(Og=o)),Sg(_g,wg,Og)}function Pg(){Eg.point=kg}function Cg(){Eg.point=Mg}function Ng(){Ig(vg,xg),Eg.point=kg}function Mg(e,t){vg=e,xg=t,e*=em,t*=em,Eg.point=Ig;var n=im(t);_g=n*im(e),wg=n*lm(e),Og=lm(t),Sg(_g,wg,Og)}function Ig(e,t){e*=em;var n=im(t*=em),r=n*im(e),i=n*lm(e),o=lm(t),a=wg*o-Og*i,s=Og*r-_g*o,l=_g*i-wg*r,u=cm(a*a+s*s+l*l),c=pm(u),f=u&&-c/u;gg+=f*a,bg+=f*s,yg+=f*l,ug+=c,pg+=c*(_g+(_g=r)),hg+=c*(wg+(wg=i)),mg+=c*(Og+(Og=o)),Sg(_g,wg,Og)}var Dg=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function Rg(e,t){return[tm(e)>Xh?e+Math.round(-e/Zh)*Zh:e,t]}function zg(e,t,n){return(e%=Zh)?t||n?Dg(Fg(e),Bg(t,n)):Fg(e):t||n?Bg(t,n):Rg}function Lg(e){return function(t,n){return[(t+=e)>Xh?t-Zh:t<-Xh?t+Zh:t,n]}}function Fg(e){var t=Lg(e);return t.invert=Lg(-e),t}function Bg(e,t){var n=im(e),r=lm(e),i=im(t),o=lm(t);function a(e,t){var a=im(t),s=im(e)*a,l=lm(e)*a,u=lm(t),c=u*n+s*r;return[rm(l*i-c*o,s*n-u*r),pm(c*i+l*o)]}return a.invert=function(e,t){var a=im(t),s=im(e)*a,l=lm(e)*a,u=lm(t),c=u*i-l*o;return[rm(l*i+u*o,s*n+c*r),pm(c*n-s*r)]},a}Rg.invert=Rg;var Ug=function(e){function t(t){return(t=e(t[0]*em,t[1]*em))[0]*=Qh,t[1]*=Qh,t}return e=zg(e[0]*em,e[1]*em,e.length>2?e[2]*em:0),t.invert=function(t){return(t=e.invert(t[0]*em,t[1]*em))[0]*=Qh,t[1]*=Qh,t},t};function qg(e,t,n,r,i,o){if(n){var a=im(t),s=lm(t),l=r*n;null==i?(i=t+r*Zh,o=t-l/2):(i=$g(a,i),o=$g(a,o),(r>0?i<o:i>o)&&(i+=r*Zh));for(var u,c=i;r>0?c>o:c<o;c-=l)u=Mm([a,-s*im(c),-s*lm(c)]),e.point(u[0],u[1])}}function $g(e,t){(t=Im(t))[0]-=e,Fm(t);var n=dm(-t[1]);return((-t[2]<0?-n:n)+Zh-Gh)%Zh}var Hg=function(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:hm,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},Wg=function(e,t){return tm(e[0]-t[0])<Gh&&tm(e[1]-t[1])<Gh};function Vg(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Gg=function(e,t,n,r,i){var o,a,s=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(Wg(r,a)){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);i.lineEnd()}else s.push(n=new Vg(r,e,null,!0)),l.push(n.o=new Vg(r,null,n,!1)),s.push(n=new Vg(a,e,null,!1)),l.push(n.o=new Vg(a,null,n,!0))}})),s.length){for(l.sort(t),Yg(s),Yg(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,f=s[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(o=0,a=u.length;o<a;++o)i.point((c=u[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}u=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}};function Yg(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}var Xg=$h();function Kg(e){return tm(e[0])<=Xh?e[0]:um(e[0])*((tm(e[0])+Xh)%Zh-Xh)}var Jg=function(e,t){var n=Kg(t),r=t[1],i=lm(r),o=[lm(n),-im(n),0],a=0,s=0;Xg.reset(),1===i?r=Kh+Gh:-1===i&&(r=-Kh-Gh);for(var l=0,u=e.length;l<u;++l)if(f=(c=e[l]).length)for(var c,f,d=c[f-1],p=Kg(d),h=d[1]/2+Jh,m=lm(h),g=im(h),b=0;b<f;++b,p=v,m=_,g=w,d=y){var y=c[b],v=Kg(y),x=y[1]/2+Jh,_=lm(x),w=im(x),O=v-p,E=O>=0?1:-1,k=E*O,S=k>Xh,T=m*_;if(Xg.add(rm(T*E*lm(k),g*w+T*im(k))),a+=S?O+E*Zh:O,S^p>=n^v>=n){var j=Rm(Im(d),Im(y));Fm(j);var A=Rm(o,j);Fm(A);var P=(S^O>=0?-1:1)*pm(A[2]);(r>P||r===P&&(j[0]||j[1]))&&(s+=S^O>=0?1:-1)}}return(a<-Gh||a<Gh&&Xg<-Gh)^1&s},Zg=n(5),Qg=function(e,t,n,r){return function(i){var o,a,s,l=t(i),u=Hg(),c=t(u),f=!1,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=v,a=[],o=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,a=Object(Zg.d)(a);var e=Jg(o,r);a.length?(f||(i.polygonStart(),f=!0),Gg(a,tb,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(t,n){e(t,n)&&i.point(t,n)}function h(e,t){l.point(e,t)}function m(){d.point=h,l.lineStart()}function g(){d.point=p,l.lineEnd()}function b(e,t){s.push([e,t]),c.point(e,t)}function y(){c.lineStart(),s=[]}function v(){b(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,l=c.clean(),d=u.result(),p=d.length;if(s.pop(),o.push(s),s=null,p)if(1&l){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else p>1&&2&l&&d.push(d.pop().concat(d.shift())),a.push(d.filter(eb))}return d}};function eb(e){return e.length>1}function tb(e,t){return((e=e.x)[0]<0?e[1]-Kh-Gh:Kh-e[1])-((t=t.x)[0]<0?t[1]-Kh-Gh:Kh-t[1])}var nb=Qg((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Xh:-Xh,l=tm(o-n);tm(l-Xh)<Gh?(e.point(n,r=(r+a)/2>0?Kh:-Kh),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=Xh&&(tm(n-i)<Gh&&(n-=i*Gh),tm(o-s)<Gh&&(o-=s*Gh),r=function(e,t,n,r){var i,o,a=lm(e-n);return tm(a)>Gh?nm((lm(t)*(o=im(r))*lm(n)-lm(r)*(i=im(t))*lm(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Kh,r.point(-Xh,i),r.point(0,i),r.point(Xh,i),r.point(Xh,0),r.point(Xh,-i),r.point(0,-i),r.point(-Xh,-i),r.point(-Xh,0),r.point(-Xh,i);else if(tm(e[0]-t[0])>Gh){var o=e[0]<t[0]?Xh:-Xh;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-Xh,-Kh]);var rb=function(e){var t=im(e),n=6*em,r=t>0,i=tm(t)>Gh;function o(e,n){return im(e)*im(n)>t}function a(e,n,r){var i=[1,0,0],o=Rm(Im(e),Im(n)),a=Dm(o,o),s=o[0],l=a-s*s;if(!l)return!r&&e;var u=t*a/l,c=-t*s/l,f=Rm(i,o),d=Lm(i,u);zm(d,Lm(o,c));var p=f,h=Dm(d,p),m=Dm(p,p),g=h*h-m*(Dm(d,d)-1);if(!(g<0)){var b=cm(g),y=Lm(p,(-h-b)/m);if(zm(y,d),y=Mm(y),!r)return y;var v,x=e[0],_=n[0],w=e[1],O=n[1];_<x&&(v=x,x=_,_=v);var E=_-x,k=tm(E-Xh)<Gh;if(!k&&O<w&&(v=w,w=O,O=v),k||E<Gh?k?w+O>0^y[1]<(tm(y[0]-x)<Gh?w:O):w<=y[1]&&y[1]<=O:E>Xh^(x<=y[0]&&y[0]<=_)){var S=Lm(p,(-h+b)/m);return zm(S,d),[y,Mm(S)]}}}function s(t,n){var i=r?e:Xh-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Qg(o,(function(e){var t,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var p,h=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?Xh:-Xh),d):0;if(!t&&(u=l=m)&&e.lineStart(),m!==l&&(!(p=a(t,h))||Wg(t,p)||Wg(h,p))&&(h[0]+=Gh,h[1]+=Gh,m=o(h[0],h[1])),m!==l)c=0,m?(e.lineStart(),p=a(h,t),e.point(p[0],p[1])):(p=a(t,h),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(i&&t&&r^m){var b;g&n||!(b=a(h,t,!0))||(c=0,r?(e.lineStart(),e.point(b[0][0],b[0][1]),e.point(b[1][0],b[1][1]),e.lineEnd()):(e.point(b[1][0],b[1][1]),e.lineEnd(),e.lineStart(),e.point(b[0][0],b[0][1])))}!m||t&&Wg(t,h)||e.point(h[0],h[1]),t=h,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return c|(u&&l)<<1}}}),(function(t,r,i,o){qg(o,e,n,i,t,r)}),r?[0,-e]:[-Xh,e-Xh])},ib=function(e,t,n,r,i,o){var a,s=e[0],l=e[1],u=0,c=1,f=t[0]-s,d=t[1]-l;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>u&&(u=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<c&&(c=a)}if(a=r-l,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<c&&(c=a)}return u>0&&(e[0]=s+u*f,e[1]=l+u*d),c<1&&(t[0]=s+c*f,t[1]=l+c*d),!0}}}}},ob=1e9,ab=-ob;function sb(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,u){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||l(i,o)<0^s>0)do{u.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else u.point(o[0],o[1])}function a(r,i){return tm(r[0]-e)<Gh?i>0?0:3:tm(r[0]-n)<Gh?i>0?2:1:tm(r[1]-t)<Gh?i>0?1:0:i>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,u,c,f,d,p,h,m,g,b,y,v=a,x=Hg(),_={point:w,lineStart:function(){_.point=O,u&&u.push(c=[]);b=!0,g=!1,h=m=NaN},lineEnd:function(){l&&(O(f,d),p&&g&&x.rejoin(),l.push(x.result()));_.point=w,g&&v.lineEnd()},polygonStart:function(){v=x,l=[],u=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=u.length;n<i;++n)for(var o,a,s=u[n],l=1,c=s.length,f=s[0],d=f[0],p=f[1];l<c;++l)o=d,a=p,f=s[l],d=f[0],p=f[1],a<=r?p>r&&(d-o)*(r-a)>(p-a)*(e-o)&&++t:p<=r&&(d-o)*(r-a)<(p-a)*(e-o)&&--t;return t}(),n=y&&t,i=(l=Object(Zg.d)(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Gg(l,s,t,o,a),a.polygonEnd());v=a,l=u=c=null}};function w(e,t){i(e,t)&&v.point(e,t)}function O(o,a){var s=i(o,a);if(u&&c.push([o,a]),b)f=o,d=a,p=s,b=!1,s&&(v.lineStart(),v.point(o,a));else if(s&&g)v.point(o,a);else{var l=[h=Math.max(ab,Math.min(ob,h)),m=Math.max(ab,Math.min(ob,m))],x=[o=Math.max(ab,Math.min(ob,o)),a=Math.max(ab,Math.min(ob,a))];ib(l,x,e,t,n,r)?(g||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),s||v.lineEnd(),y=!1):s&&(v.lineStart(),v.point(o,a),y=!1)}h=o,m=a,g=s}return _}}$h();var lb,ub,cb,fb,db=function(e){return e},pb=$h(),hb=$h(),mb={point:hm,lineStart:hm,lineEnd:hm,polygonStart:function(){mb.lineStart=gb,mb.lineEnd=vb},polygonEnd:function(){mb.lineStart=mb.lineEnd=mb.point=hm,pb.add(tm(hb)),hb.reset()},result:function(){var e=pb/2;return pb.reset(),e}};function gb(){mb.point=bb}function bb(e,t){mb.point=yb,lb=cb=e,ub=fb=t}function yb(e,t){hb.add(fb*e-cb*t),cb=e,fb=t}function vb(){yb(lb,ub)}var xb=mb,_b=1/0,wb=_b,Ob=-_b,Eb=Ob;var kb,Sb,Tb,jb,Ab={point:function(e,t){e<_b&&(_b=e);e>Ob&&(Ob=e);t<wb&&(wb=t);t>Eb&&(Eb=t)},lineStart:hm,lineEnd:hm,polygonStart:hm,polygonEnd:hm,result:function(){var e=[[_b,wb],[Ob,Eb]];return Ob=Eb=-(wb=_b=1/0),e}},Pb=0,Cb=0,Nb=0,Mb=0,Ib=0,Db=0,Rb=0,zb=0,Lb=0,Fb={point:Bb,lineStart:Ub,lineEnd:Hb,polygonStart:function(){Fb.lineStart=Wb,Fb.lineEnd=Vb},polygonEnd:function(){Fb.point=Bb,Fb.lineStart=Ub,Fb.lineEnd=Hb},result:function(){var e=Lb?[Rb/Lb,zb/Lb]:Db?[Mb/Db,Ib/Db]:Nb?[Pb/Nb,Cb/Nb]:[NaN,NaN];return Pb=Cb=Nb=Mb=Ib=Db=Rb=zb=Lb=0,e}};function Bb(e,t){Pb+=e,Cb+=t,++Nb}function Ub(){Fb.point=qb}function qb(e,t){Fb.point=$b,Bb(Tb=e,jb=t)}function $b(e,t){var n=e-Tb,r=t-jb,i=cm(n*n+r*r);Mb+=i*(Tb+e)/2,Ib+=i*(jb+t)/2,Db+=i,Bb(Tb=e,jb=t)}function Hb(){Fb.point=Bb}function Wb(){Fb.point=Gb}function Vb(){Yb(kb,Sb)}function Gb(e,t){Fb.point=Yb,Bb(kb=Tb=e,Sb=jb=t)}function Yb(e,t){var n=e-Tb,r=t-jb,i=cm(n*n+r*r);Mb+=i*(Tb+e)/2,Ib+=i*(jb+t)/2,Db+=i,Rb+=(i=jb*e-Tb*t)*(Tb+e),zb+=i*(jb+t),Lb+=3*i,Bb(Tb=e,jb=t)}var Xb=Fb;function Kb(e){this._context=e}Kb.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Zh)}},result:hm};var Jb,Zb,Qb,ey,ty,ny=$h(),ry={point:hm,lineStart:function(){ry.point=iy},lineEnd:function(){Jb&&oy(Zb,Qb),ry.point=hm},polygonStart:function(){Jb=!0},polygonEnd:function(){Jb=null},result:function(){var e=+ny;return ny.reset(),e}};function iy(e,t){ry.point=oy,Zb=ey=e,Qb=ty=t}function oy(e,t){ey-=e,ty-=t,ny.add(cm(ey*ey+ty*ty)),ey=e,ty=t}var ay=ry;function sy(){this._string=[]}function ly(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}sy.prototype={_radius:4.5,_circle:ly(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=ly(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var uy=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),km(e,n(r))),r.result()}return o.area=function(e){return km(e,n(xb)),xb.result()},o.measure=function(e){return km(e,n(ay)),ay.result()},o.bounds=function(e){return km(e,n(Ab)),Ab.result()},o.centroid=function(e){return km(e,n(Xb)),Xb.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,db):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new sy):new Kb(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)};function cy(e){return function(t){var n=new fy;for(var r in e)n[r]=e[r];return n.stream=t,n}}function fy(){}function dy(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),km(n,e.stream(Ab)),t(Ab.result()),null!=r&&e.clipExtent(r),e}function py(e,t,n){return dy(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function hy(e,t,n){return py(e,[[0,0],t],n)}function my(e,t,n){return dy(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function gy(e,t,n){return dy(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}fy.prototype={constructor:fy,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var by=16,yy=im(30*em),vy=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,l,u,c,f,d,p,h,m,g){var b=u-r,y=c-i,v=b*b+y*y;if(v>4*t&&m--){var x=a+d,_=s+p,w=l+h,O=cm(x*x+_*_+w*w),E=pm(w/=O),k=tm(tm(w)-1)<Gh||tm(o-f)<Gh?(o+f)/2:rm(_,x),S=e(k,E),T=S[0],j=S[1],A=T-r,P=j-i,C=y*A-b*P;(C*C/v>t||tm((b*A+y*P)/v-.5)>.3||a*d+s*p+l*h<yy)&&(n(r,i,o,a,s,l,T,j,k,x/=O,_/=O,w,m,g),g.point(T,j),n(T,j,k,x,_,w,u,c,f,d,p,h,m,g))}}return function(t){var r,i,o,a,s,l,u,c,f,d,p,h,m={point:g,lineStart:b,lineEnd:v,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=b}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){c=NaN,m.point=y,t.lineStart()}function y(r,i){var o=Im([r,i]),a=e(r,i);n(c,f,u,d,p,h,c=a[0],f=a[1],u=r,d=o[0],p=o[1],h=o[2],by,t),t.point(c,f)}function v(){m.point=g,t.lineEnd()}function x(){b(),m.point=_,m.lineEnd=w}function _(e,t){y(r=e,t),i=c,o=f,a=d,s=p,l=h,m.point=y}function w(){n(c,f,u,d,p,h,i,o,r,a,s,l,by,t),m.lineEnd=v,v()}return m}}(e,t):function(e){return cy({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var xy=cy({point:function(e,t){this.stream.point(e*em,t*em)}});function _y(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function wy(e,t,n,r){var i=im(r),o=lm(r),a=i*e,s=o*e,l=i/e,u=o/e,c=(o*n-i*t)/e,f=(o*t+i*n)/e;function d(e,r){return[a*e-s*r+t,n-s*e-a*r]}return d.invert=function(e,t){return[l*e-u*t+c,f-u*e-l*t]},d}function Oy(e){return Ey((function(){return e}))()}function Ey(e){var t,n,r,i,o,a,s,l,u,c,f=150,d=480,p=250,h=0,m=0,g=0,b=0,y=0,v=0,x=null,_=nb,w=null,O=db,E=.5;function k(e){return l(e[0]*em,e[1]*em)}function S(e){return(e=l.invert(e[0],e[1]))&&[e[0]*Qh,e[1]*Qh]}function T(){var e=wy(f,0,0,v).apply(null,t(h,m)),r=(v?wy:_y)(f,d-e[0],p-e[1],v);return n=zg(g,b,y),s=Dg(t,r),l=Dg(n,s),a=vy(s,E),j()}function j(){return u=c=null,k}return k.stream=function(e){return u&&c===e?u:u=xy(function(e){return cy({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(_(a(O(c=e)))))},k.preclip=function(e){return arguments.length?(_=e,x=void 0,j()):_},k.postclip=function(e){return arguments.length?(O=e,w=r=i=o=null,j()):O},k.clipAngle=function(e){return arguments.length?(_=+e?rb(x=e*em):(x=null,nb),j()):x*Qh},k.clipExtent=function(e){return arguments.length?(O=null==e?(w=r=i=o=null,db):sb(w=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),j()):null==w?null:[[w,r],[i,o]]},k.scale=function(e){return arguments.length?(f=+e,T()):f},k.translate=function(e){return arguments.length?(d=+e[0],p=+e[1],T()):[d,p]},k.center=function(e){return arguments.length?(h=e[0]%360*em,m=e[1]%360*em,T()):[h*Qh,m*Qh]},k.rotate=function(e){return arguments.length?(g=e[0]%360*em,b=e[1]%360*em,y=e.length>2?e[2]%360*em:0,T()):[g*Qh,b*Qh,y*Qh]},k.angle=function(e){return arguments.length?(v=e%360*em,T()):v*Qh},k.precision=function(e){return arguments.length?(a=vy(s,E=e*e),j()):cm(E)},k.fitExtent=function(e,t){return py(k,e,t)},k.fitSize=function(e,t){return hy(k,e,t)},k.fitWidth=function(e,t){return my(k,e,t)},k.fitHeight=function(e,t){return gy(k,e,t)},function(){return t=e.apply(this,arguments),k.invert=t.invert&&S,T()}}function ky(e){var t=0,n=Xh/3,r=Ey(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*em,n=e[1]*em):[t*Qh,n*Qh]},i}function Sy(e,t){var n=lm(e),r=(n+lm(t))/2;if(tm(r)<Gh)return function(e){var t=im(e);function n(e,n){return[e*t,lm(n)/t]}return n.invert=function(e,n){return[e/t,pm(n*t)]},n}(e);var i=1+n*(2*r-n),o=cm(i)/r;function a(e,t){var n=cm(i-2*r*lm(t))/r;return[n*lm(e*=r),o-n*im(e)]}return a.invert=function(e,t){var n=o-t;return[rm(e,tm(n))/r*um(n),pm((i-(e*e+n*n)*r*r)/(2*r))]},a}var Ty=function(){return ky(Sy).scale(155.424).center([0,33.6442])},jy=function(){return Ty().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Ay(e){return function(t,n){var r=im(t),i=im(n),o=e(r*i);return[o*i*lm(t),o*lm(n)]}}function Py(e){return function(t,n){var r=cm(t*t+n*n),i=e(r),o=lm(i),a=im(i);return[rm(t*o,r*a),pm(r&&n*o/r)]}}var Cy=Ay((function(e){return cm(2/(1+e))}));Cy.invert=Py((function(e){return 2*pm(e/2)}));var Ny=Ay((function(e){return(e=dm(e))&&e/lm(e)}));Ny.invert=Py((function(e){return e}));function My(e,t){return[e,am(fm((Kh+t)/2))]}My.invert=function(e,t){return[e,2*nm(om(t))-Kh]};function Iy(e){var t,n,r,i=Oy(e),o=i.center,a=i.scale,s=i.translate,l=i.clipExtent,u=null;function c(){var o=Xh*a(),s=i(Ug(i.rotate()).invert([0,0]));return l(null==u?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===My?[[Math.max(s[0]-o,u),t],[Math.min(s[0]+o,n),r]]:[[u,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?u=t=n=r=null:(u=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==u?null:[[u,t],[n,r]]},c()}function Dy(e){return fm((Kh+e)/2)}function Ry(e,t){var n=im(e),r=e===t?lm(e):am(n/im(t))/am(Dy(t)/Dy(e)),i=n*sm(Dy(e),r)/r;if(!r)return My;function o(e,t){i>0?t<-Kh+Gh&&(t=-Kh+Gh):t>Kh-Gh&&(t=Kh-Gh);var n=i/sm(Dy(t),r);return[n*lm(r*e),i-n*im(r*e)]}return o.invert=function(e,t){var n=i-t,o=um(r)*cm(e*e+n*n);return[rm(e,tm(n))/r*um(n),2*nm(sm(i/o,1/r))-Kh]},o}function zy(e,t){return[e,t]}zy.invert=zy;function Ly(e,t){var n=im(e),r=e===t?lm(e):(n-im(t))/(t-e),i=n/r+e;if(tm(r)<Gh)return zy;function o(e,t){var n=i-t,o=r*e;return[n*lm(o),i-n*im(o)]}return o.invert=function(e,t){var n=i-t;return[rm(e,tm(n))/r*um(n),i-um(r)*cm(e*e+n*n)]},o}var Fy=1.340264,By=-.081106,Uy=893e-6,qy=.003796,$y=cm(3)/2;function Hy(e,t){var n=pm($y*lm(t)),r=n*n,i=r*r*r;return[e*im(n)/($y*(Fy+3*By*r+i*(7*Uy+9*qy*r))),n*(Fy+By*r+i*(Uy+qy*r))]}Hy.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Fy+By*i+o*(Uy+qy*i))-t)/(Fy+3*By*i+o*(7*Uy+9*qy*i)))*r)*i*i,!(tm(n)<Yh));++a);return[$y*e*(Fy+3*By*i+o*(7*Uy+9*qy*i))/im(r),pm(lm(r)/$y)]};function Wy(e,t){var n=im(t),r=im(e)*n;return[n*lm(e)/r,lm(t)/r]}Wy.invert=Py(nm);function Vy(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?db:cy({point:function(i,o){this.stream.point(i*e+n,o*t+r)}})}function Gy(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Gy.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(tm(n)>Gh&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function Yy(e,t){return[im(t)*lm(e),lm(t)]}Yy.invert=Py(pm);function Xy(e,t){var n=im(t),r=1+im(e)*n;return[n*lm(e)/r,lm(t)/r]}Xy.invert=Py((function(e){return 2*nm(e)}));function Ky(e,t){return[am(fm((Kh+t)/2)),-e]}Ky.invert=function(e,t){return[-t,2*nm(om(e))-Kh]};var Jy=uy(),Zy=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Qy(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(tv[e]=function(e,t){return function n(){var r=t();return r.type=e,r.path=uy().projection(r),r.copy=r.copy||function(){var e=n();return Zy.forEach((function(t){r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}(e,t),this):tv[e]||null}function ev(e){return e&&e.path||Jy}var tv={albers:jy,albersusa:function(){var e,t,n,r,i,o,a=jy(),s=Ty().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Ty().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),l.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),l.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),l.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(u),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+Gh,c+.12*t+Gh],[o-.214*t-Gh,c+.234*t-Gh]]).stream(u),i=l.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+Gh,c+.166*t+Gh],[o-.115*t-Gh,c+.234*t-Gh]]).stream(u),f()},c.fitExtent=function(e,t){return py(c,e,t)},c.fitSize=function(e,t){return hy(c,e,t)},c.fitWidth=function(e,t){return my(c,e,t)},c.fitHeight=function(e,t){return gy(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return Oy(Cy).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Oy(Ny).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return ky(Ry).scale(109.5).parallels([30,30])},conicequalarea:Ty,conicequidistant:function(){return ky(Ly).scale(131.154).center([0,13.9389])},equalEarth:function(){return Oy(Hy).scale(177.158)},equirectangular:function(){return Oy(zy).scale(152.63)},gnomonic:function(){return Oy(Wy).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a=1,s=0,l=0,u=1,c=1,f=db,d=null,p=db;function h(){return r=i=null,o}return o={stream:function(e){return r&&i===e?r:r=f(p(i=e))},postclip:function(r){return arguments.length?(p=r,d=e=t=n=null,h()):p},clipExtent:function(r){return arguments.length?(p=null==r?(d=e=t=n=null,db):sb(d=+r[0][0],e=+r[0][1],t=+r[1][0],n=+r[1][1]),h()):null==d?null:[[d,e],[t,n]]},scale:function(e){return arguments.length?(f=Vy((a=+e)*u,a*c,s,l),h()):a},translate:function(e){return arguments.length?(f=Vy(a*u,a*c,s=+e[0],l=+e[1]),h()):[s,l]},reflectX:function(e){return arguments.length?(f=Vy(a*(u=e?-1:1),a*c,s,l),h()):u<0},reflectY:function(e){return arguments.length?(f=Vy(a*u,a*(c=e?-1:1),s,l),h()):c<0},fitExtent:function(e,t){return py(o,e,t)},fitSize:function(e,t){return hy(o,e,t)},fitWidth:function(e,t){return my(o,e,t)},fitHeight:function(e,t){return gy(o,e,t)}}},mercator:function(){return Iy(My).scale(961/Zh)},naturalEarth1:function(){return Oy(Gy).scale(175.295)},orthographic:function(){return Oy(Yy).scale(249.5).clipAngle(90+Gh)},stereographic:function(){return Oy(Xy).scale(250).clipAngle(142)},transversemercator:function(){var e=Iy(Ky),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var nv in tv)Qy(nv,tv[nv]);function rv(e){Qe.call(this,null,e)}function iv(e){Qe.call(this,null,e)}function ov(e){Qe.call(this,null,e)}rv.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(p.y)(rv,Qe).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||p.x,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=ev(e.projection),n.materialize().reflow()):a=i===p.x||t.modified(i.fields)?n.ADD_MOD:n.ADD;var s=function(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,(function(e){e[o]=r(i(e))})),r.pointRadius(s),n.modifies(o)},iv.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(p.y)(iv,Qe).transform=function(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],l=a[1];function u(e){var t=r([i(e),o(e)]);t?(e[s]=t[0],e[l]=t[1]):(e[s]=void 0,e[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,u)),t.modifies(a)},ov.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(p.y)(ov,Qe).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=function(t){return e.context(t),r},r}(ev(e.projection),e.field||Object(p.t)("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(function(e){e[i]=r})),n.modifies(i)};var av=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var sv,lv;1===(sv=av).length&&(lv=sv,sv=function(e,t){return av(lv(e),t)});var uv=Array.prototype,cv=(uv.slice,uv.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var fv=1e-6,dv=(Math.PI,Math.abs),pv=(Math.atan,Math.atan2,Math.cos,Math.ceil);Math.exp,Math.floor,Math.log,Math.pow,Math.sin,Math.sign,Math.sqrt,Math.tan;function hv(e,t,n){var r=cv(e,t-fv,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function mv(e,t,n){var r=cv(e,t-fv,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function gv(){var e,t,n,r,i,o,a,s,l,u,c,f,d=10,p=d,h=90,m=360,g=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return cv(pv(r/h)*h,n,h).map(c).concat(cv(pv(s/m)*m,a,m).map(f)).concat(cv(pv(t/d)*d,e,d).filter((function(e){return dv(e%h)>fv})).map(l)).concat(cv(pv(o/p)*p,i,p).filter((function(e){return dv(e%m)>fv})).map(u))}return b.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},b.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},b.extent=function(e){return arguments.length?b.extentMajor(e).extentMinor(e):b.extentMinor()},b.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),b.precision(g)):[[r,s],[n,a]]},b.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),b.precision(g)):[[t,o],[e,i]]},b.step=function(e){return arguments.length?b.stepMajor(e).stepMinor(e):b.stepMinor()},b.stepMajor=function(e){return arguments.length?(h=+e[0],m=+e[1],b):[h,m]},b.stepMinor=function(e){return arguments.length?(d=+e[0],p=+e[1],b):[d,p]},b.precision=function(d){return arguments.length?(g=+d,l=hv(o,i,90),u=mv(t,e,g),c=hv(s,a,90),f=mv(r,n,g),b):g},b.extentMajor([[-180,-90+fv],[180,90-fv]]).extentMinor([[-180,-80-fv],[180,80+fv]])}function bv(e){Qe.call(this,[],e),this.generator=gv()}bv.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(p.y)(bv,Qe).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var o in e)Object(p.D)(i[o])&&i[o](e[o]);return n=i(),r.length?t.mod.push(E(r[0],n)):t.add.push(_(n)),r[0]=n,t};var yv=n(16);function vv(e){Qe.call(this,null,e)}function xv(e){if(!Object(p.D)(e))return!1;const t=Object(p.cb)(Object(p.g)(e));return t.$x||t.$y||t.$value||t.$max}function _v(e){Qe.call(this,null,e),this.modified(!0)}function wv(e,t,n){Object(p.D)(e[t])&&e[t](n)}vv.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(p.y)(vv,Qe).transform=function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||p.x,o=function(e,t){let n;Object(p.D)(e)?(n=n=>e(n,t)).dep=xv(e):e?n=Object(p.l)(e):(n=e=>e.$value/e.$max||0).dep=!0;return n}(e.opacity,e),a=function(e,t){let n;Object(p.D)(e)?(n=n=>Object(yv.g)(e(n,t))).dep=xv(e):n=Object(p.l)(Object(yv.g)(e||"#888"));return n}(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?bh(n.map(e=>bh(i(e).values))):0};return n.forEach(e=>{const t=i(e),n=Object(p.o)({},e,l);r||(n.$max=bh(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?e=>c[e]:p.jb,d=Qo(l-a,u-s),h=d.getContext("2d"),m=h.getImageData(0,0,l-a,u-s),g=m.data;for(let e=s,o=0;e<u;++e){t.$y=e-s;for(let s=a,u=e*i;s<l;++s,o+=4){t.$x=s-a,t.$value=f(s+u);const e=n(t);g[o+0]=e.r,g[o+1]=e.g,g[o+2]=e.b,g[o+3]=~~(255*r(t))}}return h.putImageData(m,0,0),d}(t,n,a.dep?a:Object(p.l)(a(n)),o.dep?o:Object(p.l)(o(n)))}),t.reflow(!0).modifies(s)},Object(p.y)(_v,Qe).transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=Qy((e||"mercator").toLowerCase());t||Object(p.n)("Unrecognized projection type: "+e);return t()}(e.type),Zy.forEach((function(t){null!=e[t]&&wv(n,t,e[t])}))):Zy.forEach((function(t){e.modified(t)&&wv(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){var n=function(e){return 1===(e=Object(p.i)(e)).length?e[0]:{type:Uh,features:e.reduce((e,t)=>e.concat(function(e){return e.type===Uh?e.features:Object(p.i)(e).filter(e=>null!=e).map(e=>e.type===Bh?e:{type:Bh,geometry:e})}(t)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};function Ov(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,f,d,p=e._root,h={data:r},m=e._x0,g=e._y0,b=e._x1,y=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((u=t>=(o=(m+b)/2))?m=o:b=o,(c=n>=(a=(g+y)/2))?g=a:y=a,i=p,!(p=p[f=c<<1|u]))return i[f]=h,e;if(s=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===s&&n===l)return h.next=p,i?i[f]=h:e._root=h,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(u=t>=(o=(m+b)/2))?m=o:b=o,(c=n>=(a=(g+y)/2))?g=a:y=a}while((f=c<<1|u)==(d=(l>=a)<<1|s>=o));return i[d]=p,i[f]=h,e}var Ev=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function kv(e){return e[0]}function Sv(e){return e[1]}function Tv(e,t,n){var r=new jv(null==t?kv:t,null==n?Sv:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function jv(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Av(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Pv=Tv.prototype=jv.prototype;Pv.copy=function(){var e,t,n=new jv(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Av(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Av(t));return n},Pv.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Ov(this.cover(t,n),t,n,e)},Pv.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>f&&(f=i));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<o;++n)Ov(this,a[n],s[n],e[n]);return this},Pv.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n,u=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Pv.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Pv.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Pv.find=function(e,t,n){var r,i,o,a,s,l,u,c=this._x0,f=this._y0,d=this._x1,p=this._y1,h=[],m=this._root;for(m&&h.push(new Ev(m,c,f,d,p)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,p=t+n,n*=n);l=h.pop();)if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>p||(a=l.x1)<c||(s=l.y1)<f))if(m.length){var g=(i+a)/2,b=(o+s)/2;h.push(new Ev(m[3],g,b,a,s),new Ev(m[2],i,b,g,s),new Ev(m[1],g,o,a,b),new Ev(m[0],i,o,g,b)),(u=(t>=b)<<1|e>=g)&&(l=h[h.length-1],h[h.length-1]=h[h.length-1-u],h[h.length-1-u]=l)}else{var y=e-+this._x.call(null,m.data),v=t-+this._y.call(null,m.data),x=y*y+v*v;if(x<n){var _=Math.sqrt(n=x);c=e-_,f=t-_,d=e+_,p=t+_,r=m.data}}return r},Pv.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,f,d,p=this._root,h=this._x0,m=this._y0,g=this._x1,b=this._y1;if(!p)return this;if(p.length)for(;;){if((u=o>=(s=(h+g)/2))?h=s:g=s,(c=a>=(l=(m+b)/2))?m=l:b=l,t=p,!(p=p[f=c<<1|u]))return this;if(!p.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=i,this)},Pv.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Pv.root=function(){return this._root},Pv.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Pv.visit=function(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new Ev(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new Ev(n,u,c,o,a)),(n=l[2])&&s.push(new Ev(n,r,c,u,a)),(n=l[1])&&s.push(new Ev(n,u,i,o,c)),(n=l[0])&&s.push(new Ev(n,r,i,u,c))}return this},Pv.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Ev(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(a+l)/2,f=(s+u)/2;(o=i[0])&&n.push(new Ev(o,a,s,c,f)),(o=i[1])&&n.push(new Ev(o,c,s,l,f)),(o=i[2])&&n.push(new Ev(o,a,f,c,u)),(o=i[3])&&n.push(new Ev(o,c,f,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Pv.x=function(e){return arguments.length?(this._x=e,this):this._x},Pv.y=function(e){return arguments.length?(this._y=e,this):this._y};var Cv=function(e){return function(){return e}},Nv=function(){return 1e-6*(Math.random()-.5)};function Mv(e){return e.x+e.vx}function Iv(e){return e.y+e.vy}function Dv(e){return e.index}function Rv(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}var zv={value:function(){}};function Lv(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Fv(r)}function Fv(e){this._=e}function Bv(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Uv(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function qv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=zv,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Fv.prototype=Lv.prototype={constructor:Fv,on:function(e,t){var n,r=this._,i=Bv(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=qv(r[n],e.name,t);else if(null==t)for(n in r)r[n]=qv(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Uv(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fv(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var $v,Hv,Wv=Lv,Vv=0,Gv=0,Yv=0,Xv=1e3,Kv=0,Jv=0,Zv=0,Qv="object"==typeof performance&&performance.now?performance:Date,ex="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tx(){return Jv||(ex(nx),Jv=Qv.now()+Zv)}function nx(){Jv=0}function rx(){this._call=this._time=this._next=null}function ix(e,t,n){var r=new rx;return r.restart(e,t,n),r}function ox(){Jv=(Kv=Qv.now())+Zv,Vv=Gv=0;try{!function(){tx(),++Vv;for(var e,t=$v;t;)(e=Jv-t._time)>=0&&t._call.call(null,e),t=t._next;--Vv}()}finally{Vv=0,function(){var e,t,n=$v,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:$v=t);Hv=e,sx(r)}(),Jv=0}}function ax(){var e=Qv.now(),t=e-Kv;t>Xv&&(Zv-=t,Kv=e)}function sx(e){Vv||(Gv&&(Gv=clearTimeout(Gv)),e-Jv>24?(e<1/0&&(Gv=setTimeout(ox,e-Qv.now()-Zv)),Yv&&(Yv=clearInterval(Yv))):(Yv||(Kv=Qv.now(),Yv=setInterval(ax,Xv)),Vv=1,ex(ox)))}rx.prototype=ix.prototype={constructor:rx,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?tx():+n)+(null==t?0:+t),this._next||Hv===this||(Hv?Hv._next=this:$v=this,Hv=this),this._call=e,this._time=n,sx()},stop:function(){this._call&&(this._call=null,this._time=1/0,sx())}};function lx(e){return e.x}function ux(e){return e.y}var cx=10,fx=Math.PI*(3-Math.sqrt(5)),dx=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=ix(c),u=Wv("tick","end");function c(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(r){var l,u,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),l=0;l<c;++l)null==(u=e[l]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=cx*Math.sqrt(n),o=n*fx;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:f,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(a=(i=t-(s=e[u]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(e,n){return arguments.length>1?(u.on(e,n),t):u.on(e)}}},px={center:function(e,t){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-e,s=s/o-t,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r},collide:function(e){var t,n,r=1,i=1;function o(){for(var e,o,s,l,u,c,f,d=t.length,p=0;p<i;++p)for(o=Tv(t,Mv,Iv).visitAfter(a),e=0;e<d;++e)s=t[e],c=n[s.index],f=c*c,l=s.x+s.vx,u=s.y+s.vy,o.visit(h);function h(e,t,n,i,o){var a=e.data,d=e.r,p=c+d;if(!a)return t>l+p||i<l-p||n>u+p||o<u-p;if(a.index>s.index){var h=l-a.x-a.vx,m=u-a.y-a.vy,g=h*h+m*m;g<p*p&&(0===h&&(g+=(h=Nv())*h),0===m&&(g+=(m=Nv())*m),g=(p-(g=Math.sqrt(g)))/g*r,s.vx+=(h*=g)*(p=(d*=d)/(f+d)),s.vy+=(m*=g)*p,a.vx-=h*(p=1-p),a.vy-=m*p)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=Cv(null==e?1:+e)),o.initialize=function(e){t=e,s()},o.iterations=function(e){return arguments.length?(i=+e,o):i},o.strength=function(e){return arguments.length?(r=+e,o):r},o.radius=function(t){return arguments.length?(e="function"==typeof t?t:Cv(+t),s(),o):e},o},nbody:function(){var e,t,n,r,i=Cv(-30),o=1,a=1/0,s=.81;function l(r){var i,o=e.length,a=Tv(e,lx,ux).visitAfter(c);for(n=r,i=0;i<o;++i)t=e[i],a.visit(f)}function u(){if(e){var t,n,o=e.length;for(r=new Array(o),t=0;t<o;++t)n=e[t],r[n.index]=+i(n,t,e)}}function c(e){var t,n,i,o,a,s=0,l=0;if(e.length){for(i=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,i+=n*t.x,o+=n*t.y);e.x=i/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=r[t.data.index]}while(t=t.next)}e.value=s}function f(e,i,l,u){if(!e.value)return!0;var c=e.x-t.x,f=e.y-t.y,d=u-i,p=c*c+f*f;if(d*d/s<p)return p<a&&(0===c&&(p+=(c=Nv())*c),0===f&&(p+=(f=Nv())*f),p<o&&(p=Math.sqrt(o*p)),t.vx+=c*e.value*n/p,t.vy+=f*e.value*n/p),!0;if(!(e.length||p>=a)){(e.data!==t||e.next)&&(0===c&&(p+=(c=Nv())*c),0===f&&(p+=(f=Nv())*f),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(d=r[e.data.index]*n/p,t.vx+=c*d,t.vy+=f*d)}while(e=e.next)}}return l.initialize=function(t){e=t,u()},l.strength=function(e){return arguments.length?(i="function"==typeof e?e:Cv(+e),u(),l):i},l.distanceMin=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l.distanceMax=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.theta=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l},link:function(e){var t,n,r,i,o,a=Dv,s=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=Cv(30),u=1;function c(r){for(var i=0,a=e.length;i<u;++i)for(var s,l,c,f,d,p,h,m=0;m<a;++m)l=(s=e[m]).source,f=(c=s.target).x+c.vx-l.x-l.vx||Nv(),d=c.y+c.vy-l.y-l.vy||Nv(),f*=p=((p=Math.sqrt(f*f+d*d))-n[m])/p*r*t[m],d*=p,c.vx-=f*(h=o[m]),c.vy-=d*h,l.vx+=f*(h=1-h),l.vy+=d*h}function f(){if(r){var s,l,u=r.length,c=e.length,f=new Map(r.map((e,t)=>[a(e,t,r),e]));for(s=0,i=new Array(u);s<c;++s)(l=e[s]).index=s,"object"!=typeof l.source&&(l.source=Rv(f,l.source)),"object"!=typeof l.target&&(l.target=Rv(f,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(s=0,o=new Array(c);s<c;++s)l=e[s],o[s]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);t=new Array(c),d(),n=new Array(c),p()}}function d(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+s(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),c.initialize=function(e){r=e,f()},c.links=function(t){return arguments.length?(e=t,f(),c):e},c.id=function(e){return arguments.length?(a=e,c):a},c.iterations=function(e){return arguments.length?(u=+e,c):u},c.strength=function(e){return arguments.length?(s="function"==typeof e?e:Cv(+e),d(),c):s},c.distance=function(e){return arguments.length?(l="function"==typeof e?e:Cv(+e),p(),c):l},c},x:function(e){var t,n,r,i=Cv(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=Cv(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:Cv(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:Cv(+t),a(),o):e},o},y:function(e){var t,n,r,i=Cv(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=Cv(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:Cv(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Cv(+t),a(),o):e},o}},hx="forces",mx=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],gx=["static","iterations"],bx=["x","y","vx","vy"];function yx(e){Qe.call(this,null,e)}yx.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:bx}]};var vx=Object(p.y)(yx,Qe);function xx(e,t,n,r){var i,o,a,s,l=Object(p.i)(t.forces);for(i=0,o=mx.length;i<o;++i)(a=mx[i])!==hx&&t.modified(a)&&e[a](t[a]);for(i=0,o=l.length;i<o;++i)s=hx+i,(a=n||t.modified(hx,i)?wx(l[i]):r&&_x(l[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force(hx+i,null);return e.numForces=l.length,e}function _x(e,t){var n,r;for(n in e)if(Object(p.D)(r=e[n])&&t.modified(Object(p.g)(r)))return 1;return 0}function wx(e){var t,n;for(n in Object(p.v)(px,e.force)||Object(p.n)("Unrecognized force: "+e.force),t=px[e.force](),e)Object(p.D)(t[n])&&Ox(t[n],e[n],e);return t}function Ox(e,t,n){e(Object(p.D)(t)?function(e){return t(e,n)}:t)}vx.transform=function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified(mx),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&xx(i,e,0,t)):(this.value=i=function(e,t){var n=dx(e),r=!1,i=n.stop,o=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,o()},n.stop=function(){return r=!0,i()},xx(n,t,!0).on("end",(function(){r=!0}))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified(gx)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},vx.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,o=0,a=i.length;o<a;++o)if((n=i[o]).name===hx&&"link"===n.op._argval.force)for(var s,l=n.op._argops,u=0,c=l.length;u<c;++u)if("links"===l[u].name&&(s=l[u].op.source)){r.pulse(s,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(bx)};var Ex=function(e,t,n){var r={};return e.each((function(e){var i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e};function kx(e,t){return e.parent===t.parent?1:2}function Sx(e,t){return e+t.x}function Tx(e,t){return Math.max(e,t.y)}function jx(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Ax(e,t){var n,r,i,o,a,s=new Mx(e),l=+e.value&&(s.value=e.value),u=[s];for(null==t&&(t=Px);n=u.pop();)if(l&&(n.value=+n.data.value),(i=t(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)u.push(r=n.children[o]=new Mx(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Nx)}function Px(e){return e.children}function Cx(e){e.data=e.data.data}function Nx(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Mx(e){this.data=e,this.depth=this.height=0,this.parent=null}Mx.prototype=Ax.prototype={constructor:Mx,count:function(){return this.eachAfter(jx)},each:function(e){var t,n,r,i,o=this,a=[o];do{for(t=a.reverse(),a=[];o=t.pop();)if(e(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(e){for(var t,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n]);for(;i=a.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Ax(this).eachBefore(Cx)}};var Ix=Array.prototype.slice;var Dx=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Ix.call(e))).length,o=[];r<i;)t=e[r],n&&Lx(n,t)?++r:(n=Bx(o=Rx(o,t)),r=0);return n};function Rx(e,t){var n,r;if(Fx(t,e))return[t];for(n=0;n<e.length;++n)if(zx(t,e[n])&&Fx(Ux(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(zx(Ux(e[n],e[r]),t)&&zx(Ux(e[n],t),e[r])&&zx(Ux(e[r],t),e[n])&&Fx(qx(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function zx(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Lx(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Fx(e,t){for(var n=0;n<t.length;++n)if(!Lx(e,t[n]))return!1;return!0}function Bx(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return Ux(e[0],e[1]);case 3:return qx(e[0],e[1],e[2])}var t}function Ux(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+a+u/f*c)/2,r:(f+i+s)/2}}function qx(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-a,p=r-u,h=i-s,m=i-c,g=l-o,b=f-o,y=r*r+i*i-o*o,v=y-a*a-s*s+l*l,x=y-u*u-c*c+f*f,_=p*h-d*m,w=(h*x-m*v)/(2*_)-r,O=(m*g-h*b)/_,E=(p*v-d*x)/(2*_)-i,k=(d*b-p*g)/_,S=O*O+k*k-1,T=2*(o+w*O+E*k),j=w*w+E*E-o*o,A=-(S?(T+Math.sqrt(T*T-4*S*j))/(2*S):j/T);return{x:r+w+O*A,y:i+E+k*A,r:A}}function $x(e,t,n){var r,i,o,a,s=e.x-t.x,l=e.y-t.y,u=s*s+l*l;u?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(u+a-i)/(2*u),o=Math.sqrt(Math.max(0,a/u-r*r)),n.x=e.x-r*s-o*l,n.y=e.y-r*l+o*s):(r=(u+i-a)/(2*u),o=Math.sqrt(Math.max(0,i/u-r*r)),n.x=t.x+r*s-o*l,n.y=t.y+r*l+o*s)):(n.x=t.x+n.r,n.y=t.y)}function Hx(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Wx(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Vx(e){this._=e,this.next=null,this.previous=null}function Gx(e){if(!(i=e.length))return 0;var t,n,r,i,o,a,s,l,u,c,f;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;$x(n,t,r=e[2]),t=new Vx(t),n=new Vx(n),r=new Vx(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(s=3;s<i;++s){$x(t._,n._,r=e[s]),r=new Vx(r),l=n.next,u=t.previous,c=n._.r,f=t._.r;do{if(c<=f){if(Hx(l._,r._)){n=l,t.next=n,n.previous=t,--s;continue e}c+=l._.r,l=l.next}else{if(Hx(u._,r._)){(t=u).next=n,n.previous=t,--s;continue e}f+=u._.r,u=u.previous}}while(l!==u.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,o=Wx(t);(r=r.next)!==n;)(a=Wx(r))<o&&(t=r,o=a);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Dx(t),s=0;s<i;++s)(t=e[s]).x-=r.x,t.y-=r.y;return r.r}function Yx(e){return null==e?null:Xx(e)}function Xx(e){if("function"!=typeof e)throw new Error;return e}function Kx(){return 0}var Jx=function(e){return function(){return e}};function Zx(e){return Math.sqrt(e.value)}function Qx(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function e_(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Gx(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function t_(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var n_=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},r_=function(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(r-t)/e.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u},i_="$",o_={depth:-1},a_={};function s_(e){return e.id}function l_(e){return e.parentId}var u_=function(){var e=s_,t=l_;function n(n){var r,i,o,a,s,l,u,c=n.length,f=new Array(c),d={};for(i=0;i<c;++i)r=n[i],s=f[i]=new Mx(r),null!=(l=e(r,i,n))&&(l+="")&&(d[u=i_+(s.id=l)]=u in d?a_:s);for(i=0;i<c;++i)if(s=f[i],null!=(l=t(n[i],i,n))&&(l+="")){if(!(a=d[i_+l]))throw new Error("missing: "+l);if(a===a_)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=o_,o.eachBefore((function(e){e.depth=e.parent.depth+1,--c})).eachBefore(Nx),o.parent=null,c>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=Xx(t),n):e},n.parentId=function(e){return arguments.length?(t=Xx(e),n):t},n};function c_(e,t){return e.parent===t.parent?1:2}function f_(e){var t=e.children;return t?t[0]:e.t}function d_(e){var t=e.children;return t?t[t.length-1]:e.t}function p_(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function h_(e,t,n){return e.a.parent===t.parent?e.a:n}function m_(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}m_.prototype=Object.create(Mx.prototype);var g_=function(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(i-n)/e.value;++s<l;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u},b_=(1+Math.sqrt(5))/2;function y_(e,t,n,r,i,o){for(var a,s,l,u,c,f,d,p,h,m,g,b=[],y=t.children,v=0,x=0,_=y.length,w=t.value;v<_;){l=i-n,u=o-r;do{c=y[x++].value}while(!c&&x<_);for(f=d=c,g=c*c*(m=Math.max(u/l,l/u)/(w*e)),h=Math.max(d/g,g/f);x<_;++x){if(c+=s=y[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*m,(p=Math.max(d/g,g/f))>h){c-=s;break}h=p}b.push(a={value:c,dice:l<u,children:y.slice(v,x)}),a.dice?r_(a,n,r,i,w?r+=u*c/w:o):g_(a,n,r,w?n+=l*c/w:i,o),w-=c,v=x}return b}var v_=function e(t){function n(e,n,r,i,o){y_(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(b_),x_=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,l,u,c,f=-1,d=a.length,p=e.value;++f<d;){for(l=(s=a[f]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?r_(s,n,r,i,r+=(o-r)*s.value/p):g_(s,n,r,n+=(i-n)*s.value/p,o),p-=s.value}else e._squarify=a=y_(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(b_);function __(e){Qe.call(this,null,e)}function w_(e){return e.values}function O_(){var e,t=[];return e={entries:e=>(function e(n,r){if(++r>t.length)return n;var i,o=[];for(i in n)o.push({key:i,values:e(n[i],r)});return o})(function e(n,r){if(r>=t.length)return n;for(var i,o,a,s=-1,l=n.length,u=t[r++],c={},f={};++s<l;)(a=c[i=u(o=n[s])+""])?a.push(o):c[i]=[o];for(i in c)f[i]=e(c[i],r);return f}(e,0),0),key:n=>(t.push(n),e)}}function E_(e){Qe.call(this,null,e)}function k_(e,t){return e.parent===t.parent?1:2}__.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(p.y)(__,Qe).transform=function(e,t){t.source||Object(p.n)("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(e=>{e.children&&y(e.data)&&i.rem.push(e.data)}),this.value=o=Ax({values:Object(p.i)(e.keys).reduce((e,t)=>(e.key(t),e),O_()).entries(i.source)},w_),n&&o.each(e=>{e.children&&(e=_(e.data),i.add.push(e),i.source.push(e))}),Ex(o,v,v)),i.source.root=o,i},Object(p.y)(E_,Qe).transform=function(e,t){t.source&&t.source.root||Object(p.n)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(k(e.sort,e=>e.data)),function(e,t,n){for(var r,i=0,o=t.length;i<o;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?k_:p.N);try{this.value=n(i)}catch(e){Object(p.n)(e)}return i.each((function(e){!function(e,t,n){for(var r=e.data,i=0,o=t.length-1;i<o;++i)r[n[i]]=e[t[i]];r[n[o]]=e.children?e.children.length:0}(e,r,o)})),t.reflow(e.modified()).modifies(o).modifies("leaf")};var S_=["x","y","r","depth","children"];function T_(e){E_.call(this,e)}T_.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:S_.length,default:S_}]};var j_=Object(p.y)(T_,E_);j_.layout=function(){var e=null,t=1,n=1,r=Kx;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(Qx(e)).eachAfter(e_(r,.5)).eachBefore(t_(1)):i.eachBefore(Qx(Zx)).eachAfter(e_(Kx,1)).eachAfter(e_(r,i.r/Math.min(t,n))).eachBefore(t_(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=Yx(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:Jx(+e),i):r},i},j_.params=["radius","size","padding"],j_.fields=S_;var A_=["x0","y0","x1","y1","depth","children"];function P_(e){E_.call(this,e)}P_.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:A_.length,default:A_}]};var C_=Object(p.y)(P_,E_);function N_(e){Qe.call(this,null,e)}C_.layout=function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&r_(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(n_),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},C_.params=["size","round","padding"],C_.fields=A_,N_.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(p.y)(N_,Qe).transform=function(e,t){t.source||Object(p.n)("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!this.value||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?Ex(u_().id(e.key).parentId(e.parentKey)(i.source),e.key,p.fb):Ex(u_()([{}]),e.key,e.key)),i.source.root=this.value=n,i};var M_={tidy:function(){var e=c_,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,o,a=new m_(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new m_(r[i],i)),n.parent=t;return(a.parent=new m_(null,0)).children=[a],a}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)i.eachBefore(s);else{var u=i,c=i,f=i;i.eachBefore((function(e){e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=u===c?1:e(u,c)/2,p=d-u.x,h=t/(c.x+d+p),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+p)*h,e.y=e.depth*m}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,l=o.parent.children[0],u=o.m,c=a.m,f=s.m,d=l.m;s=d_(s),o=f_(o),s&&o;)l=f_(l),(a=d_(a)).a=t,(i=s.z+f-o.z-u+e(s._,o._))>0&&(p_(h_(s,t,r),t,i),u+=i,c+=i),f+=s.m,u+=o.m,d+=l.m,c+=a.m;s&&!d_(a)&&(a.t=s,a.m+=f-c),o&&!f_(l)&&(l.t=o,l.m+=u-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=kx,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Sx,0)/e.length}(n),t.y=function(e){return 1+e.reduce(Tx,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),u=s.x-e(s,l)/2,c=l.x+e(l,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-u)/(c-u)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},I_=["x","y","depth","children"];function D_(e){E_.call(this,e)}D_.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:I_.length,default:I_}]};var R_=Object(p.y)(D_,E_);function z_(e){Qe.call(this,[],e)}R_.layout=function(e){var t=e||"tidy";if(Object(p.v)(M_,t))return M_[t]();Object(p.n)("Unrecognized Tree layout method: "+t)},R_.params=["size","nodeSize"],R_.fields=I_,z_.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(p.y)(z_,Qe).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||Object(p.n)("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(function(e){o[v(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&o[v(t)]&&o[v(n)]&&i.add.push(_({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){o[v(e)]=1})),n.forEach((function(e){(o[v(e.source)]||o[v(e.target)])&&i.mod.push(e)}))),i};var L_={binary:function(e,t,n,r,i){var o,a,s=e.children,l=s.length,u=new Array(l+1);for(u[0]=a=o=0;o<l;++o)u[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,l){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=l)}var f=u[t],d=r/2+f,p=t+1,h=n-1;for(;p<h;){var m=p+h>>>1;u[m]<d?p=m+1:h=m}d-u[p-1]<u[p]-d&&t+1<p&&--p;var g=u[p]-f,b=r-g;if(a-i>l-o){var y=(i*b+a*g)/r;e(t,p,g,i,o,y,l),e(p,n,b,y,o,a,l)}else{var v=(o*b+l*g)/r;e(t,p,g,i,o,a,v),e(p,n,b,i,v,a,l)}}(0,l,e.value,t,n,r,i)},dice:r_,slice:g_,slicedice:function(e,t,n,r,i){(1&e.depth?g_:r_)(e,t,n,r,i)},squarify:v_,resquarify:x_},F_=["x0","y0","x1","y1","depth","children"];function B_(e){E_.call(this,e)}B_.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:F_.length,default:F_}]};var U_=Object(p.y)(B_,E_);U_.layout=function(){var e=function(){var e=v_,t=!1,n=1,r=1,i=[0],o=Kx,a=Kx,s=Kx,l=Kx,u=Kx;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(n_),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=u(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=l(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=Xx(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:Jx(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:Jx(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:Jx(+e),c):s},c.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:Jx(+e),c):l},c.paddingLeft=function(e){return arguments.length?(u="function"==typeof e?e:Jx(+e),c):u},c}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Object(p.v)(L_,t)?e.tile(L_[t]):Object(p.n)("Unrecognized Treemap layout method: "+t)},e},U_.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],U_.fields=F_;var q_=function(e,t){var n,r,i,o,a,s,l=[],u=function(e){return e(o)};if(null==t)l.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(u)])||(n[a]=s=[],s.dims=a,l.push(s)),s.push(o);return l};function $_(e){Qe.call(this,null,e)}$_.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(p.y)($_,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=q_(r,e.groupby),o=(e.groupby||[]).map(p.h),a=o.length,s=e.as||[Object(p.h)(e.x),Object(p.h)(e.y)],l=[];i.forEach(t=>{an(t,e.x,e.y,e.bandwidth||.3).forEach(e=>{const n={};for(let e=0;e<a;++e)n[o[e]]=t.dims[e];n[s[0]]=e[0],n[s[1]]=e[1],l.push(_(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n};const H_={linear:Qt,log:en,exp:tn,pow:nn,quad:rn,poly:on};function W_(e){Qe.call(this,null,e)}W_.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(H_)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(p.y)(W_,Qe).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=q_(r,e.groupby),o=(e.groupby||[]).map(p.h),a=e.method||"linear",s=e.order||3,l=function(e,t){return"poly"===e?t:"quad"===e?2:1}(a,s),u=e.as||[Object(p.h)(e.x),Object(p.h)(e.y)],c=H_[a],f=[];let d=e.extent;Object(p.v)(H_,a)||Object(p.n)("Invalid regression method: "+a),null!=d&&"log"===a&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(n=>{if(n.length<=l)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=c(n,e.x,e.y,s);if(e.params)return void f.push(_({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const i=d||Object(p.p)(n,e.x),h=e=>{const t={};for(let e=0;e<o.length;++e)t[o[e]]=n.dims[e];t[u[0]]=e[0],t[u[1]]=e[1],f.push(_(t))};"linear"===a?i.forEach(e=>h([e,r.predict(e)])):cn(r.predict,i,25,200).forEach(h)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n};const V_=Math.pow(2,-52),G_=new Uint32Array(512);class Y_{static from(e,t=nw,n=rw){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new Y_(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,l=-1/0,u=-1/0;for(let t=0;t<o;t++){const n=e[2*t],r=e[2*t+1];n<a&&(a=n),r<s&&(s=r),n>l&&(l=n),r>u&&(u=r),this._ids[t]=t}const c=(a+l)/2,f=(s+u)/2;let d,p,h,m=1/0;for(let t=0;t<o;t++){const n=X_(c,f,e[2*t],e[2*t+1]);n<m&&(d=t,m=n)}const g=e[2*d],b=e[2*d+1];m=1/0;for(let t=0;t<o;t++){if(t===d)continue;const n=X_(g,b,e[2*t],e[2*t+1]);n<m&&n>0&&(p=t,m=n)}let y=e[2*p],v=e[2*p+1],x=1/0;for(let t=0;t<o;t++){if(t===d||t===p)continue;const n=Q_(g,b,y,v,e[2*t],e[2*t+1]);n<x&&(h=t,x=n)}let _=e[2*h],w=e[2*h+1];if(x===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];ew(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(J_(g,b,y,v,_,w)){const e=p,t=y,n=v;p=h,y=_,v=w,h=e,_=t,w=n}const O=function(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,c=a*a+s*s,f=l*l+u*u,d=.5/(a*u-s*l);return{x:e+(u*c-s*f)*d,y:t+(a*f-l*c)*d}}(g,b,y,v,_,w);this._cx=O.x,this._cy=O.y;for(let t=0;t<o;t++)this._dists[t]=X_(e[2*t],e[2*t+1],O.x,O.y);ew(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=t[h]=p,n[p]=t[d]=h,n[h]=t[p]=d,r[d]=0,r[p]=1,r[h]=2,i.fill(-1),i[this._hashKey(g,b)]=d,i[this._hashKey(y,v)]=p,i[this._hashKey(_,w)]=h,this.trianglesLen=0,this._addTriangle(d,p,h,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const l=this._ids[s],u=e[2*l],c=e[2*l+1];if(s>0&&Math.abs(u-o)<=V_&&Math.abs(c-a)<=V_)continue;if(o=u,a=c,l===d||l===p||l===h)continue;let f=0;for(let e=0,t=this._hashKey(u,c);e<this._hashSize&&(-1===(f=i[(t+e)%this._hashSize])||f===n[f]);e++);let m,g=f=t[f];for(;m=n[g],!J_(u,c,e[2*g],e[2*g+1],e[2*m],e[2*m+1]);)if((g=m)===f){g=-1;break}if(-1===g)continue;let b=this._addTriangle(g,l,n[g],-1,-1,r[g]);r[l]=this._legalize(b+2),r[g]=b,E++;let y=n[g];for(;m=n[y],J_(u,c,e[2*y],e[2*y+1],e[2*m],e[2*m+1]);)b=this._addTriangle(y,l,m,r[l],-1,r[y]),r[l]=this._legalize(b+2),n[y]=y,E--,y=m;if(g===f)for(;J_(u,c,e[2*(m=t[g])],e[2*m+1],e[2*g],e[2*g+1]);)b=this._addTriangle(m,l,g,-1,r[g],r[m]),this._legalize(b+2),r[m]=b,n[g]=g,E--,g=m;this._hullStart=t[l]=g,n[g]=t[y]=l,n[l]=y,i[this._hashKey(u,c)]=l,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(E);for(let e=0,t=this._hullStart;e<E;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=G_[--i];continue}const l=a-a%3,u=s+(e+1)%3,c=l+(a+2)%3,f=t[o],d=t[e],p=t[u],h=t[c];if(Z_(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1],r[2*h],r[2*h+1])){t[e]=h,t[a]=f;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=l+(a+1)%3;i<G_.length&&(G_[i++]=s)}else{if(0===i)break;e=G_[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function X_(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function K_(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function J_(e,t,n,r,i,o){return(K_(i,o,e,t,n,r)||K_(e,t,n,r,i,o)||K_(n,r,i,o,e,t))<0}function Z_(e,t,n,r,i,o,a,s){const l=e-a,u=t-s,c=n-a,f=r-s,d=i-a,p=o-s,h=c*c+f*f,m=d*d+p*p;return l*(f*m-h*p)-u*(c*m-h*d)+(l*l+u*u)*(c*p-f*d)<0}function Q_(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,c=a*a+s*s,f=l*l+u*u,d=.5/(a*u-s*l),p=(u*c-s*f)*d,h=(a*f-l*c)*d;return p*p+h*h}function ew(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;tw(e,n+r>>1,i),t[e[n]]>t[e[r]]&&tw(e,n,r),t[e[i]]>t[e[r]]&&tw(e,i,r),t[e[n]]>t[e[i]]&&tw(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;tw(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(ew(e,t,i,r),ew(e,t,n,o-1)):(ew(e,t,n,o-1),ew(e,t,i,r))}}function tw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function nw(e){return e[0]}function rw(e){return e[1]}const iw=1e-6;class ow{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>iw||Math.abs(this._y1-i)>iw)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class aw{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class sw{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],l=2*n[o+1],u=2*n[o+2],c=e[s],f=e[s+1],d=e[l],p=e[l+1],h=e[u],m=e[u+1],g=d-c,b=p-f,y=h-c,v=m-f,x=g*g+b*b,_=y*y+v*v,w=2*(g*v-b*y);if(w)if(Math.abs(w)<1e-8)t=(c+h)/2,r=(f+m)/2;else{const e=1/w;t=c+(v*x-b*_)*e,r=f+(g*_-y*x)*e}else t=(c+h)/2-1e8*v,r=(f+m)/2+1e8*y;i[a]=t,i[a+1]=r}let o,a,s,l=t[t.length-1],u=4*l,c=e[2*l],f=e[2*l+1];r.fill(0);for(let n=0;n<t.length;++n)o=u,a=c,s=f,u=4*(l=t[n]),c=e[2*l],f=e[2*l+1],r[o+2]=r[u]=s-f,r[o+3]=r[u+1]=c-a}render(e){const t=null==e?e=new ow:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),a=2*Math.floor(r/3),s=o[i],l=o[i+1],u=o[a],c=o[a+1];this._renderSegment(s,l,u,c,e)}let s,l=i[i.length-1];for(let t=0;t<i.length;++t){s=l,l=i[t];const n=2*Math.floor(r[l]/3),u=o[n],c=o[n+1],f=4*s,d=this._project(u,c,a[f+2],a[f+3]);d&&this._renderSegment(u,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new ow:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new ow:void 0,r=this._clip(e);if(null===r)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(yield e)}}cellPolygon(e){const t=new aw;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),i[s=s%3==2?s-2:s+1]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,i,o,a,s,l=null,u=t[n-2],c=t[n-1],f=this._regioncode(u,c);for(let d=0;d<n;d+=2)if(r=u,i=c,u=t[d],c=t[d+1],o=f,f=this._regioncode(u,c),0===o&&0===f)a=s,s=0,l?l.push(u,c):l=[u,c];else{let t,n,d,p,h;if(0===o){if(null===(t=this._clipSegment(r,i,u,c,o,f)))continue;[n,d,p,h]=t}else{if(null===(t=this._clipSegment(u,c,r,i,f,o)))continue;[p,h,n,d]=t,a=s,s=this._edgecode(n,d),a&&s&&this._edge(e,a,s,l,l.length),l?l.push(n,d):l=[n,d]}a=s,s=this._edgecode(p,h),a&&s&&this._edge(e,a,s,l,l.length),l?l.push(p,h):l=[p,h]}if(l)a=s,s=this._edgecode(l[0],l[1]),a&&s&&this._edge(e,a,s,l,l.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,l=i||o;8&l?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&l?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&l?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let e=0;e<r.length;e+=2){const t=(e+2)%r.length,n=(e+4)%r.length;(r[e]===r[t]&&r[t]===r[n]||r[e+1]===r[t+1]&&r[t+1]===r[n+1])&&(r.splice(t,2),e-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const lw=2*Math.PI;function uw(e){return e[0]}function cw(e){return e[1]}function fw(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class dw{constructor(e){this._delaunator=new Y_(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],o=2*t[e+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(e,t)=>t).sort((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]);const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.sqrt((r[3]-r[1])**2+(r[2]-r[0])**2);for(let e=0,n=t.length/2;e<n;++e){const n=fw(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new Y_(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==o[t]||(o[t]=e)}for(let e=0,t=r.length;e<t;++e)a[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new sw(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o}=this;if(this.collinear){const t=this.collinear.indexOf(e);return t>0&&(yield this.collinear[t-1]),void(t<this.collinear.length-1&&(yield this.collinear[t+1]))}const a=t[e];if(-1===a)return;let s=a,l=-1;do{if(yield l=o[s],o[s=s%3==2?s-2:s+1]!==e)return;if(-1===(s=i[s])){const t=n[(r[e]+1)%n.length];return void(t!==l&&(yield t))}}while(s!==a)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:l}=this;if(-1===r[e]||!l.length)return(e+1)%(l.length>>1);let u=e,c=(t-l[2*e])**2+(n-l[2*e+1])**2;const f=r[e];let d=f;do{let r=s[d];const f=(t-l[2*r])**2+(n-l[2*r+1])**2;if(f<c&&(c=f,u=r),s[d=d%3==2?d-2:d+1]!==e)break;if(-1===(d=a[d])){if((d=i[(o[e]+1)%i.length])!==r&&(t-l[2*d])**2+(n-l[2*d+1])**2<c)return d;break}}while(d!==f);return u}render(e){const t=null==e?e=new ow:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(o<t)continue;const a=2*i[t],s=2*i[o];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new ow:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];e.moveTo(i+t,o),e.arc(i,o,t,0,lw)}return n&&n.value()}renderHull(e){const t=null==e?e=new ow:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<o;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new aw;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new ow:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new aw;return this.renderTriangle(e,t),t.value()}}function pw(e){Qe.call(this,null,e)}dw.from=function(e,t=uw,n=cw,r){return new dw("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))},pw.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const hw=Object(p.y)(pw,Qe),mw=[-1e5,-1e5,1e5,1e5];function gw(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}hw.transform=function(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:mw;const o=this.value=dw.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=o.cellPolygon(e);r[e][n]=t?gw(t):null}return t.reflow(e.modified()).modifies(n)};var bw=Math.PI/180,yw=64,vw=2048,xw=function(){var e,t,n,r,i,o,a,s=[256,256],l=Ew,u=[],c=Math.random,f={};function d(e,t,n){for(var r,i,o,a,u,f=t.x,d=t.y,p=Math.sqrt(s[0]*s[0]+s[1]*s[1]),h=l(s),m=c()<.5?1:-1,g=-m;(r=h(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=p));)if(t.x=f+i,t.y=d+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&ww(t,e,s[0])||n&&(u=n,!((a=t).x+a.x1>u[0].x&&a.x+a.x0<u[1].x&&a.y+a.y1>u[0].y&&a.y+a.y0<u[1].y)))){for(var b,y=t.sprite,v=t.width>>5,x=s[0]>>5,_=t.x-(v<<4),w=127&_,O=32-w,E=t.y1-t.y0,k=(t.y+t.y0)*x+(_>>5),S=0;S<E;S++){b=0;for(var T=0;T<=v;T++)e[k+T]|=b<<O|(T<v?(b=y[S*v+T])>>>w:0);k+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var l=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(yw<<5)/t,e.height=vw/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Qo()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),p=null,h=u.length,m=-1,g=[],b=u.map((function(s){return{text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~n(s),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}})).sort((function(e,t){return t.size-e.size}));++m<h;){var y=b[m];y.x=s[0]*(c()+.5)>>1,y.y=s[1]*(c()+.5)>>1,_w(l,y,b,m),y.hasText&&d(f,y,p)&&(g.push(y),p?Ow(p,y):p=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(u=e,f):u},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=kw(e),f):t},f.fontStyle=function(e){return arguments.length?(r=kw(e),f):r},f.fontWeight=function(e){return arguments.length?(i=kw(e),f):i},f.rotate=function(e){return arguments.length?(o=kw(e),f):o},f.text=function(t){return arguments.length?(e=kw(t),f):e},f.spiral=function(e){return arguments.length?(l=Sw[e]||e,f):l},f.fontSize=function(e){return arguments.length?(n=kw(e),f):n},f.padding=function(e){return arguments.length?(a=kw(e),f):a},f.random=function(e){return arguments.length?(c=e,f):c},f};function _w(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(yw<<5)/o,vw/o);var a,s,l,u,c,f=0,d=0,p=0,h=n.length;for(--r;++r<h;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,l=t.size<<1,t.rotate){var m=Math.sin(t.rotate*bw),g=Math.cos(t.rotate*bw),b=a*g,y=a*m,v=l*g,x=l*m;a=Math.max(Math.abs(b+x),Math.abs(b-x))+31>>5<<5,l=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else a=a+31>>5<<5;if(l>p&&(p=l),f+a>=yw<<5&&(f=0,d+=p,p=0),d+l>=vw)break;i.translate((f+(a>>1))/o,(d+(l>>1))/o),t.rotate&&i.rotate(t.rotate*bw),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=l,t.xoff=f,t.yoff=d,t.x1=a>>1,t.y1=l>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=a}for(var _=i.getImageData(0,0,(yw<<5)/o,vw/o).data,w=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,l=t.y1-t.y0,u=0;u<l*s;u++)w[u]=0;if(null==(f=t.xoff))return;d=t.yoff;var O=0,E=-1;for(c=0;c<l;c++){for(u=0;u<a;u++){var k=s*c+(u>>5),S=_[(d+c)*(yw<<5)+(f+u)<<2]?1<<31-u%32:0;w[k]|=S,O|=S}O?E=c:(t.y0++,l--,c--,d++)}t.y1=t.y0+E,t.sprite=w.slice(0,(t.y1-t.y0)*s)}}}function ww(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,l=32-s,u=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;f<u;f++){r=0;for(var d=0;d<=o;d++)if((r<<l|(d<o?(r=i[f*o+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function Ow(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Ew(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function kw(e){return"function"==typeof e?e:function(){return e}}var Sw={archimedean:Ew,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},Tw=["x","y","font","fontSize","fontStyle","fontWeight","angle"],jw=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Aw(e){Qe.call(this,xw(),e)}function Pw(e){return new Uint8Array(e)}function Cw(e){return new Uint16Array(e)}function Nw(e){return new Uint32Array(e)}function Mw(e,t,n){var r=(t<257?Pw:t<65537?Cw:Nw)(e);return n&&r.set(n),r}Aw.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Tw}]},Object(p.y)(Aw,Qe).transform=function(e,t){!e.size||e.size[0]&&e.size[1]||Object(p.n)("Wordcloud size dimensions must be non-zero.");var n=e.modified();if(n||t.changed(t.ADD_REM)||jw.some((function(n){var r=e[n];return Object(p.D)(r)&&t.modified(r.fields)}))){var r,i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||Tw,s=e.fontSize||14;if(Object(p.D)(s)?r=e.fontSizeRange:s=Object(p.l)(s),r){var l=s,u=bp("sqrt")().domain(Object(p.p)(i,l)).range(r);s=function(e){return u(l(e))}}i.forEach((function(e){e[a[0]]=NaN,e[a[1]]=NaN,e[a[3]]=0}));for(var c,f,d=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Ot).layout(),h=o.size(),m=h[0]>>1,g=h[1]>>1,b=0,y=d.length;b<y;++b)(f=(c=d[b]).datum)[a[0]]=c.x+m,f[a[1]]=c.y+g,f[a[2]]=c.font,f[a[3]]=c.size,f[a[4]]=c.style,f[a[5]]=c.weight,f[a[6]]=c.rotate;return t.reflow(n).modifies(a)}};var Iw=function(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),o=e.index,a=i[0],s=i[1],l=o.length;for(n=0;n<a;++n)t[o[n]]|=r;for(n=s;n<l;++n)t[o[n]]|=r;return this}}},Dw=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var Rw=function(e){return 1===e.length&&(e=function(e){return function(t,n){return Dw(e(t),n)}}(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}(Dw),zw=Rw.right,Lw=Rw.left,Fw=function(e,t){return Array.from(t,t=>e[t])};function Bw(){var e=Nw(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];var a,s,l,u=n,c=i.length,f=Array(c),d=Nw(c);for(l=0;l<c;++l)f[l]=r(i[l]),d[l]=l;if(f=function(e,t){return e.sort.call(t,(function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0})),Fw(e,t)}(f,d),u)a=t,s=e,t=Array(u+c),e=Nw(u+c),function(e,t,n,r,i,o,a,s,l){var u,c=0,f=0;for(u=0;c<r&&f<a;++u)t[c]<i[f]?(s[u]=t[c],l[u]=n[c++]):(s[u]=i[f],l[u]=o[f++]+e);for(;c<r;++c,++u)s[u]=t[c],l[u]=n[c];for(;f<a;++f,++u)s[u]=i[f],l[u]=o[f]+e}(o,a,s,u,f,d,c,t,e);else{if(o>0)for(l=0;l<c;++l)d[l]+=o;t=f,e=d}return n=u+c,{index:d,value:f}},remove:function(r,i){var o,a,s,l=n;for(a=0;!i[e[a]]&&a<l;++a);for(s=a;a<l;++a)i[o=e[a]]||(e[s]=o,t[s]=t[a],++s);n=l-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[Lw(r,e[0],0,i),zw(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function Uw(e){var t,n,r,i,o;Qe.call(this,(t=8,n=[],r=Nw(0),i=Mw(0,t),o=Mw(0,t),{data:function(){return n},seen:function(){return e=r,t=n.length,r=e.length>=t?e:((i=i||new e.constructor(t)).set(e),i);var e,t,i},add:function(e){for(var t,r=0,i=n.length,o=e.length;r<o;++r)(t=e[r])._index=i++,n.push(t)},remove:function(e,t){var r,a,s,l=n.length,u=Array(l-e),c=n;for(a=0;!t[a]&&a<l;++a)u[a]=n[a],c[a]=a;for(s=a;a<l;++a)r=n[a],t[a]?c[a]=-1:(c[a]=s,i[s]=i[a],o[s]=o[a],u[s]=r,r._index=s++),i[a]=0;return n=u,c},size:function(){return n.length},curr:function(){return i},prev:function(){return o},reset:function(e){o[e]=i[e]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(e,t){i[e]|=t},clear:function(e,t){i[e]&=~t},resize:function(e,n){(e>i.length||n>t)&&(t=Math.max(n,t),i=Mw(e,t,i),o=Mw(e,t))}}),e),this._indices=null,this._dims=null}Uw.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var qw=Object(p.y)(Uw,Qe);function $w(e){Qe.call(this,null,e)}qw.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},qw.init=function(e,t){for(var n,r,i=e.fields,o=e.query,a=this._indices={},s=this._dims=[],l=o.length,u=0;u<l;++u)r=a[n=i[u].fname]||(a[n]=Bw()),s.push(Iw(r,u,o[u]));return this.eval(e,t)},qw.reinit=function(e,t){var n,r,i,o,a,s,l,u,c,f=t.materialize().fork(),d=e.fields,p=e.query,h=this._indices,m=this._dims,g=this.value,b=g.curr(),y=g.prev(),v=g.all(),x=f.rem=f.add,_=f.mod,w=p.length,O={};if(y.set(b),t.rem.length&&(a=this.remove(e,t,f)),t.add.length&&g.add(t.add),t.mod.length)for(s={},l=0,u=(o=t.mod).length;l<u;++l)s[o[l]._index]=1;for(l=0;l<w;++l)c=d[l],(!m[l]||e.modified("fields",l)||t.modified(c.fields))&&((n=O[i=c.fname])||(h[i]=r=Bw(),O[i]=n=r.insert(c,t.source,0)),m[l]=Iw(r,l,p[l]).onAdd(n,b));for(l=0,u=g.data().length;l<u;++l)a[l]||(y[l]!==b[l]?x.push(l):s[l]&&b[l]!==v&&_.push(l));return g.mask=(1<<w)-1,f},qw.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},qw.insert=function(e,t,n){var r,i,o,a=t.add,s=this.value,l=this._dims,u=this._indices,c=e.fields,f={},d=n.add,p=s.size(),h=p+a.length,m=l.length;s.resize(h,m),s.add(a);var g=s.curr(),b=s.prev(),y=s.all();for(r=0;r<m;++r)o=f[i=c[r].fname]||(f[i]=u[i].insert(c[r],a,p)),l[r].onAdd(o,g);for(;p<h;++p)b[p]=y,g[p]!==y&&d.push(p)},qw.modify=function(e,t){var n,r,i,o=t.mod,a=this.value,s=a.curr(),l=a.all(),u=e.mod;for(n=0,r=u.length;n<r;++n)s[i=u[n]._index]!==l&&o.push(i)},qw.remove=function(e,t,n){var r,i,o,a,s=this._indices,l=this.value,u=l.curr(),c=l.prev(),f=l.all(),d={},p=n.rem,h=t.rem;for(r=0,i=h.length;r<i;++r)d[o=h[r]._index]=1,c[o]=a=u[o],u[o]=f,a!==f&&p.push(o);for(o in s)s[o].remove(i,d);return this.reindex(t,i,d),d},qw.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter((function(){var e=i.remove(t,n);for(var o in r)r[o].reindex(e)}))},qw.update=function(e,t,n){var r,i,o=this._dims,a=e.query,s=t.stamp,l=o.length,u=0;for(n.filters=0,i=0;i<l;++i)e.modified("query",i)&&(r=i,++u);if(1===u)u=o[r].one,this.incrementOne(o[r],a[r],n.add,n.rem);else for(i=0,u=0;i<l;++i)e.modified("query",i)&&(u|=o[i].one,this.incrementAll(o[i],a[i],s,n.add),n.rem=n.add);return u},qw.incrementAll=function(e,t,n,r){var i,o,a,s=this.value,l=s.seen(),u=s.curr(),c=s.prev(),f=e.index(),d=e.bisect(e.range),p=e.bisect(t),h=p[0],m=p[1],g=d[0],b=d[1],y=e.one;if(h<g)for(i=h,o=Math.min(g,m);i<o;++i)l[a=f[i]]!==n&&(c[a]=u[a],l[a]=n,r.push(a)),u[a]^=y;else if(h>g)for(i=g,o=Math.min(h,b);i<o;++i)l[a=f[i]]!==n&&(c[a]=u[a],l[a]=n,r.push(a)),u[a]^=y;if(m>b)for(i=Math.max(h,b),o=m;i<o;++i)l[a=f[i]]!==n&&(c[a]=u[a],l[a]=n,r.push(a)),u[a]^=y;else if(m<b)for(i=Math.max(g,m),o=b;i<o;++i)l[a=f[i]]!==n&&(c[a]=u[a],l[a]=n,r.push(a)),u[a]^=y;e.range=t.slice()},qw.incrementOne=function(e,t,n,r){var i,o,a,s=this.value.curr(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],p=u[0],h=u[1],m=e.one;if(f<p)for(i=f,o=Math.min(p,d);i<o;++i)s[a=l[i]]^=m,n.push(a);else if(f>p)for(i=p,o=Math.min(f,h);i<o;++i)s[a=l[i]]^=m,r.push(a);if(d>h)for(i=Math.max(f,h),o=d;i<o;++i)s[a=l[i]]^=m,n.push(a);else if(d<h)for(i=Math.max(p,d),o=h;i<o;++i)s[a=l[i]]^=m,r.push(a);e.range=t.slice()},$w.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(p.y)($w,Qe).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var o=t.fork(t.ALL),a=r.data(),s=r.curr(),l=r.prev(),u=function(e){return s[e]&n?null:a[e]};return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,(function(e){var t=s[e]&n;return!t&&t^l[e]&n?a[e]:null})),o.filter(o.REM,(function(e){var t=s[e]&n;return t&&!(t^t^l[e]&n)?a[e]:null}))):(o.filter(o.ADD,u),o.filter(o.REM,(function(e){return(s[e]&n)===i?a[e]:null}))),o.filter(o.SOURCE,(function(e){return u(e._index)}))};var Hw=n(280),Ww=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:"default",item:null})),e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,i=r?Object(p.H)(r)?r:r.user:"default",o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),e.add(null,(function(e){var t=e.cursor,n=this.value;return Object(p.H)(t)||(n=t.item,t=t.user),function(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}(t&&"default"!==t?t:n||t),n}),{cursor:t})};function Vw(e,t){var n=e._runtime.data;return Object(p.v)(n,t)||Object(p.n)("Unrecognized data set: "+t),n[t]}function Gw(e,t){S(t)||Object(p.n)("Second argument to changes must be a changeset.");var n=Vw(this,e);return n.modified=!0,this.pulse(n.input,t)}function Yw(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Xw(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Kw(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}var Jw=function(e,t,n){var r,i,o,a=e._renderer,s=a&&a.canvas();return s&&(o=Kw(e),i=t.changedTouches?t.changedTouches[0]:t,(r=qu(i,s))[0]-=o[0],r[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;Object(p.H)(e)&&(e=i(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Object(p.l)(e),item:Object(p.l)(t||{}),group:i,xy:o,x:function(e){return o(e)[0]},y:function(e){return o(e)[1]}}}(e,n,r),t};const Zw="view",Qw="timer",eO="window",tO={trap:!1};function nO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||Object(p.F)(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function rO(e){return e.item}function iO(e){return e.item.mark.source}function oO(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}var aO=function(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r},sO=Math.sqrt(50),lO=Math.sqrt(10),uO=Math.sqrt(2);var cO="vega-bind",fO="vega-bind-name",dO="vega-bind-radio",pO="vega-option-",hO=function(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&e.runAsync(null,(function(){i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=Object(p.m)(r.debounce,i.update))),function(e,t,n,r){var i=aO("div",{class:cO});i.appendChild(aO("span",{class:fO},n.name||n.signal)),t.appendChild(i);var o=mO;switch(n.input){case"checkbox":o=gO;break;case"select":o=bO;break;case"radio":o=yO;break;case"range":o=vO}o(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0),i}};function mO(e,t,n,r){var i=aO("input");for(var o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(function(){e.update(i.value)})),e.elements=[i],e.set=function(e){i.value=e}}function gO(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var o=aO("input",i);t.appendChild(o),o.addEventListener("change",(function(){e.update(o.checked)})),e.elements=[o],e.set=function(e){o.checked=!!e||null}}function bO(e,t,n,r){var i=aO("select",{name:n.signal});n.options.forEach((function(e){var t={value:e};xO(e,r)&&(t.selected=!0),i.appendChild(aO("option",t,e+""))})),t.appendChild(i),i.addEventListener("change",(function(){e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(xO(n.options[t],e))return void(i.selectedIndex=t)}}function yO(e,t,n,r){var i=aO("span",{class:dO});t.appendChild(i),e.elements=n.options.map((function(t){var o=pO+n.signal+"-"+t,a={id:o,type:"radio",name:n.signal,value:t};xO(t,r)&&(a.checked=!0);var s=aO("input",a);return s.addEventListener("change",(function(){e.update(t)})),i.appendChild(s),i.appendChild(aO("label",{for:o},t+"")),s})),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)xO(n[r].value,t)&&(n[r].checked=!0)}}function vO(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i,o,a,s,l,u,c=null!=n.max?n.max:Math.max(100,+r)||100,f=n.min||Math.min(0,c,+r)||0,d=n.step||(i=f,o=c,a=100,s=Math.abs(o-i)/Math.max(0,a),l=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),(u=s/l)>=sO?l*=10:u>=lO?l*=5:u>=uO&&(l*=2),o<i?-l:l),p=aO("input",{type:"range",name:n.signal,min:f,max:c,step:d});p.value=r;var h=aO("label",{},+r);function m(){h.textContent=p.value,e.update(+p.value)}t.appendChild(p),t.appendChild(h),p.addEventListener("input",m),p.addEventListener("change",m),e.elements=[p],e.set=function(e){p.value=e,h.textContent=e}}function xO(e,t){return e===t||e+""==t+""}var _O=function(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,Yw(e),Xw(e),Kw(e),i,o).background(e._background)},wO=function(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null};function OO(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}var EO=async function(e,t,n,r){const i=Rc(t),o=i&&i.headless;return o||Object(p.n)("Unrecognized renderer type: "+t),await e.runAsync(),_O(e,null,null,o,n,r).renderAsync(e._scenegraph.root)};var kO=n(13);const SO="intersect",TO="union",jO="vlMulti",AO="or",PO="and";var CO="E",NO="R",MO="R-E",IO="R-LE",DO="R-RE",RO="index:unit";function zO(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=p.t.getter||Object(p.t)(r.field),n=r.getter(e),Object(p.C)(n)&&(n=Object(p.bb)(n)),Object(p.C)(o[s])&&(o[s]=Object(p.bb)(o[s])),Object(p.C)(o[s][0])&&(o[s]=o[s].map(p.bb)),r.type===CO){if(Object(p.A)(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if(r.type===NO){if(!Object(p.z)(n,o[s]))return!1}else if(r.type===DO){if(!Object(p.z)(n,o[s],!0,!1))return!1}else if(r.type===MO){if(!Object(p.z)(n,o[s],!1,!1))return!1}else if(r.type===IO&&!Object(p.z)(n,o[s],!1,!0))return!1;return!0}var LO={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((function(e){return t.indexOf(e)>=0})):t},R_union:function(e,t){var n=Object(p.bb)(t[0]),r=Object(p.bb)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Object(p.bb)(t[0]),r=Object(p.bb)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const FO=":",BO="@";function UO(e,t,n,r){t[0].type!==kO.c&&Object(p.n)("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&Object(p.T)(t).value,a=BO+"unit",s=FO+i;o!==SO||Object(p.v)(r,a)||(r[a]=n.getData(i).indataRef(n,"unit")),Object(p.v)(r,s)||(r[s]=n.getData(i).tuplesRef())}var qO=n(980);function $O(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function HO(e){const t=Object(yv.g)(e);return.2126*$O(t.r)+.7152*$O(t.g)+.0722*$O(t.b)}function WO(e){const t=this.context.data[e];return t?t.values.value:[]}const VO={};function GO(e,t,n){let r=e+":"+n,i=VO[r];return i&&i[0]===t||(VO[r]=i=[t,t(n)]),i[1]}function YO(e,t){return GO("timeFormat",Si,t)(e)}var XO=new Date(2e3,0,1);function KO(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(XO.setYear(2e3),XO.setMonth(e),XO.setDate(t),YO(XO,n)):""}function JO(e,t){let n;return Object(p.D)(e)?e:Object(p.H)(e)?(n=t.scales[e])&&n.value:void 0}function ZO(e,t){return function(n,r,i){if(n){const t=JO(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const QO=ZO("area",(function(e){return Tm.reset(),km(e,jm),2*Tm})),eE=ZO("bounds",(function(e){var t,n,r,i,o,a,s;if($m=qm=-(Bm=Um=1/0),Ym=[],km(e,Jm),n=Ym.length){for(Ym.sort(ag),t=1,o=[r=Ym[0]];t<n;++t)sg(r,(i=Ym[t])[0])||sg(r,i[1])?(og(r[0],i[1])>og(r[0],r[1])&&(r[1]=i[1]),og(i[0],r[1])>og(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=og(r[1],i[0]))>a&&(a=s,Bm=i[0],qm=r[1])}return Ym=Xm=null,Bm===1/0||Um===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bm,Um],[qm,$m]]})),tE=ZO("centroid",(function(e){lg=ug=cg=fg=dg=pg=hg=mg=gg=bg=yg=0,km(e,Eg);var t=gg,n=bg,r=yg,i=t*t+n*n+r*r;return i<Yh&&(t=pg,n=hg,r=mg,ug<Gh&&(t=cg,n=fg,r=dg),(i=t*t+n*n+r*r)<Yh)?[NaN,NaN]:[rm(n,t)*Qh,pm(r/cm(i))*Qh]}));function nE(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function rE(e,t){return e===t||e!=e&&t!=t||(Object(p.A)(e)?!(!Object(p.A)(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!rE(e[n],t[n]))return!1;return!0}(e,t):!(!Object(p.F)(e)||!Object(p.F)(t))&&iE(e,t))}function iE(e,t){for(let n in e)if(!rE(e[n],t[n]))return!1;return!0}function oE(e){return t=>iE(e,t)}const aE={};function sE(e){return e.data}function lE(e,t){const n=WO.call(t,e);return n.root&&n.root.lookup||aE}const uE="undefined"!=typeof window&&window||null;const cE=":",fE="@",dE="%";function pE(e,t,n,r){t[0].type!==kO.c&&Object(p.n)("First argument to data functions must be a string literal.");const i=t[0].value,o=cE+i;if(!Object(p.v)(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(e){}}function hE(e,t,n,r){if(t[0].type===kO.c)mE(n,r,t[0].value);else if(t[0].type===kO.b)for(e in n.scales)mE(n,r,e)}function mE(e,t,n){const r=dE+n;if(!Object(p.v)(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}const gE={random:function(){return Ot()},cumulativeNormal:It,cumulativeLogNormal:Bt,cumulativeUniform:Vt,densityNormal:Mt,densityLogNormal:Ft,densityUniform:Wt,quantileNormal:Dt,quantileLogNormal:Ut,quantileUniform:Gt,sampleNormal:Nt,sampleLogNormal:Lt,sampleUniform:Ht,isArray:p.A,isBoolean:p.B,isDate:p.C,isDefined:function(e){return void 0!==e},isNumber:p.E,isObject:p.F,isRegExp:p.G,isString:p.H,isTuple:y,isValid:function(e){return null!=e&&e==e},toBoolean:p.Z,toDate:p.ab,toNumber:p.bb,toString:p.db,flush:p.u,lerp:p.J,merge:function(){var e=[].slice.call(arguments);return e.unshift({}),p.o.apply(null,e)},pad:p.O,peek:p.T,span:p.W,inrange:p.z,truncate:p.eb,rgb:yv.g,lab:qO.a,hcl:qO.b,hsl:yv.f,luminance:HO,contrast:function(e,t){const n=HO(e),r=HO(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o},format:function(e,t){return GO("format",yd.a,t)(e)},utcFormat:function(e,t){return GO("utcFormat",Ti,t)(e)},utcParse:function(e,t){return GO("utcParse",Ce.e,t)(e)},utcOffset:xi,utcSequence:Oi,timeFormat:YO,timeParse:function(e,t){return GO("timeParse",Ce.c,t)(e)},timeOffset:vi,timeSequence:wi,timeUnitSpecifier:ki,monthFormat:function(e){return KO(e,1,"%B")},monthAbbrevFormat:function(e){return KO(e,1,"%b")},dayFormat:function(e){return KO(0,2+e,"%A")},dayAbbrevFormat:function(e){return KO(0,2+e,"%a")},quarter:p.U,utcquarter:p.gb,warn:function(){return nE(this.context.dataflow,"warn",arguments)},info:function(){return nE(this.context.dataflow,"info",arguments)},debug:function(){return nE(this.context.dataflow,"debug",arguments)},extent:p.p,inScope:function(e){let t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];const[r,i]=e,o=(new $o).set(r[0],r[1],i[0],i[1]);return zc(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=Object(p.i)(e.marktype),r=Object(p.i)(e.markname);t=e=>(!n.length||n.some(t=>e.marktype===t))&&(!r.length||r.some(t=>e.name===t))}return t}(t))},clampRange:p.j,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return uE?uE.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return uE?[uE.innerWidth,uE.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return Af(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(p.fb).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?ds(n,t=t||ts(e)):e}},panLinear:p.P,panLog:p.Q,panPow:p.R,panSymlog:p.S,zoomLinear:p.kb,zoomLog:p.lb,zoomPow:p.mb,zoomSymlog:p.nb,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){let a,s,l=this.context.dataflow,u=this.context.data[e],c=u.input,f=u.changes,d=l.stamp();if(!1===l._trigger||!(c.value.length||t||r))return 0;if((!f||f.stamp<d)&&(u.changes=f=l.changeset(),f.stamp=d,l.runAfter((function(){u.modified=!0,l.pulse(c,f).run()}),!0,1)),n&&(a=!0===n?p.fb:Object(p.A)(n)||y(n)?n:oE(n),f.remove(a)),t&&f.insert(t),r&&(a=oE(r),c.value.some(a)?f.remove(a):f.insert(r)),i)for(s in o)f.modify(i,s,o[s]);return 1}},bE=["view","item","group","xy","x","y"],yE="event.vega.",vE="this.",xE={};function _E(e,t,n){return 1===arguments.length?gE[e]:(gE[e]=t,n&&(xE[e]=n),OE&&(OE.functions[e]=vE+e),this)}_E("bandwidth",(function(e,t){const n=JO(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),hE),_E("copy",(function(e,t){const n=JO(e,(t||this).context);return n?n.copy():void 0}),hE),_E("domain",(function(e,t){const n=JO(e,(t||this).context);return n?n.domain():[]}),hE),_E("range",(function(e,t){const n=JO(e,(t||this).context);return n&&n.range?n.range():[]}),hE),_E("invert",(function(e,t,n){const r=JO(e,(n||this).context);return r?Object(p.A)(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),hE),_E("scale",(function(e,t,n){const r=JO(e,(n||this).context);return r&&void 0!==t?r(t):void 0}),hE),_E("gradient",(function(e,t,n,r,i){e=JO(e,(i||this).context);const o=Ko(t,n);let a=e.domain(),s=a[0],l=Object(p.T)(a),u=p.x;return l-s?u=Ep(e,s,l):e=(e.interpolator?bp("sequential")().interpolator(e.interpolator()):bp("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(s!==(a=e.ticks(+r||15))[0]&&a.unshift(s),l!==Object(p.T)(a)&&a.push(l)),a.forEach(t=>o.stop(u(t),e(t))),o}),hE),_E("geoArea",QO,hE),_E("geoBounds",eE,hE),_E("geoCentroid",tE,hE),_E("geoShape",(function(e,t,n){const r=JO(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),hE),_E("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==kO.c&&Object(p.n)("First argument to indata must be a string literal."),t[1].type!==kO.c&&Object(p.n)("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a=fE+o;Object(p.v)(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),_E("data",WO,pE),_E("treePath",(function(e,t,n){const r=lE(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(sE):void 0}),pE),_E("treeAncestors",(function(e,t){const n=lE(e,this)[t];return n?n.ancestors().map(sE):void 0}),pE),_E("vlSelectionTest",(function(e,t,n){for(var r,i,o,a,s,l=this.context.data[e],u=l?l.values.value:[],c=l?l[RO]&&l[RO].value:void 0,f=n===SO,d=u.length,p=0;p<d;++p)if(r=u[p],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=zO(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(f^(s=zO(t,r)))return s;return d&&f}),UO),_E("vlSelectionResolve",(function(e,t,n){for(var r,i,o,a,s,l,u,c,f,d,h,m=this.context.data[e],g=m?m.values.value:[],b={},y={},v={},x=g.length,_=0;_<x;++_){for(a=(r=g[_]).unit,i=r.fields,o=r.values,d=0,h=i.length;d<h;++d)s=i[d],u=(l=b[s.field]||(b[s.field]={}))[a]||(l[a]=[]),v[s.field]=c=s.type.charAt(0),f=LO[c+"_union"],l[a]=f(u,Object(p.i)(o[d]));n&&(u=y[a]||(y[a]=[])).push(Object(p.i)(o).reduce((e,t,n)=>(e[i[n].field]=t,e),{}))}return t=t||TO,Object.keys(b).forEach((function(e){b[e]=Object.keys(b[e]).map(t=>b[e][t]).reduce((n,r)=>void 0===n?r:LO[v[e]+"_"+t](n,r))})),g=Object.keys(y),n&&g.length&&(b[jO]=t===TO?{[AO]:g.reduce((e,t)=>(e.push.apply(e,y[t]),e),[])}:{[PO]:g.map(e=>({[AO]:y[e]}))}),b}),UO);const wE={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+Object(p.Y)("$"+e)+"]"},functions:function(e){const t=Object(kO.f)(e);bE.forEach(e=>t[e]=yE+e);for(let e in gE)t[e]=vE+e;return t},constants:kO.e,visitors:xE};var OE=Object(kO.d)(wE);function EE(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function kE(e,t){return EE(["event"],e,t)}function SE(e,t){return EE(["item","_"],e,t)}function TE(e,t,n){var r,i;for(r in n=n||{},e)i=e[r],n[r]=Object(p.A)(i)?i.map((function(e){return jE(e,t,n)})):jE(i,t,n);return n}function jE(e,t,n){if(!e||!Object(p.F)(e))return e;for(var r,i=0,o=AE.length;i<o;++i)if(r=AE[i],Object(p.v)(e,r.key))return r.parse(e,t,n);return e}var AE=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Object(p.n)("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Object(p.I)(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t,n){e.$params&&TE(e.$params,t,n);var r="e:"+e.$expr+"_"+e.$name;return t.fn[r]||(t.fn[r]=Object(p.f)(function(e,t){return EE(["datum","_"],e,t)}(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Object(p.t)(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,r,i=e.$encode,o={};for(n in i)r=i[n],o[n]=Object(p.f)(SE(r.$expr,t),r.$fields),o[n].output=r.$output;return o}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Object(p.i)(e.$compare).map((function(e){return e&&e.$tupleid?v:e}));return t.fn[n]||(t.fn[n]=Object(p.k)(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var o=ME(n,t.fork()),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a}}},{key:"$tupleid",parse:function(){return v}}];function PE(e){return(e+"").toLowerCase()}var CE=function(e,t){"operator"!==PE(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?function(e,t){return EE(["_"],e,t)}(e.update,t):null)};var NE=function(e,t){var n=Object(p.F)(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||Object(p.n)("Source not defined: "+e.source),i=e.target&&e.target.$expr?kE(e.target.$expr,t):t.get(e.target),o&&o.$expr&&(o.$params&&(a=TE(o.$params,t)),o=function(e,t){return EE(["_","event"],e,t)}(o.$expr,t)),t.update(e,r,i,o,a)},ME=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach((function(e){CE(e,t)})),n.forEach((function(e){!function(e,t){if(e.params){var n=t.get(e.id);n||Object(p.n)("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(TE(e.params,t),e.react,e.initonly))}}(e,t)})),(e.streams||[]).forEach((function(e){!function(e,t){var n,r=null!=e.filter?kE(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(i=(n=e.merge.map(t.get.bind(t)))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&Object(p.n)("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}(e,t)})),(e.updates||[]).forEach((function(e){NE(e,t)})),t.resolve()},IE={skip:!0};var DE=function(e,t,n){return new RE(e,t,n)};function RE(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function zE(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}RE.prototype=zE.prototype={fork:function(){var e=new zE(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),"collect"===PE(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.preload(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var o=r.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(r.unresolved=r.unresolved||[]).push((function(){o=r.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)}))}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var a in e.data)n=r.data[a]||(r.data[a]={}),e.data[a].forEach((function(e){n[e]=t}))},resolve:function(){return(this.unresolved||[]).forEach((function(e){e()})),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[PE(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((function(e){n.update(t.signals[e],i[e],IE)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(p.fb).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};var LE=function(e,t,n){return ME(t,DE(e,tt,n||gE))};var FE="width",BE="height",UE="padding",qE={skip:!0};function $E(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===UE?r.left+r.right:0)}function HE(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===UE?r.top+r.bottom:0)}function WE(e,t){return t.modified&&Object(p.A)(t.input.value)&&e.indexOf("_:vega:_")}function VE(e,t){return!("parent"===e||t instanceof tt.proxy)}var GE=function(e,t,n,r){var i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":Object(p.A)(e)?YE(e):Object(p.F)(e)&&!Object(p.C)(e)?(t=e,Object.keys(t).map((function(e){var n=t[e];return e+": "+(Object(p.A)(n)?YE(n):XE(n))})).join("\n")):e+"";var t}(r))};function YE(e){return"["+e.map(XE).join(", ")+"]"}function XE(e){return Object(p.A)(e)?"[…]":Object(p.F)(e)&&!Object(p.C)(e)?"{…}":e}function KE(e,t){t=t||{},Ke.call(this),t.loader&&this.loader(t.loader),t.logger&&this.logger(t.logger),null!=t.logLevel&&this.logLevel(t.logLevel),this._el=null,this._elBind=null,this._renderType=t.renderer||Ic.Canvas,this._scenegraph=new Iu;var n=this._scenegraph.root;this._renderer=null,this._tooltip=t.tooltip||GE,this._redraw=!0,this._handler=(new Xu).scene(n),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function(e){const t=Object(p.o)({defaults:{}},e),n=(e,t)=>{t.forEach(t=>{Object(p.A)(e[t])&&(e[t]=Object(p.cb)(e[t]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig);var r=LE(this,e,t.functions);this._runtime=r,this._signals=r.signals,this._bind=(e.bindings||[]).map((function(e){return{state:null,param:Object(p.o)({},e)}})),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._background=t.background||r.background||null,this._width=this.width(),this._height=this.height(),this._viewWidth=$E(this,this._width),this._viewHeight=HE(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function(e){var t=e._signals,n=t[FE],r=t[BE],i=t[UE];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(function(t){e._width=t.size,e._viewWidth=$E(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(function(t){e._height=t.size,e._viewHeight=HE(e,t.size),o()}),{size:r});var a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(this),Ww(this),t.hover&&this.hover(),t.container&&this.initialize(t.container,t.bind)}var JE=Object(p.y)(KE,Ke);function ZE(e,t){return Object(p.v)(e._signals,t)?e._signals[t]:Object(p.n)("Unrecognized signal name: "+Object(p.Y)(t))}function QE(e,t){var n=(e._targets||[]).filter((function(e){var n=e._update;return n&&n.handler===t}));return n.length?n[0]:null}function ek(e,t,n,r){var i=QE(n,r);return i||((i=wO(this,(function(){r(t,n.value)}))).handler=r,e.on(n,null,i)),e}function tk(e,t,n){var r=QE(t,n);return r&&t._targets.remove(r),e}JE.evaluate=async function(e,t,n){if(await Ke.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=Kw(r=this),o=Yw(r),a=Xw(r),r._renderer.background(r._background),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach((function(e){try{e(o,a)}catch(e){r.error(e)}}))),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}var r,i,o,a;return n&&m(this,n),this},JE.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},JE.container=function(){return this._el},JE.scenegraph=function(){return this._scenegraph},JE.origin=function(){return this._origin.slice()},JE.signal=function(e,t,n){var r=ZE(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},JE.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},JE.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},JE.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},JE.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},JE.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},JE.renderer=function(e){return arguments.length?(Rc(e)||Object(p.n)("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},JE.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},JE.loader=function(e){return arguments.length?(e!==this._loader&&(Ke.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},JE.resize=function(){return this._autosize=1,this.touch(ZE(this,"autosize"))},JE._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},JE._resizeView=function(e,t,n,r,i,o){this.runAfter((function(a){var s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(FE,n,qE),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(BE,r,qE),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(e=>e.resize())}),!1,1)},JE.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=wO(this,t)).raw=t),this._handler.on(e,r),this},JE.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},JE.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},JE.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},JE.addSignalListener=function(e,t){return ek(this,e,ZE(this,e),t)},JE.removeSignalListener=function(e,t){return tk(this,ZE(this,e),t)},JE.addDataListener=function(e,t){return ek(this,e,Vw(this,e).values,t)},JE.removeDataListener=function(e,t){return tk(this,Vw(this,e).values,t)},JE.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},JE.timer=function(e,t){this._timers.push(function(e,t,n){var r=new rx,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?tx():+n,r.restart((function o(a){a+=i,r.restart(o,i+=t,n),e(a)}),t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},JE.events=function(e,t,n){var r,i=this,o=new z(n),a=function(n,r){i.runAsync(null,()=>{e===Zw&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(Jw(i,n,r))})};if(e===Qw)nO(i,"timer",t)&&i.timer(a,t);else if(e===Zw)nO(i,"view",t)&&i.addEventListener(t,a,tO);else if(e===eO?nO(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&nO(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,l=r.length;s<l;++s)r[s].addEventListener(t,a);i._eventListeners.push({type:t,sources:r,handler:a})}else i.warn("Can not resolve event source: "+e);return o},JE.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},JE.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",rO),iO,oO(e)),this.on(this.events("view","mouseout",rO),iO,oO(t)),this},JE.data=function(e,t){return arguments.length<2?Vw(this,e).values.value:Gw.call(this,e,T().remove(p.fb).insert(t))},JE.change=Gw,JE.insert=function(e,t){return Gw.call(this,e,T().insert(t))},JE.remove=function(e,t){return Gw.call(this,e,T().remove(t))},JE.scale=function(e){var t=this._runtime.scales;return Object(p.v)(t,e)||Object(p.n)("Unrecognized scale or projection: "+e),t[e].value},JE.initialize=function(e,t){var n,r,i=this,o=i._renderType,a=i._eventConfig.bind,s=Rc(o);return e=i._el=e?OO(i,e):null,s||i.error("Unrecognized renderer type: "+o),n=s.handler||Xu,r=e?s.renderer:s.headless,i._renderer=r?_O(i,i._renderer,e,r):null,i._handler=function(e,t,n,r){var i=new r(e.loader(),wO(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Kw(e),e);return t&&t.handlers().forEach((function(e){i.on(e.type,e.handler)})),i}(i,i._handler,e,n),i._redraw=!0,e&&"none"!==a&&(t=t?i._elBind=OO(i,t):e.appendChild(aO("div",{class:"vega-bindings"})),i._bind.forEach((function(e){e.param.element&&"container"!==a&&(e.element=OO(i,e.param.element))})),i._bind.forEach((function(e){hO(i,e.element||t,e)}))),i},JE.toImageURL=async function(e,t){e!==Ic.Canvas&&e!==Ic.SVG&&e!==Ic.PNG&&Object(p.n)("Unrecognized image type: "+e);const n=await EO(this,e,t);return e===Ic.SVG?(r=n.svg(),i=new Blob([r],{type:"image/svg+xml"}),window.URL.createObjectURL(i)):n.canvas().toDataURL("image/png");var r,i},JE.toCanvas=async function(e,t){return(await EO(this,Ic.Canvas,e,t)).canvas()},JE.toSVG=async function(e){return(await EO(this,Ic.SVG,e)).svg()},JE.getState=function(e){return this._runtime.getState(e||{data:WE,signals:VE,recurse:!0})},JE.setState=function(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},e=>{e._trigger=!0}),this};var nk=function(e,t){return e=e||t.autosize,Object(p.F)(e)?e:{type:e||"pad"}},rk=function(e,t){return e=e||t.padding,Object(p.F)(e)?{top:ik(e.top),bottom:ik(e.bottom),left:ik(e.left),right:ik(e.right)}:{top:n=ik(e),bottom:n,left:n,right:n};var n};function ik(e){return+e||0}var ok=["value","update","init","react","bind"];function ak(e,t){Object(p.n)(e+' for "outer" push: '+Object(p.Y)(t))}var sk=function(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||ak("No prior signal definition",n),ok.forEach((function(t){void 0!==e[t]&&ak("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}},lk=function(e,t,n){var r,i,o={};try{e=Object(p.H)(e)?e:Object(p.Y)(e)+"",r=Object(kO.g)(e)}catch(t){Object(p.n)("Expression parse error: "+e)}return r.visit((function(e){if(e.type===kO.a){var n=e.callee.name,r=wE.visitors[n];r&&r(n,e.arguments,t,o)}})),(i=OE(r)).globals.forEach((function(e){var n="$"+e;!Object(p.v)(o,n)&&t.getSignal(e)&&(o[n]=t.signalRef(e))})),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:o}};function uk(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function ck(e,t,n,r){return new uk(e,t,n,r)}function fk(e,t){return ck("operator",e,t)}function dk(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function pk(e,t){return t?{$field:e,$name:t}:{$field:e}}var hk=pk("key");function mk(e,t){return{$compare:e,$order:t}}var gk="descending";function bk(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var yk="scope",vk="view";function xk(e){return e&&e.signal}function _k(e){if(xk(e))return!0;if(Object(p.F)(e))for(var t in e)if(_k(e[t]))return!0;return!1}function wk(e,t){return null!=e?e:t}function Ok(e){return e&&e.signal||e}var Ek="timer";function kk(e,t){return(e.merge?Sk:e.stream?Tk:e.type?jk:Object(p.n)("Invalid stream specification: "+Object(p.Y)(e)))(e,t)}function Sk(e,t){var n=Ak({merge:e.merge.map(e=>kk(e,t))},e,t);return t.addStream(n).id}function Tk(e,t){var n=Ak({stream:kk(e.stream,t)},e,t);return t.addStream(n).id}function jk(e,t){var n,r,i;return e.type===Ek?(n=t.event(Ek,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((i=e.source)===yk?vk:i||vk,e.type),r=Ak({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function Ak(e,t,n){var r,i,o,a,s=t.between;return s&&(2!==s.length&&Object(p.n)('Stream "between" parameter must have 2 entries: '+Object(p.Y)(t)),e.between=[kk(s[0],n),kk(s[1],n)]),s=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&s.push((r=t.marktype,i=t.markname,o=t.markrole,(a="event.item")+(r&&"*"!==r?"&&"+a+".mark.marktype==='"+r+"'":"")+(o?"&&"+a+".mark.role==='"+o+"'":"")+(i?"&&"+a+".mark.name==='"+i+"'":""))),t.source===yk&&s.push("inScope(event.item)"),s.length&&(e.filter=lk("("+s.join(")&&(")+")").$expr),null!=(s=t.throttle)&&(e.throttle=+s),null!=(s=t.debounce)&&(e.debounce=+s),t.consume&&(e.consume=!0),e}var Pk=n(20),Ck=function(e,t,n){var r=e.events,i=e.update,o=e.encode,a=[],s={target:n};r||Object(p.n)("Signal update missing events specification."),Object(p.H)(r)&&(r=Object(Pk.a)(r,t.isSubscope()?yk:vk)),r=Object(p.i)(r).filter(e=>e.signal||e.scale?(a.push(e),0):1),a.length>1&&(a=[Nk(a)]),r.length&&a.push(r.length>1?{merge:r}:r[0]),null!=o&&(i&&Object(p.n)("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(p.Y)(o)+")"),s.update=Object(p.H)(i)?lk(i,t,"var datum=event.item&&event.item.datum;"):null!=i.expr?lk(i.expr,t,"var datum=event.item&&event.item.datum;"):null!=i.value?i.value:null!=i.signal?{$expr:"_.value",$params:{value:t.signalRef(i.signal)}}:Object(p.n)("Invalid signal update specification."),e.force&&(s.options={force:!0}),a.forEach((function(e){t.addUpdate(Object(p.o)(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):kk(e,t)}}(e,t),s))}))};function Nk(e){return{signal:"["+e.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function Mk(e){return function(t,n,r){return ck(e,n,t||void 0,r)}}var Ik=Mk("aggregate"),Dk=Mk("axisticks"),Rk=Mk("bound"),zk=Mk("collect"),Lk=Mk("compare"),Fk=Mk("datajoin"),Bk=Mk("encode"),Uk=Mk("expression"),qk=(Mk("extent"),Mk("facet")),$k=Mk("field"),Hk=Mk("key"),Wk=Mk("legendentries"),Vk=Mk("load"),Gk=Mk("mark"),Yk=Mk("multiextent"),Xk=Mk("multivalues"),Kk=Mk("overlap"),Jk=Mk("params"),Zk=Mk("prefacet"),Qk=Mk("projection"),eS=Mk("proxy"),tS=Mk("relay"),nS=Mk("render"),rS=Mk("scale"),iS=Mk("sieve"),oS=Mk("sortitems"),aS=Mk("viewlayout"),sS=Mk("values"),lS=0,uS={min:"min",max:"max",count:"sum"};function cS(e,t){var n=e.type||"linear";(function(e){switch(e){case Pf:case Cf:case Nf:case Mf:case If:case Df:case Rf:case zf:case Lf:case Bf:case Uf:case qf:case $f:case Hf:case Wf:case Vf:return!0}return!1})(n)||Object(p.n)("Unrecognized scale type: "+Object(p.Y)(n)),t.addScale(e.name,{type:n,domain:void 0})}function fS(e,t){var n,r,i=t.getScale(e.name).params;for(n in i.domain=mS(e.domain,e,t),null!=e.range&&(i.range=function e(t,n,r){var i=t.range,o=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(p.H)(i)){if(o&&Object(p.v)(o,i))return t=Object(p.o)({},t,{range:o[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Jf(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(p.n)("Unrecognized scale range value: "+Object(p.Y)(i))}else{if(i.scheme)return r.scheme=Object(p.A)(i.scheme)?pS(i.scheme,n):dS(i.scheme,n),i.extent&&(r.schemeExtent=pS(i.extent,n)),void(i.count&&(r.schemeCount=dS(i.count,n)));if(i.step)return void(r.rangeStep=dS(i.step,n));if(Jf(t.type)&&!Object(p.A)(i))return mS(i,t,n);Object(p.A)(i)||Object(p.n)("Unsupported range type: "+Object(p.Y)(i))}return i.map(e=>(Object(p.A)(e)?pS:dS)(e,n))}(e,t,i)),null!=e.interpolate&&function(e,t){t.interpolate=dS(e.type||e),null!=e.gamma&&(t.interpolateGamma=dS(e.gamma))}(e.interpolate,i),null!=e.nice&&(i.nice=(r=e.nice,Object(p.F)(r)?{interval:dS(r.interval),step:dS(r.step)}:dS(r))),null!=e.bins&&(i.bins=function(e,t){return e.signal||Object(p.A)(e)?pS(e,t):t.objectProperty(e)}(e.bins,t)),e)Object(p.v)(i,n)||"name"===n||(i[n]=dS(e[n],t))}function dS(e,t){return Object(p.F)(e)?e.signal?t.signalRef(e.signal):Object(p.n)("Unsupported object: "+Object(p.Y)(e)):e}function pS(e,t){return e.signal?t.signalRef(e.signal):e.map(e=>dS(e,t))}function hS(e){Object(p.n)("Can not find data set: "+Object(p.Y)(e))}function mS(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Object(p.A)(e)?gS:e.fields?yS:bS)(e,t,n);null==t.domainMin&&null==t.domainMax||Object(p.n)("No scale domain defined for domainMin/domainMax to override.")}function gS(e,t,n){return e.map((function(e){return dS(e,n)}))}function bS(e,t,n){var r=n.getData(e.data);return r||hS(e.data),Jf(t.type)?r.valuesRef(n,e.field,xS(e.sort,!1)):Gf(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function yS(e,t,n){var r=e.data,i=e.fields.reduce((function(e,t){return t=Object(p.H)(t)?{data:r,field:t}:Object(p.A)(t)||t.signal?function(e,t){var n="_:vega:_"+lS++,r=zk({});if(Object(p.A)(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+Object(p.Y)(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,iS({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(Jf(t.type)?vS:Gf(t.type)?_S:wS)(e,n,i)}function vS(e,t,n){var r,i,o,a,s,l=xS(e.sort,!0);return r=n.map((function(e){var n=t.getData(e.data);return n||hS(e.data),n.countsRef(t,e.field,l)})),i={groupby:hk,pulse:r},l&&(o=l.op||"count",s=l.field?bk(o,l.field):"count",i.ops=[uS[o]],i.fields=[t.fieldRef(s)],i.as=[s]),o=t.add(Ik(i)),a=t.add(zk({pulse:dk(o)})),s=t.add(sS({field:hk,sort:t.sortRef(l),pulse:dk(a)})),dk(s)}function xS(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!uS[e.op]&&Object(p.n)("Multiple domain scales can not be sorted using "+e.op):Object(p.n)("No field provided for sort aggregate op: "+e.op):Object(p.F)(e)?e.field="key":e={field:"key"}),e}function _S(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||hS(e.data),n.domainRef(t,e.field)}));return dk(t.add(Xk({values:r})))}function wS(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||hS(e.data),n.extentRef(t,e.field)}));return dk(t.add(Yk({extents:r})))}function OS(e,t,n){return Object(p.A)(e)?e.map((function(e){return OS(e,t,n)})):Object(p.F)(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Object(p.n)("Unsupported parameter object: "+Object(p.Y)(e)):e}const ES="vertical",kS="start",SS="end",TS="value",jS="guide-label",AS="group-title",PS="group-subtitle",CS="symbol",NS="gradient",MS="discrete",IS=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],DS={name:1,style:1,interactive:1},RS={value:0},zS={value:1};var LS=Object(p.cb)(["rule"]),FS=Object(p.cb)(["group","image","rect"]),BS=function(e,t){var n="";return LS[t]?n:(e.x2&&(e.x?(FS[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(FS[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},US=function(e,t,n,r){var i=lk(e,t);return i.$fields.forEach((function(e){r[e]=1})),Object(p.o)(n,i.$params),i.$expr},qS=function(e,t,n,r){return function e(t,n,r,i){var o,a,s;if(t.signal)o="datum",s=US(t.signal,n,r,i);else if(t.group||t.parent){for(a=Math.max(1,t.level||1),o="item";a-- >0;)o+=".mark.group";t.parent?(s=t.parent,o+=".datum"):s=t.group}else t.datum?(o="datum",s=t.datum):Object(p.n)("Invalid field reference: "+Object(p.Y)(t));t.signal||(Object(p.H)(s)?(i[s]=1,s=Object(p.X)(s).map(p.Y).join("][")):s=e(s,n,r,i));return o+"["+s+"]"}(Object(p.F)(e)?e:{datum:e},t,n,r)};var $S=function(e,t,n,r){return Object(p.F)(e)?"("+VS(null,e,t,n,r)+")":e},HS=function(e,t,n,r,i){var o,a,s,l=WS(e.scale,n,r,i);return null!=e.range?(a=l+".range()",t=0===(o=+e.range)?a+"[0]":"($="+a+","+(1===o?"$[$.length-1]":"$[0]+"+o+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=l+"("+t+")"),e.band&&(s=function(e,t){if(!Object(p.H)(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=l+".bandwidth",o=e.band.signal?a+"()*"+$S(e.band,n,r,i):a+"()"+(1===(o=+e.band)?"":"*"+o),s<0&&(o="("+a+"?"+o+":0)"),t=(t?t+"+":"")+o,e.extra&&(t="(datum.extra?"+l+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t};function WS(e,t,n,r){var i;if(Object(p.H)(e))i=dE+e,Object(p.v)(n,i)||(n[i]=t.scaleRef(e)),i=Object(p.Y)(i);else{for(i in t.scales)n[dE+i]=t.scaleRef(i);i=Object(p.Y)(dE)+"+"+(e.signal?"("+US(e.signal,t,n,r)+")":qS(e,t,n,r))}return"_["+i+"]"}var VS=function(e,t,n,r,i){if(null!=t.gradient)return function(e,t,n,r){return"this.gradient("+WS(e.gradient,t,n,r)+","+Object(p.Y)(e.start)+","+Object(p.Y)(e.stop)+","+Object(p.Y)(e.count)+")"}(t,n,r,i);var o=t.signal?US(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,o,a){return"this."+e+"("+[VS(null,i,t,n,r),VS(null,o,t,n,r),VS(null,a,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null!=t.field?qS(t.field,n,r,i):void 0!==t.value?Object(p.Y)(t.value):void 0;return null!=t.scale&&(o=HS(t,o,n,r,i)),void 0===o&&(o=null),null!=t.exponent&&(o="Math.pow("+o+","+$S(t.exponent,n,r,i)+")"),null!=t.mult&&(o+="*"+$S(t.mult,n,r,i)),null!=t.offset&&(o+="+"+$S(t.offset,n,r,i)),t.round&&(o="Math.round("+o+")"),o},GS=function(e,t,n){const r=e+"["+Object(p.Y)(t)+"]";return`$=${n};if(${r}!==$)${r}=$,m=1;`},YS=function(e,t,n,r,i){var o="";return t.forEach((function(t){var a=VS(e,t,n,r,i);o+=t.test?US(t.test,n,r,i)+"?"+a+":":a})),":"===Object(p.T)(o)&&(o+="null"),GS("o",e,o)};function XS(e,t,n,r){var i,o,a,s={},l="var o=item,datum=o.datum,m=0,$;";for(i in e)o=e[i],Object(p.A)(o)?l+=YS(i,o,r,n,s):(a=VS(i,o,r,n,s),l+=GS("o",i,a));return l+=BS(e,t),{$expr:l+="return m;",$fields:Object.keys(s),$output:Object.keys(e)}}var KS="mark",JS="frame",ZS="title-text",QS="title-subtitle";function eT(e){return Object(p.F)(e)&&!Object(p.A)(e)?Object(p.o)({},e):{value:e}}function tT(e,t,n,r){return null!=n?(Object(p.F)(n)&&!Object(p.A)(n)?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function nT(e,t,n){for(let n in t)tT(e,n,t[n]);for(let t in n)tT(e,t,n[t],"update")}function rT(e,t,n){for(var r in t)n&&Object(p.v)(n,r)||(e[r]=Object(p.o)(e[r]||{},t[r]));return e}function iT(e,t,n,r,i,o){var a,s;for(s in(o=o||{}).encoders={$encode:a={}},e=function(e,t,n,r,i){var o,a,s,l={},u={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(a in s=n===JS?i.group:n===KS?Object(p.o)({},i.mark,i[t]):null)aT(a,e)||("fill"===a||"stroke"===a)&&(aT("fill",e)||aT("stroke",e))||oT(l,a,s[a]);for(a in Object(p.i)(r).forEach((function(t){var n=i.style&&i.style[t];for(var r in n)aT(r,e)||oT(l,r,n[r])})),e=Object(p.o)({},e),l)(s=l[a]).signal?(o=o||{})[a]=s:u[a]=s;e.enter=Object(p.o)(u,e.enter),o&&(e.update=Object(p.o)(o,e.update));return e}(e,t,n,r,i.config))a[s]=XS(e[s],t,o,i);return o}function oT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}function aT(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var sT=function(e,t,n,r,i,o,a){return{type:e,name:a?a.name:void 0,role:t,style:a&&a.style||n,key:r,from:i,interactive:!(!a||!a.interactive),encode:rT(o,a,DS)}};function lT(e,t){const n=(n,r)=>wk(e[n],wk(t[n],r));return n.isVertical=n=>ES===wk(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>wk(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>wk(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>wk(e.columns,wk(t.columns,+n.isVertical(!0))),n}function uT(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function cT(e,t,n){return`item.anchor === "${kS}" ? ${e} : item.anchor === "${SS}" ? ${t} : ${n}`}const fT=cT(Object(p.Y)("left"),Object(p.Y)("right"),Object(p.Y)("center"));var dT="group",pT="text",hT=function(e,t,n,r){var i,o,a,s,l,u,c=lT(e,n),f=c.isVertical(),d=c.gradientThickness(),h=c.gradientLength();return f?(a=[0,1],s=[0,0],l=d,u=h):(a=[0,0],s=[1,0],l=h,u=d),nT(i={enter:o={opacity:RS,x:RS,y:RS,width:eT(l),height:eT(u)},update:Object(p.o)({},o,{opacity:zS,fill:{gradient:t,start:a,stop:s}}),exit:{opacity:RS}},{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),sT("rect","legend-gradient",null,void 0,void 0,i,r)},mT=function(e,t,n,r,i){var o,a,s,l,u,c,f=lT(e,n),d=f.isVertical(),h=f.gradientThickness(),m=f.gradientLength(),g="";return d?(s="y",u="y2",l="x",c="width",g="1-"):(s="x",u="x2",l="y",c="height"),(a={opacity:RS,fill:{scale:t,field:TS}})[s]={signal:g+"datum.perc",mult:m},a[l]=RS,a[u]={signal:g+"datum.perc2",mult:m},a[c]=eT(h),nT(o={enter:a,update:Object(p.o)({},a,{opacity:zS}),exit:{opacity:RS}},{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),sT("rect","legend-band",null,TS,i,o,r)};var gT=function(e,t,n,r){var i,o,a,s,l,u=lT(e,t),c=u.isVertical(),f=eT(u.gradientThickness()),d=u.gradientLength(),p=u("labelOverlap"),h=u("labelSeparation"),m="";return nT(i={enter:o={opacity:RS},update:a={opacity:zS,text:{field:"label"}},exit:{opacity:RS}},{fill:u("labelColor"),fillOpacity:u("labelOpacity"),font:u("labelFont"),fontSize:u("labelFontSize"),fontStyle:u("labelFontStyle"),fontWeight:u("labelFontWeight"),limit:wk(e.labelLimit,t.gradientLabelLimit)}),c?(o.align={value:"left"},o.baseline=a.baseline={signal:'datum.perc<=0?"bottom":datum.perc>=1?"top":"middle"'},s="y",l="x",m="1-"):(o.align=a.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},o.baseline={value:"top"},s="x",l="y"),o[s]=a[s]={signal:m+"datum.perc",mult:d},o[l]=a[l]=f,f.offset=wk(e.labelOffset,t.gradientLabelOffset)||0,e=sT(pT,"legend-label",jS,TS,r,i,n),p&&(e.overlap={separation:h,method:p,order:"datum.index"}),e},bT=function(e,t,n,r,i,o,a,s){return{type:dT,name:n,role:e,style:t,from:r,interactive:i||!1,encode:o,marks:a,layout:s}},yT=function(e,t,n,r,i){var o,a,s,l,u,c,f,d=lT(e,t),p=n.entries,h=!(!p||!p.interactive),m=p?p.name:void 0,g=d("clipHeight"),b=d("symbolOffset"),y={data:"value"},v={},x=`${i} ? datum.offset : datum.size`,_=g?eT(g):{field:"size"},w="datum.index",O=`max(1, ${i})`;_.mult=.5,v={enter:o={opacity:RS,x:{signal:x,mult:.5,offset:b},y:_},update:a={opacity:zS,x:o.x,y:o.y},exit:{opacity:RS}};var E=null,k=null;return e.fill||(E=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),nT(v,{fill:d("symbolFillColor",E),shape:d("symbolType"),size:d("symbolSize"),stroke:d("symbolStrokeColor",k),strokeDash:d("symbolDash"),strokeDashOffset:d("symbolDashOffset"),strokeWidth:d("symbolStrokeWidth")},{opacity:d("symbolOpacity")}),IS.forEach((function(t){e[t]&&(a[t]=o[t]={scale:e[t],field:TS})})),l=sT("symbol","legend-symbol",null,TS,y,v,n.symbols),g&&(l.clip=!0),(s=eT(b)).offset=d("labelOffset"),nT(v={enter:o={opacity:RS,x:{signal:x,offset:s},y:_},update:a={opacity:zS,text:{field:"label"},x:o.x,y:o.y},exit:{opacity:RS}},{align:d("labelAlign"),baseline:d("labelBaseline"),fill:d("labelColor"),fillOpacity:d("labelOpacity"),font:d("labelFont"),fontSize:d("labelFontSize"),fontStyle:d("labelFontStyle"),fontWeight:d("labelFontWeight"),limit:d("labelLimit")}),u=sT(pT,"legend-label",jS,TS,y,v,n.labels),v={enter:{noBound:{value:!g},width:RS,height:g?eT(g):RS,opacity:RS},exit:{opacity:RS},update:a={opacity:zS,row:{signal:null},column:{signal:null}}},d.isVertical(!0)?(c=`ceil(item.mark.items.length / ${O})`,a.row.signal=`${w}%${c}`,a.column.signal=`floor(${w} / ${c})`,f={field:["row",w]}):(a.row.signal=`floor(${w} / ${O})`,a.column.signal=`${w} % ${O}`,f={field:w}),a.column.signal=`${i}?${a.column.signal}:${w}`,(e=bT("scope",null,m,r={facet:{data:r,name:"value",groupby:"index"}},h,rT(v,p,DS),[l,u])).sort=f,e};const vT='item.orient === "left"',xT='item.orient === "right"',_T=`(${vT} || ${xT})`,wT=`datum.vgrad && ${_T}`,OT=cT('"top"','"bottom"','"middle"'),ET=`datum.vgrad && ${xT} ? (${cT('"right"','"left"','"center"')}) : (${_T} && !(datum.vgrad && ${vT})) ? "left" : ${fT}`,kT=`item._anchor || (${_T} ? "middle" : "start")`,ST=`${wT} ? (${vT} ? -90 : 90) : 0`,TT=`${_T} ? (datum.vgrad ? (${xT} ? "bottom" : "top") : ${OT}) : "top"`;var jT=function(e,t){var n;return Object(p.F)(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+AT(e.path)+")":e.sphere&&(n="geoShape("+AT(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e};function AT(e){return Object(p.F)(e)&&e.signal?e.signal:Object(p.Y)(e)}var PT=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===dT?"scope":t||KS:t},CT=function(e){return{marktype:e.type,name:e.name||void 0,role:e.role||PT(e),zindex:+e.zindex||void 0}},NT=function(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e},MT=function(e,t){var n=nt(e.type);n||Object(p.n)("Unrecognized transform type: "+Object(p.Y)(e.type));var r=ck(n.type.toLowerCase(),null,IT(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r};function IT(e,t,n){var r,i,o,a={};for(i=0,o=e.params.length;i<o;++i)a[(r=e.params[i]).name]=DT(r,t,n);return a}function DT(e,t,n){var r=e.type,i=t[e.name];return"index"===r?function(e,t,n){Object(p.H)(t.from)||Object(p.n)('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){var r=t[e.name];return e.array?(Object(p.A)(r)||Object(p.n)("Expected an array of sub-parameters. Instead: "+Object(p.Y)(r)),r.map((function(t){return zT(e,t,n)}))):zT(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!xk(i)?i.map((function(t){return RT(e,t,n)})):RT(e,i,n):void(e.required&&Object(p.n)("Missing required "+Object(p.Y)(t.type)+" parameter: "+Object(p.Y)(e.name)))}function RT(e,t,n){var r=e.type;if(xk(t))return LT(r)?Object(p.n)("Expression references can not be signals."):FT(r)?n.fieldRef(t):BT(r)?n.compareRef(t):n.signalRef(t.signal);var i,o=e.expr||FT(r);return o&&((i=t)&&i.expr)?n.exprRef(t.expr,t.as):o&&function(e){return e&&e.field}(t)?pk(t.field,t.as):LT(r)?lk(t,n):function(e){return"data"===e}(r)?dk(n.getData(t).values):FT(r)?pk(t):BT(r)?n.compareRef(t):t}function zT(e,t,n){var r,i,o,a,s;for(a=0,s=e.params.length;a<s;++a){for(o in(i=e.params[a]).key)if(i.key[o]!==t[o]){i=null;break}if(i)break}return i||Object(p.n)("Unsupported parameter: "+Object(p.Y)(t)),r=Object(p.o)(IT(i,t,n),i.key),dk(n.add(Jk(r)))}function LT(e){return"expr"===e}function FT(e){return"field"===e}function BT(e){return"compare"===e}function UT(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:dk(t.getData(e.data).output)}function qT(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}qT.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],o=t[n-1],a=t[n-2],s=null;for(i&&"load"===i.type&&(i=t[1]),e.add(t[0]);r<n;++r)t[r].params.pulse=dk(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(s=t[r]);return new qT(e,i,a,o,s)};var $T=qT.prototype;function HT(e){return Object(p.H)(e)?e:null}function WT(e,t,n){var r,i=bk(n.op,n.field);if(t.ops){for(var o=0,a=t.as.length;o<a;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function VT(e,t,n,r,i,o,a){var s,l,u=t[n]||(t[n]={}),c=function(e){return Object(p.F)(e)?(e.order===gk?"-":"+")+bk(e.op,e.field):""}(o),f=HT(i);if(null!=f&&(e=t.scope,s=u[f+=c?"|"+c:""]),!s){var d=o?{field:hk,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:dk(t.output)};c&&(d.sort=e.sortRef(o)),l=e.add(ck(r,void 0,d)),a&&(t.index[i]=l),s=dk(l),null!=f&&(u[f]=s)}return s}$T.countsRef=function(e,t,n){var r,i,o,a=this.counts||(this.counts={}),s=HT(t);return null!=s&&(e=this.scope,r=a[s]),r?n&&n.field&&WT(e,r.agg.params,n):(o={groupby:e.fieldRef(t,"key"),pulse:dk(this.output)},n&&n.field&&WT(e,o,n),i=e.add(Ik(o)),r=e.add(zk({pulse:dk(i)})),r={agg:i,ref:dk(r)},null!=s&&(a[s]=r)),r.ref},$T.tuplesRef=function(){return dk(this.values)},$T.extentRef=function(e,t){return VT(e,this,"extent","extent",t,!1)},$T.domainRef=function(e,t){return VT(e,this,"domain","values",t,!1)},$T.valuesRef=function(e,t,n){return VT(e,this,"vals","values",t,n||!0)},$T.lookupRef=function(e,t){return VT(e,this,"lookup","tupleindex",t,!1)},$T.indataRef=function(e,t){return VT(e,this,"indata","tupleindex",t,!0,!0)};var GT=function(e,t,n){var r,i,o=e.remove,a=e.insert,s=e.toggle,l=e.modify,u=e.values,c=t.add(fk());r="if("+e.trigger+',modify("'+n+'",'+[a,o,s,l,u].map((function(e){return null==e?"null":e})).join(",")+"),0)",i=lk(r,t),c.update=i.$expr,c.params=i.$params},YT=function(e,t){var n,r,i,o,a,s,l,u,c,f,d,h,m,g,b=PT(e),y=e.type===dT,v=e.from&&e.from.facet,x=e.layout||"scope"===b||b===JS,_=b===KS||x||v,w=e.overlap;i=function(e,t,n){var r,i,o,a,s;return e?(r=e.facet)&&(t||Object(p.n)("Only group marks can be faceted."),null!=r.field?a=s=UT(r,n):(e.data?s=dk(n.getData(e.data).aggregate):((o=MT(Object(p.o)({type:"aggregate",groupby:Object(p.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),o.params.pulse=UT(r,n),a=s=dk(n.add(o))),i=n.keyRef(r.groupby,!0))):a=dk(n.add(zk(null,[{}]))),a||(a=UT(e,n)),{key:i,pulse:a,parent:s}}(e.from,y,t),f=dk(r=t.add(Fk({key:i.key||(e.key?pk(e.key):void 0),pulse:i.pulse,clean:!y}))),r=o=t.add(zk({pulse:f})),r=t.add(Gk({markdef:CT(e),interactive:NT(e.interactive,t),clip:jT(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:dk(r)})),d=dk(r),(r=a=t.add(Bk(iT(e.encode,e.type,b,e.style,t,{mod:!1,pulse:d})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){const n=MT(e,t),i=n.metadata;(i.generates||i.changes)&&Object(p.n)("Mark transforms should not generate new data."),i.nomod||(a.params.mod=!0),n.params.pulse=dk(r),t.add(r=n)})),e.sort&&(r=t.add(oS({sort:t.compareRef(e.sort),pulse:dk(r)}))),h=dk(r),(v||x)&&(m=dk(x=t.add(aS({layout:t.objectProperty(e.layout),legends:t.legends,mark:d,pulse:h})))),g=dk(s=t.add(Rk({mark:d,pulse:m||h}))),y&&(_&&((n=t.operators).pop(),x&&n.pop()),t.pushState(h,m||g,f),v?function(e,t,n){var r,i,o,a,s=e.from.facet,l=s.name,u=UT(s,t);s.name||Object(p.n)("Facet must have a name: "+Object(p.Y)(s)),s.data||Object(p.n)("Facet must reference a data set: "+Object(p.Y)(s)),s.field?a=t.add(Zk({field:t.fieldRef(s.field),pulse:u})):s.groupby?a=t.add(qk({key:t.keyRef(s.groupby),group:dk(t.proxy(n.parent)),pulse:u})):Object(p.n)("Facet must specify groupby or field: "+Object(p.Y)(s)),i=(r=t.fork()).add(zk()),o=r.add(iS({pulse:dk(i)})),r.addData(l,new qT(r,i,i,o)),r.addSignal("parent",null),a.params.subflow={$subflow:aj(e,r).toRuntime()}}(e,t,i):_?function(e,t,n){var r=t.add(Zk({pulse:n.pulse})),i=t.fork();i.add(iS()),i.addSignal("parent",null),r.params.subflow={$subflow:aj(e,i).toRuntime()}}(e,t,i):aj(e,t),t.popState(),_&&(x&&n.push(x),n.push(s))),w&&(g=function(e,t,n){var r,i=e.method,o=e.bound,a=e.separation,s={separation:xk(a)?n.signalRef(a.signal):a,method:xk(i)?n.signalRef(i.signal):i,pulse:t};e.order&&(s.sort=n.compareRef({field:e.order}));o&&(r=o.tolerance,s.boundTolerance=xk(r)?n.signalRef(r.signal):+r,s.boundScale=n.scaleRef(o.scale),s.boundOrient=o.orient);return dk(n.add(Kk(s)))}(w,g,t)),l=t.add(nS({pulse:g})),u=t.add(iS({pulse:dk(l)},void 0,t.parent())),null!=e.name&&(c=e.name,t.addData(c,new qT(t,o,l,u)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&Object(p.n)("Marks only support modify triggers."),GT(e,t,c)})))};var XT=function(e,t){var n,r,i,o,a,s,l,u,c,f=t.config.legend,d=e.encode||{},h=d.legend||{},m=h.name||void 0,g=h.interactive,b=h.style,y=lT(e,f),v=IS.reduce((function(t,n){return t||e[n]}),0);return v||Object(p.n)("Missing valid scale for legend."),a=function(e,t){var n=e.type||CS;e.type||1!==function(e){return IS.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)||!e.fill&&!e.stroke||(n=Kf(t)?NS:Zf(t)?MS:CS);return n!==NS?n:Zf(t)?MS:NS}(e,t.scaleType(v)),s={title:null!=e.title,type:a,vgrad:"symbol"!==a&&y.isVertical()},l=dk(t.add(zk(null,[s]))),h=rT(function(e,t){var n={enter:{},update:{}};return nT(n,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:t.strokeWidth,strokeDash:t.strokeDash,x:e("legendX"),y:e("legendY")}),n}(y,f),h,DS),n={enter:{x:{value:0},y:{value:0}}},u=dk(t.add(Wk(i={type:a,scale:t.scaleRef(v),count:t.objectProperty(y("tickCount")),limit:t.property(y("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),a===NS?(o=[hT(e,v,f,d.gradient),gT(e,f,d.labels,u)],i.count=i.count||t.signalRef(`max(2,2*floor((${Ok(y.gradientLength())})/100))`)):a===MS?o=[mT(e,v,f,d.gradient,u),gT(e,f,d.labels,u)]:(r=function(e,t){const n=lT(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,f),o=[yT(e,f,d,u,Ok(r.columns))],i.size=function(e,t,n){var r=Ok(KT("size",e,n)),i=Ok(KT("strokeWidth",e,n)),o=Ok(function(e,t,n){return uT("fontSize",e)||function(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,jS));return lk(`max(ceil(sqrt(${r})+${i}),${o})`,t)}(e,t,o[0].marks)),o=[bT("legend-entry",null,null,l,g,n,o,r)],s.title&&o.push(function(e,t,n,r){var i,o=lT(e,t);return nT(i={enter:{opacity:RS},update:{opacity:zS,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:RS}},{orient:o("titleOrient"),_anchor:o("titleAnchor"),anchor:{signal:kT},angle:{signal:ST},align:{signal:ET},baseline:{signal:TT},text:e.title,fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),baseline:o("titleBaseline")}),sT(pT,"legend-title","guide-title",null,r,i,n)}(e,f,d.title,l)),c=bT("legend",b,m,l,g,h,o),e.zindex&&(c.zindex=e.zindex),YT(c,t)};function KT(e,t,n){return t[e]?`scale("${t[e]}",datum)`:uT(e,n[0].encode)}const JT='item.orient==="left"?-90:item.orient==="right"?90:0';var ZT=function(e,t){var n,r,i=lT(e=Object(p.H)(e)?{text:e}:e,t.config.title),o=e.encode||{},a=o.group||{},s=a.name||void 0,l=a.interactive,u=a.style,c=[];return n=dk(t.add(zk(null,[{}]))),c.push(function(e,t,n,r){var i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return nT(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),sT(pT,ZS,AS,null,r,a,n)}(e,i,function(e){const t=e.encode;return t&&t.title||Object(p.o)({name:e.name,interactive:e.interactive,style:e.style},t)}(e),n)),e.subtitle&&c.push(function(e,t,n,r){var i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return nT(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),sT(pT,QS,PS,null,r,a,n)}(e,i,o.subtitle,n)),r=bT("title",u,s,n,l,function(e,t){var n={enter:{},update:{}};return nT(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:fT},angle:{signal:JT},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),rT(n,t,DS)}(i,a),c),e.zindex&&(r.zindex=e.zindex),YT(r,t)};function QT(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(MT(e,t))})),e.on&&e.on.forEach((function(n){GT(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){var r,i,o,a,s,l=[],u=null,c=!1,f=!1;e.values?_k(e.values)||_k(e.format)?(l.push(tj(t,e)),l.push(u=ej())):l.push(u=ej({$ingest:e.values,$format:e.format})):e.url?_k(e.url)||_k(e.format)?(l.push(tj(t,e)),l.push(u=ej())):l.push(u=ej({$request:e.url,$format:e.format})):e.source&&(u=r=Object(p.i)(e.source).map((function(e){return dk(t.getData(e).output)})),l.push(null));for(i=0,o=n.length;i<o;++i)a=n[i],s=a.metadata,u||s.source||l.push(u=ej()),l.push(a),s.generates&&(f=!0),s.modifies&&!f&&(c=!0),s.source?u=a:s.changes&&(u=null);r&&(o=r.length-1,l[0]=tS({derive:c,pulse:o?r:r[0]}),(c||o)&&l.splice(1,0,ej()));u||l.push(ej());return l.push(iS({})),l}(e,t,n))}function ej(e){var t=zk({},e);return t.metadata={source:!0},t}function tj(e,t){return Vk({url:t.url?e.property(t.url):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}function nj(e,t){return{scale:e.scale,range:t}}var rj=function(e,t,n,r,i){var o,a,s,l,u,c,f,d,h,m=lT(e,t),g=e.orient,b=e.gridScale,y="left"===g||"top"===g?1:-1,v=function(e,t){if(1===t);else if(Object(p.F)(e)){for(var n=e=Object(p.o)({},e);null!=n.mult;){if(!Object(p.F)(n.mult))return n.mult*=t,e;n=n.mult=Object(p.o)({},n.mult)}n.mult=t}else e=t*(e||0);return e}(e.offset,y);return nT(o={enter:a={opacity:RS},update:l={opacity:zS},exit:s={opacity:RS}},{stroke:m("gridColor"),strokeDash:m("gridDash"),strokeDashOffset:m("gridDashOffset"),strokeOpacity:m("gridOpacity"),strokeWidth:m("gridWidth")}),u={scale:e.scale,field:TS,band:i.band,extra:i.extra,offset:i.offset,round:m("tickRound")},"top"===g||"bottom"===g?(c="x",f="y",h="height"):(c="y",f="x",h="width"),d=f+"2",l[c]=a[c]=s[c]=u,b?(l[f]=a[f]={scale:b,range:0,mult:y,offset:v},l[d]=a[d]={scale:b,range:1,mult:y,offset:v}):(l[f]=a[f]={value:0,offset:v},l[d]=a[d]={signal:h,mult:y,offset:v}),sT("rule","axis-grid",null,TS,r,o,n)};function ij(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}var oj=function(e,t){var n,r,i,o,a,s,l=function(e,t){var n=t.config,r=e.orient,i="top"===r||"bottom"===r?n.axisX:n.axisY,o=n["axis"+r[0].toUpperCase()+r.slice(1)],a="band"===t.scaleType(e.scale)&&n.axisBand;return i||o||a?Object(p.o)({},n.axis,i,o,a):n.axis}(e,t),u=e.encode||{},c=u.axis||{},f=c.name||void 0,d=c.interactive,h=c.style,m=lT(e,l),g=function(e){let t,n,r=e("tickBand"),i=e("tickOffset");return r?r.signal?(t={signal:`(${r.signal})==='extent'?1:0.5`},n={signal:`(${r.signal})==='extent'?true:false`},Object(p.F)(i)||(i={signal:`(${r.signal})==='extent'?0:${i}`})):"extent"===r?(t=1,n=!0,i=0):(t=.5,n=!1):(t=e("bandPosition"),n=e("tickExtra")),{extra:n,band:t,offset:i}}(m);return n={orient:e.orient,ticks:!!m("ticks"),labels:!!m("labels"),grid:!!m("grid"),domain:!!m("domain"),title:null!=e.title,translate:m("translate")},r=dk(t.add(zk({},[n]))),c=rT({update:{offset:eT(m("offset")||0),position:eT(wk(e.position,0)),titlePadding:eT(m("titlePadding")),minExtent:eT(m("minExtent")),maxExtent:eT(m("maxExtent")),range:{signal:`abs(span(range("${e.scale}")))`}}},u.axis,DS),i=dk(t.add(Dk({scale:t.scaleRef(e.scale),extra:t.property(g.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),s=[],n.grid&&s.push(rj(e,l,u.grid,i,g)),n.ticks&&(o=m("tickSize"),s.push(function(e,t,n,r,i,o){var a,s,l,u,c,f,d=lT(e,t),p=e.orient,h="left"===p||"top"===p?-1:1;return nT(a={enter:s={opacity:RS},update:u={opacity:zS},exit:l={opacity:RS}},{stroke:d("tickColor"),strokeDash:d("tickDash"),strokeDashOffset:d("tickDashOffset"),strokeOpacity:d("tickOpacity"),strokeWidth:d("tickWidth")}),(c=eT(i)).mult=h,f={scale:e.scale,field:TS,band:o.band,extra:o.extra,offset:o.offset,round:d("tickRound")},"top"===p||"bottom"===p?(u.y=s.y=RS,u.y2=s.y2=c,u.x=s.x=l.x=f):(u.x=s.x=RS,u.x2=s.x2=c,u.y=s.y=l.y=f),sT("rule","axis-tick",null,TS,r,a,n)}(e,l,u.ticks,i,o,g))),n.labels&&(o=n.ticks?o:0,s.push(function(e,t,n,r,i,o){var a,s,l,u,c,f,d,p,h,m,g=lT(e,t),b=e.orient,y="left"===b||"top"===b?-1:1,v="top"===b||"bottom"===b,x=e.scale,_=Ok(g("labelFlush")),w=Ok(g("labelFlushOffset")),O=0===_||!!_,E=g("labelAlign"),k=g("labelBaseline");return(l=eT(i)).mult=y,l.offset=eT(g("labelPadding")||0),l.offset.mult=y,u={scale:x,field:TS,band:.5,offset:o.offset},v?(c=E||(O?ij(x,_,'"left"','"right"','"center"'):"center"),f=k||("top"===b?"bottom":"top"),d=!E):(c=E||("right"===b?"left":"right"),f=k||(O?ij(x,_,'"top"','"bottom"','"middle"'):"middle"),d=!k),d=d&&O&&w?ij(x,_,"-("+w+")",w,0):null,nT(a={enter:s={opacity:RS,x:v?u:l,y:v?l:u},update:{opacity:zS,text:{field:"label"},x:s.x,y:s.y},exit:{opacity:RS,x:s.x,y:s.y}},{[v?"dx":"dy"]:d,align:c,baseline:f,angle:g("labelAngle"),fill:g("labelColor"),fillOpacity:g("labelOpacity"),font:g("labelFont"),fontSize:g("labelFontSize"),fontWeight:g("labelFontWeight"),fontStyle:g("labelFontStyle"),limit:g("labelLimit")}),p=g("labelBound"),h=g("labelOverlap"),m=g("labelSeparation"),e=sT(pT,"axis-label",jS,TS,r,a,n),(h||p)&&(e.overlap={separation:m,method:h,order:"datum.index",bound:p?{scale:x,orient:b,tolerance:p}:null}),e}(e,l,u.labels,i,o,g))),n.domain&&s.push(function(e,t,n,r){var i,o,a,s,l,u,c=lT(e,t),f=e.orient;return nT(i={enter:o={opacity:RS},update:a={opacity:zS},exit:{opacity:RS}},{stroke:c("domainColor"),strokeDash:c("domainDash"),strokeDashOffset:c("domainDashOffset"),strokeWidth:c("domainWidth"),strokeOpacity:c("domainOpacity")}),"top"===f||"bottom"===f?(s="x",u="y"):(s="y",u="x"),l=s+"2",o[u]=RS,a[s]=o[s]=nj(e,0),a[l]=o[l]=nj(e,1),sT("rule","axis-domain",null,null,r,i,n)}(e,l,u.domain,r)),n.title&&s.push(function(e,t,n,r){var i,o,a,s,l=lT(e,t),u=e.orient,c="left"===u||"top"===u?-1:1,f="top"===u||"bottom"===u;return i={enter:o={opacity:RS,anchor:eT(l("titleAnchor")),align:{signal:fT}},update:a=Object(p.o)({},o,{opacity:zS,text:eT(e.title)}),exit:{opacity:RS}},s={signal:`lerp(range("${e.scale}"), ${cT(0,1,.5)})`},f?(a.x=s,o.angle={value:0},o.baseline={value:"top"===u?"bottom":"top"}):(a.y=s,o.angle={value:90*c},o.baseline={value:"bottom"}),nT(i,{angle:l("titleAngle"),baseline:l("titleBaseline"),fill:l("titleColor"),fillOpacity:l("titleOpacity"),font:l("titleFont"),fontSize:l("titleFontSize"),fontStyle:l("titleFontStyle"),fontWeight:l("titleFontWeight"),limit:l("titleLimit"),lineHeight:l("titleLineHeight")},{align:l("titleAlign")}),!tT(i,"x",l("titleX"),"update")&&!f&&!aT("x",n)&&(i.enter.auto={value:!0}),!tT(i,"y",l("titleY"),"update")&&f&&!aT("y",n)&&(i.enter.auto={value:!0}),sT(pT,"axis-title","guide-title",null,r,i,n)}(e,l,u.title,r)),a=bT("axis",h,f,r,d,c,s),e.zindex&&(a.zindex=e.zindex),YT(a,t)},aj=function(e,t,n){var r=Object(p.i)(e.signals),i=Object(p.i)(e.scales);return n||r.forEach(e=>sk(e,t)),Object(p.i)(e.projections).forEach(e=>(function(e,t){var n=t.config.projection||{},r={};for(var i in e)"name"!==i&&(r[i]=OS(e[i],i,t));for(i in n)null==r[i]&&(r[i]=OS(n[i],i,t));t.addProjection(e.name,r)})(e,t)),i.forEach(e=>cS(e,t)),Object(p.i)(e.data).forEach(e=>QT(e,t)),i.forEach(e=>fS(e,t)),(n||r).forEach(e=>(function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?Object(p.n)("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=lk(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){Ck(e,t,n.id)}))})(e,t)),Object(p.i)(e.axes).forEach(e=>oj(e,t)),Object(p.i)(e.marks).forEach(e=>YT(e,t)),Object(p.i)(e.legends).forEach(e=>XT(e,t)),e.title&&ZT(e.title,t),t.parseLambdas(),t},sj=Object(p.cb)(["width","height","padding","autosize"]);function lj(e,t){var n,r,i,o,a,s,l=t.config;return t.background=e.background||l.background,t.eventConfig=l.events,a=dk(t.root=t.add(fk())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",rk(e.padding,l)),t.addSignal("autosize",nk(e.autosize,l)),t.legends=t.objectProperty(l.legend&&l.legend.layout),s=function(e,t,n){if(Object(p.i)(t).forEach(t=>{sj[t.name]||sk(t,e)}),!n)return t;const r=Object(p.i)(t).slice();return Object(p.i)(n).forEach(t=>{e.hasOwnSignal(t.name)||(sk(t,e),r.push(t))}),r}(t,e.signals,l.signals),r=t.add(zk()),i=rT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(Bk(iT(i,dT,JS,e.style,t,{pulse:dk(r)}))),o=t.add(aS({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:a,pulse:dk(i)})),t.operators.pop(),t.pushState(dk(i),dk(o),null),aj(e,t,s),t.operators.push(o),n=t.add(Rk({mark:a,pulse:dk(o)})),n=t.add(nS({pulse:dk(n)})),n=t.add(iS({pulse:dk(n)})),t.addData("root",new qT(t,r,r,n)),t}function uj(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function cj(e){this.config=e.config,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}var fj=uj.prototype=cj.prototype;function dj(e){return(Object(p.A)(e)?pj:hj)(e)}function pj(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(Object(p.F)(t)?t.signal||dj(t):Object(p.Y)(t));return n+"]"}function hj(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+Object(p.Y)(t)+":"+(Object(p.F)(n)?n.signal||dj(n):Object(p.Y)(n));return r+"}"}fj.fork=function(){return new cj(this)},fj.isSubscope=function(){return this._subid>0},fj.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},fj.id=function(){return(this._subid?this._subid+":":0)+this._id++},fj.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},fj.proxy=function(e){var t=e instanceof uk?dk(e):e;return this.add(eS({value:t}))},fj.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},fj.addUpdate=function(e){return this.updates.push(e),e},fj.finish=function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var r in n((t=this.data[e]).input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values"),t.index)n(t.index[r],e,"index:"+r);return this},fj.pushState=function(e,t,n){this._encode.push(dk(this.add(iS({pulse:e})))),this._parent.push(t),this._lookup.push(n?dk(this.proxy(n)):null),this._markpath.push(-1)},fj.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},fj.parent=function(){return Object(p.T)(this._parent)},fj.encode=function(){return Object(p.T)(this._encode)},fj.lookup=function(){return Object(p.T)(this._lookup)},fj.markpath=function(){var e=this._markpath;return++e[e.length-1]},fj.fieldRef=function(e,t){if(Object(p.H)(e))return pk(e,t);e.signal||Object(p.n)("Unsupported field reference: "+Object(p.Y)(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=dk(this.add($k(n)))),i},fj.compareRef=function(e){function t(e){return xk(e)?(r=!0,n.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(r=!0,n.exprRef(e.expr)):e}var n=this,r=!1,i=Object(p.i)(e.field).map(t),o=Object(p.i)(e.order).map(t);return r?dk(this.add(Lk({fields:i,orders:o}))):mk(i,o)},fj.keyRef=function(e,t){var n=this.signals,r=!1;return e=Object(p.i)(e).map((function(e){return xk(e)?(r=!0,dk(n[e.signal])):e})),r?dk(this.add(Hk({fields:e,flat:t}))):function(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},fj.sortRef=function(e){if(!e)return e;var t=bk(e.op,e.field),n=e.order||"ascending";return n.signal?dk(this.add(Lk({fields:t,orders:this.signalRef(n.signal)}))):mk(t,n)},fj.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},fj.hasOwnSignal=function(e){return Object(p.v)(this.signals,e)},fj.addSignal=function(e,t){this.hasOwnSignal(e)&&Object(p.n)("Duplicate signal name: "+Object(p.Y)(e));var n=t instanceof uk?t:this.add(fk(t));return this.signals[e]=n},fj.getSignal=function(e){return this.signals[e]||Object(p.n)("Unrecognized signal name: "+Object(p.Y)(e)),this.signals[e]},fj.signalRef=function(e){return this.signals[e]?dk(this.signals[e]):(Object(p.v)(this.lambdas,e)||(this.lambdas[e]=this.add(fk(null))),dk(this.lambdas[e]))},fj.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=lk(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},fj.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},fj.objectProperty=function(e){return e&&Object(p.F)(e)?this.signalRef(e.signal||dj(e)):e},fj.exprRef=function(e,t){var n={expr:lk(e,this)};return t&&(n.expr.$name=t),dk(this.add(Uk(n)))},fj.addBinding=function(e,t){this.bindings||Object(p.n)("Nested signals do not support binding: "+Object(p.Y)(e)),this.bindings.push(Object(p.o)({signal:e},t))},fj.addScaleProj=function(e,t){Object(p.v)(this.scales,e)&&Object(p.n)("Duplicate scale or projection name: "+Object(p.Y)(e)),this.scales[e]=this.add(t)},fj.addScale=function(e,t){this.addScaleProj(e,rS(t))},fj.addProjection=function(e,t){this.addScaleProj(e,Qk(t))},fj.getScale=function(e){return this.scales[e]||Object(p.n)("Unrecognized scale name: "+Object(p.Y)(e)),this.scales[e]},fj.projectionRef=fj.scaleRef=function(e){return dk(this.getScale(e))},fj.projectionType=fj.scaleType=function(e){return this.getScale(e).params.type},fj.addData=function(e,t){return Object(p.v)(this.data,e)&&Object(p.n)("Duplicate data set name: "+Object(p.Y)(e)),this.data[e]=t},fj.getData=function(e){return this.data[e]||Object(p.n)("Undefined data set name: "+Object(p.Y)(e)),this.data[e]},fj.addDataPipeline=function(e,t){return Object(p.v)(this.data,e)&&Object(p.n)("Duplicate data set name: "+Object(p.Y)(e)),this.addData(e,qT.fromEntries(this,t))};var mj=function(e,t){return Object(p.F)(e)||Object(p.n)("Input Vega specification must be an object."),lj(e,new uj(t=Object(p.M)({padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},t,e.config))).toRuntime()};n.d(t,"version",(function(){return Hw.a})),n.d(t,"bandwidthNRD",(function(){return _t})),n.d(t,"bin",(function(){return wt})),n.d(t,"bootstrapCI",(function(){return kt})),n.d(t,"dotbin",(function(){return St})),n.d(t,"quantiles",(function(){return vt})),n.d(t,"quartiles",(function(){return xt})),n.d(t,"random",(function(){return Ot})),n.d(t,"setRandom",(function(){return Et})),n.d(t,"randomLCG",(function(){return Tt})),n.d(t,"randomInteger",(function(){return jt})),n.d(t,"randomKDE",(function(){return zt})),n.d(t,"randomLogNormal",(function(){return qt})),n.d(t,"sampleLogNormal",(function(){return Lt})),n.d(t,"densityLogNormal",(function(){return Ft})),n.d(t,"cumulativeLogNormal",(function(){return Bt})),n.d(t,"quantileLogNormal",(function(){return Ut})),n.d(t,"randomMixture",(function(){return $t})),n.d(t,"randomNormal",(function(){return Rt})),n.d(t,"sampleNormal",(function(){return Nt})),n.d(t,"densityNormal",(function(){return Mt})),n.d(t,"cumulativeNormal",(function(){return It})),n.d(t,"quantileNormal",(function(){return Dt})),n.d(t,"randomUniform",(function(){return Yt})),n.d(t,"sampleUniform",(function(){return Ht})),n.d(t,"densityUniform",(function(){return Wt})),n.d(t,"cumulativeUniform",(function(){return Vt})),n.d(t,"quantileUniform",(function(){return Gt})),n.d(t,"regressionLinear",(function(){return Qt})),n.d(t,"regressionLog",(function(){return en})),n.d(t,"regressionExp",(function(){return tn})),n.d(t,"regressionPow",(function(){return nn})),n.d(t,"regressionQuad",(function(){return rn})),n.d(t,"regressionPoly",(function(){return on})),n.d(t,"regressionLoess",(function(){return an})),n.d(t,"sampleCurve",(function(){return cn})),n.d(t,"timeUnits",(function(){return Fr})),n.d(t,"timeFloor",(function(){return Kr})),n.d(t,"utcFloor",(function(){return ti})),n.d(t,"timeUnitSpecifier",(function(){return ki})),n.d(t,"timeFormat",(function(){return Si})),n.d(t,"utcFormat",(function(){return Ti})),n.d(t,"timeInterval",(function(){return gi})),n.d(t,"timeOffset",(function(){return vi})),n.d(t,"timeSequence",(function(){return wi})),n.d(t,"utcInterval",(function(){return bi})),n.d(t,"utcOffset",(function(){return xi})),n.d(t,"utcSequence",(function(){return Oi})),n.d(t,"timeBin",(function(){return $i})),n.d(t,"accessor",(function(){return p.f})),n.d(t,"accessorName",(function(){return p.h})),n.d(t,"accessorFields",(function(){return p.g})),n.d(t,"id",(function(){return p.w})),n.d(t,"identity",(function(){return p.x})),n.d(t,"zero",(function(){return p.jb})),n.d(t,"one",(function(){return p.N})),n.d(t,"truthy",(function(){return p.fb})),n.d(t,"falsy",(function(){return p.r})),n.d(t,"logger",(function(){return p.K})),n.d(t,"None",(function(){return p.d})),n.d(t,"Error",(function(){return p.b})),n.d(t,"Warn",(function(){return p.e})),n.d(t,"Info",(function(){return p.c})),n.d(t,"Debug",(function(){return p.a})),n.d(t,"mergeConfig",(function(){return p.M})),n.d(t,"writeConfig",(function(){return p.ib})),n.d(t,"panLinear",(function(){return p.P})),n.d(t,"panLog",(function(){return p.Q})),n.d(t,"panPow",(function(){return p.R})),n.d(t,"panSymlog",(function(){return p.S})),n.d(t,"zoomLinear",(function(){return p.kb})),n.d(t,"zoomLog",(function(){return p.lb})),n.d(t,"zoomPow",(function(){return p.mb})),n.d(t,"zoomSymlog",(function(){return p.nb})),n.d(t,"quarter",(function(){return p.U})),n.d(t,"utcquarter",(function(){return p.gb})),n.d(t,"array",(function(){return p.i})),n.d(t,"clampRange",(function(){return p.j})),n.d(t,"compare",(function(){return p.k})),n.d(t,"constant",(function(){return p.l})),n.d(t,"debounce",(function(){return p.m})),n.d(t,"error",(function(){return p.n})),n.d(t,"extend",(function(){return p.o})),n.d(t,"extent",(function(){return p.p})),n.d(t,"extentIndex",(function(){return p.q})),n.d(t,"fastmap",(function(){return p.s})),n.d(t,"field",(function(){return p.t})),n.d(t,"flush",(function(){return p.u})),n.d(t,"hasOwnProperty",(function(){return p.v})),n.d(t,"inherits",(function(){return p.y})),n.d(t,"inrange",(function(){return p.z})),n.d(t,"isArray",(function(){return p.A})),n.d(t,"isBoolean",(function(){return p.B})),n.d(t,"isDate",(function(){return p.C})),n.d(t,"isFunction",(function(){return p.D})),n.d(t,"isNumber",(function(){return p.E})),n.d(t,"isObject",(function(){return p.F})),n.d(t,"isRegExp",(function(){return p.G})),n.d(t,"isString",(function(){return p.H})),n.d(t,"key",(function(){return p.I})),n.d(t,"lerp",(function(){return p.J})),n.d(t,"merge",(function(){return p.L})),n.d(t,"pad",(function(){return p.O})),n.d(t,"peek",(function(){return p.T})),n.d(t,"repeat",(function(){return p.V})),n.d(t,"span",(function(){return p.W})),n.d(t,"splitAccessPath",(function(){return p.X})),n.d(t,"stringValue",(function(){return p.Y})),n.d(t,"toBoolean",(function(){return p.Z})),n.d(t,"toDate",(function(){return p.ab})),n.d(t,"toNumber",(function(){return p.bb})),n.d(t,"toString",(function(){return p.db})),n.d(t,"toSet",(function(){return p.cb})),n.d(t,"truncate",(function(){return p.eb})),n.d(t,"visitArray",(function(){return p.hb})),n.d(t,"loader",(function(){return Me})),n.d(t,"read",(function(){return Ne})),n.d(t,"inferType",(function(){return Q})),n.d(t,"inferTypes",(function(){return ee})),n.d(t,"typeParsers",(function(){return K})),n.d(t,"format",(function(){return je})),n.d(t,"formats",(function(){return Ae})),n.d(t,"responseType",(function(){return Pe})),n.d(t,"Bounds",(function(){return $o})),n.d(t,"Gradient",(function(){return Ko})),n.d(t,"GroupItem",(function(){return Zo})),n.d(t,"ResourceLoader",(function(){return ta})),n.d(t,"Item",(function(){return Jo})),n.d(t,"Scenegraph",(function(){return Iu})),n.d(t,"Handler",(function(){return $u})),n.d(t,"Renderer",(function(){return Vu})),n.d(t,"CanvasHandler",(function(){return Xu})),n.d(t,"CanvasRenderer",(function(){return ec})),n.d(t,"SVGHandler",(function(){return oc})),n.d(t,"SVGRenderer",(function(){return hc})),n.d(t,"SVGStringRenderer",(function(){return Tc})),n.d(t,"RenderType",(function(){return Ic})),n.d(t,"renderModule",(function(){return Rc})),n.d(t,"intersect",(function(){return zc})),n.d(t,"Marks",(function(){return Tu})),n.d(t,"boundClip",(function(){return qc})),n.d(t,"boundContext",(function(){return sl})),n.d(t,"boundStroke",(function(){return il})),n.d(t,"boundItem",(function(){return ju})),n.d(t,"boundMark",(function(){return Pu})),n.d(t,"pathCurves",(function(){return Za})),n.d(t,"pathSymbols",(function(){return ms})),n.d(t,"pathRectangle",(function(){return Ps})),n.d(t,"pathTrail",(function(){return Cs})),n.d(t,"pathParse",(function(){return ts})),n.d(t,"pathRender",(function(){return ds})),n.d(t,"point",(function(){return qu})),n.d(t,"domCreate",(function(){return zu})),n.d(t,"domFind",(function(){return Lu})),n.d(t,"domChild",(function(){return Fu})),n.d(t,"domClear",(function(){return Bu})),n.d(t,"openTag",(function(){return lc})),n.d(t,"closeTag",(function(){return uc})),n.d(t,"font",(function(){return _u})),n.d(t,"fontFamily",(function(){return xu})),n.d(t,"fontSize",(function(){return hu})),n.d(t,"lineHeight",(function(){return gu})),n.d(t,"multiLineOffset",(function(){return yu})),n.d(t,"textMetrics",(function(){return uu})),n.d(t,"resetSVGClipId",(function(){return Ul})),n.d(t,"sceneEqual",(function(){return Hc})),n.d(t,"pathEqual",(function(){return Wc})),n.d(t,"sceneToJSON",(function(){return Nu})),n.d(t,"sceneFromJSON",(function(){return Mu})),n.d(t,"intersectPath",(function(){return dl})),n.d(t,"intersectPoint",(function(){return pl})),n.d(t,"intersectRule",(function(){return ml})),n.d(t,"intersectBoxLine",(function(){return gl})),n.d(t,"sceneZOrder",(function(){return Ol})),n.d(t,"sceneVisit",(function(){return El})),n.d(t,"scenePickVisit",(function(){return kl})),n.d(t,"Dataflow",(function(){return Ke})),n.d(t,"EventStream",(function(){return z})),n.d(t,"Parameters",(function(){return A})),n.d(t,"Pulse",(function(){return Fe})),n.d(t,"MultiPulse",(function(){return He})),n.d(t,"Operator",(function(){return M})),n.d(t,"Transform",(function(){return Qe})),n.d(t,"changeset",(function(){return T})),n.d(t,"ingest",(function(){return _})),n.d(t,"isTuple",(function(){return y})),n.d(t,"definition",(function(){return nt})),n.d(t,"transform",(function(){return rt})),n.d(t,"transforms",(function(){return tt})),n.d(t,"tupleid",(function(){return v})),n.d(t,"scale",(function(){return bp})),n.d(t,"scheme",(function(){return Ap})),n.d(t,"interpolate",(function(){return kp})),n.d(t,"interpolateColors",(function(){return wp})),n.d(t,"interpolateRange",(function(){return _p})),n.d(t,"quantizeInterpolator",(function(){return Op})),n.d(t,"projection",(function(){return Qy})),n.d(t,"View",(function(){return KE})),n.d(t,"expressionFunction",(function(){return _E})),n.d(t,"formatLocale",(function(){return yd.b})),n.d(t,"timeFormatLocale",(function(){return Ce.a})),n.d(t,"parse",(function(){return mj})),n.d(t,"runtime",(function(){return ME})),n.d(t,"runtimeContext",(function(){return DE})),Object(p.o)(tt,r,i,o,a,s,l,u,c,f,d)},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";e.exports=function(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,i,o,a,s,l){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,a,s,l],f=0;(u=new Error(t.replace(/%s/g,(function(){return c[f++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},function(e,t,n){var r=n(483);e.exports=function(e){return e&&e.length?r(e):[]}},function(e,t,n){var r=n(39)(Object,"create");e.exports=r},function(e,t,n){var r=n(497),i=n(498),o=n(499),a=n(500),s=n(501);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(240);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(503);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(525),i=n(526),o=n(527);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var f=!0,d=0;d<l;d++)if(u(e,o+d)!==u(t,d)){f=!1;break}if(f)return o}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return $(U(t,e.length-n),e,n,r)}function _(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return _(e,t,n,r)}function O(e,t,n,r){return $(q(t),e,n,r)}function E(e,t,n,r){return $(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function C(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,o){return o||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:U(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(33))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEPRECATED_CONFIG_PROPS=t.defaultProps=t.propTypes=void 0;var r,i=(r=n(1))&&r.__esModule?r:{default:r};var o=i.default.string,a=i.default.bool,s=i.default.number,l=i.default.array,u=i.default.oneOfType,c=i.default.shape,f=i.default.object,d=i.default.func,p={url:u([o,l,f]),playing:a,loop:a,controls:a,volume:s,muted:a,playbackRate:s,width:u([o,s]),height:u([o,s]),style:f,progressInterval:s,playsinline:a,pip:a,light:u([a,o]),wrapper:u([o,d,c({render:d.isRequired})]),config:c({soundcloud:c({options:f,preload:a}),youtube:c({playerVars:f,embedOptions:f,preload:a}),facebook:c({appId:o}),dailymotion:c({params:f,preload:a}),vimeo:c({playerOptions:f,preload:a}),file:c({attributes:f,tracks:l,forceVideo:a,forceAudio:a,forceHLS:a,forceDASH:a,hlsOptions:f,hlsVersion:o,dashVersion:o}),wistia:c({options:f}),mixcloud:c({options:f}),twitch:c({options:f})}),onReady:d,onStart:d,onPlay:d,onPause:d,onBuffer:d,onBufferEnd:d,onEnded:d,onError:d,onDuration:d,onSeek:d,onProgress:d,onEnablePIP:d,onDisablePIP:d};t.propTypes=p;t.defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,light:!1,wrapper:"div",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},preload:!1},facebook:{appId:"1309697205772819"},dailymotion:{params:{api:1,"endscreen-enable":!1},preload:!1},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},preload:!1},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,hlsOptions:{},hlsVersion:"0.10.1",dashVersion:"2.9.2"},wistia:{options:{}},mixcloud:{options:{hide_cover:1}},twitch:{options:{}}},onReady:function(){},onStart:function(){},onPlay:function(){},onPause:function(){},onBuffer:function(){},onBufferEnd:function(){},onEnded:function(){},onError:function(){},onDuration:function(){},onSeek:function(){},onProgress:function(){},onEnablePIP:function(){},onDisablePIP:function(){}};t.DEPRECATED_CONFIG_PROPS=["soundcloudConfig","youtubeConfig","facebookConfig","dailymotionConfig","vimeoConfig","fileConfig","wistiaConfig"]},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?function(e,t){return e+t}:arguments[2];return r({},e,["-webkit-","-moz-",""].map((function(e){return n(e,t)})))},e.exports=t.default},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=n(27),o=n(653),a=n(666),s=n(1),l=n(722),u=n(724),c=n(725),f=n(726),d=n(727),p=n(728),h=n(729),m=n(730),g=n(731),b=Object.keys(m),y=function(e){var t=e.source||e.children||"",n=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var r=i(m,e.renderers),s=[[a,n]].concat(e.plugins||[]).reduce(v,o()),h=s.parse(t),y=i(e,{renderers:r,definitions:p(h)}),x=function(e){var t=[d,l()],n=e.disallowedTypes;e.allowedTypes&&(n=b.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(c.ofType(n,r));e.allowNode&&t.push(c.ifNotMatch(e.allowNode,r));var i=!e.escapeHtml&&!e.skipHtml,o=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===g.HtmlParser}));i&&!o&&t.push(u);return e.astPlugins?t.concat(e.astPlugins):t}(e),_=s.runSync(h),w=x.reduce((function(e,t){return t(e,y)}),_);return f(w,y)};function v(e,t){return Array.isArray(t)?e.use.apply(e,r(t)):e.use(t)}y.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:h,astPlugins:[],plugins:[],parserOptions:{}},y.propTypes={className:s.string,source:s.string,children:s.string,sourcePos:s.bool,rawSourcePos:s.bool,escapeHtml:s.bool,skipHtml:s.bool,allowNode:s.func,allowedTypes:s.arrayOf(s.oneOf(b)),disallowedTypes:s.arrayOf(s.oneOf(b)),transformLinkUri:s.oneOfType([s.func,s.bool]),linkTarget:s.oneOfType([s.func,s.string]),transformImageUri:s.func,astPlugins:s.arrayOf(s.func),unwrapDisallowed:s.bool,renderers:s.object,plugins:s.array,parserOptions:s.object},y.types=b,y.renderers=m,y.uriTransformer=h,e.exports=y},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},function(e,t,n){"use strict";e.exports=s;var r=n(685),i=r.CONTINUE,o=r.SKIP,a=r.EXIT;function s(e,t,n,i){"function"==typeof t&&"function"!=typeof n&&(i=n,n=t,t=null),r(e,t,(function(e,t){var r=t[t.length-1],i=r?r.children.indexOf(e):null;return n(e,i,r)}),i)}s.CONTINUE=i,s.SKIP=o,s.EXIT=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};var o=({authors:e,displayRole:t=!1})=>e.map((e,n)=>i.default.createElement("span",{className:"author'",key:n},e.given.trim()," ",e.family.trim(),t&&e.role?` (${e.role})`:"")).reduce((e,t,n)=>n>0?[e,", ",t]:[t],[]);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(169)),o=a(n(300));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=({production:{resources:e},sectionsIds:t=[],translate:n,title:a,citations:u,id:c})=>{const f=t.reduce((t,n)=>t.concat(Object.keys(e[n].data.contents.notes).map(t=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e})({},e[n].data.contents.notes[t],{id:t}))),[]);return r.default.createElement("section",{className:"end-notes",title:a,id:c},r.default.createElement(o.default,{citations:u},f.length>0?r.default.createElement("h1",{className:"section-title"},a||n("Notes")):null,r.default.createElement("ol",{className:"end-notes"},f.map((e,t)=>r.default.createElement("li",{id:`note-content-${e.id}`,key:t},r.default.createElement("a",{href:`#note-pointer-${e.id}`,className:"note-number"},t+1),r.default.createElement(i.default,{raw:e.contents}))))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(94));function o(e){return e&&e.__esModule?e:{default:e}}t.default=({src:e=""})=>r.default.createElement(i.default,{escapeHtml:!1,source:e})},function(e,t,n){var r=n(71),i=n(53),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(100),i=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=115)}({115:function(e,t,n){"use strict";n.r(t),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141);let r=window.sigma;r.renderers.def=r.renderers.canvas,t.default=r},116:function(e,t){(function(){(function(e){"use strict";var t={},n=function(e){var r,i,o,a,s;n.classes.dispatcher.extend(this);var l=this,u=e||{};if("string"==typeof u||u instanceof HTMLElement?u={renderers:[u]}:"[object Array]"===Object.prototype.toString.call(u)&&(u={renderers:u}),a=u.renderers||u.renderer||u.container,u.renderers&&0!==u.renderers.length||("string"==typeof a||a instanceof HTMLElement||"object"==typeof a&&"container"in a)&&(u.renderers=[a]),u.id){if(t[u.id])throw'sigma: Instance "'+u.id+'" already exists.';Object.defineProperty(this,"id",{value:u.id})}else{for(s=0;t[s];)s++;Object.defineProperty(this,"id",{value:""+s})}for(t[this.id]=this,this.settings=new n.classes.configurable(n.settings,u.settings||{}),Object.defineProperty(this,"graph",{value:new n.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,n={};for(t in e.data)n[t]=e.data[t];n.renderer=e.target,this.dispatchEvent(e.type,n)}.bind(this),r=0,i=(o=u.renderers||[]).length;r<i;r++)this.addRenderer(o[r]);for(r=0,i=(o=u.middlewares||[]).length;r<i;r++)this.middlewares.push("string"==typeof o[r]?n.middlewares[o[r]]:o[r]);"object"==typeof u.graph&&u.graph&&(this.graph.read(u.graph),this.refresh()),window.addEventListener("resize",(function(){l.settings&&l.refresh()}))};if(n.prototype.addCamera=function(t){var r,i=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return r=new n.classes.camera(t,this.graph,this.settings),this.cameras[t]=r,r.quadtree=new n.classes.quad,n.classes.edgequad!==e&&(r.edgequadtree=new n.classes.edgequad),r.bind("coordinatesUpdated",(function(e){i.renderCamera(r,r.isAnimated)})),this.renderersPerCamera[t]=[],r},n.prototype.killCamera=function(e){if(!(e="string"==typeof e?this.cameras[e]:e))throw"sigma.killCamera: The camera is undefined.";var t,n=this.renderersPerCamera[e.id];for(t=n.length-1;t>=0;t--)this.killRenderer(n[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},n.prototype.addRenderer=function(e){var t,r,i,o,a=e||{};if("string"==typeof a?a={container:document.getElementById(a)}:a instanceof HTMLElement&&(a={container:a}),"string"==typeof a.container&&(a.container=document.getElementById(a.container)),"id"in a)t=a.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(r=(r="function"==typeof a.type?a.type:n.renderers[a.type])||n.renderers.def,i="camera"in a?a.camera instanceof n.classes.camera?a.camera:this.cameras[a.camera]||this.addCamera(a.camera):this.addCamera(),this.cameras[i.id]!==i)throw"sigma.addRenderer: The camera is not properly referenced.";return o=new r(this.graph,i,this.settings,a),this.renderers[t]=o,Object.defineProperty(o,"id",{value:t}),o.bind&&o.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[i.id].push(o),o},n.prototype.killRenderer=function(e){if(!(e="string"==typeof e?this.renderers[e]:e))throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],n=t.indexOf(e);return n>=0&&t.splice(n,1),e.kill&&e.kill(),delete this.renderers[e.id],this},n.prototype.refresh=function(t){var r,i,o,a,s,l,u=0;for(t=t||{},r=0,i=(a=this.middlewares||[]).length;r<i;r++)a[r].call(this,0===r?"":"tmp"+u+":",r===i-1?"ready:":"tmp"+ ++u+":");for(o in this.cameras)(s=this.cameras[o]).settings("autoRescale")&&this.renderersPerCamera[s.id]&&this.renderersPerCamera[s.id].length?n.middlewares.rescale.call(this,a.length?"ready:":"",s.readPrefix,{width:this.renderersPerCamera[s.id][0].width,height:this.renderersPerCamera[s.id][0].height}):n.middlewares.copy.call(this,a.length?"ready:":"",s.readPrefix),t.skipIndexation||(l=n.utils.getBoundaries(this.graph,s.readPrefix),s.quadtree.index(this.graph.nodes(),{prefix:s.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),s.edgequadtree!==e&&s.settings("drawEdges")&&s.settings("enableEdgeHovering")&&s.edgequadtree.index(this.graph,{prefix:s.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(r=0,i=(a=Object.keys(this.renderers)).length;r<i;r++)if(this.renderers[a[r]].process)if(this.settings("skipErrors"))try{this.renderers[a[r]].process()}catch(e){console.log('Warning: The renderer "'+a[r]+'" crashed on ".process()"')}else this.renderers[a[r]].process();return this.render(),this},n.prototype.render=function(){var e,t,n;for(e=0,t=(n=Object.keys(this.renderers)).length;e<t;e++)if(this.settings("skipErrors"))try{this.renderers[n[e]].render()}catch(t){this.settings("verbose")&&console.log('Warning: The renderer "'+n[e]+'" crashed on ".render()"')}else this.renderers[n[e]].render();return this},n.prototype.renderCamera=function(e,t){var n,r,i,o=this;if(t)for(n=0,r=(i=this.renderersPerCamera[e.id]).length;n<r;n++)if(this.settings("skipErrors"))try{i[n].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+i[n].id+'" crashed on ".render()"')}else i[n].render();else if(!this.cameraFrames[e.id]){for(n=0,r=(i=this.renderersPerCamera[e.id]).length;n<r;n++)if(this.settings("skipErrors"))try{i[n].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+i[n].id+'" crashed on ".render()"')}else i[n].render();this.cameraFrames[e.id]=requestAnimationFrame((function(){delete o.cameraFrames[e.id]}))}return this},n.prototype.kill=function(){var e;for(e in this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares,this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);for(e in delete this.renderers,delete this.cameras,this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},n.instances=function(e){return arguments.length?t[e]:n.utils.extend({},t)},n.version="1.2.0",void 0!==this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=n}).call(this)}).call(window)},117:function(e,t,n){(function(){!function(n){"use strict";if(n.conrad)throw new Error("conrad already exists");var r,i=!1,o={},a={},s=[],l={},u=[],c=!1,f={frameDuration:20,history:!0},d=Object.create(null);function p(e,t){var n,r,i,o,a,s,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,n=0,i=l.length;n!==i;n+=1)if(s=l[n],d[s])for(a={type:s,data:t||{}},r=0,o=d[s].length;r!==o;r+=1)try{d[s][r].handler(a)}catch(e){}}function h(){var e,t,n,r,i=!1,o=w(),a=s.shift();if(n=a.job(),o=w()-o,a.done++,a.time+=o,a.currentTime+=o,a.weightTime=a.currentTime/(a.weight||1),a.averageTime=a.time/a.done,!(r=a.count?a.count<=a.done:!n)){for(e=0,t=s.length;e<t;e++)if(s[e].weightTime>a.weightTime){s.splice(e,0,a),i=!0;break}i||s.push(a)}return r?a:null}function m(e){var t=s.length;a[e.id]=e,e.status="running",t&&(e.weightTime=s[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=w(),p("jobStarted",x(e)),s.push(e)}function g(){var e,t,n;for(e in o)(t=o[e]).after?l[e]=t:m(t),delete o[e];for(i=!!s.length;s.length&&w()-r<f.frameDuration;)if(n=h())for(e in b(n.id),l)l[e].after===n.id&&(m(l[e]),delete l[e]);i?(r=w(),p("enterFrame"),setTimeout(g,0)):p("stop")}function b(e){var t,n,r,i,c=!1;if(Array.isArray(e))for(t=0,n=e.length;t<n;t++)b(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(t=0,n=(r=[a,l,o]).length;t<n;t++)e in r[t]&&(i=r[t][e],f.history&&(i.status="done",u.push(i)),p("jobEnded",x(i)),delete r[t][e],"function"==typeof i.end&&i.end(),c=!0);for(t=0,n=(r=s).length;t<n;t++)if(r[t].id===e){r.splice(t,1);break}if(!c)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function y(e){var t=o[e]||a[e]||l[e];return t?v(t):null}function v(){var e,t,n={};for(e=arguments.length-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function x(e){var t,n,r;if(!e)return e;if(Array.isArray(e))for(t=[],n=0,r=e.length;n<r;n++)t.push(x(e[n]));else if("object"==typeof e)for(n in t={},e)t[n]=x(e[n]);else t=e;return t}function _(e){var t,n=[];for(t in e)n.push(e[t]);return n}function w(){return Date.now?Date.now():(new Date).getTime()}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var O={hasJob:y,addJob:function e(t,n){var a,s,l;if(Array.isArray(t)){for(c=!0,a=0,s=t.length;a<s;a++)e(t[a].id,v(t[a],n));c=!1,i||(r=w(),p("start"),g())}else if("object"==typeof t)if("string"==typeof t.id)e(t.id,t);else{for(a in c=!0,t)"function"==typeof t[a]?e(a,v({job:t[a]},n)):e(a,v(t[a],n));c=!1,i||(r=w(),p("start"),g())}else{if("string"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");if(y(t))throw new Error('[conrad.addJob] Job with id "'+t+'" already exists.');if("function"==typeof n)l={id:t,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:n};else{if("object"!=typeof n)throw new Error("[conrad.addJob] Wrong arguments.");l=v({id:t,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},n)}o[t]=l,p("jobAdded",x(l)),i||c||(r=w(),p("start"),g())}return this},killJob:b,killAll:function(){var e,t=v(o,a,l);if(f.history)for(e in t)t[e].status="done",u.push(t[e]),"function"==typeof t[e].end&&t[e].end();return o={},l={},a={},s=[],i=!1,this},settings:function(e,t){var n;if("string"==typeof a1&&1===arguments.length)return f[a1];for(var r in n="object"==typeof a1&&1===arguments.length&&a1||{},"string"==typeof a1&&(n[a1]=a2),n)void 0!==n[r]?f[r]=n[r]:delete f[r];return this},getStats:function(e,t){var n,r,i,s,c,f,d;if(!arguments.length){for(r in c=[],o)c.push(o[r]);for(r in l)c.push(l[r]);for(r in a)c.push(a[r]);c=c.concat(u)}if("string"==typeof e)switch(e){case"waiting":c=_(l);break;case"running":c=_(a);break;case"done":c=u;break;default:f=e}if(e instanceof RegExp&&(f=e),!f&&("string"==typeof t||t instanceof RegExp)&&(f=t),f){if(d="string"==typeof f,c instanceof Array)n=c;else if("object"==typeof c)for(r in n=[],c)n=n.concat(c[r]);else{for(r in n=[],o)n.push(o[r]);for(r in l)n.push(l[r]);for(r in a)n.push(a[r]);n=n.concat(u)}for(c=[],i=0,s=n.length;i<s;i++)(d?n[i].id===f:n[i].id.match(f))&&c.push(n[i])}return x(c)},isRunning:function(){return i},clearHistory:function(){return u=[],this},bind:function e(t,n){var r,i,o,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(t in arguments[0])e(t,arguments[0][t]);else if(arguments.length>1)for(r=0,i=(a=Array.isArray(t)?t:t.split(/ /)).length;r!==i;r+=1)o=a[r],d[o]||(d[o]=[]),d[o].push({handler:n})},unbind:function(e,t){var n,r,i,o,a,s,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(n=0,r=l.length;n!==r;n+=1){if(s=l[n],d[s]){for(a=[],i=0,o=d[s].length;i!==o;i+=1)d[s][i].handler!==t&&a.push(d[s][i]);d[s]=a}d[s]&&0===d[s].length&&delete d[s]}else for(n=0,r=l.length;n!==r;n+=1)delete d[l[n]];else d=Object.create(null)},version:"0.1.0"};e.exports&&(t=e.exports=O),t.conrad=O,n.conrad=O}(this)}).call(window)},118:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t,n=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,n={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce((function(e,t){return t in e?e[t]:e[t]={}}),n)},sigma.utils.id=(t=0,function(){return++t});var r={};sigma.utils.floatColor=function(e){if(r[e])return r[e];var t=e,n=0,i=0,o=0;"#"===e[0]?3===(e=e.slice(1)).length?(n=parseInt(e.charAt(0)+e.charAt(0),16),i=parseInt(e.charAt(1)+e.charAt(1),16),o=parseInt(e.charAt(2)+e.charAt(2),16)):(n=parseInt(e.charAt(0)+e.charAt(1),16),i=parseInt(e.charAt(2)+e.charAt(3),16),o=parseInt(e.charAt(4)+e.charAt(5),16)):e.match(/^ *rgba? *\(/)&&(n=+(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],i=+e[2],o=+e[3]);var a=256*n*256+256*i+o;return r[t]=a,a},sigma.utils.zoomTo=function(e,t,n,r,i){var o,a,s,l=e.settings;(a=Math.max(l("zoomMin"),Math.min(l("zoomMax"),e.ratio*r)))!==e.ratio&&(s={x:t*(1-(r=a/e.ratio))+e.x,y:n*(1-r)+e.y,ratio:a},i&&i.duration?(o=sigma.misc.animation.killAll(e),i=sigma.utils.extend(i,{easing:o?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,s,i)):(e.goTo(s),i&&i.onComplete&&i.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,n,r){return{x:(e+n)/2+(r-t)/4,y:(t+r)/2+(e-n)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,n,r,i,o,a){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*o+Math.pow(e,2)*r,y:Math.pow(1-e,2)*n+2*(1-e)*e*a+Math.pow(e,2)*i}},sigma.utils.getPointOnBezierCurve=function(e,t,n,r,i,o,a,s,l){var u=Math.pow(1-e,3),c=3*e*Math.pow(1-e,2),f=3*Math.pow(e,2)*(1-e),d=Math.pow(e,3);return{x:u*t+c*o+f*s+d*r,y:u*n+c*a+f*l+d*i}},sigma.utils.getSelfLoopControlPoints=function(e,t,n){return{x1:e-7*n,y1:t,x2:e,y2:t+7*n}},sigma.utils.getDistance=function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))},sigma.utils.getCircleIntersection=function(e,t,n,r,i,o){var a,s,l,u,c,f,d,p,h;return s=r-e,l=i-t,!((u=Math.sqrt(l*l+s*s))>n+o)&&!(u<Math.abs(n-o))&&(h=t+l*(a=(n*n-o*o+u*u)/(2*u))/u,{xi:(p=e+s*a/u)+(f=(c=Math.sqrt(n*n-a*a))/u*-l),xi_prime:p-f,yi:h+(d=s*(c/u)),yi_prime:h-d})},sigma.utils.isPointOnSegment=function(e,t,n,r,i,o,a){return Math.abs((t-r)*(i-n)-(e-n)*(o-r))/sigma.utils.getDistance(n,r,i,o)<a&&Math.min(n,i)<=e&&e<=Math.max(n,i)&&Math.min(r,o)<=t&&t<=Math.max(r,o)},sigma.utils.isPointOnQuadraticCurve=function(e,t,n,r,i,o,a,s,l){var u=sigma.utils.getDistance(n,r,i,o);if(Math.abs(e-n)>u||Math.abs(t-r)>u)return!1;for(var c,f=.5,d=sigma.utils.getDistance(e,t,n,r)<sigma.utils.getDistance(e,t,i,o)?-.01:.01,p=100,h=sigma.utils.getPointOnQuadraticCurve(f,n,r,i,o,a,s),m=sigma.utils.getDistance(e,t,h.x,h.y);p-- >0&&f>=0&&f<=1&&m>l&&(d>.001||d<-.001);)c=m,h=sigma.utils.getPointOnQuadraticCurve(f,n,r,i,o,a,s),(m=sigma.utils.getDistance(e,t,h.x,h.y))>c?f+=d=-d/2:f+d<0||f+d>1?(d/=2,m=c):f+=d;return m<l},sigma.utils.isPointOnBezierCurve=function(e,t,n,r,i,o,a,s,l,u,c){var f=sigma.utils.getDistance(n,r,a,s);if(Math.abs(e-n)>f||Math.abs(t-r)>f)return!1;for(var d,p=.5,h=sigma.utils.getDistance(e,t,n,r)<sigma.utils.getDistance(e,t,i,o)?-.01:.01,m=100,g=sigma.utils.getPointOnBezierCurve(p,n,r,i,o,a,s,l,u),b=sigma.utils.getDistance(e,t,g.x,g.y);m-- >0&&p>=0&&p<=1&&b>c&&(h>.001||h<-.001);)d=b,g=sigma.utils.getPointOnBezierCurve(p,n,r,i,o,a,s,l,u),(b=sigma.utils.getDistance(e,t,g.x,g.y))>d?p+=h=-h/2:p+h<0||p+h>1?(h/=2,b=d):p+=h;return b<c},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},sigma.utils.getWidth=function(t){var n=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof n&&n||n!==e&&n.baseVal!==e&&n.baseVal.value},sigma.utils.getCenter=function(e){var t=-1!==e.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*t),y:sigma.utils.getHeight(e)/(2*t)}},sigma.utils.mouseCoords=function(e,t,n){return t=t||sigma.utils.getX(e),n=n||sigma.utils.getY(e),{x:t-sigma.utils.getCenter(e).x,y:n-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(t){var n=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof n&&n||n!==e&&n.baseVal!==e&&n.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,n=0;e;)n+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:n,left:t}},sigma.utils.doubleClick=function(e,t,n){var r,i=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],(r=e._doubleClickHandler[t]).push((function(e){if(2==++i)return i=0,n(e);1===i&&setTimeout((function(){i=0}),sigma.settings.doubleClickTimeout)})),e.addEventListener(t,r[r.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var n,r=(e._doubleClickHandler||{})[t]||[];n=r.pop();)e.removeEventListener(t,n);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,n,r){var i=e.createShader(n);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(r&&r('Error compiling shader "'+i+'":'+e.getShaderInfoLog(i)),e.deleteShader(i),null)},sigma.utils.loadProgram=function(e,t,n,r,i){var o,a=e.createProgram();for(o=0;o<t.length;++o)e.attachShader(a,t[o]);if(n)for(o=0;o<n.length;++o)e.bindAttribLocation(a,locations?locations[o]:o,opt_attribs[o]);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(i&&i("Error in program linking: "+e.getProgramInfoLog(a)),e.deleteProgram(a),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var n=Math.cos(e),r=Math.sin(e);return t?[n,-r,r,n]:[n,-r,0,r,n,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,n){var r=n?2:3,i=e[0*r+0],o=e[0*r+1],a=e[0*r+2],s=e[1*r+0],l=e[1*r+1],u=e[1*r+2],c=e[2*r+0],f=e[2*r+1],d=e[2*r+2],p=t[0*r+0],h=t[0*r+1],m=t[0*r+2],g=t[1*r+0],b=t[1*r+1],y=t[1*r+2],v=t[2*r+0],x=t[2*r+1],_=t[2*r+2];return n?[i*p+o*g,i*h+o*b,s*p+l*g,s*h+l*b]:[i*p+o*g+a*v,i*h+o*b+a*x,i*m+o*y+a*_,s*p+l*g+u*v,s*h+l*b+u*x,s*m+l*y+u*_,c*p+f*g+d*v,c*h+f*b+d*x,c*m+f*y+d*_]}}).call(this)}).call(window)},119:function(e,t){(function(){!function(e){"use strict";var t,n=0,r=["ms","moz","webkit","o"];for(t=0;t<r.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[r[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[t]+"CancelAnimationFrame"]||e[r[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,r){var i=(new Date).getTime(),o=Math.max(0,16-(i-n)),a=e.setTimeout((function(){t(i+o)}),o);return n=i+o,a}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,n,r=Array.prototype.slice.call(arguments,1),i=this;return n=function(){return i.apply(this instanceof t&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))},(t=function(){}).prototype=this.prototype,n.prototype=new t,n})}(this)}).call(window)},120:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings"),sigma.settings=sigma.utils.extend(sigma.settings||{},{clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200})}).call(this)}).call(window)},121:function(e,t,n){(function(){(function(){"use strict";var n=function(){Object.defineProperty(this,"_handlers",{value:{}})};n.prototype.bind=function(e,t){var n,r,i,o;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(n=0,r=(o="string"==typeof e?e.split(" "):e).length;n!==r;n+=1)(i=o[n])&&(this._handlers[i]||(this._handlers[i]=[]),this._handlers[i].push({handler:t}))}return this},n.prototype.unbind=function(e,t){var n,r,i,o,a,s,l,u="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(n=0,r=u.length;n!==r;n+=1){if(l=u[n],this._handlers[l]){for(s=[],i=0,o=this._handlers[l].length;i!==o;i+=1)this._handlers[l][i].handler!==t&&s.push(this._handlers[l][i]);this._handlers[l]=s}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(n=0,r=u.length;n!==r;n+=1)delete this._handlers[u[n]];return this},n.prototype.dispatchEvent=function(e,t){var n,r,i,o,a,s,l,u="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,n=0,r=u.length;n!==r;n+=1)if(l=u[n],this._handlers[l]){for(s=this.getEvent(l,t),a=[],i=0,o=this._handlers[l].length;i!==o;i+=1)this._handlers[l][i].handler(s),this._handlers[l][i].one||a.push(this._handlers[l][i]);this._handlers[l]=a}return this},n.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},n.extend=function(e,t){var r;for(r in n.prototype)n.prototype.hasOwnProperty(r)&&(e[r]=n.prototype[r]);n.apply(e,t)},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=n):(e.exports&&(t=e.exports=n),t.dispatcher=n)}).call(this)}).call(window)},122:function(e,t,n){(function(){(function(){"use strict";var n=function(){var e,t,r={},i=Array.prototype.slice.call(arguments,0),o=function(e,t){var n,a,s,l;if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:o(t);for(n="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(n[e]=t),a=0,s=(l=Object.keys(n)).length;a<s;a++)r[l[a]]=n[l[a]];return this}if(void 0!==r[e])return r[e];for(a=0,s=i.length;a<s;a++)if(void 0!==i[a][e])return i[a][e]};for(o.embedObjects=function(){var e=i.concat(r).concat(Array.prototype.splice.call(arguments,0));return n.apply({},e)},e=0,t=arguments.length;e<t;e++)o(arguments[e]);return o};void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=n):(e.exports&&(t=e.exports=n),t.configurable=n)}).call(this)}).call(window)},123:function(e,t,n){(function(){(function(n){"use strict";var r=Object.create(null),i=Object.create(null),o=Object.create(null),a=Object.create(null),s=Object.create(null),l={immutable:!0,clone:!0},u=function(e){return l[e]},c=function(e){var t,n,i;for(t in i={settings:e||u,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)},o)o[t].call(i);for(t in r)n=f(t,i,r[t]),this[t]=n,i[t]=n};function f(e,t,n){return function(){var r,i;for(r in s[e])s[e][r].apply(t,arguments);for(r in i=n.apply(t,arguments),a[e])a[e][r].apply(t,arguments);return i}}function d(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}c.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(r[e]||c[e])throw'The method "'+e+'" already exists.';return r[e]=t,a[e]=Object.create(null),s[e]=Object.create(null),this},c.hasMethod=function(e){return!(!r[e]&&!c[e])},c.attach=function(e,t,n,r){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof n||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var i;if("constructor"===e)i=o;else if(r){if(!s[e])throw'The method "'+e+'" does not exist.';i=s[e]}else{if(!a[e])throw'The method "'+e+'" does not exist.';i=a[e]}if(i[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return i[t]=n,this},c.attachBefore=function(e,t,n){return this.attach(e,t,n,!0)},c.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(i[e])throw'The index "'+e+'" already exists.';var n;for(n in i[e]=t,t){if("function"!=typeof t[n])throw"The bindings must be functions.";c.attach(n,e,t[n])}return this},c.addMethod("addNode",(function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,n=e.id,r=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(r[t]=e[t]);else r=e;return this.settings("immutable")?Object.defineProperty(r,"id",{value:n,enumerable:!0}):r.id=n,this.inNeighborsIndex[n]=Object.create(null),this.outNeighborsIndex[n]=Object.create(null),this.allNeighborsIndex[n]=Object.create(null),this.inNeighborsCount[n]=0,this.outNeighborsCount[n]=0,this.allNeighborsCount[n]=0,this.nodesArray.push(r),this.nodesIndex[r.id]=r,this})),c.addMethod("addEdge",(function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,n=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(n[t]=e[t]);else n=e;return this.settings("immutable")?(Object.defineProperty(n,"id",{value:e.id,enumerable:!0}),Object.defineProperty(n,"source",{value:e.source,enumerable:!0}),Object.defineProperty(n,"target",{value:e.target,enumerable:!0})):(n.id=e.id,n.source=e.source,n.target=e.target),this.edgesArray.push(n),this.edgesIndex[n.id]=n,this.inNeighborsIndex[n.target][n.source]||(this.inNeighborsIndex[n.target][n.source]=Object.create(null)),this.inNeighborsIndex[n.target][n.source][n.id]=n,this.outNeighborsIndex[n.source][n.target]||(this.outNeighborsIndex[n.source][n.target]=Object.create(null)),this.outNeighborsIndex[n.source][n.target][n.id]=n,this.allNeighborsIndex[n.source][n.target]||(this.allNeighborsIndex[n.source][n.target]=Object.create(null)),this.allNeighborsIndex[n.source][n.target][n.id]=n,n.target!==n.source&&(this.allNeighborsIndex[n.target][n.source]||(this.allNeighborsIndex[n.target][n.source]=Object.create(null)),this.allNeighborsIndex[n.target][n.source][n.id]=n),this.inNeighborsCount[n.target]++,this.outNeighborsCount[n.source]++,this.allNeighborsCount[n.target]++,this.allNeighborsCount[n.source]++,this})),c.addMethod("dropNode",(function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,n,r;for(delete this.nodesIndex[e],t=0,r=this.nodesArray.length;t<r;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)this.edgesArray[t].source!==e&&this.edgesArray[t].target!==e||this.dropEdge(this.edgesArray[t].id);for(n in delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e],this.nodesIndex)delete this.inNeighborsIndex[n][e],delete this.outNeighborsIndex[n][e],delete this.allNeighborsIndex[n][e];return this})),c.addMethod("dropEdge",(function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,n,r;for(r=this.edgesIndex[e],delete this.edgesIndex[e],t=0,n=this.edgesArray.length;t<n;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[r.target][r.source][r.id],Object.keys(this.inNeighborsIndex[r.target][r.source]).length||delete this.inNeighborsIndex[r.target][r.source],delete this.outNeighborsIndex[r.source][r.target][r.id],Object.keys(this.outNeighborsIndex[r.source][r.target]).length||delete this.outNeighborsIndex[r.source][r.target],delete this.allNeighborsIndex[r.source][r.target][r.id],Object.keys(this.allNeighborsIndex[r.source][r.target]).length||delete this.allNeighborsIndex[r.source][r.target],r.target!==r.source&&(delete this.allNeighborsIndex[r.target][r.source][r.id],Object.keys(this.allNeighborsIndex[r.target][r.source]).length||delete this.allNeighborsIndex[r.target][r.source]),this.inNeighborsCount[r.target]--,this.outNeighborsCount[r.source]--,this.allNeighborsCount[r.source]--,this.allNeighborsCount[r.target]--,this})),c.addMethod("kill",(function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount})),c.addMethod("clear",(function(){return this.nodesArray.length=0,this.edgesArray.length=0,d(this.nodesIndex),d(this.edgesIndex),d(this.nodesIndex),d(this.inNeighborsIndex),d(this.outNeighborsIndex),d(this.allNeighborsIndex),d(this.inNeighborsCount),d(this.outNeighborsCount),d(this.allNeighborsCount),this})),c.addMethod("read",(function(e){var t,n,r;for(t=0,r=(n=e.nodes||[]).length;t<r;t++)this.addNode(n[t]);for(t=0,r=(n=e.edges||[]).length;t<r;t++)this.addEdge(n[t]);return this})),c.addMethod("nodes",(function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,n,r=[];for(t=0,n=e.length;t<n;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";r.push(this.nodesIndex[e[t]])}return r}throw"nodes: Wrong arguments."})),c.addMethod("degree",(function(e,t){if(t={in:this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var n,r,i=[];for(n=0,r=e.length;n<r;n++){if("string"!=typeof e[n]&&"number"!=typeof e[n])throw"degree: Wrong arguments.";i.push(t[e[n]])}return i}throw"degree: Wrong arguments."})),c.addMethod("edges",(function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,n,r=[];for(t=0,n=e.length;t<n;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";r.push(this.edgesIndex[e[t]])}return r}throw"edges: Wrong arguments."})),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=c):(e.exports&&(t=e.exports=c),t.graph=c)}).call(this)}).call(window)},124:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,n,r){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof r&&r?n.embedObject(r):n},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var n,r,i=t||{},o=["x","y","ratio","angle"];for(n=0,r=o.length;n<r;n++)if(i[o[n]]!==e){if("number"!=typeof i[o[n]]||isNaN(i[o[n]]))throw'Value for "'+o[n]+'" is not a number.';this[o[n]]=i[o[n]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,n,r){r=r||{},n=n!==e?n:this.prefix,t=t!==e?t:this.readPrefix;var i,o,a,s=r.nodes||this.graph.nodes(),l=r.edges||this.graph.edges(),u=Math.cos(this.angle)/this.ratio,c=Math.sin(this.angle)/this.ratio,f=Math.pow(this.ratio,this.settings("nodesPowRatio")),d=Math.pow(this.ratio,this.settings("edgesPowRatio")),p=(r.width||0)/2-this.x*u-this.y*c,h=(r.height||0)/2-this.y*u+this.x*c;for(i=0,o=s.length;i<o;i++)(a=s[i])[n+"x"]=(a[t+"x"]||0)*u+(a[t+"y"]||0)*c+p,a[n+"y"]=(a[t+"y"]||0)*u-(a[t+"x"]||0)*c+h,a[n+"size"]=(a[t+"size"]||0)/f;for(i=0,o=l.length;i<o;i++)l[i][n+"size"]=(l[i][t+"size"]||0)/d;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,n){var r=0,i=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return n||(r=-(this.x*o+this.y*a)/this.ratio,i=-(this.y*o-this.x*a)/this.ratio),{x:(e*o+t*a)/this.ratio+r,y:(t*o-e*a)/this.ratio+i}},sigma.classes.camera.prototype.cameraPosition=function(e,t,n){var r=0,i=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return n||(r=-(this.x*o+this.y*a)/this.ratio,i=-(this.y*o-this.x*a)/this.ratio),{x:((e-r)*o-(t-i)*a)*this.ratio,y:((t-i)*o+(e-r)*a)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),n=sigma.utils.matrices.translation(-this.x,-this.y);return sigma.utils.matrices.multiply(n,sigma.utils.matrices.multiply(t,e))},sigma.classes.camera.prototype.getRectangle=function(e,t){var n=this.cameraPosition(e,0,!0),r=this.cameraPosition(0,t,!0),i=this.cameraPosition(e/2,t/2,!0),o=this.cameraPosition(e/4,0,!0).x,a=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-i.x-o,y1:this.y-i.y-a,x2:this.x-i.x+o+n.x,y2:this.y-i.y-a+n.y,height:Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y+2*a,2))}}}).call(this)}).call(window)},125:function(e,t,n){(function(){(function(n){"use strict";var r={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),n=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:n.x,y:n.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var n=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:n*t.x,y:n*t.y}},axisCollision:function(e,t,n){for(var r=[],i=[],o=0;o<4;o++){var a=this.projection(t[o],e),s=this.projection(n[o],e);r.push(a.x*e.x+a.y*e.y),i.push(s.x*e.x+s.y*e.y)}var l=Math.max.apply(Math,r),u=Math.max.apply(Math,i),c=Math.min.apply(Math,r);return Math.min.apply(Math,i)<=l&&u>=c},collision:function(e,t){for(var n=this.axis(e,t),r=!0,i=0;i<4;i++)r=r&&this.axisCollision(n[i],e,t);return r}};function i(e,t){for(var n=[],r=0;r<4;r++)e.x2>=t[r][0].x&&e.x1<=t[r][1].x&&e.y1+e.height>=t[r][0].y&&e.y1<=t[r][2].y&&n.push(r);return n}function o(e,t){for(var n=[],i=0;i<4;i++)r.collision(e,t[i])&&n.push(i);return n}function a(e,t){var n,r,i=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),s=Math.round(t.bounds.x),u=Math.round(t.bounds.y);switch(e){case 0:n=s,r=u;break;case 1:n=s+o,r=u;break;case 2:n=s,r=u+a;break;case 3:n=s+o,r=u+a}return l({x:n,y:r,width:o,height:a},i,t.maxElements,t.maxLevel)}function s(e,t,r){if(r.level<r.maxLevel)for(var o=i(t,r.corners),l=0,u=o.length;l<u;l++)r.nodes[o[l]]===n&&(r.nodes[o[l]]=a(o[l],r)),s(e,t,r.nodes[o[l]]);else r.elements.push(e)}function l(e,t,n,i){return{level:t||0,bounds:e,corners:r.splitSquare(e),maxElements:n||20,maxLevel:i||4,elements:[],nodes:[]}}var u=function(){this._geom=r,this._tree=null,this._cache={query:!1,result:!1}};u.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var n=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var i=0,o=e.length;i<o;i++)s(e[i],r.pointToSquare({x:e[i][n+"x"],y:e[i][n+"y"],size:e[i][n+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},u.prototype.point=function(e,t){return this._tree&&function e(t,r){if(r.level<r.maxLevel){var i=function(e,t){var n=t.x+t.width/2,r=t.y+t.height/2,i=e.y<r,o=e.x<n;return i?o?0:1:o?2:3}(t,r.bounds);return r.nodes[i]!==n?e(t,r.nodes[i]):[]}return r.elements}({x:e,y:t},this._tree)||[]},u.prototype.area=function(e){var t,a,s=JSON.stringify(e);if(this._cache.query===s)return this._cache.result;r.isAxisAligned(e)?(t=i,a=r.axisAlignedTopPoints(e)):(t=o,a=r.rectangleCorners(e));var l=this._tree?function e(t,r,i,o){if(o=o||{},r.level<r.maxLevel)for(var a=i(t,r.corners),s=0,l=a.length;s<l;s++)r.nodes[a[s]]!==n&&e(t,r.nodes[a[s]],i,o);else for(var u=0,c=r.elements.length;u<c;u++)o[r.elements[u].id]===n&&(o[r.elements[u].id]=r.elements[u]);return o}(a,this._tree,t):[],u=[];for(var c in l)u.push(l[c]);return this._cache.query=s,this._cache.result=u,u},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=u):(e.exports&&(t=e.exports=u),t.quad=u)}).call(this)}).call(window)},126:function(e,t,n){(function(){(function(n){"use strict";var r={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var n=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),r=Math.min(e.x1,e.x2,n.x),i=Math.max(e.x1,e.x2,n.x),o=Math.min(e.y1,e.y2,n.y),a=Math.max(e.y1,e.y2,n.y);return{x1:r-e.size,y1:o-e.size,x2:i+e.size,y2:o-e.size,height:a-o+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),n=Math.min(e.x,t.x1,t.x2),r=Math.max(e.x,t.x1,t.x2),i=Math.min(e.y,t.y1,t.y2),o=Math.max(e.y,t.y1,t.y2);return{x1:n-e.size,y1:i-e.size,x2:r+e.size,y2:i-e.size,height:o-i+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),n=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:n.x,y:n.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var n=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:n*t.x,y:n*t.y}},axisCollision:function(e,t,n){for(var r=[],i=[],o=0;o<4;o++){var a=this.projection(t[o],e),s=this.projection(n[o],e);r.push(a.x*e.x+a.y*e.y),i.push(s.x*e.x+s.y*e.y)}var l=Math.max.apply(Math,r),u=Math.max.apply(Math,i),c=Math.min.apply(Math,r);return Math.min.apply(Math,i)<=l&&u>=c},collision:function(e,t){for(var n=this.axis(e,t),r=!0,i=0;i<4;i++)r=r&&this.axisCollision(n[i],e,t);return r}};function i(e,t){for(var n=[],r=0;r<4;r++)e.x2>=t[r][0].x&&e.x1<=t[r][1].x&&e.y1+e.height>=t[r][0].y&&e.y1<=t[r][2].y&&n.push(r);return n}function o(e,t){for(var n=[],i=0;i<4;i++)r.collision(e,t[i])&&n.push(i);return n}function a(e,t){var n,r,i=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),s=Math.round(t.bounds.x),u=Math.round(t.bounds.y);switch(e){case 0:n=s,r=u;break;case 1:n=s+o,r=u;break;case 2:n=s,r=u+a;break;case 3:n=s+o,r=u+a}return l({x:n,y:r,width:o,height:a},i,t.maxElements,t.maxLevel)}function s(e,t,r){if(r.level<r.maxLevel)for(var o=i(t,r.corners),l=0,u=o.length;l<u;l++)r.nodes[o[l]]===n&&(r.nodes[o[l]]=a(o[l],r)),s(e,t,r.nodes[o[l]]);else r.elements.push(e)}function l(e,t,n,i){return{level:t||0,bounds:e,corners:r.splitSquare(e),maxElements:n||40,maxLevel:i||8,elements:[],nodes:[]}}var u=function(){this._geom=r,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};u.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var n,i,o,a,u,c=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var f=e.edges(),d=0,p=f.length;d<p;d++)i=e.nodes(f[d].source),o=e.nodes(f[d].target),u={x1:i[c+"x"],y1:i[c+"y"],x2:o[c+"x"],y2:o[c+"y"],size:f[d][c+"size"]||0},"curve"===f[d].type||"curvedArrow"===f[d].type?i.id===o.id?(a={x:i[c+"x"],y:i[c+"y"],size:i[c+"size"]||0},s(f[d],r.selfLoopToSquare(a),this._tree)):(n=sigma.utils.getQuadraticControlPoint(u.x1,u.y1,u.x2,u.y2),s(f[d],r.quadraticCurveToSquare(u,n),this._tree)):s(f[d],r.lineToSquare(u),this._tree);return this._cache={query:!1,result:!1},this._tree},u.prototype.point=function(e,t){return this._enabled&&this._tree&&function e(t,r){if(r.level<r.maxLevel){var i=function(e,t){var n=t.x+t.width/2,r=t.y+t.height/2,i=e.y<r,o=e.x<n;return i?o?0:1:o?2:3}(t,r.bounds);return r.nodes[i]!==n?e(t,r.nodes[i]):[]}return r.elements}({x:e,y:t},this._tree)||[]},u.prototype.area=function(e){if(!this._enabled)return[];var t,a,s=JSON.stringify(e);if(this._cache.query===s)return this._cache.result;r.isAxisAligned(e)?(t=i,a=r.axisAlignedTopPoints(e)):(t=o,a=r.rectangleCorners(e));var l=this._tree?function e(t,r,i,o){if(o=o||{},r.level<r.maxLevel)for(var a=i(t,r.corners),s=0,l=a.length;s<l;s++)r.nodes[a[s]]!==n&&e(t,r.nodes[a[s]],i,o);else for(var u=0,c=r.elements.length;u<c;u++)o[r.elements[u].id]===n&&(o[r.elements[u].id]=r.elements[u]);return o}(a,this._tree,t):[],u=[];for(var c in l)u.push(l[c]);return this._cache.query=s,this._cache.result=u,u},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=u):(e.exports&&(t=e.exports=u),t.edgequad=u)}).call(this)}).call(window)},127:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,p,h=this,m=e,g=t,b=n;function y(e){var t,n,d;if(b("mouseEnabled")&&(h.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),u))return c=!0,f=!0,p&&clearTimeout(p),p=setTimeout((function(){c=!1}),b("dragTimeout")),sigma.misc.animation.killAll(g),g.isMoving=!0,d=g.cameraPosition(sigma.utils.getX(e)-s,sigma.utils.getY(e)-l,!0),t=r-d.x,n=i-d.y,t===g.x&&n===g.y||(o=g.x,a=g.y,g.goTo({x:t,y:n})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function v(e){if(b("mouseEnabled")&&u){u=!1,p&&clearTimeout(p),g.isMoving=!1;var t=sigma.utils.getX(e),n=sigma.utils.getY(e);c?(sigma.misc.animation.killAll(g),sigma.misc.animation.camera(g,{x:g.x+b("mouseInertiaRatio")*(g.x-o),y:g.y+b("mouseInertiaRatio")*(g.y-a)},{easing:"quadraticOut",duration:b("mouseInertiaDuration")})):s===t&&l===n||g.goTo({x:g.x,y:g.y}),h.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),c=!1}}function x(e){if(b("mouseEnabled"))switch(r=g.x,i=g.y,o=g.x,a=g.y,s=sigma.utils.getX(e),l=sigma.utils.getY(e),f=!1,d=(new Date).getTime(),e.which){case 2:break;case 3:h.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,s,l));break;default:u=!0,h.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,s,l))}}function _(e){b("mouseEnabled")&&h.dispatchEvent("mouseout")}function w(e){if(b("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-d>100&&f,h.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function O(e){var t,n,r,i=sigma.utils.getDelta(e);if(b("mouseEnabled")&&b("mouseWheelEnabled")&&0!==i)return n=i>0?1/b("zoomingRatio"):b("zoomingRatio"),t=g.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),r={duration:b("mouseZoomDuration")},sigma.utils.zoomTo(g,t.x,t.y,n,r),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(m,"click",(function(e){var t,n,r;if(b("mouseEnabled"))return n=1/b("doubleClickZoomingRatio"),h.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,s,l)),b("doubleClickEnabled")&&(t=g.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),r={duration:b("doubleClickZoomDuration")},sigma.utils.zoomTo(g,t.x,t.y,n,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1})),m.addEventListener("DOMMouseScroll",O,!1),m.addEventListener("mousewheel",O,!1),m.addEventListener("mousemove",y,!1),m.addEventListener("mousedown",x,!1),m.addEventListener("click",w,!1),m.addEventListener("mouseout",_,!1),document.addEventListener("mouseup",v,!1),this.kill=function(){sigma.utils.unbindDoubleClick(m,"click"),m.removeEventListener("DOMMouseScroll",O),m.removeEventListener("mousewheel",O),m.removeEventListener("mousemove",y),m.removeEventListener("mousedown",x),m.removeEventListener("click",w),m.removeEventListener("mouseout",_),document.removeEventListener("mouseup",v)}}}).call(this)}).call(window)},128:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,n){var r,i,o,a,s,l,u,c,f,d,p,h,m,g,b,y,v=this,x=e,_=t,w=n,O=[];function E(e){var t=sigma.utils.getOffset(x);return{x:e.pageX-t.left,y:e.pageY-t.top}}function k(e){var t,n,g,b,y,v;if(w("touchEnabled"))switch((O=e.touches).length){case 1:_.isMoving=!0,m=1,r=_.x,i=_.y,s=_.x,l=_.y,y=E(O[0]),u=y.x,c=y.y;break;case 2:return _.isMoving=!0,m=2,y=E(O[0]),v=E(O[1]),t=y.x,g=y.y,n=v.x,b=v.y,s=_.x,l=_.y,o=_.angle,a=_.ratio,r=_.x,i=_.y,u=t,c=g,f=n,d=b,p=Math.atan2(d-c,f-u),h=Math.sqrt((d-c)*(d-c)+(f-u)*(f-u)),e.preventDefault(),!1}}function S(e){if(w("touchEnabled")){O=e.touches;var t=w("touchInertiaRatio");switch(y&&(g=!1,clearTimeout(y)),m){case 2:if(1===e.touches.length){k(e),e.preventDefault();break}case 1:_.isMoving=!1,v.dispatchEvent("stopDrag"),g&&(b=!1,sigma.misc.animation.camera(_,{x:_.x+t*(_.x-s),y:_.y+t*(_.y-l)},{easing:"quadraticOut",duration:w("touchInertiaDuration")})),g=!1,m=0}}}function T(e){if(!b&&w("touchEnabled")){var t,n,x,k,S,T,j,A,P,C,N,M,I,D,R,z,L;switch(O=e.touches,g=!0,y&&clearTimeout(y),y=setTimeout((function(){g=!1}),w("dragTimeout")),m){case 1:t=(A=E(O[0])).x,x=A.y,C=_.cameraPosition(t-u,x-c,!0),D=r-C.x,R=i-C.y,D===_.x&&R===_.y||(s=_.x,l=_.y,_.goTo({x:D,y:R}),v.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,A.x,A.y)),v.dispatchEvent("drag"));break;case 2:A=E(O[0]),P=E(O[1]),t=A.x,x=A.y,n=P.x,k=P.y,N=_.cameraPosition((u+f)/2-sigma.utils.getCenter(e).x,(c+d)/2-sigma.utils.getCenter(e).y,!0),j=_.cameraPosition((t+n)/2-sigma.utils.getCenter(e).x,(x+k)/2-sigma.utils.getCenter(e).y,!0),M=Math.atan2(k-x,n-t)-p,I=Math.sqrt((k-x)*(k-x)+(n-t)*(n-t))/h,t=N.x,x=N.y,z=a/I,x*=I,L=o-M,n=(t*=I)*(S=Math.cos(-M))+x*(T=Math.sin(-M)),x=k=x*S-t*T,D=(t=n)-j.x+r,R=x-j.y+i,z===_.ratio&&L===_.angle&&D===_.x&&R===_.y||(s=_.x,l=_.y,_.angle,_.ratio,_.goTo({x:D,y:R,angle:L,ratio:z}),v.dispatchEvent("drag"))}return e.preventDefault(),!1}}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(x,"touchstart",(function(e){var t,n,r;if(e.touches&&1===e.touches.length&&w("touchEnabled"))return b=!0,n=1/w("doubleClickZoomingRatio"),t=E(e.touches[0]),v.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,t.x,t.y)),w("doubleClickEnabled")&&(t=_.cameraPosition(t.x-sigma.utils.getCenter(e).x,t.y-sigma.utils.getCenter(e).y,!0),r={duration:w("doubleClickZoomDuration"),onComplete:function(){b=!1}},sigma.utils.zoomTo(_,t.x,t.y,n,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1})),x.addEventListener("touchstart",k,!1),x.addEventListener("touchend",S,!1),x.addEventListener("touchcancel",S,!1),x.addEventListener("touchleave",S,!1),x.addEventListener("touchmove",T,!1),this.kill=function(){sigma.utils.unbindDoubleClick(x,"touchstart"),x.addEventListener("touchstart",k),x.addEventListener("touchend",S),x.addEventListener("touchcancel",S),x.addEventListener("touchleave",S),x.addEventListener("touchmove",T)}}}).call(this)}).call(window)},129:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,n,r){if("object"!=typeof r)throw"sigma.renderers.canvas: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var i,o,a,s;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?n.embedObjects(r.settings):n,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],i=0,o=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;i<o;i++)s="function"==typeof a[i]?a[i]:sigma.captors[a[i]],this.captors.push(new s(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var n,r,i,o,a,s,l,u,c,f,d,p,h,m={},g=this.graph,b=this.graph.nodes,y=(this.options.prefix,this.settings(t,"drawEdges")),v=this.settings(t,"drawNodes"),x=this.settings(t,"drawLabels"),_=this.settings(t,"drawEdgeLabels"),w=this.settings.embedObjects(t,{prefix:this.options.prefix});for(i in this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(y=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear(),this.jobs)conrad.hasJob(i)&&conrad.killJob(i);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),n=this.nodesOnScreen,r=0,o=n.length;r<o;r++)m[n[r].id]=n[r];if(y){for(n=g.edges(),r=0,o=n.length;r<o;r++)!m[(a=n[r]).source]&&!m[a.target]||a.hidden||b(a.source).hidden||b(a.target).hidden||this.edgesOnScreen.push(a);if(this.settings(t,"batchEdgesDrawing"))s="edges_"+this.conradId,p=w("canvasEdgesBatchSize"),o=(f=this.edgesOnScreen).length,c=0,l=Math.min(f.length,c+p),u=function(){for(h=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",d=sigma.canvas.edges,r=c;r<l;r++)a=f[r],(d[a.type||this.settings(t,"defaultEdgeType")]||d.def)(a,g.nodes(a.source),g.nodes(a.target),this.contexts.edges,w);if(_)for(d=sigma.canvas.edges.labels,r=c;r<l;r++)(a=f[r]).hidden||(d[a.type||this.settings(t,"defaultEdgeType")]||d.def)(a,g.nodes(a.source),g.nodes(a.target),this.contexts.labels,w);return this.contexts.edges.globalCompositeOperation=h,l===f.length?(delete this.jobs[s],!1):(c=l+1,l=Math.min(f.length,c+p),!0)},this.jobs[s]=u,conrad.addJob(s,u.bind(this));else{for(d=sigma.canvas.edges,n=this.edgesOnScreen,r=0,o=n.length;r<o;r++)a=n[r],(d[a.type||this.settings(t,"defaultEdgeType")]||d.def)(a,g.nodes(a.source),g.nodes(a.target),this.contexts.edges,w);if(_)for(d=sigma.canvas.edges.labels,n=this.edgesOnScreen,r=0,o=n.length;r<o;r++)n[r].hidden||(d[n[r].type||this.settings(t,"defaultEdgeType")]||d.def)(n[r],g.nodes(n[r].source),g.nodes(n[r].target),this.contexts.labels,w)}}if(v)for(d=sigma.canvas.nodes,n=this.nodesOnScreen,r=0,o=n.length;r<o;r++)n[r].hidden||(d[n[r].type||this.settings(t,"defaultNodeType")]||d.def)(n[r],this.contexts.nodes,w);if(x)for(d=sigma.canvas.labels,n=this.nodesOnScreen,r=0,o=n.length;r<o;r++)n[r].hidden||(d[n[r].type||this.settings(t,"defaultNodeType")]||d.def)(n[r],this.contexts.labels,w);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var n=document.createElement(e);n.style.position="absolute",n.setAttribute("class","sigma-"+t),this.domElements[t]=n,this.container.appendChild(n),"canvas"===e.toLowerCase()&&(this.contexts[t]=n.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,n){var r,i=this.width,o=this.height,a=sigma.utils.getPixelRatio();if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),i!==this.width||o!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=n+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.domElements[r].setAttribute("width",t*a+"px"),this.domElements[r].setAttribute("height",n*a+"px"),1!==a&&this.contexts[r].scale(a,a));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();for(e in delete this.captors,this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}).call(this)}).call(window)},130:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,n){var r,i=n("prefix")||"",o=e[i+"size"];o<n("labelThreshold")||e.label&&"string"==typeof e.label&&(r="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*o,t.font=(n("fontStyle")?n("fontStyle")+" ":"")+r+"px "+n("font"),t.fillStyle="node"===n("labelColor")?e.color||n("defaultNodeColor"):n("defaultLabelColor"),t.fillText(e.label,Math.round(e[i+"x"]+o+3),Math.round(e[i+"y"]+r/3)))}}).call(this)}).call(window)},131:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,n){var r,i,o,a,s,l=n("hoverFontStyle")||n("fontStyle"),u=n("prefix")||"",c=e[u+"size"],f="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*c;t.font=(l?l+" ":"")+f+"px "+(n("hoverFont")||n("font")),t.beginPath(),t.fillStyle="node"===n("labelHoverBGColor")?e.color||n("defaultNodeColor"):n("defaultHoverLabelBGColor"),e.label&&n("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=n("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(r=Math.round(e[u+"x"]-f/2-2),i=Math.round(e[u+"y"]-f/2-2),o=Math.round(t.measureText(e.label).width+f/2+c+7),a=Math.round(f+4),s=Math.round(f/2+2),t.moveTo(r,i+s),t.arcTo(r,i,r+s,i,s),t.lineTo(r+o,i),t.lineTo(r+o,i+a),t.lineTo(r+s,i+a),t.arcTo(r,i+a,r,i+a-s,s),t.lineTo(r,i+s),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===n("nodeBorderColor")?e.color||n("defaultNodeColor"):n("defaultNodeBorderColor"),t.arc(e[u+"x"],e[u+"y"],c+n("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill()),(sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def)(e,t,n),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===n("labelHoverColor")?e.color||n("defaultNodeColor"):n("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[u+"x"]+c+3),Math.round(e[u+"y"]+f/3)))}}).call(this)}).call(window)},132:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,n){var r=n("prefix")||"";t.fillStyle=e.color||n("defaultNodeColor"),t.beginPath(),t.arc(e[r+"x"],e[r+"y"],e[r+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}()}).call(window)},133:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,n,r,i){var o=e.color,a=i("prefix")||"",s=e[a+"size"]||1,l=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}r.strokeStyle=o,r.lineWidth=s,r.beginPath(),r.moveTo(t[a+"x"],t[a+"y"]),r.lineTo(n[a+"x"],n[a+"y"]),r.stroke()}}()}).call(window)},134:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,n,r,i){var o=e.color,a=i("prefix")||"",s=e[a+"size"]||1,l=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,s*=i("edgeHoverSizeRatio"),r.strokeStyle=o,r.lineWidth=s,r.beginPath(),r.moveTo(t[a+"x"],t[a+"y"]),r.lineTo(n[a+"x"],n[a+"y"]),r.stroke()}}()}).call(window)},135:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,n,r,i){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,r,i),(sigma.canvas.hovers[n.type]||sigma.canvas.hovers.def)(n,r,i)}}).call(this)}).call(window)},136:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,n){var r,i,o,a,s,l,u,c,f=this.graph.nodes(),d=this.graph.edges(),p=this.settings.embedObjects(n||{}),h=p("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),m=h.minX,g=h.minY,b=h.maxX,y=h.maxY,v=h.sizeMax,x=h.weightMax,_=p("width")||1,w=p("height")||1,O=p("autoRescale"),E={nodePosition:1,nodeSize:1,edgeSize:1};for(O instanceof Array||(O=["nodePosition","nodeSize","edgeSize"]),r=0,i=O.length;r<i;r++)if(!E[O[r]])throw new Error('The rescale setting "'+O[r]+'" is not recognized.');var k=~O.indexOf("nodePosition"),S=~O.indexOf("nodeSize"),T=~O.indexOf("edgeSize");for(u="outside"===p("scalingMode")?Math.max(_/Math.max(b-m,1),w/Math.max(y-g,1)):Math.min(_/Math.max(b-m,1),w/Math.max(y-g,1)),b+=c=(p("rescaleIgnoreSize")?0:(p("maxNodeSize")||v)/u)+(p("sideMargin")||0),m-=c,y+=c,g-=c,u="outside"===p("scalingMode")?Math.max(_/Math.max(b-m,1),w/Math.max(y-g,1)):Math.min(_/Math.max(b-m,1),w/Math.max(y-g,1)),p("maxNodeSize")||p("minNodeSize")?p("maxNodeSize")===p("minNodeSize")?(o=0,a=+p("maxNodeSize")):(o=(p("maxNodeSize")-p("minNodeSize"))/v,a=+p("minNodeSize")):(o=1,a=0),p("maxEdgeSize")||p("minEdgeSize")?p("maxEdgeSize")===p("minEdgeSize")?(s=0,l=+p("minEdgeSize")):(s=(p("maxEdgeSize")-p("minEdgeSize"))/x,l=+p("minEdgeSize")):(s=1,l=0),r=0,i=d.length;r<i;r++)d[r][t+"size"]=d[r][e+"size"]*(T?s:1)+(T?l:0);for(r=0,i=f.length;r<i;r++)f[r][t+"size"]=f[r][e+"size"]*(S?o:1)+(S?a:0),f[r][t+"x"]=(f[r][e+"x"]-(b+m)/2)*(k?u:1),f[r][t+"y"]=(f[r][e+"y"]-(y+g)/2)*(k?u:1)},sigma.utils.getBoundaries=function(e,t,n){var r,i,o=e.edges(),a=e.nodes(),s=-1/0,l=-1/0,u=1/0,c=1/0,f=-1/0,d=-1/0;if(n)for(r=0,i=o.length;r<i;r++)s=Math.max(o[r][t+"size"],s);for(r=0,i=a.length;r<i;r++)l=Math.max(a[r][t+"size"],l),f=Math.max(a[r][t+"x"],f),u=Math.min(a[r][t+"x"],u),d=Math.max(a[r][t+"y"],d),c=Math.min(a[r][t+"y"],c);return{weightMax:s=s||1,sizeMax:l=l||1,minX:u,minY:c,maxX:f,maxY:d}}}).call(this)}).call(window)},137:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var n,r,i;if(t+""!=e+""){for(n=0,r=(i=this.graph.nodes()).length;n<r;n++)i[n][t+"x"]=i[n][e+"x"],i[n][t+"y"]=i[n][e+"y"],i[n][t+"size"]=i[n][e+"size"];for(n=0,r=(i=this.graph.edges()).length;n<r;n++)i[n][t+"size"]=i[n][e+"size"]}}}).call(this)}).call(window)},138:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t,n=(t=0,function(){return""+ ++t});sigma.misc.animation.camera=function(t,r,i){if(!(t instanceof sigma.classes.camera&&"object"==typeof r&&r))throw"animation.camera: Wrong arguments.";if("number"!=typeof r.x&&"number"!=typeof r.y&&"number"!=typeof r.ratio&&"number"!=typeof r.angle)throw"There must be at least one valid coordinate in the given val.";var o,a,s,l,u,c=i||{},f=sigma.utils.dateNow();return u={x:t.x,y:t.y,ratio:t.ratio,angle:t.angle},c.duration,l="function"!=typeof c.easing?sigma.utils.easings[c.easing||"quadraticInOut"]:c.easing,o=function(){var n,i=c.duration?(sigma.utils.dateNow()-f)/c.duration:1;i>=1?(t.isAnimated=!1,t.goTo({x:r.x!==e?r.x:u.x,y:r.y!==e?r.y:u.y,ratio:r.ratio!==e?r.ratio:u.ratio,angle:r.angle!==e?r.angle:u.angle}),cancelAnimationFrame(a),delete sigma.misc.animation.running[a],"function"==typeof c.onComplete&&c.onComplete()):(n=l(i),t.isAnimated=!0,t.goTo({x:r.x!==e?u.x+(r.x-u.x)*n:u.x,y:r.y!==e?u.y+(r.y-u.y)*n:u.y,ratio:r.ratio!==e?u.ratio+(r.ratio-u.ratio)*n:u.ratio,angle:r.angle!==e?u.angle+(r.angle-u.angle)*n:u.angle}),"function"==typeof c.onNewFrame&&c.onNewFrame(),s.frameId=requestAnimationFrame(o))},a=n(),s={frameId:requestAnimationFrame(o),target:t,type:"camera",options:c,fn:o},sigma.misc.animation.running[a]=s,a},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,n,r=0,i="string"==typeof e?e:null,o="object"==typeof e?e:null,a=sigma.misc.animation.running;for(n in a)i&&a[n].type!==i||o&&a[n].target!==o||(t=sigma.misc.animation.running[n],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[n],"camera"===t.type&&(t.target.isAnimated=!1),r++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return r},sigma.misc.animation.has=function(e){var t,n="string"==typeof e?e:null,r="object"==typeof e?e:null,i=sigma.misc.animation.running;for(t in i)if(!(n&&i[t].type!==n||r&&i[t].target!==r))return!0;return!1}}).call(this)}).call(window)},139:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){var n,r,i,o,a=this;function s(e){e&&(i="x"in e.data?e.data.x:i,o="y"in e.data?e.data.y:o);var n,r,s,l,u,c,f,d,p=[],h=i+a.width/2,m=o+a.height/2,g=a.camera.cameraPosition(i,o),b=a.camera.quadtree.point(g.x,g.y);if(b.length)for(n=0,s=b.length;n<s;n++)if(u=(l=b[n])[t+"x"],c=l[t+"y"],f=l[t+"size"],!l.hidden&&h>u-f&&h<u+f&&m>c-f&&m<c+f&&Math.sqrt(Math.pow(h-u,2)+Math.pow(m-c,2))<f){for(d=!1,r=0;r<p.length;r++)if(l.size>p[r].size){p.splice(r,0,l),d=!0;break}d||p.push(l)}return p}function l(n){if(!a.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&a instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");n&&(i="x"in n.data?n.data.x:i,o="y"in n.data?n.data.y:o);var s,l,u,c,f,d,p,h,m,g,b=a.settings("edgeHoverPrecision"),y={},v=[],x=i+a.width/2,_=o+a.height/2,w=a.camera.cameraPosition(i,o),O=[];if(r)for(s=0,u=(c=a.camera.quadtree.area(a.camera.getRectangle(a.width,a.height))).length;s<u;s++)y[c[s].id]=c[s];function E(e,t){for(g=!1,l=0;l<e.length;l++)if(t.size>e[l].size){e.splice(l,0,t),g=!0;break}g||e.push(t)}if(a.camera.edgequadtree!==e&&(O=a.camera.edgequadtree.point(w.x,w.y)),O.length)for(s=0,u=O.length;s<u;s++)f=O[s],p=a.graph.nodes(f.source),h=a.graph.nodes(f.target),d=f[t+"size"]||f["read_"+t+"size"],!f.hidden&&!p.hidden&&!h.hidden&&(!r||y[f.source]||y[f.target])&&sigma.utils.getDistance(p[t+"x"],p[t+"y"],x,_)>p[t+"size"]&&sigma.utils.getDistance(h[t+"x"],h[t+"y"],x,_)>h[t+"size"]&&("curve"==f.type||"curvedArrow"==f.type?p.id===h.id?(m=sigma.utils.getSelfLoopControlPoints(p[t+"x"],p[t+"y"],p[t+"size"]),sigma.utils.isPointOnBezierCurve(x,_,p[t+"x"],p[t+"y"],h[t+"x"],h[t+"y"],m.x1,m.y1,m.x2,m.y2,Math.max(d,b))&&E(v,f)):(m=sigma.utils.getQuadraticControlPoint(p[t+"x"],p[t+"y"],h[t+"x"],h[t+"y"]),sigma.utils.isPointOnQuadraticCurve(x,_,p[t+"x"],p[t+"y"],h[t+"x"],h[t+"y"],m.x,m.y,Math.max(d,b))&&E(v,f)):sigma.utils.isPointOnSegment(x,_,p[t+"x"],p[t+"y"],h[t+"x"],h[t+"y"],Math.max(d,b))&&E(v,f));return v}function u(e){var t,n,r={},i={};function o(e){if(a.settings("eventsEnabled")){t=s(e),n=l(e);var o,u,c,f,d=[],p=[],h={},m=t.length,g=[],b=[],y={},v=n.length;for(o=0;o<m;o++)h[(c=t[o]).id]=c,r[c.id]||(p.push(c),r[c.id]=c);for(u in r)h[u]||(d.push(r[u]),delete r[u]);for(o=0,m=p.length;o<m;o++)a.dispatchEvent("overNode",{node:p[o],captor:e.data});for(o=0,m=d.length;o<m;o++)a.dispatchEvent("outNode",{node:d[o],captor:e.data});for(p.length&&a.dispatchEvent("overNodes",{nodes:p,captor:e.data}),d.length&&a.dispatchEvent("outNodes",{nodes:d,captor:e.data}),o=0;o<v;o++)y[(f=n[o]).id]=f,i[f.id]||(b.push(f),i[f.id]=f);for(u in i)y[u]||(g.push(i[u]),delete i[u]);for(o=0,v=b.length;o<v;o++)a.dispatchEvent("overEdge",{edge:b[o],captor:e.data});for(o=0,v=g.length;o<v;o++)a.dispatchEvent("outEdge",{edge:g[o],captor:e.data});b.length&&a.dispatchEvent("overEdges",{edges:b,captor:e.data}),g.length&&a.dispatchEvent("outEdges",{edges:g,captor:e.data})}}e.bind("click",(function(e){a.settings("eventsEnabled")&&(a.dispatchEvent("click",e.data),t=s(e),n=l(e),t.length?(a.dispatchEvent("clickNode",{node:t[0],captor:e.data}),a.dispatchEvent("clickNodes",{node:t,captor:e.data})):n.length?(a.dispatchEvent("clickEdge",{edge:n[0],captor:e.data}),a.dispatchEvent("clickEdges",{edge:n,captor:e.data})):a.dispatchEvent("clickStage",{captor:e.data}))})),e.bind("mousedown",o),e.bind("mouseup",o),e.bind("mousemove",o),e.bind("mouseout",(function(e){if(a.settings("eventsEnabled")){var t,n,o,s,l=[],u=[];for(t in r)l.push(r[t]);for(r={},n=0,o=l.length;n<o;n++)a.dispatchEvent("outNode",{node:l[n],captor:e.data});for(l.length&&a.dispatchEvent("outNodes",{nodes:l,captor:e.data}),i={},n=0,s=u.length;n<s;n++)a.dispatchEvent("outEdge",{edge:u[n],captor:e.data});u.length&&a.dispatchEvent("outEdges",{edges:u,captor:e.data})}})),e.bind("doubleclick",(function(e){a.settings("eventsEnabled")&&(a.dispatchEvent("doubleClick",e.data),t=s(e),n=l(e),t.length?(a.dispatchEvent("doubleClickNode",{node:t[0],captor:e.data}),a.dispatchEvent("doubleClickNodes",{node:t,captor:e.data})):n.length?(a.dispatchEvent("doubleClickEdge",{edge:n[0],captor:e.data}),a.dispatchEvent("doubleClickEdges",{edge:n,captor:e.data})):a.dispatchEvent("doubleClickStage",{captor:e.data}))})),e.bind("rightclick",(function(e){a.settings("eventsEnabled")&&(a.dispatchEvent("rightClick",e.data),t=s(e),n=l(e),t.length?(a.dispatchEvent("rightClickNode",{node:t[0],captor:e.data}),a.dispatchEvent("rightClickNodes",{node:t,captor:e.data})):n.length?(a.dispatchEvent("rightClickEdge",{edge:n[0],captor:e.data}),a.dispatchEvent("rightClickEdges",{edge:n,captor:e.data})):a.dispatchEvent("rightClickStage",{captor:e.data}))})),a.bind("render",o)}for(n=0,r=this.captors.length;n<r;n++)u(this.captors[n])}}).call(this)}).call(window)},140:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){var t=this,n=this.graph;function r(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(t.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(t.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(t.settings("classPrefix")+"-hover")}}function i(e){if(t.settings("eventsEnabled")){t.dispatchEvent("click",e);var i=new r(e.target);i.isNode()?t.dispatchEvent("clickNode",{node:n.nodes(i.attr("data-node-id"))}):t.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function o(e){if(t.settings("eventsEnabled")){t.dispatchEvent("doubleClick",e);var i=new r(e.target);i.isNode()?t.dispatchEvent("doubleClickNode",{node:n.nodes(i.attr("data-node-id"))}):t.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}e.addEventListener("click",i,!1),sigma.utils.doubleClick(e,"click",o),e.addEventListener("touchstart",i,!1),sigma.utils.doubleClick(e,"touchstart",o),e.addEventListener("mouseover",(function(e){var i=e.toElement||e.target;if(t.settings("eventsEnabled")&&i){var o=new r(i);if(o.isNode())t.dispatchEvent("overNode",{node:n.nodes(o.attr("data-node-id"))});else if(o.isEdge()){var a=n.edges(o.attr("data-edge-id"));t.dispatchEvent("overEdge",{edge:a,source:n.nodes(a.source),target:n.nodes(a.target)})}}}),!0),e.addEventListener("mouseout",(function(e){var i=e.fromElement||e.originalTarget;if(t.settings("eventsEnabled")){var o=new r(i);if(o.isNode())t.dispatchEvent("outNode",{node:n.nodes(o.attr("data-node-id"))});else if(o.isEdge()){var a=n.edges(o.attr("data-edge-id"));t.dispatchEvent("outEdge",{edge:a,source:n.nodes(a.source),target:n.nodes(a.target)})}}}),!0)}}).call(this)}).call(window)},141:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){var t=this,n={},r={};function i(){var i,o,a,s,l,u=t.contexts.hover.canvas,c=t.settings("defaultNodeType"),f=t.settings("defaultEdgeType"),d=sigma.canvas.hovers,p=sigma.canvas.edgehovers,h=sigma.canvas.extremities,m=t.settings.embedObjects({prefix:e});if(t.contexts.hover.clearRect(0,0,u.width,u.height),m("enableHovering")&&m("singleHover")&&Object.keys(n).length&&(d[(s=n[Object.keys(n)[0]]).type]||d[c]||d.def)(s,t.contexts.hover,m),m("enableHovering")&&!m("singleHover"))for(i in n)(d[n[i].type]||d[c]||d.def)(n[i],t.contexts.hover,m);if(m("enableEdgeHovering")&&m("singleHover")&&Object.keys(r).length&&(l=r[Object.keys(r)[0]],o=t.graph.nodes(l.source),a=t.graph.nodes(l.target),l.hidden||((p[l.type]||p[f]||p.def)(l,o,a,t.contexts.hover,m),m("edgeHoverExtremities")?(h[l.type]||h.def)(l,o,a,t.contexts.hover,m):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,t.contexts.hover,m),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,t.contexts.hover,m)))),m("enableEdgeHovering")&&!m("singleHover"))for(i in r)l=r[i],o=t.graph.nodes(l.source),a=t.graph.nodes(l.target),l.hidden||((p[l.type]||p[f]||p.def)(l,o,a,t.contexts.hover,m),m("edgeHoverExtremities")?(h[l.type]||h.def)(l,o,a,t.contexts.hover,m):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,t.contexts.hover,m),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,t.contexts.hover,m)))}this.bind("overNode",(function(e){var t=e.data.node;t.hidden||(n[t.id]=t,i())})),this.bind("outNode",(function(e){delete n[e.data.node.id],i()})),this.bind("overEdge",(function(e){var t=e.data.edge;t.hidden||(r[t.id]=t,i())})),this.bind("outEdge",(function(e){delete r[e.data.edge.id],i()})),this.bind("render",(function(e){i()}))}}).call(this)}).call(window)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(0);function i(t,n){const i=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(t)||(o=t,"function"==typeof e&&Object(r.D)(e.isBuffer)&&e.isBuffer(o))?i(JSON.parse(t)):function(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t));var o}i.responseType="json"}).call(this,n(91).Buffer)},function(e,t,n){var r=n(761);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],d=n[1],p=n.index;if(s+=e.slice(a,p),a=p+f.length,d)s+=d[1];else{var h=e[a],m=n[2],g=n[3],b=n[4],y=n[5],v=n[6],x=n[7];s&&(r.push(s),s="");var _=null!=m&&null!=h&&h!==m,w="+"===v||"*"===v,O="?"===v||"*"===v,E=n[2]||c,k=b||y;r.push({name:g||o++,prefix:m||"",delimiter:E,optional:O,repeat:w,partial:_,asterisk:!!x,pattern:k?u(k):x?".*":"[^"+l(E)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",s=n||{},l=(i||{}).pretty?a:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var f,d=s[c.name];if(null==d){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(f=l(d[p]),!t[u].test(f))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===p?c.prefix:c.delimiter)+f}}else{if(f=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!t[u].test(f))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+f+'"');o+=c.prefix+f}}else o+=c}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function f(e){return e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var u=e[s];if("string"==typeof u)a+=l(u);else{var d=l(u.prefix),p="(?:"+u.pattern+")";t.push(u),u.repeat&&(p+="(?:"+d+p+")*"),a+=p=u.optional?u.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var h=l(n.delimiter||"/"),m=a.slice(-h.length)===h;return i||(a=(m?a.slice(0,-h.length):a)+"(?:"+h+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+h+"|$)",c(new RegExp("^"+a,f(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,l=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<l.length;n++){var u=l[n],c=e(t[u]);c&&(a&&(a+=","),a+=JSON.stringify(u)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}},function(e,t,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,t){var n,i,o;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),i=""===n?1/0:void 0===t.maxLength?80:t.maxLength,o=t.replacer,function e(t,a,s){var l,u,c,f,d,p,h,m,g,b,y,v;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(y=JSON.stringify(t,o)))return y;if(h=i-a.length-s,y.length<=h&&(g=y.replace(r,(function(e,t){return t||e+" "}))).length<=h)return g;if(null!=o&&(t=JSON.parse(y),o=void 0),"object"==typeof t&&null!==t){if(m=a+n,c=[],u=0,Array.isArray(t))for(b="[",l="]",h=t.length;u<h;u++)c.push(e(t[u],m,u===h-1?0:1)||"null");else for(b="{",l="}",h=(p=Object.keys(t)).length;u<h;u++)f=p[u],d=JSON.stringify(f)+": ",void 0!==(v=e(t[f],m,d.length+(u===h-1?0:1)))&&c.push(d+v);if(c.length>0)return[b,n+c.join(",\n"+m),l].join("\n"+a)}return y}(e,"",0)}},,,,,function(e){e.exports=JSON.parse('{"id":"resource","title":"Resource","description":"Default resources schemas of the peritext ecosystem","$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"type":{"type":"string","enum":["resource"],"default":"resource","editable":false},"metadata":{"description":"metadata of the resource","type":"object","properties":{"type":{"type":"string","enum":["section","image","glossary","images","table","bib","video","webpage","embed"]},"title":{"type":"string","description":"Name of the resource","default":""},"authors":{"type":"array","description":"creators of the resource","default":[],"items":{"type":"object","properties":{"given":{"type":"string","default":""},"family":{"type":"string","default":""},"role":{"type":"string","default":""}},"required":["given","family"]}},"description":{"type":"string","description":"description of the resource","longString":true,"default":""},"source":{"type":"string","description":"provenance of the resource","longString":true,"default":""}}},"data":{"default":{},"description":"data of the resource (depends on resource type)","anyOfFrom":"metadata.resourceType","anyOf":[{"$ref":"#/definitions/image"},{"$ref":"#/definitions/table"},{"$ref":"#/definitions/bib"},{"$ref":"#/definitions/video"},{"$ref":"#/definitions/webpage"},{"$ref":"#/definitions/glossary"},{"$ref":"#/definitions/embed"}]}},"required":["type","metadata","data"],"definitions":{"section":{"type":"object","properties":{"contents":{"$ref":"#/definitions/contents"}},"titlePath":["metadata","title"],"additionalProperties":false,"showMetadata":true},"glossary":{"type":"object","titlePath":["data","name"],"properties":{"entryType":{"type":"string","enum":["notion","place","event","person","other"]},"name":{"type":"string","longString":false},"givenName":{"type":"string"},"description":{"type":"string","longString":true},"location":{"type":"object","description":"geolocalization the entry","properties":{"latitude":{"type":"number"},"longitude":{"type":"number"},"address":{"type":"string"}}},"dates":{"type":"object","description":"date bounds of the entry","properties":{"start":{"type":"number"},"end":{"type":"number"}}},"contents":{"type":"object"}},"showMetadata":false,"additionalProperties":false},"image":{"type":"object","properties":{"images":{"type":"array","default":[{}],"items":{"type":"object","properties":{"rgbImageAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"rgb/rvb image asset uuid of the resource","acceptMimetypes":["image/png","image/svg+xml","image/jpeg","image/jpg","image/gif"]},"cmybImageAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"cmyb/cmjn image asset uuid of the resource","acceptMimetypes":["image/png","image/svg+xml","image/jpeg","image/jpg","image/gif"]},"caption":{"type":"string","description":"image-specific caption"}}}},"contents":{"type":"object"}},"showMetadata":true,"additionalProperties":false},"table":{"type":"object","properties":{"dataAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"data asset uuid of the resource","acceptMimetypes":["text/csv","text/tsv","text/tab-separated-values","text/comma-separated-values"]},"contents":{"type":"object"}},"showMetadata":true,"additionalProperties":false},"video":{"type":"object","showMetadata":true,"properties":{"mediaUrl":{"type":"string","description":"url of the video"},"rgbImageAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"rgb/rvb image asset uuid of the resource","acceptMimetypes":["image/png","image/svg+xml","image/jpeg","image/jpg","image/gif"]},"cmybImageAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"cmyb/cmjn image asset uuid of the resource","acceptMimetypes":["image/png","image/svg+xml","image/jpeg","image/jpg","image/gif"]},"contents":{"type":"object"}},"additionalProperties":false},"embed":{"type":"object","showMetadata":true,"properties":{"html":{"type":"string","longString":true,"description":"embed code of the resource"},"rgbImageAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"rgb/rvb image asset uuid of the resource","acceptMimetypes":["image/png","image/svg+xml","image/jpeg","image/jpg","image/gif"]},"cmybImageAssetId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"cmyb/cmjn image asset uuid of the resource","acceptMimetypes":["image/png","image/svg+xml","image/jpeg","image/jpg","image/gif"]},"contents":{"type":"object"}},"additionalProperties":false},"bib":{"type":"object","properties":{"contents":{"type":"object"},"citations":{"type":"array"}},"titlePath":["data","citations",0,"title"],"metadataEditable":false,"showAssetPreview":true},"webpage":{"type":"object","properties":{"url":{"type":"string","description":"url of the webpage view"},"contents":{"type":"object"}},"additionalProperties":false,"showMetadata":true},"contents":{"type":"object","properties":{"contents":{"description":"representation of main contents","$ref":"#/definitions/draftRawContents"},"notes":{"type":"object","description":"map of notes commenting a section","default":{},"patternProperties":{"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}":{"type":"object","properties":{"id":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}","description":"id of the note (uuid v4)"},"order":{"type":"number","description":"order of the note"},"contents":{"description":"representation of the note content","$ref":"#/definitions/draftRawContents"}}}}},"notesOrder":{"type":"array","description":"Order of the notes commenting the main contents","default":[]}}},"draftRawContents":{"type":"object","properties":{"entityMap":{"type":"object","description":"List of entities annotating the contents","default":{},"patternProperties":{"^[a-zA-Z0-9]*$":{"properties":{"type":{"type":"string","description":"Custom type of the entity (examples in peritext: INLINE_ASSET, BLOCK_ASSET, NOTE_POINTER)"},"mutability":{"type":"string","description":"Whether the entity is editable in a draft-js editor"},"data":{"type":"object","description":"data to embed in the entity"}}}}},"blocks":{"type":"array","description":"List of contents blocks of the item","default":[],"items":{"type":"object","properties":{"key":{"type":"string","description":"identifier of the block"},"text":{"type":"string","description":"Text of the block"},"type":{"type":"string","description":"Type of block (atomic, ...)"},"depth":{"type":"number"},"inlineStyleRanges":{"type":"array","description":"list of styling annotations"},"entityRanges":{"type":"array","description":"List of entities mentions"},"data":{"type":"object"}}}}}}}}')},function(e,t,n){e.exports={default:n(360),__esModule:!0}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(116)("keys"),i=n(79);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(21),i=n(31),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(78)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(49);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(376),o=n(117),a=n(115)("IE_PROTO"),s=function(){},l=function(){var e,t=n(195)("iframe"),r=o.length;for(t.style.display="none",n(377).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(37).f,i=n(35),o=n(51)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(51)},function(e,t,n){var r=n(31),i=n(21),o=n(78),a=n(122),s=n(37).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(210);e.exports=r},function(e,t){e.exports=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(126),i=n(423);e.exports=function(e,t,n){return function(){if(0===arguments.length)return n();var o=Array.prototype.slice.call(arguments,0),a=o.pop();if(!r(a)){for(var s=0;s<e.length;){if("function"==typeof a[e[s]])return a[e[s]].apply(a,o);s+=1}if(i(a)){var l=t.apply(null,o);return l(a)}}return n.apply(this,arguments)}}},function(e,t){e.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},function(e,t,n){var r=n(431),i=n(433),o=n(434);function a(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function s(e,t,n,r){return e["@@transducer/result"](n[r](o(e["@@transducer/step"],e),t))}var l="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";e.exports=function(e,t,n){if("function"==typeof e&&(e=i(e)),r(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return s(e,t,n,"fantasy-land/reduce");if(null!=n[l])return a(e,t,n[l]());if("function"==typeof n.next)return a(e,t,n);if("function"==typeof n.reduce)return s(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}},function(e,t){e.exports=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,a,s,l){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,a,s,l,u){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,a,s,l,u,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(e,t){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(450);t.Node=r.Node,t.Element=r.Element,t.DataNode=r.DataNode,t.NodeWithChildren=r.NodeWithChildren;var i=/\s+/g,o={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1},a=function(){function e(e,t,n){this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=null,"function"==typeof t&&(n=t,t=o),"object"==typeof e&&(t=e,e=void 0),this._callback=e||null,this._options=t||o,this._elementCB=n||null}return e.prototype.onparserinit=function(e){this._parser=e},e.prototype.onreset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=this._parser||null},e.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this._lastNode=null;var e=this._tagStack.pop();e&&this._parser&&(this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e))},e.prototype.onopentag=function(e,t){var n=new r.Element(e,t);this.addNode(n),this._tagStack.push(n)},e.prototype.ontext=function(e){var t=this._options.normalizeWhitespace,n=this._lastNode;if(n&&"text"===n.type)t?n.data=(n.data+e).replace(i," "):n.data+=e;else{t&&(e=e.replace(i," "));var o=new r.DataNode("text",e);this.addNode(o),this._lastNode=o}},e.prototype.oncomment=function(e){if(this._lastNode&&"comment"===this._lastNode.type)this._lastNode.data+=e;else{var t=new r.DataNode("comment",e);this.addNode(t),this._lastNode=t}},e.prototype.oncommentend=function(){this._lastNode=null},e.prototype.oncdatastart=function(){var e=new r.DataNode("text",""),t=new r.NodeWithChildren("cdata",[e]);this.addNode(t),e.parent=t,this._lastNode=e},e.prototype.oncdataend=function(){this._lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new r.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this._tagStack[this._tagStack.length-1],n=t?t.children:this.dom,r=n[n.length-1];this._parser&&(this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex)),n.push(e),r&&(e.prev=r,r.next=e),t&&(e.parent=t),this._lastNode=null},e.prototype.addDataNode=function(e){this.addNode(e),this._lastNode=e},e}();t.DomHandler=a,t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTag=function(e){return"tag"===e.type||"script"===e.type||"style"===e.type},t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n=0){const r=e.contextualizations[t],o=e.resources[r.targetId];if(void 0===o||void 0===o.metadata)return;const a=o.metadata.title,s=o.id,{data:u={}}=o,{contents:c={contents:{},notes:{},notesOrder:[]}}=u;let f,d;(f=l(c.contents,t))?d="main":Object.keys(c.notes).some(e=>{const n=c.notes[e].contents;if(f=l(n,t))return d=e,!0});let p=i({},"main"===d?c.contents:c.notes[d]?c.notes[d].contents:{});if(f){let e;p.blocks.some((t,n)=>{if(t.entityRanges.find(e=>{if(`${e.key}`===`${f}`)return e}))return e=n,!0});const t=e-n>=0?e-n:0,r=e+n+1<=p.blocks.length-1?e+n+1:p.blocks.length;p=i({},p,{blocks:[...p.blocks.slice(t,r)]})}return{targetContents:d,contents:p,sectionTitle:a,sectionId:s}};var r=n(12);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:a,BLOCK_ASSET:s}}=r.constants;function l(e,t){return Object.keys(e.entityMap||{}).find(n=>{const r=e.entityMap[n];if(r.type===s||r.type===a&&r.data.asset){if(r.data.asset.id===t)return n}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!e.metadata)return[];const{metadata:t={},data:n={}}=e,{type:r}=t;let i;if("bib"===r)return Array.isArray(n.citations)?e.data.citations:n.citations?[n.citations[Object.keys(n.citations)[0]]]:[];switch(r){case"video":i="broadcast";break;case"data-presentation":i="dataset";break;case"dicto":i="interview";break;case"webpage":i="webpage";break;case"embed":i="misc";break;case"table":i="dataset";break;case"image":i="graphic";break;default:i="misc"}return[{type:i,title:t.title,id:e.id,URL:t.URL||n.url,abstract:t.description,issued:t.date&&{raw:t.date},author:t.authors&&Array.isArray(t.authors)&&t.authors.map(e=>"string"==typeof e?{family:e}:e)||[]}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=({contextualizationId:e,edition:t,production:n})=>{const r=n.contextualizations[e],i=n.resources[r.sourceId],{data:o={}}=t,{plan:a={}}=o,{summary:s=[]}=a;return s.reduce((t,o)=>{if("sections"===o.type||"resourceSections"===o.type)if(o.data&&o.data.customSummary&&o.data.customSummary.active){if(o.data.customSummary.summary.map(({resourceId:e})=>e).includes(r.targetId))return[...t,{contextualizationId:e,containerId:o.id}]}else if("sections"===o.type){if(n.sectionsOrder.map(({resourceId:e})=>e).includes(r.targetId))return[...t,{contextualizationId:e,containerId:o.id}]}else if("resourceSections"===o.type&&o.data.resourceTypes.includes(i.metadata.type))return[...t,{contextualizationId:e,containerId:o.id}];return t},[])};t.default=r},function(e,t,n){var r=n(138),i=n(507),o=n(508);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t,n){var r=n(484),i=n(502),o=n(504),a=n(505),s=n(506);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(39)(n(23),"Map");e.exports=r},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(520),i=n(53),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n=0){const r=e.contextualizations[t],o=e.sections[r.sectionId];if(void 0===o||void 0===o.metadata)return;const a=o.metadata.title,s=o.id;let u,c;(u=l(o.contents,t))?c="main":Object.keys(o.notes).some(e=>{const n=o.notes[e].contents;if(u=l(n,t))return c=e,!0});let f=i({},"main"===c?o.contents:o.notes[c]?o.notes[c].contents:{});if(u){let e;f.blocks.some((t,n)=>{if(t.entityRanges.find(e=>{if(`${e.key}`===`${u}`)return e}))return e=n,!0});const t=e-n>=0?e-n:0,r=e+n+1<=f.blocks.length-1?e+n+1:f.blocks.length;f=i({},f,{blocks:[...f.blocks.slice(t,r)]})}return{targetContents:c,contents:f,sectionTitle:a,sectionId:s}};var r=n(12);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:a,BLOCK_ASSET:s}}=r.constants;function l(e,t){return Object.keys(e.entityMap).find(n=>{const r=e.entityMap[n];if(r.type===s||r.type===a&&r.data.asset){if(r.data.asset.id===t)return n}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!e.metadata)return[];const{metadata:t={},data:n={}}=e,{type:r}=t;let i;if("bib"===r)return Array.isArray(e.data)?e.data:[e.data[Object.keys(e.data)[0]]];switch(r){case"video":i="broadcast";break;case"data-presentation":i="dataset";break;case"dicto":i="interview";break;case"webpage":i="webpage";break;case"embed":i="misc";break;case"table":i="dataset";break;case"image":i="graphic";break;default:i="misc"}return[{type:i,title:t.title,id:e.id,URL:t.URL||n.url,abstract:t.description,issued:t.date&&{raw:t.date},author:t.authors&&Array.isArray(t.authors)&&t.authors.map(e=>"string"==typeof e?{family:e}:e)||[]}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"video",type:"peritext-contextualizer",name:"Video contextualizer",acceptedResourceTypes:[{type:"video"}],profile:{block:{mutable:!1,options:{heavyPlayer:{type:"boolean"},displayControls:{type:"boolean"},loop:{type:"boolean"},muted:{type:"boolean"},startTime:{type:"number",uiType:"time"},endTime:{type:"number",uiType:"time"}},assetPickingRules:{element:{screened:["mediaUrl"],paged:["cmybImageAssetId","rgbImageAssetId"]}}},inline:{mutable:!1,options:{loop:{type:"boolean"},startTime:{type:"number",uiType:"time"},endTime:{type:"number",uiType:"time"}},assetPickingRules:{element:{screened:["mediaUrl"],paged:["cmybImageAssetId","rgbImageAssetId"]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.YouTube=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b="YT",y=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=/,v=/list=([a-zA-Z0-9_-]+)/;function x(e){return v.test(e)?{listType:"playlist",list:g(e.match(v),2)[1]}:{}}var _=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}(this,(e=d(t)).call.apply(e,[this].concat(i))),m(p(n),"callPlayer",o.callPlayer),m(p(n),"onStateChange",(function(e){var t=e.data,r=n.props,i=r.onPlay,o=r.onPause,a=r.onBuffer,s=r.onBufferEnd,l=r.onEnded,u=r.onReady,c=r.loop,f=window[b].PlayerState,d=f.PLAYING,p=f.PAUSED,h=f.BUFFERING,m=f.ENDED,g=f.CUED;if(t===d&&(i(),s()),t===p&&o(),t===h&&a(),t===m){var y=!!n.callPlayer("getPlaylist");c&&!y&&n.play(),l()}t===g&&u()})),m(p(n),"mute",(function(){n.callPlayer("mute")})),m(p(n),"unmute",(function(){n.callPlayer("unMute")})),m(p(n),"ref",(function(e){n.container=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e,t){var n=this,r=this.props,i=r.playing,a=r.muted,s=r.playsinline,l=r.controls,u=r.loop,f=r.config,d=r.onError,p=f.youtube,h=p.playerVars,m=p.embedOptions,g=e&&e.match(y)[1];if(t)return v.test(e)?void this.player.loadPlaylist(x(e)):void this.player.cueVideoById({videoId:g,startSeconds:(0,o.parseStartTime)(e)||h.start,endSeconds:(0,o.parseEndTime)(e)||h.end});(0,o.getSDK)("https://www.youtube.com/iframe_api",b,"onYouTubeIframeAPIReady",(function(e){return e.loaded})).then((function(t){n.container&&(n.player=new t.Player(n.container,c({width:"100%",height:"100%",videoId:g,playerVars:c({autoplay:i?1:0,mute:a?1:0,controls:l?1:0,start:(0,o.parseStartTime)(e),end:(0,o.parseEndTime)(e),origin:window.location.origin,playsinline:s},x(e),{},h),events:{onReady:function(){u&&n.player.setLoop(!0),n.props.onReady()},onStateChange:n.onStateChange,onError:function(e){return d(e.data)}}},m)))}),d)}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("div",{style:e},i.default.createElement("div",{ref:this.ref}))}}])&&f(n.prototype,r),a&&f(n,a),t}(i.Component);t.YouTube=_,m(_,"displayName","YouTube"),m(_,"canPlay",(function(e){return y.test(e)}));var w=(0,a.default)(_);t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t=a();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),i=n(92),o=n(18);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}(this,(e=c(t)).call.apply(e,[this].concat(i))),p(f(n),"mounted",!1),p(f(n),"isReady",!1),p(f(n),"isPlaying",!1),p(f(n),"isLoading",!0),p(f(n),"loadOnReady",null),p(f(n),"startOnPlay",!0),p(f(n),"seekOnPlay",null),p(f(n),"onDurationCalled",!1),p(f(n),"getInternalPlayer",(function(e){return n.player?n.player[e]:null})),p(f(n),"progress",(function(){if(n.props.url&&n.player&&n.isReady){var e=n.getCurrentTime()||0,t=n.getSecondsLoaded(),r=n.getDuration();if(r){var i={playedSeconds:e,played:e/r};null!==t&&(i.loadedSeconds=t,i.loaded=t/r),i.playedSeconds===n.prevPlayed&&i.loadedSeconds===n.prevLoaded||n.props.onProgress(i),n.prevPlayed=i.playedSeconds,n.prevLoaded=i.loadedSeconds}}n.progressTimeout=setTimeout(n.progress,n.props.progressFrequency||n.props.progressInterval)})),p(f(n),"handleReady",(function(){if(n.mounted){n.isReady=!0,n.isLoading=!1;var e=n.props,t=e.onReady,r=e.playing,i=e.volume,o=e.muted;t(),o||null===i||n.player.setVolume(i),n.loadOnReady?(n.player.load(n.loadOnReady,!0),n.loadOnReady=null):r&&n.player.play(),n.handleDurationCheck()}})),p(f(n),"handlePlay",(function(){n.isPlaying=!0,n.isLoading=!1;var e=n.props,t=e.onStart,r=e.onPlay,i=e.playbackRate;n.startOnPlay&&(n.player.setPlaybackRate&&1!==i&&n.player.setPlaybackRate(i),t(),n.startOnPlay=!1),r(),n.seekOnPlay&&(n.seekTo(n.seekOnPlay),n.seekOnPlay=null),n.handleDurationCheck()})),p(f(n),"handlePause",(function(e){n.isPlaying=!1,n.isLoading||n.props.onPause(e)})),p(f(n),"handleEnded",(function(){var e=n.props,t=e.activePlayer,r=e.loop,i=e.onEnded;t.loopOnEnded&&r&&n.seekTo(0),r||(n.isPlaying=!1,i())})),p(f(n),"handleError",(function(){var e;n.isLoading=!1,(e=n.props).onError.apply(e,arguments)})),p(f(n),"handleDurationCheck",(function(){clearTimeout(n.durationCheckTimeout);var e=n.getDuration();e?n.onDurationCalled||(n.props.onDuration(e),n.onDurationCalled=!0):n.durationCheckTimeout=setTimeout(n.handleDurationCheck,100)})),p(f(n),"handleLoaded",(function(){n.isLoading=!1})),p(f(n),"ref",(function(e){e&&(n.player=e)})),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.mounted=!0,this.player.load(this.props.url),this.progress()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.player.stop(),this.player.disablePIP&&this.player.disablePIP(),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.url,i=n.playing,a=n.volume,s=n.muted,l=n.playbackRate,u=n.pip,c=n.loop,f=n.activePlayer;if(!(0,o.isEqual)(e.url,r)){if(this.isLoading&&!f.forceLoad)return console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),void(this.loadOnReady=r);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}e.playing||!i||this.isPlaying||this.player.play(),e.playing&&!i&&this.isPlaying&&this.player.pause(),!e.pip&&u&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!u&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==a&&null!==a&&this.player.setVolume(a),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==a&&setTimeout((function(){return t.player.setVolume(a)})))),e.playbackRate!==l&&this.player.setPlaybackRate&&this.player.setPlaybackRate(l),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var n=this;if(!this.isReady&&0!==e)return this.seekOnPlay=e,void setTimeout((function(){n.seekOnPlay=null}),5e3);if(t?"fraction"===t:e>0&&e<1){var r=this.player.getDuration();return r?void this.player.seekTo(r*e):void console.warn("ReactPlayer: could not seek using fraction – duration not yet available")}this.player.seekTo(e)}},{key:"render",value:function(){var e=this.props.activePlayer;return e?r.default.createElement(e,l({},this.props,{ref:this.ref,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}])&&u(n.prototype,i),a&&u(n,a),t}(r.Component);t.default=h,p(h,"displayName","Player"),p(h,"propTypes",i.propTypes),p(h,"defaultProps",i.defaultProps)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SoundCloud=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=/(soundcloud\.com|snd\.sc)\/.+$/,g=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}(this,(e=f(t)).call.apply(e,[this].concat(i))),h(d(n),"callPlayer",o.callPlayer),h(d(n),"duration",null),h(d(n),"currentTime",null),h(d(n),"fractionLoaded",null),h(d(n),"mute",(function(){n.setVolume(0)})),h(d(n),"unmute",(function(){null!==n.props.volume&&n.setVolume(n.props.volume)})),h(d(n),"ref",(function(e){n.iframe=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e,t){var n=this;(0,o.getSDK)("https://w.soundcloud.com/player/api.js","SC").then((function(r){if(n.iframe){var i=r.Widget.Events,o=i.PLAY,a=i.PLAY_PROGRESS,s=i.PAUSE,l=i.FINISH,c=i.ERROR;t||(n.player=r.Widget(n.iframe),n.player.bind(o,n.props.onPlay),n.player.bind(s,n.props.onPause),n.player.bind(a,(function(e){n.currentTime=e.currentPosition/1e3,n.fractionLoaded=e.loadedProgress})),n.player.bind(l,(function(){return n.props.onEnded()})),n.player.bind(c,(function(e){return n.props.onError(e)}))),n.player.load(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.props.config.soundcloud.options,{callback:function(){n.player.getDuration((function(e){n.duration=e/1e3,n.props.onReady()}))}}))}}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",1e3*e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:e,frameBorder:0,allow:"autoplay"})}}])&&c(n.prototype,r),a&&c(n,a),t}(i.Component);t.SoundCloud=g,h(g,"displayName","SoundCloud"),h(g,"canPlay",(function(e){return m.test(e)})),h(g,"loopOnEnded",!0);var b=(0,a.default)(g);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Vimeo=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=/vimeo\.com\/.+/,g=/vimeo\.com\/external\/[0-9]+\..+/,b=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}(this,(e=f(t)).call.apply(e,[this].concat(i))),h(d(n),"callPlayer",o.callPlayer),h(d(n),"duration",null),h(d(n),"currentTime",null),h(d(n),"secondsLoaded",null),h(d(n),"mute",(function(){n.setVolume(0)})),h(d(n),"unmute",(function(){null!==n.props.volume&&n.setVolume(n.props.volume)})),h(d(n),"ref",(function(e){n.container=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e){var t=this;this.duration=null,(0,o.getSDK)("https://player.vimeo.com/api/player.js","Vimeo").then((function(n){t.container&&(t.player=new n.Player(t.container,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:e,autoplay:t.props.playing,muted:t.props.muted,loop:t.props.loop,playsinline:t.props.playsinline,controls:t.props.controls},t.props.config.vimeo.playerOptions)),t.player.ready().then((function(){var e=t.container.querySelector("iframe");e.style.width="100%",e.style.height="100%"})).catch(t.props.onError),t.player.on("loaded",(function(){t.props.onReady(),t.refreshDuration()})),t.player.on("play",(function(){t.props.onPlay(),t.refreshDuration()})),t.player.on("pause",t.props.onPause),t.player.on("seeked",(function(e){return t.props.onSeek(e.seconds)})),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",(function(e){var n=e.seconds;t.currentTime=n})),t.player.on("progress",(function(e){var n=e.seconds;t.secondsLoaded=n})))}),this.props.onError)}},{key:"refreshDuration",value:function(){var e=this;this.player.getDuration().then((function(t){e.duration=t}))}},{key:"play",value:function(){var e=this.callPlayer("play");e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e={width:"100%",height:"100%",overflow:"hidden",display:this.props.display};return i.default.createElement("div",{key:this.props.url,ref:this.ref,style:e})}}])&&c(n.prototype,r),a&&c(n,a),t}(i.Component);t.Vimeo=b,h(b,"displayName","Vimeo"),h(b,"forceLoad",!0),h(b,"canPlay",(function(e){return!g.test(e)&&m.test(e)}));var y=(0,a.default)(b);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DailyMotion=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?$/,y=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}(this,(e=p(t)).call.apply(e,[this].concat(i))),g(h(n),"callPlayer",o.callPlayer),g(h(n),"onDurationChange",(function(){var e=n.getDuration();n.props.onDuration(e)})),g(h(n),"mute",(function(){n.callPlayer("setMuted",!0)})),g(h(n),"unmute",(function(){n.callPlayer("setMuted",!1)})),g(h(n),"ref",(function(e){n.container=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e){var t=this,n=this.props,r=n.controls,i=n.config,a=n.onError,s=n.playing,l=f(e.match(b),2)[1];this.player?this.player.load(l,{start:(0,o.parseStartTime)(e),autoplay:s}):(0,o.getSDK)("https://api.dmcdn.net/all.js","DM","dmAsyncInit",(function(e){return e.player})).then((function(n){if(t.container){var s=n.player;t.player=new s(t.container,{width:"100%",height:"100%",video:l,params:c({controls:r,autoplay:t.props.playing,mute:t.props.muted,start:(0,o.parseStartTime)(e),origin:window.location.origin},i.dailymotion.params),events:{apiready:t.props.onReady,seeked:function(){return t.props.onSeek(t.player.currentTime)},video_end:t.props.onEnded,durationchange:t.onDurationChange,pause:t.props.onPause,playing:t.props.onPlay,waiting:t.props.onBuffer,error:function(e){return a(e)}}})}}),a)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return i.default.createElement("div",{style:e},i.default.createElement("div",{ref:this.ref}))}}])&&d(n.prototype,r),a&&d(n,a),t}(i.Component);t.DailyMotion=y,g(y,"displayName","DailyMotion"),g(y,"canPlay",(function(e){return b.test(e)})),g(y,"loopOnEnded",!0);var v=(0,a.default)(y);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"image",type:"peritext-contextualizer",name:"Image(s) contextualizer",acceptedResourceTypes:[{type:"image"}],profile:{block:{mutable:!1,assetPickingRules:{image:{screened:["rgbImageAssetId","cmybImageAssetId"],paged:["cmybImageAssetId","rgbImageAssetId"]}}},inline:{mutable:!1,assetPickingRules:{image:{screened:["rgbImageAssetId","cmybImageAssetId"],paged:["cmybImageAssetId","rgbImageAssetId"]}},options:{showOnlyFirstImage:{type:"boolean"}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildBibliography",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"buildCitations",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildContextContent",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"buildGlossary",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"resourceToCslJSON",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"StructuredCOinS",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"chooseAppropriateAsset",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"chooseAppropriateSubAsset",{enumerable:!0,get:function(){return u.chooseAppropriateSubAsset}}),Object.defineProperty(t,"getRelatedAssetsIds",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getContextualizationsFromEdition",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"loadAssetsForEdition",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"buildHTMLMetadata",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"abbrevString",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"generateOpenUrl",{enumerable:!0,get:function(){return m.generateOpenUrl}}),Object.defineProperty(t,"bibToSchema",{enumerable:!0,get:function(){return m.bibToSchema}});var r=g(n(566)),i=g(n(567)),o=g(n(153)),a=g(n(568)),s=g(n(154)),l=g(n(569)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(570)),c=g(n(262)),f=g(n(263)),d=g(n(571)),p=g(n(572)),h=g(n(573)),m=n(574);function g(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n=0){const r=e.contextualizations[t],o=e.sections[r.sectionId];if(void 0===o||void 0===o.metadata)return;const a=o.metadata.title,s=o.id;let u,c;(u=l(o.contents,t))?c="main":Object.keys(o.notes).some(e=>{const n=o.notes[e].contents;if(u=l(n,t))return c=e,!0});let f=i({},"main"===c?o.contents:o.notes[c]?o.notes[c].contents:{});if(u){let e;f.blocks.some((t,n)=>{if(t.entityRanges.find(e=>{if(`${e.key}`===`${u}`)return e}))return e=n,!0});const t=e-n>=0?e-n:0,r=e+n+1<=f.blocks.length-1?e+n+1:f.blocks.length;f=i({},f,{blocks:[...f.blocks.slice(t,r)]})}return{targetContents:c,contents:f,sectionTitle:a,sectionId:s}};var r=n(12);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:a,BLOCK_ASSET:s}}=r.constants;function l(e,t){return Object.keys(e.entityMap).find(n=>{const r=e.entityMap[n];if(r.type===s||r.type===a&&r.data.asset){if(r.data.asset.id===t)return n}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!e.metadata)return[];const{metadata:t={},data:n={}}=e,{type:r}=t;let i;if("bib"===r)return Array.isArray(e.data)?e.data:[e.data[Object.keys(e.data)[0]]];switch(r){case"video":i="broadcast";break;case"data-presentation":i="dataset";break;case"dicto":i="interview";break;case"webpage":i="webpage";break;case"embed":i="misc";break;case"table":i="dataset";break;case"image":i="graphic";break;default:i="misc"}return[{type:i,title:t.title,id:e.id,URL:t.URL||n.url,abstract:t.description,issued:t.date&&{raw:t.date},author:t.authors&&Array.isArray(t.authors)&&t.authors.map(e=>"string"==typeof e?{family:e}:e)||[]}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.objectToPairs=o;t.mapObj=function(e,t){return n=o(e).map(t),i={},n.forEach((function(e){var t=r(e,2),n=t[0],o=t[1];i[n]=o})),i;var n,i};t.flatten=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])};var a=/([A-Z])/g,s=/^ms-/;t.kebabifyStyleName=function(e){return function(e){return e.replace(a,"-$1").toLowerCase()}(e).replace(s,"-ms-")};t.recursiveMerge=function e(t,n){if("object"!=typeof t)return n;var r=i({},t);return Object.keys(n).forEach((function(i){r.hasOwnProperty(i)?r[i]=e(t[i],n[i]):r[i]=n[i]})),r};var l={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var u=["Webkit","ms","Moz","O"];Object.keys(l).forEach((function(e){u.forEach((function(t){l[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=l[e]}))}));t.stringifyValue=function(e,t){return"number"==typeof t?l[e]?""+t:t+"px":t};t.hashObject=function(e){return function(e){for(var t=e.length,n=t,r=0,i=void 0;t>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),t-=4,++r;switch(t){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),((n^=n>>>15)>>>0).toString(36)}(JSON.stringify(e))};var c=/^([^:]+:.*?)( !important)?;$/;t.importantify=function(e){return e.replace(c,(function(e,t,n){return t+" !important;"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.isArray(e)&&(e=e.join(",")),null!==e.match(/-webkit-|-moz-|-ms-/)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={id:"vegaLite",type:"peritext-contextualizer",name:"Vega lite contextualizer",acceptedResourceTypes:[{type:"table"}],asyncPrerender:n(627).asyncPrerender,profile:{block:{mutable:!1,options:{liteMode:{type:"boolean",default:!0},vegaLiteSpecificationCode:{type:"string",code:!0,default:'{\n  "mark": "circle",\n  "encoding": {\n    "x": {\n      "type": "quantitative",\n      "field": "enter a quantative field here"\n    },\n    "y": {\n      "type": "quantitative",\n      "field": "enter a quantative field here"\n    }\n  }\n}'}},assetPickingRules:{element:{screened:["dataAssetId"],paged:["dataAssetId"]}}}}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildBibliography",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"buildCitations",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildContextContent",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"buildGlossary",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"resourceToCslJSON",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"StructuredCOinS",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"chooseAppropriateAsset",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"chooseAppropriateSubAsset",{enumerable:!0,get:function(){return u.chooseAppropriateSubAsset}}),Object.defineProperty(t,"getRelatedAssetsIds",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getContextualizationsFromEdition",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"loadAssetsForEdition",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"buildHTMLMetadata",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"abbrevString",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"generateOpenUrl",{enumerable:!0,get:function(){return m.generateOpenUrl}}),Object.defineProperty(t,"bibToSchema",{enumerable:!0,get:function(){return m.bibToSchema}});var r=g(n(628)),i=g(n(629)),o=g(n(159)),a=g(n(630)),s=g(n(160)),l=g(n(631)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(632)),c=g(n(278)),f=g(n(279)),d=g(n(633)),p=g(n(634)),h=g(n(635)),m=n(636);function g(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n=0){const r=e.contextualizations[t],o=e.sections[r.sectionId];if(void 0===o||void 0===o.metadata)return;const a=o.metadata.title,s=o.id;let u,c;(u=l(o.contents,t))?c="main":Object.keys(o.notes).some(e=>{const n=o.notes[e].contents;if(u=l(n,t))return c=e,!0});let f=i({},"main"===c?o.contents:o.notes[c]?o.notes[c].contents:{});if(u){let e;f.blocks.some((t,n)=>{if(t.entityRanges.find(e=>{if(`${e.key}`===`${u}`)return e}))return e=n,!0});const t=e-n>=0?e-n:0,r=e+n+1<=f.blocks.length-1?e+n+1:f.blocks.length;f=i({},f,{blocks:[...f.blocks.slice(t,r)]})}return{targetContents:c,contents:f,sectionTitle:a,sectionId:s}};var r=n(12);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:a,BLOCK_ASSET:s}}=r.constants;function l(e,t){return Object.keys(e.entityMap).find(n=>{const r=e.entityMap[n];if(r.type===s||r.type===a&&r.data.asset){if(r.data.asset.id===t)return n}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!e.metadata)return[];const{metadata:t={},data:n={}}=e,{type:r}=t;let i;if("bib"===r)return Array.isArray(e.data)?e.data:[e.data[Object.keys(e.data)[0]]];switch(r){case"video":i="broadcast";break;case"data-presentation":i="dataset";break;case"dicto":i="interview";break;case"webpage":i="webpage";break;case"embed":i="misc";break;case"table":i="dataset";break;case"image":i="graphic";break;default:i="misc"}return[{type:i,title:t.title,id:e.id,URL:t.URL||n.url,abstract:t.description,issued:t.date&&{raw:t.date},author:t.authors&&Array.isArray(t.authors)&&t.authors.map(e=>"string"==typeof e?{family:e}:e)||[]}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n=0){const r=e.contextualizations[t],o=e.sections[r.sectionId];if(void 0===o||void 0===o.metadata)return;const a=o.metadata.title,s=o.id;let u,c;(u=l(o.contents,t))?c="main":Object.keys(o.notes).some(e=>{const n=o.notes[e].contents;if(u=l(n,t))return c=e,!0});let f=i({},"main"===c?o.contents:o.notes[c]?o.notes[c].contents:{});if(u){let e;f.blocks.some((t,n)=>{if(t.entityRanges.find(e=>{if(`${e.key}`===`${u}`)return e}))return e=n,!0});const t=e-n>=0?e-n:0,r=e+n+1<=f.blocks.length-1?e+n+1:f.blocks.length;f=i({},f,{blocks:[...f.blocks.slice(t,r)]})}return{targetContents:c,contents:f,sectionTitle:a,sectionId:s}};var r=n(12);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:a,BLOCK_ASSET:s}}=r.constants;function l(e,t){return Object.keys(e.entityMap).find(n=>{const r=e.entityMap[n];if(r.type===s||r.type===a&&r.data.asset){if(r.data.asset.id===t)return n}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!e.metadata)return[];const{metadata:t={},data:n={}}=e,{type:r}=t;let i;if("bib"===r)return Array.isArray(e.data)?e.data:[e.data[Object.keys(e.data)[0]]];switch(r){case"video":i="broadcast";break;case"data-presentation":i="dataset";break;case"dicto":i="interview";break;case"webpage":i="webpage";break;case"embed":i="misc";break;case"table":i="dataset";break;case"image":i="graphic";break;default:i="misc"}return[{type:i,title:t.title,id:e.id,URL:t.URL||n.url,abstract:t.description,issued:t.date&&{raw:t.date},author:t.authors&&Array.isArray(t.authors)&&t.authors.map(e=>"string"==typeof e?{family:e}:e)||[]}]}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var u=[];for(l=s;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(55))},function(e,t,n){"use strict";var r=n(674),i=n(675),o=n(95),a=n(676),s=n(677),l=n(678);e.exports=function(e,t){var n,o,a={};t||(t={});for(o in d)n=t[o],a[o]=null==n?d[o]:n;(a.position.indent||a.position.start)&&(a.indent=a.position.indent||[],a.position=a.position.start);return function(e,t){var n,o,a,d,F,B,U,q,$,H,W,V,G,Y,X,K,J,Z,Q,ee=t.additional,te=t.nonTerminated,ne=t.text,re=t.reference,ie=t.warning,oe=t.textContext,ae=t.referenceContext,se=t.warningContext,le=t.position,ue=t.indent||[],ce=e.length,fe=0,de=-1,pe=le.column||1,he=le.line||1,me="",ge=[];"string"==typeof ee&&(ee=ee.charCodeAt(0));K=ye(),q=ie?function(e,t){var n=ye();n.column+=t,n.offset+=t,ie.call(se,z[e],n,e)}:f,fe--,ce++;for(;++fe<ce;)if(F===h&&(pe=ue[de]||1),(F=e.charCodeAt(fe))===b){if((U=e.charCodeAt(fe+1))===p||U===h||U===m||U===g||U===b||U===v||U!=U||ee&&U===ee){me+=c(F),pe++;continue}for(V=G=fe+1,Q=G,U===_?(Q=++V,(U=e.charCodeAt(Q))===w||U===O?(Y=S,Q=++V):Y=T):Y=k,n="",W="",d="",X=A[Y],Q--;++Q<ce&&(U=e.charCodeAt(Q),X(U));)d+=c(U),Y===k&&u.call(r,d)&&(n=d,W=r[d]);(a=e.charCodeAt(Q)===y)&&(Q++,(o=Y===k&&l(d))&&(n=d,W=o)),Z=1+Q-G,(a||te)&&(d?Y===k?(a&&!W?q(I,1):(n!==d&&(Q=V+n.length,Z=1+Q-V,a=!1),a||($=n?P:N,t.attribute?(U=e.charCodeAt(Q))===x?(q($,Z),W=null):s(U)?W=null:q($,Z):q($,Z))),B=W):(a||q(C,Z),B=parseInt(d,j[Y]),(be=B)>=55296&&be<=57343||be>1114111?(q(R,Z),B=c(E)):B in i?(q(D,Z),B=i[B]):(H="",L(B)&&q(D,Z),B>65535&&(H+=c((B-=65536)>>>10|55296),B=56320|1023&B),B=H+c(B))):Y!==k&&q(M,Z)),B?(ve(),K=ye(),fe=Q-1,pe+=Q-G+1,ge.push(B),(J=ye()).offset++,re&&re.call(ae,B,{start:K,end:J},e.slice(G-1,Q)),K=J):(d=e.slice(G-1,Q),me+=d,pe+=d.length,fe=Q-1)}else 10===F&&(he++,de++,pe=0),F==F?(me+=c(F),pe++):ve();var be;return ge.join("");function ye(){return{line:he,column:pe,offset:fe+(le.offset||0)}}function ve(){me&&(ge.push(me),ne&&ne.call(oe,me,{start:K,end:ye()}),me="")}}(e,a)};var u={}.hasOwnProperty,c=String.fromCharCode,f=Function.prototype,d={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},p=9,h=10,m=12,g=32,b=38,y=59,v=60,x=61,_=35,w=88,O=120,E=65533,k="named",S="hexadecimal",T="decimal",j={};j[S]=16,j[T]=10;var A={};A[k]=s,A[T]=o,A[S]=a;var P=1,C=2,N=3,M=4,I=5,D=6,R=7,z={};function L(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}z[P]="Named character references must be terminated by a semicolon",z[C]="Numeric character references must be terminated by a semicolon",z[N]="Named character references cannot be empty",z[M]="Numeric character references cannot be empty",z[I]="Named character references must be known",z[D]="Numeric character references cannot be disallowed",z[R]="Numeric character references cannot be outside the permissible Unicode range"},function(e,t,n){"use strict";
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r,i="";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||void 0===r)r=e,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&t>1;)1&t&&(i+=e),t>>=1,e+=e;return i=(i+=e).substr(0,n)}},function(e,t,n){"use strict";e.exports=function(e){var t=String(e),n=t.length;for(;t.charAt(--n)===r;);return t.slice(0,n+1)};var r="\n"},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i,o,a,s,l,u,c=["pedantic","commonmark"],f=c.length,d=e.length,p=-1;for(;++p<d;){for(i=e[p],o=i[1]||{},a=i[0],s=-1,u=!1;++s<f;)if(void 0!==o[l=c[s]]&&o[l]!==n.options[l]){u=!0;break}if(!u&&t[a].apply(n,r))return!0}return!1}},function(e,t,n){"use strict";var r=n(698);e.exports=function(e){return r(e).toLowerCase()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),i=p(n(1)),o=p(n(76)),a=n(12),s=p(n(297)),l=p(n(170)),u=p(n(298)),c=p(n(749)),f=p(n(750)),d=p(n(299));function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}const{LINK:m,BLOCK_ASSET:g,INLINE_ASSET:b,SECTION_POINTER:y}=a.constants.draftEntitiesNames,v=e=>e.map((e,t)=>[e,r.default.createElement("br",{key:t})]),x={inline:{BOLD:(e,{key:t})=>r.default.createElement("strong",{key:t},e),ITALIC:(e,{key:t})=>r.default.createElement("em",{key:t},e),UNDERLINE:(e,{key:t})=>r.default.createElement("u",{key:t},e),CODE:(e,{key:t})=>r.default.createElement("span",{key:t},e)},blocks:{unstyled:(e,{keys:t})=>e.map((e,n)=>r.default.createElement("div",{className:"unstyled",key:t[n]},e)),blockquote:(e,t)=>r.default.createElement("blockquote",{key:t},v(e)),"header-one":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h1",{key:t[n],id:`title-${t[n]}`},e)),"header-two":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h2",{key:t[n],id:`title-${t[n]}`},e)),"header-three":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h3",{key:t[n],id:`title-${t[n]}`},e)),"header-four":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h4",{key:t[n],id:`title-${t[n]}`},e)),"header-five":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h5",{key:t[n],id:`title-${t[n]}`},e)),"header-six":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h6",{key:t[n],id:`title-${t[n]}`},e)),"code-block":(e,{keys:t})=>r.default.createElement("pre",{key:t[0]},v(e)),"unordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ul",{key:n[n.length-1],className:`ul-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:t},e))),"ordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ol",{key:n.join("|"),className:`ol-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:n[t]},e)))},entities:{[m]:(e,t,{key:n})=>r.default.createElement(s.default,{key:n,to:t.url},e),[g]:(e,t,{key:n})=>r.default.createElement(l.default,{key:n,data:t}),[b]:(e,t,{key:n})=>r.default.createElement(u.default,{data:t,key:n},e),[y]:(e,t,{key:n})=>r.default.createElement(d.default,{key:n,sectionId:t.sectionId},e),NOTE_POINTER:(e,t,{key:n})=>r.default.createElement(c.default,{key:n,children:e,noteId:t.noteId})}};class _ extends r.Component{constructor(e){var t,n,r;super(e),r=()=>({containerId:this.props.containerId}),(n="getChildContext")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}shouldComponentUpdate(){return!0}renderWarning(){return r.default.createElement("div",null)}render(){const{raw:e,notesPosition:t}=this.props;if(!e)return this.renderWarning();"footnotes"===t&&(x.entities.NOTE_POINTER=(e,n,{key:i})=>r.default.createElement(f.default,{key:i,children:e,noteId:n.noteId,notesPosition:t}));const n=(0,o.default)(e,x);return n?r.default.createElement("div",{className:"rendered-content"},n):this.renderWarning()}}_.propTypes={raw:i.default.object},_.childContextTypes={containerId:i.default.string};var w=_;t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=a(n(43));function a(e){return e&&e.__esModule?e:{default:e}}const s=({data:e,displayFigureNumber:t},n)=>{const{figuresPosition:i="endOfSections",figuresNumberMap:a={}}=n,s=e.asset.id,l=n.production&&n.production.contextualizations&&n.production.contextualizations[s];if(!l)return null;const{visibility:u={screened:!0,paged:!0}}=l,c=n.production||{},f=n.containerId,d=n.productionAssets||{},p=c.contextualizers[l.contextualizerId],h=c.resources[l.sourceId],m=n.fixedPresentationId,g=n.inNote,b=n.contextualizers[p.type];let y=b&&b.Block;if("inBody"!==i&&["table","source-code"].includes(p.type)&&(y=()=>r.default.createElement("div",{className:"block-contextualization-placeholder"})),l&&y){return!u.paged?null:r.default.createElement("figure",{className:`block-contextualization-container pagedjs_no-page-overflow-y ${p.type}`,id:`contextualization-${f}-${s}`},r.default.createElement(y,{resource:h,contextualizer:p,contextualization:l,renderingMode:"paged",assets:d,fixed:m===s,allowInteractions:g||m===s}),r.default.createElement("figcaption",{className:"figure-caption"},"inBody"===i?r.default.createElement("div",null,r.default.createElement("h4",{className:"figure-title"},t&&r.default.createElement("span",null,r.default.createElement("span",null,"Figure ",a[l.id]," ("),r.default.createElement("span",null,r.default.createElement("a",{className:"page-link",href:`#figure-pointer-${l.id}`},"p.")),r.default.createElement("span",null,").")),r.default.createElement("span",null,l.title||h.metadata.title)),l.legend&&r.default.createElement("div",{className:"figure-legend"},r.default.createElement(o.default,{src:l.legend}))):r.default.createElement("div",null,r.default.createElement("h4",{className:"figure-title"},r.default.createElement("span",{id:`figure-pointer-${l.id}`},"fig. ",a[l.id]),r.default.createElement("span",null," ("),r.default.createElement("span",null,r.default.createElement("a",{className:"page-link",href:`#end-figure-container-${l.id}`},"p.")),r.default.createElement("span",null,")")))))}return null};s.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},s.contextTypes={production:i.default.object,inNote:i.default.bool,contextualizers:i.default.object,productionAssets:i.default.object,containerId:i.default.string,figuresPosition:i.default.string,figuresNumberMap:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),i=a(n(1)),o=a(n(170));function a(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends r.Component{constructor(...e){super(...e),l(this,"getChildContext",()=>({figuresPosition:"inBody",production:this.props.production,figuresNumberMap:this.props.figuresNumberMap})),l(this,"render",()=>{const{figures:e=[]}=this.props;return e.length?r.default.createElement("section",{className:"end-figures"},r.default.createElement("h2",null,"Figures"),r.default.createElement("ul",{className:"figures-list"},e.map(({contextualizationId:e},t)=>r.default.createElement("li",{id:`end-figure-container-${e}`,className:"end-figure-container",key:t},r.default.createElement(o.default,{data:{asset:{id:e}},displayFigureNumber:!0}))))):null})}}t.default=u,l(u,"childContextTypes",{figuresPosition:i.default.object,production:i.default.object,figuresNumberMap:i.default.object})},function(e,t,n){"use strict";var r,i,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=w(n(2)),u=w(n(1)),c=w(n(7)),f=w(n(763)),d=w(n(764)),p=w(n(765)),h=w(n(766)),m=w(n(767)),g=w(n(768)),b=w(n(769)),y=w(n(770)),v=n(771),x=w(n(772)),_=w(n(773));function w(e){return e&&e.__esModule?e:{default:e}}var O=(0,f.default)(r=(0,d.default)(r=(0,p.default)(r=(0,h.default)(r=(0,m.default)(r=(0,g.default)((o=i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={place:e.place||"top",desiredPlace:e.place||"top",type:"dark",effect:"float",show:!1,border:!1,offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null,eventOff:e.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:(0,v.parseAria)(e),isEmptyTip:!1,disable:!1,originTooltip:null,isMultiline:!1},n.bind(["showTooltip","updateTooltip","hideTooltip","hideTooltipOnScroll","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),n.mount=!0,n.delayShowLoop=null,n.delayHideLoop=null,n.delayReshow=null,n.intervalUpdateContent=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"bind",value:function(e){var t=this;e.forEach((function(e){t[e]=t[e].bind(t)}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.insecure,n=e.resizeHide;t&&this.setStyleHeader(),this.bindListener(),this.bindWindowEvents(n)}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(),this.unbindWindowEvents()}},{key:"mouseOnToolTip",value:function(){return!(!this.state.show||!this.tooltipRef)&&(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(":hover"))}},{key:"getTargetArray",value:function(e){var t=void 0;if(e){var n=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');t=document.querySelectorAll('[data-tip][data-for="'+n+'"]')}else t=document.querySelectorAll("[data-tip]:not([data-for])");return(0,x.default)(t)}},{key:"bindListener",value:function(){var e=this,t=this.props,n=t.id,r=t.globalEventOff,i=t.isCapture;this.getTargetArray(n).forEach((function(t){var n=e.isCapture(t),r=e.getEffect(t);null===t.getAttribute("currentItem")&&t.setAttribute("currentItem","false"),e.unbindBasicListener(t),e.isCustomEvent(t)?e.customBindListener(t):(t.addEventListener("mouseenter",e.showTooltip,n),"float"===r&&t.addEventListener("mousemove",e.updateTooltip,n),t.addEventListener("mouseleave",e.hideTooltip,n))})),r&&(window.removeEventListener(r,this.hideTooltip),window.addEventListener(r,this.hideTooltip,i)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var e=this,t=this.props,n=t.id,r=t.globalEventOff;this.getTargetArray(n).forEach((function(t){e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)})),r&&window.removeEventListener(r,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(e){var t=this.isCapture(e);e.removeEventListener("mouseenter",this.showTooltip,t),e.removeEventListener("mousemove",this.updateTooltip,t),e.removeEventListener("mouseleave",this.hideTooltip,t)}},{key:"getTooltipContent",value:function(){var e=this.props,t=e.getContent,n=e.children,r=void 0;return t&&(r=Array.isArray(t)?t[0]&&t[0](this.state.originTooltip):t(this.state.originTooltip)),(0,y.default)(this.state.originTooltip,n,r,this.state.isMultiline)}},{key:"isEmptyTip",value:function(e){return"string"==typeof e&&""===e||null===e}},{key:"showTooltip",value:function(e,t){if(t&&!this.getTargetArray(this.props.id).some((function(t){return t===e.currentTarget})))return;var n=this.props,r=n.multiline,i=n.getContent,o=e.currentTarget.getAttribute("data-tip"),a=e.currentTarget.getAttribute("data-multiline")||r||!1,s=e instanceof window.FocusEvent||t,l=!0;e.currentTarget.getAttribute("data-scroll-hide")?l="true"===e.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(l=this.props.scrollHide);var u=e.currentTarget.getAttribute("data-place")||this.props.place||"top",c=s?"solid":this.getEffect(e.currentTarget),f=e.currentTarget.getAttribute("data-offset")||this.props.offset||{},d=(0,b.default)(e,e.currentTarget,this.tooltipRef,u,u,c,f);d.position&&this.props.overridePosition&&(d.position=this.props.overridePosition(d.position,e.currentTarget,this.tooltipRef,u,u,c,f));var p=d.isNewState?d.newState.place:u;this.clearTimer();var h=e.currentTarget,m=this.state.show?h.getAttribute("data-delay-update")||this.props.delayUpdate:0,g=this,v=function(){g.setState({originTooltip:o,isMultiline:a,desiredPlace:u,place:p,type:h.getAttribute("data-type")||g.props.type||"dark",effect:c,offset:f,html:h.getAttribute("data-html")?"true"===h.getAttribute("data-html"):g.props.html||!1,delayShow:h.getAttribute("data-delay-show")||g.props.delayShow||0,delayHide:h.getAttribute("data-delay-hide")||g.props.delayHide||0,delayUpdate:h.getAttribute("data-delay-update")||g.props.delayUpdate||0,border:h.getAttribute("data-border")?"true"===h.getAttribute("data-border"):g.props.border||!1,extraClass:h.getAttribute("data-class")||g.props.class||g.props.className||"",disable:h.getAttribute("data-tip-disable")?"true"===h.getAttribute("data-tip-disable"):g.props.disable||!1,currentTarget:h},(function(){l&&g.addScrollListener(g.state.currentTarget),g.updateTooltip(e),i&&Array.isArray(i)&&(g.intervalUpdateContent=setInterval((function(){if(g.mount){var e=g.props.getContent,t=(0,y.default)(o,"",e[0](),a),n=g.isEmptyTip(t);g.setState({isEmptyTip:n}),g.updatePosition()}}),i[1]))}))};m?this.delayReshow=setTimeout(v,m):v()}},{key:"updateTooltip",value:function(e){var t=this,n=this.state,r=n.delayShow,i=n.disable,o=this.props.afterShow,a=this.getTooltipContent(),s=parseInt(r,10),l=e.currentTarget||e.target;if(!this.mouseOnToolTip()&&!this.isEmptyTip(a)&&!i){var u=function(){if(Array.isArray(a)&&a.length>0||a){var n=!t.state.show;t.setState({currentEvent:e,currentTarget:l,show:!0},(function(){t.updatePosition(),n&&o&&o(e)}))}};clearTimeout(this.delayShowLoop),r?this.delayShowLoop=setTimeout(u,s):u()}}},{key:"listenForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isScroll:!1},i=this.state.disable,o=r.isScroll,a=o?0:this.state.delayHide,s=this.props.afterHide,l=this.getTooltipContent();if(this.mount&&!this.isEmptyTip(l)&&!i){if(t){var u=this.getTargetArray(this.props.id),c=u.some((function(t){return t===e.currentTarget}));if(!c||!this.state.show)return}var f=function(){var t=n.state.show;n.mouseOnToolTip()?n.listenForTooltipExit():(n.removeListenerForTooltipExit(),n.setState({show:!1},(function(){n.removeScrollListener(),t&&s&&s(e)})))};this.clearTimer(),a?this.delayHideLoop=setTimeout(f,parseInt(a,10)):f()}}},{key:"hideTooltipOnScroll",value:function(e,t){this.hideTooltip(e,t,{isScroll:!0})}},{key:"addScrollListener",value:function(e){var t=this.isCapture(e);window.addEventListener("scroll",this.hideTooltipOnScroll,t)}},{key:"removeScrollListener",value:function(){window.removeEventListener("scroll",this.hideTooltipOnScroll)}},{key:"updatePosition",value:function(){var e=this,t=this.state,n=t.currentEvent,r=t.currentTarget,i=t.place,o=t.desiredPlace,a=t.effect,s=t.offset,l=this.tooltipRef,u=(0,b.default)(n,r,l,i,o,a,s);if(u.position&&this.props.overridePosition&&(u.position=this.props.overridePosition(u.position,n,r,l,i,o,a,s)),u.isNewState)return this.setState(u.newState,(function(){e.updatePosition()}));l.style.left=u.position.left+"px",l.style.top=u.position.top+"px"}},{key:"setStyleHeader",value:function(){var e=document.getElementsByTagName("head")[0];if(!e.querySelector('style[id="react-tooltip"]')){var t=document.createElement("style");t.id="react-tooltip",t.innerHTML=_.default,n.nc&&t.setAttribute("nonce",n.nc),e.insertBefore(t,e.firstChild)}}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearTimeout(this.delayReshow),clearInterval(this.intervalUpdateContent)}},{key:"render",value:function(){var e=this,n=this.state,r=n.extraClass,i=n.html,o=n.ariaProps,s=n.disable,u=this.getTooltipContent(),f=this.isEmptyTip(u),d=(0,c.default)("__react_component_tooltip",{show:this.state.show&&!s&&!f},{border:this.state.border},{"place-top":"top"===this.state.place},{"place-bottom":"bottom"===this.state.place},{"place-left":"left"===this.state.place},{"place-right":"right"===this.state.place},{"type-dark":"dark"===this.state.type},{"type-success":"success"===this.state.type},{"type-warning":"warning"===this.state.type},{"type-error":"error"===this.state.type},{"type-info":"info"===this.state.type},{"type-light":"light"===this.state.type},{allow_hover:this.props.delayUpdate},{allow_click:this.props.clickable}),p=this.props.wrapper;return t.supportedWrappers.indexOf(p)<0&&(p=t.defaultProps.wrapper),i?l.default.createElement(p,a({className:d+" "+r,id:this.props.id,ref:function(t){return e.tooltipRef=t}},o,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:u}})):l.default.createElement(p,a({className:d+" "+r,id:this.props.id},o,{ref:function(t){return e.tooltipRef=t},"data-id":"tooltip"}),u)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.ariaProps,r=(0,v.parseAria)(e);return Object.keys(r).some((function(e){return r[e]!==n[e]}))?a({},t,{ariaProps:r}):null}}]),t}(l.default.Component),i.propTypes={children:u.default.any,place:u.default.string,type:u.default.string,effect:u.default.string,offset:u.default.object,multiline:u.default.bool,border:u.default.bool,insecure:u.default.bool,class:u.default.string,className:u.default.string,id:u.default.string,html:u.default.bool,delayHide:u.default.number,delayUpdate:u.default.number,delayShow:u.default.number,event:u.default.string,eventOff:u.default.string,watchWindow:u.default.bool,isCapture:u.default.bool,globalEventOff:u.default.string,getContent:u.default.any,afterShow:u.default.func,afterHide:u.default.func,overridePosition:u.default.func,disable:u.default.bool,scrollHide:u.default.bool,resizeHide:u.default.bool,wrapper:u.default.string,clickable:u.default.bool},i.defaultProps={insecure:!0,resizeHide:!0,wrapper:"div",clickable:!1},i.supportedWrappers=["div","span"],i.displayName="ReactTooltip",r=o))||r)||r)||r)||r)||r)||r;e.exports=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=d(n(1)),o=d(n(76)),a=n(12),s=d(n(774)),l=d(n(775)),u=d(n(776)),c=d(n(777)),f=d(n(778));function d(e){return e&&e.__esModule?e:{default:e}}const{LINK:p,BLOCK_ASSET:h,INLINE_ASSET:m,SECTION_POINTER:g}=a.constants.draftEntitiesNames,b=e=>e.map((e,t)=>[e,r.default.createElement("br",{key:t+1})]),y={inline:{BOLD:(e,{key:t})=>r.default.createElement("strong",{key:t},e),ITALIC:(e,{key:t})=>r.default.createElement("em",{key:t},e),UNDERLINE:(e,{key:t})=>r.default.createElement("u",{key:t},e),CODE:(e,{key:t})=>r.default.createElement("span",{key:t},e)},blocks:{unstyled:(e,{keys:t})=>e.map((e,n)=>r.default.createElement("div",{className:"unstyled",id:t[n],key:n},e)),blockquote:(e,{keys:t})=>r.default.createElement("blockquote",{id:t[0]},b(e)),"header-one":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h1",{id:t[n],key:n},e)),"header-two":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h2",{id:t[n],key:n},e)),"header-three":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h3",{id:t[n],key:n},e)),"header-four":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h4",{id:t[n],key:n},e)),"header-five":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h5",{id:t[n],key:n},e)),"header-six":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h6",{id:t[n],key:n},e)),"code-block":(e,{keys:t})=>r.default.createElement("pre",{key:t[0]},b(e)),"unordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ul",{key:n[n.length-1],className:`ul-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:t},e))),"ordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ol",{key:n.join("|"),className:`ol-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:n[t]},e)))},entities:{[p]:(e,t,{key:n})=>r.default.createElement(s.default,{key:n,to:t.url},e),[h]:(e,t,{key:n})=>r.default.createElement(l.default,{key:n,data:t},e),[m]:(e,t,{key:n})=>r.default.createElement(u.default,{data:t,key:n},e),NOTE_POINTER:(e,t,{key:n})=>r.default.createElement(c.default,{key:n,children:e,noteId:t.noteId}),[g]:(e,t,{key:n})=>r.default.createElement(f.default,{key:n,sectionId:t.sectionId},e)}};class v extends r.Component{constructor(e){super(e)}shouldComponentUpdate(){return!0}renderWarning(){return r.default.createElement("div",null)}render(){const{raw:e}=this.props;if(!e)return this.renderWarning();const t=(0,o.default)(e,y);return t?r.default.createElement("div",{className:"rendered-content"},t):this.renderWarning()}}v.propTypes={raw:i.default.object};var x=v;t.default=x},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(n(807)),o=n(2),a=r(o),s=r(n(1)),l=r(n(46)),u=r(n(15)),c=n(818),f=r(n(308)),d={};var p=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v="react-sizeme: an error occurred whilst stopping to listen to node size changes",x={monitorWidth:!0,monitorHeight:!1,monitorPosition:!1,refreshRate:16,refreshMode:"throttle",noPlaceholder:!1,resizeDetectorStrategy:"scroll"};function _(e){return e.displayName||e.name||"Component"}var w=function(e){function t(){return p(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),h(t,[{key:"render",value:function(){return o.Children.only(this.props.children)}}]),t}(o.Component);function O(e){var t=e.className,n=e.style,r={};return t||n?(t&&(r.className=t),n&&(r.style=n)):r.style={width:"100%",height:"100%"},a.createElement("div",r)}w.displayName="SizeMeReferenceWrapper",w.propTypes={children:s.element.isRequired},O.displayName="SizeMePlaceholder",O.propTypes={className:s.string,style:s.object};var E=function(e){function t(t){var n=t.explicitRef,r=t.className,i=t.style,o=t.size,s=t.disablePlaceholder,l=(t.onSize,b(t,["explicitRef","className","style","size","disablePlaceholder","onSize"])),u=(null==o||null==o.width&&null==o.height&&null==o.position)&&!s,c={className:r,style:i};null!=o&&(c.size=o);var f=u?a.createElement(O,{className:r,style:i}):a.createElement(e,m({},c,l));return a.createElement(w,{ref:n},f)}return t.displayName="SizeMeRenderer("+_(e)+")",t.propTypes={explicitRef:s.func.isRequired,className:s.string,style:s.object,size:s.shape({width:s.number,height:s.number,position:s.object}),disablePlaceholder:s.bool,onSize:s.func},t};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=e.monitorWidth,n=void 0===t?x.monitorWidth:t,r=e.monitorHeight,o=void 0===r?x.monitorHeight:r,f=e.monitorPosition,b=void 0===f?x.monitorPosition:f,w=e.refreshRate,O=void 0===w?x.refreshRate:w,S=e.refreshMode,T=void 0===S?x.refreshMode:S,j=e.noPlaceholder,A=void 0===j?x.noPlaceholder:j,P=e.resizeDetectorStrategy,C=void 0===P?x.resizeDetectorStrategy:P;u(n||o||b,'You have to monitor at least one of the width, height, or position when using "sizeMe"'),u(O>=16,"It is highly recommended that you don't put your refreshRate lower than 16 as this may cause layout thrashing."),u("throttle"===T||"debounce"===T,'The refreshMode should have a value of "throttle" or "debounce"');var N="throttle"===T?c.throttle:c.debounce;return function(e){var t=E(e),r=function(e){function r(){var e,t,i;p(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=i=y(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(s))),i.domEl=null,i.state={width:void 0,height:void 0,position:void 0},i.uninstall=function(){if(i.domEl){try{i.detector.uninstall(i.domEl)}catch(e){console.warn(v)}i.domEl=null}},i.determineStrategy=function(e){e.onSize?(i.callbackState||(i.callbackState=m({},i.state)),i.strategy="callback"):i.strategy="render"},i.strategisedSetState=function(e){"callback"===i.strategy&&(i.callbackState=e,i.props.onSize(e)),i.setState(e)},i.strategisedGetState=function(){return"callback"===i.strategy?i.callbackState:i.state},i.refCallback=function(e){i.element=e},i.hasSizeChanged=function(e,t){var r=e,i=t,a=r.position||{},s=i.position||{};return n&&r.width!==i.width||o&&r.height!==i.height||b&&(a.top!==s.top||a.left!==s.left||a.bottom!==s.bottom||a.right!==s.right)},i.checkIfSizeChanged=N(O,(function(e){var t=e.getBoundingClientRect(),r=t.width,a=t.height,s=t.right,l=t.left,u=t.top,c=t.bottom,f={width:n?r:null,height:o?a:null,position:b?{right:s,left:l,top:u,bottom:c}:null};i.hasSizeChanged(i.strategisedGetState(),f)&&i.strategisedSetState(f)})),y(i,t)}return g(r,e),h(r,[{key:"componentDidMount",value:function(){this.detector=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";return d[e]||(d[e]=i({strategy:e})),d[e]}(C),this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentDidUpdate",value:function(){this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentWillUnmount",value:function(){this.hasSizeChanged=function(){},this.checkIfSizeChanged=function(){},this.uninstall()}},{key:"handleDOMNode",value:function(){var e=this.element&&l.findDOMNode(this.element);e?this.domEl?(this.domEl.isSameNode&&!this.domEl.isSameNode(e)||this.domEl!==e)&&(this.uninstall(),this.domEl=e,this.detector.listenTo(this.domEl,this.checkIfSizeChanged)):(this.domEl=e,this.detector.listenTo(this.domEl,this.checkIfSizeChanged)):this.uninstall()}},{key:"render",value:function(){var e=k.enableSSRBehaviour||k.noPlaceholders||A||"callback"===this.strategy,n=m({},this.state);return a.createElement(t,m({explicitRef:this.refCallback,size:"callback"===this.strategy?null:n,disablePlaceholder:e},this.props))}}]),r}(a.Component);return r.displayName="SizeMe("+_(e)+")",r.propTypes={onSize:s.func},r.WrappedComponent=e,r}}k.enableSSRBehaviour=!1,k.noPlaceholders=!1;var S=function(e){function t(e){p(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));T.call(n);e.children,e.render;var r=b(e,["children","render"]);return n.createComponent(r),n.state={size:{width:void 0,height:void 0}},n}return g(t,e),h(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=(t.children,t.render,b(t,["children","render"])),r=(e.children,e.render,b(e,["children","render"]));f(n,r)||this.createComponent(n)}},{key:"render",value:function(){var e=this.SizeAware,t=this.props.children||this.props.render;return a.createElement(e,{onSize:this.onSize},t({size:this.state.size}))}}]),t}(o.Component);S.propTypes={children:s.func,render:s.func},S.defaultProps={children:void 0,render:void 0};var T=function(){var e=this;this.createComponent=function(t){e.SizeAware=k(t)((function(e){return e.children}))},this.onSize=function(t){return e.setState({size:t})}};k.SizeMe=S,k.withSize=k,e.exports=k},function(e,t,n){var r=n(832),i=n(837),o=n(177);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){var r=n(237),i=n(176);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(24),i=n(100),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildGlossary=t.convertEditionToCslRecord=t.convertSectionToCslRecord=t.makeAssetTitle=t.ellipse=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(4),a=n(30);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.ellipse=(e,t=50)=>e.length>t?`${e.substr(0,t-3)}...`:e;t.makeAssetTitle=(e,t,n,r)=>{switch(e.metadata.type){case"glossary":return e.data.name?e.data.name:`${e.data.firstName} ${e.data.lastName}`;case"bib":const t=(0,a.makeBibliography)(r.citationItems,n.data.citationStyle.data,n.data.citationLocale.data,{select:[{field:"id",value:e.data.citations[0].id}]})[1];return i.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}});default:return e.metadata.title}};t.convertSectionToCslRecord=(e,t,n={})=>{const{data:r={}}=n,{publicationTitle:i,publicationDate:o,publicationAuthors:a=[],bibType:s="book"}=r,l=i||t.metadata.title,u=a.length?a:t.metadata.authors||[];let c;const f={};let d;f.id=e.id,f.title=e.metadata.title;const p=(d=o?new Date(o):new Date).getFullYear(),h=d.getMonth(),m=d.getDate();f.issued={"date-parts":[p,h,m]};const g=e.metadata.authors&&e.metadata.authors.length?e.metadata.authors:u;switch(f.abstract=t.metadata.abstract,f.author=g.map(e=>({given:e.given,family:e.family})),s){case"article":c="article";break;case"book":case"booklet":case"inbook":case"incollection":c="chapter",f.booktitle=l;break;case"mastersthesis":case"phdthesis":c="chapter",f.booktitle=l;break;case"proceedings":case"inproceedings":c="paper-conference",f.booktitle=l;break;case"techreport":case"unpublished":case"manual":case"misc":default:c="webpage"}return f.type=c,f};t.convertEditionToCslRecord=(e,t={})=>{const{data:n={}}=t,{publicationTitle:r,publicationDate:i,publicationAuthors:o=[],bibType:a="book"}=n,s=r||e.metadata.title,l=o.length?o:e.metadata.authors||[],u={};let c;u.id=e.id,u.title=s,u.abstract=e.metadata.abstract;const f=(c=i?new Date(i):new Date).getFullYear(),d=c.getMonth(),p=c.getDate();switch(u.issued={"date-parts":[f,d,p]},u.author=l.map(e=>({given:e.given,family:e.family})),a){case"booklet":case"incollection":case"inbook":case"proceedings":u.type="chapter";break;case"mastersthesis":case"phdthesis":u.type="thesis";break;case"inproceedings":u.type="paper-conference";break;case"techreport":u.type="report";break;case"manual":case"unpublished":u.type="manuscript";break;case"misc":u.type="webpage";break;default:u.type=a}return u};t.buildGlossary=({production:e,edition:t,options:n})=>{const{contextualizers:r,resources:i}=e,{showUncited:a=!1,glossaryTypes:l=["person","place","event","notion","other"]}=n;let u;const c=(0,o.getContextualizationsFromEdition)(e,t);return a?u=Object.keys(e.resources).filter(t=>"glossary"===e.resources[t].metadata.type).map(t=>e.resources[t]).map(e=>({resource:e,mentions:c.filter(t=>t.contextualization.sourceId===e.id)})):(u=c.filter(e=>{const t=e.contextualization.contextualizerId,n=r[t];return n&&"glossary"===n.type}).map(t=>{const n=t.contextualization;return s({},n,{contextualizer:r[n.contextualizerId],resource:i[n.sourceId],contextContent:(0,o.buildContextContent)(e,n.id),containerId:t.containerId})}).reduce((e,t)=>s({},e,{[t.sourceId]:{resource:t.resource,mentions:e[t.sourceId]?e[t.sourceId].mentions.concat(t):[t]}}),{}),u=Object.keys(u).map(e=>({resource:u[e].resource,mentions:u[e].mentions}))),u.filter(e=>l.includes(e.resource.data.entryType)).sort((e,t)=>e.resource.data.name.toLowerCase()>t.resource.data.name.toLowerCase()?1:-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const s=(e,{LinkComponent:t,navigateTo:n})=>{return r.default.createElement(t,a({},e,{onClick:()=>{n(e.to)}}))};s.contextTypes={LinkComponent:i.default.func,navigateTo:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildGlossary=t.convertEditionToCslRecord=t.convertSectionToCslRecord=t.makeAssetTitle=t.ellipse=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(4),a=n(30);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.ellipse=(e,t=50)=>e.length>t?`${e.substr(0,t-3)}...`:e;t.makeAssetTitle=(e,t,n,r)=>{switch(e.metadata.type){case"glossary":return e.data.name?e.data.name:`${e.data.firstName} ${e.data.lastName}`;case"bib":const t=(0,a.makeBibliography)(r.citationItems,n.data.citationStyle.data,n.data.citationLocale.data,{select:[{field:"id",value:e.data.citations[0].id}]})[1];return i.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}});default:return e.metadata.title}};t.convertSectionToCslRecord=(e,t,n={})=>{const{data:r={}}=n,{publicationTitle:i,publicationDate:o,publicationAuthors:a=[],bibType:s="book"}=r,l=i||t.metadata.title,u=a.length?a:t.metadata.authors||[];let c;const f={};let d;f.id=e.id,f.title=e.metadata.title;const p=(d=o?new Date(o):new Date).getFullYear(),h=d.getMonth(),m=d.getDate();f.issued={"date-parts":[p,h,m]};const g=e.metadata.authors&&e.metadata.authors.length?e.metadata.authors:u;switch(f.abstract=t.metadata.abstract,f.author=g.map(e=>({given:e.given,family:e.family})),s){case"article":c="article";break;case"book":case"booklet":case"inbook":case"incollection":c="chapter",f.booktitle=l;break;case"mastersthesis":case"phdthesis":c="chapter",f.booktitle=l;break;case"proceedings":case"inproceedings":c="paper-conference",f.booktitle=l;break;case"techreport":case"unpublished":case"manual":case"misc":default:c="webpage"}return f.type=c,f};t.convertEditionToCslRecord=(e,t={})=>{const{data:n={}}=t,{publicationTitle:r,publicationDate:i,publicationAuthors:o=[],bibType:a="book"}=n,s=r||e.metadata.title,l=o.length?o:e.metadata.authors||[],u={};let c;u.id=e.id,u.title=s,u.abstract=e.metadata.abstract;const f=(c=i?new Date(i):new Date).getFullYear(),d=c.getMonth(),p=c.getDate();switch(u.issued={"date-parts":[f,d,p]},u.author=l.map(e=>({given:e.given,family:e.family})),a){case"booklet":case"incollection":case"inbook":case"proceedings":u.type="chapter";break;case"mastersthesis":case"phdthesis":u.type="thesis";break;case"inproceedings":u.type="paper-conference";break;case"techreport":u.type="report";break;case"manual":case"unpublished":u.type="manuscript";break;case"misc":u.type="webpage";break;default:u.type=a}return u};t.buildGlossary=({production:e,edition:t,options:n})=>{const{contextualizers:r,resources:i}=e,{showUncited:a=!1,glossaryTypes:l=["person","place","event","notion","other"]}=n;let u;const c=(0,o.getContextualizationsFromEdition)(e,t);return a?u=Object.keys(e.resources).filter(t=>"glossary"===e.resources[t].metadata.type).map(t=>e.resources[t]).map(e=>({resource:e,mentions:c.filter(t=>t.contextualization.sourceId===e.id)})):(u=c.filter(e=>{const t=e.contextualization.contextualizerId,n=r[t];return n&&"glossary"===n.type}).map(t=>{const n=t.contextualization;return s({},n,{contextualizer:r[n.contextualizerId],resource:i[n.sourceId],contextContent:(0,o.buildContextContent)(e,n.id),containerId:t.containerId})}).reduce((e,t)=>s({},e,{[t.sourceId]:{resource:t.resource,mentions:e[t.sourceId]?e[t.sourceId].mentions.concat(t):[t]}}),{}),u=Object.keys(u).map(e=>({resource:u[e].resource,mentions:u[e].mentions}))),u.filter(e=>l.includes(e.resource.data.entryType)).sort((e,t)=>e.resource.data.name.toLowerCase()>t.resource.data.name.toLowerCase()?1:-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=d(n(1)),o=d(n(76)),a=n(12),s=d(n(938)),l=d(n(939)),u=d(n(941)),c=d(n(942)),f=d(n(943));function d(e){return e&&e.__esModule?e:{default:e}}const{LINK:p,BLOCK_ASSET:h,INLINE_ASSET:m,SECTION_POINTER:g}=a.constants.draftEntitiesNames,b=e=>e.map((e,t)=>[e,r.default.createElement("br",{key:t+1})]),y={inline:{BOLD:(e,{key:t})=>r.default.createElement("strong",{key:t},e),ITALIC:(e,{key:t})=>r.default.createElement("em",{key:t},e),UNDERLINE:(e,{key:t})=>r.default.createElement("u",{key:t},e),CODE:(e,{key:t})=>r.default.createElement("span",{key:t},e)},blocks:{unstyled:(e,{keys:t})=>e.map((e,n)=>r.default.createElement("div",{className:"unstyled",id:t[n],key:n},e)),blockquote:(e,{keys:t})=>r.default.createElement("blockquote",{id:t[0]},b(e)),"header-one":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h1",{id:t[n],key:n},e)),"header-two":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h2",{id:t[n],key:n},e)),"header-three":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h3",{id:t[n],key:n},e)),"header-four":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h4",{id:t[n],key:n},e)),"header-five":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h5",{id:t[n],key:n},e)),"header-six":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h6",{id:t[n],key:n},e)),"code-block":(e,{keys:t})=>r.default.createElement("pre",{key:t[0]},b(e)),"unordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ul",{key:n[n.length-1],className:`ul-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:t},e))),"ordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ol",{key:n.join("|"),className:`ol-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:n[t]},e)))},entities:{[p]:(e,t,{key:n})=>r.default.createElement(s.default,{key:n,to:t.url},e),[h]:(e,t,{key:n})=>r.default.createElement(l.default,{key:n,data:t},e),[m]:(e,t,{key:n})=>r.default.createElement(u.default,{data:t,key:n},e),NOTE_POINTER:(e,t,{key:n})=>r.default.createElement(c.default,{key:n,children:e,noteId:t.noteId}),[g]:(e,t,{key:n})=>r.default.createElement(f.default,{key:n,sectionId:t.sectionId},e)}};class v extends r.Component{constructor(e){super(e)}shouldComponentUpdate(){return!0}renderWarning(){return r.default.createElement("div",null)}render(){const{raw:e}=this.props;if(!e)return this.renderWarning();const t=(0,o.default)(e,y);return t?r.default.createElement("div",{className:"rendered-content"},t):this.renderWarning()}}v.propTypes={raw:i.default.object};var x=v;t.default=x},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"invalidSpec",(function(){return tn})),n.d(r,"FIT_NON_SINGLE",(function(){return nn})),n.d(r,"containerSizeNonSingle",(function(){return rn})),n.d(r,"containerSizeNotCompatibleWithAutosize",(function(){return on})),n.d(r,"droppingFit",(function(){return an})),n.d(r,"cannotProjectOnChannelWithoutField",(function(){return sn})),n.d(r,"nearestNotSupportForContinuous",(function(){return ln})),n.d(r,"selectionNotSupported",(function(){return un})),n.d(r,"selectionNotFound",(function(){return cn})),n.d(r,"SCALE_BINDINGS_CONTINUOUS",(function(){return fn})),n.d(r,"noSameUnitLookup",(function(){return dn})),n.d(r,"noSuchRepeatedValue",(function(){return pn})),n.d(r,"columnsNotSupportByRowCol",(function(){return hn})),n.d(r,"CONCAT_CANNOT_SHARE_AXIS",(function(){return mn})),n.d(r,"REPEAT_CANNOT_SHARE_AXIS",(function(){return gn})),n.d(r,"unrecognizedParse",(function(){return bn})),n.d(r,"differentParse",(function(){return yn})),n.d(r,"invalidTransformIgnored",(function(){return vn})),n.d(r,"NO_FIELDS_NEEDS_AS",(function(){return xn})),n.d(r,"encodingOverridden",(function(){return _n})),n.d(r,"projectionOverridden",(function(){return wn})),n.d(r,"primitiveChannelDef",(function(){return On})),n.d(r,"invalidFieldType",(function(){return En})),n.d(r,"nonZeroScaleUsedWithLengthMark",(function(){return kn})),n.d(r,"invalidFieldTypeForCountAggregate",(function(){return Sn})),n.d(r,"invalidAggregate",(function(){return Tn})),n.d(r,"missingFieldType",(function(){return jn})),n.d(r,"droppingColor",(function(){return An})),n.d(r,"emptyFieldDef",(function(){return Pn})),n.d(r,"latLongDeprecated",(function(){return Cn})),n.d(r,"LINE_WITH_VARYING_SIZE",(function(){return Nn})),n.d(r,"incompatibleChannel",(function(){return Mn})),n.d(r,"invalidEncodingChannel",(function(){return In})),n.d(r,"facetChannelShouldBeDiscrete",(function(){return Dn})),n.d(r,"facetChannelDropped",(function(){return Rn})),n.d(r,"discreteChannelCannotEncode",(function(){return zn})),n.d(r,"lineWithRange",(function(){return Ln})),n.d(r,"orientOverridden",(function(){return Fn})),n.d(r,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return Bn})),n.d(r,"RANGE_STEP_DEPRECATED",(function(){return Un})),n.d(r,"cannotUseScalePropertyWithNonColor",(function(){return qn})),n.d(r,"unaggregateDomainHasNoEffectForRawField",(function(){return $n})),n.d(r,"unaggregateDomainWithNonSharedDomainOp",(function(){return Hn})),n.d(r,"unaggregatedDomainWithLogScale",(function(){return Wn})),n.d(r,"cannotApplySizeToNonOrientedMark",(function(){return Vn})),n.d(r,"scaleTypeNotWorkWithChannel",(function(){return Gn})),n.d(r,"scaleTypeNotWorkWithFieldDef",(function(){return Yn})),n.d(r,"scalePropertyNotWorkWithScaleType",(function(){return Xn})),n.d(r,"scaleTypeNotWorkWithMark",(function(){return Kn})),n.d(r,"stepDropped",(function(){return Jn})),n.d(r,"mergeConflictingProperty",(function(){return Zn})),n.d(r,"mergeConflictingDomainProperty",(function(){return Qn})),n.d(r,"independentScaleMeansIndependentGuide",(function(){return er})),n.d(r,"domainSortDropped",(function(){return tr})),n.d(r,"UNABLE_TO_MERGE_DOMAINS",(function(){return nr})),n.d(r,"MORE_THAN_ONE_SORT",(function(){return rr})),n.d(r,"INVALID_CHANNEL_FOR_AXIS",(function(){return ir})),n.d(r,"cannotStackRangedMark",(function(){return or})),n.d(r,"cannotStackNonLinearScale",(function(){return ar})),n.d(r,"stackNonSummativeAggregate",(function(){return sr})),n.d(r,"invalidTimeUnit",(function(){return lr})),n.d(r,"dayReplacedWithDate",(function(){return ur})),n.d(r,"droppedDay",(function(){return cr})),n.d(r,"errorBarCenterAndExtentAreNotNeeded",(function(){return fr})),n.d(r,"errorBarCenterIsUsedWithWrongExtent",(function(){return dr})),n.d(r,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return pr})),n.d(r,"errorBarCenterIsNotNeeded",(function(){return hr})),n.d(r,"errorBand1DNotSupport",(function(){return mr})),n.d(r,"channelRequiredForBinned",(function(){return gr})),n.d(r,"domainRequiredForThresholdScale",(function(){return br}));var i={};n.r(i),n.d(i,"symbols",(function(){return gc})),n.d(i,"gradient",(function(){return bc})),n.d(i,"labels",(function(){return yc})),n.d(i,"getFirstConditionValue",(function(){return xc}));var o=n(342),a=n(0);Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var s=n(343),l=n.n(s),u=n(344),c=n.n(u),f=n(105),d=n.n(f);function p(e){return!!e.or}function h(e){return!!e.and}function m(e){return!!e.not}function g(e,t){return m(e)?{not:g(e.not,t)}:h(e)?{and:e.and.map(e=>g(e,t))}:p(e)?{or:e.or.map(e=>g(e,t))}:t(e)}const b=c.a,y=l.a;function v(e,t){const n={};for(const r of t)Object(a.v)(e,r)&&(n[r]=e[r]);return n}function x(e,t){const n=Object.assign({},e);for(const e of t)delete n[e];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>d()(e)).join(",")})`};const _=d.a;function w(e){if(Object(a.E)(e))return e;const t=Object(a.H)(e)?e:d()(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function O(e){return!1===e||null===e}function E(e,t){return e.indexOf(t)>-1}function k(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function S(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function T(e,t){for(const n of Object.keys(t))Object(a.ib)(e,n,t[n],!0)}function j(e,t){const n=[],r={};let i;for(const o of e)(i=t(o))in r||(r[i]=1,n.push(o));return n}function A(e,t){for(const n of e)if(t.has(n))return!0;return!1}function P(e){const t=new Set;for(const n of e){const e=Object(a.X)(n).map((e,t)=>0===t?e:`[${e}]`);e.map((t,n)=>e.slice(0,n+1).join("")).forEach(e=>t.add(e))}return t}function C(e,t){return void 0===e||void 0===t||A(P(e),P(t))}const N=Object.keys;function M(e){const t=[];for(const n in e)Object(a.v)(e,n)&&t.push(e[n]);return t}function I(e){return!0===e||!1===e}function D(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function R(e,t){return m(e)?"!("+R(e.not,t)+")":h(e)?"("+e.and.map(e=>R(e,t)).join(") && (")+")":p(e)?"("+e.or.map(e=>R(e,t)).join(") || (")+")":t(e)}function z(e,t){if(0===t.length)return!0;const n=t.shift();return z(e[n],t)&&delete e[n],0===N(e).length}function L(e){return e.charAt(0).toUpperCase()+e.substr(1)}function F(e,t="datum"){const n=Object(a.X)(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(a.Y).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function B(e){return`${Object(a.X)(e).map(e=>U(e,".","\\.")).join("\\.")}`}function U(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function q(e){return`${Object(a.X)(e).join(".")}`}function $(e){return e?Object(a.X)(e).length:0}function H(...e){for(const t of e)if(void 0!==t)return t}let W=42;function V(e){const t=++W;return e?String(e)+t:t}function G(e){return(e%360+360)%360}const Y="area",X="bar",K="image",J="line",Z="point",Q="rect",ee="rule",te="text",ne="tick",re="trail",ie="circle",oe="square",ae="geoshape",se={area:1,bar:1,image:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function le(e){return E(["line","area","trail"],e)}function ue(e){return E(["rect","bar","image"],e)}const ce=N(se);function fe(e){return e.type}Object(a.cb)(ce);const de=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],pe=["filled","color","tooltip","invalid","timeUnitBandPosition","timeUnitBand"],he={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},me={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function ge(e){return!!e.mark}class be{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!ge(e)&&(fe(t=e.mark)?t.type:t)===this.name;var t}}var ye=n(3);const ve={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},xe={count:1,min:1,max:1};function _e(e){return!!e&&!!e.argmin}function we(e){return!!e&&!!e.argmax}N(ve);function Oe(e){return Object(a.H)(e)&&!!ve[e]}const Ee=["count","valid","missing","distinct"];function ke(e){return Object(a.H)(e)&&E(Ee,e)}const Se=["count","sum","distinct","valid","missing"],Te=Object(a.cb)(["mean","average","median","q1","q3","min","max"]),je="row",Ae="column",Pe="facet",Ce="x",Ne="y",Me="x2",Ie="y2",De="latitude",Re="longitude",ze="latitude2",Le="longitude2",Fe="color",Be="fill",Ue="stroke",qe="shape",$e="size",He="opacity",We="fillOpacity",Ve="strokeOpacity",Ge="strokeWidth",Ye="text",Xe="order",Ke="detail",Je="key",Ze="tooltip",Qe="href",et="url",tt={x:1,y:1,x2:1,y2:1};const nt={longitude:1,longitude2:1,latitude:1,latitude2:1};const rt=N(nt),it=Object.assign(Object.assign(Object.assign({},tt),nt),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1});function ot(e){return"color"===e||"fill"===e||"stroke"===e}const at={row:1,column:1,facet:1},st=N(at),lt=Object.assign(Object.assign({},it),at),ut=N(lt),{order:ct,detail:ft,tooltip:dt}=lt,pt=Object(ye.b)(lt,["order","detail","tooltip"]),{row:ht,column:mt,facet:gt}=pt,bt=Object(ye.b)(pt,["row","column","facet"]);N(pt),N(bt);function yt(e){return!!bt[e]}function vt(e){return!!lt[e]}const xt=["x2","y2","latitude2","longitude2"];function _t(e){return wt(e)!==e}function wt(e){switch(e){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude"}return e}function Ot(e){switch(e){case"x":return"x2";case"y":return"y2";case"latitude":return"latitude2";case"longitude":return"longitude2"}}N(it);const{x:Et,y:kt,x2:St,y2:Tt,latitude:jt,longitude:At,latitude2:Pt,longitude2:Ct}=it,Nt=Object(ye.b)(it,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]),Mt=N(Nt),It={x:1,y:1},Dt=N(It);function Rt(e){return"x"===e?"width":"height"}function zt(e){return"width"===e?"x":"y"}const{text:Lt,tooltip:Ft,href:Bt,url:Ut,detail:qt,key:$t,order:Ht}=Nt,Wt=Object(ye.b)(Nt,["text","tooltip","href","url","detail","key","order"]),Vt=N(Wt);const Gt=Object.assign(Object.assign({},It),Wt),Yt=N(Gt);function Xt(e){return!!Gt[e]}function Kt(e,t){return function(e){switch(e){case Fe:case Be:case Ue:case Ke:case Je:case Ze:case Qe:case Xe:case He:case We:case Ve:case Ge:case Pe:case je:case Ae:return Jt;case Ce:case Ne:case De:case Re:return Qt;case Me:case Ie:case ze:case Le:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $e:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case qe:return{point:"always",geoshape:"always"};case Ye:return{text:"always"};case et:return{image:"always"}}}(e)[t]}const Jt={area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Zt}=Jt,Qt=Object(ye.b)(Jt,["geoshape"]);function en(e){switch(e){case Ce:case Ne:case $e:case Ge:case He:case We:case Ve:case Me:case Ie:return;case Pe:case je:case Ae:case qe:case Ye:case Ze:case Qe:case et:return"discrete";case Fe:case Be:case Ue:return"flexible";case De:case Re:case ze:case Le:case Ke:case Je:case Xe:return}}function tn(e){return`Invalid specification ${JSON.stringify(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const nn='Autosize "fit" only works for single views and layered views.';function rn(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function on(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-x".`}function an(e){return e?`Dropping "fit-${e}" because spec has discrete ${Rt(e)}.`:'Dropping "fit" because spec has discrete size.'}function sn(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ln(e){return`The "nearest" transform is not supported for ${e} marks.`}function un(e){return`Selection not supported for ${e} yet.`}function cn(e){return`Cannot find a selection named "${e}".`}const fn="Scale bindings are currently only supported for scales with unbinned, continuous domains.";function dn(e){return`Cannot define and lookup the "${e}" selection in the same view. `+"Try moving the lookup into a second, layered view?"}function pn(e){return`Unknown repeated value "${e}".`}function hn(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const mn="Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).",gn="Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function bn(e){return`Unrecognized parse "${e}".`}function yn(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function vn(e){return`Ignoring an invalid transform: ${_(e)}.`}const xn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function _n(e){return`Layer's shared ${e.join(",")} channel ${1===e.length?"is":"are"} overriden.`}function wn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${_(t)} is overridden by a child projection ${_(n)}.`}function On(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${_(n)}}.`}function En(e){return`Invalid field type "${e}".`}function kn(e,t,n){return`A ${n.scaleType?`${n.scaleType} scale`:n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero"} is used to encode ${e}'s ${t}. This can be misleading as the ${"x"===t?"width":"height"} of the ${e} can be arbitrary based on the scale domain. You may want to use point mark instead.`}function Sn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Tn(e){return`Invalid aggregation operator "${e}".`}function jn(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function An(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Pn(e,t){return`Dropping ${_(e)} from channel "${t}" since it does not contain data field or value.`}function Cn(e,t,n){return`${e}-encoding with type ${t} is deprecated. Replacing with ${n}-encoding.`}const Nn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Mn(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function In(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Dn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Rn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function zn(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function Ln(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Fn(e,t){return`Specified orient "${e}" overridden with "${t}".`}const Bn="Custom domain scale cannot be unioned with default field-based domain.",Un='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function qn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function $n(e){return`Using unaggregated domain with raw field has no effect (${_(e)}).`}function Hn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Wn(e){return`Unaggregated domain is currently unsupported for log scale (${_(e)}).`}function Vn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Gn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Yn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Xn(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Kn(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function Jn(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}function Zn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${_(n)} and ${_(r)}). Using ${_(n)}.`}function Qn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${_(n)} and ${_(r)}). Using the union of the two domains.`}function er(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function tr(e){return`Dropping sort property ${_(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const nr="Unable to merge domains.",rr="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",ir="Invalid channel for axis.";function or(e){return`Cannot stack "${e}" if there is already "${e}2".`}function ar(e){return`Cannot stack non-linear scale (${e}).`}function sr(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function lr(e,t){return`Invalid ${e}: ${_(t)}.`}function ur(e){return`Time unit "${e}" is not supported. We are replacing it with ${U(e,"day","date")}.`}function cr(e){return`Dropping day from datetime ${_(e)} as day cannot be combined with other units.`}function fr(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function dr(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function pr(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function hr(e,t){return`Center is not needed to be specified in ${t} when extent is ${e}.`}function mr(e){return`1D error band does not support ${e}.`}function gr(e){return`Channel ${e} is required for "binned" bin.`}function br(e){return`Domain for ${e} is required for threshold scale.`}const yr=r,vr=Object(a.K)(a.e);let xr=vr;function _r(){return xr=vr}function wr(...e){xr.warn(...e)}const Or=2006;function Er(e){return!!(e&&(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))}const kr=["january","february","march","april","may","june","july","august","september","october","november","december"],Sr=kr.map(e=>e.substr(0,3)),Tr=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],jr=Tr.map(e=>e.substr(0,3));function Ar(e,t=!1,n=!1){const r=[];if(t&&void 0!==e.day&&N(e).length>1&&(wr(yr.droppedDay(e)),delete(e=y(e)).day),void 0!==e.year?r.push(e.year):void 0!==e.day?r.push(Or):r.push(0),void 0!==e.month){const n=t?function(e){if(Object(a.E)(e))return(e-1).toString();{const t=e.toLowerCase(),n=kr.indexOf(t);if(-1!==n)return n+"";const r=t.substr(0,3),i=Sr.indexOf(r);if(-1!==i)return i+"";throw new Error(yr.invalidTimeUnit("month",e))}}(e.month):e.month;r.push(n)}else if(void 0!==e.quarter){const n=t?function(e){if(Object(a.E)(e))return e>4&&wr(yr.invalidTimeUnit("quarter",e)),(e-1).toString();throw new Error(yr.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;r.push(n+"*3")}else r.push(0);if(void 0!==e.date)r.push(e.date);else if(void 0!==e.day){const n=t?function(e){if(Object(a.E)(e))return e%7+"";{const t=e.toLowerCase(),n=Tr.indexOf(t);if(-1!==n)return n+"";const r=t.substr(0,3),i=jr.indexOf(r);if(-1!==i)return i+"";throw new Error(yr.invalidTimeUnit("day",e))}}(e.day):e.day;r.push(n+"+1")}else r.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const n=e[t];r.push(void 0===n?0:n)}const i=r.join(", ");return n?e.utc?new Function(`return +new Date(Date.UTC(${i}))`)():new Function(`return +new Date(${i})`)():e.utc?`utc(${i})`:`datetime(${i})`}var Pr;!function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.MONTHDATEHOURS="monthdatehours",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCMONTHDATEHOURS="utcmonthdatehours",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"}(Pr||(Pr={}));const Cr={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Nr=N(Cr);const Mr={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};const Ir={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},Dr=Object.assign(Object.assign({},Mr),Ir);function Rr(e){return!!Dr[e]}const zr=Object.assign(Object.assign(Object.assign(Object.assign({},Cr),Mr),{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1}),Ir);N(zr);function Lr(e,t){const n=e.indexOf(t);return n>-1&&(t!==Pr.SECONDS||0===n||"i"!==e.charAt(n-1))}function Fr(e,t,{end:n}={end:!1}){const r=F(t),i=Rr(e)?"utc":"";let o;const a=Nr.reduce((t,n)=>(Lr(e,n)&&(t[n]=function(e){return e===Pr.QUARTER?`(${i}quarter(${r})-1)`:`${i}${e}(${r})`}(n),o=n),t),{});return n&&(a[o]+="+1"),Ar(a)}function Br(e,t){if(!e)return;const n=[],r=Lr(e,Pr.YEAR);Lr(e,Pr.MONTH)&&n.push(!1!==t?"%b":"%B"),Lr(e,Pr.DAY)?n.push(t?"%a":"%A"):Lr(e,Pr.DATE)&&n.push("%d"+(r?",":"")),r&&n.push(t?"%y":"%Y");const i=[];Lr(e,Pr.HOURS)&&i.push("%H"),Lr(e,Pr.MINUTES)&&i.push("%M"),Lr(e,Pr.SECONDS)&&i.push("%S"),Lr(e,Pr.MILLISECONDS)&&i.push("%L");const o=[];return n.length>0&&o.push(n.join(" ")),i.length>0&&o.push(i.join(":")),o}function Ur(e){return"day"!==e&&e.indexOf("day")>=0?(wr(yr.dayReplacedWithDate(e)),U(e,"day","date")):e}function qr(e){return e&&!!e.field&&void 0!==e.equal}function $r(e){return e&&!!e.field&&void 0!==e.lt}function Hr(e){return e&&!!e.field&&void 0!==e.lte}function Wr(e){return e&&!!e.field&&void 0!==e.gt}function Vr(e){return e&&!!e.field&&void 0!==e.gte}function Gr(e){return!!(e&&e.field&&Object(a.A)(e.range)&&2===e.range.length)}function Yr(e){return e&&!!e.field&&(Object(a.A)(e.oneOf)||Object(a.A)(e.in))}function Xr(e){return Yr(e)||qr(e)||Gr(e)||$r(e)||Wr(e)||Hr(e)||Vr(e)}function Kr(e,t){return zo(e,{timeUnit:t,time:!0})}function Jr(e,t=!0){const{field:n,timeUnit:r}=e,i=r?"time("+Fr(r,n)+")":vo(e,{expr:"datum"});if(qr(e))return i+"==="+Kr(e.equal,r);if($r(e)){return`${i}<${Kr(e.lt,r)}`}if(Wr(e)){return`${i}>${Kr(e.gt,r)}`}if(Hr(e)){return`${i}<=${Kr(e.lte,r)}`}if(Vr(e)){return`${i}>=${Kr(e.gte,r)}`}if(Yr(e))return`indexof([${function(e,t){return e.map(e=>Kr(e,t))}(e.oneOf,r).join(",")}], ${i}) !== -1`;if(function(e){return e&&!!e.field&&void 0!==e.valid}(e))return Zr(i,e.valid);if(Gr(e)){const n=e.range[0],o=e.range[1];if(null!==n&&null!==o&&t)return"inrange("+i+", ["+Kr(n,r)+", "+Kr(o,r)+"])";const a=[];return null!==n&&a.push(`${i} >= ${Kr(n,r)}`),null!==o&&a.push(`${i} <= ${Kr(o,r)}`),a.length>0?a.join(" && "):"true"}throw new Error(`Invalid field predicate: ${JSON.stringify(e)}`)}function Zr(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Qr(e){return Xr(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:Ur(e.timeUnit)}):e}const ei={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};const ti="quantitative",ni="ordinal",ri="temporal",ii="nominal",oi="geojson";var ai;!function(e){e.LINEAR="linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.SYMLOG="symlog",e.TIME="time",e.UTC="utc",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.BIN_ORDINAL="bin-ordinal",e.ORDINAL="ordinal",e.POINT="point",e.BAND="band"}(ai||(ai={}));const si={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},li=N(si);function ui(e,t){const n=si[e],r=si[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const ci={linear:0,log:1,pow:1,sqrt:1,symlog:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function fi(e){return ci[e]}const di=["linear","log","pow","sqrt","symlog","time","utc"],pi=Object(a.cb)(di),hi=Object(a.cb)(["quantile","quantize","threshold"]),mi=di.concat(["quantile","quantize","threshold"]),gi=Object(a.cb)(mi),bi=Object(a.cb)(["ordinal","bin-ordinal","point","band"]);function yi(e){return e in bi}function vi(e){return e in gi}function xi(e){return e in pi}function _i(e){return e in hi}function wi(e){var t;return null===(t=e)||void 0===t?void 0:t.selection}const Oi={type:1,domain:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Ei,domain:ki,range:Si,scheme:Ti}=(N(Oi),Oi),ji=Object(ye.b)(Oi,["type","domain","range","scheme"]),Ai=N(ji);!function(){var e;const t={};for(const n of ut)for(const r of N(ei))for(const i of li){const o=Ii(n,r);Mi(n,i)&&Ni(i,r)&&(t[o]=null!=(e=t[o])?e:[],t[o].push(i))}}();function Pi(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!E(["point","band","identity"],e);case"bins":return!E(["point","band","identity","ordinal"],e);case"round":return xi(e)||"band"===e||"point"===e;case"padding":return xi(e)||E(["point","band"],e);case"paddingOuter":case"align":return E(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return xi(e);case"nice":return xi(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return vi(e)&&!E(["log","time","utc","threshold","quantile"],e)}}function Ci(e,t){switch(t){case"interpolate":case"scheme":return ot(e)?void 0:yr.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function Ni(e,t){return E([ni,ii],t)?void 0===e||yi(e):t===ri?E([ai.TIME,ai.UTC,void 0],e):t!==ti||E([ai.LOG,ai.POW,ai.SQRT,ai.SYMLOG,ai.QUANTILE,ai.QUANTIZE,ai.THRESHOLD,ai.LINEAR,void 0],e)}function Mi(e,t){switch(e){case Ce:case Ne:return xi(t)||E(["band","point"],t);case $e:case Ge:case He:case We:case Ve:return xi(t)||_i(t)||E(["band","point"],t);case Fe:case Be:case Ue:return"band"!==t;case qe:return"ordinal"===t}return!1}function Ii(e,t){return e+"_"+t}function Di(e){const{anchor:t,frame:n,offset:r,orient:i,color:o}=e,a=Object(ye.b)(e,["anchor","frame","offset","orient","color"]);return{mark:Object.assign(Object.assign({},a),o?{fill:o}:{}),nonMark:Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{})}}function Ri(e){return Object(a.H)(e)||Object(a.A)(e)&&Object(a.H)(e[0])}function zi(e){var t;return[].concat(e.type,null!=(t=e.style)?t:[])}function Li(e,t,n){return H(t[e],Fi(e,t,n))}function Fi(e,t,n,{vgChannel:r}={}){return H(r?Bi(e,t,n.style):void 0,Bi(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Bi(e,t,n){const r=zi(t);let i;for(const t of r){const r=n[t],o=e;r&&void 0!==r[o]&&(i=r[o])}return i}function Ui(e,t,n,r){if(Ro(e)){const i=go(e)&&e.scale&&e.scale.type===ai.UTC;return{signal:Vi(vo(e,{expr:n}),e.timeUnit,t,r.text.shortTimeLabels,r.timeFormat,i,!0)}}{const i=qi(e,t,r);if(Uo(e.bin)){return{signal:Wi(vo(e,{expr:n}),vo(e,{expr:n,binSuffix:"end"}),i,r)}}return"quantitative"===e.type||i?{signal:`${$i(vo(e,{expr:n,binSuffix:"range"}),i)}`}:{signal:`''+${vo(e,{expr:n})}`}}}function qi(e,t,n){return t||(e.type===ti?n.numberFormat:void 0)}function $i(e,t){return`format(${e}, "${t||""}")`}function Hi(e,t,n){return $i(e,null!=t?t:n.numberFormat)}function Wi(e,t,n,r){return`${Zr(e,!1)} ? "null" : ${Hi(e,n,r)} + " - " + ${Hi(t,n,r)}`}function Vi(e,t,n,r,i,o,a=!1){return!t||n?(n=null!=n?n:i)||a?`${o?"utc":"time"}Format(${e}, '${n}')`:void 0:function(e,t,n,r){if(!e)return;const i=Br(e,n);let o="";return Lr(e,Pr.QUARTER)&&(o=`'Q' + quarter(${t})`),i.length>0&&(o&&(o+=" + ' ' + "),o+=r?`utcFormat(${t}, '${i.join(" ")}')`:`timeFormat(${t}, '${i.join(" ")}')`),o||void 0}(t,e,r,o)}function Gi(e,t){return Object(a.i)(e).reduce((e,n)=>{var r;return e.field.push(vo(n,t)),e.order.push(null!=(r=n.sort)?r:"ascending"),e},{field:[],order:[]})}function Yi(e,t){const n=[...e];return t.forEach(e=>{for(const t of n)if(b(t,e))return;n.push(e)}),n}function Xi(e,t){return b(e,t)||!t?e:e?[...Object(a.i)(e),...Object(a.i)(t)].join(", "):t}function Ki(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if(Ri(n)&&Ri(r))return{explicit:e.explicit,value:Xi(n,r)};if(!Ri(n)&&!Ri(r))return{explicit:e.explicit,value:Yi(n,r)};throw new Error("It should never reach here")}const Ji="mean",Zi={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Qi(e){return!!Zi[e]}function eo(e){return!!e&&!!e.encoding}function to(e){return!(!e||"count"!==e.op&&!e.field)}function no(e){return!!e&&Object(a.A)(e)}function ro(e){return!!e.row||!!e.column}function io(e){return void 0!==e.facet}function oo(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function ao(e){return po(e)&&!!e.sort}function so(e,t,n,r,i,{isMidPoint:o}={}){const{timeUnit:a,bin:s}=t;if(E(["x","y"],e)){if(bo(t)&&void 0!==t.band)return t.band;if(a&&!n)return o?Fi("timeUnitBandPosition",r,i):ue(r.type)?Fi("timeUnitBand",r,i):0;if(Uo(s))return ue(r.type)&&!o?1:.5}}function lo(e,t,n,r,i){return!!(Uo(t.bin)||t.timeUnit&&po(t)&&"temporal"===t.type)&&!!so(e,t,n,r,i)}function uo(e){return!!e&&!!e.condition}function co(e){return!!e&&!!e.condition&&!Object(a.A)(e.condition)&&fo(e.condition)}function fo(e){return!(!e||!e.field&&"count"!==e.aggregate)}function po(e){return!!e&&(!!e.field&&!!e.type||"count"===e.aggregate)}function ho(e){return fo(e)&&Object(a.H)(e.field)}function mo(e){return e&&"value"in e&&void 0!==e.value}function go(e){return!(!e||!e.scale&&!e.sort)}function bo(e){return!(!e||!e.axis&&!e.stack&&!e.impute&&void 0===e.band)}function yo(e){return!!e&&!!e.format}function vo(e,t={}){var n,r,i;let o=e.field;const s=t.prefix;let l=t.suffix,u="";if(function(e){return"count"===e.aggregate}(e))o=function(e){return 0===e.indexOf("__")}(c="count")?c:`__${c}`;else{let a;if(!t.nofn)if(function(e){return!!e.op}(e))a=e.op;else{const{bin:s,aggregate:c,timeUnit:f}=e;Uo(s)?(a=Bo(s),l=(null!=(n=t.binSuffix)?n:"")+(null!=(r=t.suffix)?r:"")):c?we(c)?(u=`.${o}`,o=`argmax_${c.argmax}`):_e(c)?(u=`.${o}`,o=`argmin_${c.argmin}`):a=String(c):f&&(a=String(f),l=(!E(["range","mid"],t.binSuffix)&&t.binSuffix||"")+(null!=(i=t.suffix)?i:""))}a&&(o=o?`${a}_${o}`:a)}var c;return l&&(o=`${o}_${l}`),s&&(o=`${s}_${o}`),t.forAs?o:t.expr?function(e,t="datum"){return`${t}[${Object(a.Y)(Object(a.X)(e).join("."))}]`}(o,t.expr)+u:B(o)+u}function xo(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"temporal":return!1}throw new Error(yr.invalidFieldType(e.type))}function _o(e){return!xo(e)}function wo(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if("count"===o)return t.countTitle;if(Uo(r))return`${n} (binned)`;if(i){return`${n} (${function(e){return Nr.reduce((t,n)=>Lr(e,n)?[...t,n]:t,[])}(i).join("-")})`}return o?we(o)?`${n} for max ${o.argmax}`:_e(o)?`${n} for min ${o.argmin}`:`${L(o)} of ${n}`:n}const Oo=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(we(t))return`${i} for argmax(${t.argmax})`;if(_e(t))return`${i} for argmin(${t.argmin})`;const o=t||r||Uo(n)&&"bin";return o?o.toUpperCase()+"("+i+")":i}(e);default:return wo(e,t)}};let Eo=Oo;function ko(e){Eo=e}function So(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=(null!=(i=To(e))?i:{}).title,s=r?jo(e,t):void 0;return n?H(a,e.title,s):null!=(o=null!=a?a:e.title)?o:s}function To(e){return bo(e)&&e.axis?e.axis:(t=e)&&t.legend&&e.legend?e.legend:function(e){return!!e&&!!e.header}(e)&&e.header?e.header:void 0;var t}function jo(e,t){return Eo(e,t)}function Ao(e){var t;if(yo(e)&&e.format)return e.format;return(null!=(t=To(e))?t:{}).format}function Po(e){return fo(e)?e:co(e)?e.condition:void 0}function Co(e){return fo(e)?e:co(e)?e.condition:void 0}function No(e,t){if(Object(a.H)(e)||Object(a.E)(e)||Object(a.B)(e)){const n=Object(a.H)(e)?"string":Object(a.E)(e)?"number":"boolean";return wr(yr.primitiveChannelDef(t,n,e)),{value:e}}return fo(e)?Mo(e,t):co(e)?Object.assign(Object.assign({},e),{condition:Mo(e.condition,t)}):e}function Mo(e,t){const{aggregate:n,timeUnit:r,bin:i,field:o}=e,s=Object.assign({},e);if(!n||Oe(n)||we(n)||_e(n)||(wr(yr.invalidAggregate(n)),delete s.aggregate),r&&(s.timeUnit=Ur(r)),o&&(s.field=`${o}`),Uo(i)&&(s.bin=Io(i,t)),qo(i)&&!E(Dt,t)&&wr(`Channel ${t} should not be used with "binned" bin`),po(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case ti:return"quantitative";case"t":case ri:return"temporal";case"o":case ni:return"ordinal";case"n":case ii:return"nominal";case oi:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&ke(n)&&(wr(yr.invalidFieldTypeForCountAggregate(e,n)),s.type="quantitative")}else if(!_t(t)){const e=function(e,t){if(e.timeUnit)return"temporal";if(Uo(e.bin))return"quantitative";switch(en(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(s,t);wr(yr.missingFieldType(t,e)),s.type=e}if(po(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case"row":case"column":case"facet":return _o(e)?{compatible:!1,warning:yr.facetChannelShouldBeDiscrete(t)}:Do;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":case"url":return Do;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==ti?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Do;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return"nominal"!==n||e.sort?Do:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case"shape":return E(["ordinal","nominal","geojson"],e.type)?Do:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==e.type||"sort"in e?Do:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}throw new Error("channelCompatability not implemented for channel "+t)}(s,t);e||wr(n)}if(ao(s)&&Object(a.H)(s.sort)){const{sort:e}=s;if(Qi(e))return Object.assign(Object.assign({},s),{sort:{encoding:e}});const t=e.substr(1);if("-"===e.charAt(0)&&Qi(t))return Object.assign(Object.assign({},s),{sort:{encoding:t,order:"descending"}})}return s}function Io(e,t){return Object(a.B)(e)?{maxbins:Wo(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:Wo(t)})}const Do={compatible:!0};function Ro(e){const t=To(e),n=t&&t.formatType||yo(e)&&e.formatType;return"time"===n||!n&&function(e){return"temporal"===e.type||!!e.timeUnit}(e)}function zo(e,{timeUnit:t,type:n,time:r,undefinedIfExprNotRequired:i}){let o;var s;return Er(e)?o=Ar(e,!0):(Object(a.H)(e)||Object(a.E)(e))&&(t||"temporal"===n)&&(o=function(e){return!!Cr[e]}(t)?Ar({[t]:e},!0):function(e){return!!Mr[e]}(t)?zo(e,{timeUnit:(s=t,s.substr(3))}):`datetime(${JSON.stringify(e)})`),o?r?`time(${o})`:o:i?void 0:JSON.stringify(e)}function Lo(e,t){const{timeUnit:n,type:r}=e;return t.map(e=>{const t=zo(e,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return void 0!==t?{signal:t}:e})}function Fo(e,t){return Uo(e.bin)?Xt(t)&&E(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}function Bo(e){return Object(a.B)(e)&&(e=Io(e,void 0)),"bin"+N(e).map(t=>Ho(e[t])?D(`_${t}_${Object.entries(e[t])}`):D(`_${t}_${e[t]}`)).join("")}function Uo(e){return!0===e||$o(e)&&!e.binned}function qo(e){return"binned"===e||$o(e)&&!0===e.binned}function $o(e){return Object(a.F)(e)}function Ho(e){var t;return null===(t=e)||void 0===t?void 0:t.selection}function Wo(e){switch(e){case je:case Ae:case $e:case Fe:case Be:case Ue:case Ge:case He:case We:case Ve:case qe:return 6;default:return 10}}function Vo(e,t){const n=e&&e[t];return!!n&&(Object(a.A)(n)?k(n,e=>!!e.field):fo(n)||co(n))}function Go(e){return k(ut,t=>{if(Vo(e,t)){const n=e[t];if(Object(a.A)(n))return k(n,e=>!!e.aggregate);{const e=Po(n);return e&&!!e.aggregate}}return!1})}function Yo(e,t){const n=[],r=[],i=[],o=[],a={};return Jo(e,(s,l)=>{var u;if(fo(s)){const{field:c,aggregate:f,timeUnit:d,bin:p}=s,h=Object(ye.b)(s,["field","aggregate","timeUnit","bin"]);if(f||d||p){const e=To(s),m=e&&e.title;let g=vo(s,{forAs:!0});const b=Object.assign(Object.assign(Object.assign({},m?[]:{title:So(s,t,{allowDisabling:!0})}),h),{field:g}),y="x"===l||"y"===l;if(f){let e;if(we(f)?(e="argmax",g=vo({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${g}.${c}`):_e(f)?(e="argmin",g=vo({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${g}.${c}`):"boxplot"!==f&&"errorbar"!==f&&"errorband"!==f&&(e=f),e){const t={op:e,as:g};c&&(t.field=c),o.push(t)}}else if(n.push(g),po(s)&&Uo(p)){if(r.push({bin:p,field:c,as:g}),n.push(vo(s,{binSuffix:"end"})),Fo(s,l)&&n.push(vo(s,{binSuffix:"range"})),y){const e={field:g+"_end"};a[l+"2"]=e}b.bin="binned",_t(l)||(b.type="quantitative")}else if(d){i.push({timeUnit:d,field:c,as:g});const e=Br(d,t.axis.shortTimeLabels).join(" "),n=po(s)&&s.type!==ri&&"time";"text"===l||"tooltip"===l?(b.format=null!=(u=b.format)?u:e,n&&(b.formatType=n)):!function(e){return!!Nt[e]}(l)?y&&(b.axis=Object.assign(Object.assign({format:e},n?{formatType:n}:{}),b.axis)):b.legend=Object.assign(Object.assign({format:e},n?{formatType:n}:{}),b.legend)}a[l]=b}else n.push(c),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function Xo(e,t){const n=t.type;return N(e).reduce((r,i)=>{var o;if(!vt(i))return wr(yr.invalidEncodingChannel(i)),r;if(!function(e,t,n){const r=Kt(t,n);if(!r)return!1;if("binned"===r){const n=e["x2"===t?"x":"y"];return!!(fo(n)&&fo(e[t])&&qo(n.bin))}return!0}(e,i,n))return wr(yr.incompatibleChannel(i,n)),r;if("size"===i&&"line"===n){if(null===(o=Co(e[i]))||void 0===o?void 0:o.aggregate)return wr(yr.LINE_WITH_VARYING_SIZE),r}if("color"===i&&(t.filled?"fill"in e:"stroke"in e))return wr(yr.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),r;const s=e[i];if("detail"===i||"order"===i&&!Object(a.A)(s)&&!mo(s)||"tooltip"===i&&Object(a.A)(s))s&&(r[i]=(Object(a.A)(s)?s:[s]).reduce((e,t)=>(fo(t)?e.push(Mo(t,i)):wr(yr.emptyFieldDef(t,i)),e),[]));else{if("tooltip"===i&&null===s)r[i]=null;else if(!fo(s)&&!mo(s)&&!uo(s))return wr(yr.emptyFieldDef(s,i)),r;r[i]=No(s,i)}return r},{})}function Ko(e){const t=[];for(const n of N(e))if(Vo(e,n)){const r=e[n],i=Object(a.A)(r)?r:[r];for(const e of i)fo(e)?t.push(e):co(e)&&t.push(e.condition)}return t}function Jo(e,t,n){if(e)for(const r of N(e)){const i=e[r];Object(a.A)(i)?i.forEach(e=>{t.call(n,e,r)}):t.call(n,i,r)}}function Zo(e,t,n,r){return e?N(e).reduce((n,i)=>{const o=e[i];return Object(a.A)(o)?o.reduce((e,n)=>t.call(r,e,n,i),n):t.call(r,n,o,i)},n):n}function Qo(e,t){return N(t).reduce((n,r)=>{switch(r){case"x":case"y":case"href":case"url":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return n;case"order":if("line"===e||"trail"===e)return n;case"detail":case"key":{const e=t[r];return(Object(a.A)(e)||fo(e))&&(Object(a.A)(e)?e:[e]).forEach(e=>{e.aggregate||n.push(vo(e,{}))}),n}case"size":if("trail"===e)return n;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":{const e=Co(t[r]);return e&&!e.aggregate&&n.push(vo(e,{})),n}}},[])}function ea(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map(({fieldPrefix:e,titlePrefix:n})=>({field:e+t.field,type:t.type,title:n+(r?" of "+t.field:"")})),...Ko(n)]}}function ta(e){const{axis:t,title:n,field:r}=e;return t&&void 0!==t.title?void 0:H(n,r)}function na(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:l,mark:u,positionPrefix:c,endPositionPrefix:f,extraEncoding:d={}})=>{const p=ta(n);return ra(e,l,i,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},void 0!==p?{title:p}:{}),void 0!==o?{scale:o}:{}),void 0!==s?{axis:s}:{})},Object(a.H)(f)?{[t+"2"]:{field:f+"_"+n.field,type:n.type}}:{}),r),d)})}}function ra(e,t,n,r){const{clip:i,color:o,opacity:s}=e,l=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),s?{opacity:s}:{}),fe(r.mark)?r.mark:{type:r.mark}),{style:`${l}-${t}`}),Object(a.B)(e[t])?{}:e[t])})]:[]}function ia(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[i+"2"],s=r[i+"Error"],l=r[i+"Error2"];return{continuousAxisChannelDef:oa(o,n),continuousAxisChannelDef2:oa(a,n),continuousAxisChannelDefError:oa(s,n),continuousAxisChannelDefError2:oa(l,n),continuousAxis:i}}function oa(e,t){if(e&&e.aggregate){const{aggregate:n}=e,r=Object(ye.b)(e,["aggregate"]);return n!==t&&wr(yr.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function aa(e,t){const{mark:n,encoding:r}=e;if(fo(r.x)&&_o(r.x)){if(fo(r.y)&&_o(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===t)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===t)return"horizontal";if(r.x.aggregate===t&&r.y.aggregate===t)throw new Error("Both x and y cannot have aggregate");return fe(n)&&n.orient?n.orient:"vertical"}return"horizontal"}if(fo(r.y)&&_o(r.y))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}const sa="boxplot",la=N({box:1,median:1,outliers:1,rule:1,ticks:1}),ua=new be(sa,fa);function ca(e){return Object(a.E)(e)?"tukey":e}function fa(e,{config:t}){var n,r;const{mark:i,encoding:o,selection:s,projection:l}=e,u=Object(ye.b)(e,["mark","encoding","selection","projection"]),c=fe(i)?i:{type:i};s&&wr(yr.selectionNotSupported("boxplot"));const f=null!=(n=c.extent)?n:t.boxplot.extent,d=H(c.size,t.boxplot.size),p=ca(f),{transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=aa(e,sa),{continuousAxisChannelDef:i,continuousAxis:o}=ia(e,r,sa),s=i.field,l=ca(t),u=[...da(s),{op:"median",field:s,as:"mid_box_"+s},{op:"min",field:s,as:("min-max"===l?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===l?"upper_whisker_":"max_")+s}],c="min-max"===l||"tukey"===l?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:"iqr_"+s},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:"upper_whisker_"+s},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:"lower_whisker_"+s}],f=e.encoding,d=o,p=(f[d],Object(ye.b)(f,["symbol"==typeof d?d:d+""])),{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=function(e){const{tooltip:t}=e,n=Object(ye.b)(e,["tooltip"]);if(!t)return{filteredEncoding:e};let r,i;return Object(a.A)(t)?(t.forEach(e=>{e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e))}),r&&(n.tooltip=r)):t.aggregate?n.tooltip=t:i=t,Object(a.A)(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(p),{bins:g,timeUnits:b,aggregate:y,groupby:v,encoding:x}=Yo(m,n),_="vertical"===r?"horizontal":"vertical",w=r;return{transform:[...g,...b,{aggregate:[...y,...u],groupby:v},...c],groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:h}}(e,f,t),{color:O,size:E}=v,k=Object(ye.b)(v,["color","size"]),S=e=>na(c,g,m,e,t.boxplot),T=S(k),j=S(v),A=S(Object.assign(Object.assign({},k),E?{size:E}:{})),P=ea([{fieldPrefix:"min-max"===p?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===p?"lower_whisker_":"min_",titlePrefix:"Min"}],m,v),C={type:"tick",color:"black",opacity:1,orient:x,invalid:null},N="min-max"===p?P:ea([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,v),M=[...T({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...T({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...T({partName:"ticks",mark:C,positionPrefix:"lower_whisker",extraEncoding:N}),...T({partName:"ticks",mark:C,positionPrefix:"upper_whisker",extraEncoding:N})],I=[..."tukey"!==p?M:[],...j({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:_,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...A({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Object(a.F)(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),d?{size:d}:{}),{orient:x}),positionPrefix:"mid_box",extraEncoding:P})];let D;if("min-max"!==p){const e=`datum["lower_box_${m.field}"]`,n=`datum["upper_box_${m.field}"]`,r=`(${n} - ${e})`,i=`${e} - ${f} * ${r}`,o=`${n} + ${f} * ${r}`,a=`datum["${m.field}"]`,s={joinaggregate:da(m.field),groupby:b};let l=void 0;"tukey"===p&&(l={transform:[{filter:`(${i} <= ${a}) && (${a} <= ${o})`},{aggregate:[{op:"min",field:m.field,as:"lower_whisker_"+m.field},{op:"max",field:m.field,as:"upper_whisker_"+m.field},{op:"min",field:"lower_box_"+m.field,as:"lower_box_"+m.field},{op:"max",field:"upper_box_"+m.field,as:"upper_box_"+m.field},...y],groupby:b}],layer:M});const{tooltip:u}=k,d=Object(ye.b)(k,["tooltip"]),{scale:h,axis:v}=m,x=ta(m),_=ra(c,"outliers",t.boxplot,{transform:[{filter:`(${a} < ${i}) || (${a} > ${o})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},void 0!==x?{title:x}:{}),void 0!==h?{scale:h}:{}),void 0!==v?{axis:v}:{})},d),w?{tooltip:w}:{})})[0];_&&l?D={transform:[s],layer:[_,l]}:_?(D=_).transform.unshift(s):l&&(D=l).transform.unshift(s)}return D?Object.assign(Object.assign({},u),{layer:[D,{transform:h,layer:I}]}):Object.assign(Object.assign({},u),{transform:(r=u.transform,null!=r?r:[]).concat(h),layer:I})}function da(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}const pa="errorbar",ha=N({ticks:1,rule:1}),ma=new be(pa,ga);function ga(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=ya(e,pa,t),c=na(s,i,r,o,t.errorbar),f={type:"tick",orient:a};return Object.assign(Object.assign({},l),{transform:n,layer:[...c({partName:"ticks",mark:f,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:f,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:"rule",positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})]})}function ba(e,t){const{encoding:n}=e;if(function(e){return(fo(e.x)||fo(e.y))&&!fo(e.x2)&&!fo(e.y2)&&!fo(e.xError)&&!fo(e.xError2)&&!fo(e.yError)&&!fo(e.yError2)}(n))return{orient:aa(e,t),inputType:"raw"};const r=function(e){return fo(e.x2)||fo(e.y2)}(n),i=function(e){return fo(e.xError)||fo(e.xError2)||fo(e.yError)||fo(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(t+" cannot be both type aggregated-upper-lower and aggregated-error");const e=n.x2,r=n.y2;if(fo(e)&&fo(r))throw new Error(t+" cannot have both x2 and y2");if(fo(e)){if(fo(o)&&_o(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+t)}if(fo(r)){if(fo(a)&&_o(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+t)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(fo(r)&&!fo(e))throw new Error(t+" cannot have xError2 without xError");if(fo(s)&&!fo(i))throw new Error(t+" cannot have yError2 without yError");if(fo(e)&&fo(i))throw new Error(t+" cannot have both xError and yError with both are quantiative");if(fo(e)){if(fo(o)&&_o(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(fo(i)){if(fo(a)&&_o(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function ya(e,t,n){var r;const{mark:i,encoding:o,selection:a,projection:s}=e,l=Object(ye.b)(e,["mark","encoding","selection","projection"]),u=fe(i)?i:{type:i};a&&wr(yr.selectionNotSupported(t));const{orient:c,inputType:f}=ba(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:p,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:m,continuousAxis:g}=ia(e,c,t),{errorBarSpecificAggregate:b,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:x}=function(e,t,n,r,i,o,a,s){let l=[],u=[];const c=t.field;let f,d=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&wr(yr.errorBarCenterIsUsedWithWrongExtent(t,n,a)),"stderr"===n||"stdev"===n)l=[{op:n,field:c,as:"extent_"+c},{op:t,field:c,as:"center_"+c}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:"upper_"+c},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:"lower_"+c}],f=[{fieldPrefix:"center_",titlePrefix:L(t)},{fieldPrefix:"upper_",titlePrefix:va(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:va(t,n,"-")}],d=!0;else{let t,r,i;e.center&&e.extent&&wr(yr.errorBarCenterIsNotNeeded(e.extent,a)),"ci"===n?(t="mean",r="ci0",i="ci1"):(t="median",r="q1",i="q3"),l=[{op:r,field:c,as:"lower_"+c},{op:i,field:c,as:"upper_"+c},{op:t,field:c,as:"center_"+c}],f=[{fieldPrefix:"upper_",titlePrefix:So({field:c,aggregate:i,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:So({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:So({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&wr(yr.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===o?(f=[],u=[{calculate:`datum["${n.field}"]`,as:"upper_"+c},{calculate:`datum["${c}"]`,as:"lower_"+c}]):"aggregated-error"===o&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:"upper_"+c}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:"lower_"+c}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:"lower_"+c}));for(const e of u)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:U(U(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}(u,d,p,h,m,f,t,n),_=g,w=(o[_],"x"===g?"x2":"y2"),O=(o[w],"x"===g?"xError":"yError"),E=(o[O],"x"===g?"xError2":"yError2"),k=(o[E],Object(ye.b)(o,["symbol"==typeof _?_:_+"","symbol"==typeof w?w:w+"","symbol"==typeof O?O:O+"","symbol"==typeof E?E:E+""])),{bins:S,timeUnits:T,aggregate:j,groupby:A,encoding:P}=Yo(k,n),C=[...j,...b],N="raw"!==f?[]:A,M=ea(v,d,P,x);return{transform:[...(r=l.transform,null!=r?r:[]),...S,...T,...C.length?[{aggregate:C,groupby:N}]:[],...y],groupby:N,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:P,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:M}}function va(e,t,n){return L(e)+" "+n+" "+t}const xa="errorband",_a=N({band:1,borders:1}),wa=new be(xa,Oa);function Oa(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=ya(e,xa,t),u=a,c=na(u,i,r,o,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},p={type:f?"line":"rule"};const h=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{interpolate:u.tension}:{});return f?(d=Object.assign(Object.assign({},d),h),p=Object.assign(Object.assign({},p),h)):u.interpolate?wr(yr.errorBand1DNotSupport("interpolate")):u.tension&&wr(yr.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},s),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:l})]})}const Ea={};function ka(e,t,n){const r=new be(e,t);Ea[e]={normalizer:r,parts:n}}ka(sa,fa,la),ka(pa,ga,ha),ka(xa,Oa,_a);const Sa=["shortTimeLabels"],Ta=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength"],ja={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Aa=(N(ja),"_vgsid_"),Pa={single:{on:"click",fields:[Aa],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Aa],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ca(e){return void 0!==e.concat}function Na(e){return void 0!==e.vconcat}function Ma(e){return void 0!==e.hconcat}function Ia(e){return void 0!==e.repeat}function Da(e){return Object(a.F)(e)&&void 0!==e.step}const Ra=N({align:1,bounds:1,center:1,columns:1,spacing:1});function za(e,t){var n;return null!=(n=e[t])?n:e["width"===t?"continuousWidth":"continuousHeight"]}function La(e,t){const n=Fa(e,t);return Da(n)?n.step:Ba}function Fa(e,t){var n;return H(null!=(n=e[t])?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Ba=20;const Ua={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Ba},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},area:{},bar:he,circle:{},geoshape:{},image:{},line:{},point:{},rect:me,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},axis:{},axisX:{},axisY:{},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Pa,style:{},title:{},facet:{spacing:20},repeat:{spacing:20},concat:{spacing:20}};function qa(e){return Object(a.M)({},Ua,e)}const $a=["view",...ce],Ha=["background","padding","facet","concat","repeat","numberFormat","timeFormat","countTitle","header","scale","selection","overlay"],Wa=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]});function Va(e){e=y(e);for(const t of Ha)delete e[t];if(e.axis)for(const t of Sa)delete e.axis[t];if(e.legend){for(const t of Sa)delete e.legend[t];for(const t of Ta)delete e.legend[t]}if(e.mark)for(const t of pe)delete e.mark[t];for(const t of $a){for(const n of pe)delete e[t][n];const n=Wa[t];if(n)for(const r of n)delete e[t][r];Ga(e,t)}for(const t of N(Ea))delete e[t];Ga(e,"title","group-title");for(const t in e)Object(a.F)(e[t])&&0===N(e[t]).length&&delete e[t];return N(e).length>0?e:void 0}function Ga(e,t,n,r){const i="title"===t?Di(e.title).mark:r?e[t][r]:e[t];"view"===t&&(n="cell");const o=Object.assign(Object.assign({},i),e.style[t]);N(o).length>0&&(e.style[null!=n?n:t]=o),r||delete e[t]}function Ya(e){return void 0!==e.layer}class Xa{map(e,t){return io(e)?this.mapFacet(e,t):Ia(e)?this.mapRepeat(e,t):Ma(e)?this.mapHConcat(e,t):Na(e)?this.mapVConcat(e,t):Ca(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(Ya(e))return this.mapLayer(e,t);if(ge(e))return this.mapUnit(e,t);throw new Error(yr.invalidSpec(e))}mapLayer(e,t){return Object.assign(Object.assign({},e),{layer:e.layer.map(e=>this.mapLayerOrUnit(e,t))})}mapHConcat(e,t){return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map(e=>this.map(e,t))})}mapVConcat(e,t){return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map(e=>this.map(e,t))})}mapConcat(e,t){const{concat:n}=e,r=Object(ye.b)(e,["concat"]);return Object.assign(Object.assign({},r),{concat:n.map(e=>this.map(e,t))})}mapFacet(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}mapRepeat(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}}const Ka={zero:1,center:1,normalize:1};const Ja=[X,Y,ee,Z,ie,oe,J,te,ne],Za=[X,Y];function Qa(e,t,n={}){const r=fe(e)?e.type:e;if(!E(Ja,r))return null;const i=function(e){const t=e.x,n=e.y;if(fo(t)&&fo(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!=!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(fo(t)&&"quantitative"===t.type)return"x";if(fo(n)&&"quantitative"===n.type)return"y"}}(t);if(!i)return null;const o=t[i],s=ho(o)?vo(o,{}):void 0,l="x"===i?"y":"x",u=t[l],c=ho(u)?vo(u,{}):void 0,f=Mt.reduce((e,n)=>{if("tooltip"!==n&&Vo(t,n)){const r=t[n];(Object(a.A)(r)?r:[r]).forEach(t=>{const r=Co(t);if(r.aggregate)return;const i=ho(r)?vo(r,{}):void 0;(!i||i!==c&&i!==s)&&e.push({channel:n,fieldDef:r})})}return e},[]);let d;if(void 0!==o.stack?d=Object(a.B)(o.stack)?o.stack?"zero":null:o.stack:f.length>0&&E(Za,r)&&(d="zero"),!d||!Ka[d])return null;if(Go(t)&&0===f.length)return null;if(o.scale&&o.scale.type&&o.scale.type!==ai.LINEAR){if(n.disallowNonLinearStack)return null;wr(yr.cannotStackNonLinearScale(o.scale.type))}return Vo(t,i===Ce?Me:Ie)?(void 0!==o.stack&&wr(yr.cannotStackRangedMark(i)),null):(o.aggregate&&!E(Se,o.aggregate)&&wr(yr.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?l:void 0,fieldChannel:i,impute:le(r),stackBy:f,offset:d})}function es(e){const{point:t,line:n}=e,r=Object(ye.b)(e,["point","line"]);return N(r).length>1?r:r.type}function ts(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:x(e[t],["point","line"])}));return e}function ns(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?Object(a.F)(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?Object(a.F)(t.point)?t.point:{}:void 0}function rs(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class is{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(ge(e)){const{mark:n,encoding:r}=e,i=fe(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!ns(i,t[i.type],r);case"area":return!!ns(i,t[i.type],r)||!!rs(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{selection:i,projection:o,encoding:a,mark:s}=e,l=Object(ye.b)(e,["selection","projection","encoding","mark"]),u=fe(s)?s:{type:s},c=ns(u,r[u.type],a),f="area"===u.type&&rs(u,r[u.type]),d=[Object.assign(Object.assign({},i?{selection:i}:{}),{mark:es(Object.assign(Object.assign({},u),"area"===u.type?{opacity:.7}:{})),encoding:x(a,["shape"])})],p=Qa(u,a);let h=a;if(p){const{fieldChannel:e,offset:t}=p;h=Object.assign(Object.assign({},a),{[e]:Object.assign(Object.assign({},a[e]),t?{stack:t}:{})})}return f&&d.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},v(u,["clip","interpolate","tension","tooltip"])),f),encoding:h})),c&&d.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},v(u,["clip","tooltip"])),c),encoding:h})),n(Object.assign(Object.assign({},l),{layer:d}),Object.assign(Object.assign({},t),{config:ts(r)}))}}class os{constructor(){this.name="RangeStep"}hasMatchingType(e){var t,n;if(ge(e)&&e.encoding)for(const r of Dt){const i=e.encoding[r];if(i&&fo(i)&&(null===(n=null===(t=i)||void 0===t?void 0:t.scale)||void 0===n?void 0:n.rangeStep))return!0}return!1}run(e){var t,n;const r={};let i=Object.assign({},e.encoding);for(const e of Dt){const o=Rt(e),a=i[e];if(a&&fo(a)&&(null===(n=null===(t=a)||void 0===t?void 0:t.scale)||void 0===n?void 0:n.rangeStep)){const{scale:t}=a,n=Object(ye.b)(a,["scale"]),s=t,{rangeStep:l}=s,u=Object(ye.b)(s,["rangeStep"]);r[o]={step:t.rangeStep},wr(yr.RANGE_STEP_DEPRECATED),i=Object.assign(Object.assign({},i),{[e]:Object.assign(Object.assign({},n),N(u).length?{scale:u}:{})})}}return Object.assign(Object.assign(Object.assign({},r),e),{encoding:i})}}class as{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(ge(e)){const{encoding:t,mark:n}=e;if("line"===n)for(const e of xt){const n=t[wt(e)];if(t[e]&&fo(n)&&!qo(n.bin))return!0}}return!1}run(e,t,n){const{encoding:r}=e;return wr(yr.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign(Object.assign({},e),{mark:"rule"}),t)}}function ss(e){const{parentEncoding:t,encoding:n}=e;if(t&&n){const e=N(t).reduce((e,t)=>(n[t]&&e.push(t),e),[]);e.length>0&&wr(yr.encodingOverridden(e))}const r=Object.assign(Object.assign({},null!=t?t:{}),null!=n?n:{});return N(r).length>0?r:void 0}function ls(e){const{parentProjection:t,projection:n}=e;return t&&n&&wr(yr.projectionOverridden({parentProjection:t,projection:n})),null!=n?n:t}function us(e,t){void 0===t&&(t=qa(e.config));const n=function(e,t={}){return cs.map(e,{config:t})}(e,t),{width:r,height:i,autosize:o}=e;return Object.assign(Object.assign({},n),{autosize:ds(n,{width:r,height:i,autosize:o},t)})}const cs=new class extends Xa{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[ua,ma,wa,new is,new as,new os]}map(e,t){if(ge(e)){const n=Vo(e.encoding,je),r=Vo(e.encoding,Ae),i=Vo(e.encoding,Pe);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t;if(n||r)return this.mapUnitWithParentEncodingOrProjection(e,t);const i=this.mapLayerOrUnit.bind(this);for(const n of this.nonFacetUnitNormalizers)if(n.hasMatchingType(e,t.config))return n.run(e,t,i);return e}mapRepeat(e,t){const{repeat:n}=e;return!Object(a.A)(n)&&e.columns&&(e=x(e,["columns"]),wr(yr.columnsNotSupportByRowCol("repeat"))),Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}mapFacet(e,t){const{facet:n}=e;return ro(n)&&e.columns&&(e=x(e,["columns"]),wr(yr.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=ls({parentProjection:o,projection:r}),l=ss({parentEncoding:i,encoding:n});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),s?{projection:s}:{}),l?{encoding:l}:{}),{config:a})}mapFacetedUnit(e,t){const n=e.encoding,{row:r,column:i,facet:o}=n,a=Object(ye.b)(n,["row","column","facet"]),{mark:s,width:l,projection:u,height:c,selection:f,encoding:d}=e,p=Object(ye.b)(e,["mark","width","projection","height","selection","encoding"]),{facetMapping:h,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o});return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),m),{facet:h,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{projection:u}:{}),{mark:s}),l?{width:l}:{}),c?{height:c}:{}),{encoding:a}),f?{selection:f}:{})}),t)}getFacetMappingAndLayout(e){var t;const{row:n,column:r,facet:i}=e;if(n||r){i&&wr(yr.facetChannelDropped([...n?[je]:[],...r?[Ae]:[]]));const o={},a={};for(const n of[je,Ae]){const r=e[n];if(r){const{align:e,center:i,spacing:s,columns:l}=r,u=Object(ye.b)(r,["align","center","spacing","columns"]);o[n]=u;for(const e of["align","center","spacing"])void 0!==r[e]&&(a[e]=null!=(t=a[e])?t:{},a[e][n]=r[e])}}return{facetMapping:o,layout:a}}{const{align:e,center:t,spacing:n,columns:r}=i;return{facetMapping:Object(ye.b)(i,["align","center","spacing","columns"]),layout:Object.assign(Object.assign(Object.assign(Object.assign({},e?{align:e}:{}),t?{center:t}:{}),n?{spacing:n}:{}),r?{columns:r}:{})}}}mapLayer(e,t){var{parentEncoding:n,parentProjection:r}=t,i=Object(ye.b)(t,["parentEncoding","parentProjection"]);const{encoding:o,projection:a}=e,s=Object(ye.b)(e,["encoding","projection"]),l=Object.assign(Object.assign({},i),{parentEncoding:ss({parentEncoding:n,encoding:o}),parentProjection:ls({parentProjection:r,projection:a})});return super.mapLayer(s,l)}};function fs(e){return Object(a.H)(e)?{type:e}:null!=e?e:{}}function ds(e,t,n){let{width:r,height:i}=t;const o=ge(e)||Ya(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(wr(yr.containerSizeNonSingle("width")),r=void 0),"container"==i&&(wr(yr.containerSizeNonSingle("height")),i=void 0));const s=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?fs(n.autosize):{}),fs(e.autosize));return"fit"!==s.type||o||(wr(yr.FIT_NON_SINGLE),s.type="pad"),"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&wr(yr.containerSizeNotCompatibleWithAutosize("width")),"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&wr(yr.containerSizeNotCompatibleWithAutosize("height")),s}const ps=["background","padding"];function hs(e){return ps.reduce((t,n)=>(e&&void 0!==e[n]&&(t[n]=e[n]),t),{})}function ms(e){return!!e.url}function gs(e){return!!e.values}function bs(e){return!(!e.name||ms(e)||gs(e)||ys(e))}function ys(e){return e&&(vs(e)||xs(e)||_s(e))}function vs(e){return!!e.sequence}function xs(e){return!!e.sphere}function _s(e){return!!e.graticule}const ws="main",Os="raw";function Es(e){return void 0!==e.filter}function ks(e){return void 0!==e.pivot}function Ss(e){return void 0!==e.density}function Ts(e){return void 0!==e.quantile}function js(e){return void 0!==e.regression}function As(e){return void 0!==e.loess}function Ps(e){return void 0!==e.lookup}function Cs(e){return void 0!==e.sample}function Ns(e){return void 0!==e.window}function Ms(e){return void 0!==e.joinaggregate}function Is(e){return void 0!==e.flatten}function Ds(e){return void 0!==e.calculate}function Rs(e){return!!e.bin}function zs(e){return void 0!==e.impute}function Ls(e){return void 0!==e.timeUnit}function Fs(e){return void 0!==e.aggregate}function Bs(e){return void 0!==e.stack}function Us(e){return void 0!==e.fold}function qs(e){return!!e.signal}function $s(e){return!!e.step}function Hs(e){return!Object(a.A)(e)&&("field"in e&&"data"in e)}const Ws=N({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,x:1,y:1,x2:1,y2:1,width:1,height:1,aspect:1}),Vs={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickWidth:{part:"ticks",vgProp:"strokeWidth"}};const Gs=["domain","grid","labels","ticks","title"],Ys={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"both",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},Xs={orient:1,bandPosition:1,domain:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,translate:1,zindex:1},Ks=Object.assign(Object.assign({},Xs),{labelExpr:1,encoding:1});N(Ks);var Js=n(20);function Zs(e){const{channel:t,channelDef:n,markDef:r,scale:i}=e,o=sl(e);return fo(n)&&!ke(n.aggregate)&&i&&xi(i.get("type"))&&!1===i.get("zero")?Qs({fieldDef:n,channel:t,markDef:r,ref:o}):o}function Qs({fieldDef:e,channel:t,markDef:n,ref:r}){return le(n.type)?r:[el(e,t),r]}function el(e,t){const n=tl(e,!0),r="x"===wt(t)?{value:0}:{field:{group:"height"}};return Object.assign({test:n},r)}function tl(e,t=!0){return Zr(Object(a.H)(e)?e:vo(e,{expr:"datum"}),!t)}function nl(e,t){const n=t[e+"Offset"];if(n)return n}function rl({channel:e,fieldDef:t,scaleName:n,markDef:r,band:i,offset:o}){return Qs({fieldDef:t,channel:e,markDef:r,ref:al({scaleName:n,fieldDef:t,band:i,offset:o})})}function il(e,t,n,r){const i=Object.assign(Object.assign({},t?{scale:t}:{}),{field:vo(e,n)});if(r){const{offset:e,band:t}=r;return Object.assign(Object.assign(Object.assign({},i),e?{offset:e}:{}),t?{band:t}:{})}return i}function ol(e,t=!0){return{scale:e,band:t}}function al({scaleName:e,fieldDef:t,fieldDef2:n,offset:r,startSuffix:i,band:o=.5}){const a=0<o&&o<1?"datum":void 0,s=vo(t,{expr:a,suffix:i}),l=void 0!==n?vo(n,{expr:a}):vo(t,{suffix:"end",expr:a});if(0===o)return Object.assign({scale:e,field:s},r?{offset:r}:{});if(1===o)return Object.assign({scale:e,field:l},r?{offset:r}:{});{const t=`${o} * ${s} + ${1-o} * ${l}`;return Object.assign({signal:`scale("${e}", ${t})`},r?{offset:r}:{})}}function sl({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:l,offset:u,defaultRef:c}){if(t){if(fo(t)){if(po(t)){const a=so(e,t,n,r,i,{isMidPoint:!0});if(Uo(t.bin)||a&&t.timeUnit)return E([Ce,Ne],e)&&E([ti,ri],t.type)?l&&l.impute?il(t,o,{binSuffix:"mid"},{offset:u}):al({scaleName:o,fieldDef:t,band:a,offset:u}):il(t,o,Fo(t,e)?{binSuffix:"range"}:{},{offset:u});if(qo(t.bin)){if(fo(n))return al({scaleName:o,fieldDef:t,fieldDef2:n,band:a,offset:u});{const t=e===Ce?Me:Ie;wr(yr.channelRequiredForBinned(t))}}}if(s){const e=s.get("type");if(yi(e)){if("band"===e){return il(t,o,{binSuffix:"range"},{band:H(bo(t)?t.band:void 0,.5),offset:u})}return il(t,o,{binSuffix:"range"},{offset:u})}}return il(t,o,{},{offset:u})}if(mo(t)){const n=t.value,r=u?{offset:u}:{};return Object.assign(Object.assign({},ll(e,n)),r)}}return Object(a.D)(c)?c():c}function ll(e,t){return E(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:E(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:{value:t}}function ul(e,t,{reactiveGeom:n}={}){const r=[],i={},o={},s=n?"datum.datum":"datum",l=[];function u(n,r){const i=wt(r),u=po(n)?n:Object.assign(Object.assign({},n),{type:e[i].type}),c=Object(a.i)(So(u,t,{allowDisabling:!1})).join(", ");let f=cl(u,t,s).signal;if("x"===r||"y"===r){const n="x"===r?"x2":"y2",i=Po(e[n]);if(qo(u.bin)&&i){f=Wi(vo(u,{expr:s}),vo(i,{expr:s}),Ao(u),t),o[n]=!0}}l.push({channel:r,key:c,value:f})}Jo(e,(e,t)=>{fo(e)?u(e,t):co(e)&&u(e.condition,t)});for(const{channel:e,key:t,value:n}of l)o[e]||i[t]||(r.push(`${Object(a.Y)(t)}: ${n}`),i[t]=!0);return r.length?{signal:`{${r.join(", ")}}`}:void 0}function cl(e,t,n="datum"){if(e){if(mo(e))return{value:e.value};if(po(e))return Ui(e,Ao(e),n,t)}}function fl(e){return Object.assign(Object.assign({},e),{mult:.5})}function dl({markDef:e,config:t,defaultRef:n,channel:r,scaleName:i,scale:o,mark:s,checkBarAreaWithoutZero:l}){return()=>{const u=wt(r),c=H(e[r],Fi(r,e,t));if(void 0!==c)return ll(r,c);if(Object(a.H)(n)){if(i){const e=o.get("type");if(E([ai.LOG,ai.TIME,ai.UTC],e))!l||"bar"!==s&&"area"!==s||wr(yr.nonZeroScaleUsedWithLengthMark(s,u,{scaleType:e}));else{if(o.domainDefinitelyIncludesZero())return{scale:i,value:0};!l||"bar"!==s&&"area"!==s||wr(yr.nonZeroScaleUsedWithLengthMark(s,u,{zeroFalse:!1===o.explicit.zero}))}}return"zeroOrMin"===n?"x"===u?{value:0}:{field:{group:"height"}}:"x"===u?{field:{group:"width"}}:{value:0}}return n}}function pl(e){const{markDef:t,encoding:n,config:r}=e,{filled:i,type:o}=t,a={fill:Fi("fill",t,r),stroke:Fi("stroke",t,r),color:Fi("color",t,r)},s=E(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=H(t.fill,!0===i?t.color:void 0,a.fill,!0===i?a.color:void 0,s),u=H(t.stroke,!1===i?t.color:void 0,a.stroke,!1===i?a.color:void 0),c=i?"fill":"stroke",f=Object.assign(Object.assign({},l?{fill:{value:l}}:{}),u?{stroke:{value:u}}:{});return t.color&&(i?t.fill:t.stroke)&&wr(yr.droppingColor("property",{fill:"fill"in t,stroke:"stroke"in t})),Object.assign(Object.assign(Object.assign(Object.assign({},f),vl("color",e,{vgChannel:c,defaultValue:i?l:u})),vl("fill",e,{defaultValue:n.fill?l:void 0})),vl("stroke",e,{defaultValue:n.stroke?u:void 0}))}function hl(e,t){const{fill:n,stroke:r}="include"===t.color?pl(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e,t){return Ws.reduce((n,r)=>(void 0!==e[r]&&"ignore"!==t[r]&&(n[r]={value:e[r]}),n),{})}(e.markDef,t)),ml(e,"fill",n)),ml(e,"stroke",r)),vl("opacity",e)),vl("fillOpacity",e)),vl("strokeOpacity",e)),vl("strokeWidth",e)),_l(e)),wl(e,"href"))}function ml(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===Li("invalid",o,r)&&n&&!le(i)){const r=bl(e,{invalid:!0,channels:Yt});if(r)return{[t]:[{test:r,value:null},...Object(a.i)(n)]}}return n?{[t]:n}:{}}function gl(e,t){if(void 0!==t)return{[e]:{value:t}}}function bl(e,{invalid:t=!1,channels:n}){const r=n.reduce((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&vi(i)&&(t[o]=!0)}return t},{}),i=N(r);if(i.length>0){const e=t?"||":"&&";return i.map(e=>tl(e,t)).join(` ${e} `)}}function yl(e){const{config:t,markDef:n}=e;if(Li("invalid",n,t)){const t=bl(e,{channels:["x","y"]});if(t)return{defined:{signal:t}}}return{}}function vl(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a=e}=n;let{defaultRef:s,defaultValue:l}=n;void 0===s&&(l=null!=l?l:a===e?r[e]:H(r[e],r[a],Fi(e,r,o,{vgChannel:a})),s=l?{value:l}:void 0);const u=i[e];return xl(t,u,a,n=>sl({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function xl(e,t,n,r){const i=t&&t.condition,o=r(t);if(i){return{[n]:[...Object(a.i)(i).map(t=>{const n=r(t),i=function(e){return e.selection}(t)?yu(e,t.selection):xu(e,t.test);return Object.assign({test:i},n)}),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function _l(e,t={}){const{encoding:n,markDef:r,config:i}=e,o=n.tooltip;return Object(a.A)(o)?{tooltip:ul({tooltip:o},i,t)}:xl(e,o,"tooltip",o=>{const s=cl(o,e.config,t.reactiveGeom?"datum.datum":"datum");if(s)return s;if(null===o)return;let l=H(r.tooltip,Fi("tooltip",r,i));return!0===l&&(l={content:"encoding"}),Object(a.H)(l)?{value:l}:Object(a.F)(l)?"encoding"===l.content?ul(n,i,t):{signal:"datum"}:void 0})}function wl(e,t="text"){const n=e.encoding[t];return xl(e,n,t,t=>cl(t,e.config))}function Ol(e,t,n,{vgChannel:r}={}){const{encoding:i,mark:o,markDef:a,config:s,stack:l}=t,u=i[e],c=i[e===Ce?Me:Ie],f=t.scaleName(e),d=t.getScaleComponent(e),p=nl(e,t.markDef);return{[null!=r?r:e]:u||!i.latitude&&!i.longitude?function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o}=e;return fo(n)&&i&&t===i.fieldChannel?bo(n)&&void 0!==n.band?al({scaleName:r,fieldDef:n,startSuffix:"start",band:n.band,offset:0}):il(n,r,{suffix:"end"},{offset:o}):Zs(e)}({channel:e,channelDef:u,channel2Def:c,markDef:a,config:s,scaleName:f,scale:d,stack:l,offset:p,defaultRef:dl({markDef:a,config:s,defaultRef:n,channel:e,scaleName:f,scale:d,mark:o,checkBarAreaWithoutZero:!c})}):{field:t.getName(e)}}}const El={left:"x",center:"xc",right:"x2"},kl={top:"y",middle:"yc",bottom:"y2"};function Sl(e,t,{defaultRef:n,defaultRef2:r,range:i}){return i?Tl(e,t,{defaultRef:n,defaultRef2:r}):Ol(e,t,n)}function Tl(e,t,{defaultRef:n,defaultRef2:r}){const{markDef:i,config:o}=t,a="x"===e?"width":"height",s=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,l="x2"===n?"x":"y",u="x2"===n?"width":"height",c=r[l],f=e.scaleName(l),d=e.getScaleComponent(l),p=nl(n,e.markDef);if(!c&&(r.latitude||r.longitude))return{[n]:{field:e.getName(n)}};const h=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){return fo(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?il(t,o,{suffix:"start"},{offset:l}):Zs({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:l,defaultRef:u})}({channel:n,channelDef:c,channel2Def:r[n],markDef:o,config:s,scaleName:f,scale:d,stack:a,offset:p,defaultRef:void 0});if(void 0!==h)return{[n]:h};return H(jl(n,o),jl(n,{[n]:Bi(n,o,s.style),[u]:Bi(u,o,s.style)}),jl(n,s[i]),jl(n,s.mark),{[n]:dl({markDef:o,config:s,defaultRef:t,channel:n,scaleName:f,scale:d,mark:i,checkBarAreaWithoutZero:!r[n]})()})}(t,r,"x"===e?"x2":"y2"),l=s[a]?function(e,t,n){const r="x"===e?"align":"baseline",i=H(t[r],Fi(r,t,n));return"x"===e?El[null!=i?i:"center"]:kl[null!=i?i:"middle"]}(e,i,o):e;return Object.assign(Object.assign({},Ol(e,t,n,{vgChannel:l})),s)}function jl(e,t){const n="x2"===e?"width":"height";return t[e]?{[e]:ll(e,t[e])}:t[n]?{[n]:{value:t[n]}}:void 0}var Al={has:e=>"interval"!==e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName("voronoi")},marks:(e,t,n)=>{const{x:r,y:i}=t.project.has,o=e.mark;if(le(o))return wr(yr.nearestNotSupportForContinuous(o)),n;const a={name:e.getName("voronoi"),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},_l(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((t,n)=>{var r;const i=null!=(r=t.name)?r:"";i===e.component.mark[0].name?s=n:i.indexOf("voronoi")>=0&&(l=!0)}),l||n.splice(s+1,0,a),n}};class Pl{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.indexOf(e)>-1?console.warn("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class Cl extends Pl{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${V()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class Nl extends Pl{constructor(e,t){super(e),this.formula=t}clone(){return new Nl(null,y(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef((e,n,r)=>{const{timeUnit:i,field:o}=n,a=Wf(t)?t.encoding[Ot(r)]:void 0,s=Wf(t)&&lo(r,n,a,t.markDef,t.config);if(i){const t=vo(n,{forAs:!0});e[w({as:t,timeUnit:i,field:o})]=Object.assign({as:t,timeUnit:i,field:o},s?{band:!0}:{})}return e},{});return 0===N(n).length?null:new Nl(e,n)}static makeFromTransform(e,t){const n=Object.assign({},t);return new Nl(e,{[w(n)]:n})}merge(e){this.formula=Object.assign({},this.formula);for(const t in e.formula)this.formula[t]&&!e.formula[t].band||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(M(this.formula).map(e=>e.as))}dependentFields(){return new Set(M(this.formula).map(e=>e.field))}hash(){return`TimeUnit ${w(this.formula)}`}assemble(){const e=[];for(const t of M(this.formula)){const{timeUnit:n,field:r,as:i,band:o}=t;e.push({type:"formula",as:i,expr:Fr(n,r)}),o&&e.push({type:"formula",as:i+"_end",expr:Fr(n,r,{end:!0})})}return e}}const Ml="_tuple_fields";class Il{constructor(...e){this.items=e,this.has={}}}var Dl={has:e=>"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind,parse:(e,t,n,r)=>{r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],l=Al.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((e,i)=>{var u,c;const f=D(`${r}_${e.field}`);n.filter(e=>e.name===f).length||n.unshift(Object.assign(Object.assign({name:f},s?{init:Jl(s[i])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${Object(a.Y)(e.field)}] : null`}]:[],bind:(u=o[e.field],c=null!=u?u:o[e.channel],null!=c?c:o)}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(e=>e.name===r+lu)[0],a=r+Ml,s=i.items.map(e=>D(`${r}_${e.field}`)),l=s.map(e=>`${e} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}};var Rl={has:e=>"multi"===e.type&&e.toggle,signals:(e,t,n)=>n.concat({name:t.name+"_toggle",value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+lu,r=t.name+"_toggle";return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${pu(e)}}, `)+`${r} ? ${n} : null`}};const zl={has:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t,n)=>{n.clear&&(t.clear=Object(a.H)(n.clear)?Object(Js.a)(n.clear,"scope"):n.clear)},topLevelSignals:(e,t,n)=>(Dl.has(t)&&t.project.items.forEach(e=>{const r=n.findIndex(n=>n.name===D(`${t.name}_${e.field}`));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}),n),signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)t.project.items.forEach(e=>{const t=n.findIndex(t=>t.name===e.signals.visual);if(r(t,"[0, 0]"),-1===t){r(n.findIndex(t=>t.name===e.signals.data),"null")}});else{let e=n.findIndex(e=>e.name===t.name+lu);r(e,"null"),Rl.has(t)&&r(e=n.findIndex(e=>e.name===t.name+"_toggle"),"false")}return n}};var Ll={has:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Xt(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!vi(a)){wr(yr.SCALE_BINDINGS_CONTINUOUS);continue}const s={selection:t.name,field:r.field};if(o.set("selectionExtent",s,!0),n.push(r),e.repeater&&e.repeater.row===e.repeater.column){e.getScaleComponent(i===Ce?Ne:Ce).set("selectionExtent",s,!0)}}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(e=>!n.filter(t=>t.name===e.signals.data).length);if(!e.parent||Bl(e)||!r.length)return n;const i=n.filter(e=>e.name===t.name)[0];let o=i.update;if(o.indexOf(cu)>=0)i.update=`{${r.map(e=>`${Object(a.Y)(e.field)}: ${e.signals.data}`).join(", ")}}`;else{for(const e of r){const t=`${Object(a.Y)(e.field)}: ${e.signals.data}`;o.indexOf(t)<0&&(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map(e=>({name:e.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Bl(e))for(const e of t.scales){const t=n.filter(t=>t.name===e.signals.data)[0];t.push="outer",delete t.value,delete t.update}return n}};function Fl(e,t){return`domain(${Object(a.Y)(e.scaleName(t))})`}function Bl(e){var t;return e.parent&&Xf(e.parent)&&(null!=(t=!e.parent.parent)?t:Bl(e.parent.parent))}const Ul="_translate_anchor",ql="_translate_delta",$l={has:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ll.has(t),o=r+Ul,{x:a,y:s}=t.project.has;let l=Object(Js.a)(t.translate,"scope");return i||(l=l.map(e=>(e.between[0].markname=r+eu,e))),n.push({name:o,value:{},on:[{events:l.map(e=>e.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==a?", extent_x: "+(i?Fl(e,Ce):`slice(${a.signals.visual})`):"")+(void 0!==s?", extent_y: "+(i?Fl(e,Ne):`slice(${s.signals.visual})`):"")+"}"}]},{name:r+ql,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Hl(e,t,a,"width",n),void 0!==s&&Hl(e,t,s,"height",n),n}};function Hl(e,t,n,r,i){var o;const a=t.name,s=a+Ul,l=a+ql,u=n.channel,c=Ll.has(t),f=i.filter(e=>e.name===n.signals[c?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(u),h=p.get("type"),m=`${s}.extent_${u}`,g=`${c?"log"===h?"panLog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${c&&u===Ce?"-":""}${l}.${u} / `+(c?`${d}`:`span(${m})`)}`+(c&&"pow"===h?`, ${o=p.get("exponent"),null!=o?o:1}`:"")+")";f.on.push({events:{signal:l},update:c?g:`clampRange(${g}, 0, ${d})`})}const Wl="_zoom_anchor",Vl="_zoom_delta",Gl={has:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ll.has(t),o=r+Vl,{x:s,y:l}=t.project.has,u=Object(a.Y)(e.scaleName(Ce)),c=Object(a.Y)(e.scaleName(Ne));let f=Object(Js.a)(t.zoom,"scope");return i||(f=f.map(e=>(e.markname=r+eu,e))),n.push({name:r+Wl,on:[{events:f,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(e=>!!e).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Yl(e,t,s,"width",n),void 0!==l&&Yl(e,t,l,"height",n),n}};function Yl(e,t,n,r,i){var o;const a=t.name,s=n.channel,l=Ll.has(t),u=i.filter(e=>e.name===n.signals[l?"data":"visual"])[0],c=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),d=f.get("type"),p=l?Fl(e,s):u.name,h=a+Vl,m=`${l?"log"===d?"zoomLog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${p}, ${`${a}${Wl}.${s}`}, ${h}`+(l&&"pow"===d?`, ${o=f.get("exponent"),null!=o?o:1}`:"")+")";u.on.push({events:{signal:h},update:l?m:`clampRange(${m}, 0, ${c})`})}const Xl=[{has:()=>!0,parse:(e,t,n)=>{var r,i,o;const s=t.name,l=null!=(r=t.project)?r:t.project=new Il,u={},c={},f=new Set,d=(e,t)=>{const n="visual"===t?e.channel:e.field;let r=D(`${s}_${n}`);for(let e=1;f.has(r);e++)r=D(`${s}_${n}_${e}`);return f.add(r),{[t]:r}};if(!n.fields&&!n.encodings){const t=e.config.selection[n.type];if(n.init)for(const e of Object(a.i)(n.init))for(const r of N(e))yt(r)?(n.encodings||(n.encodings=[])).push(r):"interval"===n.type?(wr('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=t.encodings):(n.fields||(n.fields=[])).push(r);else n.encodings=t.encodings,n.fields=t.fields}for(const e of null!=(i=n.fields)?i:[]){const t={type:"E",field:e};t.signals=Object.assign({},d(t,"data")),l.items.push(t)}for(const r of null!=(o=n.encodings)?o:[]){const n=e.fieldDef(r);if(n){let i=n.field;if(n.timeUnit){const t={as:i=e.vgField(r),field:n.field,timeUnit:n.timeUnit};c[w(t)]=t}if(!u[i]){let o="E";if("interval"===t.type){vi(e.getScaleComponent(r).get("type"))&&(o="R")}else n.bin&&(o="R-RE");const a={field:i,channel:r,type:o};a.signals=Object.assign(Object.assign({},d(a,"data")),d(a,"visual")),l.items.push(u[i]=a),l.has[r]=u[i]}}else wr(yr.cannotProjectOnChannelWithoutField(r))}if(n.init){const e=e=>l.items.map(t=>void 0!==e[t.channel]?e[t.channel]:e[t.field]);if("interval"===n.type)t.init=e(n.init);else{const r=Object(a.A)(n.init)?n.init:[n.init];t.init=r.map(e)}}N(c).length&&(l.timeUnit=new Nl(null,c))},signals:(e,t,n)=>{const r=t.name+Ml;return n.filter(e=>e.name===r).length?n:n.concat({name:r,value:t.project.items.map(e=>{const{signals:t}=e,n=Object(ye.b)(e,["signals"]),r=y(n);return r.field=B(r.field),r})})}},Rl,Ll,$l,Gl,Dl,Al,zl];function Kl(e,t){for(const n of Xl)n.has(e)&&t(n)}function Jl(e,t=!0,n=a.x){if(Object(a.A)(e)){const r=e.map(e=>Jl(e,t,n));return t?`[${r.join(", ")}]`:r}return Er(e)?n(Ar(e,!1,!t)):t?n(JSON.stringify(e)):e}function Zl(e,t){return du(e,(n,r)=>{t=r.marks?r.marks(e,n,t):t,Kl(n,r=>{r.marks&&(t=r.marks(e,n,t))})}),t}function Ql(e){return e.map(e=>(e.on&&!e.on.length&&delete e.on,e))}const eu="_brush",tu="_scale_trigger",nu={signals:(e,t)=>{const n=t.name,r=n+Ml,i=Ll.has(t),o=[],s=[],l=[];if(t.translate&&!i){const e=`!event.item || event.item.mark.name !== ${Object(a.Y)(n+eu)}`;ru(t,(t,n)=>{var r;const i=Object(a.i)(null!=(r=n.between[0].filter)?r:n.between[0].filter=[]);return i.indexOf(e)<0&&i.push(e),t})}t.project.items.forEach((n,r)=>{const i=n.channel;if(i!==Ce&&i!==Ne)return void wr("Interval selections only support x and y encoding channels.");const u=t.init?t.init[r]:null,c=function(e,t,n,r){const i=n.channel,o=n.signals.visual,s=n.signals.data,l=Ll.has(t),u=Object(a.Y)(e.scaleName(i)),c=e.getScaleComponent(i),f=c?c.get("type"):void 0,d=e=>`scale(${u}, ${e})`,p=e.getSizeSignalRef(i===Ce?"width":"height").signal,h=`${i}(unit)`,m=ru(t,(e,t)=>[...e,{events:t.between[0],update:`[${h}, ${h}]`},{events:t,update:`[${o}[0], clamp(${h}, 0, ${p})]`}]);return m.push({events:{signal:t.name+tu},update:vi(f)?`[${d(`${s}[0]`)}, ${d(`${s}[1]`)}]`:"[0, 0]"}),l?[{name:s,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:Jl(r,!0,d)}:{value:[]}),{on:m}),Object.assign(Object.assign({name:s},r?{init:Jl(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]})]}(e,t,n,u),f=n.signals.data,d=n.signals.visual,p=Object(a.Y)(e.scaleName(i)),h=vi(e.getScaleComponent(i).get("type"))?"+":"";o.push(...c),s.push(f),l.push({scaleName:e.scaleName(i),expr:`(!isArray(${f}) || `+`(${h}invert(${p}, ${d})[0] === ${h}${f}[0] && `+`${h}invert(${p}, ${d})[1] === ${h}${f}[1]))`})}),i||o.push({name:n+tu,value:{},on:[{events:l.map(e=>({scale:e.scaleName})),update:l.map(e=>e.expr).join(" && ")+` ? ${n+tu} : {}`}]});const u=t.init,c=`unit: ${pu(e)}, fields: ${r}, values`;return o.concat(Object.assign(Object.assign({name:n+lu},u?{init:`{${c}: ${Jl(u)}}`}:{}),{on:[{events:[{signal:s.join(" || ")}],update:s.join(" && ")+` ? {${c}: [${s}]} : null`}]}))},modifyExpr:(e,t)=>{return t.name+lu+", "+("global"===t.resolve?"true":`{unit: ${pu(e)}}`)},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.has,s=i&&i.signals.visual,l=o&&o.signals.visual,u=`data(${Object(a.Y)(t.name+su)})`;if(Ll.has(t))return n;const c={x:void 0!==i?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${l}[0]`}:{value:0},x2:void 0!==i?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${l}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of N(c))c[t]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${pu(e)}`},c[t]),{value:0}];const f=t.mark,{fill:d,fillOpacity:p}=f,h=Object(ye.b)(f,["fill","fillOpacity"]),m=N(h).reduce((e,t)=>(e[t]=[{test:[void 0!==i&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${l}[0] !== ${l}[1]`].filter(e=>e).join(" && "),value:h[t]},{value:null}],e),{});return[{name:r+eu+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:p}},update:c}},...n,{name:r+eu,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Object.assign(Object.assign({},c),m)}}]}};function ru(e,t){return e.events.reduce((e,n)=>n.between?t(e,n):(wr(`${n} is not an ordered event stream for interval selections.`),e),[])}function iu(e,t){const n=t.name,r=n+Ml,i=t.project,o="(item().isVoronoi ? datum.datum : datum)",s=i.items.map(t=>{const n=e.fieldDef(t.channel);return n&&n.bin?`[${o}[${Object(a.Y)(e.vgField(t.channel,{}))}], `+`${o}[${Object(a.Y)(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${o}[${Object(a.Y)(t.field)}]`}).join(", "),l=`unit: ${pu(e)}, fields: ${r}, values`;return[{name:n+lu,on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? {${l}: [${s}]} : null`,force:!0}]:[]}]}const ou={signals:iu,modifyExpr:(e,t)=>{return t.name+lu+", "+("global"===t.resolve?"null":`{unit: ${pu(e)}}`)}};const au={signals:iu,modifyExpr:(e,t)=>{return t.name+lu+", "+("global"===t.resolve?"true":`{unit: ${pu(e)}}`)}};const su="_store",lu="_tuple",uu="_modify",cu="vlSelectionResolve",fu={single:au,multi:ou,interval:nu};function du(e,t){const n=e.component.selection;if(n)for(const e in n)if(Object(a.v)(n,e)){const r=n[e];t(r,fu[r.type])}}function pu(e,{escape:t}={escape:!0}){let n=t?Object(a.Y)(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!Vf(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of st)e[t]&&(n+=` + '__facet_${t}_' + (facet[${Object(a.Y)(r.vgField(t))}])`)}return n}function hu(e){let t=!1;return du(e,e=>{t=t||e.project.items.some(e=>e.field===Aa)}),t}var mu=n(13);function gu(e){const t=Object(mu.g)(e),n=new Set;return t.visit(e=>{"MemberExpression"===e.type&&function e(t){return"MemberExpression"===t.object.type?e(t.object):"datum"===t.object.name}(e)&&n.add(function e(t){const n=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(n.push(...e(t.object)),n.push(...e(t.property))),n)}(e).slice(1).join("."))}),n}class bu extends Pl{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=xu(this.model,this.filter,this),this._dependentFields=gu(this.expr)}clone(){return new bu(null,this.model,y(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function yu(e,t,n){const r=[];const i=R(t,(function(t){const i=D(t),o=e.getSelectionComponent(i,t),s=Object(a.Y)(i+su);if(o.project.timeUnit){const t=null!=n?n:e.component.data.raw,r=o.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}return"none"!==o.empty&&r.push(s),`vlSelectionTest(${s}, datum`+("global"===o.resolve?")":`, ${Object(a.Y)(o.resolve)})`)}));return(r.length?"!("+r.map(e=>`length(data(${e}))`).join(" || ")+") || ":"")+`(${i})`}function vu(e,t){const n=t.encoding;let r=t.field;if(n||r){if(n&&!r){const i=e.project.items.filter(e=>e.channel===n);!i.length||i.length>1?(r=e.project.items[0].field,wr((i.length?"Multiple ":"No ")+`matching ${Object(a.Y)(n)} encoding found for selection ${Object(a.Y)(t.selection)}. `+`Using "field": ${Object(a.Y)(r)}.`)):r=i[0].field}}else r=e.project.items[0].field,e.project.items.length>1&&wr('A "field" or "encoding" must be specified when using a selection as a scale domain. '+`Using "field": ${Object(a.Y)(r)}.`);return`${e.name}[${Object(a.Y)(r)}]`}function xu(e,t,n){return R(t,t=>Object(a.H)(t)?t:function(e){var t;return null===(t=e)||void 0===t?void 0:t.selection}(t)?yu(e,t.selection,n):Jr(t))}function _u(e,t,n,r){var i,o,a;e.encode=null!=(i=e.encode)?i:{},e.encode[t]=null!=(o=e.encode[t])?o:{},e.encode[t].update=null!=(a=e.encode[t].update)?a:{},e.encode[t].update[n]=r}function wu(e,t,n,r={header:!1}){var i,o;const s=e.combine(),{orient:l,scale:u,labelExpr:c,title:f,zindex:d}=s,p=Object(ye.b)(s,["orient","scale","labelExpr","title","zindex"]);if(N(p).forEach(e=>{const n=Ys[e],r=p[e];if(n&&n!==t&&"both"!==n)delete p[e];else if(function(e){return e.condition}(r)){const{vgProp:t,part:n}=Vs[e],{condition:i,value:o}=r,s=[...(Object(a.A)(i)?i:[i]).map(e=>{const{value:t,test:n}=e;return{test:xu(null,n),value:t}}),{value:o}];_u(p,n,t,s),delete p[e]}}),"grid"===t){if(!p.grid)return;if(p.encode){const{grid:e}=p.encode;p.encode=Object.assign({},e?{grid:e}:{}),0===N(p.encode).length&&delete p.encode}return Object.assign(Object.assign({scale:u,orient:l},p),{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:H(d,0)})}{if(!r.header&&e.mainExtracted)return;if(void 0!==c){let e=c;(null===(o=null===(i=p.encode)||void 0===i?void 0:i.labels)||void 0===o?void 0:o.update)&&qs(p.encode.labels.update.text)&&(e=U(c,"datum.label",p.encode.labels.update.text.signal)),_u(p,"labels","text",{signal:e})}if(p.encode){for(const t of Gs)e.hasAxisPart(t)||delete p.encode[t];0===N(p.encode).length&&delete p.encode}const t=function(e,t){if(e)return Ri(e)?e:e.map(e=>jo(e,t)).join(", ")}(f,n);return Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},t?{title:t}:{}),p),{zindex:H(d,0)})}}function Ou(e){const{axes:t}=e.component;for(const n of Dt)if(t[n])for(const r of t[n])if(!r.get("gridScale")){const t="x"===n?"height":"width";return[{name:t,update:e.getSizeSignalRef(t).signal}]}return[]}const Eu={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},ku={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelLimit:"limit",labelOrient:"orient",labelPadding:"offset"},Su=N(Eu),Tu=N(ku);function ju(e,t,n,r,i){var o;const a=[..."band"===i?["axisBand"]:[],"x"===n?"axisX":"axisY",...r?["axis"+r.substr(0,1).toUpperCase()+r.substr(1)]:[],"axis"];for(const n of a)if(void 0!==(null===(o=t[n])||void 0===o?void 0:o[e]))return t[n][e]}function Au(e,t){if(void 0!==e)return e=G(e),"top"===t||"bottom"===t?e<=45||315<=e?"top"===t?"bottom":"top":135<=e&&e<=225?"top"===t?"top":"bottom":"middle":e<=45||315<=e||135<=e&&e<=225?"middle":45<=e&&e<=135?"left"===t?"top":"bottom":"left"===t?"bottom":"top"}function Pu(e,t){if(void 0!==e)return e=G(e),"top"===t||"bottom"===t?e%180==0?"center":0<e&&e<180?"top"===t?"right":"left":"top"===t?"left":"right":(e+90)%180==0?"center":90<=e&&e<270?"left"===t?"left":"right":"left"===t?"right":"left"}function Cu(e){switch(e){case Ce:return"bottom";case Ne:return"left"}throw new Error(yr.INVALID_CHANNEL_FOR_AXIS)}class Nu extends Pl{constructor(e,t){super(e),this.transform=t,this._dependentFields=gu(this.transform.calculate)}clone(){return new Nu(null,y(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef((t,n)=>{if(go(t)&&no(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map((e,t)=>`${Jr({field:r,timeUnit:i,equal:e})} ? ${t} : `).join("")+o.length;e=new Nu(e,{calculate:a,as:Mu(t,n,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${w(this.transform)}`}}function Mu(e,t,n){return vo(e,Object.assign({prefix:t,suffix:"sort_index"},null!=n?n:{}))}function Iu(e,t){return E(["top","bottom"],t)?"column":E(["left","right"],t)?"row":"row"===e?"row":"column"}function Du(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return H(t&&t.header?t.header[e]:void 0,i[e],n.header[e])}function Ru(e,t,n,r){const i={};for(const o of e){const e=Du(o,t,n,r);void 0!==e&&(i[o]=e)}return i}const zu=["row","column"],Lu=["header","footer"];function Fu(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Ru(["titleAnchor","titleAngle","titleOrient"],i,r,t),l=Iu(t,s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),Uu(a,l)),Bu(l,a,o)),Yu(r,i,t,Su,Eu))}}function Bu(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Pu(t,"row"===e?"left":"top");return r?{align:r}:{}}function Uu(e,t){const n=Au(e,"row"===t?"left":"top");return n?{baseline:n}:{}}function qu(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Lu)if(n[i])for(const o of n[i])r.push(Wu(e,t,i,n,o));return r}function $u(e,t){var n;const{sort:r}=e;return to(r)?{field:vo(r,{expr:"datum"}),order:(n=r.order,null!=n?n:"ascending")}:Object(a.A)(r)?{field:Mu(e,t,{expr:"datum"}),order:"ascending"}:{field:vo(e,{expr:"datum"}),order:null!=r?r:"ascending"}}function Hu(e,t,n){const{format:r,labelAngle:i,labelAnchor:o,labelOrient:a,labelExpr:s}=Ru(["format","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),l=Ui(e,r,"parent",n).signal,u=Iu(t,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:s?U(U(s,"datum.label",l),"datum.value",vo(e,{expr:"parent"})):l}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Uu(i,u)),Bu(u,i,o)),Yu(n,e,t,Tu,ku))}function Wu(e,t,n,r,i){var o;if(i){let a=null;const{facetFieldDef:s}=r,l=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:e}=Ru(["labelOrient"],s,l,t);("row"===t&&!E(["top","bottom"],e)||"column"===t&&!E(["left","right"],e))&&(a=Hu(s,t,l))}const u=Vf(e)&&!ro(e.facet),c=i.axes,f=(null===(o=c)||void 0===o?void 0:o.length)>0;if(a||f){const o="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:$u(s,t)}:{}),f&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),a?{title:a}:{}),i.sizeSignal?{encode:{update:{[o]:i.sizeSignal}}}:{}),f?{axes:c}:{})}}return null}const Vu={column:{start:0,end:1},row:{start:1,end:0}};function Gu(e,t){return Vu[t][e]}function Yu(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=Du(a,t,e,n);void 0!==r&&(o[i[a]]=r)}return o}function Xu(e){return[...Ku(e,"width"),...Ku(e,"height")]}function Ku(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(yi(r)&&$s(o)){const r=e.scaleName(n);if(Vf(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Ju(r,o)]}return[Ju(r,o),{name:i,update:Zu(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${za(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Ju(e,t){return{name:e+"_step",value:t.step}}function Zu(e,t,n){const r=t.get("type"),i=t.get("padding"),o=H(t.get("paddingOuter"),i);let a=t.get("paddingInner");return`bandspace(${n}, ${a="band"===r?void 0!==a?a:i:1}, ${o}) * ${e}_step`}function Qu(e,t){return N(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),xl(t,i,r,e=>({value:e.value})))},{})}function ec(e,t){if(Xf(t)||Vf(t))return"shared";if(Yf(t)||Gf(t))return E(Dt,e)?"independent":"shared";throw new Error("invalid model type for resolve")}function tc(e,t){const n=e.scale[t],r=E(Dt,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&wr(yr.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}class nc{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new nc(y(this.explicit),y(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(e){return H(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of N(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function rc(e){return{explicit:!0,value:e}}function ic(e){return{explicit:!1,value:e}}function oc(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:ac(t,n,r,i)}}function ac(e,t,n,r){return e.explicit&&t.explicit&&wr(yr.mergeConflictingProperty(n,r,e.value,t.value)),e}function sc(e,t,n,r,i=ac){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:_(e.value)===_(t.value)?e:i(e,t,n,r)}const lc=Object.assign(Object.assign({},ja),{labelExpr:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),uc=N(lc);class cc extends nc{}function fc(e){const{legend:t}=e;return H(t.type,dc(e))}function dc({channel:e,timeUnit:t,scaleType:n,alwaysReturn:r}){if(ot(e)){if(E(["quarter","month","day"],t))return"symbol";if(xi(n))return r?"gradient":void 0}return r?"symbol":void 0}function pc({legend:e,legendConfig:t,timeUnit:n,channel:r,scaleType:i}){const o=H(e.orient,t.orient,"right"),a=fc({legend:e,channel:r,timeUnit:n,scaleType:i,alwaysReturn:!0});return H(e.direction,t[a?"gradientDirection":"symbolDirection"],function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(o,a))}function hc(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function mc(e,t,n){const r=t.getScaleComponent(n).get("type");return H(e.get("type"),dc({channel:n,scaleType:r,alwaysReturn:!0}))}function gc(e,t,n,r,i){var o,s,l,u,c;if("symbol"!==mc(i,n,r))return;let f=Object.assign(Object.assign({},function(e,t,n){for(const r of n){const n=Fi(r,t.markDef,t.config);void 0!==n&&(e[r]={value:n})}return e}({},n,de)),pl(n));const{markDef:d,encoding:p,config:h}=n,m=d.filled,g=null!=(o=vc(p.opacity))?o:d.opacity;if(f.fill)if("fill"===r||m&&r===Fe)delete f.fill;else if(f.fill.field)i.get("symbolFillColor")?delete f.fill:(f.fill={value:(s=h.legend.symbolBaseFillColor,null!=s?s:"black")},f.fillOpacity={value:null!=g?g:1});else if(Object(a.A)(f.fill)){const e=null!=(c=null!=(u=xc(null!=(l=p.fill)?l:p.color))?u:d.fill)?c:m&&d.color;e&&(f.fill={value:e})}if(f.stroke)if("stroke"===r||!m&&r===Fe)delete f.stroke;else if(f.stroke.field)delete f.stroke;else if(Object(a.A)(f.stroke)){const e=H(xc(p.stroke||p.color),d.stroke,m?d.color:void 0);e&&(f.stroke={value:e})}return r!==He&&g&&(f.opacity={value:g}),f=Object.assign(Object.assign({},f),t),N(f).length>0?f:void 0}function bc(e,t,n,r,i){if("gradient"!==mc(i,n,r))return;let o={};const a=vc(n.encoding.opacity)||n.markDef.opacity;return a&&(o.opacity={value:a}),o=Object.assign(Object.assign({},o),t),N(o).length>0?o:void 0}function yc(e,t,n,r){const i=n.legend(r),o=n.config;let a={};if(Ro(e)){const a=n.getScaleComponent(r).get("type")===ai.UTC,s=Vi("datum.value",e.timeUnit,i.format,o.legend.shortTimeLabels,o.timeFormat,a);t=Object.assign(Object.assign({},s?{text:{signal:s}}:{}),t)}return a=Object.assign(Object.assign({},a),t),N(a).length>0?a:void 0}function vc(e){return _c(e,(e,t)=>Math.max(e,t.value))}function xc(e){return _c(e,(e,t)=>H(e,t.value))}function _c(e,t){return function(e){return!!e&&!!e.condition&&(Object(a.A)(e.condition)||mo(e.condition))}(e)?(Object(a.A)(e.condition)?e.condition:[e.condition]).reduce(t,e.value):mo(e)?e.value:void 0}function wc(e){Wf(e)?e.component.legends=function(e){const{encoding:t}=e;return[Fe,Be,Ue,Ge,$e,qe,He,We,Ve].reduce((n,r)=>{const o=t[r];return!e.legend(r)||!e.getScaleComponent(r)||fo(o)&&r===qe&&o.type===oi||(n[r]=function(e,t){var n;const r=e.fieldDef(t),o=e.legend(t),a=new cc({},function(e,t){const n=e.scaleName(Fe);if("color"===t)return e.markDef.filled?{fill:n}:{stroke:n};return{[t]:e.scaleName(t)}}(e,t));for(const n of uc){const i=Ec(n,o,t,e);if(void 0!==i){const t=Oc(i,n,o,r);(t||void 0===e.config.legend[n])&&a.set(n,i,t)}}const s=null!==(n=o.encoding)&&void 0!==n?n:{},l=["labels","legend","title","symbols","gradient"].reduce((n,o)=>{var l;const u=Qu(null!=(l=s[o])?l:{},e),c=i[o]?i[o](r,u,e,t,a):u;return void 0!==c&&N(c).length>0&&(n[o]={update:c}),n},{});N(l).length>0&&a.set("encode",l,!!o.encoding);return a}(e,r)),n},{})}(e):e.component.legends=function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children)wc(r),N(r.component.legends).forEach(i=>{n.legend[i]=tc(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=kc(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))});return N(t).forEach(t=>{for(const r of e.children)r.component.legends[t]&&"shared"===n.legend[t]&&delete r.component.legends[t]}),t}(e)}function Oc(e,t,n,r){switch(t){case"values":return!!n.values;case"title":if("title"===t&&e===r.title)return!0}return e===n[t]}function Ec(e,t,n,r){const{encoding:i,mark:o}=r,a=Co(i[n]),s=r.config.legend,{timeUnit:l}=a,u=r.getScaleComponent(n).get("type");switch(e){case"direction":return pc({legend:t,legendConfig:s,timeUnit:l,channel:n,scaleType:u});case"format":if(Ro(a))return;return qi(a,t.format,r.config);case"formatType":if(Ro(a))return;return t.formatType;case"gradientLength":return H(t.gradientLength,s.gradientLength,function({legend:e,legendConfig:t,model:n,channel:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=t;if("horizontal"===pc({legend:e,legendConfig:t,channel:r,scaleType:i})){const r=H(e.orient,t.orient);return"top"===r||"bottom"===r?hc(n,"width",a,o):a}return hc(n,"height",l,s)}({model:r,legend:t,legendConfig:s,channel:n,scaleType:u}));case"labelOverlap":return H(t.labelOverlap,function(e){if(E(["quantile","threshold","log"],e))return"greedy"}(u));case"symbolType":return H(t.symbolType,function(e,t,n,r){var i;if("shape"!==t){const e=null!=(i=xc(n))?i:r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(o,n,i.shape,r.markDef.shape));case"title":return So(a,r.config,{allowDisabling:!0})||void 0;case"type":return fc({legend:t,channel:n,timeUnit:l,scaleType:u,alwaysReturn:!1});case"values":return function(e,t){const n=e.values;if(n)return Lo(t,n)}(t,a)}return t[e]}function kc(e,t){var n,r,i,o,a,s;if(!e)return t.clone();const l=e.getWithExplicit("orient"),u=t.getWithExplicit("orient");if(l.explicit&&u.explicit&&l.value!==u.value)return;let c=!1;for(const n of uc){const r=sc(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(e,t)=>{switch(n){case"symbolType":return Sc(e,t);case"title":return Ki(e,t);case"type":return c=!0,ic("symbol")}return ac(e,t,n,"legend")});e.setWithExplicit(n,r)}return c&&((null==(i=null===(r=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)||i)&&z(e.implicit,["encode","gradient"]),(null==(s=null===(a=null===(o=e.explicit)||void 0===o?void 0:o.encode)||void 0===a?void 0:a.gradient)||s)&&z(e.explicit,["encode","gradient"])),e}function Sc(e,t){return"circle"===t.value?t:e}function Tc(e){const t=e.component.legends,n={};for(const r of N(t)){const i=e.getScaleComponent(r),o=_(i.get("domains"));if(n[o])for(const e of n[o]){kc(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}return M(n).flat().map(e=>{var t,n,r;const i=e.combine(),{labelExpr:o}=i,a=Object(ye.b)(i,["labelExpr"]);if(null===(t=a.encode)||void 0===t?void 0:t.symbols){const e=a.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||a.stroke||(e.stroke={value:"transparent"}),a.fill&&delete e.fill}if(void 0!==o){let e=o;(null===(r=null===(n=a.encode)||void 0===n?void 0:n.labels)||void 0===r?void 0:r.update)&&qs(a.encode.labels.update.text)&&(e=U(o,"datum.label",a.encode.labels.update.text.signal)),function(e,t,n,r){var i,o,a;e.encode=null!=(i=e.encode)?i:{},e.encode[t]=null!=(o=e.encode[t])?o:{},e.encode[t].update=null!=(a=e.encode[t].update)?a:{},e.encode[t].update[n]=r}(a,"labels","text",{signal:e})}return a})}function jc(e){return Xf(e)||Yf(e)||Gf(e)?function(e){return e.children.reduce((e,t)=>e.concat(t.assembleProjections()),Ac(e))}(e):Ac(e)}function Ac(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n,i=Object(ye.b)(n,["name"]);if(t.data){const n={signal:`[${t.size.map(e=>e.signal).join(", ")}]`},o=t.data.reduce((t,n)=>{const r=qs(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return E(t,r)||t.push(r),t},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:n,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},i)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),i)]}const Pc=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Cc extends nc{constructor(e,t,n,r){super(Object.assign({},t),{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Nc(e){e.component.projection=Wf(e)?function(e){var t;if(e.hasProjection){const n=e.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?function(e){const t=[];for(const n of[[Re,De],[Le,ze]])(e.channelHasField(n[0])||e.channelHasField(n[1]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(qe)&&e.fieldDef(qe).type===oi&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(ws));return t}(e):void 0;return new Cc(e.projectionName(!0),Object.assign(Object.assign({},null!=(t=e.config.projection)?t:{}),null!=n?n:{}),i,o)}return}(e):function(e){if(0===e.children.length)return;let t;e.children.forEach(e=>Nc(e));const n=S(e.children,e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=S(Pc,n=>!Object(a.v)(e.explicit,n)&&!Object(a.v)(t.explicit,n)||!(!Object(a.v)(e.explicit,n)||!Object(a.v)(t.explicit,n)||_(e.get(n))!==_(t.get(n))));if(_(e.size)===_(t.size)){if(n)return e;if(_(e.explicit)===_({}))return t;if(_(t.explicit)===_({}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0});if(t&&n){const n=e.projectionName(!0),r=new Cc(n,t.specifiedProjection,t.size,y(t.data));return e.children.forEach(e=>{const t=e.component.projection;t&&(t.isFit&&r.data.push(...e.component.projection.data),e.renameProjection(t.get("name"),n),t.merged=!0)}),r}return}(e)}function Mc(e,t){return`${Bo(e)}_${t}`}function Ic(e,t,n){var r;const i=Mc(null!=(r=Io(n,void 0))?r:{},t);return e.getName(`${i}_bins`)}function Dc(e,t,n){let r,i;r=function(e){return"as"in e}(e)?Object(a.H)(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[vo(e,{forAs:!0}),vo(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},Io(t,void 0)),s=Mc(o,e.field),{signal:l,extentSignal:u}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,s);if(Ho(o.extent)){const e=o.extent,t=e.selection;i=vu(n.getSelectionComponent(D(t),t),e),delete o.extent}return{key:s,binComponent:Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[r]},l?{signal:l}:{}),u?{extentSignal:u}:{}),i?{span:i}:{})}}class Rc extends Pl{constructor(e,t){super(e),this.bins=t}clone(){return new Rc(null,y(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef((e,n,r)=>{if(po(n)&&Uo(n.bin)){const{key:i,binComponent:o}=Dc(n,n.bin,t);e[i]=Object.assign(Object.assign(Object.assign({},o),e[i]),function(e,t,n,r){var i,o;if(Fo(t,n)){const a=Wf(e)?null!=(o=null!=(i=e.axis(n))?i:e.legend(n))?o:{}:{},s=vo(t,{expr:"datum"}),l=vo(t,{expr:"datum",binSuffix:"end"});return{formulaAs:vo(t,{binSuffix:"range",forAs:!0}),formula:Wi(s,l,a.format,r)}}return{}}(t,n,r,t.config))}return e},{});return 0===N(n).length?null:new Rc(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=Dc(t,t.bin,n);return new Rc(e,{[r]:i})}merge(e,t){for(const n of N(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=j([...this.bins[n].as,...e.bins[n].as],w)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(M(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(M(this.bins).map(e=>e.field))}hash(){return`Bin ${w(this.bins)}`}assemble(){return M(this.bins).flatMap(e=>{const t=[],[n,...r]=e.as,i=e.bin,{extent:o}=i,a=Object(ye.b)(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:B(e.field),as:n,signal:e.signal},Ho(o)?{extent:null}:{extent:o}),e.span?{span:{signal:`span(${e.span})`}}:{}),a);!o&&e.extentSignal&&(t.push({type:"extent",field:B(e.field),signal:e.extentSignal}),s.extent={signal:e.extentSignal}),t.push(s);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:vo({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t})}}class zc extends Pl{constructor(e){let t;if(super(null),ys(e=null!=e?e:{name:"source"})||(t=e.format?Object.assign({},x(e.format,["parse"])):{}),gs(e))this._data={values:e.values};else if(ms(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];E(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else xs(e)?this._data={values:[{type:"Sphere"}]}:(bs(e)||ys(e))&&(this._data={});this._generator=ys(e),e.name&&(this._name=e.name),t&&N(t).length>0&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function Lc(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return console.error("Dataflow graph is inconsistent.",t,e),!1;if(!Lc(t.children))return!1}return!0}class Fc extends Pl{constructor(e,t){super(e),this.params=t}clone(){return new Fc(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${w(this.params)}`}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class Bc extends Pl{constructor(e,t){super(e),this.params=t}clone(){return new Bc(null,this.params)}dependentFields(){return new Set}producedFields(){var e;return new Set([(e=this.params.as,null!=e?e:"data")])}hash(){return`Hash ${w(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}function Uc(e){return e instanceof zc||e instanceof Fc||e instanceof Bc}class qc{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class $c extends qc{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:e,mutatedFlag:t}){e&&this.setContinue(),t&&this.setMutated()}reset(){}optimizeNextFromLeaves(e){if(Uc(e))return!1;const t=e.parent,{continueFlag:n}=this.run(e);return n&&this.optimizeNextFromLeaves(t),this.mutatedFlag}}class Hc extends qc{}function Wc(e,t,n,r){const i=Wf(r)?r.encoding[Ot(t)]:void 0;if(po(n)&&Wf(r)&&lo(t,n,i,r.markDef,r.config))e.add(vo(n,{})),e.add(vo(n,{suffix:"end"})),Fo(n,t)&&e.add(vo(n,{binSuffix:"range"}));else if(t in nt){const n=function(e){switch(e){case De:return"y";case ze:return"y2";case Re:return"x";case Le:return"x2"}}(t);e.add(r.getName(n))}else e.add(vo(n));return e}class Vc extends Pl{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new Vc(null,new Set(this.dimensions),y(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef(e=>{e.aggregate&&(n=!0)});const r={},i=new Set;return n?(t.forEachFieldDef((e,n)=>{var o,a,s,l;const{aggregate:u,field:c}=e;if(u)if("count"===u)r["*"]=null!=(o=r["*"])?o:{},r["*"].count=new Set([vo(e,{forAs:!0})]);else{if(_e(u)||we(u)){const e=_e(u)?"argmin":"argmax",t=u[e];r[t]=null!=(a=r[t])?a:{},r[t][e]=new Set([vo({op:e,field:t},{forAs:!0})])}else r[c]=null!=(s=r[c])?s:{},r[c][u]=new Set([vo(e,{forAs:!0})]);Xt(n)&&"unaggregated"===t.scaleDomain(n)&&(r[c]=null!=(l=r[c])?l:{},r[c].min=new Set([vo({field:c,aggregate:"min"},{forAs:!0})]),r[c].max=new Set([vo({field:c,aggregate:"max"},{forAs:!0})]))}else Wc(i,n,e,t)}),i.size+N(r).length===0?null:new Vc(e,i,r)):null}static makeFromTransform(e,t){var n,r,i;const o=new Set,a={};for(const e of t.aggregate){const{op:t,field:i,as:o}=e;t&&("count"===t?(a["*"]=null!=(n=a["*"])?n:{},a["*"].count=new Set([o||vo(e,{forAs:!0})])):(a[i]=null!=(r=a[i])?r:{},a[i][t]=new Set([o||vo(e,{forAs:!0})])))}for(const e of null!=(i=t.groupby)?i:[])o.add(e);return o.size+N(a).length===0?null:new Vc(e,o,a)}merge(e){return function(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}(this.dimensions,e.dimensions)?(function(e,t){var n;for(const r of N(t)){const i=t[r];for(const t of N(i))r in e?e[r][t]=new Set([...(n=e[r][t],null!=n?n:[]),...i[t]]):e[r]={[t]:i[t]}}}(this.measures,e.measures),!0):(function(...e){xr.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...N(this.measures)])}producedFields(){const e=new Set;for(const t of N(this.measures))for(const n of N(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${w({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of N(this.measures))for(const i of N(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:B(r));return{type:"aggregate",groupby:[...this.dimensions],ops:e,fields:t,as:n}}}class Gc extends Pl{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of st){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]=Object.assign({name:t.getName(`${e}_domain`),fields:[vo(n),...Uo(r)?[vo(n,{binSuffix:"end"})]:[]]},to(i)?{sortField:i}:Object(a.A)(i)?{sortIndexField:Mu(n,e)}:{})}}this.childModel=t.child}hash(){let e="Facet";for(const t of st)this[t]&&(e+=` ${t.charAt(0)}:${w(this[t])}`);return e}get fields(){var e;const t=[];for(const n of st)(null===(e=this[n])||void 0===e?void 0:e.fields)&&t.push(...this[n].fields);return t}dependentFields(){const e=new Set(this.fields);for(const t of st)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of["x","y"]){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(yi(r)&&$s(i)){const n=Tf(jf(this.childModel,t));n?e[t]=n:wr(`Unknown field for ${t}. Cannot calculate view size.`)}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x"}[e],i=[],o=[],a=[];n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:l}=this[e];if(s){const{op:e=Ji,field:t}=s;i.push(t),o.push(e),a.push(vo(s,{forAs:!0}))}else l&&(i.push(l),o.push("max"),a.push(l));return{name:this[e].name,source:null!=t?t:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},i.length?{fields:i,ops:o,as:a}:{})]}}assembleFacetHeaderData(e){var t,n;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],a={};for(const e of zu){for(const r of Lu){const o=null!=(t=i[e]&&i[e][r])?t:[];for(const t of o)if((null===(n=t.axes)||void 0===n?void 0:n.length)>0){a[e]=!0;break}}if(a[e]){const t=`length(data("${this.facet.name}"))`,n="row"===e?r?{signal:`ceil(${t} / ${r})`}:1:r?{signal:`min(${t}, ${r})`}:{signal:t};o.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:n}]})}}const{row:s,column:l}=a;return(s||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}assemble(){var e,t;const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:a,facet:s}=this;if(o&&a&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(null!=(e=i.x)?e:[],null!=(t=i.y)?t:[]),a=o.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:a}]})}for(const e of[Ae,je])this[e]&&n.push(this.assembleRowColumnHeaderData(e,r,i));if(s){const e=this.assembleFacetHeaderData(i);e&&n.push(...e)}return n}}function Yc(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function Xc(e){const t={};return function e(t,n){if(m(t))e(t.not,n);else if(h(t))for(const r of t.and)e(r,n);else if(p(t))for(const r of t.or)e(r,n);else n(t)}(e.filter,e=>{var n;if(Xr(e)){let r=null;qr(e)?r=e.equal:Gr(e)?r=e.range[0]:Yr(e)&&(r=(n=e.oneOf,null!=n?n:e.in)[0]),r&&(Er(r)?t[e.field]="date":Object(a.E)(r)?t[e.field]="number":Object(a.H)(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}}),t}function Kc(e){const t={};function n(e){var n;Ro(e)?t[e.field]="date":"quantitative"===e.type&&(n=e.aggregate,Object(a.H)(n)&&E(["min","max"],n))?t[e.field]="number":$(e.field)>1?e.field in t||(t[e.field]="flatten"):go(e)&&to(e.sort)&&$(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((Wf(e)||Vf(e))&&e.forEachFieldDef((t,r)=>{if(po(t))n(t);else{const i=wt(r),o=e.fieldDef(i);n(Object.assign(Object.assign({},t),{type:o.type}))}}),Wf(e)){const{mark:n,markDef:r,encoding:i}=e;if(le(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];!fo(e)||"quantitative"!==e.type||e.field in t||(t[e.field]="number")}}return t}class Jc extends Pl{constructor(e,t){super(e),this._parse=t}clone(){return new Jc(null,y(this._parse))}hash(){return`Parse ${w(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!ys(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of N(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:wr(yr.differentParse(e,n[e],t.value)))}for(const e of N(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:wr(yr.differentParse(e,t[e],n)))}const i=new nc(t,n);r.copyAll(i);const o={};for(const e of N(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===N(o).length||r.parseNothing?null:new Jc(e,o)}get parse(){return this._parse}merge(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}assembleFormatParse(){const e={};for(const t of N(this._parse)){const n=this._parse[t];1===$(t)&&(e[t]=n)}return e}producedFields(){return new Set(N(this._parse))}dependentFields(){return new Set(N(this._parse))}assembleTransforms(e=!1){return N(this._parse).filter(t=>!e||$(t)>1).map(e=>{const t=function(e,t){const n=F(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(0===t.indexOf("date:")){return`timeParse(${n},'${Yc(t.slice(5,t.length))}')`}if(0===t.indexOf("utc:")){return`utcParse(${n},'${Yc(t.slice(4,t.length))}')`}return wr(yr.unrecognizedParse(t)),null}(e,this._parse[e]);return t?{type:"formula",expr:t,as:q(e)}:null}).filter(e=>null!==e)}}class Zc extends Pl{constructor(e,t){super(e),this.transform=t}clone(){return new Zc(null,y(this.transform))}addDimensions(e){this.transform.groupby=j(this.transform.groupby.concat(e),e=>e)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t=>e.add(t)),this.transform.joinaggregate.map(e=>e.field).filter(e=>void 0!==e).forEach(t=>e.add(t)),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){var t;return null!=(t=e.as)?t:vo(e)}hash(){return`JoinAggregateTransform ${w(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:t,fields:e},void 0!==r?{groupby:r}:{})}}class Qc extends Pl{constructor(e,t){super(e),this._stack=t}clone(){return new Qc(null,y(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,s=[],l=[];if(void 0!==t.sort)for(const e of t.sort)s.push(e.field),l.push(H(e.order,"ascending"));const u={field:s,order:l};let c;return c=function(e){return Object(a.A)(e)&&e.every(e=>Object(a.H)(e))&&e.length>1}(i)?i:Object(a.H)(i)?[i,i+"_end"]:[t.stack+"_start",t.stack+"_end"],new Qc(e,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;let i;if(n.groupbyChannel){i=Co(r[n.groupbyChannel])}const o=function(e){return e.stack.stackBy.reduce((e,t)=>{const n=vo(t.fieldDef);return n&&e.push(n),e},[])}(t),s=t.encoding.order;let l;return l=Object(a.A)(s)||fo(s)?Gi(s):o.reduce((e,t)=>(e.field.push(t),e.order.push("descending"),e),{field:[],order:[]}),new Qc(e,{dimensionFieldDef:i,stackField:t.vgField(n.fieldChannel),facetby:[],stackby:o,sort:l,offset:n.offset,impute:n.impute,as:[t.vgField(n.fieldChannel,{suffix:"start",forAs:!0}),t.vgField(n.fieldChannel,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(t=>e.add(t)),this._stack.facetby.forEach(t=>e.add(t)),this._stack.sort.field.forEach(t=>e.add(t)),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${w(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:e,impute:t,groupby:n}=this._stack;return e?e.bin?t?[vo(e,{binSuffix:"mid"})]:[vo(e,{}),vo(e,{binSuffix:"end"})]:[vo(e)]:null!=n?n:[]}assemble(){const e=[],{facetby:t,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:l}=this._stack;if(s&&n){const{band:o=.5,bin:a}=n;a&&e.push({type:"formula",expr:`${o}*`+vo(n,{expr:"datum"})+`+${1-o}*`+vo(n,{expr:"datum",binSuffix:"end"}),as:vo(n,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:r,groupby:[...i,...t],key:vo(n,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:l,offset:a}),e}}class ef extends Pl{constructor(e,t){super(e),this.transform=t}clone(){return new ef(null,y(this.transform))}addDimensions(e){this.transform.groupby=j(this.transform.groupby.concat(e),e=>e)}dependentFields(){var e,t;const n=new Set;return(e=this.transform.groupby,null!=e?e:[]).forEach(e=>n.add(e)),(t=this.transform.sort,null!=t?t:[]).forEach(e=>n.add(e.field)),this.transform.window.map(e=>e.field).filter(e=>void 0!==e).forEach(e=>n.add(e)),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){var t;return null!=(t=e.as)?t:vo(e)}hash(){return`WindowTransform ${w(this.transform)}`}assemble(){var e;const t=[],n=[],r=[],i=[];for(const e of this.transform.window)n.push(e.op),r.push(this.getDefaultName(e)),i.push(void 0===e.param?null:e.param),t.push(void 0===e.field?null:e.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(e=>Oe(e)))return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},void 0!==a?{groupby:a}:{});const s=[],l=[];if(void 0!==this.transform.sort)for(const t of this.transform.sort)s.push(t.field),l.push(null!=(e=t.order)?e:"ascending");const u={field:s,order:l},c=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:r,ops:n,fields:t,sort:u},void 0!==c?{ignorePeers:c}:{}),void 0!==a?{groupby:a}:{}),void 0!==o?{frame:o}:{})}}class tf extends Pl{clone(){return new tf(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Aa])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Aa}}}class nf extends $c{run(e){const t=e.parent;if(e instanceof Jc){if(Uc(t))return this.flags;if(t.numChildren()>1)return this.setContinue(),this.flags;if(t instanceof Jc)this.setMutated(),t.merge(e);else{if(C(t.producedFields(),e.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),e.swapWithParent()}}return this.setContinue(),this.flags}}class rf extends Hc{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map(e=>e.hash()),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of N(n))n[t].length>1&&(this.setMutated(),this.mergeNodes(e,n[t]));for(const t of e.children)this.run(t);return this.mutatedFlag}}class of extends $c{run(e){return e instanceof Cl||e.numChildren()>0||e instanceof Gc?this.flags:(this.setMutated(),e.remove(),this.flags)}}class af extends $c{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(e){if(this.setContinue(),e instanceof Nl){const t=e.producedFields();A(t,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...t]),this.prev=e}return this.flags}reset(){this.fields.clear()}}class sf extends $c{run(e){this.setContinue();const t=e.parent.children.filter(e=>e instanceof Nl),n=t.pop();for(const e of t)this.setMutated(),n.merge(e);return this.flags}}function lf(e){if(e instanceof Gc)if(1!==e.numChildren()||e.children[0]instanceof Cl){const n=e.model.component.data.main;!function e(t){if(t instanceof Cl&&t.type===ws&&1===t.numChildren()){const n=t.children[0];n instanceof Gc||(n.swapWithParent(),e(t))}}(n);const r=(t=e,function e(n){if(!(n instanceof Gc)){const r=n.clone();if(r instanceof Cl){const e=mf+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof Vc||r instanceof Qc||r instanceof ef||r instanceof Zc)&&r.addDimensions(t.fields);return n.children.flatMap(e).forEach(e=>e.parent=r),[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof Vc||t instanceof Qc||t instanceof ef||t instanceof Zc)&&t.addDimensions(e.fields),t.swapWithParent(),lf(e)}else e.children.map(lf);var t}class uf extends Hc{constructor(){super()}run(e){e instanceof Cl&&!e.isRequired()&&(this.setMutated(),e.remove());for(const t of e.children)this.run(t);return this.mutatedFlag}}class cf extends Hc{constructor(e){super(),this.requiresSelectionId=e&&hu(e)}run(e){e instanceof tf&&(this.requiresSelectionId&&(Uc(e.parent)||e.parent instanceof Vc||e.parent instanceof Jc)||(this.setMutated(),e.remove()));for(const t of e.children)this.run(t);return this.mutatedFlag}}class ff extends $c{run(e){const t=e.parent,n=[...t.children],r=t.children.filter(e=>e instanceof Jc);if(t.numChildren()>1&&r.length>=1){const e={},i=new Set;for(const t of r){const n=t.parse;for(const t of N(n))t in e?e[t]!==n[t]&&i.add(t):e[t]=n[t]}for(const t of i)delete e[t];if(0!==N(e).length){this.setMutated();const r=new Jc(t,e);for(const i of n){if(i instanceof Jc)for(const t of N(e))delete i.parse[t];t.removeChild(i),i.parent=r,i instanceof Jc&&0===N(i.parse).length&&i.remove()}}}return this.setContinue(),this.flags}}class df extends $c{run(e){const t=e.parent,n=t.children.filter(e=>e instanceof Vc),r={};for(const e of n){const t=w(e.groupBy);t in r||(r[t]=[]),r[t].push(e)}for(const e of N(r)){const n=r[e];if(n.length>1){const e=n.pop();for(const r of n)e.merge(r)&&(t.removeChild(r),r.parent=e,r.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class pf extends $c{constructor(e){super(),this.model=e}run(e){const t=e.parent,n=!(Uc(t)||t instanceof bu||t instanceof Jc||t instanceof tf),r=[],i=[];for(const e of t.children)e instanceof Rc&&(n&&!C(t.producedFields(),e.dependentFields())?r.push(e):i.push(e));if(r.length>0){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setMutated(),t instanceof Rc?t.merge(e,this.model.renameSignal.bind(this.model)):e.swapWithParent()}if(i.length>1){const e=i.pop();for(const t of i)e.merge(t,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class hf extends $c{run(e){const t=e.parent,n=[...t.children];if(!k(n,e=>e instanceof Cl)||t.numChildren()<=1)return this.setContinue(),this.flags;const r=[];let i;for(const e of n)if(e instanceof Cl){let n=e;for(;1===n.numChildren();){const e=n.children[0];if(!(e instanceof Cl))break;n=e}r.push(...n.children),i?(t.removeChild(e),e.parent=i.parent,i.parent.removeChild(i),i.parent=n,this.setMutated()):i=n}else r.push(e);if(r.length){this.setMutated();for(const e of r)e.parent.removeChild(e),e.parent=i}return this.setContinue(),this.flags}}const mf="scale_",gf=5;function bf(e){const t=[];return e.forEach((function e(n){0===n.numChildren()?t.push(n):n.children.forEach(e)})),t}function yf(e){return e}function vf(e,t){return t.map(t=>{if(e instanceof $c){const n=e.optimizeNextFromLeaves(t);return e.reset(),n}return e.run(t)}).some(yf)}function xf(e,t){let n=e.sources;const r=new Set;return r.add(vf(new uf,n)),r.add(vf(new cf(t),n)),n=n.filter(e=>e.numChildren()>0),r.add(vf(new of,bf(n))),n=n.filter(e=>e.numChildren()>0),r.add(vf(new nf,bf(n))),r.add(vf(new pf(t),bf(n))),r.add(vf(new af,bf(n))),r.add(vf(new ff,bf(n))),r.add(vf(new df,bf(n))),r.add(vf(new sf,bf(n))),r.add(vf(new rf,n)),r.add(vf(new hf,bf(n))),e.sources=n,r.has(!0)}class _f{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new _f(()=>e(t))}}function wf(e){Wf(e)?function(e){const t=e.component.scales;N(t).forEach(n=>{const r=function(e,t){const n=e.getScaleComponent(t).get("type"),r=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=kf(t,n);if(!e)return void wr(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=kf(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);r!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:r}));if("x"===t&&e.channelHasField("x2"))return e.channelHasField("x")?sc(Of(n,r,e,"x"),Of(n,r,e,"x2"),"domain","scale",Sf):Of(n,r,e,"x2");if("y"===t&&e.channelHasField("y2"))return e.channelHasField("y")?sc(Of(n,r,e,"y"),Of(n,r,e,"y2"),"domain","scale",Sf):Of(n,r,e,"y2");return Of(n,r,e,t)}(e,n);if(t[n].setWithExplicit("domains",r),function(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t).bin,o=wi(r)&&r,a=$o(i)&&Ho(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",null!=o?o:a,!0)}(e,n),e.component.data.isFaceted){let t=e;for(;!Vf(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)Hs(e)&&(e.data=mf+e.data.replace(mf,""))}})}(e):function(e){for(const t of e.children)wf(t);const t=e.component.scales;N(t).forEach(n=>{let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):sc(r,e.getWithExplicit("domains"),"domains","scale",Sf);const t=e.get("selectionExtent");i&&t&&i.selection!==t.selection&&wr("The same selection must be used to override scale domains in a layered view."),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)})}(e)}function Of(e,t,n,r){const i=n.fieldDef(r);if(t&&"unaggregated"!==t&&!wi(t)){const{type:e,timeUnit:n}=i;return rc("temporal"===e||n?function(e,t,n){return e.map(e=>{return{signal:`{data: ${zo(e,{timeUnit:n,type:t})}}`}})}(t,e,n):[t])}const o=n.stack;if(o&&r===o.fieldChannel){if("normalize"===o.offset)return ic([[0,1]]);const e=n.requestDataName(ws);return ic([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const s=Xt(r)?function(e,t,n){if(!yi(n))return;const r=e.fieldDef(t),i=r.sort;if(no(i))return{op:"min",field:Mu(r,t),order:"ascending"};const o=null!==e.stack;if(to(i))return Ef(i,o);if(eo(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:a,field:s}=r;if(_e(a)||we(a))return Ef({field:vo(r),order:n},o);if(Oe(a)||!a)return Ef({op:a,field:s,order:n},o)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(E(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if("unaggregated"===t){const e=n.requestDataName(ws),{field:t}=i;return ic([{data:e,field:vo({field:t,aggregate:"min"})},{data:e,field:vo({field:t,aggregate:"max"})}])}if(Uo(i.bin)){if(yi(e))return ic("bin-ordinal"===e?[]:[{data:I(s)?n.requestDataName(ws):n.requestDataName(Os),field:n.vgField(r,Fo(i,r)?{binSuffix:"range"}:{}),sort:!0!==s&&Object(a.F)(s)?s:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=i;if(Uo(e)){const t=Ic(n,i.field,e);return ic([new _f(()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`})])}return ic([{data:n.requestDataName(ws),field:n.vgField(r,{})}])}}if(i.timeUnit&&E(["time","utc"],e)&&lo(r,i,Wf(n)?n.encoding[Ot(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(ws);return ic([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return ic(s?[{data:I(s)?n.requestDataName(ws):n.requestDataName(Os),field:n.vgField(r),sort:s}]:[{data:n.requestDataName(ws),field:n.vgField(r)}])}function Ef(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:null!=n?n:t?"sum":Ji},r?{field:B(r)}:{}),i?{order:i}:{})}function kf(e,t){const{aggregate:n,type:r}=e;return n?Object(a.H)(n)&&!Te[n]?{valid:!1,reason:yr.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:yr.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:yr.unaggregateDomainHasNoEffectForRawField(e)}}function Sf(e,t,n,r){return e.explicit&&t.explicit&&wr(yr.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Tf(e){if(Hs(e)&&Object(a.H)(e.field))return e.field;if(function(e){return!Object(a.A)(e)&&("fields"in e&&!("data"in e))}(e)){let t;for(const n of e.fields)if(Hs(n)&&Object(a.H)(n.field))if(t){if(t!==n.field)return wr("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return wr("Detected faceted independent scales that union domain of identical fields from different source detected. We will assume that this is the same field from a different fork of the same data source. However, if this is not case, the result view size maybe incorrect."),t}if(function(e){return!Object(a.A)(e)&&("fields"in e&&"data"in e)}(e)){wr("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return Object(a.H)(t)?t:void 0}}function jf(e,t){return function(e){const t=j(e.map(e=>{if(Hs(e)){const{sort:t}=e;return Object(ye.b)(e,["sort"])}return e}),w),n=j(e.map(e=>{if(Hs(e)){const t=e.sort;return void 0===t||I(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(e=>void 0!==e),w);if(0===t.length)return;if(1===t.length){const t=e[0];if(Hs(t)&&n.length>0){let e=n[0];return n.length>1&&(wr(yr.MORE_THAN_ONE_SORT),e=!0),Object.assign(Object.assign({},t),{sort:e})}return t}const r=j(n.map(e=>I(e)||!("op"in e)||e.op in xe?e:(wr(yr.domainSortDropped(e)),!0)),w);let i;1===r.length?i=r[0]:r.length>1&&(wr(yr.MORE_THAN_ONE_SORT),i=!0);const o=j(e.map(e=>Hs(e)?e.data:null),e=>e);if(1===o.length&&null!==o[0]){return Object.assign({data:o[0],fields:t.map(e=>e.field)},i?{sort:i}:{})}return Object.assign({fields:t},i?{sort:i}:{})}(e.component.scales[t].get("domains").map(t=>(Hs(t)&&(t.data=e.lookupDataSource(t.data)),t)))}function Af(e){return N(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u}=i,c=Object(ye.b)(i,["name","type","selectionExtent","domains","range"]),f=function(e,t,n){if(("x"===n||"y"===n)&&$s(e))return{step:{signal:t+"_step"}};return e}(i.range,o,n);let d;s&&(d=function(e,t){const n=t.selection;return{signal:vu(e.getSelectionComponent(n,D(n)),t)}}(e,s));const p=jf(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:a},p?{domain:p}:{}),d?{domainRaw:d}:{}),{range:f}),c)),t},[])}class Pf extends nc{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||k(this.get("domains"),e=>Object(a.A)(e)&&2===e.length&&e[0]<=0&&e[1]>=0)}}const Cf=["range","scheme"];function Nf(e){return"x"===e?"width":"y"===e?"height":void 0}function Mf(e){const t=e.component.scales;Yt.forEach(n=>{const r=t[n];if(!r)return;const i=function(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const t of Cf)if(void 0!==n[t]){const r=Pi(i,t),o=Ci(e,t);if(r)if(o)wr(o);else switch(t){case"range":return rc(n[t]);case"scheme":return rc(Df(n[t]))}else wr(yr.scalePropertyNotWorkWithScaleType(i,t,e))}if(e===Ce||e===Ne){const t=e===Ce?"width":"height",n=r[t];if(Da(n)){if(yi(i))return rc({step:n.step});wr(yr.stepDropped(t))}}return ic(function(e,t){const{size:n,config:r,mark:i}=t,o=t.getSignalName.bind(t),{type:s}=t.fieldDef(e),l=t.getScaleComponent(e).get("type"),{domain:u}=t.specifiedScales[e];switch(e){case Ce:case Ne:{if(E(["point","band"],l))if(e!==Ce||n.width){if(e===Ne&&!n.height){const e=Fa(r.view,"height");if(Da(e))return e}}else{const e=Fa(r.view,"width");if(Da(e))return e}const i=Nf(e),a=t.getName(i);return e===Ne&&vi(l)?[_f.fromName(o,a),0]:[0,_f.fromName(o,a)]}case $e:{const o=t.component.scales[e].get("zero"),s=function(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(yr.incompatibleChannel("size",e))}(i,o,r),c=function(e,t,n,r){const i={x:If(n,"x"),y:If(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=zf(t,i,r.view);return Object(a.E)(e)?e-1:new _f(()=>`${e.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=zf(t,i,r.view);return Object(a.E)(e)?Math.pow(Rf*e,2):new _f(()=>`pow(${Rf} * ${e.signal}, 2)`)}}throw new Error(yr.incompatibleChannel("size",e))}(i,n,t,r);return _i(l)?function(e,t,n){const r=()=>{const r=`(${qs(t)?t.signal:t} - ${e}) / (${n} - 1)`;return`sequence(${e}, ${t} + ${r}, ${r})`};return qs(t)?new _f(r):{signal:r()}}(s,c,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&Object(a.A)(n)?n.length+1:(wr(yr.domainRequiredForThresholdScale(r)),3)}}(l,r,u,e)):[s,c]}case Ge:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case qe:return"symbol";case Fe:case Be:case Ue:return"ordinal"===l?"nominal"===s?"category":"ordinal":"rect"===i||"geoshape"===i?"heatmap":"ramp";case He:case We:case Ve:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}(e,t))}(n,e);r.setWithExplicit("range",i)})}function If(e,t){const n=e.fieldDef(t);if(n&&n.bin&&Uo(n.bin)){const r=Ic(e,n.field,n.bin),i=Nf(t),o=e.getName(i);return new _f(()=>{const t=e.getSignalName(r),n=`(${t}.stop - ${t}.start) / ${t}.step`;return`${e.getSignalName(o)} / (${n})`})}}function Df(e){return function(e){return!Object(a.H)(e)&&!!e.name}(e)?Object.assign({scheme:e.name},x(e,["name"])):{scheme:e}}const Rf=.95;function zf(e,t,n){const r=Da(e.width)?e.width.step:La(n,"width"),i=Da(e.height)?e.height.step:La(n,"height");return t.x||t.y?new _f(()=>{return`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`}):Math.min(r,i)}function Lf(e,t){Wf(e)?function(e,t){const n=e.component.scales;N(n).forEach(r=>{const i=e.specifiedScales[r],o=n[r],s=e.getScaleComponent(r),l=e.fieldDef(r),u=e.config,c=i[t],f=s.get("type"),d=Pi(f,t),p=Ci(r,t);if(void 0!==c&&(d?p&&wr(p):wr(yr.scalePropertyNotWorkWithScaleType(f,t,r))),d&&void 0===p)if(void 0!==c)o.copyKeyFromObject(t,i);else{const n=function(e,t,n,r,i,o,s,l,u,c){const f=c.scale,{type:d,sort:p}=r;switch(e){case"bins":return function(e,t){const n=t.bin;if(Uo(n)){const r=Ic(e,t.field,n);return new _f(()=>e.getSignalName(r))}if(qo(n)&&$o(n)&&void 0!==n.step)return{step:n.step};return}(t,r);case"interpolate":return function(e,t){if(E([Fe,Be,Ue],e)&&"nominal"!==t)return"hcl";return}(n,d);case"nice":return function(e,t,n){if(n.bin||E([ai.TIME,ai.UTC],e))return;return!!E([Ce,Ne],t)||void 0}(i,n,r);case"padding":return function(e,t,n,r,i,o){if(E([Ce,Ne],e)){if(xi(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&!r.bin&&!r.timeUnit&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===ai.POINT)return n.pointPadding}return}(n,i,f,r,u,c.bar);case"paddingInner":return function(e,t,n,r){if(void 0!==e)return;if(E([Ce,Ne],t)){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:i}=r;return H(e,"bar"===n?t:i)}return}(o,n,u.type,f);case"paddingOuter":return function(e,t,n,r,i,o){if(void 0!==e)return;if(E([Ce,Ne],t)&&n===ai.BAND){const{bandPaddingOuter:e}=o;return H(e,i/2)}return}(o,n,i,u.type,s,f);case"reverse":return function(e,t){if(vi(e)&&"descending"===t)return!0;return}(i,p);case"zero":return function(e,t,n,r,i){if(n&&"unaggregated"!==n&&vi(i)){if(Object(a.A)(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!_i(i))return!0;if(!t.bin&&E([Ce,Ne],e)){const{orient:t,type:n}=r;return!E(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(n,r,l,u,i)}return f[e]}(t,e,r,l,s.get("type"),s.get("padding"),s.get("paddingInner"),i.domain,e.markDef,u);void 0!==n&&o.set(t,n,!1)}})}(e,t):Bf(e,t)}function Ff(e){Wf(e)?Mf(e):Bf(e,"range")}function Bf(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?Ff(n):Lf(n,t);N(n).forEach(r=>{let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=sc(i,e.getWithExplicit(t),t,"scale",oc((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0}))}}n[r].setWithExplicit(t,i)})}function Uf(e,t,n,r){const i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":return ot(e)||"discrete"===en(e)?("shape"===e&&"ordinal"===t.type&&wr(yr.discreteChannelCannotEncode(e,"ordinal")),"ordinal"):E(["x","y"],e)&&E(["rect","bar","image","rule"],n)?"band":"point";case"temporal":return ot(e)?"time":"discrete"===en(e)?(wr(yr.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":return ot(e)?Uo(t.bin)?"bin-ordinal":"linear":"discrete"===en(e)?(wr(yr.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(yr.invalidFieldType(t.type))}(t,n,r),{type:o}=e;return Xt(t)?void 0!==o?Mi(t,o)?Ni(o,n.type)?o:(wr(yr.scaleTypeNotWorkWithFieldDef(o,i)),i):(wr(yr.scaleTypeNotWorkWithChannel(t,o,i)),i):i:null}function qf(e){Wf(e)?e.component.scales=function(e){const{encoding:t,mark:n}=e;return Yt.reduce((r,i)=>{let o,a;const s=t[i];if(fo(s)&&n===ae&&i===qe&&s.type===oi)return r;if(fo(s)?(o=s,a=s.scale):co(s)&&(o=s.condition,a=s.condition.scale),o&&null!==a&&!1!==a){const t=Uf(a=null!=a?a:{},i,o,n);r[i]=new Pf(e.scaleName(i+"",!0),{value:t,explicit:a.type===t})}return r},{})}(e):e.component.scales=function(e){const t=e.component.scales={},n={},r=e.component.resolve;for(const t of e.children)qf(t),N(t.component.scales).forEach(i=>{var o;if(r.scale[i]=null!=(o=r.scale[i])?o:ec(i,e),"shared"===r.scale[i]){const e=n[i],o=t.component.scales[i].getWithExplicit("type");e?ui(e.value,o.value)?n[i]=sc(e,o,"type","scale",$f):(r.scale[i]="independent",delete n[i]):n[i]=o}});for(const r of N(n)){const i=e.scaleName(r,!0),o=n[r];t[r]=new Pf(i,o);for(const t of e.children){const e=t.component.scales[r];e&&(t.renameScale(e.get("name"),i),e.merged=!0)}}return t}(e)}const $f=oc((e,t)=>fi(e)-fi(t));class Hf{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Wf(e){var t;return"unit"===(null===(t=e)||void 0===t?void 0:t.type)}function Vf(e){var t;return"facet"===(null===(t=e)||void 0===t?void 0:t.type)}function Gf(e){var t;return"repeat"===(null===(t=e)||void 0===t?void 0:t.type)}function Yf(e){var t;return"concat"===(null===(t=e)||void 0===t?void 0:t.type)}function Xf(e){var t;return"layer"===(null===(t=e)||void 0===t?void 0:t.type)}class Kf{constructor(e,t,n,r,i,o,s,l){var u,c;this.type=t,this.parent=n,this.config=i,this.repeater=o,this.view=l,this.children=[],this.correctDataNames=e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.repeater=o,this.name=null!=(u=e.name)?u:r,this.title=Ri(e.title)?{text:e.title}:e.title,this.scaleNameMap=n?n.scaleNameMap:new Hf,this.projectionNameMap=n?n.projectionNameMap:new Hf,this.signalNameMap=n?n.signalNameMap:new Hf,this.data=e.data,this.description=e.description,this.transforms=(c=e.transform,(null!=c?c:[]).map(e=>Es(e)?{filter:g(e.filter,Qr)}:e)),this.layout=ge(e)||Ya(e)?{}:function(e,t,n){var r,i;const o=n[t],s={},{spacing:l,columns:u}=o;void 0!==l&&(s.spacing=l),void 0!==u&&(io(e)&&!ro(e.facet)||Ia(e)&&Object(a.A)(e.repeat)||Ca(e))&&(s.columns=u);for(const t of Ra)if(void 0!==e[t])if("spacing"===t){const n=e[t];s[t]=Object(a.E)(n)?n:{row:(r=n.row,null!=r?r:l),column:(i=n.column,null!=i?i:l)}}else s[t]=e[t];return s}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:io(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new nc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},s?y(s):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){qf(e),wf(e);for(const t of Ai)Lf(e,t);t||Ff(e)}(this)}parseProjection(){Nc(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){wc(this)}assembleGroupStyle(){var e,t;if("unit"===this.type||"layer"===this.type)return null!=(t=null===(e=this.view)||void 0===e?void 0:e.style)?t:"cell"}assembleEncodeFromView(e){const{style:t}=e,n=Object(ye.b)(e,["style"]),r={};for(const e in n)if(Object(a.v)(n,e)){const t=n[e];void 0!==t&&(r[e]={value:t})}return r}assembleGroupEncodeEntry(e){let t=void 0;return this.view&&(t=this.assembleEncodeFromView(this.view)),e||"unit"!==this.type&&"layer"!==this.type?t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=t?t:{})}assembleLayout(){if(!this.layout)return;const e=this.layout,{spacing:t}=e,n=Object(ye.b)(e,["spacing"]),{component:r,config:i}=this,o=function(e,t){var n;const r={};for(const i of st){const o=e[i];if(null===(n=o)||void 0===n?void 0:n.facetFieldDef){const{titleAnchor:e,titleOrient:n}=Ru(["titleAnchor","titleOrient"],o.facetFieldDef,t,i),a=Iu(i,n),s=Gu(e,a);void 0!==s&&(r[a]=s)}}return N(r).length>0?r:void 0}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:t},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of st)e[n].title&&t.push(Fu(this,n));for(const e of zu)t=t.concat(qu(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(e=>wu(e,"grid",t)),...r.map(e=>wu(e,"grid",t)),...n.map(e=>wu(e,"main",t)),...r.map(e=>wu(e,"main",t))].filter(e=>e)}(this.component.axes,this.config)}assembleLegends(){return Tc(this)}assembleProjections(){return jc(this)}assembleTitle(){var e,t,n;const r=null!=(e=this.title)?e:{},{encoding:i}=r,o=Object(ye.b)(r,["encoding"]),a=Object.assign(Object.assign(Object.assign({},Di(this.config.title).nonMark),o),i?{encode:{update:i}}:{});if(a.text)return E(["unit","layer"],this.type)?E(["middle",void 0],a.anchor)&&(a.frame=null!=(t=a.frame)?t:"group"):a.anchor=null!=(n=a.anchor)?n:"start",N(a).length>0?a:void 0}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Vf(this.parent)?function e(t){return Xf(t)||Yf(t)||Gf(t)?t.children.reduce((t,n)=>t.concat(e(n)),Af(t)):Af(t)}(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}hasDescendantWithFieldOnChannel(e){for(const t of this.children)if(Wf(t)){if(t.channelHasField(e))return!0}else if(t.hasDescendantWithFieldOnChannel(e))return!0;return!1}getName(e){return D((this.name?this.name+"_":"")+e)}requestDataName(e){var t;const n=this.getName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(null!=(t=r[n])?t:0)+1,n}getSizeSignalRef(e){if(Vf(this.parent)){const t=zt(e),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(yi(e)&&$s(r)){const e=n.get("name"),r=Tf(jf(this,t));if(r){return{signal:Zu(e,n,vo({aggregate:"distinct",field:r},{expr:"datum"}))}}return wr(`Unknown field for ${t}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):vt(e)&&Xt(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(yr.selectionNotFound(t));return n}}class Jf extends Kf{vgField(e,t={}){const n=this.fieldDef(e);if(n)return vo(n,t)}reduceFieldDef(e,t){return Zo(this.getMapping(),(t,n,r)=>{const i=Po(n);return i?e(t,i,r):t},t)}forEachFieldDef(e,t){Jo(this.getMapping(),(t,n)=>{const r=Po(t);r&&e(r,n)},t)}}class Zf extends Pl{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=y(t);const o=null!=(n=this.transform.as)?n:[void 0,void 0];this.transform.as=[(r=o[0],null!=r?r:"value"),(i=o[1],null!=i?i:"density")]}clone(){return new Zf(null,y(this.transform))}dependentFields(){var e;return new Set([this.transform.density,...(e=this.transform.groupby,null!=e?e:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${w(this.transform)}`}assemble(){const e=this.transform,{density:t}=e,n=Object(ye.b)(e,["density"]);return Object.assign({type:"kde",field:t},n)}}class Qf extends Pl{constructor(e,t){super(e),this.filter=t}clone(){return new Qf(null,Object.assign({},this.filter))}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==Li("invalid",i,n))return null;const o=t.reduceFieldDef((e,n,i)=>{const o=Xt(i)&&t.getScaleComponent(i);if(o){!vi(o.get("type"))||n.aggregate||le(r)||(e[n.field]=n)}return e},{});return N(o).length?new Qf(e,o):null}dependentFields(){return new Set(N(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${w(this.filter)}`}assemble(){const e=N(this.filter).reduce((e,t)=>{const n=this.filter[t],r=vo(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class ed extends Pl{constructor(e,t){super(e),this.transform=t,this.transform=y(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map((e,t)=>{var n;return null!=(n=r[t])?n:e})}clone(){return new ed(this.parent,y(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${w(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class td extends Pl{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=y(t);const o=null!=(n=this.transform.as)?n:[void 0,void 0];this.transform.as=[(r=o[0],null!=r?r:"key"),(i=o[1],null!=i?i:"value")]}clone(){return new td(null,y(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${w(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class nd extends Pl{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new nd(null,y(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[Re,De],[Le,ze]]){const i=r.map(e=>t.channelHasField(e)?t.fieldDef(e).field:mo(t.encoding[e])?{expr:t.encoding[e].value+""}:void 0);(i[0]||i[1])&&(e=new nd(e,i,null,t.getName(`geojson_${n++}`)))}if(t.channelHasField(qe)){const r=t.fieldDef(qe);r.type===oi&&(e=new nd(e,null,r.field,t.getName(`geojson_${n++}`)))}return e}dependentFields(){var e;const t=(e=this.fields,null!=e?e:[]).filter(a.H);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${w(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class rd extends Pl{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new rd(null,this.projection,y(this.fields),y(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[Re,De],[Le,ze]]){const r=n.map(e=>t.channelHasField(e)?t.fieldDef(e).field:mo(t.encoding[e])?{expr:t.encoding[e].value+""}:void 0),i=n[0]===Le?"2":"";(r[0]||r[1])&&(e=new rd(e,t.projectionName(),r,[t.getName("x"+i),t.getName("y"+i)]))}return e}dependentFields(){return new Set(this.fields.filter(a.H))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${w(this.fields)} ${w(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class id extends Pl{constructor(e,t){super(e),this.transform=t}clone(){return new id(null,y(this.transform))}dependentFields(){var e;return new Set([this.transform.impute,this.transform.key,...(e=this.transform.groupby,null!=e?e:[])])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new id(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(fo(r)&&fo(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:l,frame:u,keyvals:c}=o.impute,f=Qo(t.mark,n);return new id(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:a.field},s?{method:s}:{}),void 0!==l?{value:l}:{}),u?{frame:u}:{}),void 0!==c?{keyvals:c}:{}),f.length?{groupby:f}:{}))}return null}hash(){return`Impute ${w(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:e,key:t},n?{keyvals:(l=n,void 0!==(null===(u=l)||void 0===u?void 0:u.stop)?this.processSequence(n):n)}:{}),{method:"value"}),i?{groupby:i}:{}),{value:null});var l,u;let c;if(r&&"value"!==r){c=[Object.assign({type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1},i?{groupby:i}:{}),{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}else{c=[{type:"formula",expr:`datum.${e} === null ? ${o} : datum.${e}`,as:e}]}return[s,...c]}}class od extends nc{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}class ad extends Pl{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=y(t);const o=null!=(n=this.transform.as)?n:[void 0,void 0];this.transform.as=[(r=o[0],null!=r?r:t.on),(i=o[1],null!=i?i:t.loess)]}clone(){return new ad(null,y(this.transform))}dependentFields(){var e;return new Set([this.transform.loess,this.transform.on,...(e=this.transform.groupby,null!=e?e:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${w(this.transform)}`}assemble(){const e=this.transform,{loess:t,on:n}=e,r=Object(ye.b)(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:t},r)}}class sd extends Pl{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new sd(null,y(this.transform),this.secondary)}static make(e,t,n,r){var i;const o=t.component.data.sources;let a=null;if(void 0!==(s=n).lookup&&void 0===s.from.selection){let e=jd(n.from.data,o);e||(e=new zc(n.from.data),o.push(e));const i=t.getName(`lookup_${r}`);a=new Cl(e,i,"lookup",t.component.data.outputNodeRefCounts),t.component.data.outputNodes[i]=a}else if(function(e){return void 0!==e.lookup&&void 0!==e.from.selection}(n)){const e=n.from.selection;if(n.as=null!=(i=n.as)?i:e,!(a=t.getSelectionComponent(D(e),e).materialized))throw new Error(yr.noSameUnitLookup(e))}var s;return new sd(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Object(a.i)(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${w({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Object(a.i)(this.transform.as)}:{});else{let t=this.transform.as;Object(a.H)(t)||(wr(yr.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}class ld extends Pl{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=y(t);const o=null!=(n=this.transform.as)?n:[void 0,void 0];this.transform.as=[(r=o[0],null!=r?r:"prob"),(i=o[1],null!=i?i:"value")]}clone(){return new ld(null,y(this.transform))}dependentFields(){var e;return new Set([this.transform.quantile,...(e=this.transform.groupby,null!=e?e:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${w(this.transform)}`}assemble(){const e=this.transform,{quantile:t}=e,n=Object(ye.b)(e,["quantile"]);return Object.assign({type:"quantile",field:t},n)}}class ud extends Pl{constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=y(t);const o=null!=(n=this.transform.as)?n:[void 0,void 0];this.transform.as=[(r=o[0],null!=r?r:t.on),(i=o[1],null!=i?i:t.regression)]}clone(){return new ud(null,y(this.transform))}dependentFields(){var e;return new Set([this.transform.regression,this.transform.on,...(e=this.transform.groupby,null!=e?e:[])])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${w(this.transform)}`}assemble(){const e=this.transform,{regression:t,on:n}=e,r=Object(ye.b)(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:t},r)}}class cd extends Pl{constructor(e,t){super(e),this.transform=t}clone(){return new cd(null,y(this.transform))}addDimensions(e){var t;this.transform.groupby=j((t=this.transform.groupby,null!=t?t:[]).concat(e),e=>e)}producedFields(){}dependentFields(){var e;return new Set([this.transform.pivot,this.transform.value,...(e=this.transform.groupby,null!=e?e:[])])}hash(){return`PivotTransform ${w(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:t},void 0!==r?{limit:r}:{}),void 0!==i?{op:i}:{}),void 0!==n?{groupby:n}:{})}}class fd extends Pl{constructor(e,t){super(e),this.transform=t}clone(){return new fd(null,y(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${w(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function dd(e){let t=0;return function n(r,i){var o;if(r instanceof zc&&!r.isGenerator&&!ms(r.data)){e.push(i),i={name:null,source:i.name,transform:[]}}if(r instanceof Jc&&(r.parent instanceof zc&&!i.source?(i.format=Object.assign(Object.assign({},null!=(o=i.format)?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Gc)return i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach(t=>e.push(t));if((r instanceof Fc||r instanceof Bc||r instanceof Qf||r instanceof bu||r instanceof Nu||r instanceof rd||r instanceof nd||r instanceof Vc||r instanceof sd||r instanceof ef||r instanceof Zc||r instanceof td||r instanceof ed||r instanceof Zf||r instanceof ad||r instanceof ld||r instanceof ud||r instanceof tf||r instanceof fd||r instanceof cd)&&i.transform.push(r.assemble()),(r instanceof Rc||r instanceof Nl||r instanceof id||r instanceof Qc)&&i.transform.push(...r.assemble()),r instanceof Cl)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Cl)r.setSource(i.name);else if(i.name||(i.name=`data_${t++}`),r.setSource(i.name),1===r.numChildren()){e.push(i),i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Cl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source,r.children.forEach(e=>{n(e,{name:null,source:o,transform:[]})});break}}}}function pd(e,t){var n;if(e.channelHasField(t)){const r=e.facet[t],i=Du("title",null,e.config,t);let o=So(r,e.config,{allowDisabling:!0,includeDefault:void 0===i||!!i});e.child.component.layoutHeaders[t].title&&(o=Object(a.A)(o)?o.join(", "):o,o+=" / "+e.child.component.layoutHeaders[t].title,e.child.component.layoutHeaders[t].title=null);const s=Du("labelOrient",r,e.config,t),l=H((null!=(n=r.header)?n:{}).labels,!0),u=E(["bottom","right"],s)?"footer":"header";e.component.layoutHeaders[t]={title:o,facetFieldDef:r,[u]:"facet"===t?[]:[hd(e,t,l)]}}}function hd(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function md(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:o,resolve:a}=e.component;if(a.axis[t]=tc(a,t),"shared"===a.axis[t]){const a="x"===t?"column":"row",s=o[a];for(const o of r.component.axes[t]){const t="top"===(i=o.get("orient"))||"left"===i?"header":"footer";s[t]=null!=(n=s[t])?n:[hd(e,a,!1)];const r=wu(o,"main",e.config,{header:!0});s[t][0].axes.push(r),o.mainExtracted=!0}}}var i}function gd(e){vd(e);const t=e.component.layoutSize;t.setWithExplicit("width",xd(e,"width")),t.setWithExplicit("height",xd(e,"height"))}const bd=gd,yd={vconcat:"width",hconcat:"height"};function vd(e){for(const t of e.children)t.parseLayoutSize()}function xd(e,t){const n="width"===t?"x":"y",r=e.component.resolve;let i;for(const o of e.children){const e=o.component.layoutSize.getWithExplicit(t),a=r.scale[n];if("independent"===a&&"step"===e.value){i=void 0;break}if(i){if("independent"===a&&i.value!==e.value){i=void 0;break}i=sc(i,e,t,"")}else i=e}if(i){for(const n of e.children)e.renameSignal(n.getName(t),e.getName(t)),n.component.layoutSize.set(t,"merged",!1);return i}return{explicit:!1,value:void 0}}function _d(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(yi(e)){const e=Fa(r.view,t);return $s(n)||Da(e)?"step":e}return za(r.view,t)}if(e.hasProjection)return za(r.view,t);{const e=Fa(r.view,t);return Da(e)?e.step:e}}function wd(e,t){return(n=e.field)&&!Object(a.H)(n)&&"repeat"in n?e.field.repeat in t?Object.assign(Object.assign({},e),{field:t[e.field.repeat]}):void wr(yr.noSuchRepeatedValue(e.field.repeat)):e;var n}function Od(e,t){if(void 0!==(e=wd(e,t))){if(null===e)return null;if(ao(e)&&to(e.sort)){const n=wd(e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function Ed(e,t){if(!fo(e)){if(co(e)){const n=Od(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});{const{condition:t}=e;return Object(ye.b)(e,["condition"])}}return e}{const n=Od(e,t);if(n)return n;if(uo(e))return{condition:e.condition}}}function kd(e,t){const n={};for(const r in e)if(Object(a.v)(e,r)){const i=e[r];if(Object(a.A)(i))n[r]=i.map(e=>Ed(e,t)).filter(e=>e);else{const e=Ed(i,t);void 0!==e&&(n[r]=e)}}return n}function Sd(e,t,n){return vo(t,Object.assign({suffix:`by_${vo(e)}`},null!=n?n:{}))}class Td extends Jf{constructor(e,t,n,r,i){super(e,"facet",t,n,i,r,e.resolve),this.child=Qd(e.spec,this,this.getName("child"),void 0,r,i),this.children=[this.child];const o=function(e,t){return ro(e)?kd(e,t):Od(e,t)}(e.facet,r);this.facet=this.initFacet(o)}initFacet(e){return ro(e)?Zo(e,(e,t,n)=>E([je,Ae],n)?void 0===t.field?(wr(yr.emptyFieldDef(t,n)),e):(e[n]=No(t,n),e):(wr(yr.incompatibleChannel(n,"facet")),e),{}):{facet:No(e,"facet")}}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=Pd(this),this.child.parseData()}parseLayoutSize(){vd(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of st)pd(e,t);md(e,"x"),md(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){var e,t,n,r;const i={};for(const o of st)for(const a of Lu){const s=this.component.layoutHeaders[o],l=s[a],{facetFieldDef:u}=s;if(u){const t=Du("titleOrient",u,this.config,o);if(E(["right","bottom"],t)){const n=Iu(o,t);i.titleAnchor=null!=(e=i.titleAnchor)?e:{},i.titleAnchor[n]="end"}}if(null===(t=l)||void 0===t?void 0:t[0]){const e="row"===o?"height":"width",t="header"===a?"headerBand":"footerBand";"facet"===o||this.child.component.layoutSize.get(e)||(i[t]=null!=(n=i[t])?n:{},i[t][o]=.5),s.title&&(i.offset=null!=(r=i.offset)?r:{},i.offset["row"===o?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Td)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(e){return this.parent&&this.parent instanceof Td?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vo(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(e)):super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Td){if(this.child.channelHasField("column")){const r=vo(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of["x","y"]){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(yi(o)&&$s(a)){const i=Tf(jf(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):wr(`Unknown field for ${r}. Cannot calculate view size.`)}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const e of st){const t=this.facet[e];if(t){l.push(vo(t));const{bin:u,sort:c}=t;if(Uo(u)&&l.push(vo(t,{binSuffix:"end"})),to(c)){const{field:e,op:a=Ji}=c,l=Sd(t,c);n&&r?(i.push(l),o.push("max"),s.push(l)):(i.push(e),o.push(a),s.push(l))}else if(Object(a.A)(c)){const n=Mu(t,e);i.push(n),o.push("max"),s.push(n)}}}const u=!!n&&!!r;return Object.assign({name:e,data:t,groupby:l},u||i.length?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),i.length?{fields:i,ops:o,as:s}:{})}:{})}facetSortFields(e){const{facet:t}=this,n=t[e];return n?to(n.sort)?[Sd(n,n.sort,{expr:"datum"})]:Object(a.A)(n.sort)?[Mu(n,e,{expr:"datum"})]:[vo(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(to(e)?e.order:!Object(a.A)(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return Hu(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of zu)if(e[r]){const i=Du("labelOrient",e[r],t,r);if(E(n[r],i))return Hu(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=dd(t);return e.children.forEach(t=>n(t,{source:e.name,name:null,transform:[]})),t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},r?{title:r}:{}),i?{style:i}:{}),{from:{facet:this.assembleFacet()},sort:{field:st.map(e=>this.facetSortFields(e)).flat(),order:st.map(e=>this.facetSortOrder(e)).flat()}}),t.length>0?{data:t}:{}),n?{encode:{update:n}}:{}),e.assembleGroup(function(e,t){if(e.component.selection&&N(e.component.selection).length){const n=Object(a.Y)(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Object(Js.a)("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ql(t)}(this,[])))]}getMapping(){return this.facet}}function jd(e,t){var n,r;for(const i of t){const t=i.data;if((!e.name||!i.hasName()||e.name===i.dataName)&&!((null===(n=e.format)||void 0===n?void 0:n.mesh)&&(null===(r=t.format)||void 0===r?void 0:r.feature)))if(gs(e)&&gs(t)){if(b(e.values,t.values))return i}else if(ms(e)&&ms(t)){if(e.url===t.url)return i}else if(bs(e)&&e.name===i.dataName)return i}return null}function Ad(e,t){if(e.data||!e.parent){if(null===e.data){const e=new zc([]);return t.push(e),e}const n=jd(e.data,t);if(n)return ys(e.data)||(n.data.format=function(e,...t){for(const n of t)T(e,null!=n?n:{});return e}({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new zc(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Pd(e){var t,n,r,i,o,a,s,l,u,c,f;let d=Ad(e,e.component.data.sources);const{outputNodes:p,outputNodeRefCounts:h}=e.component.data,m=e.parent?e.parent.component.data.ancestorParse.clone():new od,g=e.data;ys(g)?(vs(g)?d=new Bc(d,g.sequence):_s(g)&&(d=new Fc(d,g.graticule)),m.parseNothing=!0):null===(null===(n=null===(t=g)||void 0===t?void 0:t.format)||void 0===n?void 0:n.parse)&&(m.parseNothing=!0),r=Jc.makeExplicit(d,e,m),d=new tf(d=null!=r?r:d);const b=e.parent&&Xf(e.parent);(Wf(e)||Vf(e))&&b&&(d=null!=(i=Rc.makeFromEncoding(d,e))?i:d),e.transforms.length>0&&(d=function(e,t,n){var r,i;let o=0;for(const a of t.transforms){let s,l=void 0;if(Ds(a))s=e=new Nu(e,a),l="derived";else if(Es(a)){const i=Xc(a);s=e=null!=(r=Jc.makeWithAncestors(e,{},i,n))?r:e,e=new bu(e,t,a.filter)}else if(Rs(a))s=e=Rc.makeFromTransform(e,a,t),l="number";else if(Ls(a)){l="date",void 0===n.getWithExplicit(a.field).value&&(e=new Jc(e,{[a.field]:l}),n.set(a.field,l,!1)),s=e=Nl.makeFromTransform(e,a)}else if(Fs(a))s=e=Vc.makeFromTransform(e,a),l="number",hu(t)&&(e=new tf(e));else if(Ps(a))s=e=sd.make(e,t,a,o++),l="derived";else if(Ns(a))s=e=new ef(e,a),l="number";else if(Ms(a))s=e=new Zc(e,a),l="number";else if(Bs(a))s=e=Qc.makeFromTransform(e,a),l="derived";else if(Us(a))s=e=new td(e,a),l="derived";else if(Is(a))s=e=new ed(e,a),l="derived";else if(ks(a))s=e=new cd(e,a),l="derived";else if(Cs(a))e=new fd(e,a);else if(zs(a))s=e=id.makeFromTransform(e,a),l="derived";else if(Ss(a))s=e=new Zf(e,a),l="derived";else if(Ts(a))s=e=new ld(e,a),l="derived";else if(js(a))s=e=new ud(e,a),l="derived";else{if(!As(a)){wr(yr.invalidTransformIgnored(a));continue}s=e=new ad(e,a),l="derived"}if(s&&void 0!==l)for(const e of null!=(i=s.producedFields())?i:[])n.set(e,l,!1)}return e}(d,e,m));const y=function(e){const t={};if(Wf(e)&&e.component.selection)for(const n of N(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&$(e.field)>1&&(t[e.field]="flatten")}return t}(e),v=Kc(e);d=null!=(o=Jc.makeWithAncestors(d,{},Object.assign(Object.assign({},y),v),m))?o:d,Wf(e)&&(d=nd.parseAll(d,e),d=rd.parseAll(d,e)),(Wf(e)||Vf(e))&&(b||(d=null!=(a=Rc.makeFromEncoding(d,e))?a:d),d=null!=(s=Nl.makeFromEncoding(d,e))?s:d,d=Nu.parseAllForSortIndex(d,e));const x=e.getName(Os),_=new Cl(d,x,Os,h);if(p[x]=_,d=_,Wf(e)){const t=Vc.makeFromEncoding(d,e);t&&(d=t,hu(e)&&(d=new tf(d))),d=null!=(l=id.makeFromEncoding(d,e))?l:d,d=null!=(u=Qc.makeFromEncoding(d,e))?u:d}Wf(e)&&(d=null!=(c=Qf.make(d,e))?c:d);const w=e.getName(ws),O=new Cl(d,w,ws,h);p[w]=O,d=O,Wf(e)&&function(e,t){du(e,n=>{const r=n.name,i=e.getName(`lookup_${r}`);e.component.data.outputNodes[i]=n.materialized=new Cl(new bu(t,e,{selection:r}),i,"lookup",e.component.data.outputNodeRefCounts)})}(e,O);let E=null;if(Vf(e)){const t=e.getName("facet");f=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(to(i.sort)){const{field:n,op:r=Ji}=i.sort;e=t=new Zc(e,{joinaggregate:[{op:r,field:n,as:Sd(i,i.sort,{forAs:!0})}],groupby:[vo(i)]})}return t}return null}(d=Nu.parseAllForSortIndex(d,e),e.facet),E=new Gc(d=null!=f?f:d,e,t,O.getSource()),p[t]=E,d=E}return Object.assign(Object.assign({},e.component.data),{outputNodes:p,outputNodeRefCounts:h,raw:_,main:O,facetRoot:E,ancestorParse:m})}class Cd extends Kf{constructor(e,t,n,r,i,o,a){super(e,t,n,r,i,o,a)}parseData(){this.component.data=Pd(this),this.children.forEach(e=>{e.parseData()})}parseSelections(){this.component.selection={};for(const e of this.children)e.parseSelections(),N(e.component.selection).forEach(t=>{this.component.selection[t]=e.component.selection[t]})}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}assembleSelectionTopLevelSignals(e){return this.children.reduce((e,t)=>t.assembleSelectionTopLevelSignals(e),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){return this.children.reduce((e,t)=>[...e,...t.assembleLayoutSignals()],Xu(this))}assembleSelectionData(e){return this.children.reduce((e,t)=>t.assembleSelectionData(e),e)}assembleMarks(){return this.children.map(e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())})}}class Nd extends Cd{constructor(e,t,n,r,i){var o,a,s,l;super(e,"concat",t,n,i,r,e.resolve),"shared"!==(null===(a=null===(o=e.resolve)||void 0===o?void 0:o.axis)||void 0===a?void 0:a.x)&&"shared"!==(null===(l=null===(s=e.resolve)||void 0===s?void 0:s.axis)||void 0===l?void 0:l.y)||wr(yr.CONCAT_CANNOT_SHARE_AXIS),this.concatType=Na(e)?"vconcat":Ma(e)?"hconcat":"concat",this.children=this.getChildren(e).map((e,t)=>Qd(e,this,this.getName("concat_"+t),void 0,r,i))}getChildren(e){return Na(e)?e.vconcat:Ma(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){vd(e);const t=e.component.layoutSize,n=yd[e.concatType];n&&t.setWithExplicit(n,xd(e,n))}(this)}parseAxisGroup(){return null}assembleDefaultLayout(){return Object.assign(Object.assign({},"vconcat"===this.concatType?{columns:1}:{}),{bounds:"full",align:"each"})}}const Md=Object.assign(Object.assign({gridScale:1,scale:1},Xs),{labelExpr:1,encode:1}),Id=N(Md);class Dd extends nc{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new Dd(y(this.explicit),y(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}}const Rd={bottom:"top",top:"bottom",left:"right",right:"left"};function zd(e,t){if(!e)return t.map(e=>e.clone());{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=Ld(n,i)}}}return e}function Ld(e,t){for(const n of Id){const r=sc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(e,t)=>{switch(n){case"title":return Ki(e,t);case"gridScale":return{explicit:e.explicit,value:H(e.value,t.value)}}return ac(e,t,n,"axis")});e.setWithExplicit(n,r)}return e}function Fd(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?Xi(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}function Bd(e,t){var n;const r=t.axis(e),i=new Dd;Id.forEach(n=>{const o=function(e,t,n,r){const i=r.fieldDef(n),o=function(e,t,n,r){if(void 0!==t.labelAngle)return G(t.labelAngle);{const t=ju("labelAngle",e.config,n,Cu(n),e.getScaleComponent(n).get("type"));return void 0!==t?G(t):n===Ce&&E([ii,ni],r.type)?270:void 0}}(r,t,n,i),a=H(t.orient,Cu(n)),{mark:s,config:l}=r;switch(e){case"scale":return r.scaleName(n);case"gridScale":return function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(r,n);case"format":if(Ro(i))return;return qi(i,t.format,l);case"formatType":if(Ro(i))return;return t.formatType;case"grid":if(qo(r.fieldDef(n).bin))return!1;{const e=r.getScaleComponent(n).get("type");return H(t.grid,function(e,t){return!yi(e)&&!Uo(t.bin)}(e,i))}case"labelAlign":return H(t.labelAlign,Pu(o,a));case"labelAngle":return o;case"labelBaseline":return H(t.labelBaseline,Au(o,a));case"labelFlush":return H(t.labelFlush,function(e,t){if("x"===t&&E(["quantitative","temporal"],e.type))return!0}(i,n));case"labelOverlap":{const e=r.getScaleComponent(n).get("type");return H(t.labelOverlap,function(e,t){if("nominal"!==e.type)return"log"!==t||"greedy"}(i,e))}case"orient":return a;case"tickCount":{const e=r.getScaleComponent(n).get("type"),o="x"===n?"width":"y"===n?"height":void 0,a=o?r.getSizeSignalRef(o):void 0;return H(t.tickCount,function({fieldDef:e,scaleType:t,size:n}){if(!yi(t)&&"log"!==t&&!E(["month","hours","day","quarter"],e.timeUnit))return Uo(e.bin)?{signal:`ceil(${n.signal}/10)`}:{signal:`ceil(${n.signal}/40)`}}({fieldDef:i,scaleType:e,size:a}))}case"title":{const e="x"===n?"x2":"y2",o=r.fieldDef(e);return H(t.title,Fd(r,n),Yi([oo(i)],o?[oo(o)]:[]))}case"values":return function(e,t,n){const r=e.values;if(r)return Lo(n,r)}(t,0,i);case"zindex":return H(t.zindex,function(e,t){return"rect"===e&&xo(t)?1:0}(s,i))}return u=e,Ks[u]?t[e]:void 0;var u}(n,r,e,t);if(void 0!==o){const a=function(e,t,n,r,i){switch(t){case"titleAngle":case"labelAngle":return e===G(n[t]);case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Fd(r,i))return!0}return e===n[t]}(o,n,r,t,e),s=ju(n,t.config,e,i.get("orient"),t.getScaleComponent(e).get("type"));a||void 0===s?i.set(n,o,a):E(["grid","orient"],n)&&s&&i.set(n,s,!1)}});const o=null!=(n=r.encoding)?n:{},a=Gs.reduce((n,r)=>{var a;if(!i.hasAxisPart(r))return n;const s=Qu(null!=(a=o[r])?a:{},t),l="labels"===r?function(e,t,n){var r;const i=null!=(r=e.fieldDef(t))?r:"x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0,o=e.axis(t),a=e.config;let s={};if(Ro(i)){const n=e.getScaleComponent(t).get("type")===ai.UTC,r=Vi("datum.value",i.timeUnit,o.format,a.axis.shortTimeLabels,null,n);r&&(s.text={signal:r})}return s=Object.assign(Object.assign({},s),n),0===N(s).length?void 0:s}(t,e,s):s;return void 0!==l&&N(l).length>0&&(n[r]={update:l}),n},{});return N(a).length>0&&i.set("encode",a,!!r.encoding||void 0!==r.labelAngle),i}function Ud(e,t,n,{graticule:r}){var i,o;const a=fe(e)?Object.assign({},e):{type:e},s=null!=(i=a.orient)?i:Fi("orient",a,n);return a.orient=function(e,t,n){switch(e){case Z:case ie:case oe:case te:case Q:case K:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case X:if(fo(r)&&(qo(r.bin)||fo(i)&&i.aggregate&&!r.aggregate))return"vertical";if(fo(i)&&(qo(i.bin)||fo(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&fo(r)&&r.type===ti&&!Uo(r.bin))return"horizontal";if(!a&&fo(i)&&i.type===ti&&!Uo(i.bin))return"vertical"}case ee:if(o&&a)return;case Y:if(a)return fo(i)&&qo(i.bin)?"horizontal":"vertical";if(o)return fo(r)&&qo(r.bin)?"vertical":"horizontal";if(e===ee){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case J:case ne:{const t=fo(r)&&_o(r),o=fo(i)&&_o(i);if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,o=i,a=t.type===ri,s=o.type===ri;return a&&!s?"tick"!==e?"vertical":"horizontal":!a&&s?"tick"!==e?"horizontal":"vertical":!t.aggregate&&o.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!o.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}}return"vertical"}(a.type,t,s),void 0!==s&&s!==a.orient&&wr(yr.orientOverridden(a.orient,s)),void 0===H(a.opacity,Fi("opacity",a,n))&&(a.opacity=function(e,t){if(E([Z,ne,ie,oe],e)&&!Go(t))return.7;return}(a.type,t)),void 0===a.filled&&(a.filled=!r&&function(e,t){const n=Fi("filled",e,t),r=e.type;return H(n,r!==Z&&r!==J&&r!==ee)}(a,n)),void 0===(null!=(o=a.cursor)?o:Fi("cursor",a,n))&&(a.cursor=function(e,t,n){if(t.href||e.href||Fi("href",e,n))return"pointer";return e.cursor}(a,t,n)),a}function qd(e,t,n){var r,i,o,a;const{config:s,encoding:l,markDef:u}=e,c="x"===t?"x2":"y2",f="x"===t?"width":"height",d=l[t],p=l[c],h=e.getScaleComponent(t),m=h?h.get("type"):void 0,g=e.scaleName(t),b=u.orient,y=null!=(a=null!=(o=null!=(i=null!=(r=l[f])?r:l.size)?i:u[f])?o:u.size)?a:Fi("size",u,s,{vgChannel:f}),v="x"===t?"vertical"===b:"horizontal"===b;if(fo(d)&&(Uo(d.bin)||qo(d.bin)||d.timeUnit&&!p)&&!y&&!yi(m)){return function({fieldDef:e,fieldDef2:t,channel:n,band:r,scaleName:i,markDef:o,spacing:a=0,reverse:s}){const l={x:s?a:0,x2:s?0:a,y:s?0:a,y2:s?a:0},u=n===Ce?Me:Ie;return Uo(e.bin)||e.timeUnit?{[u]:rl({channel:n,fieldDef:e,scaleName:i,markDef:o,band:(1-r)/2,offset:l[`${n}2`]}),[n]:rl({channel:n,fieldDef:e,scaleName:i,markDef:o,band:1-(1-r)/2,offset:l[n]})}:qo(e.bin)&&fo(t)?{[u]:il(e,i,{},{offset:l[`${n}2`]}),[n]:il(t,i,{},{offset:l[n]})}:void wr(yr.channelRequiredForBinned(u))}({fieldDef:d,fieldDef2:p,channel:t,markDef:u,scaleName:g,band:so(t,d,void 0,u,s),spacing:H(u.binSpacing,s[n].binSpacing),reverse:h.get("reverse")})}if((fo(d)&&yi(m)||v)&&!p){if(fo(d)&&m===ai.BAND){return function(e,t,n,r){var i;const o=n.scaleName(t),a="x"===t?"width":"height";if(null!=n.encoding.size||null!=n.markDef.size||void 0!==(null===(i=r)||void 0===i?void 0:i.value)){if(n.markDef.orient){const i={[t+"c"]:il(e,o,{},{band:.5})};if(Co(n.encoding.size))return Object.assign(Object.assign({},i),vl("size",n,{vgChannel:a}));if(mo(n.encoding.size))return Object.assign(Object.assign({},i),vl("size",n,{vgChannel:a}));if(void 0!==n.markDef.size)return Object.assign(Object.assign({},i),{[a]:{value:n.markDef.size}});if(r&&void 0!==r.value)return Object.assign(Object.assign({},i),{[a]:r})}else wr(yr.cannotApplySizeToNonOrientedMark(n.markDef.type))}const{band:s=1}=e;return{[t]:il(e,o,{binSuffix:"range"},{band:(1-s)/2}),[a]:null!=r?r:ol(o,s)}}(d,t,e,$d(n,u,f,g,h,s,bo(d)?d.band:void 0))}return function(e,t,n,r){const i="x"===e?"xc":"yc",o="x"===e?"width":"height";return Object.assign(Object.assign({},Ol(e,t,n,{vgChannel:i})),vl("size",t,{defaultRef:r,vgChannel:o}))}(t,e,fl(e[f]),$d(n,u,f,g,h,s))}return Tl(t,e,{defaultRef:"zeroOrMax",defaultRef2:"zeroOrMin"})}function $d(e,t,n,r,i,o,s){const l=H(t[n],t.size,Fi("size",t,o,{vgChannel:n}));if(void 0!==l)return{value:l};if(i){const t=i.get("type");if("point"===t||"band"===t){if(void 0!==o[e].discreteBandSize)return{value:o[e].discreteBandSize};if(t===ai.POINT){const e=i.get("range");return $s(e)&&Object(a.E)(e.step)?{value:e.step-2}:{value:Ba-2}}return ol(r,s)}return{value:o[e].continuousBandSize}}const u=La(o.view,n);return{value:H(o[e].discreteBandSize,u-2)}}function Hd(e,t){const{config:n,width:r,height:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore"})),Ol("x",e,fl(r))),Ol("y",e,fl(i))),vl("size",e)),function(e,t,n){if(n)return{shape:{value:n}};return vl("shape",e)}(e,0,t))}function Wd(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",o=e.getScaleComponent("horizontal"===r?"x":"y"),s=H(n[i],n.size,Fi("size",n,t,{vgChannel:i}),t.tick.bandSize);if(void 0!==s)return s;{const e=o?o.get("range"):void 0;return e&&$s(e)&&Object(a.E)(e.step)?3*e.step/4:3*La(t.view,i)/4}}const Vd={area:{vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore"})),Sl("x",e,{defaultRef:"zeroOrMin",defaultRef2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),Sl("y",e,{defaultRef:"zeroOrMin",defaultRef2:"zeroOrMin",range:"vertical"===e.markDef.orient})),yl(e))},bar:{vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),qd(e,"x","bar")),qd(e,"y","bar"))},circle:{vgMark:"symbol",encodeEntry:e=>Hd(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&fo(n)&&n.type===oi?{field:vo(n,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore"})),qd(e,"x","image")),qd(e,"y","image")),wl(e,"url"))},line:{vgMark:"line",encodeEntry:e=>{const{width:t,height:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore"})),Ol("x",e,fl(t))),Ol("y",e,fl(n))),vl("size",e,{vgChannel:"strokeWidth"})),yl(e))}},point:{vgMark:"symbol",encodeEntry:e=>Hd(e)},rect:{vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),qd(e,"x","rect")),qd(e,"y","rect"))},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t,width:n,height:r}=e,i=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),Sl("x",e,{defaultRef:"horizontal"===i?"zeroOrMin":fl(n),defaultRef2:"zeroOrMax",range:"vertical"!==i})),Sl("y",e,{defaultRef:"vertical"===i?"zeroOrMin":fl(r),defaultRef2:"zeroOrMax",range:"horizontal"!==i})),vl("size",e,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:e=>Hd(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n,width:r,height:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore"})),Ol("x",e,fl(r))),Ol("y",e,fl(i))),wl(e)),vl("size",e,{vgChannel:"fontSize"})),gl("align",function(e,t,n){var r;if(void 0===(null!==(r=e.align)&&void 0!==r?r:Fi("align",e,n)))return"center";return}(e.markDef,0,t))),gl("baseline",function(e,t,n){var r;if(void 0===(null!==(r=e.baseline)&&void 0!==r?r:Fi("baseline",e,n)))return"middle";return}(e.markDef,0,t)))}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n,width:r,height:i}=e,o=n.orient,a="horizontal"===o?"width":"height",s="horizontal"===o?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),Ol("x",e,fl(r),{vgChannel:"xc"})),Ol("y",e,fl(i),{vgChannel:"yc"})),vl("size",e,{defaultValue:Wd(e),vgChannel:a})),{[s]:{value:H(n.thickness,t.tick.thickness)}})}},trail:{vgMark:"trail",encodeEntry:e=>{const{width:t,height:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore"})),Ol("x",e,fl(t))),Ol("y",e,fl(n))),vl("size",e)),yl(e))}}};function Gd(e){return E([J,Y,re],e.mark)?function(e){const t=Qo(e.mark,e.encoding),n=Xd(e,{fromPrefix:t.length>0?Yd:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Yd+e.requestDataName(ws),data:e.requestDataName(ws),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(e):Xd(e)}const Yd="faceted_path_";function Xd(e,t={fromPrefix:""}){const n=e.mark,r=H(e.markDef.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),i=zi(e.markDef),o=e.encoding.key,s=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!Object(a.A)(s)&&mo(s)&&O(s.value)||!s&&O(i.order)||O(Fi("order",i,o)))){if((Object(a.A)(s)||fo(s))&&!n)return Gi(s,{expr:"datum"});if(le(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(fo(r)){const t=r.sort;if(Object(a.A)(t))return{field:vo(r,{prefix:n,suffix:"sort_index",expr:"datum"})};if(to(t))return{field:vo({aggregate:Go(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})};if(eo(t)){return{field:vo(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}}return{field:vo(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}(e),l=function(e){if(!e.component.selection)return null;const t=N(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=N(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}(e),u=Vd[n].postEncodingTransform?Vd[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:Vd[n].vgMark},r?{clip:!0}:{}),i?{style:i}:{}),o?{key:o.field}:{}),s?{sort:s}:{}),l||{}),{from:{data:t.fromPrefix+e.requestDataName(ws)},encode:{update:Vd[n].encodeEntry(e)}}),u?{transform:u}:{})]}class Kd extends Jf{constructor(e,t,n,r={},i,o){var a;super(e,"unit",t,n,o,i,void 0,e.view),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const s=fe(e.mark)?e.mark.type:e.mark,l=function(e,t){return kd(e,t)}(null!=(a=e.encoding)?a:{},i);this.markDef=Ud(e.mark,l,o,{graticule:e.data&&_s(e.data)});const u=this.encoding=Xo(l,this.markDef);this.size=function({encoding:e,size:t}){for(const n of Dt){const r=Rt(n),i=Po(e[n]);Da(t[r])&&i&&_o(i)&&(delete t[r],wr(yr.stepDropped(r)))}return t}({encoding:u,size:Object.assign(Object.assign(Object.assign({},r),e.width?{width:e.width}:{}),e.height?{height:e.height}:{})}),this.stack=Qa(s,u),this.specifiedScales=this.initScales(s,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegend(u),this.specifiedProjection=e.projection,this.selection=e.selection}get hasProjection(){const{encoding:e}=this,t=this.mark===ae,n=e&&rt.some(t=>fo(e[t]));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return Yt.reduce((e,n)=>{let r,i;const o=t[n];return fo(o)?(r=o,i=o.scale):co(o)&&(r=o.condition,i=o.condition.scale),r&&(e[n]=null!=i?i:{}),e},{})}initAxes(e){return[Ce,Ne].reduce((t,n)=>{const r=e[n];if(fo(r)||n===Ce&&fo(e.x2)||n===Ne&&fo(e.y2)){const e=fo(r)?r.axis:null;null!==e&&(t[n]=Object.assign({},e))}return t},{})}initLegend(e){return Vt.reduce((t,n)=>{const r=e[n];if(r){const e=fo(r)?r.legend:co(r)?r.condition.legend:null;null!==e&&!1!==e&&function(e){switch(e){case Fe:case Be:case Ue:case $e:case qe:case He:case Ge:return!0;case We:case Ve:return!1}}(n)&&(t[n]=Object.assign({},e))}return t},{})}parseData(){this.component.data=Pd(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of Dt){const i=Rt(r);if(t[i]){const e=t[i];n.layoutSize.set(i,Da(e)?"step":e,!0)}else{const t=_d(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){var n;const r={},i=e.config.selection;for(const o in t){if(!Object(a.v)(t,o))continue;const s=y(t[o]),l=i[s.type],{fields:u,encodings:c}=l,f=Object(ye.b)(l,["fields","encodings"]);for(const e in f)"encodings"===e&&s.fields||"fields"===e&&s.encodings||("mark"===e&&(s[e]=Object.assign(Object.assign({},f[e]),s[e])),void 0!==s[e]&&!0!==s[e]||(s[e]=null!=(n=f[e])?n:s[e]));const d=D(o),p=r[d]=Object.assign(Object.assign({},s),{name:d,events:Object(a.H)(s.on)?Object(Js.a)(s.on,"scope"):s.on});Kl(p,n=>{n.parse&&n.parse(e,p,s,t[o])})}return r}(this,this.selection)}parseMarkGroup(){this.component.mark=Gd(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,Dt.reduce((t,n)=>(e.component.scales[n]&&e.axis(n)&&(t[n]=[Bd(n,e)]),t),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;if(du(e,(r,i)=>{const o=r.name,s=Object(a.Y)(o+su);if(!t.filter(e=>e.name===o).length){const e="global"===r.resolve?"union":r.resolve,n="multi"===r.type?", true)":")";t.push({name:r.name,update:`${cu}(${s}, ${Object(a.Y)(e)}${n}`})}n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),Kl(r,n=>{n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))})}),n){t.filter(e=>"unit"===e.name).length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return Ql(t)}(this,e)}assembleSignals(){return[...Ou(this),...(e=this,t=[],du(e,(n,r)=>{const i=n.name;let o=r.modifyExpr(e,n);t.push(...r.signals(e,n)),Kl(n,r=>{r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))}),t.push({name:i+uu,update:`modify(${Object(a.Y)(n.name+su)}, ${o})`})}),Ql(t))];var e,t}assembleSelectionData(e){return function(e,t){const n=[...t];return du(e,t=>{const r={name:t.name+su};if(t.init){const n=t.project.items.map(e=>{const{signals:t}=e;return Object(ye.b)(e,["signals"])}),i=t.init.map(e=>Jl(e,!1));r.values="interval"===t.type?[{unit:pu(e,{escape:!1}),fields:n,values:i}]:i.map(t=>({unit:pu(e,{escape:!1}),fields:n,values:t}))}n.filter(e=>e.name===t.name+su).length||n.push(r)}),n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return Xu(this)}assembleMarks(){var e;let t=null!=(e=this.component.mark)?e:[];return this.parent&&Xf(this.parent)||(t=Zl(this,t)),t.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Vo(this.encoding,e)}fieldDef(e){return Co(this.encoding[e])}}class Jd extends Kf{constructor(e,t,n,r,i,o){super(e,"layer",t,n,o,i,e.resolve,e.view);const a=Object.assign(Object.assign(Object.assign({},r),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});this.children=e.layer.map((e,t)=>{if(Ya(e))return new Jd(e,this,this.getName("layer_"+t),a,i,o);if(ge(e))return new Kd(e,this,this.getName("layer_"+t),a,i,o);throw new Error(yr.invalidSpec(e))})}parseData(){this.component.data=Pd(this);for(const e of this.children)e.parseData()}parseLayoutSize(){gd(this)}parseSelections(){this.component.selection={};for(const e of this.children)e.parseSelections(),N(e.component.selection).forEach(t=>{this.component.selection[t]=e.component.selection[t]})}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const t of e.children){t.parseAxesAndHeaders();for(const i of N(t.component.axes))r.axis[i]=tc(e.component.resolve,i),"shared"===r.axis[i]&&(n[i]=zd(n[i],t.component.axes[i]),n[i]||(r.axis[i]="independent",delete n[i]))}for(const o of[Ce,Ne]){for(const a of e.children)if(a.component.axes[o]){if("independent"===r.axis[o]){n[o]=(t=n[o],null!=t?t:[]).concat(a.component.axes[o]);for(const e of a.component.axes[o]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(i[t]>0&&!n){const n=Rd[t];i[t]>i[n]&&e.set("orient",n,!1)}i[t]++}}delete a.component.axes[o]}if("independent"===r.axis[o]&&n[o]&&n[o].length>1)for(const e of n[o])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((e,t)=>t.assembleSelectionTopLevelSignals(e),e)}assembleSignals(){return this.children.reduce((e,t)=>e.concat(t.assembleSignals()),Ou(this))}assembleLayoutSignals(){return this.children.reduce((e,t)=>e.concat(t.assembleLayoutSignals()),Xu(this))}assembleSelectionData(e){return this.children.reduce((e,t)=>t.assembleSelectionData(e),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle())return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)Wf(n)&&(t=Zl(n,t));return t}(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,t)=>e.concat(t.assembleLegends()),Tc(this))}}class Zd extends Cd{constructor(e,t,n,r,i){super(e,"repeat",t,n,i,r,e.resolve),e.resolve&&e.resolve.axis&&("shared"===e.resolve.axis.x||"shared"===e.resolve.axis.y)&&wr(yr.REPEAT_CANNOT_SHARE_AXIS),this.repeat=e.repeat,this.children=this._initChildren(e,this.repeat,r,i)}_initChildren(e,t,n,r){const i=[],o=!Object(a.A)(t)&&t.row||[n?n.row:null],s=!Object(a.A)(t)&&t.column||[n?n.column:null],l=Object(a.A)(t)&&t||[n?n.repeat:null];for(const t of l)for(const n of o)for(const o of s){const a=(t?`__repeat_repeat_${t}`:"")+(n?`__repeat_row_${n}`:"")+(o?`__repeat_column_${o}`:""),s={repeat:t,row:n,column:o};i.push(Qd(e.spec,this,this.getName("child"+a),void 0,s,r))}return i}parseLayoutSize(){bd(this)}assembleDefaultLayout(){const{repeat:e}=this,t=Object(a.A)(e)?void 0:e.column?e.column.length:1;return Object.assign(Object.assign({},t?{columns:t}:{}),{bounds:"full",align:"all"})}}function Qd(e,t,n,r,i,o){if(io(e))return new Td(e,t,n,i,o);if(Ya(e))return new Jd(e,t,n,r,i,o);if(ge(e))return new Kd(e,t,n,r,i,o);if(Ia(e))return new Zd(e,t,n,i,o);if(function(e){return Na(e)||Ma(e)||Ca(e)}(e))return new Nd(e,t,n,i,o);throw new Error(yr.invalidSpec(e))}function ep(e,t={}){var n;t.logger&&(n=t.logger,xr=n),t.fieldTitle&&ko(t.fieldTitle);try{const n=qa(Object(a.M)({},t.config,e.config)),r=us(e,n),i=Qd(r,null,"",void 0,void 0,n);return i.parse(),function(e,t){Lc(e.sources);let n=0,r=0;for(let r=0;r<gf&&xf(e,t);r++)n++;e.sources.map(lf);for(let n=0;n<gf&&xf(e,t);n++)r++;Lc(e.sources),Math.max(n,r)===gf&&wr(`Maximum optimization runs(${gf}) reached.`)}(i.component.data,i),{spec:function(e,t,n={},r){const i=e.config?Va(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){var n,r;const i=[],o=dd(i);let a=0;e.sources.forEach(e=>{e.hasName()||(e.dataName=`source_${a++}`);const t=e.assemble();o(e,t)}),i.forEach(e=>{0===e.transform.length&&delete e.transform});let s=0;for(const[e,t]of i.entries())0!==(n=t.transform,null!=n?n:[]).length||t.source||i.splice(s++,0,i.splice(e,1)[0]);for(const t of i)for(const n of null!=(r=t.transform)?r:[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of i)e.name in t&&(e.values=t[e.name]);return i}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();return c=c.filter(e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),s?{title:s}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),r?{usermeta:r}:{})}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");Object(a.H)(t)&&(t={type:t});if(i&&o&&(s=t.type,"fit"===s||"fit-x"===s||"fit-y"===s))if("step"===i&&"step"===o)wr(yr.droppingFit()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";wr(yr.droppingFit(zt(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${zt(e)}`:"fit"}(n)}var s;return Object.assign(Object.assign(Object.assign({},1===N(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),hs(n)),hs(e))}(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&_r(),t.fieldTitle&&ko(Oo)}}const tp=new class extends Xa{mapUnit(e,{config:t}){if(e.encoding){const{encoding:n,transform:r}=e,{bins:i,timeUnits:o,aggregate:a,groupby:s,encoding:l}=Yo(n,t),u=[...r||[],...i,...o,...a.length?[{aggregate:a,groupby:s}]:[]];return Object.assign(Object.assign(Object.assign({},e),u.length>0?{transform:u}:{}),{encoding:l})}return e}};function np(e,t){return tp.map(e,{config:t})}n.d(t,"version",(function(){return rp})),n.d(t,"compile",(function(){return ep})),n.d(t,"extractTransforms",(function(){return np})),n.d(t,"normalize",(function(){return us}));const rp=o.version},function(e,t,n){(function(n){var r;t=e.exports=p,r="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],s=t.src=[],l=t.tokens={},u=0;function c(e){l[e]=u++}c("NUMERICIDENTIFIER"),s[l.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),s[l.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),s[l.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),s[l.MAINVERSION]="("+s[l.NUMERICIDENTIFIER]+")\\.("+s[l.NUMERICIDENTIFIER]+")\\.("+s[l.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),s[l.MAINVERSIONLOOSE]="("+s[l.NUMERICIDENTIFIERLOOSE]+")\\.("+s[l.NUMERICIDENTIFIERLOOSE]+")\\.("+s[l.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),s[l.PRERELEASEIDENTIFIER]="(?:"+s[l.NUMERICIDENTIFIER]+"|"+s[l.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),s[l.PRERELEASEIDENTIFIERLOOSE]="(?:"+s[l.NUMERICIDENTIFIERLOOSE]+"|"+s[l.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),s[l.PRERELEASE]="(?:-("+s[l.PRERELEASEIDENTIFIER]+"(?:\\."+s[l.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),s[l.PRERELEASELOOSE]="(?:-?("+s[l.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+s[l.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),s[l.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),s[l.BUILD]="(?:\\+("+s[l.BUILDIDENTIFIER]+"(?:\\."+s[l.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),s[l.FULLPLAIN]="v?"+s[l.MAINVERSION]+s[l.PRERELEASE]+"?"+s[l.BUILD]+"?",s[l.FULL]="^"+s[l.FULLPLAIN]+"$",c("LOOSEPLAIN"),s[l.LOOSEPLAIN]="[v=\\s]*"+s[l.MAINVERSIONLOOSE]+s[l.PRERELEASELOOSE]+"?"+s[l.BUILD]+"?",c("LOOSE"),s[l.LOOSE]="^"+s[l.LOOSEPLAIN]+"$",c("GTLT"),s[l.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),s[l.XRANGEIDENTIFIERLOOSE]=s[l.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),s[l.XRANGEIDENTIFIER]=s[l.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),s[l.XRANGEPLAIN]="[v=\\s]*("+s[l.XRANGEIDENTIFIER]+")(?:\\.("+s[l.XRANGEIDENTIFIER]+")(?:\\.("+s[l.XRANGEIDENTIFIER]+")(?:"+s[l.PRERELEASE]+")?"+s[l.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),s[l.XRANGEPLAINLOOSE]="[v=\\s]*("+s[l.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[l.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[l.XRANGEIDENTIFIERLOOSE]+")(?:"+s[l.PRERELEASELOOSE]+")?"+s[l.BUILD]+"?)?)?",c("XRANGE"),s[l.XRANGE]="^"+s[l.GTLT]+"\\s*"+s[l.XRANGEPLAIN]+"$",c("XRANGELOOSE"),s[l.XRANGELOOSE]="^"+s[l.GTLT]+"\\s*"+s[l.XRANGEPLAINLOOSE]+"$",c("COERCE"),s[l.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),a[l.COERCERTL]=new RegExp(s[l.COERCE],"g"),c("LONETILDE"),s[l.LONETILDE]="(?:~>?)",c("TILDETRIM"),s[l.TILDETRIM]="(\\s*)"+s[l.LONETILDE]+"\\s+",a[l.TILDETRIM]=new RegExp(s[l.TILDETRIM],"g");c("TILDE"),s[l.TILDE]="^"+s[l.LONETILDE]+s[l.XRANGEPLAIN]+"$",c("TILDELOOSE"),s[l.TILDELOOSE]="^"+s[l.LONETILDE]+s[l.XRANGEPLAINLOOSE]+"$",c("LONECARET"),s[l.LONECARET]="(?:\\^)",c("CARETTRIM"),s[l.CARETTRIM]="(\\s*)"+s[l.LONECARET]+"\\s+",a[l.CARETTRIM]=new RegExp(s[l.CARETTRIM],"g");c("CARET"),s[l.CARET]="^"+s[l.LONECARET]+s[l.XRANGEPLAIN]+"$",c("CARETLOOSE"),s[l.CARETLOOSE]="^"+s[l.LONECARET]+s[l.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),s[l.COMPARATORLOOSE]="^"+s[l.GTLT]+"\\s*("+s[l.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),s[l.COMPARATOR]="^"+s[l.GTLT]+"\\s*("+s[l.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),s[l.COMPARATORTRIM]="(\\s*)"+s[l.GTLT]+"\\s*("+s[l.LOOSEPLAIN]+"|"+s[l.XRANGEPLAIN]+")",a[l.COMPARATORTRIM]=new RegExp(s[l.COMPARATORTRIM],"g");c("HYPHENRANGE"),s[l.HYPHENRANGE]="^\\s*("+s[l.XRANGEPLAIN]+")\\s+-\\s+("+s[l.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),s[l.HYPHENRANGELOOSE]="^\\s*("+s[l.XRANGEPLAINLOOSE]+")\\s+-\\s+("+s[l.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),s[l.STAR]="(<|>)?=?\\s*\\*";for(var f=0;f<u;f++)r(f,s[f]),a[f]||(a[f]=new RegExp(s[f]));function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof p)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t.loose?a[l.LOOSE]:a[l.FULL]).test(e))return null;try{return new p(e,t)}catch(e){return null}}function p(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof p){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof p))return new p(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?a[l.LOOSE]:a[l.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=d,t.valid=function(e,t){var n=d(e,t);return n?n.version:null},t.clean=function(e,t){var n=d(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=p,p.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},p.prototype.toString=function(){return this.version},p.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof p||(e=new p(e,this.options)),this.compareMain(e)||this.comparePre(e)},p.prototype.compareMain=function(e){return e instanceof p||(e=new p(e,this.options)),m(this.major,e.major)||m(this.minor,e.minor)||m(this.patch,e.patch)},p.prototype.comparePre=function(e){if(e instanceof p||(e=new p(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return m(n,i)}while(++t)},p.prototype.compareBuild=function(e){e instanceof p||(e=new p(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return m(n,i)}while(++t)},p.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new p(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(v(e,t))return null;var n=d(e),r=d(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return i+a;return o},t.compareIdentifiers=m;var h=/^[0-9]+$/;function m(e,t){var n=h.test(e),r=h.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function g(e,t,n){return new p(e,n).compare(new p(t,n))}function b(e,t,n){return g(e,t,n)>0}function y(e,t,n){return g(e,t,n)<0}function v(e,t,n){return 0===g(e,t,n)}function x(e,t,n){return 0!==g(e,t,n)}function _(e,t,n){return g(e,t,n)>=0}function w(e,t,n){return g(e,t,n)<=0}function O(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return v(e,n,r);case"!=":return x(e,n,r);case">":return b(e,n,r);case">=":return _(e,n,r);case"<":return y(e,n,r);case"<=":return w(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function E(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof E){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof E))return new E(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===k?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return m(t,e)},t.major=function(e,t){return new p(e,t).major},t.minor=function(e,t){return new p(e,t).minor},t.patch=function(e,t){return new p(e,t).patch},t.compare=g,t.compareLoose=function(e,t){return g(e,t,!0)},t.compareBuild=function(e,t,n){var r=new p(e,n),i=new p(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return g(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=b,t.lt=y,t.eq=v,t.neq=x,t.gte=_,t.lte=w,t.cmp=O,t.Comparator=E;var k={};function S(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof S)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new S(e.raw,t);if(e instanceof E)return new S(e.value,t);if(!(this instanceof S))return new S(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function T(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function j(e){return!e||"x"===e.toLowerCase()||"*"===e}function A(e,t,n,r,i,o,a,s,l,u,c,f,d){return((t=j(n)?"":j(r)?">="+n+".0.0":j(i)?">="+n+"."+r+".0":">="+t)+" "+(s=j(l)?"":j(u)?"<"+(+l+1)+".0.0":j(c)?"<"+l+"."+(+u+1)+".0":f?"<="+l+"."+u+"."+c+"-"+f:"<="+s)).trim()}function P(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==k&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function C(e,t,n){try{t=new S(t,n)}catch(e){return!1}return t.test(e)}function N(e,t,n,r){var i,o,a,s,l;switch(e=new p(e,r),t=new S(t,r),n){case">":i=b,o=w,a=y,s=">",l=">=";break;case"<":i=y,o=_,a=b,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(C(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var c=t.set[u],f=null,d=null;if(c.forEach((function(e){e.semver===k&&(e=new E(">=0.0.0")),f=f||e,d=d||e,i(e.semver,f.semver,r)?f=e:a(e.semver,d.semver,r)&&(d=e)})),f.operator===s||f.operator===l)return!1;if((!d.operator||d.operator===s)&&o(e,d.semver))return!1;if(d.operator===l&&a(e,d.semver))return!1}return!0}E.prototype.parse=function(e){var t=this.options.loose?a[l.COMPARATORLOOSE]:a[l.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new p(n[2],this.options.loose):this.semver=k},E.prototype.toString=function(){return this.value},E.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===k||e===k)return!0;if("string"==typeof e)try{e=new p(e,this.options)}catch(e){return!1}return O(e,this.operator,this.semver,this.options)},E.prototype.intersects=function(e,t){if(!(e instanceof E))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new S(e.value,t),C(this.value,n,t));if(""===e.operator)return""===e.value||(n=new S(this.value,t),C(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=O(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=O(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&a||s||l},t.Range=S,S.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},S.prototype.toString=function(){return this.range},S.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];e=e.replace(n,A),r("hyphen replace",e),e=e.replace(a[l.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,a[l.COMPARATORTRIM]),e=(e=(e=e.replace(a[l.TILDETRIM],"$1~")).replace(a[l.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?a[l.COMPARATORLOOSE]:a[l.COMPARATOR],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?a[l.CARETLOOSE]:a[l.CARET];return e.replace(n,(function(t,n,i,o,a){var s;return r("caret",e,t,n,i,o,a),j(n)?s="":j(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":j(o)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?a[l.TILDELOOSE]:a[l.TILDE];return e.replace(n,(function(t,n,i,o,a){var s;return r("tilde",e,t,n,i,o,a),j(n)?s="":j(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":j(o)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return e.replace(n,(function(n,i,o,a,s,l){r("xRange",e,n,i,o,a,s,l);var u=j(o),c=u||j(a),f=c||j(s),d=f;return"="===i&&d&&(i=""),l=t.includePrerelease?"-0":"",u?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(c&&(a=0),s=0,">"===i?(i=">=",c?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):"<="===i&&(i="<",c?o=+o+1:a=+a+1),n=i+o+"."+a+"."+s+l):c?n=">="+o+".0.0"+l+" <"+(+o+1)+".0.0"+l:f&&(n=">="+o+"."+a+".0"+l+" <"+o+"."+(+a+1)+".0"+l),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(a[l.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o=o.map((function(e){return new E(e,this.options)}),this)},S.prototype.intersects=function(e,t){if(!(e instanceof S))throw new TypeError("a Range is required");return this.set.some((function(n){return T(n,t)&&e.set.some((function(e){return T(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new S(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},S.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new p(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(P(this.set[t],e,this.options))return!0;return!1},t.satisfies=C,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new S(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new p(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new S(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new p(r=e,n)))})),r},t.minVersion=function(e,t){e=new S(e,t);var n=new p("0.0.0");if(e.test(n))return n;if(n=new p("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new p(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!b(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new S(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return N(e,t,"<",n)},t.gtr=function(e,t,n){return N(e,t,">",n)},t.outside=N,t.prerelease=function(e,t){var n=d(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new S(e,n),t=new S(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof p)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=a[l.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),a[l.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;a[l.COERCERTL].lastIndex=-1}else n=e.match(a[l.COERCE]);if(null===n)return null;return d(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}).call(this,n(55))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r=n(35),i=n(47),o=n(362)(!1),a=n(115)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(191);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(36),i=n(21),o=n(50);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(365);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(32)&&!n(50)((function(){return 7!=Object.defineProperty(n(195)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(49),i=n(31).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){e.exports={default:n(366),__esModule:!0}},function(e,t,n){var r=n(35),i=n(64),o=n(115)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(368),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(201),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(371)),i=a(n(382)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){"use strict";var r=n(78),i=n(36),o=n(203),a=n(48),s=n(119),l=n(375),u=n(121),c=n(197),f=n(51)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,g,b){l(n,t,h);var y,v,x,_=function(e){if(!d&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",O="values"==m,E=!1,k=e.prototype,S=k[f]||k["@@iterator"]||m&&k[m],T=S||_(m),j=m?O?_("entries"):T:void 0,A="Array"==t&&k.entries||S;if(A&&(x=c(A.call(new e)))!==Object.prototype&&x.next&&(u(x,w,!0),r||"function"==typeof x[f]||a(x,f,p)),O&&S&&"values"!==S.name&&(E=!0,T=function(){return S.call(this)}),r&&!b||!d&&!E&&k[f]||a(k,f,T),s[t]=T,s[w]=p,m)if(y={values:O?T:_("values"),keys:g?T:_("keys"),entries:j},b)for(v in y)v in k||o(k,v,y[v]);else i(i.P+i.F*(d||E),t,y);return y}},function(e,t,n){e.exports=n(48)},function(e,t,n){var r=n(189),i=n(117).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(81),i=n(80),o=n(47),a=n(118),s=n(35),l=n(194),u=Object.getOwnPropertyDescriptor;t.f=n(32)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(392)),i=a(n(396)),o=a(n(201));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";e.exports=n(399)},function(e,t,n){"use strict";var r=n(82),i=n(29),o=n(209),a=(n(211),n(400));n(83),n(401);function s(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||o}function l(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||o}function u(){}s.prototype.isReactComponent={},s.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},u.prototype=s.prototype,l.prototype=new u,l.prototype.constructor=l,i(l.prototype,s.prototype),l.prototype.isPureReactComponent=!0,e.exports={Component:s,PureComponent:l}},function(e,t,n){"use strict";n(125);var r={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}};e.exports=r},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";e.exports={current:null}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";e.exports=n(411)},function(e,t,n){"use strict";var r=n(419),i=n(227),o=n(230),a=n(228);e.exports={Parser:r,ProcessingInstructions:i,IsValidNodeDefinitions:o,ProcessNodeDefinitions:a}},function(e,t,n){var r=n(38),i=n(131),o=n(436),a=!{toString:null}.propertyIsEnumerable("toString"),s=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],l=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),u=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},c="function"!=typeof Object.keys||l?r((function(e){if(Object(e)!==e)return[];var t,n,r=[],c=l&&o(e);for(t in e)!i(t,e)||c&&"length"===t||(r[r.length]=t);if(a)for(n=s.length-1;n>=0;)i(t=s[n],e)&&!u(r,t)&&(r[r.length]=t),n-=1;return r})):r((function(e){return Object(e)!==e?[]:Object.keys(e)}));e.exports=c},function(e,t,n){var r=n(130),i=n(38),o=n(22),a=n(439),s=o((function(e,t){return 1===e?i(t):r(e,a(e,[],t))}));e.exports=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(219)),s=n(449),l=new Set(["input","option","optgroup","select","button","datalist","textarea"]),u=new Set(["p"]),c={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:u,h1:u,h2:u,h3:u,h4:u,h5:u,h6:u,select:l,input:l,output:l,button:l,datalist:l,textarea:l,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:u,article:u,aside:u,blockquote:u,details:u,div:u,dl:u,fieldset:u,figcaption:u,figure:u,footer:u,form:u,header:u,hr:u,main:u,nav:u,ol:u,pre:u,section:u,table:u,ul:u,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},f=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),d=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),h=/\s|\//,m=function(e){function t(n,r){var i=e.call(this)||this;return i._tagname="",i._attribname="",i._attribvalue="",i._attribs=null,i._stack=[],i._foreignContext=[],i.startIndex=0,i.endIndex=null,i.parseChunk=t.prototype.write,i.done=t.prototype.end,i._options=r||{},i._cbs=n||{},i._tagname="",i._attribname="",i._attribvalue="",i._attribs=null,i._stack=[],i._foreignContext=[],i.startIndex=0,i.endIndex=null,i._lowerCaseTagNames="lowerCaseTags"in i._options?!!i._options.lowerCaseTags:!i._options.xmlMode,i._lowerCaseAttributeNames="lowerCaseAttributeNames"in i._options?!!i._options.lowerCaseAttributeNames:!i._options.xmlMode,i._tokenizer=new(i._options.Tokenizer||a.default)(i._options,i),i._cbs.onparserinit&&i._cbs.onparserinit(i),i}return i(t,e),t.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},t.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e)},t.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&e in c)for(var t=void 0;c[e].has(t=this._stack[this._stack.length-1]);this.onclosetag(t));!this._options.xmlMode&&f.has(e)||(this._stack.push(e),d.has(e)?this._foreignContext.push(!0):p.has(e)&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={})},t.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&f.has(this._tagname)&&this._cbs.onclosetag(this._tagname),this._tagname=""},t.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),(d.has(e)||p.has(e))&&this._foreignContext.pop(),!this._stack.length||!this._options.xmlMode&&f.has(e))this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else{var t=this._stack.lastIndexOf(e);if(-1!==t)if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=t;else"p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag())}},t.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},t.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop())},t.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e},t.prototype.onattribdata=function(e){this._attribvalue+=e},t.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},t.prototype._getInstructionName=function(e){var t=e.search(h),n=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(n=n.toLowerCase()),n},t.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e)}},t.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e)}},t.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend()},t.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]")},t.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e)},t.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;e>0;this._cbs.onclosetag(this._stack[--e]));this._cbs.onend&&this._cbs.onend()},t.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.write=function(e){this._tokenizer.write(e)},t.prototype.end=function(e){this._tokenizer.end(e)},t.prototype.pause=function(){this._tokenizer.pause()},t.prototype.resume=function(){this._tokenizer.resume()},t}(s.EventEmitter);t.Parser=m},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(444)),o=r(n(446)),a=r(n(447)),s=r(n(448));function l(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function u(e,t,n){var r=e.toLowerCase();return e===r?function(e,i){i===r?e._state=t:(e._state=n,e._index--)}:function(i,o){o===r||o===e?i._state=t:(i._state=n,i._index--)}}function c(e,t){var n=e.toLowerCase();return function(r,i){i===n||i===e?r._state=t:(r._state=3,r._index--)}}var f=u("C",23,16),d=u("D",24,16),p=u("A",25,16),h=u("T",26,16),m=u("A",27,16),g=c("R",34),b=c("I",35),y=c("P",36),v=c("T",37),x=u("R",39,1),_=u("I",40,1),w=u("P",41,1),O=u("T",42,1),E=c("Y",44),k=c("L",45),S=c("E",46),T=u("Y",48,1),j=u("L",49,1),A=u("E",50,1),P=u("#",52,53),C=u("X",55,54),N=function(){function e(e,t){this._state=1,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=1,this._special=1,this._running=!0,this._ended=!1,this._cbs=t,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities)}return e.prototype.reset=function(){this._state=1,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=1,this._special=1,this._running=!0,this._ended=!1},e.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=2,this._sectionStart=this._index):this._decodeEntities&&1===this._special&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=1,this._state=51,this._sectionStart=this._index)},e.prototype._stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||1!==this._special||l(e)?this._state=1:"!"===e?(this._state=15,this._sectionStart=this._index+1):"?"===e?(this._state=17,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?3:31,this._sectionStart=this._index)},e.prototype._stateInTagName=function(e){("/"===e||">"===e||l(e))&&(this._emitToken("onopentagname"),this._state=8,this._index--)},e.prototype._stateBeforeCloseingTagName=function(e){l(e)||(">"===e?this._state=1:1!==this._special?"s"===e||"S"===e?this._state=32:(this._state=1,this._index--):(this._state=6,this._sectionStart=this._index))},e.prototype._stateInCloseingTagName=function(e){(">"===e||l(e))&&(this._emitToken("onclosetag"),this._state=7,this._index--)},e.prototype._stateAfterCloseingTagName=function(e){">"===e&&(this._state=1,this._sectionStart=this._index+1)},e.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=1,this._sectionStart=this._index+1):"/"===e?this._state=4:l(e)||(this._state=9,this._sectionStart=this._index)},e.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=1,this._sectionStart=this._index+1):l(e)||(this._state=8,this._index--)},e.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||l(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=10,this._index--)},e.prototype._stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this._cbs.onattribend(),this._state=8,this._index--):l(e)||(this._cbs.onattribend(),this._state=9,this._sectionStart=this._index)},e.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this._sectionStart=this._index+1):"'"===e?(this._state=13,this._sectionStart=this._index+1):l(e)||(this._state=14,this._sectionStart=this._index,this._index--)},e.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index)},e.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index)},e.prototype._stateInAttributeValueNoQuotes=function(e){l(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index)},e.prototype._stateBeforeDeclaration=function(e){this._state="["===e?22:"-"===e?18:16},e.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=1,this._sectionStart=this._index+1)},e.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=1,this._sectionStart=this._index+1)},e.prototype._stateBeforeComment=function(e){"-"===e?(this._state=19,this._sectionStart=this._index+1):this._state=16},e.prototype._stateInComment=function(e){"-"===e&&(this._state=20)},e.prototype._stateAfterComment1=function(e){this._state="-"===e?21:19},e.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=1,this._sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=28,this._sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype._stateInCdata=function(e){"]"===e&&(this._state=29)},e.prototype._stateAfterCdata1=function(e){this._state="]"===e?30:28},e.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=1,this._sectionStart=this._index+1):"]"!==e&&(this._state=28)},e.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=33:"t"===e||"T"===e?this._state=43:(this._state=3,this._index--)},e.prototype._stateBeforeSpecialEnd=function(e){2!==this._special||"c"!==e&&"C"!==e?3!==this._special||"t"!==e&&"T"!==e?this._state=1:this._state=47:this._state=38},e.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||l(e))&&(this._special=2),this._state=3,this._index--},e.prototype._stateAfterScript5=function(e){">"===e||l(e)?(this._special=1,this._state=6,this._sectionStart=this._index-6,this._index--):this._state=1},e.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||l(e))&&(this._special=3),this._state=3,this._index--},e.prototype._stateAfterStyle4=function(e){">"===e||l(e)?(this._special=1,this._state=6,this._sectionStart=this._index-5,this._index--):this._state=1},e.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?s.default:o.default;Object.prototype.hasOwnProperty.call(t,e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1)}},e.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(t>6&&(t=6);t>=2;){var n=this._buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(a.default,n))return this._emitPartial(a.default[n]),void(this._sectionStart+=t+1);t--}},e.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||e>"z")&&(e<"A"||e>"Z")&&(e<"0"||e>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(1!==this._baseState?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},e.prototype._decodeNumericEntity=function(e,t){var n=this._sectionStart+e;if(n!==this._index){var r=this._buffer.substring(n,this._index),o=parseInt(r,t);this._emitPartial(i.default(o)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},e.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},e.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},e.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(1===this._state?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},e.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse()},e.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);1===this._state?this._stateText(e):12===this._state?this._stateInAttributeValueDoubleQuotes(e):9===this._state?this._stateInAttributeName(e):19===this._state?this._stateInComment(e):8===this._state?this._stateBeforeAttributeName(e):3===this._state?this._stateInTagName(e):6===this._state?this._stateInCloseingTagName(e):2===this._state?this._stateBeforeTagName(e):10===this._state?this._stateAfterAttributeName(e):13===this._state?this._stateInAttributeValueSingleQuotes(e):11===this._state?this._stateBeforeAttributeValue(e):5===this._state?this._stateBeforeCloseingTagName(e):7===this._state?this._stateAfterCloseingTagName(e):31===this._state?this._stateBeforeSpecial(e):20===this._state?this._stateAfterComment1(e):14===this._state?this._stateInAttributeValueNoQuotes(e):4===this._state?this._stateInSelfClosingTag(e):16===this._state?this._stateInDeclaration(e):15===this._state?this._stateBeforeDeclaration(e):21===this._state?this._stateAfterComment2(e):18===this._state?this._stateBeforeComment(e):32===this._state?this._stateBeforeSpecialEnd(e):38===this._state?x(this,e):39===this._state?_(this,e):40===this._state?w(this,e):33===this._state?g(this,e):34===this._state?b(this,e):35===this._state?y(this,e):36===this._state?v(this,e):37===this._state?this._stateBeforeScript5(e):41===this._state?O(this,e):42===this._state?this._stateAfterScript5(e):43===this._state?E(this,e):28===this._state?this._stateInCdata(e):44===this._state?k(this,e):45===this._state?S(this,e):46===this._state?this._stateBeforeStyle4(e):47===this._state?T(this,e):48===this._state?j(this,e):49===this._state?A(this,e):50===this._state?this._stateAfterStyle4(e):17===this._state?this._stateInProcessingInstruction(e):53===this._state?this._stateInNamedEntity(e):22===this._state?f(this,e):51===this._state?P(this,e):23===this._state?d(this,e):24===this._state?p(this,e):29===this._state?this._stateAfterCdata1(e):30===this._state?this._stateAfterCdata2(e):25===this._state?h(this,e):26===this._state?m(this,e):27===this._state?this._stateBeforeCdata6(e):55===this._state?this._stateInHexEntity(e):54===this._state?this._stateInNumericEntity(e):52===this._state?C(this,e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},e.prototype.pause=function(){this._running=!1},e.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},e.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish()},e.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},e.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);28===this._state||29===this._state||30===this._state?this._cbs.oncdata(e):19===this._state||20===this._state||21===this._state?this._cbs.oncomment(e):53!==this._state||this._xmlMode?54!==this._state||this._xmlMode?55!==this._state||this._xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},e.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},e.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},e.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1},e.prototype._emitPartial=function(e){1!==this._baseState?this._cbs.onattribdata(e):this._cbs.ontext(e)},e}();t.default=N},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(132)),l=a(n(221)),u=n(218),c=function(e){function t(t,n){return"object"==typeof t&&null!==t&&(n=t=void 0),e.call(this,t,n)||this}return i(t,e),t.prototype.onend=function(){var e={},t=d(g,this.dom);if(t)if("feed"===t.name){var n=t.children;e.type="atom",m(e,"id","id",n),m(e,"title","title",n);var r=h("href",d("link",n));r&&(e.link=r),m(e,"description","subtitle",n),(i=p("updated",n))&&(e.updated=new Date(i)),m(e,"author","email",n,!0),e.items=f("entry",n).map((function(e){var t={},n=e.children;m(t,"id","id",n),m(t,"title","title",n);var r=h("href",d("link",n));r&&(t.link=r);var i=p("summary",n)||p("content",n);i&&(t.description=i);var o=p("updated",n);return o&&(t.pubDate=new Date(o)),t}))}else{var i;n=d("channel",t.children).children;e.type=t.name.substr(0,3),e.id="",m(e,"title","title",n),m(e,"link","link",n),m(e,"description","description",n),(i=p("lastBuildDate",n))&&(e.updated=new Date(i)),m(e,"author","managingEditor",n,!0),e.items=f("item",t.children).map((function(e){var t={},n=e.children;m(t,"id","guid",n),m(t,"title","title",n),m(t,"link","link",n),m(t,"description","description",n);var r=p("pubDate",n);return r&&(t.pubDate=new Date(r)),t}))}this.feed=e,this.handleCallback(t?null:Error("couldn't find root of feed"))},t}(s.default);function f(e,t){return l.getElementsByTagName(e,t,!0)}function d(e,t){return l.getElementsByTagName(e,t,!0,1)[0]}function p(e,t,n){return void 0===n&&(n=!1),l.getText(l.getElementsByTagName(e,t,n,1)).trim()}function h(e,t){return t?t.attribs[e]:null}function m(e,t,n,r,i){void 0===i&&(i=!1);var o=p(n,r,i);o&&(e[t]=o)}function g(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}t.FeedHandler=c;var b={xmlMode:!0};t.parseFeed=function(e,t){void 0===t&&(t=b);var n=new c(t);return new u.Parser(n,t).end(e),n.feed}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(451)),r(n(458)),r(n(459)),r(n(226)),r(n(460)),r(n(461)),r(n(68))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(223)),o=r(n(454)),a=r(n(224)),s=r(n(455));function l(e){var t=Object.keys(e).join("|"),n=c(e),r=new RegExp("&(?:"+(t+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(e){return String(e).replace(r,n)}}t.decodeXML=l(a.default),t.decodeHTMLStrict=l(i.default);var u=function(e,t){return e<t?1:-1};function c(e){return function(t){return"#"===t.charAt(1)?"X"===t.charAt(2)||"x"===t.charAt(2)?s.default(parseInt(t.substr(3),16)):s.default(parseInt(t.substr(2),10)):e[t.slice(1,-1)]}}t.decodeHTML=function(){for(var e=Object.keys(o.default).sort(u),t=Object.keys(i.default).sort(u),n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var a=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=c(i.default);function l(e){return";"!==e.substr(-1)&&(e+=";"),s(e)}return function(e){return String(e).replace(a,l)}}()},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=l(r(n(224)).default),o=u(i);t.encodeXML=h(i,o);var a=l(r(n(223)).default),s=u(a);function l(e){return Object.keys(e).sort().reduce((function(t,n){return t[e[n]]="&"+n+";",t}),{})}function u(e){var t=[],n=[];return Object.keys(e).forEach((function(e){return 1===e.length?t.push("\\"+e):n.push(e)})),n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}t.encodeHTML=h(a,s);var c=/[^\0-\x7F]/g,f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function d(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}function p(e,t){return"&#x"+(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function h(e,t){return function(n){return n.replace(t,(function(t){return e[t]})).replace(f,p).replace(c,d)}}var m=u(i);t.escape=function(e){return e.replace(m,d).replace(f,p).replace(c,d)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68);function i(e,t,n,o){for(var a=[],s=0;s<t.length;s++){var l=t[s];if(e(l)&&(a.push(l),--o<=0))break;if(n&&r.hasChildren(l)&&l.children.length>0){var u=i(e,l.children,n,o);if(a=a.concat(u),(o-=u.length)<=0)break}}return a}t.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),Array.isArray(t)||(t=[t]),i(e,t,n,r)},t.find=i,t.findOneChild=function(e,t){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n];return null},t.findOne=function e(t,n,i){void 0===i&&(i=!0);for(var o=null,a=0;a<n.length&&!o;a++){var s=n[a];r.isTag(s)&&(t(s)?o=s:i&&s.children.length>0&&(o=e(t,s.children)))}return o},t.existsOne=function e(t,n){for(var i=0;i<n.length;i++){var o=n[i];if(r.isTag(o)&&(t(o)||o.children.length>0&&e(t,o.children)))return!0}return!1},t.findAll=function(e,t){for(var n=[],i=t.slice();i.length;){var o=i.shift();o&&r.isTag(o)&&(o.children&&o.children.length>0&&i.unshift.apply(i,o.children),e(o)&&n.push(o))}return n}},function(e,t,n){"use strict";var r=n(465),i=n(228);e.exports=function(){var e=new i;return{defaultProcessingInstructions:[{shouldProcessNode:r.shouldProcessEveryNode,processNode:e.processDefaultNode}]}}},function(e,t,n){"use strict";var r=n(229),i=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","menuitem","textarea"];e.exports=function(){return{processDefaultNode:function(e,t,n){return"text"===e.type?e.data:"comment"!==e.type&&(i.indexOf(e.name)>-1?r.createElement(e,n):r.createElement(e,n,e.data,t))}}}},function(e,t,n){"use strict";var r=n(466),i=n(467),o=n(468),a=n(2),s=n(470);e.exports={createElement:function(e,t,n,l){var u={key:t};e.attribs&&(u=o((function(e,t){var n=t[0],i=t[1];return"style"===(n=s[n.replace(/[-:]/,"")]||n)?i=function(e){for(var t,n,i,o=(e=e||"").split(/;(?!base64)/),a={},s=0;s<o.length;++s)(t=o[s].split(":")).length>2&&(t[1]=t.slice(1).join(":")),n=t[0],"string"==typeof(i=t[1])&&(i=i.trim()),null!=n&&null!=i&&n.length>0&&i.length>0&&(a[r(n)]=i);return a}(i):"class"===n?n="className":"for"===n&&(n="htmlFor"),e[n]=i||n,e}),u,i(e.attribs))),l=l||[];var c=null!=n?[n].concat(l):l;return a.createElement.apply(null,[e.name,u].concat(c))}}},function(e,t,n){"use strict";e.exports={alwaysValid:function(){return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({production:e,edition:t,contextualizations:n,options:{showUncitedReferences:u,sortingKey:f,sortingAscending:d,resourceTypes:p=["bib"]}}){const{resources:h}=e,m=(0,o.default)(e,t).map(e=>{return e.contextualization}),g=n||m;let b=u?Object.keys(h):(0,s.default)(m.map(e=>e.sourceId));const y=(b=b.filter(e=>{const t=h[e].metadata.type;return p.includes(t)})).reduce((n,o)=>{const s=g.filter(e=>e.sourceId===o).map(e=>e.id).map(n=>(0,a.default)({contextualizationId:n,production:e,edition:t})).reduce((t,n)=>[...t,...n.map(({containerId:t,contextualizationId:n})=>({id:n,containerId:t,contextContent:(0,r.default)(e,n)}))],[]),l=(0,i.default)(h[o])[0];return"bib"===h[o].metadata.type?c({},n,{[h[o].data.citations[0].id]:c({},h[o],{citation:l,mentions:s})}):c({},n,{[o]:c({},h[o],{mentions:s,citation:l})})},{}),v=Object.keys(y).reduce((e,t)=>{const n=y[t].citation;return c({},e,{[n.id]:n})},{}),x=function({items:e={},style:t,locale:n,options:r={}}){if(!t||!n)return;const i={retrieveLocale:()=>n,retrieveItem:t=>e[t],variableWrapper:(e,t,n,r)=>"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?`${t}<a href="${e.itemData.URL}" target="blank">${n}</a>${r}`:"URL"===e.variableNames[0]?`${t}<a href="${n}" target="blank">${n}</a>${r}`:t+n+r},o=new l.default.Engine(i,t);return o.updateItems(Object.keys(e)),o.makeBibliography(r)}({locale:t.data.citationLocale.data,style:t.data.citationStyle.data,items:v});let _=x[0].entry_ids.map(e=>e[0]).map((e,t)=>({id:e,resource:y[e],citation:y[e]&&y[e].citation,html:x[1][t]})).filter(e=>e.citation);_=_.sort((e,t)=>{switch(f){case"mentions":return e.resource.mentions.length>t.resource.mentions.length?-1:1;case"date":const n=e.citation.issued&&e.citation.issued["date-parts"],r=t.citation.issued&&t.citation.issued["date-parts"];return n&&r&&n.length&&r.length?n[0]>r[0]?1:n[0]<r[0]?-1:n.length>1&&r.length>1?n[1]>r[1]?1:n[1]<r[1]?-1:0:0:!r||r&&!r.length?-1:!n||n&&!n.length?1:0;case"authors":if(e.citation.author&&t.citation.author){return(e.citation.author&&e.citation.author.map(e=>`${e.family}-${e.given}`.toLowerCase()).join(""))>(t.citation.author&&t.citation.author.map(e=>`${e.family}-${e.given}`.toLowerCase()).join(""))?1:-1}return t.citation.author?e.citation.author?0:1:-1;case"title":return e.citation.title.toLowerCase()>t.citation.title.toLowerCase()?1:-1}}),d||(_=_.reverse());return _};var r=u(n(134)),i=u(n(135)),o=u(n(69)),a=u(n(136)),s=u(n(85)),l=u(n(67));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(233)),i=o(n(234));function o(e){return e&&e.__esModule?e:{default:e}}var a=({production:e,options:t})=>{const{customSummary:n,resourceTypes:o,hideEmptyResources:a=!1}=t;let s=[];if(n&&n.active)s=n.summary;else{let t=[];o&&o.includes("section")&&(t=[...e.sectionsOrder]),s=Object.keys(e.resources).filter(t=>{const n=e.resources[t];return"section"!==n.metadata.type&&(!o||o.includes(n.metadata.type))}).map(e=>({resourceId:e,level:0})).sort(r.default),s=[...t,...s].filter(({resourceId:t})=>!a||(0,i.default)(e.resources[t]))}return s};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e,t)=>e.type===t.type?e.title>t.title?1:-1:e.type>t.type?1:-1;t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e=>e&&e.data&&e.data.contents&&e.data.contents.contents&&e.data.contents.contents.blocks&&e.data.contents.contents.blocks.length&&(e.data.contents.contents.blocks.length>1||e.data.contents.contents.blocks[0].text.trim().length);t.default=r},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){var r=n(71),i=n(73),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==l}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(33))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(509);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(39)(n(23),"Set");e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({production:e,sectionId:t,edition:n},a=!1){const{contextualizations:l={},contextualizers:u={},resources:c={}}=e,f=(n?(0,i.default)(e,n):Object.keys(l).map(t=>{const n=l[t];return{contextualizer:e.contextualizers[n.contextualizerId],contextualization:n}})).filter(e=>!t||e.targetId===t).reduce((e,{contextualization:t,contextualizer:n})=>s({},e,{[t.id]:s({},t,{resource:c[t.sourceId],additionalSources:t.additionalSources?t.additionalSources.map(e=>c[e]):[],contextualizer:n,type:n?n.type:c[t.sourceId]&&c[t.sourceId].metadata.type})}),{}),d=Object.keys(f).filter(e=>"bib"===f[e].type&&l[e]).map(e=>f[e]),p=Object.keys(f).filter(e=>f[e]&&f[e].resource&&"glossary"!==f[e].resource.metadata.type).reduce((e,t)=>{const n=f[t],i=[...(0,r.default)(n.resource),...n.additionalSources?n.additionalSources.map(e=>(0,r.default)(e)):[]].flat().reduce((e,t)=>s({},e,{[t.id]:t}),{});return s({},e,i)},{}),h=d.map((e,t)=>{const n=e.id,i=l[n],o=u[i.contextualizerId];return{citationID:n,citationItems:[...(0,r.default)(e.resource),...e.additionalSources?e.additionalSources.map(e=>(0,r.default)(e)):[]].flat().map(e=>({locator:o.parameters?o.parameters.locator:o.locator,prefix:o.parameters?o.parameters.prefix:o.prefix,suffix:o.parameters?o.parameters.suffix:o.suffix,id:e.id})),properties:{noteIndex:t+1}}}),m=h.map((e,t)=>[e,h.slice(0,0===t?0:t).map(e=>[e.citationID,e.properties.noteIndex]),[]]);let g={};a&&n.data.citationLocale&&n.data.citationLocale.data&&(g=(0,o.default)({locale:n.data.citationLocale.data,style:n.data.citationStyle.data,items:p,citations:m}));return{citationComponents:g}};var r=a(n(135)),i=a(n(69)),o=a(n(245));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(67))&&r.__esModule?r:{default:r};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=({locale:e,style:t,items:n={},citations:r=[]})=>{const a={retrieveLocale:()=>e,retrieveItem:e=>n[e],variableWrapper:(e,t,n,r)=>"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?`${t}<a href="${e.itemData.URL}" target="blank">${n}</a>${r}`:"URL"===e.variableNames[0]?`${t}<a href="${n}" target="blank">${n}</a>${r}`:t+n+r},s=new i.default.Engine(a,t);return r.reduce((e,t)=>{const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),r=t[0],i=t[1],a=t[2];let l=s.processCitationCluster(r,i,a);return(l=l[1]).forEach(e=>{const t=e[0],r=e[1],i=e[2];n[i]={order:t,html:r}}),n},{})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(134)),i=s(n(69)),o=s(n(136)),a=s(n(85));function s(e){return e&&e.__esModule?e:{default:e}}var l=({production:e,edition:t,options:n})=>{const{resources:s}=e,{showUncited:l=!1,glossaryTypes:u=["person","place","event","notion","other"]}=n,c=(0,i.default)(e,t);return(l?Object.keys(s).filter(e=>"glossary"===s[e].metadata.type):(0,a.default)(c.filter(e=>"glossary"===s[e.contextualization.sourceId].metadata.type).map(e=>e.contextualization.sourceId))).filter(e=>u.includes(s[e].data.entryType)).sort((e,t)=>s[e].data.name.toLowerCase()>s[t].data.name.toLowerCase()?1:-1).map(n=>{const i=c.filter(e=>e.contextualization.sourceId===n).map(e=>e.contextualization.id).map(n=>(0,o.default)({contextualizationId:n,production:e,edition:t})).reduce((t,n)=>[...t,...n.map(({containerId:t,contextualizationId:n})=>({id:n,containerId:t,contextContent:(0,r.default)(e,n)}))],[]);return{resourceId:n,resource:e.resources[n],mentions:i}})};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(111)),i=o(n(515));function o(e){return e&&e.__esModule?e:{default:e}}var a=e=>{const t=i.default.get(r.default,["definitions",e.metadata.type,"titlePath"]);return(t?i.default.get(e,t):e.metadata.title)||""};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(74))&&r.__esModule?r:{default:r};const o=(e={})=>e?(0,i.default)(Object.keys(e).reduce((t,n)=>{const r=e[n],a=Array.isArray(t)?t:[];if(Array.isArray(r)){const e=(0,i.default)(r.map(o));return[...a,e]}if("object"==typeof r){const e=(0,i.default)(o(r));return[...a,e]}return n.includes("AssetId")?[...a,r]:a},[])):[];var a=o;t.default=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"webpage",type:"peritext-contextualizer",name:"Webpage entry contextualizer",acceptedResourceTypes:[{type:"webpage"},{type:"bib"}],profile:{inline:{mutable:!0,options:{}},block:{mutable:!1,assetPickingRules:{element:{screened:["url","rgbImageAssetId","cmybImageAssetId"],paged:["cmybImageAssetId","rgbImageAssetId"]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildBibliography",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"buildCitations",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildContextContent",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"buildGlossary",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"resourceToCslJSON",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"StructuredCOinS",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"chooseAppropriateAsset",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"chooseAppropriateSubAsset",{enumerable:!0,get:function(){return u.chooseAppropriateSubAsset}}),Object.defineProperty(t,"getRelatedAssetsIds",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getContextualizationsFromEdition",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"loadAssetsForEdition",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"buildHTMLMetadata",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"abbrevString",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"generateOpenUrl",{enumerable:!0,get:function(){return m.generateOpenUrl}}),Object.defineProperty(t,"bibToSchema",{enumerable:!0,get:function(){return m.bibToSchema}});var r=g(n(541)),i=g(n(542)),o=g(n(143)),a=g(n(543)),s=g(n(144)),l=g(n(544)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(545)),c=g(n(252)),f=g(n(253)),d=g(n(546)),p=g(n(547)),h=g(n(548)),m=n(549);function g(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(74))&&r.__esModule?r:{default:r};const o=(e={})=>e?(0,i.default)(Object.keys(e).reduce((t,n)=>{const r=e[n],a=Array.isArray(t)?t:[];if(Array.isArray(r)){const e=(0,i.default)(r.map(o));return[...a,e]}if("object"==typeof r){const e=(0,i.default)(o(r));return[...a,e]}return n.includes("AssetId")?[...a,r]:a},[])):[];var a=o;t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t={}){const{contextualizations:n,contextualizers:i}=e,{data:o={}}=t,{plan:a={}}=o,{summary:s=[]}=a;return s.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return[...e,...Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e})({contextualization:n[e],contextualizer:i[n[e].contextualizerId]},t))]},[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"embed",type:"peritext-contextualizer",name:"Embed contextualizer",acceptedResourceTypes:[{type:"embed"}],profile:{block:{mutable:!1,assetPickingRules:{element:{screened:["html","rgbImageAssetId","cmybImageAssetId"],paged:["cmybImageAssetId","rgbImageAssetId","html"]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FilePlayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"YouTube",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"SoundCloud",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Vimeo",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Facebook",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Streamable",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"Wistia",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"Twitch",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"DailyMotion",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Mixcloud",{enumerable:!0,get:function(){return v.default}}),t.default=void 0;var r=w(n(2)),i=n(92),o=n(18),a=x(n(559)),s=x(n(147)),l=x(n(560)),u=w(n(261)),c=x(n(561)),f=x(n(146)),d=x(n(148)),p=x(n(149)),h=x(n(256)),m=x(n(257)),g=x(n(258)),b=x(n(259)),y=x(n(150)),v=x(n(260));function x(e){return e&&e.__esModule?e:{default:e}}function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function w(e){if(e&&e.__esModule)return e;var t=_();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=Object.keys(i.propTypes),I=[],D=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=function(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?P(e):t}(this,(e=A(t)).call.apply(e,[this].concat(a))),N(P(n),"config",(0,o.getConfig)(n.props,i.defaultProps,!0)),N(P(n),"state",{showPreview:!!n.props.light}),N(P(n),"handleClickPreview",(function(){n.setState({showPreview:!1})})),N(P(n),"showPreview",(function(){n.setState({showPreview:!0})})),N(P(n),"getDuration",(function(){return n.player?n.player.getDuration():null})),N(P(n),"getCurrentTime",(function(){return n.player?n.player.getCurrentTime():null})),N(P(n),"getSecondsLoaded",(function(){return n.player?n.player.getSecondsLoaded():null})),N(P(n),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(e):null})),N(P(n),"seekTo",(function(e,t){if(!n.player)return null;n.player.seekTo(e,t)})),N(P(n),"handleReady",(function(){n.props.onReady(P(n))})),N(P(n),"wrapperRef",(function(e){n.wrapper=e})),N(P(n),"activePlayerRef",(function(e){n.player=e})),n}var n,f,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(f=[{key:"componentDidMount",value:function(){this.props.progressFrequency&&console.warn("ReactPlayer: %cprogressFrequency%c is deprecated, please use %cprogressInterval%c instead","font-weight: bold","","font-weight: bold","")}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,o.isEqual)(this.props,e)||!(0,o.isEqual)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;this.config=(0,o.getConfig)(this.props,i.defaultProps),!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"getActivePlayer",value:function(e){for(var t=0,n=[].concat(T(I),T(a.default));t<n.length;t++){var r=n[t];if(r.canPlay(e))return r}return u.FilePlayer}},{key:"renderActivePlayer",value:function(e,t){return e?r.default.createElement(s.default,S({},this.props,{key:t.displayName,ref:this.activePlayerRef,config:this.config,activePlayer:t,onReady:this.handleReady})):null}},{key:"sortPlayers",value:function(e,t){return e&&t?e.key<t.key?-1:1:0}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.controls,a=e.style,s=e.width,u=e.height,f=e.light,d=e.wrapper,p=this.state.showPreview&&t,h=(0,o.omit)(this.props,M,i.DEPRECATED_CONFIG_PROPS),m=this.getActivePlayer(t),g=this.renderActivePlayer(t,m),b=(0,c.default)(t,n,this.config),y=[g].concat(T(b)).sort(this.sortPlayers),v=r.default.createElement(l.default,{url:t,light:f,onClick:this.handleClickPreview});return r.default.createElement(d,S({ref:this.wrapperRef,style:k({},a,{width:s,height:u})},h),p?v:y)}}])&&j(n.prototype,f),d&&j(n,d),t}(r.Component);t.default=D,N(D,"addCustomPlayer",(function(e){I.push(e)})),N(D,"removeCustomPlayers",(function(){I=[]})),N(D,"displayName","ReactPlayer"),N(D,"propTypes",i.propTypes),N(D,"defaultProps",i.defaultProps),N(D,"canPlay",(function(e){for(var t=0,n=[].concat(T(I),T(a.default));t<n.length;t++){if(n[t].canPlay(e))return!0}return!1})),N(D,"canEnablePIP",(function(e){for(var t=0,n=[].concat(T(I),T(a.default));t<n.length;t++){var r=n[t];if(r.canEnablePIP&&r.canEnablePIP(e))return!0}return!1}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Facebook=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h="//connect.facebook.net/en_US/sdk.js",m=/facebook\.com\/([^/?].+\/)?video(s|\.php)[/?].*$/,g="facebook-player-",b=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?f(e):t}(this,(e=c(t)).call.apply(e,[this].concat(i))),p(f(n),"callPlayer",o.callPlayer),p(f(n),"playerID",g+(0,o.randomString)()),p(f(n),"mute",(function(){n.callPlayer("mute")})),p(f(n),"unmute",(function(){n.callPlayer("unmute")})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e,t){var n=this;t?(0,o.getSDK)(h,"FB","fbAsyncInit").then((function(e){return e.XFBML.parse()})):(0,o.getSDK)(h,"FB","fbAsyncInit").then((function(e){e.init({appId:n.props.config.facebook.appId,xfbml:!0,version:"v2.5"}),e.Event.subscribe("xfbml.render",(function(e){n.props.onLoaded()})),e.Event.subscribe("xfbml.ready",(function(e){"video"===e.type&&e.id===n.playerID&&(n.player=e.instance,n.player.subscribe("startedPlaying",n.props.onPlay),n.player.subscribe("paused",n.props.onPause),n.player.subscribe("finishedPlaying",n.props.onEnded),n.player.subscribe("startedBuffering",n.props.onBuffer),n.player.subscribe("finishedBuffering",n.props.onBufferEnd),n.player.subscribe("error",n.props.onError),n.props.muted||n.callPlayer("unmute"),n.props.onReady(),document.getElementById(n.playerID).querySelector("iframe").style.visibility="visible")}))}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return i.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"})}}])&&u(n.prototype,r),a&&u(n,a),t}(i.Component);t.Facebook=b,p(b,"displayName","Facebook"),p(b,"canPlay",(function(e){return m.test(e)})),p(b,"loopOnEnded",!0);var y=(0,a.default)(b);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Streamable=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=/streamable\.com\/([a-z0-9]+)$/,m=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?f(e):t}(this,(e=c(t)).call.apply(e,[this].concat(i))),p(f(n),"callPlayer",o.callPlayer),p(f(n),"duration",null),p(f(n),"currentTime",null),p(f(n),"secondsLoaded",null),p(f(n),"mute",(function(){n.callPlayer("mute")})),p(f(n),"unmute",(function(){n.callPlayer("unmute")})),p(f(n),"ref",(function(e){n.iframe=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e){var t=this;(0,o.getSDK)("//cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.setLoop(t.props.loop),t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seeked",t.props.onSeek),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",(function(e){var n=e.duration,r=e.seconds;t.duration=n,t.currentTime=r})),t.player.on("buffered",(function(e){var n=e.percent;t.duration&&(t.secondsLoaded=t.duration*n)})),t.props.muted&&t.player.mute())}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e=this.props.url.match(h)[1];return i.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(e),frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allowFullScreen:!0})}}])&&u(n.prototype,r),a&&u(n,a),t}(i.Component);t.Streamable=m,p(m,"displayName","Streamable"),p(m,"canPlay",(function(e){return h.test(e)}));var g=(0,a.default)(m);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Wistia=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=/(?:wistia\.com|wi\.st)\/(?:medias|embed)\/(.*)$/,b=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}(this,(e=d(t)).call.apply(e,[this].concat(i))),m(p(n),"callPlayer",o.callPlayer),m(p(n),"mute",(function(){n.callPlayer("mute")})),m(p(n),"unmute",(function(){n.callPlayer("unmute")})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"getID",value:function(e){return e&&e.match(g)[1]}},{key:"load",value:function(e){var t=this,n=this.props,r=n.playing,i=n.muted,a=n.controls,s=n.onReady,l=n.onPlay,u=n.onPause,f=n.onSeek,d=n.onEnded,p=n.config,h=n.onError;(0,o.getSDK)("//fast.wistia.com/assets/external/E-v1.js","Wistia").then((function(){window._wq=window._wq||[],window._wq.push({id:t.getID(e),options:c({autoPlay:r,silentAutoPlay:"allow",muted:i,controlsVisibleOnLoad:a},p.wistia.options),onReady:function(e){t.player=e,t.unbind(),t.player.bind("play",l),t.player.bind("pause",u),t.player.bind("seek",f),t.player.bind("end",d),s()}})}),h)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"unbind",value:function(){var e=this.props,t=e.onPlay,n=e.onPause,r=e.onSeek,i=e.onEnded;this.player.unbind("play",t),this.player.unbind("pause",n),this.player.unbind("seek",r),this.player.unbind("end",i)}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(e){this.callPlayer("time",e)}},{key:"setVolume",value:function(e){this.callPlayer("volume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("playbackRate",e)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.getID(this.props.url),t="wistia_embed wistia_async_".concat(e);return i.default.createElement("div",{key:e,className:t,style:{width:"100%",height:"100%"}})}}])&&f(n.prototype,r),a&&f(n,a),t}(i.Component);t.Wistia=b,m(b,"displayName","Wistia"),m(b,"canPlay",(function(e){return g.test(e)})),m(b,"loopOnEnded",!0);var y=(0,a.default)(b);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Twitch=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,g=/(?:www\.|go\.)?twitch\.tv\/([a-z0-9_]+)($|\?)/,b="twitch-player-",y=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}(this,(e=f(t)).call.apply(e,[this].concat(i))),h(d(n),"callPlayer",o.callPlayer),h(d(n),"playerID",b+(0,o.randomString)()),h(d(n),"mute",(function(){n.callPlayer("setMuted",!0)})),h(d(n),"unmute",(function(){n.callPlayer("setMuted",!1)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e,t){var n=this,r=this.props,i=r.playsinline,a=r.onError,s=r.config,l=g.test(e),c=l?e.match(g)[1]:e.match(m)[1];t?l?this.player.setChannel(c):this.player.setVideo("v"+c):(0,o.getSDK)("https://player.twitch.tv/js/embed/v1.js","Twitch").then((function(e){n.player=new e.Player(n.playerID,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:l?"":c,channel:l?c:"",height:"100%",width:"100%",playsinline:i,autoplay:n.props.playing,muted:n.props.muted,controls:n.props.controls},s.twitch.options));var t=e.Player,r=t.READY,o=t.PLAYING,a=t.PAUSE,f=t.ENDED,d=t.ONLINE,p=t.OFFLINE;n.player.addEventListener(r,n.props.onReady),n.player.addEventListener(o,n.props.onPlay),n.player.addEventListener(a,n.props.onPause),n.player.addEventListener(f,n.props.onEnded),n.player.addEventListener(d,n.props.onLoaded),n.player.addEventListener(p,n.props.onLoaded)}),a)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return i.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID})}}])&&c(n.prototype,r),a&&c(n,a),t}(i.Component);t.Twitch=y,h(y,"displayName","Twitch"),h(y,"canPlay",(function(e){return m.test(e)||g.test(e)})),h(y,"loopOnEnded",!0);var v=(0,a.default)(y);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Mixcloud=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=/mixcloud\.com\/([^/]+\/[^/]+)/,g=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}(this,(e=f(t)).call.apply(e,[this].concat(i))),h(d(n),"callPlayer",o.callPlayer),h(d(n),"duration",null),h(d(n),"currentTime",null),h(d(n),"secondsLoaded",null),h(d(n),"mute",(function(){})),h(d(n),"unmute",(function(){})),h(d(n),"ref",(function(e){n.iframe=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"load",value:function(e){var t=this;(0,o.getSDK)("//widget.mixcloud.com/media/js/widgetApi.js","Mixcloud").then((function(e){t.player=e.PlayerWidget(t.iframe),t.player.ready.then((function(){t.player.events.play.on(t.props.onPlay),t.player.events.pause.on(t.props.onPause),t.player.events.ended.on(t.props.onEnded),t.player.events.error.on(t.props.error),t.player.events.progress.on((function(e,n){t.currentTime=e,t.duration=n})),t.props.onReady()}))}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.config,r=t.match(m)[1],a=(0,o.queryString)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.mixcloud.options,{feed:"/".concat(r,"/")}));return i.default.createElement("iframe",{key:r,ref:this.ref,style:{width:"100%",height:"100%"},src:"https://www.mixcloud.com/widget/iframe/?".concat(a),frameBorder:"0"})}}])&&c(n.prototype,r),a&&c(n,a),t}(i.Component);t.Mixcloud=g,h(g,"displayName","Mixcloud"),h(g,"canPlay",(function(e){return m.test(e)})),h(g,"loopOnEnded",!0);var b=(0,a.default)(g);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FilePlayer=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(2)),o=n(18),a=(r=n(25))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m="undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,g=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,b=/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i,y=/\.(m3u8)($|\?)/i,v=/\.(mpd)($|\?)/i,x=/www\.dropbox\.com\/.+/;function _(e){if(e instanceof Array){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if("string"==typeof s&&_(s))return!0;if(_(s.src))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}return!!(0,o.isMediaStream)(e)||(g.test(e)||b.test(e)||y.test(e)||v.test(e))}var w=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}(this,(e=f(t)).call.apply(e,[this].concat(o))),h(d(n),"onReady",(function(){var e;return(e=n.props).onReady.apply(e,arguments)})),h(d(n),"onPlay",(function(){var e;return(e=n.props).onPlay.apply(e,arguments)})),h(d(n),"onBuffer",(function(){var e;return(e=n.props).onBuffer.apply(e,arguments)})),h(d(n),"onBufferEnd",(function(){var e;return(e=n.props).onBufferEnd.apply(e,arguments)})),h(d(n),"onPause",(function(){var e;return(e=n.props).onPause.apply(e,arguments)})),h(d(n),"onEnded",(function(){var e;return(e=n.props).onEnded.apply(e,arguments)})),h(d(n),"onError",(function(){var e;return(e=n.props).onError.apply(e,arguments)})),h(d(n),"onEnablePIP",(function(){var e;return(e=n.props).onEnablePIP.apply(e,arguments)})),h(d(n),"onDisablePIP",(function(e){var t=n.props,r=t.onDisablePIP,i=t.playing;r(e),i&&n.play()})),h(d(n),"onSeek",(function(e){n.props.onSeek(e.target.currentTime)})),h(d(n),"mute",(function(){n.player.muted=!0})),h(d(n),"unmute",(function(){n.player.muted=!1})),h(d(n),"renderSourceElement",(function(e,t){return"string"==typeof e?i.default.createElement("source",{key:t,src:e}):i.default.createElement("source",u({key:t},e))})),h(d(n),"renderTrack",(function(e,t){return i.default.createElement("track",u({key:t},e))})),h(d(n),"ref",(function(e){n.player&&(n.prevPlayer=n.player),n.player=e})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.addListeners(this.player),m&&this.player.load()}},{key:"componentDidUpdate",value:function(e){this.shouldUseAudio(this.props)!==this.shouldUseAudio(e)&&(this.removeListeners(this.prevPlayer),this.addListeners(this.player))}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.player)}},{key:"addListeners",value:function(e){var t=this.props.playsinline;e.addEventListener("canplay",this.onReady),e.addEventListener("play",this.onPlay),e.addEventListener("waiting",this.onBuffer),e.addEventListener("playing",this.onBufferEnd),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeek),e.addEventListener("ended",this.onEnded),e.addEventListener("error",this.onError),e.addEventListener("enterpictureinpicture",this.onEnablePIP),e.addEventListener("leavepictureinpicture",this.onDisablePIP),t&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(e){e.removeEventListener("canplay",this.onReady),e.removeEventListener("play",this.onPlay),e.removeEventListener("waiting",this.onBuffer),e.removeEventListener("playing",this.onBufferEnd),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeek),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),e.removeEventListener("enterpictureinpicture",this.onEnablePIP),e.removeEventListener("leavepictureinpicture",this.onDisablePIP)}},{key:"shouldUseAudio",value:function(e){return!e.config.file.forceVideo&&!e.config.file.attributes.poster&&(g.test(e.url)||e.config.file.forceAudio)}},{key:"shouldUseHLS",value:function(e){return y.test(e)&&!m||this.props.config.file.forceHLS}},{key:"shouldUseDASH",value:function(e){return v.test(e)||this.props.config.file.forceDASH}},{key:"load",value:function(e){var t=this,n=this.props.config.file,r=n.hlsVersion,i=n.dashVersion;if(this.shouldUseHLS(e)&&(0,o.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/hls.js/VERSION/hls.min.js".replace("VERSION",r),"Hls").then((function(n){t.hls=new n(t.props.config.file.hlsOptions),t.hls.on(n.Events.ERROR,(function(e,r){t.props.onError(e,r,t.hls,n)})),t.hls.loadSource(e),t.hls.attachMedia(t.player)})),this.shouldUseDASH(e)&&(0,o.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",i),"dashjs").then((function(n){t.dash=n.MediaPlayer().create(),t.dash.initialize(t.player,e,t.props.playing),t.dash.getDebug().setLogToBrowserConsole(!1)})),e instanceof Array)this.player.load();else if((0,o.isMediaStream)(e))try{this.player.srcObject=e}catch(t){this.player.src=window.URL.createObjectURL(e)}}},{key:"play",value:function(){var e=this.player.play();e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.hls&&this.hls.destroy(),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(e){this.player.currentTime=e}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player&&this.player.requestPictureInPicture()}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player&&document.exitPictureInPicture()}},{key:"setPlaybackRate",value:function(e){this.player.playbackRate=e}},{key:"getDuration",value:function(){if(!this.player)return null;var e=this.player,t=e.duration,n=e.seekable;return t===1/0&&n.length>0?n.end(n.length-1):t}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var e=this.player.buffered;if(0===e.length)return 0;var t=e.end(e.length-1),n=this.getDuration();return t>n?n:t}},{key:"getSource",value:function(e){var t=this.shouldUseHLS(e),n=this.shouldUseDASH(e);if(!(e instanceof Array||(0,o.isMediaStream)(e)||t||n))return x.test(e)?e.replace("www.dropbox.com","dl.dropboxusercontent.com"):e}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.playing,r=e.loop,o=e.controls,a=e.muted,s=e.config,l=e.width,c=e.height,f=this.shouldUseAudio(this.props)?"audio":"video",d={width:"auto"===l?l:"100%",height:"auto"===c?c:"100%"};return i.default.createElement(f,u({ref:this.ref,src:this.getSource(t),style:d,preload:"auto",autoPlay:n||void 0,controls:o,muted:a,loop:r},s.file.attributes),t instanceof Array&&t.map(this.renderSourceElement),s.file.tracks.map(this.renderTrack))}}])&&c(n.prototype,r),a&&c(n,a),t}(i.Component);t.FilePlayer=w,h(w,"displayName","FilePlayer"),h(w,"canPlay",_),h(w,"canEnablePIP",(function(e){return _(e)&&!!document.pictureInPictureEnabled&&!g.test(e)}));var O=(0,a.default)(w);t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(74))&&r.__esModule?r:{default:r};const o=(e={})=>e?(0,i.default)(Object.keys(e).reduce((t,n)=>{const r=e[n],a=Array.isArray(t)?t:[];if(Array.isArray(r)){const e=(0,i.default)(r.map(o));return[...a,e]}if("object"==typeof r){const e=(0,i.default)(o(r));return[...a,e]}return n.includes("AssetId")?[...a,r]:a},[])):[];var a=o;t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t={}){const{contextualizations:n,contextualizers:i}=e,{data:o={}}=t,{plan:a={}}=o,{summary:s=[]}=a;return s.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return[...e,...Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e})({contextualization:n[e],contextualizer:i[n[e].contextualizerId]},t))]},[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=x(n(1)),o=n(2),a=x(o),s=n(265),l=x(n(593)),u=x(n(41)),c=x(n(272)),f=x(n(602)),d=x(n(603)),p=x(n(604)),h=x(n(605)),m=x(n(607)),g=x(n(617)),b=x(n(618)),y=x(n(619)),v=x(n(54));function x(e){return e&&e.__esModule?e:{default:e}}function _(e){var t=e.srcSet||e.srcset;return Array.isArray(t)?t.join():t}var w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.theme=(0,v.default)(u.default,e.theme),n.classes=s.StyleSheet.create((0,v.default)(O,n.theme)),n.state={imageLoaded:!1},b.default.call(n,["gotoNext","gotoPrev","closeBackdrop","handleKeyboardInput","handleImageLoaded"]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getChildContext",value:function(){return{theme:this.theme}}},{key:"componentDidMount",value:function(){this.props.isOpen&&(this.props.enableKeyboardInput&&window.addEventListener("keydown",this.handleKeyboardInput),"number"==typeof this.props.currentImage&&this.preloadImage(this.props.currentImage,this.handleImageLoaded))}},{key:"componentWillReceiveProps",value:function(e){if(y.default){if(e.preloadNextImage){var t=this.props.currentImage,n=e.currentImage+1,r=e.currentImage-1,i=void 0;t&&e.currentImage>t?i=n:t&&e.currentImage<t&&(i=r),i?this.preloadImage(i):(this.preloadImage(r),this.preloadImage(n))}if(this.props.currentImage!==e.currentImage||!this.props.isOpen&&e.isOpen){var o=this.preloadImageData(e.images[e.currentImage],this.handleImageLoaded);o&&this.setState({imageLoaded:o.complete})}!this.props.isOpen&&e.isOpen&&e.enableKeyboardInput&&window.addEventListener("keydown",this.handleKeyboardInput),!e.isOpen&&e.enableKeyboardInput&&window.removeEventListener("keydown",this.handleKeyboardInput)}}},{key:"componentWillUnmount",value:function(){this.props.enableKeyboardInput&&window.removeEventListener("keydown",this.handleKeyboardInput)}},{key:"preloadImage",value:function(e,t){return this.preloadImageData(this.props.images[e],t)}},{key:"preloadImageData",value:function(e,t){if(e){var n=new Image,r=_(e);return n.onerror=t,n.onload=t,n.src=e.src,r&&(n.srcset=r),n}}},{key:"gotoNext",value:function(e){var t=this.props,n=t.currentImage,r=t.images;this.state.imageLoaded&&n!==r.length-1&&(e&&(e.preventDefault(),e.stopPropagation()),this.props.onClickNext())}},{key:"gotoPrev",value:function(e){var t=this.props.currentImage;this.state.imageLoaded&&0!==t&&(e&&(e.preventDefault(),e.stopPropagation()),this.props.onClickPrev())}},{key:"closeBackdrop",value:function(e){"lightboxBackdrop"!==e.target.id&&"FIGURE"!==e.target.tagName||this.props.onClose()}},{key:"handleKeyboardInput",value:function(e){return 37===e.keyCode?(this.gotoPrev(e),!0):39===e.keyCode?(this.gotoNext(e),!0):27===e.keyCode&&(this.props.onClose(),!0)}},{key:"handleImageLoaded",value:function(){this.setState({imageLoaded:!0})}},{key:"renderArrowPrev",value:function(){return 0===this.props.currentImage?null:a.default.createElement(c.default,{direction:"left",icon:"arrowLeft",onClick:this.gotoPrev,title:this.props.leftArrowTitle,type:"button"})}},{key:"renderArrowNext",value:function(){return this.props.currentImage===this.props.images.length-1?null:a.default.createElement(c.default,{direction:"right",icon:"arrowRight",onClick:this.gotoNext,title:this.props.rightArrowTitle,type:"button"})}},{key:"renderDialog",value:function(){var e=this.props,t=e.backdropClosesModal,n=e.isOpen,r=e.showThumbnails,i=e.width,o=this.state.imageLoaded;if(!n)return a.default.createElement("span",{key:"closed"});var u=0;return r&&(u=this.theme.thumbnail.size+this.theme.container.gutter.vertical),a.default.createElement(f.default,{key:"open",onClick:t&&this.closeBackdrop,onTouchEnd:t&&this.closeBackdrop},a.default.createElement("div",null,a.default.createElement("div",{className:(0,s.css)(this.classes.content),style:{marginBottom:u,maxWidth:i}},o&&this.renderHeader(),this.renderImages(),this.renderSpinner(),o&&this.renderFooter()),o&&this.renderThumbnails(),o&&this.renderArrowPrev(),o&&this.renderArrowNext(),this.props.preventScroll&&a.default.createElement(l.default,null)))}},{key:"renderImages",value:function(){var e=this.props,t=e.currentImage,n=e.images,r=e.onClickImage,i=e.showThumbnails,o=this.state.imageLoaded;if(!n||!n.length)return null;var l=n[t],u=_(l),c=u?"100vw":null,f=i?this.theme.thumbnail.size:0,d=this.theme.header.height+this.theme.footer.height+f+this.theme.container.gutter.vertical+"px";return a.default.createElement("figure",{className:(0,s.css)(this.classes.figure)},a.default.createElement("img",{className:(0,s.css)(this.classes.image,o&&this.classes.imageLoaded),onClick:r,sizes:c,alt:l.alt,src:l.src,srcSet:u,style:{cursor:r?"pointer":"auto",maxHeight:"calc(100vh - "+d+")"}}))}},{key:"renderThumbnails",value:function(){var e=this.props,t=e.images,n=e.currentImage,r=e.onClickThumbnail,i=e.showThumbnails,o=e.thumbnailOffset;if(i)return a.default.createElement(h.default,{currentImage:n,images:t,offset:o,onClickThumbnail:r})}},{key:"renderHeader",value:function(){var e=this.props,t=e.closeButtonTitle,n=e.customControls,r=e.onClose,i=e.showCloseButton;return a.default.createElement(p.default,{customControls:n,onClose:r,showCloseButton:i,closeButtonTitle:t})}},{key:"renderFooter",value:function(){var e=this.props,t=e.currentImage,n=e.images,r=e.imageCountSeparator,i=e.showImageCount;return n&&n.length?a.default.createElement(d.default,{caption:n[t].caption,countCurrent:t+1,countSeparator:r,countTotal:n.length,showCount:i}):null}},{key:"renderSpinner",value:function(){var e=this.props,t=e.spinner,n=e.spinnerColor,r=e.spinnerSize,i=this.state.imageLoaded,o=t;return a.default.createElement("div",{className:(0,s.css)(this.classes.spinner,!i&&this.classes.spinnerActive)},a.default.createElement(o,{color:n,size:r}))}},{key:"render",value:function(){return a.default.createElement(m.default,null,this.renderDialog())}}]),t}(o.Component);w.propTypes={backdropClosesModal:i.default.bool,closeButtonTitle:i.default.string,currentImage:i.default.number,customControls:i.default.arrayOf(i.default.node),enableKeyboardInput:i.default.bool,imageCountSeparator:i.default.string,images:i.default.arrayOf(i.default.shape({src:i.default.string.isRequired,srcSet:i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)]),caption:i.default.oneOfType([i.default.string,i.default.element]),thumbnail:i.default.string})).isRequired,isOpen:i.default.bool,leftArrowTitle:i.default.string,onClickImage:i.default.func,onClickNext:i.default.func,onClickPrev:i.default.func,onClose:i.default.func.isRequired,preloadNextImage:i.default.bool,preventScroll:i.default.bool,rightArrowTitle:i.default.string,showCloseButton:i.default.bool,showImageCount:i.default.bool,showThumbnails:i.default.bool,spinner:i.default.func,spinnerColor:i.default.string,spinnerSize:i.default.number,theme:i.default.object,thumbnailOffset:i.default.number,width:i.default.number},w.defaultProps={closeButtonTitle:"Close (Esc)",currentImage:0,enableKeyboardInput:!0,imageCountSeparator:" of ",leftArrowTitle:"Previous (Left arrow key)",onClickShowNextImage:!0,preloadNextImage:!0,preventScroll:!0,rightArrowTitle:"Next (Right arrow key)",showCloseButton:!0,showImageCount:!0,spinner:g.default,spinnerColor:"white",spinnerSize:100,theme:{},thumbnailOffset:2,width:1024},w.childContextTypes={theme:i.default.object.isRequired};var O={content:{position:"relative"},figure:{margin:0},image:{display:"block",height:"auto",margin:"0 auto",maxWidth:"100%",WebkitTouchCallout:"none",userSelect:"none",opacity:0,transition:"opacity 0.3s"},imageLoaded:{opacity:1},spinner:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s",pointerEvents:"none"},spinnerActive:{opacity:1}};t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(155),o=n(266),a={create:function(e){return(0,i.mapObj)(e,(function(e){var t=r(e,2),n=t[0],o=t[1];return[n,{_name:n+"_"+(0,i.hashObject)(o),_definition:o}]}))},rehydrate:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o.addRenderedClassNames)(e)}},s={renderStatic:function(e){return(0,o.reset)(),(0,o.startBuffering)(),{html:e(),css:{content:(0,o.flushToString)(),renderedClassNames:(0,o.getRenderedClassNames)()}}}},l={suppressStyleInjection:function(){(0,o.reset)(),(0,o.startBuffering)()},clearBufferAndResumeStyleInjection:function(){(0,o.reset)()}};t.default={StyleSheet:a,StyleSheetServer:s,StyleSheetTestUtils:l,css:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0;return(0,o.injectAndGetClassName)(r,t)}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(576),o=(r=i)&&r.__esModule?r:{default:r},a=n(578),s=n(155),l=null,u={fontFamily:function e(t){return Array.isArray(t)?t.map(e).join(","):"object"==typeof t?(h(t.fontFamily,"@font-face",[t],!1),'"'+t.fontFamily+'"'):t},animationName:function(e){if("object"!=typeof e)return e;var t="keyframe_"+(0,s.hashObject)(e),n="@keyframes "+t+"{";return Object.keys(e).forEach((function(t){n+=(0,a.generateCSS)(t,[e[t]],u,!1)})),p(t,n+="}"),t}},c={},f="",d=!1,p=function(e,t){if(!c[e]){if(!d){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");d=!0,(0,o.default)(g)}f+=t,c[e]=!0}},h=function(e,t,n,r){if(!c[e]){var i=(0,a.generateCSS)(t,n,u,r);p(e,i)}};t.injectStyleOnce=h;t.reset=function(){f="",c={},d=!1,l=null};t.startBuffering=function(){if(d)throw new Error("Cannot buffer while already buffering");d=!0};var m=function(){d=!1;var e=f;return f="",e};t.flushToString=m;var g=function(){var e=m();e.length>0&&function(e){if(null==l&&null==(l=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(l=document.createElement("style")).type="text/css",l.setAttribute("data-aphrodite",""),t.appendChild(l)}l.styleSheet?l.styleSheet.cssText+=e:l.appendChild(document.createTextNode(e))}(e)};t.flushToStyleTag=g;t.getRenderedClassNames=function(){return Object.keys(c)};t.addRenderedClassNames=function(e){e.forEach((function(e){c[e]=!0}))};t.injectAndGetClassName=function(e,t){var n=t.filter((function(e){return e}));if(0===n.length)return"";var r=n.map((function(e){return e._name})).join("-o_O-");return h(r,"."+r,n.map((function(e){return e._definition})),e),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Webkit:{transform:!0,transformOrigin:!0,transformOriginX:!0,transformOriginY:!0,backfaceVisibility:!0,perspective:!0,perspectiveOrigin:!0,transformStyle:!0,transformOriginZ:!0,animation:!0,animationDelay:!0,animationDirection:!0,animationFillMode:!0,animationDuration:!0,animationIterationCount:!0,animationName:!0,animationPlayState:!0,animationTimingFunction:!0,appearance:!0,userSelect:!0,fontKerning:!0,textEmphasisPosition:!0,textEmphasis:!0,textEmphasisStyle:!0,textEmphasisColor:!0,boxDecorationBreak:!0,clipPath:!0,maskImage:!0,maskMode:!0,maskRepeat:!0,maskPosition:!0,maskClip:!0,maskOrigin:!0,maskSize:!0,maskComposite:!0,mask:!0,maskBorderSource:!0,maskBorderMode:!0,maskBorderSlice:!0,maskBorderWidth:!0,maskBorderOutset:!0,maskBorderRepeat:!0,maskBorder:!0,maskType:!0,textDecorationStyle:!0,textDecorationSkip:!0,textDecorationLine:!0,textDecorationColor:!0,filter:!0,fontFeatureSettings:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,columnCount:!0,columnFill:!0,columnGap:!0,columnRule:!0,columnRuleColor:!0,columnRuleStyle:!0,columnRuleWidth:!0,columns:!0,columnSpan:!0,columnWidth:!0,flex:!0,flexBasis:!0,flexDirection:!0,flexGrow:!0,flexFlow:!0,flexShrink:!0,flexWrap:!0,alignContent:!0,alignItems:!0,alignSelf:!0,justifyContent:!0,order:!0,transition:!0,transitionDelay:!0,transitionDuration:!0,transitionProperty:!0,transitionTimingFunction:!0,backdropFilter:!0,scrollSnapType:!0,scrollSnapPointsX:!0,scrollSnapPointsY:!0,scrollSnapDestination:!0,scrollSnapCoordinate:!0,shapeImageThreshold:!0,shapeImageMargin:!0,shapeImageOutside:!0,hyphens:!0,flowInto:!0,flowFrom:!0,regionFragment:!0,textSizeAdjust:!0},Moz:{appearance:!0,userSelect:!0,boxSizing:!0,textAlignLast:!0,textDecorationStyle:!0,textDecorationSkip:!0,textDecorationLine:!0,textDecorationColor:!0,tabSize:!0,hyphens:!0,fontFeatureSettings:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,columnCount:!0,columnFill:!0,columnGap:!0,columnRule:!0,columnRuleColor:!0,columnRuleStyle:!0,columnRuleWidth:!0,columns:!0,columnSpan:!0,columnWidth:!0},ms:{flex:!0,flexBasis:!1,flexDirection:!0,flexGrow:!1,flexFlow:!0,flexShrink:!1,flexWrap:!0,alignContent:!1,alignItems:!1,alignSelf:!1,justifyContent:!1,order:!1,transform:!0,transformOrigin:!0,transformOriginX:!0,transformOriginY:!0,userSelect:!0,wrapFlow:!0,wrapThrough:!0,wrapMargin:!0,scrollSnapType:!0,scrollSnapPointsX:!0,scrollSnapPointsY:!0,scrollSnapDestination:!0,scrollSnapCoordinate:!0,touchAction:!0,hyphens:!0,flowInto:!0,flowFrom:!0,breakBefore:!0,breakAfter:!0,breakInside:!0,regionFragment:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridTemplate:!0,gridAutoColumns:!0,gridAutoRows:!0,gridAutoFlow:!0,grid:!0,gridRowStart:!0,gridColumnStart:!0,gridRowEnd:!0,gridRow:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridRowGap:!0,gridArea:!0,gridGap:!0,textSizeAdjust:!0}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){var r;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2);(r=o)&&r.__esModule;function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=t.defaultProps={attributes:{},styles:{}},l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.originalAttributes={},r.originalStyles={},a(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.attributes,r=t.styles,i=t.target,o=void 0===i?document.body:i;o&&(this.attributeKeys=Object.keys(n),this.styleKeys=Object.keys(r),this.styleKeys.length&&this.styleKeys.forEach((function(t){e.originalStyles[t]=o.style.getPropertyValue(t),o.style.setProperty(t,r[t])})),this.attributeKeys.length&&this.attributeKeys.forEach((function(t){e.originalAttributes[t]=o.getAttribute(t)||"",o.setAttribute(t,n[t])})))}},{key:"componentWillUnmount",value:function(){var e=this,t=this.props.target,n=void 0===t?document.body:t;n&&(this.styleKeys.length&&this.styleKeys.forEach((function(t){n.style.setProperty(t,e.originalStyles[t])})),this.attributeKeys.length&&this.attributeKeys.forEach((function(t){e.originalAttributes[t]?n.setAttribute(t,e.originalAttributes[t]):n.removeAttribute(t)})))}},{key:"render",value:function(){return null}}]),t}(o.PureComponent);l.defaultProps=s,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preventTouchMove=function(e){e.preventDefault()},t.allowTouchMove=function(e){e.stopPropagation()},t.preventInertiaScroll=function(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)},t.isTouchDevice=function(){return!!window&&("ontouchstart"in window||navigator.maxTouchPoints)},t.getPadding=function(){if(!document||!window)return 0;var e=parseInt(document.body.paddingRight,10)||0,t=document.body?document.body.clientWidth:0;return window.innerWidth-t+e||0},t.camelToKebab=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.getWindowHeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(window&&window.innerHeight)return window.innerHeight*e},t.getDocumentHeight=function(){if(document&&document.body)return document.body.clientHeight},t.parse=function(e){return isNaN(e)?e:e+"px"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n(1)),o=c(n(2)),a=n(42),s=c(n(41)),l=c(n(54)),u=c(n(273));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=t.theme,i=e.direction,c=e.icon,f=e.onClick,p=e.size,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["direction","icon","onClick","size"]),m=a.StyleSheet.create((0,l.default)(d,n));return o.default.createElement("button",r({type:"button",className:(0,a.css)(m.arrow,m["arrow__direction__"+i],p&&m["arrow__size__"+p]),onClick:f,onTouchEnd:f},h),o.default.createElement(u.default,{fill:!!n.arrow&&n.arrow.fill||s.default.arrow.fill,type:c}))}f.propTypes={direction:i.default.oneOf(["left","right"]),icon:i.default.string,onClick:i.default.func.isRequired,size:i.default.oneOf(["medium","small"]).isRequired},f.defaultProps={size:"medium"},f.contextTypes={theme:i.default.object.isRequired};var d={arrow:{background:"none",border:"none",borderRadius:4,cursor:"pointer",outline:"none",padding:10,position:"absolute",top:"50%",WebkitTouchCallout:"none",userSelect:"none"},arrow__size__medium:{height:s.default.arrow.height,marginTop:s.default.arrow.height/-2,width:40,"@media (min-width: 768px)":{width:70}},arrow__size__small:{height:s.default.thumbnail.size,marginTop:s.default.thumbnail.size/-2,width:30,"@media (min-width: 500px)":{width:40}},arrow__direction__right:{right:s.default.container.gutter.horizontal},arrow__direction__left:{left:s.default.container.gutter.horizontal}};t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(1)),o=u(n(2)),a=u(n(599)),s=u(n(600)),l=u(n(601));function u(e){return e&&e.__esModule?e:{default:e}}var c={arrowLeft:a.default,arrowRight:s.default,close:l.default},f=function(e){var t=e.fill,n=e.type,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","type"]),a=c[n];return o.default.createElement("span",r({dangerouslySetInnerHTML:{__html:a(t)}},i))};f.propTypes={fill:i.default.string,type:i.default.oneOf(Object.keys(c))},f.defaultProps={fill:"white"},t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(1)),i=s(n(2)),o=s(n(46)),a=n(275);n(276);function s(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var u="exited";t.EXITED=u;var c="entering";t.ENTERING=c;var f="entered";t.ENTERED=f;t.EXITING="exiting";var d=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=u,r.appearStatus=c):i=f:i=t.unmountOnExit||t.mountOnEnter?l:u,r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==f&&(t=c):n!==c&&n!==f||(t="exiting")}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},a.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts(),a=i?o.appear:o.enter;t||r?(this.props.onEnter(e,i),this.safeSetState({status:c},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:f},(function(){n.props.onEntered(e,i)}))}))}))):this.safeSetState({status:f},(function(){n.props.onEntered(e)}))},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:u},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:u},(function(){t.props.onExited(e)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function p(){}d.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var h=(0,a.polyfill)(d);t.default=h},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,u="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",(function(){return a})),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(1))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(1)),i=s(n(2)),o=n(275),a=n(615);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},f=function(e){var t,n;function r(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(u(u(r)));return r.state={handleExited:i,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},o.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=l({},t.children);return delete n[e.key],{children:n}})))},o.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","childFactory"]),o=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:i.default.createElement(t,r,o)},r}(i.default.Component);f.childContextTypes={transitionGroup:r.default.object.isRequired},f.propTypes={},f.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,o.polyfill)(f);t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(74))&&r.__esModule?r:{default:r};const o=(e={})=>e?(0,i.default)(Object.keys(e).reduce((t,n)=>{const r=e[n],a=Array.isArray(t)?t:[];if(Array.isArray(r)){const e=(0,i.default)(r.map(o));return[...a,e]}if("object"==typeof r){const e=(0,i.default)(o(r));return[...a,e]}return n.includes("AssetId")?[...a,r]:a},[])):[];var a=o;t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t={}){const{contextualizations:n,contextualizers:i}=e,{data:o={}}=t,{plan:a={}}=o,{summary:s=[]}=a;return s.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return[...e,...Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e})({contextualization:n[e],contextualizer:i[n[e].contextualizerId]},t))]},[])}},function(e){e.exports=JSON.parse('{"a":"5.8.1"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"table",type:"peritext-contextualizer",name:"Tables contextualizer",acceptedResourceTypes:[{type:"table"}],profile:{block:{mutable:!1,options:{pagedMaxRows:{type:"number"},simpleTable:{type:"boolean"},screenedMaxRows:{type:"number"},showPagination:{type:"boolean"},showPageSizeOptions:{type:"boolean"},defaultPageSize:{type:"number"},sortable:{type:"boolean"},filterable:{type:"boolean"}},assetPickingRules:{element:{screened:["dataAssetId"],paged:["dataAssetId"]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildBibliography",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"buildCitations",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildContextContent",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"buildGlossary",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"resourceToCslJSON",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"StructuredCOinS",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"chooseAppropriateAsset",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"chooseAppropriateSubAsset",{enumerable:!0,get:function(){return u.chooseAppropriateSubAsset}}),Object.defineProperty(t,"getRelatedAssetsIds",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getContextualizationsFromEdition",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"loadAssetsForEdition",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"buildHTMLMetadata",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"abbrevString",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"generateOpenUrl",{enumerable:!0,get:function(){return m.generateOpenUrl}}),Object.defineProperty(t,"bibToSchema",{enumerable:!0,get:function(){return m.bibToSchema}});var r=g(n(639)),i=g(n(640)),o=g(n(161)),a=g(n(641)),s=g(n(162)),l=g(n(642)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(643)),c=g(n(283)),f=g(n(284)),d=g(n(644)),p=g(n(645)),h=g(n(646)),m=n(647);function g(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(74))&&r.__esModule?r:{default:r};const o=(e={})=>e?(0,i.default)(Object.keys(e).reduce((t,n)=>{const r=e[n],a=Array.isArray(t)?t:[];if(Array.isArray(r)){const e=(0,i.default)(r.map(o));return[...a,e]}if("object"==typeof r){const e=(0,i.default)(o(r));return[...a,e]}return n.includes("AssetId")?[...a,r]:a},[])):[];var a=o;t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t={}){const{contextualizations:n,contextualizers:i}=e,{data:o={}}=t,{plan:a={}}=o,{summary:s=[]}=a;return s.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return[...e,...Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e})({contextualization:n[e],contextualizer:i[n[e].contextualizerId]},t))]},[])}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildFiguresNumberMap=void 0;const a=(e,t)=>Object.keys(t.entityMap||{}).reduce((n,r)=>{const i=t.entityMap[r];if(["BLOCK_ASSET","INLINE_ASSET"].includes(i.type)){const t=i.data.asset.id,r=e.contextualizations[t],o=e.contextualizers[r.contextualizerId];if(["image","video","embed","table"].includes(o.type))return[...n,t]}return n},[]);t.buildFiguresNumberMap=({production:e,sectionsIds:t,figuresPosition:n})=>{if("endOfContents"===n){const n=t.reduce((t,n)=>{const r=e.resources[n].data.contents,i=r.contents;return[...t,...a(e,i),...r.notesOrder.reduce((t,n)=>{const i=r.notes[n];return[...t,...a(e,i)]},[])]},[]).reduce((e,t,n)=>i({},e,{[t]:n+1}),{}),r=Object.keys(n).sort((e,t)=>{return n[e]<n[t]?-1:1}).map(e=>({contextualizationId:e,order:n[e]}));return{figuresNumberMap:n,figures:r}}if("endOfSections"===n){const n={};return{figuresNumberMap:t.reduce((t,r)=>{const o=e.resources[r].data.contents,s=o.contents,l=[...a(e,s),...o.notesOrder.reduce((t,n)=>{const r=o.notes[n];return[...t,...a(e,r)]},[])].reduce((e,t,n)=>i({},e,{[t]:n+1}),{});return n[r]=Object.keys(l).sort((e,t)=>{return l[e]<l[t]?-1:1}).map(e=>({contextualizationId:e,order:l[e]})),i({},t,{},l)},{}),figures:n}}return{}}},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},function(e,t,n){"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:n(682)}},function(e,t,n){"use strict";e.exports=function(e){var t,n=0,i=0,o=e.charAt(n),a={};for(;o in r;)t=r[o],i+=t,t>1&&(i=Math.floor(i/t)*t),a[i]=n,o=e.charAt(++n);return{indent:i,stops:a}};var r={" ":1,"\t":4}},function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.openCloseTag=new RegExp("^(?:"+r+"|"+i+")"),t.tag=new RegExp("^(?:"+r+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),r=e.indexOf("![",t);if(-1===r)return n;return n<r?n:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(4);function a(e){return e&&e.__esModule?e:{default:e}}const s=({production:e,edition:t,translate:n,data:i={showMentions:!0,showUncitedReferences:!1,resourceTypes:["bib"],sortingKey:"authors",sortingAscending:!0},id:a,MentionComponent:s},{MentionComponent:l,preprocessedData:u})=>{const{showMentions:c,showUncitedReferences:f,resourceTypes:d,sortingKey:p,sortingAscending:h,customTitle:m}=i,g=s||l,b=u&&u.blocks&&u.blocks[a]&&u.blocks[a].bibliographyData;let y;return y=b||(0,o.buildBibliography)({production:e,edition:t,options:{showUncitedReferences:f,resourceTypes:d,sortingKey:p,sortingAscending:h}}),r.default.createElement("section",{className:"composition-block references",title:m||n("References")},r.default.createElement("h2",{id:`reference-block-${a}`,className:"composition-block-title peritext-block-title"},m||n("References")),r.default.createElement("ul",{className:"mentions-container"},y.map((e,t)=>r.default.createElement("li",{key:t,id:e.citationKey,className:"mention-item"},r.default.createElement("div",{className:"title"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.html}})),c&&e.resource.mentions&&e.resource.mentions.find(e=>e&&e.contextContent)&&r.default.createElement("div",{className:"mentions-list"},e.resource.mentions.filter(e=>void 0!==e&&e.contextContent).map((e,t)=>{const{contextContent:{sectionId:n},id:i,containerId:o}=e;return r.default.createElement(g,{key:t,href:`#contextualization-${o}-${i}`,sectionId:n})}).reduce((e,t,n)=>0===n?[t]:[e,", ",t],[]))))))};s.contextTypes={LinkComponent:i.default.func,MentionComponent:i.default.func,preprocessedData:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=s(n(43)),a=n(4);function s(e){return e&&e.__esModule?e:{default:e}}const l=({production:e,edition:t,translate:n,id:i,data:s={showMentions:!0,showDescriptions:!0},MentionComponent:l},{MentionComponent:u,preprocessedData:c})=>{const f=l||u,{showMentions:d,customTitle:p,showDescriptions:h}=s,m=c&&c.blocks&&c.blocks[i]&&c.blocks[i].glossaryData||(0,a.buildGlossary)({options:s,production:e,edition:t});return r.default.createElement("section",{className:"composition-block glossary",title:p||n("Glossary list")},r.default.createElement("h2",{className:"composition-block-title peritext-block-title",id:`glossary-block-${i}`},p||n("Glossary list")),r.default.createElement("ul",{className:"mentions-container"},m.map((e,t)=>r.default.createElement("li",{key:t,id:e.resource.metadata.id,className:"mention-item"},r.default.createElement("div",{className:"title"},e.resource.data.name),h&&r.default.createElement("div",{className:"description"},r.default.createElement(o.default,{src:e.resource.data.description})),d&&e.mentions.length>0&&r.default.createElement("div",{className:"mentions-list"},e.mentions.filter(e=>void 0!==e&&e.contextContent).map((e,t)=>{const{contextContent:{sectionId:n},id:i,containerId:o}=e;return r.default.createElement(f,{key:t,href:`#contextualization-${o}-${i}`,sectionId:n})}).reduce((e,t,n)=>n>0?[e,", ",t]:[t],[]))))))};l.contextTypes={LinkComponent:i.default.func,MentionComponent:i.default.func,preprocessedData:i.default.object};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(295)),o=a(n(735));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=function(e,t,n){return i.default.ucs2.encode(e.slice(t,n))};function u(e,t){return t.forEach((function(t){e.push(t.offset),e.push(t.offset+t.length)})),e}var c=function(){function e(t){var n=t.flat,r=void 0!==n&&n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flat=r}return r(e,[{key:"relevantStyles",value:function(e){return this.ranges.filter((function(t){return e>=t.offset&&e<t.offset+t.length})).map((function(e){return e.style}))}},{key:"nodeIterator",value:function(e,t,n){var r=this,i=this.relevantIndexes.slice(this.relevantIndexes.indexOf(t),this.relevantIndexes.indexOf(n));return i.forEach((function(t,o){var a=r.relevantStyles(t),s=i[o+1]?i[o+1]-t:1,u=l(r.textArray,t,t+s);e.pushContent(u,a,r.flat),!i[o+1]&&t<n&&e.pushContent(l(r.textArray,t+1,n),r.relevantStyles(n-1),r.flat)})),e}},{key:"parse",value:function(e){var t=this,n=e.text,r=e.inlineStyleRanges,a=e.entityRanges,c=e.decoratorRanges,f=void 0===c?[]:c;this.textArray=i.default.ucs2.decode(n),this.ranges=r,this.iterator=0,this.relevantIndexes=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[];return i=u(i,t),i=u(i,n),(i=u(i,r)).push(0),i.push(e.length),i.filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(e,t){return e-t}))}(n,r,a,f);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],r=arguments[3],i=0,a=[].concat(s(e),s(t)).sort((function(e,t){return e.offset-t.offset})),u=[];return a.length<1?(u.push(new o.default({block:r,start:0,end:n.length})),u):(a.forEach((function(e){e.offset>i&&u.push(new o.default({block:r,start:i,end:e.offset})),u.push(new o.default({block:r,entity:e.key,decorator:e.component,decoratorProps:e.decoratorProps,decoratedText:e.component?l(n,e.offset,e.offset+e.length):void 0,start:e.offset,end:e.offset+e.length,contentState:e.contentState})),i=e.offset+e.length})),i<n.length&&u.push(new o.default({block:r,start:i,end:n.length})),u)}(a,f,this.textArray,e).map((function(e){return t.nodeIterator(e,e.start,e.end)}));return new o.default({block:e,content:d})}}]),e}();t.default=c},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,l=2147483647,u=36,c=1,f=26,d=38,p=700,h=72,m=128,g="-",b=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=u-c,w=Math.floor,O=String.fromCharCode;function E(e){throw new RangeError(x[e])}function k(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function S(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+k((e=e.replace(v,".")).split("."),t).join(".")}function T(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function j(e){return k(e,(function(e){var t="";return e>65535&&(t+=O((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=O(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function P(e,t,n){var r=0;for(e=n?w(e/p):e>>1,e+=w(e/t);e>_*f>>1;r+=u)e=w(e/_);return w(r+(_+1)*e/(e+d))}function C(e){var t,n,r,i,o,a,s,d,p,b,y,v=[],x=e.length,_=0,O=m,k=h;for((n=e.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&E("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<x;){for(o=_,a=1,s=u;i>=x&&E("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||d>w((l-_)/a))&&E("overflow"),_+=d*a,!(d<(p=s<=k?c:s>=k+f?f:s-k));s+=u)a>w(l/(b=u-p))&&E("overflow"),a*=b;k=P(_-o,t=v.length+1,0==o),w(_/t)>l-O&&E("overflow"),O+=w(_/t),_%=t,v.splice(_++,0,O)}return j(v)}function N(e){var t,n,r,i,o,a,s,d,p,b,y,v,x,_,k,S=[];for(v=(e=T(e)).length,t=m,n=0,o=h,a=0;a<v;++a)(y=e[a])<128&&S.push(O(y));for(r=i=S.length,i&&S.push(g);r<v;){for(s=l,a=0;a<v;++a)(y=e[a])>=t&&y<s&&(s=y);for(s-t>w((l-n)/(x=r+1))&&E("overflow"),n+=(s-t)*x,t=s,a=0;a<v;++a)if((y=e[a])<t&&++n>l&&E("overflow"),y==t){for(d=n,p=u;!(d<(b=p<=o?c:p>=o+f?f:p-o));p+=u)k=d-b,_=u-b,S.push(O(A(b+k%_,0))),d=w(k/_);S.push(O(A(d,0))),o=P(n,x,r==i),n=0,++r}++n,++t}return S.join("")}s={version:"1.4.1",ucs2:{decode:T,encode:j},decode:C,encode:N,toASCII:function(e){return S(e,(function(e){return y.test(e)?"xn--"+N(e):e}))},toUnicode:function(e){return S(e,(function(e){return b.test(e)?C(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(90)(e),n(33))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decorators=t.slice()}return r(e,[{key:"getDecorations",value:function(e,t){var n=Array(e.getText().length).fill(null);return this.decorators.forEach((function(r,i){var o=0;(0,r.strategy)(e,(function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(n,e,t)&&(!function(e,t,n,r){for(var i=t;i<n;i++)e[i]=r}(n,e,t,i+"."+o),o++)}),t)})),n}},{key:"getComponentForKey",value:function(e){var t=parseInt(e.split(".")[0],10);return this.decorators[t].component}},{key:"getPropsForKey",value:function(e){var t=parseInt(e.split(".")[0],10);return this.decorators[t].props}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e,children:t})=>r.default.createElement("a",{href:e,target:"blank",rel:"noopener"},t);a.propTypes={children:i.default.array,to:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({data:e,children:t},n)=>{const{production:i,containerId:o}=n,a=e.asset&&e.asset.id;if(!a||!i)return null;const s=i.contextualizations[a];if(!s)return null;const l=n.productionAssets||{},u=i.contextualizers[s.contextualizerId],c=i.resources[s.sourceId],f=n.contextualizers[u.type],d=f&&f.Inline;return u&&d?"glossary"===u.type?r.default.createElement("span",{id:`contextualization-${o}-${a}`},t):r.default.createElement("span",{className:`inline-contextualization-container ${u.type}`,id:`contextualization-${o}-${a}`},r.default.createElement(d,{contextualization:s,contextualizer:u,resource:c,renderingMode:"paged",assets:l},t)):null};a.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},a.contextTypes={production:i.default.object,contextualizers:i.default.object,containerId:i.default.string,productionAssets:i.default.object};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({sectionId:e,children:t},{containerId:n})=>r.default.createElement("a",{href:`#section-${n}-${e}`,className:"internal-link"},t,r.default.createElement("span",null,"(p. "),r.default.createElement("span",{className:"page-link",href:`#section-${n}-${e}`}),r.default.createElement("span",null,")"));a.contextTypes={containerId:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),o=(r=n(1))&&r.__esModule?r:{default:r};function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),s(this,"getChildContext",()=>({citations:this.props.citations?this.props.citations.citationComponents:{}})),s(this,"render",()=>{const{children:e}=this.props;return e})}}t.default=l,s(l,"childContextTypes",{citations:o.default.object})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),i=d(n(1)),o=d(n(169)),a=d(n(98)),s=d(n(97)),l=d(n(300)),u=n(4),c=d(n(757)),f=d(n(171));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends r.Component{constructor(e){super(e),h(this,"getChildContext",()=>({notes:this.props.section.data.contents.notes,figuresPosition:this.props.figuresPosition,figuresNumberMap:this.props.figuresNumberMap})),h(this,"render",()=>{const{citations:e,className:t="",section:{id:n,metadata:{subtitle:i,authors:d=[]},data:{contents:{contents:p}}},figuresNumberMap:h,containerId:m,notesPosition:g,figuresPosition:b="endOfSections",figures:y,production:v,translate:x,publicationTitle:_,publicationSubtitle:w,displayHeader:O,level:E=0}=this.props,k=(0,u.getResourceTitle)(this.props.section);return r.default.createElement("section",{className:`section has-notes-position-${g} has-figures-position-${b} level-${E} ${t}`,title:k,id:`section-${m}-${n}`},r.default.createElement(l.default,{citations:e},r.default.createElement("h2",{className:"composition-block-title section-title"},k),r.default.createElement("em",{className:"section-title-running"},k),r.default.createElement("em",{className:"publication-title-running"},_),O&&r.default.createElement(c.default,{resource:this.props.section}),i&&r.default.createElement("h2",{className:"section-subtitle"},i),d.length>0&&r.default.createElement("h3",{className:"section-authors"},r.default.createElement(s.default,{authors:d})),r.default.createElement("div",{className:"section-contents-container"},r.default.createElement(o.default,{raw:p,notesPosition:g,containerId:m})),"endOfSections"===g&&r.default.createElement(a.default,{sectionsIds:[n],production:v,translate:x,citations:e,publicationTitle:_,publicationSubtitle:w}),"endOfSections"===b&&r.default.createElement(f.default,{figures:y,production:v,figuresNumberMap:h})))})}}var g=m;t.default=g,m.childContextTypes={notes:i.default.object,figuresPosition:i.default.object,figuresNumberMap:i.default.object}},function(e,t,n){"use strict";e.exports='\n\n/* variable used for the template */\n:root {\n  --color-link-default: #99B6BD;/* bleu délavé */\n  --color-link-active:#D4613E;/* rouille */\n  --color-text: #4d4c4c;\n\n  font-family:\'Source serif pro\', serif;\n  --gutter-medium: .5cm;\n\n  --margin-bottom: 64.8mm;\n  /*--margin-bottom: 33mm;*/\n  --margin-top: 33mm;\n  --margin-outside: 45.8mm;\n  --margin-inside: 23.3mm;\n\n}\n\n/**\n *\n * PAGES LAYOUTS\n *\n */\n@page{\n  format: A4 portrait;\n}\n\n/* front cover */\n\n@page front-cover {\n  margin: 0e-6cm;\n}\n@page back-cover {\n  margin: 0e-6cm;\n}\n@page front-cover{\n}\n@page colophon:left {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-left: 45.8mm;\n  margin-right: var(--margin-inside);\n  \n  @top-left{\n  }\n  @top-left-corner {\n\n  }\n}\n\n@page colophon:right {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-right: 45.8mm;\n  margin-left: var(--margin-inside);\n  @top-right-corner {\n  }\n  @top-right {\n  }\n}\n@page empty-page {\n}\n@page table-of-contents {\n}\n@page table-of-contents-wpnumber:left {\n  @right-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n@page table-of-contents-wpnumber:right {\n  @left-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n@page custom-page {\n}\n@page custom-page-wpnumber:left {\n  @right-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n@page custom-page-wpnumber:right {\n  @left-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n\n@page section{\n\n}\n\n@page section:left {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-left: 45.8mm;\n  margin-right: var(--margin-inside);\n  @top-center{\n    content: element(publicationTitle);\n  }\n  @right-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n\n@page section:right {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-right: 45.8mm;\n  margin-left: var(--margin-inside);\n  @left-middle{\n    content: counter(page);\n    text-align: center;\n  }\n  @top-center {\n     content: element(sectionTitle);\n  }\n}\n\n@page peritext{\n\n}\n\n@page peritext:left {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-left: 45.8mm;\n  margin-right: var(--margin-inside);\n  @top-left{\n    content: element(publicationTitle);\n  }\n  @right-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n\n@page peritext:right {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-right: 45.8mm;\n  margin-left: var(--margin-inside);\n  @left-middle {\n    content: counter(page);\n    text-align: center;\n  }\n  @top-right {\n  }\n}\n@page section:first{\n  @top-center {\n     content: none;\n  }\n}\n\n@page end-figures:left {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-left: 45.8mm;\n  margin-right: var(--margin-inside);\n  background: whitesmoke;\n  @top-left{\n    content: element(publicationTitle);\n  }\n  @right-middle {\n    content: counter(page);\n    text-align: center;\n  }\n}\n\n@page end-figures:right {\n  margin-top: var(--margin-top);\n  margin-bottom: 33mm;;\n  margin-right: 45.8mm;\n  margin-left: var(--margin-inside);\n  background: whitesmoke;\n  @left-middle {\n    content: counter(page);\n    text-align: center;\n  }\n  @top-right {\n  }\n}\n\n\n.front-cover{\n  page: front-cover;\n  page-break-before: right;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.title-page{\n  page: title-page;\n  page-break-before: right;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n\n\n.colophon{\n  page: colophon;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.back-cover{\n  page: back-cover;\n  page-break-before: left;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.empty-page{\n  page: empty-page;\n}\n\n.table-of-contents{\n  page: table-of-contents;\n  page-break-before: right;\n}\n.table-of-contents.has-page-number{\n  page: table-of-contents-wpnumber;\n  page-break-before: right;\n}\n\n.custom-page{\n  page: custom-page;\n}\n.section{\n  page: section;\n  page-break-before: right;\n}\n.section.resource-section{\n  page-break-before: never;\n}\n\n.glossary{\n  page: peritext;\n}\n.reference{\n  page: peritext;\n}\n\n.custom-page.has-page-number{\n  page: custom-page-wpnumber;\n}\n\n.end-figures{\n  page: end-figures;\n  page-break-before: always;\n}\n\n/**\n *\n * =================\n * =================\n * =================\n * =================\n * =================\n * REUSED COMPONENTS\n * =================\n * =================\n * =================\n * =================\n * =================\n *\n */\nbody{\n  text-rendering: optimizeLebility;\n  color: var(--color-text);\n}\na,\n.page-link{\n  text-decoration: none;\n  // color: var(--color-link-default);\n  color: inherit;\n}\n.page-link::after{\n  content: target-counter(attr(href), page);\n}\n.publication-title-running{\n  position: running(publicationTitle); \n  font-style: normal;\n  font-variant: small-caps;\n}\n.section-title-running{\n  position: running(sectionTitle); \n  font-style: normal;\n  font-variant: small-caps;\n}\n\n.composition-block-title{\n  font-weight: 800;\n  font-size: 50px;\n}\n\n/**\n * Prevent overflow bugs\n */\n.csl-entry,\na{\n  word-break: break-all;\n}\n\n/* lists */\n.mentions-container{\n  padding: 0;\n}\n.mention-item{\n  list-style-type: none;\n  padding: 0;\n  margin-bottom: var(--gutter-medium);\n}\n/* .mention-item .title{} */\n\n.glossary .mention-item .title{\n  font-weight: 800;\n}\n/* .mention-item .description {} */\n.mention-item .mentions-list{\n  opacity: .8;\n  font-size: 80%;\n}\n\n.mention-item .mentions-list::before{\n  content: "◉";\n  font-style: normal;\n  padding-right: calc(.5 * var(--gutter-medium));\n}\n\n/* rendered content */\n.rendered-content .unstyled{\n  text-indent: var(--gutter-medium);\n  margin-bottom: calc(.4 * var(--gutter-medium));\n}\n.rendered-content .unstyled:first-of-type {\n  text-indent: 0;\n}\n\nul + .unstyled,\nblockquote + .unstyled,\nfigure + .unstyled,\n.csl-entry{\n  text-indent: none;\n}\n\n.rendered-content sup{\n  line-height: 0;\n  vertical-align: super;\n      position: relative;\n    top: .2em;\n}\n\n/*.footnote-area .footnote{}*/\n\n.footnote-area .footnote sup{\n  vertical-align: baseline;\n  font-size: 100%;\n}\n.footnote-area .footnote sup::after{\n  content: ".";\n  padding-right: .5em;\n}\n\n/**\n * Figures (general)\n */\n.block-contextualization-container,\n.block-contextualization-container figure\n{\n  padding: 0;\n  margin: 0;\n  page-break-inside: avoid;\n}\n.block-contextualization-container .figure-caption{\n  padding-top: calc(.5 * var(--gutter-medium));\n}\n.block-contextualization-container .figure-title{\n  margin: 0;\n  font-weight: normal;\n}\n.block-contextualization-container .figure-title .mention-context-pointer{\n  font-size: 1.2rem;\n  padding: 0;\n}\n.block-contextualization-container .figure-legend{\n  font-size: 1em;\n  margin-top: 0;\n}\n.block-contextualization-container .figure-legend p{\n  margin-top: 0;\n}\n.block-contextualization-container figure{\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n.block-contextualization-container img\n{\n  max-width: 100%;\n  max-height: 10cm;\n}\n.block-contextualization-container iframe\n{\n  min-height: 30%;\n  outline: none;\n  border: none;\n  width: 100%;\n  max-height: 4cm;\n  min-height: 3cm;\n}\n\n/**\n * Aside figures\n */\n.section.has-figures-position-endOfSections .section-contents-container .block-contextualization-container,\n.section.has-figures-position-endOfContents .section-contents-container .block-contextualization-container\n{\n  position: absolute;\n}\n.pagedjs_left_page .section.has-figures-position-endOfSections .section-contents-container .block-contextualization-container,\n.pagedjs_left_page .section.has-figures-position-endOfContents .section-contents-container .block-contextualization-container\n{\nleft: -4cm;\n}\n\n\n.pagedjs_right_page .section.has-figures-position-endOfSections .section-contents-container .block-contextualization-container,\n.pagedjs_right_page .section.has-figures-position-endOfContents .section-contents-container .block-contextualization-container\n{\nright: -4cm;\n}\n\n.section.has-figures-position-endOfSections .section-contents-container .block-contextualization-container img,\n.section.has-figures-position-endOfContents .section-contents-container .block-contextualization-container img\n{\n  max-width: 3cm;\n}\n\n.section.has-figures-position-endOfSections .section-contents-container .block-contextualization-container .specific-image-container:not(:first-of-type),\n.section.has-figures-position-endOfContents .section-contents-container .block-contextualization-container .specific-image-container:not(:first-of-type)\n{\n  display: none\n}\n\n.block-contextualization-placeholder{\n  background: lightgrey;\n  width: 3cm;\n  height: 2cm;\n}\n\n/**\n * End figures\n */\n.figures-list{\n  list-style: none;\n  padding: 0;\n}\n.figures-list .end-figure-container{\n  margin-bottom: var(--gutter-medium);\n}\n\n/**\n * Figures (specific)\n */\n/* tables */\n.block-contextualization-container.table{\n  page-break-before: always;\n  max-width: 100%;\n  overflow: hidden;\n}\n\n.block-contextualization-container.table table th,\n.block-contextualization-container.table table tr\n {\n    border-right: 1px solid black;\n    border-bottom: 1px solid black;\n  font-size: 8px;\n}\n\n.block-contextualization-container.bib .figure-caption{\n  display: none;\n}\ncite{\n  font-style: inherit;\n}\n\n/* images */\n.block-contextualization-container.image .static-images-container{\n  display: flex;\n  flex-flow: row wrap;\n  // justify-content: center;\n}\n.block-contextualization-container.image .static-images-container img{\n  display: block;\n}\n.block-contextualization-container.image .image-specific-caption {\n  font-style: italic;\n  font-size: 70%;\n  opacity: .8;\n  padding: calc(.5 * var(--gutter-medium));\n  padding-left: 0;\n}\n\n.inline-images-container img {\n  max-width: 2rem;\n  max-height: 1rem;\n  padding-right: .3rem;\n}\n\n/* vegaLite visualizations */\n.block-contextualization-container.vegaLite .vegaLite > div {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: var(--gutter-medium);\n  page-break-inside: avoid;\n}\n/**\n *\n * =================\n * =================\n * =================\n * =================\n * =================\n * VIEW SPECIFIC COMPONENTS\n * =================\n * =================\n * =================\n * =================\n * =================\n *\n */\n/* front cover components */\n.front-cover .front-cover-title {\n    font-size: 50px;\n    margin-bottom: 0;\n}\n.front-cover .front-cover-subtitle {\n    font-size: 30px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n.front-cover .front-cover-authors{\n  color: var(--color-link-active);\n  font-size: 20px;\n}\n.front-cover .front-cover-footer{\n  font-style: italic;\n}\n/* title-page */\n.title-page{\n  text-align: center;\n}\n.title-page .title-page-title {\n    font-size: 50px;\n    margin-bottom: 0;\n}\n.title-page .title-page-subtitle {\n    font-size: 30px;\n    margin-top: 15px;\n    margin-bottom: 15px;\n}\n.title-page .title-page-authors{\n  font-size: 22px;\n}\n.title-page .title-page-footer{\n  font-style: italic;\n}\n.front-cover svg {}\n/* colophon components */\n.colophon-content{\n  position: absolute;\n  bottom: 0;\n}\n\n/* back cover components */\n.back-cover .back-cover-title {\n    font-size: 30px;\n    margin-bottom: 0;\n}\n.back-cover .back-cover-subtitle {\n    font-size: 20px;\n    margin-top: 5px;\n    margin-bottom: 15px;\n}\n.back-cover .back-cover-authors{\n  color: var(--color-link-active);\n  font-size: 16px;\n}\n.back-cover .back-cover-text{\n  max-height: 60%;\n}\n.back-cover .back-cover-footer{\n  font-style: italic;\n}\n\n/* toc views components */\n.table-of-contents .table-of-contents-elements-container{\n  padding: 0;\n}\n.table-of-contents .table-of-contents-element{\n  list-style-type: none;\n  margin: 0;\n  font-size: 20px;\n}\n.table-of-contents .table-of-contents-element { \n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  \n}\n.table-of-contents .table-of-contents-element .element-leading{\n  flex: 1;\n  content: " ";\n  border-bottom: 1px dashed var(--color-text);\n}\n.table-of-contents .table-of-contents-element .element-title,\n.table-of-contents .table-of-contents-element .page-link\n{\n   position: relative;\n   top: .25em;\n   min-width: 50px;\n}\n.table-of-contents .table-of-contents-element .page-link{\n  text-align: right;\n}\n.table-of-contents .table-of-contents-element.level-0{\n}\n.table-of-contents .table-of-contents-element.level-1{\n  margin-left: calc(.3 * var(--gutter-medium)); \n}\n.table-of-contents .table-of-contents-element.level-2{\n  margin-left: calc(.6 * var(--gutter-medium)); \n  \n}\n.table-of-contents .table-of-contents-element.level-3{\n  margin-left: calc(.9 * var(--gutter-medium)); \n}\n.table-of-contents .table-of-contents-element.level-4{\n  margin-left: calc(1.2 * var(--gutter-medium)); \n  \n}\n.table-of-contents .table-of-contents-element.level-5{\n  margin-left: calc(1.5 * var(--gutter-medium)); \n  \n}\n.table-of-contents .table-of-contents-element.level-6{\n  margin-left: calc(1.8 * var(--gutter-medium)); \n  \n}\n/* sections views */\n.section.has-notes-position-sidenotes .sidenote { \n  color: var(--color-link-default);\n  border-left: 3px solid var(--color-link-default);\n  margin-left: .5em;\n  padding-left: .5em;\n  font-size: .8em;\n  vertical-align: baseline;\n}\n.end-notes{\n  padding-left: 0;\n}\n.end-notes li{\n  list-style-type: none;\n  margin-left: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n}\n\n.end-notes li .rendered-content{\n  flex: 1;\n  padding-left: 1rem;\n}\n\n.end-notes li .rendered-content .unstyled:first-of-type {\n  text-indent: 0;\n}\n  \n.footnote{\n  font-size: 80%;\n  vertical-align: baseline;\n  opacity: .8;\n}\n\n\n/*.section-title{}*/\n\n.resource-section .section-title{\n  margin-top: 0;\n}\n\n/* front cover and back cover */\n.front-cover{\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n}\n.title-page{\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n}\n.back-cover{\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n}\n.front-cover .front-cover-footer,\n.back-cover .back-cover-footer,\n.title-page .title-page-footer\n{\n  position : absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n\n.front-cover .front-cover-content,\n.back-cover .back-cover-content\n{\n  // background: white;\n  // var(--color-text);\n  color: white;\n  padding: 2cm;\n}\n.back-cover-content {\n  margin: 2cm;\n}\n.front-cover.with-animated-background-gradient,\n.back-cover.with-animated-background-gradient\n{\n  background: linear-gradient(-45deg, #EE7752, #E73C7E, #23A6D5, #23D5AB);\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 15s ease infinite;\n  -moz-animation: Gradient 15s ease infinite;\n  animation: Gradient 15s ease infinite;\n}\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertEditionToCslRecord=t.convertSectionToCslRecord=t.makeAssetTitle=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(4),a=n(30);t.makeAssetTitle=(e,t,n)=>{switch(e.metadata.type){case"glossary":return e.data.name?e.data.name:`${e.data.firstName} ${e.data.lastName}`;case"bib":const t=(0,o.resourceToCslJSON)(e)[0],r=(0,a.makeBibliography)({[t.id]:t},n.data.citationStyle.data,n.data.citationLocale.data,{select:[{field:"id",value:e.data.citations[0].id}]})[1];return i.default.createElement("div",{dangerouslySetInnerHTML:{__html:r}});default:return e.metadata.title}};t.convertSectionToCslRecord=(e,t,n={})=>{const{data:r={}}=n,{publicationTitle:i,publicationDate:o,publicationAuthors:a=[],bibType:s="book"}=r,l=i||t.metadata.title,u=a.length?a:t.metadata.authors||[];let c;const f={};let d;f.id=e.id,f.title=e.metadata.title;const p=(d=o?new Date(o):new Date).getFullYear(),h=d.getMonth(),m=d.getDate();f.issued={"date-parts":[p,h,m]};const g=e.metadata.authors&&e.metadata.authors.length?e.metadata.authors:u;switch(f.abstract=t.metadata.abstract,f.author=g.map(e=>({given:e.given,family:e.family})),s){case"article":c="article";break;case"book":case"booklet":case"inbook":case"incollection":c="chapter",f.booktitle=l;break;case"mastersthesis":case"phdthesis":c="chapter",f.booktitle=l;break;case"proceedings":case"inproceedings":c="paper-conference",f.booktitle=l;break;case"techreport":case"unpublished":case"manual":case"misc":default:c="webpage"}return f.type=c,f};t.convertEditionToCslRecord=(e,t={})=>{const{data:n={}}=t,{publicationTitle:r,publicationDate:i,publicationAuthors:o=[],bibType:a="book"}=n,s=r||e.metadata.title,l=o.length?o:e.metadata.authors||[],u={};let c;u.id=e.id,u.title=s,u.abstract=e.metadata.abstract;const f=(c=i?new Date(i):new Date).getFullYear(),d=c.getMonth(),p=c.getDate();switch(u.issued={"date-parts":[f,d,p]},u.author=l.map(e=>({given:e.given,family:e.family})),a){case"booklet":case"incollection":case"inbook":case"proceedings":u.type="chapter";break;case"mastersthesis":case"phdthesis":u.type="thesis";break;case"inproceedings":u.type="paper-conference";break;case"techreport":u.type="report";break;case"manual":case"unpublished":u.type="manuscript";break;case"misc":u.type="webpage";break;default:u.type=a}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=s(n(173)),a=s(n(44));function s(e){return e&&e.__esModule?e:{default:e}}const l=({contents:e,sectionTitle:t,targetId:n,contextualizationId:i,displayLinks:s=!0},{getViewIdForSectionId:l})=>{const u=l(n);return r.default.createElement("div",{className:"context-mention","data-tip":t,"data-for":"tooltip","data-place":"left"},s?r.default.createElement("div",null,r.default.createElement("div",{className:"excerpt"},r.default.createElement(a.default,{to:{routeClass:u?"sections":"resourcePage",viewId:u,routeParams:{resourceId:n,contextualizationId:i}}},r.default.createElement(o.default,{raw:e}),r.default.createElement("h3",{className:"mention-section-name"},t)))):r.default.createElement("div",null,r.default.createElement("h3",null,t),r.default.createElement("div",{className:"excerpt"},r.default.createElement(o.default,{raw:e}))))};l.contextTypes={translate:i.default.func,getViewIdForSectionId:i.default.func};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=s(n(99)),a=n(4);function s(e){return e&&e.__esModule?e:{default:e}}const l=({resource:e,showTitle:t=!0},{contextualizers:n,translate:i})=>{const s=(0,a.getResourceTitle)(e),l="glossary"!==e.metadata.type&&n.bib&&n.bib.Block,u="glossary"===e.metadata.type?e.data.description:e.metadata.description;return r.default.createElement("div",{className:"resource-identity-card"},r.default.createElement("div",{className:"main-info"},t&&r.default.createElement("div",{className:"title"},!l&&r.default.createElement("span",{className:"resource-identity-card-title"},s),l&&r.default.createElement(l,{resource:e,renderingMode:"screened"}))),r.default.createElement("div",{className:"additional-info"},r.default.createElement("div",{className:"type"},i("glossary"===e.metadata.type?e.data.entryType:e.metadata.type)),u&&u.trim().length&&r.default.createElement("div",{className:"description"},r.default.createElement(o.default,{src:u})),e.metadata.source&&e.metadata.source.trim().length&&r.default.createElement("div",{className:"source"},r.default.createElement("span",null,i("source"),": "),r.default.createElement("span",null,e.metadata.source))))};l.contextTypes={citationItems:i.default.object,contextualizers:i.default.object,translate:i.default.func};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e})=>r.default.createElement("head",null,e);var s=({section:e,production:t,edition:n,withHelmet:o=!1})=>{if(!e||!t)return null;const s=`${n.data.publicationTitle&&n.data.publicationTitle.length?n.data.publicationTitle:t.metadata.title} - ${e.metadata.title}`,l=e.metadata.authors&&e.metadata.authors.length?e.metadata.authors:t.metadata.authors||[],u=e.metadata.tags&&e.metadata.tags.length?e.metadata.tags:t.metadata.tags||[],c=e.metadata.description&&e.metadata.description.length?e.metadata.description:t.metadata.description,f=l.map(e=>`${e.given} ${e.family}`).join(", "),d=o?i.default:a;return r.default.createElement(d,null,r.default.createElement("meta",{charSet:"UTF-8"}),r.default.createElement("title",null,s),r.default.createElement("meta",{name:"generator",content:"peritext"}),r.default.createElement("meta",{name:"DC.Title",lang:"fr",content:s}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),l.map((e,t)=>r.default.createElement("meta",{key:`${e.family}, ${e.given}-${t}`,name:"DC.creator",content:`${e.family}, ${e.given}`})),r.default.createElement("meta",{name:"DC.issued",lang:"fr",content:n.metadata.lastUpdateAt&&new Date(n.metadata.lastUpdateAt).toISOString()}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),r.default.createElement("meta",{name:"author",content:f}),r.default.createElement("meta",{name:"keywords",content:u.join(",")}),r.default.createElement("meta",{name:"description",content:c}),r.default.createElement("meta",{name:"viewport",content:"user-scalable=no,width=device-width"}),r.default.createElement("meta",{name:"twitter:card",value:"summary"}),r.default.createElement("meta",{name:"twitter:site",content:""}),r.default.createElement("meta",{name:"twitter:title",content:s}),r.default.createElement("meta",{name:"twitter:description",content:c}),r.default.createElement("meta",{itemProp:"name",content:s}),r.default.createElement("meta",{itemProp:"description",content:c}),r.default.createElement("meta",{property:"og:title",content:s}),r.default.createElement("meta",{property:"og:type",content:"website"}),r.default.createElement("meta",{property:"og:url",content:""}),r.default.createElement("meta",{property:"og:description",content:c}))};t.default=s},function(e,t){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var u=o[l];if(!s(u))return!1;var c=e[u],f=t[u];if(!1===(i=n?n.call(r,c,f,u):void 0)||void 0===i&&c!==f)return!1}return!0}},function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map((function(e){return n[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e})=>r.default.createElement("head",{profile:"http://dublincore.org/documents/2008/08/04/dc-html/"},e);var s=({production:e,edition:t={},pageName:n,withHelmet:o=!1})=>{const s=`${t.data.publicationTitle&&t.data.publicationTitle.length?t.data.publicationTitle:e.metadata.title}${n?` - ${n}`:""}`,l=e.metadata.authors||[],u=e.metadata.tags||[],c=e.metadata.description,f=l.map(e=>`${e.given} ${e.family}`).join(", "),d=o?i.default:a;return r.default.createElement(d,null,r.default.createElement("meta",{charSet:"UTF-8"}),r.default.createElement("title",null,s),r.default.createElement("meta",{name:"generator",content:"peritext"}),r.default.createElement("link",{rel:"schema.DC",href:"http://purl.org/dc/elements/1.1/"}),r.default.createElement("meta",{name:"DC.Title",lang:"fr",content:s}),l.map((e,t)=>r.default.createElement("meta",{key:`${e.family}, ${e.given}-${t}`,name:"DC.creator",content:`${e.family}, ${e.given}`})),r.default.createElement("meta",{name:"DC.issued",lang:"fr",content:t.metadata.lastUpdateAt&&new Date(t.metadata.lastUpdateAt).toISOString()}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),r.default.createElement("meta",{name:"author",content:f}),r.default.createElement("meta",{name:"keywords",content:u.join(",")}),r.default.createElement("meta",{name:"description",content:c}),r.default.createElement("meta",{name:"viewport",content:"user-scalable=no,width=device-width"}),r.default.createElement("meta",{name:"twitter:card",value:"summary"}),r.default.createElement("meta",{name:"twitter:site",content:""}),r.default.createElement("meta",{name:"twitter:title",content:s}),r.default.createElement("meta",{name:"twitter:description",content:c}),r.default.createElement("meta",{itemProp:"name",content:s}),r.default.createElement("meta",{itemProp:"description",content:c}),r.default.createElement("meta",{property:"og:title",content:s}),r.default.createElement("meta",{property:"og:type",content:"website"}),r.default.createElement("meta",{property:"og:url",content:""}),r.default.createElement("meta",{property:"og:description",content:c}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scrollbars=void 0;var r,i=n(790),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default,t.Scrollbars=o.default},function(e,t,n){var r=n(793),i=n(794),o={float:"cssFloat"},a=n(797);function s(e,t,n){var s=o[t];if(void 0===s&&(s=function(e){var t=i(e),n=r(t);return o[t]=o[e]=o[n]=n,n}(t)),s){if(void 0===n)return e.style[s];e.style[s]=a(s,n)}}function l(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:function(e,t){for(var n in t)t.hasOwnProperty(n)&&s(e,n,t[n])}(arguments[0],arguments[1]):s(arguments[0],arguments[1],arguments[2])}e.exports=l,e.exports.set=l,e.exports.get=function(e,t){return Array.isArray(t)?t.reduce((function(t,n){return t[n]=s(e,n||""),t}),{}):s(e,t||"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="\n/**\n * DOCUMENTATION\n\nThis template is programmed according to mobile-first methodology (no media query = mobile version)\n\nThe organization is roughly as following :\n0. template's CSS variables\n1. first-level containers layout rules, for mobile, then tablet, then desktop version\n2. reused components rules\n3. view-specific rules\n\nUsed breakpoints\n- tablet : 768px;\n- desktop: 1224px;\n */\n/**\n * =================\n * =================\n * =================\n * Default variables\n * =================\n * =================\n * =================\n */\n:root \n{\n  --aside-toggle-width: 2rem;\n  --mobile-nav-head-height: 2rem;\n\n  --transition-medium: 1000ms;\n\n  --tablet-main-width: 75%;\n\n  --color-background: #ffffff;\n  --color-link-default: #99B6BD;/* bleu délavé */\n  --color-link-active:#D4613E;/* rouille */\n  --color-text: #4d4c4c;\n\n  --desktop-nav-width: 16%;\n  --desktop-aside-width: 20%;\n\n  --content-margin-width: 20vw;\n\n  --gutter-medium: 1rem;\n  --gutter-large: 2rem;\n\n  font-size: 18px;\n}\n\n@media screen and (min-width: 1224px){\n  :root{\n    font-size: 15px;\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Resets\n * =================\n * =================\n * =================\n */\nbutton{\n  background: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n}\n\n/**\n * =================\n * =================\n * =================\n * Register animated elements here\n * =================\n * =================\n * =================\n */\n.deucalion-layout .nav,\n.deucalion-layout .nav-content-container,\n.deucalion-layout .aside,\n.deucalion-layout .aside-toggle,\n.deucalion-layout .nav-toggle-symbol,\n.deucalion-layout .main-container\n{\n  transition: all ease var(--transition-medium);\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, mobile version\n * =================\n * =================\n * =================\n */\n\n/**\n * Nav mobile layout\n */\n.deucalion-layout .nav{\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  min-height: var(--mobile-nav-head-height);\n  max-height: var(--mobile-nav-head-height);\n  overflow: hidden;\n}\n.deucalion-layout .nav-header{\n  min-height: var(--mobile-nav-head-height);\n  max-height: var(--mobile-nav-head-height);\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  background: var(--color-background);\n  align-items: center;\n  margin-top: 0;\n\n}\n.deucalion-layout .nav-header .title {\n  flex: 1;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  /*align-items: center;*/\n  justify-content: stretch;\n}\n.deucalion-layout .nav-header .title,\n.deucalion-layout .nav-content-container{\n  margin-left: calc(var(--content-margin-width) - var(--gutter-medium) * 2);  \n}\n.deucalion-layout .nav-header .title{\n  margin-right: calc(var(--content-margin-width) - var(--gutter-medium) * 2);  \n\n}\n.deucalion-layout .nav-header .title .location-title{\n  flex: 1;\n  padding-top: .4rem;\n}\n.deucalion-layout .nav-content-container{\n  overflow-y: auto;\n  max-height: calc(100% - var(--mobile-nav-head-height) * 2);\n  max-width: var(--tablet-main-width)\n}\n\n.deucalion-layout.has-index-open .nav{\n  min-height: 100%;\n  max-height: 100%;\n  height: 100%;\n  background: var(--color-background);\n}\n\n.deucalion-layout .nav-header .nav-toggle {\n  width: calc(var(--gutter-medium) * 2);\n  justify-content: center;\n  align-items: center;\n  display: flex;\n}\n\n\n/**\n * Aside mobile layout\n */\n.deucalion-layout .aside{\n  position: fixed;\n  top: var(--mobile-nav-head-height);\n  left: calc(100% - var(--aside-toggle-width));\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  pointer-events: none;\n  padding-left: var(--aside-toggle-width);\n}\n.deucalion-layout .aside.is-active{\n  opacity: 1;\n  pointer-events: all;\n  background: var(--color-background);\n}\n\n.deucalion-layout .aside-toggle{\n  position : absolute;\n  left: 0;\n  top: 0;\n  width: var(--aside-toggle-width);\n  height: 100%;\n}\n\n.deucalion-layout.has-aside-visible .aside{\n  left: 0;\n}\n\n.deucalion-layout .railway{\n  display: none;\n}\n\n/**\n * Main contents mobile layout\n */\n.deucalion-layout .main-container{\n  position: fixed;\n  top: var(--mobile-nav-head-height);\n  height: calc(100% - var(--mobile-nav-head-height));\n  width: 100%;\n  left: 0;\n  box-sizing: border-box;\n  overflow-y: auto;\n}\n\n.deucalion-layout.has-aside-visible .main-container{\n  left: -100%;\n}\n\n/*\n.deucalion-layout .view-title{\n  display: none;\n}\n*/\n\n/**\n * =================\n * =================\n * =================\n * Global layout, tablet version\n * =================\n * =================\n * =================\n */\n@media screen and (min-width: 768px) {\n  /**\n   * Aside tablet layout\n   */\n  .deucalion-layout .aside{\n    left: var(--tablet-main-width);\n    width: calc(100% - var(--tablet-main-width));\n    height: 100%;\n    \n    padding-left: 0;\n  }\n\n  .deucalion-layout .aside-toggle{\n    display: none;\n  }\n\n  .deucalion-layout.has-aside-visible .aside{\n    left: var(--tablet-main-width);\n    width: calc(100% - var(--tablet-main-width));\n  }\n\n  .deucalion-layout .railway{\n    display: block;\n  }\n  /**\n   * Main contents tablet layout\n   */\n  .deucalion-layout .main-container{\n    width: 100%;\n  }\n  .deucalion-layout .main-contents-container,\n  .deucalion-layout .navigation-footer{\n    padding-right: calc(100% - var(--tablet-main-width));\n  }\n\n  .deucalion-layout.has-aside-visible .main-container{\n    left: 0;\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, desktop version\n * =================\n * =================\n * =================\n */\n@media screen and (min-width: 1224px) {\n  /**\n   * Nav desktop layout\n   */\n  .deucalion-layout .nav{\n    position: fixed;\n    width: var(--desktop-nav-width);\n    top: 0;\n    left: 0;\n    height: 100%;\n    min-height: unset;\n    max-height: 100%;\n    overflow: hidden;\n    background: var(--color-background);\n    padding: var(--gutter-medium);\n    opacity: .5;\n  }\n  .deucalion-layout .nav:hover{\n    opacity: 1;\n  }\n  .deucalion-layout .nav-header{\n    max-height: unset;\n  }\n  .deucalion-layout .nav-header .title{\n    height: unset;\n    margin:0;\n  }\n  .deucalion-layout .nav-header .nav-toggle {\n    display: none;\n  }\n  .deucalion-layout .nav-header .title,\n  .deucalion-layout .nav-content-container\n  {\n    margin-left: 0;\n  }\n\n  .deucalion-layout .nav-header .title{\n    font-size: 1.3rem;\n    margin-bottom: var(--gutter-medium);\n  }\n\n  /* do not display location as it is always visible */\n  .deucalion-layout .location-title{\n    display: none;\n  }\n\n  /**\n   * Aside desktop layout\n   */\n  .deucalion-layout .aside{\n    position: fixed;\n    top: 0;\n    left: calc(100% - var(--desktop-aside-width));\n    width: var(--desktop-aside-width);\n    height: 100%;\n  }\n  .deucalion-layout .aside-toggle{\n    display: none;\n  }\n\n  .deucalion-layout.has-aside-visible .aside{\n    left: calc(100% - var(--desktop-aside-width));\n    width: var(--desktop-aside-width);\n  }\n\n  /**\n   * Main contents desktop layout\n   */\n  .deucalion-layout .main-container{\n    position: fixed;\n    top: 0;\n    left: var(--desktop-nav-width);\n    height: 100%;\n    width: calc(100% - var(--desktop-nav-width));\n    padding: var(--gutter-medium);\n  }\n  .deucalion-layout .view-title{\n    display: block;\n  }\n  .deucalion-layout .main-contents-container,\n  .deucalion-layout .navigation-footer{\n    padding-right: calc(var(--desktop-aside-width) * 1.3);\n  }\n\n  .deucalion-layout.has-aside-visible .main-container{\n    left: var(--desktop-nav-width);\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, print version\n * =================\n * =================\n * =================\n */\n@media print {\n  .deucalion-layout .nav,\n  .deucalion-layout .aside,\n  .navigation-footer{\n    display: none;\n  }\n  .deucalion-layout .view-title{\n    display: block;\n  }\n  .deucalion-layout .main-container{\n    left: unset;\n    top: unset;\n    width: unset;\n    height: unset;\n    position: relative;\n    overflow: visible;\n  }\n  /** scroll bars */\n  .deucalion-layout .main-container > div,\n  .deucalion-layout .main-container > div > div{\n    left: unset;\n    top: unset;\n    width: unset;\n    height: unset;\n    position: relative;\n    overflow: visible!important;\n  }\n  .deucalion-layout .main-container .main-column{\n    padding: 1cm;\n  }\n\n}\n\n/**\n * ======\n * ======\n * ======\n * ======\n * ======\n * END of global layout rules\n * ======\n * ======\n * ======\n * ======\n * ======\n */\n\n/**\n * ======\n * Components styling\n * ======\n */\n/**\n * GENERAL TYPOGRAPHY\n */\n.deucalion-layout{\n  text-rendering: optimizeLegibility;\n  color: var(--color-text);\n  font-family:'Source serif pro', serif;\n}\n.link:not(sup),\na,\na:visited,\n.inline-glossary\n{\n  color: var(--color-link-default);\n  cursor: pointer;\n  text-decoration: none;\n}\n.link.active,\n.inline-glossary.active,\na:active{\n  color: var(--color-link-active);\n}\n\n.deucalion-layout sup{\n  font-size: .5em;\n}\n/**\n * GENERAL COMPONENTS\n */\n.inline-contextualization-container{\n  cursor: pointer;\n  transition : .5s ease;\n}\n.inline-contextualization-container:hover,\n.inline-contextualization-container.active\n{\n  color: white;\n  background: var(--color-link-default);\n}\n/* bibliographic citations */\n.csl-entry {\n    // word-break: break-all;\n}\ncite{\n  font-style: inherit;\n}\n\n/* nav toggle */\n.deucalion-layout .nav-header .nav-toggle {\n  width: calc(var(--gutter-medium) * 2);\n}\n.deucalion-layout.has-index-open .nav-toggle-symbol{\n  display: inline-block;\n  transform: rotate(0deg);\n}\n\n.deucalion-layout.has-index-open .nav-toggle-symbol{\n  transform: rotate(45deg);\n}\n\n/* aside toggle */\n.deucalion-layout.has-aside-visible .aside-toggle{\n  transform: rotate(180deg);\n}\n\n/* views title */\n.view-title{\n  margin-top: 0;\n}\n\n/* views main contents */\n/** we always keep the same padding left for main column\neven when notes are in the end*/\n.main-contents-container .main-column {\n  padding-left: var(--content-margin-width);\n  padding-bottom: var(--gutter-medium);\n  padding-right: var(--gutter-medium);\n}\n\n/**\n * RENDERED CONTENT (ANYTHING COMING FROM DRAFT)\n */\n.rendered-content p,\n.rendered-content ul,\n.rendered-content ol,\n.rendered-content blockquote,\n.rendered-content pre,\n.rendered-content .unstyled\n{\n  margin-bottom: var(--gutter-medium);\n  line-height: 1.4;\n}\n\n.has-view-class-sections .main-column .rendered-content .unstyled:first-of-type::first-letter{\n  font-size:3.5em;\n  padding-right:0.2em;\n  padding-bottom: 0;\n  float:left;\n}\nh1{\n    font-size: 1.5em;\n    margin-bottom: .5em;\n}\n\n.rendered-content blockquote{\n  margin: 0;\n  margin-bottom: var(--gutter-medium);\n  padding: var(--gutter-medium);\n  padding-left: var(--gutter-large);\n  position: relative;\n  background: rgba(0,0,0,0.03);\n  quotes: '« ' ' »' '‹ ' ' ›';\n}\n\n/*\n.note-item .rendered-content blockquote{\n  padding: var(--gutter-small);\n}\n*/\n.rendered-content blockquote:after\n{\n    position: absolute;\n    right: 2px;\n    bottom: 2px;\n\n    content: close-quote;\n}\n\n.rendered-content blockquote:before\n{\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    content: open-quote;\n}\n\n\n/**\n * Figures (general)\n */\n.block-contextualization-container,\n.block-contextualization-container figure\n{\n  padding: 0;\n  margin: 0;\n  transition: .5s ease;\n}\n.block-contextualization-container .figure-caption{\n  /*border-top: 1px solid var(--color-link-default);*/\n  padding: var(--gutter-medium);\n  font-size: .8em;\n}\n\n.block-contextualization-container .figure-caption .link{\n  color: inherit;\n}\n\n.block-contextualization-container:hover,\n.block-contextualization-container.active\n{\n  color: white;\n  background: var(--color-link-default)\n}\n\n.block-contextualization-container .figure-title{\n  margin: 0;\n}\n.block-contextualization-container .figure-title .mention-context-pointer,\n  .block-contextualization-container .figure-title button.mention-context-pointer{\n  font-size: 1rem;\n  font-family:'Source serif pro', serif;\n  padding: 0;\n  text-align: left;\n}\n.block-contextualization-container .figure-legend{\n  font-size: 1em;\n  margin-top: 0;\n}\n.block-contextualization-container .figure-legend p{\n  margin-top: 0;\n}\n.block-contextualization-container figure{\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n.block-contextualization-container img\n{\n  max-width: 100%;\n  min-width: 100%;\n  // max-height: 80vh;\n  // min-height: 40vh;\n}\n.block-contextualization-container iframe\n{\n  min-height: 50vh;\n  outline: none;\n  border: none;\n  width: 100%;\n  max-width: 100%;  \n  height: 100%;\n}\n/**\n * Figures (specific)\n */\n.block-contextualization-container.bib .figure-caption{\n  display: none;\n}\n.block-contextualization-container.image img{\n  cursor: pointer;\n  transition: opacity ease var(--transition-medium);\n}\n.block-contextualization-container.image img:hover{\n  opacity: .8;\n}\n.block-contextualization-container.image .image-nav-container{\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n}\n.block-contextualization-container.image .image-nav-item{\n  list-style-type: none;\n  cursor: pointer;\n}\n\n.block-contextualization-container.image .image-nav-item-counter{\n  display: none;\n}\n\n.block-contextualization-container.image .image-nav-item::after{\n  content : \"◉\";\n  color: var(--color-link-default);\n}\n.block-contextualization-container.image .image-nav-item.is-active::after{\n  color: var(--color-link-active);\n}\n\n.inline-contextualization-container.image{\n  cursor: pointer;\n}\n\n.inline-images-container img {\n      max-width: 2rem;\n      max-height: 1rem;\n      padding-right: .3rem;\n}\n\n.block-contextualization-container.embed{\n  min-height: 50vh;\n  position: absolute;\n  position: relative;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.block-contextualization-container.embed .fullscreen > div{\n  height: 100%;\n}\n\n.block-contextualization-container.embed .fullscreen-btn{\n  position : absolute;\n  right: 1rem;\n  bottom: 4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  background: white;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.block-contextualization-container.embed .fullscreen .fullscreen-btn{\n  right: 1rem;\n  botttom: 1rem;\n}\n.peritext-contextualization.block.embed .cover{\n  position: relative;\n  cursor: pointer;\n}\n\n.peritext-contextualization.block.embed .cover img{\n  max-width: 100%;\n  max-height: 100%;\n  min-height: unset;\n}\n\n\n.block-contextualization-container.embed .cover h3{\n      background: rgba(0,0,0,0.8);\n      color: white;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: .5s ease;\n      padding: 0;\n      margin: 0;\n}\n.block-contextualization-container.embed .cover h3&:hover{\n  background: rgba(0,0,0,0.5);\n}\n\n.block-contextualization-container.table{\n  max-width: 100%;\n  width: 100%;\n}\n.block-contextualization-container.table .static-table-container{\n  max-width: 100%;\n  width: 100%;\n  position: relative;\n  overflow: auto;\n  // height: 70vh;\n}\n.block-contextualization-container.table .static-table-container table{\n  // position: absolute;\n  // left: 0;\n  // top: 0;\n}\n.block-contextualization-container.table .ReactTable .rt-tbody{\n  max-height: 70vh;\n  overflow: auto;\n}\n\n.block-contextualization-container.table .ReactTable\n{\n    max-width: 100%;\n}\n\n.block-contextualization-container.table .ReactTable .-pagination\n{\n    height: 5rem;\n}\n\n.block-contextualization-container.table table th {\n    border-right: 1px solid black;\n    border-bottom: 1px solid black;\n    text-align: left;\n    font-weight: 400;\n    text-indent: 0;\n    font-size: .8em;\n}\n\n.block-contextualization-container.table table thead th {\n  font-weight: 800;\n}\n\n.block-contextualization-container.vegaLite .vegaLite > div {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: var(--gutter-medium);\n}\n\n/**\n * Inline (specific)\n * */\n.block-contextualization-container.bib {\n  cursor: pointer;\n}\n\n/**\n * BIG LISTS (GLOSSARY, REFERENCES, ...)\n */\n.big-list-items-container{\n  padding: 0;\n}\n\n.big-list-item-actions .link{\n  font-size: .8rem;\n  padding: 0;\n  font-family: inherit;\n\n}\n\n.big-list-item{\n  margin: 0;\n  list-style-type: none;\n  // margin-bottom: var(--gutter-medium);\n  padding: var(--gutter-medium);\n  padding-right: calc(2*var(--gutter-medium));\n  padding-left: 0;\n  transition: all .5s ease;\n}\n\n.big-list-item.active{\n  padding-right: var(--gutter-medium);\n\n  background: var(--color-link-default);\n  color: white;\n  padding-left: var(--gutter-medium);\n\n}\n\n.big-list-item.active a,\n  .big-list-item.active .link{\n  color: inherit;\n}\n\n.big-list-item h1,\n.big-list-item h2,\n.big-list-item h3\n{\n  margin: 0;\n}\n\n/**\n * NAV COMPONENTS STYLING\n */\n.nav{\n  margin-right: var(--gutter-medium);\n  box-sizing: border-box;\n}\n.nav .nav-toggle,\n.nav .title{\n  height: var(--mobile-nav-head-height);\n}\n\n\n.nav .title > .link{\n  display: none;\n}\n\n.has-index-open .nav .title > .link{\n  display: block;\n}\n.nav .title .location-title{\n  padding-left: 0;\n  font-size: 1rem;\n}\n.has-index-open .location-title{\n  display: none;\n}\n\n.nav .location-title{\n  cursor: pointer;\n  padding-left: var(--gutter-medium);\n}\n.nav-content-container ul{\n  margin: 0;\n  padding: 0;\n  margin-top: var(--gutter-medium);\n  padding-left: calc(var(--gutter-medium) * 2);\n}\n@media screen and (min-width: 1224px) {\n  .nav{\n    border: none;\n  }\n  .nav-content-container ul{\n    padding-left: 0;\n  }\n  .nav .title > .link{\n    display: block;\n  }\n}\n.nav-content-container .nav-item{\n  padding: 0;\n  list-style-type: none;\n}\n.nav-content-container .nav-item.level-1{\n  padding-left: calc(var(--gutter-medium) * .3);\n}\n.nav-content-container .nav-item.level-2{\n  padding-left: calc(var(--gutter-medium) * .6);\n}\n.nav-content-container .nav-item.level-3{\n  padding-left: calc(var(--gutter-medium) * 9);\n}\n.nav-content-container .nav-item.level-4{\n  padding-left: calc(var(--gutter-medium) * 1.2);\n}\n.nav-content-container .nav-item.level-5{\n  padding-left: calc(var(--gutter-medium) * 1.5);\n}\n\n@media screen and (min-width: 1224px){\n  .nav-content-container .nav-item{\n    font-size: .7rem;\n  }\n}\n\n/**\n * ASIDE COMPONENT STYLING\n */\n.aside .aside-content{\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: stretch;\n  width: calc(100% - var(--aside-toggle-width));\n  padding: var(--gutter-medium);\n  box-sizing: border-box;\n  padding-top: 0;\n  padding-right: 0;\n  width: unset;\n  max-width: 100%;\n}\n\n.aside .aside-header{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  align-items: flex-start;\n  padding-top: var(--gutter-medium);\n}\n\n@media screen and (min-width: 1224px) {\n  .aside .aside-content .aside-header{\n    min-height: 2.5rem;\n    align-items: flex-start;\n  }\n}\n\n.aside .aside-header .aside-title{\n  flex: 1;\n  margin: 0;\n  max-width: calc(100% - 1rem);\n  overflow: hidden;\n}\n\n.aside .aside-header .aside-title .csl-entry{\n  font-size: .8em;\n}\n\n.aside .aside-close-btn{\n  font-size: 1em;\n  line-height: 1;\n}\n\n.aside .aside-body{\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.aside .aside-toggle{\n  color: var(--color-link-default);\n  background: transparent;\n}\n\n/**\n * RAILWAY COMPONENTS STYLING\n */\n.deucalion-layout .railway{\n  position: fixed;\n  right: 2rem;\n  top: 2rem;\n  width: 1rem;\n  height: calc(100% - 3rem);\n}\n.deucalion-layout .railway .elevator{\n  position: absolute;\n  left: 0;\n  background: rgba(0,0,0,0.1);\n  width: 100%;\n  pointer-events: none;\n}\n.deucalion-layout .railway .shadow.h1,\n.deucalion-layout .railway .shadow.h2,\n.deucalion-layout .railway .shadow.h3,\n.deucalion-layout .railway .shadow.h4,\n.deucalion-layout .railway .shadow.h5,\n.deucalion-layout .railway .shadow.h6 {\n  background: var(--color-link-active);\n  border: 1px solid var(--color-link-active);\n}\n.deucalion-layout .railway .railway-title{\n  font-size: 0.5rem;\n  right: 1.2rem;\n  position: absolute;\n  top: 0;\n  text-align: right;\n  font-style: italic;\n  width: 20vw;\n  opacity: .5;\n  transition: opacity .5s ease;\n}\n\n.deucalion-layout .railway .railway-title:hover{\n  opacity: 1;\n}\n\n.deucalion-layout .railway.h2 .railway-title {\n  font-size: 0.4rem;\n}\n\n.deucalion-layout .railway.h3 .railway-title,\n.deucalion-layout .railway.h4 .railway-title,\n.deucalion-layout .railway.h5 .railway-title,\n.deucalion-layout .railway.h6 .railway-title\n {\n  font-size: 0.3rem;\n}\n\n.__react_component_tooltip{\n  font-size: .5em;\n}\n.deucalion-layout .railway .shadow{\n  position: absolute;\n  left: 0;\n  border: 1px solid lightgrey;\n  width: 100%;\n  cursor: pointer;\n  box-sizing: border-box;\n}\n/**\n * LANDING VIEW COMPONENTS STYLING\n */\n.deucalion-layout.has-view-class-landing .nav-header .title{\n  display: none;\n}\n.landing-player .landing-title{\n  font-size: 4rem;\n  margin-bottom: 0;\n}\n.landing-player .landing-subtitle{\n  font-size: 2rem;\n  font-style: italic;\n}\n\n.landing-player .main-link{\n  color: var(--color-link-active);\n  font-size: 1.5rem;\n}\n\n.landing-player .links{\n  padding: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n}\n.landing-player .links li{\n  list-style-type: none;\n  margin: 0;\n}\n\n\n/**\n * Pure CSS background Gradient\n * courtesy of Manuel Pinto -> https://codepen.io/P1N2O/pen/pyBNzX\n */\n.deucalion-layout.has-view-class-landing .main-contents-container.has-animated-background-gradient{\n  background: linear-gradient(-45deg, #EE7752, #E73C7E, #23A6D5, #23D5AB);\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 15s ease infinite;\n  -moz-animation: Gradient 15s ease infinite;\n  animation: Gradient 15s ease infinite;\n\n  min-height: 100%;\n  color: var(--color-background);\n}\n\n.deucalion-layout.has-view-class-landing .main-contents-container.has-animated-background-gradient .link{\n  color: var(--color-background);\n}\n\n@media screen and (min-width: 1224px){\n  .deucalion-layout.has-view-class-landing .nav-content-container{\n    margin-top: calc(2 * var(--gutter-medium));\n    padding: var(--gutter-medium);\n  }\n  .deucalion-layout.has-view-class-landing .nav-header{\n    display: none;\n  }\n  .deucalion-layout.has-view-class-landing .main-container{\n    left: 0;\n    width: 100%;\n  }\n  .deucalion-layout.has-view-class-landing .main-contents-container.with-animated-background{\n    left: 0;\n    padding-left: var(--desktop-nav-width);\n  }\n  .deucalion-layout.has-view-class-landing .nav{\n    background: transparent;\n  }\n}\n  \n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n\n/**\n * SECTION VIEW COMPONENTS STYLING\n */\n.section-player{\n  min-height: calc(100% - var(--gutter-medium) * 5);\n  padding-bottom: calc(var(--gutter-medium) * 5);\n  position: relative;\n}\n.main-contents-container{\n  overflow-x: hidden;\n}\n\n.loader{\n  position: fixed;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  background: rgba(255,255,255,0.5);\n  align-items: center;\n  justify-content: center;\n  transition: opacity .2s ease;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.loader span{\n  background: var(--color-link-default);\n  color: white;\n  width: 30vh;\n  height: 30vh;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: scale(0.1);\n  transition: .2s ease;\n}\n\n.loader.active{\n  opacity: 1;\n}\n.loader.active span{\n  transform: scale(1);\n}\n\n/**\n * Notes can be displayed as sidenotes starting from tablet\n */\n@media screen and (min-width: 768px) {\n  .section-player.has-notes-position-sidenotes .notes-container{\n    width: var(--content-margin-width);\n    position: absolute;\n    left: 0;\n    height: 100%;\n    top: 0;\n    box-sizing: border-box;\n    padding-right: var(--gutter-medium);\n    padding-left: var(--gutter-medium);\n    font-size: .7em;\n    opacity: .8;\n    overflow-x: hidden;\n    animation: slide-up 1s ease;\n  }\n  .section-player.has-notes-position-sidenotes .notes-title{\n    display: none;\n  }\n  .section-player.has-notes-position-sidenotes .notes-list{\n    position: relative;\n    top: calc(var(--gutter-medium) * -2.5);\n  }\n  \n}\n@media screen and (min-width: 1224px) {\n  .section-player.has-notes-position-sidenotes .notes-list{\n    top: calc(var(--gutter-medium) * -1);\n  }\n}\n  \n/** reset notes position in print and mobile*/\n@media screen and (max-width: 768px) {\n  .section-player.has-notes-position-sidenotes .notes-container{\n    width: unset;\n    position: relative;\n    left: unset;\n    height: unset;\n    top: unset;\n    padding-right: unset;\n    font-size: unset;\n    opacity: unset;\n    padding-left: var(--content-margin-width);\n  }\n  .section-player.has-notes-position-sidenotes .notes-title{\n    display: block\n  }\n  .section-player.has-notes-position-sidenotes .notes-list{\n    top: unset;\n  }\n  .section-player.has-notes-position-sidenotes .note-item{\n    position: relative!important;\n    top: unset!important;\n    max-width: unset;\n  }\n}\n@media print {\n  .section-player.has-notes-position-sidenotes .notes-container{\n    width: unset;\n    position: relative;\n    left: unset;\n    height: unset;\n    top: unset;\n    padding-right: unset;\n    font-size: unset;\n    opacity: unset;\n    padding-left: var(--content-margin-width);\n  }\n  .section-player.has-notes-position-sidenotes .notes-title{\n    display: block\n  }\n  .section-player.has-notes-position-sidenotes .notes-list{\n    top: unset;\n  }\n  .section-player.has-notes-position-sidenotes .note-item{\n    position: relative!important;\n    top: unset!important;\n  }\n}\n\n/* navigation footer */\n.navigation-footer{\n  position : absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  box-sizing: border-box;\n  padding-bottom: var(--gutter-medium);\n}\n/* aligning the nav footer and notes list when notes are aside */\n.section-player .navigation-footer,\n.section-player.has-notes-position-footnotes .notes-container{\n  padding-left: var(--content-margin-width);\n}\n\n\n.navigation-footer ul{\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items; stretch;\n  justify-content: center;\n}\n.navigation-footer li:not(:last-of-type) {\n  margin-right: var(--gutter-medium);\n}\n.navigation-footer li{\n  margin: 0;\n  list-style-type: none;\n  position: relative;\n  transition: all .5s ease;\n  left: 0;\n  right: 0;\n}\n\n.navigation-footer li.prev:hover{\n  right: var(--gutter-medium);\n  left: unset;\n}\n.navigation-footer li.next:hover{\n  left: var(--gutter-medium);\n  right: unset;\n}\n\n.navigation-footer .navigation-item{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n}\n.navigation-footer .navigation-item-text{\n  flex: 1;\n}\n/* notes */\n.notes-list{\n  margin-left: 0;\n  padding-left: 0;\n}\n.note-item{\n  list-style-type: none;\n  margin: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  max-width: 100%;\n}\n.section-player.has-notes-position-sidenotes .note-item {\n  max-width: calc(var(--content-margin-width) - 1rem);\n  overflow: hidden;\n}\n.note-item > div{\n  flex: 1;\n  max-width: calc(100% - 1rem);\n}\n.note-block-pointer.link{\n  padding: .1em;\n  padding-left: .3em;\n  padding-right: 0;\n  height: 1.5em;\n  margin-right: var(--gutter-medium);\n  color: inherit;\n}\n.note-block-pointer::after{\n  content: '.';\n}\n\n.note-content-pointer{\n  cursor: pointer;\n}\n\n/* resource identity card */\n.resource-identity-card{\n}\n.resource-identity-card .title{\n  margin-bottom: var(--gutter-medium);\n}\n.resource-identity-card .type,\n.resource-identity-card .source\n{\n  font-size: .8em;\n}\n.resource-identity-card .source{\n  display: flex;\n  flex-flow: row wrap;\n}\n.resource-identity-card .description{\n  font-size: .7rem;\n  font-style: italic;\n  padding-right: 1rem;\n}\n.resource-identity-card .type::before{\n  content: \"△\";\n  font-style: normal;\n  padding-right: var(--gutter-medium);\n}\n.resource-identity-card .source::before{\n  content: \"△\";\n  font-style: normal;\n  padding-right: var(--gutter-medium);\n}\n.resource-identity-card .main-info{\n  font-weight: 800;\n}\n\n@media print{\n  .resource-identity-card{\n    padding: var(--gutter-medium);\n    border: 1px solid black;\n  }\n\n  .block-contextualization-container.table .static-table-container{\n    height: unset;\n  }\n}\n\n/* related contexts */\n.related-contexts{\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: stretch;\n  height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n}\n.related-contexts .body{\n  flex: 1;\n  overflow: hidden;\n}\n\n.related-contexts-container{\n  padding: 0;\n  flex: 1;\n  overflow: auto;\n  margin-top: 0;\n  display: flex;\n  flex-flow: column nowrap;\n  overflow: hidden;\n  justify-contents: stretch;\n}\n.related-contexts-container .related-contexts-list{\n  flex: 1;\n  overflow: auto;\n  margin: 0;\n  padding: 0;\n}\n\n.related-contexts-container > h3{\n  font-size: 1rem;\n}\n\n.related-contexts .header {\n  padding-top: var(--gutter-medium);\n}\n\n.related-contexts .header .related-contexts-actions{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  font-size: .8em;\n}\n\n.related-contexts .header .related-contexts-actions .link::before,\n.related-contexts .mentions-title::before,\n.related-contexts .header .related-contexts-actions a::before,\n.big-list-item-actions .link::before{\n  content: \"◉\";\n  font-style: normal;\n  padding-right: var(--gutter-medium);\n}\n\n/*\n.related-contexts .header h2{\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n}\n*/\n.related-contexts .related-contexts-title{\n  flex: 1;\n}\n\n.related-contexts .footer{\n  padding-top: var(--gutter-medium);\n  padding-bottom: var(--gutter-medium);\n}\n.related-contexts .footer .link{\n  font-size: .8em;\n}\n\n.related-contexts .footer .link::before{\n  content: \"◉\";\n  font-style: normal;\n  padding-right: var(--gutter-medium);\n  font-size: .8em;\n}\n\n.related-context{\n  margin: 0;\n  list-style-type: none;\n}\n.related-context .excerpt{\n  font-size: .5em;\n}\n/* context-mention */\n\n.related-contexts .mentions-title-container{\n  font-size: .8em;\n}\n\n.mentions-container ul{\n  padding: 0;\n}\n.related-context .context-mention{\n  margin-bottom: var(--gutter-medium);\n}\n.context-mention{\n}\n.context-mention .mention-context-pointer{\n  display: none;\n}\n.context-mention .header,\n.context-mention .footer{\n  font-size: .5em;\n  position: relative;\n  left: 1rem;\n}\n.context-mention .header{\n  top: 1rem;\n}\n.context-mention .footer{\n  bottom: 1rem;\n}\n.context-mention .excerpt{\n  padding: var(--gutter-medium);\n  background: rgba(0,0,0,0.03);\n}\n.context-mention .excerpt blockquote{\n  background: none;\n}\n.context-mention .excerpt .link.active{\n  color: inherit;\n}\n\n.context-mention .excerpt .mention-section-name{\n  margin-bottom: 0;\n}\n\n/**\n * NETWORK VIEWS COMPONENT STYLING\n */\n.graph-placeholder{\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n/*\n.graph-container svg\n{\n  position: absolute;\n  width: 100%!important;\n  height: 100%!important;\n  left: 0;\n  top: 0;\n}*/\n/**\n * EVENTS VIEWS COMPONENT STYLING\n */\n.events-player .main-column .big-list-item {\n    border-left: 1px solid var(--color-text);\n    padding-left: var(--gutter-medium);\n    margin-bottom: 0;\n    padding-bottom: var(--gutter-medium);\n}\n.events-player .main-column .big-list-item:first-of-type{\n    padding-top: calc(3 * var(--gutter-medium));\n\n}\n.events-player .main-column .big-list-item-content h3::before {\n  content: \"◉\";\n  position: relative;\n  left: calc(var(--gutter-medium) * -1.6);\n}\n.events-player .main-column .big-list-item-actions{\n  padding-left: var(--gutter-medium);\n}\n\n\n.event-details > span,\n.location-details > span\n{\n  margin-right: var(--gutter-medium);\n}\n/**\n * PLACES VIEWS COMPONENT STYLING\n */\n.places-container {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n.location-details{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  align-items: center;\n}\n.location-details em{\n  flex: 1;\n}\n.localization-marker{\n  cursor: pointer;\n}\n.localization-entries-list{\n  margin-left: 0;\n  top: -1rem;\n  left: -1rem;\n  position: relative;\n}\n.localization-entry{\n  font-style: italic;\n  display: inline-block;\n  padding-right: calc(var(--gutter-medium) * 2);\n  padding: calc(var(--gutter-medium) * .5);\n  background: rgba(255,255,255,.9);\n  list-style-type: none;\n}\n.glossaries-related-to-place-list .related-contexts:not(:last-of-type),\n.glossaries-related-to-event-list .related-contexts:not(:last-of-type)\n{\n  border-bottom: .3em solid var(--color-link-default);\n  margin-bottom: var(--gutter-medium);\n  padding-bottom: var(--gutter-medium);\n}\n\n/**\n *  =============\n * ANIMATIONS\n * ==============\n * */\n@keyframes appear {\n  0% {\n      opacity: 0;\n  }\n  100% {\n      opacity: 1;\n  }\n}\n"},function(e,t,n){"use strict";(e.exports={}).forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}}},function(e,t,n){"use strict";var r=e.exports={};r.isIE=function(e){return(-1!==(t=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/"))&&(!e||e===function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(n[0]);return e>4?e:void 0}());var t},r.isLegacyOpera=function(){return!!window.opera}},function(e,t,n){var r=n(824),i=n(825),o=Object.prototype.hasOwnProperty,a=i((function(e,t,n){o.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=a},function(e,t,n){var r=n(39),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){(function(e){var r=n(23),i=n(834),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l}).call(this,n(90)(e))},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?n:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(835),i=n(321),o=n(836),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(87),i=n(845),o=n(846),a=n(847),s=n(848),l=n(849);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},function(e,t,n){var r=n(850),i=n(53);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},function(e,t,n){var r=n(137),i=n(851),o=n(140),a=1,s=2;e.exports=function(e,t,n,l,u,c){var f=n&a,d=e.length,p=t.length;if(d!=p&&!(f&&p>d))return!1;var h=c.get(e);if(h&&c.get(t))return h==t;var m=-1,g=!0,b=n&s?new r:void 0;for(c.set(e,t),c.set(t,e);++m<d;){var y=e[m],v=t[m];if(l)var x=f?l(v,y,m,t,e,c):l(y,v,m,e,t,c);if(void 0!==x){if(x)continue;g=!1;break}if(b){if(!i(t,(function(e,t){if(!o(b,t)&&(y===e||u(y,e,n,l,c)))return b.push(t)}))){g=!1;break}}else if(y!==v&&!u(y,v,n,l,c)){g=!1;break}}return c.delete(e),c.delete(t),g}},function(e,t,n){var r=n(73);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(328),i=n(101);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(24),i=n(178),o=n(868),a=n(871);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var r=n(179),i=n(885),o=n(886),a=n(893),s=o((function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=s},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=180)}({180:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject)for(t in e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"])try{return new ActiveXObject(e[t])}catch(e){}return null},sigma.parsers.json=function(e,t,n){var r,i=sigma.utils.xhr();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&(r=JSON.parse(i.responseText),t instanceof sigma?(t.graph.clear(),t.graph.read(r)):"object"==typeof t?(t.graph=r,t=new sigma(t)):"function"==typeof t&&(n=t,t=null),n&&n(t||r))},i.send()}}).call(this)}).call(window)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=d(n(1)),o=d(n(76)),a=n(12),s=d(n(914)),l=d(n(915)),u=d(n(917)),c=d(n(918)),f=d(n(919));function d(e){return e&&e.__esModule?e:{default:e}}const{LINK:p,BLOCK_ASSET:h,INLINE_ASSET:m,SECTION_POINTER:g}=a.constants.draftEntitiesNames,b=e=>e.map((e,t)=>[e,r.default.createElement("br",{key:t+1})]),y={inline:{BOLD:(e,{key:t})=>r.default.createElement("strong",{key:t},e),ITALIC:(e,{key:t})=>r.default.createElement("em",{key:t},e),UNDERLINE:(e,{key:t})=>r.default.createElement("u",{key:t},e),CODE:(e,{key:t})=>r.default.createElement("span",{key:t},e)},blocks:{unstyled:(e,{keys:t})=>e.map((e,n)=>r.default.createElement("div",{className:"unstyled",id:t[n],key:n},e)),blockquote:(e,{keys:t})=>r.default.createElement("blockquote",{id:t[0]},b(e)),"header-one":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h1",{id:t[n],key:n},e)),"header-two":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h2",{id:t[n],key:n},e)),"header-three":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h3",{id:t[n],key:n},e)),"header-four":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h4",{id:t[n],key:n},e)),"header-five":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h5",{id:t[n],key:n},e)),"header-six":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("h6",{id:t[n],key:n},e)),"code-block":(e,{keys:t})=>r.default.createElement("pre",{key:t[0]},b(e)),"unordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ul",{key:n[n.length-1],className:`ul-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:t},e))),"ordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("ol",{key:n.join("|"),className:`ol-level-${t}`},e.map((e,t)=>r.default.createElement("li",{key:n[t]},e)))},entities:{[p]:(e,t,{key:n})=>r.default.createElement(s.default,{key:n,to:t.url},e),[h]:(e,t,{key:n})=>r.default.createElement(l.default,{key:n,data:t},e),[m]:(e,t,{key:n})=>r.default.createElement(u.default,{data:t,key:n},e),NOTE_POINTER:(e,t,{key:n})=>r.default.createElement(c.default,{key:n,children:e,noteId:t.noteId}),[g]:(e,t,{key:n})=>r.default.createElement(f.default,{key:n,sectionId:t.sectionId},e)}};class v extends r.Component{constructor(e){super(e)}shouldComponentUpdate(){return!0}renderWarning(){return r.default.createElement("div",null)}render(){const{raw:e}=this.props;if(!e)return this.renderWarning();const t=(0,o.default)(e,y);return t?r.default.createElement("div",{className:"rendered-content"},t):this.renderWarning()}}v.propTypes={raw:i.default.object};var x=v;t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e})=>r.default.createElement("head",null,e);var s=({section:e,production:t,edition:n,withHelmet:o=!1})=>{const s=`${n.data.publicationTitle&&n.data.publicationTitle.length?n.data.publicationTitle:t.metadata.title} - ${e.metadata.title}`,l=e.metadata.authors&&e.metadata.authors.length?e.metadata.authors:t.metadata.authors||[],u=e.metadata.tags&&e.metadata.tags.length?e.metadata.tags:t.metadata.tags||[],c=e.metadata.description&&e.metadata.description.length?e.metadata.description:t.metadata.description,f=l.map(e=>`${e.given} ${e.family}`).join(", "),d=o?i.default:a;return r.default.createElement(d,null,r.default.createElement("title",null,s),r.default.createElement("meta",{name:"generator",content:"peritext"}),r.default.createElement("meta",{name:"DC.Title",lang:"fr",content:s}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),l.map((e,t)=>r.default.createElement("meta",{key:`${e.family}, ${e.given}-${t}`,name:"DC.creator",content:`${e.family}, ${e.given}`})),r.default.createElement("meta",{name:"DC.issued",lang:"fr",content:n.metadata.lastUpdateAt&&new Date(n.metadata.lastUpdateAt).toISOString()}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),r.default.createElement("meta",{name:"author",content:f}),r.default.createElement("meta",{name:"keywords",content:u.join(",")}),r.default.createElement("meta",{name:"description",content:c}),r.default.createElement("meta",{name:"viewport",content:"user-scalable=no,width=device-width"}),r.default.createElement("meta",{name:"twitter:card",value:"summary"}),r.default.createElement("meta",{name:"twitter:site",content:""}),r.default.createElement("meta",{name:"twitter:title",content:s}),r.default.createElement("meta",{name:"twitter:description",content:c}),r.default.createElement("meta",{itemProp:"name",content:s}),r.default.createElement("meta",{itemProp:"description",content:c}),r.default.createElement("meta",{property:"og:title",content:s}),r.default.createElement("meta",{property:"og:type",content:"website"}),r.default.createElement("meta",{property:"og:url",content:""}),r.default.createElement("meta",{property:"og:description",content:c}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(70);function a(e){return e&&e.__esModule?e:{default:e}}const s=({resource:e},{contextualizers:t,productionAssets:n})=>{if(!["bib","glossary","section"].includes(e.metadata.type)){const i=t[e.metadata.type]&&t[e.metadata.type].Block,a=(0,o.v4)(),s={contextualizerId:a,sourceId:e.id,targetId:e.id},l={id:a,type:e.metadata.type,parameters:{}};return r.default.createElement("figure",{className:`block-contextualization-container ${l.type}`},r.default.createElement(i,{renderingMode:"screened",resource:e,contextualization:s,contextualizer:l,assets:n}))}return null};s.contextTypes={contextualizers:i.default.object,productionAssets:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e})=>r.default.createElement("head",{profile:"http://dublincore.org/documents/2008/08/04/dc-html/"},e);var s=({production:e,edition:t={},pageName:n,withHelmet:o=!1})=>{const s=`${t.data.publicationTitle&&t.data.publicationTitle.length?t.data.publicationTitle:e.metadata.title}${n?` - ${n}`:""}`,l=e.metadata.authors||[],u=e.metadata.tags||[],c=e.metadata.description,f=l.map(e=>`${e.given} ${e.family}`).join(", "),d=o?i.default:a;return r.default.createElement(d,null,r.default.createElement("title",null,s),r.default.createElement("meta",{name:"generator",content:"peritext"}),r.default.createElement("link",{rel:"schema.DC",href:"http://purl.org/dc/elements/1.1/"}),r.default.createElement("meta",{name:"DC.Title",lang:"fr",content:s}),l.map((e,t)=>r.default.createElement("meta",{key:`${e.family}, ${e.given}-${t}`,name:"DC.creator",content:`${e.family}, ${e.given}`})),r.default.createElement("meta",{name:"DC.issued",lang:"fr",content:t.metadata.lastUpdateAt&&new Date(t.metadata.lastUpdateAt).toISOString()}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),r.default.createElement("meta",{name:"author",content:f}),r.default.createElement("meta",{name:"keywords",content:u.join(",")}),r.default.createElement("meta",{name:"description",content:c}),r.default.createElement("meta",{name:"viewport",content:"user-scalable=no,width=device-width"}),r.default.createElement("meta",{name:"twitter:card",value:"summary"}),r.default.createElement("meta",{name:"twitter:site",content:""}),r.default.createElement("meta",{name:"twitter:title",content:s}),r.default.createElement("meta",{name:"twitter:description",content:c}),r.default.createElement("meta",{itemProp:"name",content:s}),r.default.createElement("meta",{itemProp:"description",content:c}),r.default.createElement("meta",{property:"og:title",content:s}),r.default.createElement("meta",{property:"og:type",content:"website"}),r.default.createElement("meta",{property:"og:url",content:""}),r.default.createElement("meta",{property:"og:description",content:c}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="\n\n\n/**\n * DOCUMENTATION\n\nThis template is programmed according to mobile-first methodology (no media query = mobile version)\n\nThe organization is roughly as following :\n0. template's CSS variables\n1. first-level containers layout rules, for mobile, then tablet, then desktop version\n2. reused components rules\n3. view-specific rules\n\nUsed breakpoints\n- tablet : 768px;\n- desktop: 1224px;\n */\n/**\n * =================\n * =================\n * =================\n * Default variables\n * =================\n * =================\n * =================\n */\n:root \n{\n  --aside-toggle-width: 2rem;\n  --mobile-nav-head-height: 2rem;\n\n  --transition-medium: 1000ms;\n\n  --tablet-main-width: 75%;\n\n  --color-background: #ffffff;\n  --color-link-default: #99B6BD;/* bleu délavé */\n  --color-link-active:#D4613E;/* rouille */\n  --color-text: #4d4c4c;\n\n  --desktop-nav-width: 16%;\n  --desktop-aside-width: 20%;\n\n  --content-margin-width: 20vw;\n\n  --gutter-medium: 1rem;\n  --gutter-large: 2rem;\n\n  font-size: 18px;\n}\n\n@media screen and (min-width: 1224px){\n  :root{\n    font-size: 15px;\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Resets\n * =================\n * =================\n * =================\n */\nbutton{\n  background: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n}\n\n/**\n * =================\n * =================\n * =================\n * Register animated elements here\n * =================\n * =================\n * =================\n */\n.callirhoe-layout .nav,\n.callirhoe-layout .nav-content-container,\n.callirhoe-layout .aside,\n.callirhoe-layout .aside-toggle,\n.callirhoe-layout .nav-toggle-symbol,\n.callirhoe-layout .main-container\n{\n  transition: all ease var(--transition-medium);\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, mobile version\n * =================\n * =================\n * =================\n */\n\n/**\n * Nav mobile layout\n */\n.callirhoe-layout .nav{\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  min-height: var(--mobile-nav-head-height);\n  max-height: var(--mobile-nav-head-height);\n  overflow: hidden;\n}\n.callirhoe-layout .nav-header\n{\n  min-height: var(--mobile-nav-head-height);\n  max-height: var(--mobile-nav-head-height);\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  background: var(--color-background);\n  align-items: center;\n  margin-top: 0;\n}\n.callirhoe-layout .nav-header .title {\n  flex: 1;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  /*align-items: center;*/\n  justify-content: stretch;\n}\n.callirhoe-layout .nav-header .title,\n.callirhoe-layout .additional-header,\n.callirhoe-layout .nav-content-container{\n  margin-left: calc(var(--content-margin-width) - var(--gutter-medium) * 2);  \n}\n.callirhoe-layout .nav-header .title,\n.callirhoe-layout .additional-header\n{\n  margin-right: calc(var(--content-margin-width) - var(--gutter-medium) * 2);  \n}\n\n.callirhoe-layout .additional-header .subtitle,\n.callirhoe-layout .additional-header .authors,\n.callirhoe-layout .additional-header .description{\n  padding-left: calc(var(--gutter-medium) * 2);\n} \n\n.callirhoe-layout .additional-header .subtitle\n{\n  font-size: 1.2rem;\n}\n.callirhoe-layout .additional-header .authors\n{\n  font-size: 1rem;\n  font-style: italic;\n}\n.callirhoe-layout .additional-header .description{\n  font-size: .8rem;\n  max-height: 30vh;\n  overflow-y: auto;\n}\n.callirhoe-layout .nav-header .title .location-title{\n  flex: 1;\n  padding-top: .4rem;\n}\n\n.callirhoe-layout .nav-content-container{\n  overflow-y: auto;\n  max-height: calc(100% - var(--mobile-nav-head-height) * 2);\n  max-width: var(--tablet-main-width)\n}\n\n.callirhoe-layout.has-index-open .nav{\n  min-height: 100%;\n  max-height: 100%;\n  height: 100%;\n  background: var(--color-background);\n}\n\n.callirhoe-layout .nav-header .nav-toggle {\n  width: calc(var(--gutter-medium) * 2);\n  justify-content: center;\n  align-items: center;\n  display: flex;\n}\n\n\n/**\n * Aside mobile layout\n */\n.callirhoe-layout .aside{\n  position: fixed;\n  top: var(--mobile-nav-head-height);\n  left: calc(100% - var(--aside-toggle-width));\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  pointer-events: none;\n  padding-left: var(--aside-toggle-width);\n}\n.callirhoe-layout .aside.is-active{\n  opacity: 1;\n  pointer-events: all;\n  background: var(--color-background);\n}\n\n.callirhoe-layout .aside-toggle{\n  position : absolute;\n  left: 0;\n  top: 0;\n  width: var(--aside-toggle-width);\n  height: 100%;\n}\n\n.callirhoe-layout.has-aside-visible .aside{\n  left: 0;\n}\n\n.callirhoe-layout .railway{\n  display: none;\n}\n\n/**\n * Main contents mobile layout\n */\n.callirhoe-layout .main-container{\n  position: fixed;\n  top: var(--mobile-nav-head-height);\n  height: calc(100% - var(--mobile-nav-head-height));\n  width: 100%;\n  left: 0;\n  box-sizing: border-box;\n  overflow-y: auto;\n}\n\n.callirhoe-layout.has-aside-visible .main-container{\n  left: -100%;\n}\n\n/*\n.callirhoe-layout .view-title{\n  display: none;\n}\n*/\n\n/**\n * =================\n * =================\n * =================\n * Global layout, tablet version\n * =================\n * =================\n * =================\n */\n@media screen and (min-width: 768px) {\n  /**\n   * Aside tablet layout\n   */\n  .callirhoe-layout .aside{\n    left: var(--tablet-main-width);\n    width: calc(100% - var(--tablet-main-width));\n    height: 100%;\n    \n    padding-left: 0;\n  }\n\n  .callirhoe-layout .aside-toggle{\n    display: none;\n  }\n\n  .callirhoe-layout.has-aside-visible .aside{\n    left: var(--tablet-main-width);\n    width: calc(100% - var(--tablet-main-width));\n  }\n\n  .callirhoe-layout .railway{\n    display: block;\n  }\n  /**\n   * Main contents tablet layout\n   */\n  .callirhoe-layout .main-container{\n    width: 100%;\n  }\n  // .callirhoe-layout .main-contents-container,\n  // .callirhoe-layout .navigation-footer{\n  //   padding-right: calc(100% - var(--tablet-main-width));\n  // }\n\n  .callirhoe-layout.has-aside-visible .main-container{\n    left: 0;\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, desktop version\n * =================\n * =================\n * =================\n */\n@media screen and (min-width: 1224px) {\n  /**\n   * Nav desktop layout\n   */\n  .callirhoe-layout .nav{\n    position: fixed;\n    width: var(--desktop-nav-width);\n    top: 0;\n    left: 0;\n    height: 100%;\n    min-height: unset;\n    max-height: 100%;\n    overflow: hidden;\n    background: var(--color-background);\n    padding: var(--gutter-medium);\n    opacity: .5;\n  }\n  .callirhoe-layout .nav:hover{\n    opacity: 1;\n  }\n  .callirhoe-layout .nav-header{\n    max-height: unset;\n  }\n  .callirhoe-layout .nav-header .title{\n    height: unset;\n    margin:0;\n  }\n  .callirhoe-layout .nav-header .nav-toggle {\n    display: none;\n  }\n  .callirhoe-layout .nav-header .title,\n  .callirhoe-layout .nav-content-container\n  {\n    margin-left: 0;\n  }\n\n  .callirhoe-layout .nav-header .title{\n    font-size: 1.3rem;\n    margin-bottom: var(--gutter-medium);\n  }\n\n  .callirhoe-layout .additional-header,\n  .callirhoe-layout .additional-header .subtitle,\n  .callirhoe-layout .additional-header .description,\n  .callirhoe-layout .additional-header .authors\n  {\n    margin: 0;\n    padding: 0;\n    padding-bottom: .5rem;\n  }\n\n  /* do not display location as it is always visible */\n  .callirhoe-layout .location-title{\n    display: none;\n  }\n\n  /**\n   * Aside desktop layout\n   */\n  .callirhoe-layout .aside{\n    position: fixed;\n    top: 0;\n    left: calc(100% - var(--desktop-aside-width));\n    width: var(--desktop-aside-width);\n    height: 100%;\n  }\n  .callirhoe-layout .aside-toggle{\n    display: none;\n  }\n\n  .callirhoe-layout.has-aside-visible .aside{\n    left: calc(100% - var(--desktop-aside-width));\n    width: var(--desktop-aside-width);\n  }\n\n  /**\n   * Main contents desktop layout\n   */\n  .callirhoe-layout .main-container{\n    position: fixed;\n    top: 0;\n    left: var(--desktop-nav-width);\n    height: 100%;\n    width: calc(100% - var(--desktop-nav-width));\n    padding: var(--gutter-medium);\n  }\n  .callirhoe-layout .view-title{\n    display: block;\n  }\n  // .callirhoe-layout .main-contents-container,\n  // .callirhoe-layout .navigation-footer{\n  //   padding-right: calc(var(--desktop-aside-width) * 1.3);\n  // }\n\n  .callirhoe-layout.has-aside-visible .main-container{\n    left: var(--desktop-nav-width);\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, print version\n * =================\n * =================\n * =================\n */\n@media print {\n  .callirhoe-layout .nav,\n  .callirhoe-layout .aside,\n  .navigation-footer{\n    display: none;\n  }\n  .callirhoe-layout .view-title{\n    display: block;\n  }\n  .callirhoe-layout .main-container{\n    left: unset;\n    top: unset;\n    width: unset;\n    height: unset;\n    position: relative;\n    overflow: visible;\n  }\n  /** scroll bars */\n  .callirhoe-layout .main-container > div,\n  .callirhoe-layout .main-container > div > div{\n    left: unset;\n    top: unset;\n    width: unset;\n    height: unset;\n    position: relative;\n    overflow: visible!important;\n  }\n  .callirhoe-layout .main-container .main-column{\n    padding: 1cm;\n  }\n\n}\n\n/**\n * ======\n * ======\n * ======\n * ======\n * ======\n * END of global layout rules\n * ======\n * ======\n * ======\n * ======\n * ======\n */\n\n/**\n * ======\n * Components styling\n * ======\n */\n/**\n * GENERAL TYPOGRAPHY\n */\n.callirhoe-layout{\n  text-rendering: optimizeLegibility;\n  color: var(--color-text);\n  font-family:'Work Sans', serif;\n}\n.link,\na,\na:visited,\n.inline-glossary\n{\n  color: var(--color-link-default);\n  cursor: pointer;\n  text-decoration: none;\n}\n.link.active,\n.inline-glossary.active,\na:active{\n  color: var(--color-link-active);\n}\n\n.callirhoe-layout sup{\n  font-size: .5em;\n}\n/**\n * GENERAL COMPONENTS\n */\n/* bibliographic citations */\n.csl-entry {\n    word-break: break-all;\n}\n\n/* nav toggle */\n.callirhoe-layout .nav-header .nav-toggle {\n  width: calc(var(--gutter-medium) * 2);\n}\n.callirhoe-layout.has-index-open .nav-toggle-symbol{\n  display: inline-block;\n  transform: rotate(0deg);\n}\n\n.callirhoe-layout.has-index-open .nav-toggle-symbol{\n  transform: rotate(45deg);\n}\n\n/* aside toggle */\n.callirhoe-layout.has-aside-visible .aside-toggle{\n  transform: rotate(180deg);\n}\n\n/* views title */\n.view-title{\n  margin-top: 0;\n}\n\n/* views main contents */\n/** we always keep the same padding left for main column\neven when notes are in the end*/\n.main-contents-container .main-column {\n  padding-left: var(--content-margin-width);\n  padding-bottom: var(--gutter-medium);\n  padding-right: var(--gutter-medium);\n}\n\n/**\n * RENDERED CONTENT (ANYTHING COMING FROM DRAFT)\n */\n.rendered-content p,\n.rendered-content ul,\n.rendered-content ol,\n.rendered-content blockquote,\n.rendered-content pre,\n.rendered-content .unstyled\n{\n  margin-bottom: var(--gutter-medium);\n  line-height: 1.4;\n}\n\n.rendered-content .unstyled:not(:first-of-type){\n  text-indent : 2em;\n}\n\n.has-view-class-sections .main-column .rendered-content .unstyled:first-of-type::first-letter{\n  font-size:3.5em;\n  padding-right:0.2em;\n  padding-bottom: 0;\n  float:left;\n}\nh1{\n    font-size: 1.5em;\n    margin-bottom: .5em;\n}\n\n.rendered-content blockquote{\n  margin: 0;\n  margin-bottom: var(--gutter-medium);\n  padding: var(--gutter-medium);\n  padding-left: var(--gutter-large);\n  position: relative;\n  background: rgba(0,0,0,0.03);\n  quotes: '« ' ' »' '‹ ' ' ›';\n}\n\n/*\n.note-item .rendered-content blockquote{\n  padding: var(--gutter-small);\n}\n*/\n.rendered-content blockquote:after\n{\n    position: absolute;\n    right: 2px;\n    bottom: 2px;\n\n    content: close-quote;\n}\n\n.rendered-content blockquote:before\n{\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    content: open-quote;\n}\n\n\n/**\n * Figures (general)\n */\n.block-contextualization-container,\n.block-contextualization-container figure\n{\n  padding: 0;\n  margin: 0;\n}\n.block-contextualization-container .figure-caption{\n  /*border-top: 1px solid var(--color-link-default);*/\n  padding-top: var(--gutter-medium);\n}\n.block-contextualization-container .figure-title{\n  margin: 0;\n}\n.block-contextualization-container .figure-title .mention-context-pointer,\n  .block-contextualization-container .figure-title button.mention-context-pointer{\n  font-size: 1rem;\n  font-family:'Source serif pro', serif;\n  padding: 0;\n  text-align: left;\n}\n.block-contextualization-container .figure-legend{\n  font-size: 1em;\n  margin-top: 0;\n}\n.block-contextualization-container .figure-legend p{\n  margin-top: 0;\n}\n.block-contextualization-container figure{\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n.block-contextualization-container img\n{\n  max-width: 100%;\n  // max-height: 80vh;\n  // min-height: 40vh;\n}\n.block-contextualization-container iframe\n{\n  min-height: 50vh;\n  outline: none;\n  border: none;\n  width: 100%;\n  max-width: 100%;  \n  height: 100%;\n}\n/**\n * Figures (specific)\n */\n.block-contextualization-container.bib .figure-caption{\n  display: none;\n}\n.block-contextualization-container.image img{\n  cursor: pointer;\n  transition: opacity ease var(--transition-medium);\n}\n.block-contextualization-container.image img:hover{\n  opacity: .8;\n}\n.block-contextualization-container.image .image-nav-container{\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n}\n.block-contextualization-container.image .image-nav-item{\n  list-style-type: none;\n  cursor: pointer;\n}\n\n.block-contextualization-container.image .image-nav-item-counter{\n  display: none;\n}\n\n.block-contextualization-container.image .image-nav-item::after{\n  content : \"◉\";\n  color: var(--color-link-default);\n}\n.block-contextualization-container.image .image-nav-item.is-active::after{\n  color: var(--color-link-active);\n}\n\n.inline-contextualization-container.image{\n  cursor: pointer;\n}\n\n.inline-images-container img {\n      max-width: 2rem;\n      max-height: 1rem;\n      padding-right: .3rem;\n}\n\n.block-contextualization-container.embed{\n  min-height: 50vh;\n  max-height: 80vh;\n  position: absolute;\n}\n\n.block-contextualization-container.embed .fullscreen > div{\n  height: 100%;\n}\n\n.block-contextualization-container.embed .fullscreen-btn{\n  position : absolute;\n  right: 1rem;\n  bottom: 4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  background: white;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.block-contextualization-container.embed .fullscreen .fullscreen-btn{\n  right: 1rem;\n  botttom: 1rem;\n}\n\n.block-contextualization-container.table{\n  max-width: 100%;\n  width: 100%;\n}\n.block-contextualization-container.table .static-table-container{\n  max-width: 100%;\n  width: 100%;\n  position: relative;\n  overflow: auto;\n  height: 70vh;\n}\n.block-contextualization-container.table .static-table-container table{\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n.block-contextualization-container.table .ReactTable .rt-tbody{\n  max-height: 70vh;\n  overflow: auto;\n}\n\n.block-contextualization-container.table .ReactTable\n{\n    max-width: 100%;\n}\n\n.block-contextualization-container.table .ReactTable .-pagination\n{\n    height: 5rem;\n}\n\n.block-contextualization-container.table table th {\n    border-right: 1px solid black;\n    border-bottom: 1px solid black;\n    text-align: left;\n    font-weight: 400;\n    text-indent: 0;\n    font-size: .8em;\n}\n\n.block-contextualization-container.table table thead th {\n  font-weight: 800;\n}\n\n.block-contextualization-container.vegaLite .vegaLite > div {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: var(--gutter-medium);\n}\n\n/**\n * Inline (specific)\n * */\n.block-contextualization-container.bib {\n  cursor: pointer;\n}\n\n/**\n * BIG LISTS (GLOSSARY, REFERENCES, ...)\n */\n.big-list-items-container{\n  padding: 0;\n}\n\n.big-list-item-actions .link{\n  font-size: .8rem;\n  padding: 0;\n}\n\n.big-list-item{\n  margin: 0;\n  list-style-type: none;\n  margin-bottom: var(--gutter-medium);\n}\n.big-list-item h1,\n.big-list-item h2,\n.big-list-item h3\n{\n  margin: 0;\n}\n\n/**\n * NAV COMPONENTS STYLING\n */\n.nav{\n  margin-right: var(--gutter-medium);\n  box-sizing: border-box;\n}\n.nav .nav-toggle,\n.nav .title{\n  height: var(--mobile-nav-head-height);\n}\n\n\n.nav .title > .link{\n  display: none;\n}\n\n.has-index-open .nav .title > .link{\n  display: block;\n}\n.nav .title .location-title{\n  padding-left: 0;\n  font-size: 1rem;\n}\n.has-index-open .location-title{\n  display: none;\n}\n\n.nav .location-title{\n  cursor: pointer;\n  padding-left: var(--gutter-medium);\n  text-transform: capitalize;\n}\n.nav-content-container ul{\n  margin: 0;\n  padding: 0;\n  margin-top: var(--gutter-medium);\n  padding-left: calc(var(--gutter-medium) * 2);\n}\n@media screen and (min-width: 1224px) {\n  .nav{\n    border: none;\n  }\n  .nav-content-container ul{\n    padding-left: 0;\n  }\n  .nav .title > .link{\n    display: block;\n  }\n}\n.nav-content-container .nav-item{\n  padding: 0;\n  list-style-type: none;\n}\n.nav-content-container .nav-item.level-1{\n  padding-left: calc(var(--gutter-medium) * .3);\n}\n.nav-content-container .nav-item.level-2{\n  padding-left: calc(var(--gutter-medium) * .6);\n}\n.nav-content-container .nav-item.level-3{\n  padding-left: calc(var(--gutter-medium) * 9);\n}\n.nav-content-container .nav-item.level-4{\n  padding-left: calc(var(--gutter-medium) * 1.2);\n}\n.nav-content-container .nav-item.level-5{\n  padding-left: calc(var(--gutter-medium) * 1.5);\n}\n\n@media screen and (min-width: 1224px){\n  .nav-content-container .nav-item{\n    font-size: .7rem;\n  }\n}\n\n/**\n * ASIDE COMPONENT STYLING\n */\n.aside .aside-content{\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: stretch;\n  width: calc(100% - var(--aside-toggle-width));\n  padding: var(--gutter-medium);\n  box-sizing: border-box;\n  padding-top: 0;\n  padding-right: 0;\n  width: unset;\n  max-width: 100%;\n}\n@media screen and (min-width: 1224px) {\n  .aside .aside-content .aside-header{\n    min-height: 2.5rem;\n    align-items: flex-end;\n  }\n}\n.aside .aside-header{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  align-items: flex-start;\n}\n\n.aside .aside-header .aside-title{\n  flex: 1;\n  margin: 0;\n  max-width: calc(100% - 1rem);\n  overflow: hidden;\n}\n\n.aside .aside-close-btn{\n  font-size: 1em;\n}\n\n.aside .aside-body{\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.aside .aside-toggle{\n  color: var(--color-link-default);\n  background: transparent;\n}\n\n/**\n * RAILWAY COMPONENTS STYLING\n */\n.callirhoe-layout .railway{\n  position: fixed;\n  right: 2rem;\n  top: 2rem;\n  width: 1rem;\n  height: calc(100% - 3rem);\n}\n.callirhoe-layout .railway .elevator{\n  position: absolute;\n  left: 0;\n  background: rgba(0,0,0,0.1);\n  width: 100%;\n  pointer-events: none;\n}\n.callirhoe-layout .railway .shadow.h1,\n.callirhoe-layout .railway .shadow.h2,\n.callirhoe-layout .railway .shadow.h3,\n.callirhoe-layout .railway .shadow.h4,\n.callirhoe-layout .railway .shadow.h5,\n.callirhoe-layout .railway .shadow.h6 {\n  background: var(--color-link-active);\n  border: 1px solid var(--color-link-active);\n}\n.callirhoe-layout .railway .railway-title{\n  font-size: 0.5rem;\n  right: 1.2rem;\n  position: absolute;\n  top: 0;\n  text-align: right;\n  font-style: italic;\n  width: 20vw;\n  opacity: .5;\n  transition: opacity .5s ease;\n}\n\n.callirhoe-layout .railway .railway-title:hover{\n  opacity: 1;\n}\n\n.callirhoe-layout .railway.h2 .railway-title {\n  font-size: 0.4rem;\n}\n\n.callirhoe-layout .railway.h3 .railway-title,\n.callirhoe-layout .railway.h4 .railway-title,\n.callirhoe-layout .railway.h5 .railway-title,\n.callirhoe-layout .railway.h6 .railway-title\n {\n  font-size: 0.3rem;\n}\n\n.__react_component_tooltip{\n  font-size: .5em;\n}\n.callirhoe-layout .railway .shadow{\n  position: absolute;\n  left: 0;\n  border: 1px solid lightgrey;\n  width: 100%;\n  cursor: pointer;\n  box-sizing: border-box;\n}\n/**\n * LANDING VIEW COMPONENTS STYLING\n */\n.callirhoe-layout.has-view-class-landing .nav-header .title{\n  display: none;\n}\n.landing-player .landing-title{\n  font-size: 4rem;\n  margin-bottom: 0;\n}\n.landing-player .landing-subtitle{\n  font-size: 2rem;\n  font-style: italic;\n}\n\n.landing-player .main-link{\n  color: var(--color-link-active);\n  font-size: 1.5rem;\n}\n\n.landing-player .links{\n  padding: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n}\n.landing-player .links li{\n  list-style-type: none;\n  margin: 0;\n}\n\n\n/**\n * Pure CSS background Gradient\n * courtesy of Manuel Pinto -> https://codepen.io/P1N2O/pen/pyBNzX\n */\n.callirhoe-layout.has-view-class-landing .main-contents-container.has-animated-background-gradient{\n  background: linear-gradient(-45deg, #EE7752, #E73C7E, #23A6D5, #23D5AB);\n  background-size: 400% 400%;\n  -webkit-animation: Gradient 15s ease infinite;\n  -moz-animation: Gradient 15s ease infinite;\n  animation: Gradient 15s ease infinite;\n\n  min-height: 100%;\n  color: var(--color-background);\n}\n\n.callirhoe-layout.has-view-class-landing .main-contents-container.has-animated-background-gradient .link{\n  color: var(--color-background);\n}\n\n@media screen and (min-width: 1224px){\n  .callirhoe-layout.has-view-class-landing .nav-content-container{\n    margin-top: calc(2 * var(--gutter-medium));\n    padding: var(--gutter-medium);\n  }\n  .callirhoe-layout.has-view-class-landing .nav-header{\n    display: none;\n  }\n  .callirhoe-layout.has-view-class-landing .main-container{\n    left: 0;\n    width: 100%;\n  }\n  .callirhoe-layout.has-view-class-landing .main-contents-container.with-animated-background{\n    left: 0;\n    padding-left: var(--desktop-nav-width);\n  }\n  .callirhoe-layout.has-view-class-landing .nav{\n    background: transparent;\n  }\n}\n  \n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n\n/**\n * SECTION VIEW COMPONENTS STYLING\n */\n.section-player{\n  min-height: calc(100% - var(--gutter-medium) * 5);\n  padding-bottom: calc(var(--gutter-medium) * 5);\n  position: relative;\n}\n.main-contents-container{\n  overflow-x: hidden;\n}\n\n/**\n * Notes can be displayed as sidenotes starting from tablet\n */\n@media screen and (min-width: 768px) {\n  .section-player.has-notes-position-sidenotes .notes-container{\n    width: var(--content-margin-width);\n    position: absolute;\n    left: 0;\n    height: 100%;\n    top: 0;\n    box-sizing: border-box;\n    padding-right: var(--gutter-medium);\n    padding-left: var(--gutter-medium);\n    font-size: .7em;\n    opacity: .8;\n    overflow-x: hidden;\n    animation: slide-up 1s ease;\n  }\n  .section-player.has-notes-position-sidenotes .notes-title{\n    display: none;\n  }\n  .section-player.has-notes-position-sidenotes .notes-list{\n    position: relative;\n    top: calc(var(--gutter-medium) * -2.5);\n  }\n  \n}\n@media screen and (min-width: 1224px) {\n  .section-player.has-notes-position-sidenotes .notes-list{\n    top: calc(var(--gutter-medium) * -1);\n  }\n}\n  \n/** reset notes position in print and mobile*/\n@media screen and (max-width: 768px) {\n  .section-player.has-notes-position-sidenotes .notes-container{\n    width: unset;\n    position: relative;\n    left: unset;\n    height: unset;\n    top: unset;\n    padding-right: unset;\n    font-size: unset;\n    opacity: unset;\n    padding-left: var(--content-margin-width);\n  }\n  .section-player.has-notes-position-sidenotes .notes-title{\n    display: block\n  }\n  .section-player.has-notes-position-sidenotes .notes-list{\n    top: unset;\n  }\n  .section-player.has-notes-position-sidenotes .note-item{\n    position: relative!important;\n    top: unset!important;\n    max-width: unset;\n  }\n}\n@media print {\n  .section-player.has-notes-position-sidenotes .notes-container{\n    width: unset;\n    position: relative;\n    left: unset;\n    height: unset;\n    top: unset;\n    padding-right: unset;\n    font-size: unset;\n    opacity: unset;\n    padding-left: var(--content-margin-width);\n  }\n  .section-player.has-notes-position-sidenotes .notes-title{\n    display: block\n  }\n  .section-player.has-notes-position-sidenotes .notes-list{\n    top: unset;\n  }\n  .section-player.has-notes-position-sidenotes .note-item{\n    position: relative!important;\n    top: unset!important;\n  }\n}\n\n/* navigation footer */\n.navigation-footer{\n  position : absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  box-sizing: border-box;\n  padding-bottom: var(--gutter-medium);\n}\n/* aligning the nav footer and notes list when notes are aside */\n.section-player .navigation-footer,\n.section-player.has-notes-position-footnotes .notes-container{\n  padding-left: var(--content-margin-width);\n}\n\n\n.navigation-footer ul{\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items; stretch;\n  justify-content: center;\n}\n.navigation-footer li:not(:last-of-type) {\n  margin-right: var(--gutter-medium);\n}\n.navigation-footer li{\n  margin: 0;\n  list-style-type: none;\n  position: relative;\n  transition: all .5s ease;\n  left: 0;\n  right: 0;\n}\n\n.navigation-footer li.prev:hover{\n  right: var(--gutter-medium);\n  left: unset;\n}\n.navigation-footer li.next:hover{\n  left: var(--gutter-medium);\n  right: unset;\n}\n\n.navigation-footer .navigation-item{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n}\n.navigation-footer .navigation-item-text{\n  flex: 1;\n}\n/* notes */\n.notes-list{\n  margin-left: 0;\n  padding-left: 0;\n}\n.note-item{\n  list-style-type: none;\n  margin: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  max-width: 100%;\n}\n.section-player.has-notes-position-sidenotes .note-item {\n  max-width: calc(var(--content-margin-width) - 1rem);\n  overflow: hidden;\n}\n.note-item > div{\n  flex: 1;\n  max-width: calc(100% - 1rem);\n}\n.note-block-pointer::after{\n  content: '.';\n  padding-right: var(--gutter-medium);\n}\n\n.sections-list{\n  padding-left: var(--mobile-nav-head-height)\n}\n\n.sections-list ul{\n  padding: 0;\n  list-style: none;\n  display: flex;\n  flex-flow: row wrap;\n}\n\n.resource-card{\n  margin: .2rem;\n  padding: .5rem;\n  border: 1px solid lightgrey;\n  cursor: pointer;\n  min-width: 30%;\n   max-width: 30%;\n  overflow: hidden;\n  min-height: 30vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.resource-card-title{\n  font-size: 1rem;\n  margin: 0;\n  margin-top: .5rem;\n}\n\n.resource-card img{\n  max-height: 15vw;\n}\n\n@media screen and (min-width: 1224px) {\n  .resource-card{\n    min-width: 20%;\n   max-width: 20%;\n    \n  }\n}\n\n/**\n *  =============\n * ANIMATIONS\n * ==============\n * */\n@keyframes appear {\n  0% {\n      opacity: 0;\n  }\n  100% {\n      opacity: 1;\n  }\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e})=>r.default.createElement("head",{profile:"http://dublincore.org/documents/2008/08/04/dc-html/"},e);var s=({production:e,edition:t={},pageName:n,withHelmet:o=!1})=>{const s=`${t.data.publicationTitle&&t.data.publicationTitle.length?t.data.publicationTitle:e.metadata.title}${n?` - ${n}`:""}`,l=e.metadata.authors||[],u=e.metadata.tags||[],c=e.metadata.description,f=l.map(e=>`${e.given} ${e.family}`).join(", "),d=o?i.default:a;return r.default.createElement(d,null,r.default.createElement("title",null,s),r.default.createElement("meta",{name:"generator",content:"peritext"}),r.default.createElement("link",{rel:"schema.DC",href:"http://purl.org/dc/elements/1.1/"}),r.default.createElement("meta",{name:"DC.Title",lang:"fr",content:s}),l.map((e,t)=>r.default.createElement("meta",{key:`${e.family}, ${e.given}-${t}`,name:"DC.creator",content:`${e.family}, ${e.given}`})),r.default.createElement("meta",{name:"DC.issued",lang:"fr",content:t.metadata.lastUpdateAt&&new Date(t.metadata.lastUpdateAt).toISOString()}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),r.default.createElement("meta",{name:"author",content:f}),r.default.createElement("meta",{name:"keywords",content:u.join(",")}),r.default.createElement("meta",{name:"description",content:c}),r.default.createElement("meta",{name:"viewport",content:"user-scalable=no,width=device-width"}),r.default.createElement("meta",{name:"twitter:card",value:"summary"}),r.default.createElement("meta",{name:"twitter:site",content:""}),r.default.createElement("meta",{name:"twitter:title",content:s}),r.default.createElement("meta",{name:"twitter:description",content:c}),r.default.createElement("meta",{itemProp:"name",content:s}),r.default.createElement("meta",{itemProp:"description",content:c}),r.default.createElement("meta",{property:"og:title",content:s}),r.default.createElement("meta",{property:"og:type",content:"website"}),r.default.createElement("meta",{property:"og:url",content:""}),r.default.createElement("meta",{property:"og:description",content:c}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="\n/**\n * DOCUMENTATION\n\nThis template is programmed according to mobile-first methodology (no media query = mobile version)\n\nThe organization is roughly as following :\n0. template's CSS variables\n1. first-level containers layout rules, for mobile, then tablet, then desktop version\n2. reused components rules\n3. view-specific rules\n\nUsed breakpoints\n- tablet : 768px;\n- desktop: 1224px;\n */\n/**\n * =================\n * =================\n * =================\n * Default variables\n * =================\n * =================\n * =================\n */\n:root \n{\n  --transition-medium: 1000ms;\n\n\n  --color-background: #ffffff;\n  --color-link-default: #99B6BD;/* bleu délavé */\n  --color-link-active:#D4613E;/* rouille */\n  --color-text: #4d4c4c;\n\n  --gutter-medium: 1rem;\n  --gutter-large: 2rem;\n\n  font-size: 18px;\n}\nhtml{\n  scroll-behavior: smooth;\n}\n\n@media screen and (min-width: 1224px){\n  :root{\n    font-size: 15px;\n  }\n}\n\n/**\n * =================\n * =================\n * =================\n * Resets\n * =================\n * =================\n * =================\n */\nbutton{\n  background: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n}\n\n/**\n * =================\n * =================\n * =================\n * Register animated elements here\n * =================\n * =================\n * =================\n */\n.chrysaor-layout .main-container\n{\n  transition: all ease var(--transition-medium);\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, mobile version\n * =================\n * =================\n * =================\n */\n\n/**\n * Main contents mobile layout\n */\n\n.chrysaor-layout\n{\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: stretch;\n  overflow: hidden;\n  transition: all .5s ease;\n}\n.chrysaor-layout .main-container{\n  flex: 1;\n  box-sizing: border-box;\n  overflow: hidden;\n  position: relative;\n}\n\n.chrysaor-layout .columns-container{\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: row nowrap;\n  overflow: hidden;\n  justify-content: stretch;\n}\n\n.chrysaor-layout .contents-column{\n  height: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  overflow: hidden;\n  justify-content: stretch;\n  flex: 1;\n  opacity: 1;\n  transition: all .5s ease;\n}\n\n.chrysaor-layout .contents-column .column-header{\n  padding: .5rem;\n}\n\n.chrysaor-layout .contents-column .column-header h1{\n  margin: 0;\n  font-size: 1rem;\n}\n.chrysaor-layout .contents-column.is-active{\n  flex: 6;\n}\n/*\n.chrysaor-layout .contents-column.is-collapsed:not(:hover){\n  opacity: .5;\n}*/\n.chrysaor-layout .contents-column.is-collapsed{\n  flex: 2;\n}\n.chrysaor-layout .contents-column.is-hidden{\n  opacity: 0;\n  max-width: 0;\n}\n\n.chrysaor-layout .contents-column .cards-list\n{\n  flex: 1;\n  overflow-x: hidden;\n  overflow-y: auto;\n  padding: 0;\n  margin: 0;\n  scroll-behavior: smooth;\n}\n\n.chrysaor-layout .header .additional-container{\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  transition: all .5s ease;\n}\n\n.chrysaor-layout .header .title\n{\n  flex: 1;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: stretch;\n  padding: .5rem;\n  font-size: 1.2rem;\n  margin: 0;\n  transition: all .5s ease;\n  cursor: pointer;\n}\n.chrysaor-layout .header .title .link{\n  flex: 1;\n}\n.chrysaor-layout .header .main-header{\n  padding: .5rem;\n}\n.chrysaor-layout .header .additional-header{\n  max-width: 50vw;\n  padding: 0;\n}\n\n.chrysaor-layout .header .subtitle\n{\n  font-size: 1rem;\n}\n\n.chrysaor-layout .header .authors\n{\n  font-size: .8rem;\n}\n\n.chrysaor-layout .header .additional-container{\n  max-height: 0;\n  overflow: hidden;\n  transition: all .5s ease;\n  opacity: 0;\n}\n.chrysaor-layout .header.is-open .additional-container{\n  max-height: 100%;\n  opacity: 1;\n  min-height: calc(100% - 3rem);\n  min-height: calc(100vh - 3rem);\n}\n\n.chrysaor-layout .header .subtitle,\n.chrysaor-layout .header .authors{\n  margin: 0;\n  margin-bottom: .2rem;\n}\n\n.chrysaor-layout .header .description{\n  font-size: .8rem;\n  overflow-y: auto;\n  max-height: 100%;\n  padding-top: 0;\n  margin-top: .5rem;\n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, tablet version\n * =================\n * =================\n * =================\n */\n@media screen and (min-width: 768px) {\n  \n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, desktop version\n * =================\n * =================\n * =================\n */\n@media screen and (min-width: 1224px) {\n  \n}\n\n/**\n * =================\n * =================\n * =================\n * Global layout, print version\n * =================\n * =================\n * =================\n */\n@media print {\n\n}\n\n/**\n * ======\n * ======\n * ======\n * ======\n * ======\n * END of global layout rules\n * ======\n * ======\n * ======\n * ======\n * ======\n */\n\n/**\n * ======\n * Components styling\n * ======\n */\n/**\n * GENERAL TYPOGRAPHY\n */\n.chrysaor-layout{\n  text-rendering: optimizeLegibility;\n  color: var(--color-text);\n  font-family:\"Fira Sans\", serif;\n}\n.link,\na,\na:visited,\n.inline-glossary\n{\n  color: var(--color-link-default);\n  cursor: pointer;\n  text-decoration: none;\n}\n.link.active,\n.inline-glossary.active,\na:active{\n  color: var(--color-link-active);\n}\n\n.chrysaor-layout sup{\n  font-size: .5em;\n}\n/**\n * GENERAL COMPONENTS\n */\n/* bibliographic citations */\n.csl-entry {\n    word-break: break-all;\n}\n\n/* views title */\n.view-title{\n  margin-top: 0;\n}\n\n/* views main contents */\n/** we always keep the same padding left for main column\neven when notes are in the end*/\n.main-contents-container .main-column {\n  padding-left: var(--content-margin-width);\n  padding-right: var(--gutter-medium);\n}\n\n/**\n * RENDERED CONTENT (ANYTHING COMING FROM DRAFT)\n */\n.rendered-content p,\n.rendered-content ul,\n.rendered-content ol,\n.rendered-content blockquote,\n.rendered-content pre,\n.rendered-content .unstyled\n{\n  margin-bottom: var(--gutter-medium);\n  line-height: 1.4;\n}\n\n.rendered-content .unstyled:not(:first-of-type){\n  text-indent : 2em;\n}\n\n.has-view-class-sections .main-column .rendered-content .unstyled:first-of-type::first-letter{\n  font-size:3.5em;\n  padding-right:0.2em;\n  padding-bottom: 0;\n  float:left;\n}\nh1{\n    font-size: 1.5em;\n    margin-bottom: .5em;\n}\n\n.rendered-content blockquote{\n  margin: 0;\n  margin-bottom: var(--gutter-medium);\n  padding: var(--gutter-medium);\n  padding-left: var(--gutter-large);\n  position: relative;\n  background: rgba(0,0,0,0.03);\n  quotes: '« ' ' »' '‹ ' ' ›';\n}\n\n/*\n.note-item .rendered-content blockquote{\n  padding: var(--gutter-small);\n}\n*/\n.rendered-content blockquote:after\n{\n    position: absolute;\n    right: 2px;\n    bottom: 2px;\n\n    content: close-quote;\n}\n\n.rendered-content blockquote:before\n{\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    content: open-quote;\n}\n\n\n/**\n * Figures (general)\n */\n.block-contextualization-container,\n.block-contextualization-container figure\n{\n  padding: 0;\n  margin: 0;\n}\n.block-contextualization-container .figure-caption{\n  /*border-top: 1px solid var(--color-link-default);*/\n  padding-top: var(--gutter-medium);\n}\n\n.block-contextualization-container.is-active .figure-caption .link{\n  color : var(--color-link-active);\n}\n.block-contextualization-container .figure-title{\n  margin: 0;\n}\n.block-contextualization-container .figure-title .mention-context-pointer,\n  .block-contextualization-container .figure-title button.mention-context-pointer{\n  font-size: 1rem;\n  padding: 0;\n  text-align: left;\n}\n.block-contextualization-container .figure-legend{\n  font-size: 1em;\n  margin-top: 0;\n}\n.block-contextualization-container .figure-legend p{\n  margin-top: 0;\n}\n.block-contextualization-container figure{\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n.block-contextualization-container img\n{\n  max-width: 100%;\n  max-height: 100%;\n}\n.block-contextualization-container iframe\n{\n  min-height: 50vh;\n  outline: none;\n  border: none;\n  width: 100%;\n  max-width: 100%;  \n  height: 100%;\n}\n/**\n * Figures (specific)\n */\n.block-contextualization-container.bib .figure-caption{\n  display: none;\n}\n.block-contextualization-container.image img{\n  cursor: pointer;\n  transition: opacity ease var(--transition-medium);\n}\n.block-contextualization-container.image img:hover{\n  opacity: .8;\n}\n.block-contextualization-container.image .image-nav-container{\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n}\n.block-contextualization-container.image .image-nav-item{\n  list-style-type: none;\n  cursor: pointer;\n}\n\n.block-contextualization-container.image .image-nav-item-counter{\n  display: none;\n}\n\n.block-contextualization-container.image .image-nav-item::after{\n  content : \"◉\";\n  color: var(--color-link-default);\n}\n.block-contextualization-container.image .image-nav-item.is-active::after{\n  color: var(--color-link-active);\n}\n\n.inline-contextualization-container.is-active .link{\n  color: var(--color-link-active);\n}\n\n.inline-contextualization-container.image{\n  cursor: pointer;\n}\n\n.inline-images-container img {\n      max-width: 2rem;\n      max-height: 1rem;\n      padding-right: .3rem;\n}\n\n.block-contextualization-container.embed{\n  min-height: 50vh;\n  max-height: 80vh;\n  position: absolute;\n}\n\n.block-contextualization-container.embed .fullscreen > div{\n  height: 100%;\n}\n\n.block-contextualization-container.embed .fullscreen-btn{\n  position : absolute;\n  right: 1rem;\n  bottom: 4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  background: white;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.block-contextualization-container.embed .fullscreen .fullscreen-btn{\n  right: 1rem;\n  botttom: 1rem;\n}\n\n.block-contextualization-container.table{\n  max-width: 100%;\n  width: 100%;\n}\n.block-contextualization-container.table .static-table-container{\n  max-width: 100%;\n  width: 100%;\n  position: relative;\n  overflow: auto;\n  height: 70vh;\n}\n.block-contextualization-container.table .static-table-container table{\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n.block-contextualization-container.table .ReactTable .rt-tbody{\n  max-height: 70vh;\n  overflow: auto;\n}\n\n.block-contextualization-container.table .ReactTable\n{\n    max-width: 100%;\n}\n\n.block-contextualization-container.table .ReactTable .-pagination\n{\n    height: 5rem;\n}\n\n.block-contextualization-container.table table th {\n    border-right: 1px solid black;\n    border-bottom: 1px solid black;\n    text-align: left;\n    font-weight: 400;\n    text-indent: 0;\n    font-size: .8em;\n}\n\n.block-contextualization-container.table table thead th {\n  font-weight: 800;\n}\n\n.block-contextualization-container.vegaLite .vegaLite > div {\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: var(--gutter-medium);\n}\n\n/**\n * Inline (specific)\n * */\n.block-contextualization-container.bib {\n  cursor: pointer;\n}\n\n/**\n * BIG LISTS (GLOSSARY, REFERENCES, ...)\n */\n.big-list-items-container{\n  padding: 0;\n}\n\n.big-list-item-actions .link{\n  font-size: .8rem;\n  padding: 0;\n}\n\n.big-list-item{\n  margin: 0;\n  list-style-type: none;\n  margin-bottom: var(--gutter-medium);\n}\n.big-list-item h1,\n.big-list-item h2,\n.big-list-item h3\n{\n  margin: 0;\n}\n\n.__react_component_tooltip{\n  font-size: .5em;\n}\n\n/**\n * SECTION VIEW COMPONENTS STYLING\n */\n.section-player{\n  min-height: calc(100% - var(--gutter-medium) * 5);\n  position: relative;\n}\n\n.section-player .section-title{\n  display: flex;\n  flex-flow: row nowrap;\n  max-width: 100%;\n  justify-content: stretch;\n  overflow: hidden;\n}\n\n.section-player.is-sticky .section-title{\n  position: fixed;\n  background: var(--color-background);\n  font-size: 1rem;\n  left: 0;\n  padding-left: 1.5rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n  z-index: 1;\n}\n\n.section-player .section-title .title-content{\n  flex: 1;\n  // word-break: break-all;\n}\n\n.main-contents-container{\n  overflow-x: hidden;\n}\n\n/**\n * Notes can be displayed as sidenotes starting from tablet\n */\n@media screen and (min-width: 768px) {\n  \n}\n@media screen and (min-width: 1224px) {\n}\n  \n/** reset notes position in print and mobile*/\n@media screen and (max-width: 768px) {\n  \n}\n@media print {\n  \n}\n\n/* notes */\n.notes-list{\n  margin-left: 0;\n  padding-left: 0;\n}\n.note-item{\n  list-style-type: none;\n  margin: 0;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: stretch;\n  max-width: 100%;\n}\n.section-player.has-notes-position-sidenotes .note-item {\n  max-width: calc(var(--content-margin-width) - 1rem);\n  overflow: hidden;\n}\n.note-item > div{\n  flex: 1;\n  max-width: calc(100% - 1rem);\n}\n.note-block-pointer::after{\n  content: '.';\n  padding-right: var(--gutter-medium);\n}\n\n.notes-title{\n  font-size: 1.1rem;\n}\n\n/**\n * Resource card component\n */\n\n.resource-card{\n  margin: .5rem;\n  padding: 0;\n  border: 1px solid lightgrey;\n  cursor: pointer;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n  transition: all .5s ease;\n}\n\n.resource-card .resource-card-content{\n  max-height: 100%;\n  overflow: hidden;\n  padding: 0;\n  transition: max-height .5s ease;\n}\n\n.resource-card.is-collapsed .resource-card-content > .link,\n.resource-card.is-collapsed .resource-card-content > .link > .card-title{\n  opacity: 1;\n  transition: all .5s ease;\n}\n\n.resource-card .resource-card-content .card-title,\n.resource-card .resource-card-content .card-authors\n{\n  margin: 0;\n  padding: .5rem;\n}\n\n.resource-card .resource-card-content .card-title{\n\tfont-size: 1rem;\n}\n\n.contents-column.is-collapsed .resource-card .resource-card-content .card-title,\n.contents-column.is-collapsed .resource-card .resource-card-content .card-authors\n{\n\tfont-size: .7rem;\n}\n\n.resource-card.is-highlighted .link {\n  color: var(--color-link-active);\n}\n\n.resource-card.is-active .resource-card-content{\n  padding: 1rem;\n}\n\n.resource-card.is-collapsed{\n  padding: 0;\n  margin: 0;\n  border: none;\n}\n\n.resource-card.is-collapsed .resource-card-content{\n  max-height: .1rem;\n  border: 1px solid lightgrey;\n  margin: .1rem .5rem;;\n}\n\n.contents-column.is-active .resource-card.is-collapsed .resource-card-content{\n  max-height: .5rem;\n  border: 1px solid lightgrey;\n  margin: .2rem .5rem;;\n}\n\n.resource-card.is-collapsed .resource-card-content > .link {\n  opacity: 0;\n}\n\n.resource-card.is-collapsed .resource-card-content > .link > .card-title{\n  margin: 0;\n  padding: 0;\n}\n\n.excerpt{\n  padding: .5rem;\n  margin: .5rem;\n  background: rgba(0,0,0,0.05);\n  font-size: .6rem;\n}\n.excerpt .rendered-content div{\n  margin-bottom: 0;\n}\n\n@media screen and (min-width: 1224px) {\n\n}\n\n/**\n *  =============\n * ANIMATIONS\n * ==============\n * */\n@keyframes appear {\n  0% {\n      opacity: 0;\n  }\n  100% {\n      opacity: 1;\n  }\n}\n\n\n@-webkit-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@-moz-keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n@keyframes Gradient {\n  0% {\n    background-position: 0% 50%\n  }\n  50% {\n    background-position: 100% 50%\n  }\n  100% {\n    background-position: 0% 50%\n  }\n}\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(70);function a(e){return e&&e.__esModule?e:{default:e}}const s=({resource:e},{contextualizers:t,productionAssets:n})=>{if(!["glossary","section"].includes(e.metadata.type)){const i=t[e.metadata.type]&&t[e.metadata.type].Block,a=(0,o.v4)(),s={contextualizerId:a,sourceId:e.id,targetId:e.id},l={id:a,type:e.metadata.type,parameters:{}};return r.default.createElement("figure",{className:`resource-preview block-contextualization-container ${l.type}`,style:{pointerEvents:"none"}},r.default.createElement(i,{renderingMode:"screened",resource:e,contextualization:s,contextualizer:l,assets:n}))}return null};s.contextTypes={contextualizers:i.default.object,productionAssets:i.default.object};var l=s;t.default=l},function(e,t){function n(){}n.prototype.resolve=function(e,t){},e.exports.deferConfig=function(e){var t=Object.create(n.prototype);return t.resolve=e,t},e.exports.DeferredConfig=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return w})),n.d(r,"deepClone",(function(){return O})),n.d(r,"getValueByPointer",(function(){return S})),n.d(r,"applyOperation",(function(){return T})),n.d(r,"applyPatch",(function(){return j})),n.d(r,"applyReducer",(function(){return A})),n.d(r,"validator",(function(){return P})),n.d(r,"validate",(function(){return C})),n.d(r,"_areEquals",(function(){return N}));var i={};n.r(i),n.d(i,"unobserve",(function(){return R})),n.d(i,"observe",(function(){return z})),n.d(i,"generate",(function(){return L})),n.d(i,"compare",(function(){return B}));var o={};n.r(o),n.d(o,"dark",(function(){return X})),n.d(o,"excel",(function(){return K})),n.d(o,"fivethirtyeight",(function(){return J})),n.d(o,"ggplot2",(function(){return Z})),n.d(o,"latimes",(function(){return te})),n.d(o,"quartz",(function(){return ne})),n.d(o,"vox",(function(){return re})),n.d(o,"urbaninstitute",(function(){return oe})),n.d(o,"version",(function(){return ae}));var a,s=n(1),l=n.n(s),u=n(2),c=n.n(u),f=n(3),d=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=Object.prototype.hasOwnProperty;function h(e,t){return p.call(e,t)}function m(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)h(e,r)&&t.push(r);return t}function g(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function b(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function y(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function v(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function x(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}var _=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,x(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=x(t,{name:n,index:r,operation:i,tree:o}),s}return d(t,e),t}(Error),w=_,O=g,E={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=S(n,this.path);r&&(r=g(r));var i=T(n,{op:"remove",path:this.from}).removed;return T(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=S(n,this.from);return T(n,{op:"add",path:this.path,value:g(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:N(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},k={add:function(e,t,n){return b(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:E.move,copy:E.copy,test:E.test,_get:E._get};function S(e,t){if(""==t)return e;var n={op:"_get",path:t};return T(e,n),n.value}function T(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):P(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=S(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=N(e,t.value),!1===a.test)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new w("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=g(e));var s=(t.path||"").split("/"),l=e,u=1,c=s.length,f=void 0,d=void 0,p=void 0;for(p="function"==typeof n?n:P;;){if(d=s[u],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===l[d]?f=s.slice(0,u).join("/"):u==c-1&&(f=t.path),void 0!==f&&p(t,0,e,f)),u++,Array.isArray(l)){if("-"===d)d=l.length;else{if(n&&!b(d))throw new w("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);b(d)&&(d=~~d)}if(u>=c){if(n&&"add"===t.op&&d>l.length)throw new w("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=k[t.op].call(t,l,d,e)).test)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=v(d)),u>=c){if(!1===(a=E[t.op].call(t,l,d,e)).test)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}l=l[d]}}function j(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new w("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=g(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=T(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function A(e,t,n){var r=T(e,t);if(!1===r.test)throw new w("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function P(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new w("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!E[e.op])throw new w("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new w("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new w('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new w("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new w("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"==typeof t){var i=m(t),o=i.length;for(n=0;n<o;n++)if(e(t[i[n]]))return!0}return!1}(e.value))throw new w("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new w("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new w("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=C([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new w("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function C(e,t,n){try{if(!Array.isArray(e))throw new w("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)j(g(t),g(e),n||!0);else{n=n||P;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof w)return e;throw e}}function N(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!N(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!N(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var M=new WeakMap,I=function(e){this.observers=new Map,this.obj=e},D=function(e,t){this.callback=e,this.observer=t};function R(e,t){t.unobserve()}function z(e,t){var n,r=function(e){return M.get(e)}(e);if(r){var i=function(e,t){return e.observers.get(t)}(r,t);n=i&&i.observer}else r=new I(e),M.set(e,r);if(n)return n;if(n={},r.value=g(e),t){n.callback=t,n.next=null;var o=function(){L(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){L(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new D(t,n)),n}function L(e,t){void 0===t&&(t=!1);var n=M.get(e.object);F(n.value,e.object,e.patches,"",t),e.patches.length&&j(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function F(e,t,n,r,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=m(t),a=m(e),s=!1,l=a.length-1;l>=0;l--){var u=e[f=a[l]];if(!h(t,f)||void 0===t[f]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+y(f),value:g(u)}),n.push({op:"remove",path:r+"/"+y(f)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var c=t[f];"object"==typeof u&&null!=u&&"object"==typeof c&&null!=c?F(u,c,n,r+"/"+y(f),i):u!==c&&(!0,i&&n.push({op:"test",path:r+"/"+y(f),value:g(u)}),n.push({op:"replace",path:r+"/"+y(f),value:g(c)}))}}if(s||o.length!=a.length)for(l=0;l<o.length;l++){var f;h(e,f=o[l])||void 0===t[f]||n.push({op:"add",path:r+"/"+y(f),value:g(t[f])})}}}function B(e,t,n){void 0===n&&(n=!1);var r=[];return F(e,t,r,"",n),r}Object.assign({},r,i,{JsonPatchError:_,deepClone:g,escapePathComponent:y,unescapePathComponent:v});var U=n(106),q=n.n(U),$=n(186),H=n(77),W=n(185),V=n(187),G=n.n(V),Y=n(345);var X={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}};var K={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}};var J={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},style:{bar:{binSpacing:2,fill:"#30a2da",stroke:null}},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}};var Z={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}};const Q="Benton Gothic Bold, sans-serif",ee={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]};var te={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Q,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:Q,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:Q,titleFontSize:13,titleFontWeight:"normal"},range:{category:ee["category-6"],diverging:ee["fireandice-6"],heatmap:ee["fire-7"],ordinal:ee["fire-7"],ramp:ee["fire-7"]}};var ne={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}};var re={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}};const ie={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]};var oe={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:ie["six-groups-cat-1"],diverging:ie["diverging-colors"],heatmap:ie["diverging-colors"],ordinal:ie["six-groups-seq"],ramp:ie["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:!1}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}};const ae=Y.version;var se=n(346),le="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const ue="vg-tooltip-element",ce={offsetX:10,offsetY:10,id:ue,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var fe=n(0),de=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function pe(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}class he{constructor(e){this.options=Object.assign(Object.assign({},ce),e);const t=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return le.toString().replace(ue,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(e,t,n,r){if(null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=function(e,t,n){if(Object(fe.A)(e))return`[${e.map(e=>t(Object(fe.H)(e)?e:pe(e,n))).join(", ")}]`;if(Object(fe.F)(e)){let r="";const i=e,{title:o}=i,a=de(i,["title"]);o&&(r+=`<h2>${t(o)}</h2>`);const s=Object.keys(a);if(s.length>0){r+="<table>";for(const e of s){let i=a[e];void 0!==i&&(Object(fe.F)(i)&&(i=pe(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}se.version;var me=function(e,t,n){const r=e.open(t),i=250;let o=~~(1e4/i);e.addEventListener("message",(function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(r.postMessage(n,"*"),setTimeout(e,i),o-=1)}),i)},ge='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5); }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function be(e,...t){for(const n of t)ye(e,n);return e}function ye(e,t){for(const n of Object.keys(t))Object(H.writeConfig)(e,n,t[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const ve=H;let xe=W;const _e=window;void 0===xe&&_e.vl&&_e.vl.compile&&(xe=_e.vl);const we={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Oe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ee={vega:"Vega","vega-lite":"Vega-Lite"},ke={vega:ve.version,"vega-lite":xe?xe.version:"not available"},Se={vega:e=>e,"vega-lite":(e,t)=>xe.compile(e,{config:t}).spec},Te='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function je(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Ee[r]} JSON Source`}function Ae(e,t,n={}){var r,i,a;return Object(f.a)(this,void 0,void 0,(function*(){const s=(l=n.loader)&&"load"in l?n.loader:ve.loader(n.loader);var l;const u=Object(fe.H)(t)?JSON.parse(yield s.load(t)):t,c=yield Pe((r=u.usermeta&&u.usermeta.embedOptions,null!=r?r:{}),s),d=yield Pe(n,s),p=Object.assign(Object.assign({},be(d,c)),{config:Object(fe.M)((i=d.config,null!=i?i:{}),(a=c.config,null!=a?a:{}))});return yield function(e,t,n={},r){var i,a,s,l,u,c;return Object(f.a)(this,void 0,void 0,(function*(){const f=n.theme?Object(fe.M)(o[n.theme],null!=(i=n.config)?i:{}):n.config,d=Object(fe.B)(n.actions)?n.actions:be({},we,null!=(a=n.actions)?a:{}),p=Object.assign(Object.assign({},Oe),n.i18n),h=null!=(s=n.renderer)?s:"canvas",m=null!=(l=n.logLevel)?l:ve.Warn,g=null!=(u=n.downloadFileName)?u:"visualization";if(!1!==n.defaultStyle){const e="vega-embed-style";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?(null!=ge?ge:"").toString():n.defaultStyle,document.head.appendChild(t)}}const b=function(e,t){var n;if(e.$schema){const r=G()(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${Ee[r.library]}, but mode argument sets ${n=Ee[t],null!=n?n:t}.`);const i=r.library;return Object($.satisfies)(ke[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${Ee[i]} ${r.version}, but the current version of ${Ee[i]} is v${ke[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(t,n.mode);let y=Se[b](t,f);if("vega-lite"===b&&y.$schema){const e=G()(y.$schema);Object($.satisfies)(ke.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${ke.vega}.`)}const v="string"==typeof e?document.querySelector(e):e;if(!v)throw Error("${el} does not exist");v.classList.add("vega-embed"),d&&v.classList.add("has-actions"),v.innerHTML="";const x=n.patch;x&&(y=x instanceof Function?x(y):j(y,x,!0,!1).newDocument),n.formatLocale&&ve.formatLocale(n.formatLocale),n.timeFormatLocale&&ve.timeFormatLocale(n.timeFormatLocale);const _=ve.parse(y,"vega-lite"===b?{}:f),w=new ve.View(_,{loader:r,logLevel:m,renderer:h});if(!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new he(!0===n.tooltip?{}:n.tooltip).call,w.tooltip(e)}let O,{hover:E}=n;if(void 0===E&&(E="vega"===b),E){const{hoverSet:e,updateSet:t}="boolean"==typeof E?{}:E;w.hover(e,t)}if(n&&(n.width&&w.width(n.width),n.height&&w.height(n.height),n.padding&&w.padding(n.padding)),yield w.initialize(e).runAsync(),!1!==d){let e=v;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=p.CLICK_TO_VIEW_ACTIONS,v.append(t),e=t;const n=document.createElement("summary");n.innerHTML=Te,t.append(n),O=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",O)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===d||!1!==d.export)for(const e of["svg","png"])if(!0===d||!0===d.export||d.export[e]){const t=p[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${g}.${e}`,i.addEventListener("mousedown",(function(t){w.toImageURL(e,n.scaleFactor).then(e=>{this.href=e}).catch(e=>{throw e}),t.preventDefault()})),r.append(i)}if(!0===d||!1!==d.source){const e=document.createElement("a");e.text=p.SOURCE_ACTION,e.href="#",e.addEventListener("mousedown",(function(e){var r,i;je(q()(t),null!=(r=n.sourceHeader)?r:"",null!=(i=n.sourceFooter)?i:"",b),e.preventDefault()})),r.append(e)}if("vega-lite"===b&&(!0===d||!1!==d.compiled)){const e=document.createElement("a");e.text=p.COMPILED_ACTION,e.href="#",e.addEventListener("mousedown",(function(e){var t,r;je(q()(y),null!=(t=n.sourceHeader)?t:"",null!=(r=n.sourceFooter)?r:"","vega"),e.preventDefault()})),r.append(e)}if(!0===d||!1!==d.editor){const e=null!=(c=n.editorUrl)?c:"https://vega.github.io/editor/",i=document.createElement("a");i.text=p.EDITOR_ACTION,i.href="#",i.addEventListener("mousedown",(function(n){me(window,e,{config:f,mode:b,renderer:h,spec:q()(t)}),n.preventDefault()})),r.append(i)}}return{view:w,spec:t,vgSpec:y,finalize:function(){O&&document.removeEventListener("click",O),w.finalize()}}}))}(e,u,p,s)}))}function Pe(e,t){var n;return Object(f.a)(this,void 0,void 0,(function*(){const r=Object(fe.H)(e.config)?JSON.parse(yield t.load(e.config)):null!=(n=e.config)?n:{},i=Object(fe.H)(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})}))}var Ce={};function Ne(e,t){void 0===e&&(e=Ce),void 0===t&&(t=Ce);var n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every((function(n){return e[n]===t[n]}))}var Me=function(){};function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(e){function t(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return De(Ie(t=e.call.apply(e,[this].concat(r))||this),"containerRef",c.a.createRef()),De(Ie(t),"viewPromise",void 0),De(Ie(t),"handleError",(function(e){var n=t.props.onError;return(void 0===n?Me:n)(e),void console.warn(e)})),De(Ie(t),"modifyView",(function(e){t.viewPromise&&t.viewPromise.then((function(t){return t&&e(t),!0})).catch(t.handleError)})),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.createView()},n.componentDidUpdate=function(e){var t=this,n=function(e){var t=new Set;return e.forEach((function(e){Object.keys(e).forEach((function(e){t.add(e)}))})),t}([this.props,e]);n.delete("className"),n.delete("style"),n.delete("signalListeners"),(Array.from(n).some((function(n){return t.props[n]!==e[n]}))||!Ne(this.props.signalListeners,e.signalListeners))&&(this.clearView(),this.createView())},n.componentWillUnmount=function(){this.clearView()},n.createView=function(){var e=this.props,t=e.spec,n=e.onNewView,r=(e.onError,e.signalListeners),i=void 0===r?{}:r,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["spec","onNewView","onError","signalListeners"]);this.containerRef.current&&(this.viewPromise=Ae(this.containerRef.current,t,o).then((function(e){var t=e.view,n=Object.keys(i);return n.forEach((function(e){try{t.addSignalListener(e,i[e])}catch(e){console.warn("Cannot add invalid signal handler >>",e)}})),0<n.length&&t.run(),t})).catch(this.handleError),n&&this.modifyView(n))},n.clearView=function(){return this.modifyView((function(e){e.finalize()})),this.viewPromise=void 0,this},n.render=function(){var e=this.props,t=e.className,n=e.style;return(c.a.createElement("div",{ref:this.containerRef,className:t,style:n}))},t}(c.a.PureComponent);function ze(){return(ze=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}De(Re,"propTypes",{className:l.a.string,spec:l.a.any.isRequired,signalListeners:l.a.any,style:l.a.any,onNewView:l.a.any,onError:l.a.func});var Be=function(e){function t(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return Fe(Le(t=e.call.apply(e,[this].concat(r))||this),"vegaEmbed",c.a.createRef()),Fe(Le(t),"handleNewView",(function(e){t.update();var n=t.props.onNewView;(void 0===n?Me:n)(e)})),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.update()},n.componentDidUpdate=function(e){Ne(this.props.data,e.data)||this.update()},n.update=function(){var e=this.props.data;if(e){var t=Object.keys(e);this.vegaEmbed.current&&0<t.length&&this.vegaEmbed.current.modifyView((function(n){t.forEach((function(t){!function(e,t,n){n&&(function(e){return!!e&&"[object Function]"==={}.toString.call(e)}(n)?n(e.data(t)):e.change(t,ve.changeset().remove((function(){return!0})).insert(n)))}(n,t,e[t])})),n.run()}))}},n.render=function(){var e=this.props,t=(e.data,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["data"]));return c.a.createElement(Re,ze({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))},t}(c.a.PureComponent);function Ue(){return(Ue=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}function qe(e){return c.a.createElement(Be,Ue({},e,{mode:"vega-lite"}))}function $e(){return($e=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}function He(e){var t=e.mode,n=e.spec,r=function(e){function r(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(r,e),r.prototype.render=function(){return c.a.createElement(Be,$e({mode:t,spec:n},this.props))},r}(c.a.PureComponent);return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r,"getSpec",(function(){return n})),r}Fe(Be,"propTypes",{data:l.a.any}),Fe(Be,"defaultProps",{data:{}}),n.d(t,"Vega",(function(){return Be})),n.d(t,"VegaLite",(function(){return qe})),n.d(t,"createClassFromSpec",(function(){return He}))},function(e,t,n){"use strict";function r(e){return+e}function i(e){return e*e}function o(e){return e*(2-e)}function a(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function s(e){return e*e*e}function l(e){return--e*e*e+1}function u(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}n.r(t);var c=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),f=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),d=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),p=Math.PI,h=p/2;function m(e){return 1-Math.cos(e*h)}function g(e){return Math.sin(e*h)}function b(e){return(1-Math.cos(p*e))/2}function y(e){return Math.pow(2,10*e-10)}function v(e){return 1-Math.pow(2,-10*e)}function x(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function _(e){return 1-Math.sqrt(1-e*e)}function w(e){return Math.sqrt(1- --e*e)}function O(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var E=4/11,k=6/11,S=8/11,T=.75,j=9/11,A=10/11,P=.9375,C=21/22,N=63/64,M=1/E/E;function I(e){return 1-D(1-e)}function D(e){return(e=+e)<E?M*e*e:e<S?M*(e-=k)*e+T:e<A?M*(e-=j)*e+P:M*(e-=C)*e+N}function R(e){return((e*=2)<=1?1-D(1-e):D(e-1)+1)/2}var z=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(1.70158),L=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),F=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),B=2*Math.PI,U=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=B);function i(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*B)},i.period=function(n){return e(t,n)},i}(1,.3),q=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=B);function i(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*B)},i.period=function(n){return e(t,n)},i}(1,.3),$=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=B);function i(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*B)},i.period=function(n){return e(t,n)},i}(1,.3);n.d(t,"easeLinear",(function(){return r})),n.d(t,"easeQuad",(function(){return a})),n.d(t,"easeQuadIn",(function(){return i})),n.d(t,"easeQuadOut",(function(){return o})),n.d(t,"easeQuadInOut",(function(){return a})),n.d(t,"easeCubic",(function(){return u})),n.d(t,"easeCubicIn",(function(){return s})),n.d(t,"easeCubicOut",(function(){return l})),n.d(t,"easeCubicInOut",(function(){return u})),n.d(t,"easePoly",(function(){return d})),n.d(t,"easePolyIn",(function(){return c})),n.d(t,"easePolyOut",(function(){return f})),n.d(t,"easePolyInOut",(function(){return d})),n.d(t,"easeSin",(function(){return b})),n.d(t,"easeSinIn",(function(){return m})),n.d(t,"easeSinOut",(function(){return g})),n.d(t,"easeSinInOut",(function(){return b})),n.d(t,"easeExp",(function(){return x})),n.d(t,"easeExpIn",(function(){return y})),n.d(t,"easeExpOut",(function(){return v})),n.d(t,"easeExpInOut",(function(){return x})),n.d(t,"easeCircle",(function(){return O})),n.d(t,"easeCircleIn",(function(){return _})),n.d(t,"easeCircleOut",(function(){return w})),n.d(t,"easeCircleInOut",(function(){return O})),n.d(t,"easeBounce",(function(){return D})),n.d(t,"easeBounceIn",(function(){return I})),n.d(t,"easeBounceOut",(function(){return D})),n.d(t,"easeBounceInOut",(function(){return R})),n.d(t,"easeBack",(function(){return F})),n.d(t,"easeBackIn",(function(){return z})),n.d(t,"easeBackOut",(function(){return L})),n.d(t,"easeBackInOut",(function(){return F})),n.d(t,"easeElastic",(function(){return q})),n.d(t,"easeElasticIn",(function(){return U})),n.d(t,"easeElasticOut",(function(){return q})),n.d(t,"easeElasticInOut",(function(){return $}))},function(e){e.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.0.0-beta.12","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -c -f tsconfig.json -p src/index.ts -t TopLevelSpec > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint --ext .ts .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@commitlint/cli":"^8.2.0","@commitlint/config-conventional":"^8.2.0","@types/chai":"^4.2.5","@types/d3":"^5.7.2","@types/highlight.js":"^9.12.3","@types/jest":"^24.0.23","@types/jest-environment-puppeteer":"^4.3.1","@types/mkdirp":"^0.5.2","@types/puppeteer":"^1.20.2","@typescript-eslint/eslint-plugin":"^2.8.0","@typescript-eslint/parser":"^2.8.0","ajv":"^6.10.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.2","codecov":"^3.6.1","concurrently":"^5.0.0","d3":"^5.14.1","eslint":"^6.6.0","eslint-config-prettier":"^6.6.0","eslint-plugin-prettier":"^3.1.1","gh-pages":"^2.1.1","highlight.js":"^9.16.2","http-server":"^0.11.1","husky":"^3.1.0","jest":"^24.9.0","jest-puppeteer":"^4.3.0","lint-staged":"^9.4.3","mkdirp":"^0.5.1","prettier":"^1.19.1","puppeteer":"^2.0.0","rollup":"^1.27.2","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^5.1.2","svg2png-many":"^0.0.7","terser":"^4.4.0","ts-jest":"^24.1.0","ts-json-schema-generator":"^0.56.0","typescript":"~3.7.2","vega-cli":"^5.8.1","vega-datasets":"^1.27.0","vega-embed":"^6.1.0","vega-tooltip":"^0.19.1","yaml-front-matter":"^4.0.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~2.0.1","fast-json-stable-stringify":"~2.0.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~1.10.0","vega-event-selector":"~2.0.1","vega-expression":"~2.6.2","vega-typings":"~0.11.1","vega-util":"~1.12.0","yargs":"~15.0.1"},"peerDependencies":{"vega":"^5.8.1"},"husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"lint-staged":{"*.ts":["eslint --fix","git add"],"*.{md,css,yml}":["prettier --write","git add"]},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(e,t,n){(function(t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var n,r,i;try{n=Map}catch(e){n=function(){}}try{r=Set}catch(e){r=function(){}}try{i=Promise}catch(e){i=function(){}}function o(a,l,u,c,f){"object"==typeof l&&(u=l.depth,c=l.prototype,f=l.includeNonEnumerable,l=l.circular);var d=[],p=[],h=void 0!==t;return void 0===l&&(l=!0),void 0===u&&(u=1/0),function a(u,m){if(null===u)return null;if(0===m)return u;var g,b;if("object"!=typeof u)return u;if(e(u,n))g=new n;else if(e(u,r))g=new r;else if(e(u,i))g=new i((function(e,t){u.then((function(t){e(a(t,m-1))}),(function(e){t(a(e,m-1))}))}));else if(o.__isArray(u))g=[];else if(o.__isRegExp(u))g=new RegExp(u.source,s(u)),u.lastIndex&&(g.lastIndex=u.lastIndex);else if(o.__isDate(u))g=new Date(u.getTime());else{if(h&&t.isBuffer(u))return g=t.allocUnsafe?t.allocUnsafe(u.length):new t(u.length),u.copy(g),g;e(u,Error)?g=Object.create(u):void 0===c?(b=Object.getPrototypeOf(u),g=Object.create(b)):(g=Object.create(c),b=c)}if(l){var y=d.indexOf(u);if(-1!=y)return p[y];d.push(u),p.push(g)}for(var v in e(u,n)&&u.forEach((function(e,t){var n=a(t,m-1),r=a(e,m-1);g.set(n,r)})),e(u,r)&&u.forEach((function(e){var t=a(e,m-1);g.add(t)})),u){var x;b&&(x=Object.getOwnPropertyDescriptor(b,v)),x&&null==x.set||(g[v]=a(u[v],m-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(u);for(v=0;v<_.length;v++){var w=_[v];(!(E=Object.getOwnPropertyDescriptor(u,w))||E.enumerable||f)&&(g[w]=a(u[w],m-1),E.enumerable||Object.defineProperty(g,w,{enumerable:!1}))}}if(f){var O=Object.getOwnPropertyNames(u);for(v=0;v<O.length;v++){var E,k=O[v];(E=Object.getOwnPropertyDescriptor(u,k))&&E.enumerable||(g[k]=a(u[k],m-1),Object.defineProperty(g,k,{enumerable:!1}))}}return g}(a,u)}function a(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=a,o.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},o.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},o.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},o.__getRegExpFlags=s,o}();e.exports&&(e.exports=n)}).call(this,n(91).Buffer)},function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,l,u=r(t),c=r(n);if(u&&c){if((s=t.length)!=n.length)return!1;for(a=s;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(u!=c)return!1;var f=t instanceof Date,d=n instanceof Date;if(f!=d)return!1;if(f&&d)return t.getTime()==n.getTime();var p=t instanceof RegExp,h=n instanceof RegExp;if(p!=h)return!1;if(p&&h)return t.toString()==n.toString();var m=i(t);if((s=m.length)!==i(n).length)return!1;for(a=s;0!=a--;)if(!o.call(n,m[a]))return!1;for(a=s;0!=a--;)if(!e(t[l=m[a]],n[l]))return!1;return!0}return t!=t&&n!=n}},function(e){e.exports=JSON.parse('{"name":"vega-themes","version":"2.5.0","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"http://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'src/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","rollup":"^1.22.0","rollup-plugin-json":"^4.0.0","terser":"^4.3.4","typescript":"~3.6.3","vega":"^5.5.2","vega-lite":"^4.0.0-beta.1","vega-lite-dev-config":"^0.3.0"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},function(e){e.exports=JSON.parse('{"name":"vega-tooltip","version":"0.19.1","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'{src,test,types}/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@types/jest":"^24.0.18","browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","jest":"^24.9.0","node-sass":"^4.12.0","path":"^0.12.7","rollup":"^1.20.3","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","terser":"^4.2.1","ts-jest":"^24.0.2","typescript":"^3.6.2","vega-datasets":"^1.25.0","vega-lite-dev-config":"^0.2.5","vega-typings":"^0.8.1"},"dependencies":{"vega-util":"^1.11.1"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,c=u&&u(Object);e.exports=function e(t,n,f){if("string"!=typeof n){if(c){var d=u(n);d&&d!==c&&e(t,d,f)}var p=a(n);s&&(p=p.concat(s(n)));for(var h=0;h<p.length;++h){var m=p[h];if(!(r[m]||i[m]||f&&f[m])){var g=l(n,m);try{o(t,m,g)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";const r=n(2),i=n(46).hydrate,o=n(355),a=(n(948),document.getElementById("mount")),s=function(e,t,n,s,l){const u=o.templates.find(e=>"deucalion"===e.meta.id);if(e)if(u){const c=u.components.Edition,f=e.editions[t];console.log("hydrating",a),i(r.createElement(c,{production:e,edition:f,locale:s,previewMode:!1,contextualizers:o.contextualizers,usedDocument:document,useBrowserRouter:l,preprocessedData:n},null),a,(function(){console.log("done hydrating"),setTimeout(()=>{const e=document.getElementById("static");e&&e.remove()})}))}else console.error("template %s not found","deucalion")};s(window.__production,window.__editionId,window.__preprocessedData,window.__locale,window.__useBrowserRouter),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(e,t){var n=this[e],r=n;delete this[e]&&Object.defineProperty(this,e,{get:function(){return r},set:function(i){return n=r,r=t.call(this,e,n,i)},enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}}),console.log("in window to watch",window.watch),window.watch&&window.watch("__production",(function(e,t,n){s(n,window.__editionId,window.__preprocessedData,window.__locale,window.__useBrowserRouter)})),e.exports=s},,,function(e,t,n){"use strict";
/** @license React v16.11.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(29),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var h=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var g="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||y}function _(){}function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(b(85));this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=x.prototype;var O=w.prototype=new _;O.constructor=w,r(O,x.prototype),O.isPureReactComponent=!0;var E={current:null},k={current:null},S=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:k.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var P=/\/+/g,C=[];function N(e,t,n,r){if(C.length){var i=C.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function I(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return r(i,t,""===n?"."+D(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+D(s=t[u],u);l+=e(s,c,r,i)}else if(null===t||"object"!=typeof t?c=null:c="function"==typeof(c=g&&t[g]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=e(s=s.value,c=n+D(s,u++),r,i);else if("object"===s)throw r=""+t,Error(b(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return l}(e,"",t,n)}function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function R(e,t){e.func.call(e.context,t,e.count++)}function z(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?L(e,r,n,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n)),r.push(e))}function L(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),I(e,z,t=N(t,o,r,i)),M(t)}function F(){var e=E.current;if(null===e)throw Error(b(321));return e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return L(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;I(e,R,t=N(null,null,t,n)),M(t)},count:function(e){return I(e,(function(){return null}),null)},toArray:function(e){var t=[];return L(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(b(143));return e}},createRef:function(){return{current:null}},Component:x,PureComponent:w,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return F().useCallback(e,t)},useContext:function(e,t){return F().useContext(e,t)},useEffect:function(e,t){return F().useEffect(e,t)},useImperativeHandle:function(e,t,n){return F().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return F().useLayoutEffect(e,t)},useMemo:function(e,t){return F().useMemo(e,t)},useReducer:function(e,t,n){return F().useReducer(e,t,n)},useRef:function(e){return F().useRef(e)},useState:function(e){return F().useState(e)},Fragment:s,Profiler:u,StrictMode:l,Suspense:p,createElement:j,cloneElement:function(e,t,n){if(null==e)throw Error(b(267,e));var i=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)S.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},createFactory:function(e){var t=j.bind(null,e);return t.type=e,t},isValidElement:A,version:"16.11.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:E,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r}},U={default:B},q=U&&B||U;e.exports=q.default||q},function(e,t,n){"use strict";
/** @license React v16.11.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2),i=n(29),o=n(353);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=null,l={};function u(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!f[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in f[n]=t,n=t.eventTypes){var i=void 0,o=n[r],u=t,p=r;if(d.hasOwnProperty(p))throw Error(a(99,p));d[p]=o;var h=o.phasedRegistrationNames;if(h){for(i in h)h.hasOwnProperty(i)&&c(h[i],u,p);i=!0}else o.registrationName?(c(o.registrationName,u,p),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function c(e,t,n){if(p[e])throw Error(a(100,e));p[e]=t,h[e]=t.eventTypes[n].dependencies}var f=[],d={},p={},h={};function m(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var g=!1,b=null,y=!1,v=null,x={onError:function(e){g=!0,b=e}};function _(e,t,n,r,i,o,a,s,l){g=!1,b=null,m.apply(x,arguments)}var w=null,O=null,E=null;function k(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,o,s,l,u){if(_.apply(this,arguments),g){if(!g)throw Error(a(198));var c=b;g=!1,b=null,y||(y=!0,v=c)}}(r,t,void 0,e),e.currentTarget=null}function S(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function T(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var j=null;function A(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)k(e,t[r],n[r]);else t&&k(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function P(e){if(null!==e&&(j=S(j,e)),e=j,j=null,e){if(T(e,A),j)throw Error(a(95));if(y)throw e=v,y=!1,v=null,e}}var C={injectEventPluginOrder:function(e){if(s)throw Error(a(101));s=Array.prototype.slice.call(e),u()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!l.hasOwnProperty(t)||l[t]!==r){if(l[t])throw Error(a(102,t));l[t]=r,n=!0}}n&&u()}};function N(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;M.hasOwnProperty("ReactCurrentDispatcher")||(M.ReactCurrentDispatcher={current:null}),M.hasOwnProperty("ReactCurrentBatchConfig")||(M.ReactCurrentBatchConfig={suspense:null});var I=/^(.*)[\\\/]/,D="function"==typeof Symbol&&Symbol.for,R=D?Symbol.for("react.element"):60103,z=D?Symbol.for("react.portal"):60106,L=D?Symbol.for("react.fragment"):60107,F=D?Symbol.for("react.strict_mode"):60108,B=D?Symbol.for("react.profiler"):60114,U=D?Symbol.for("react.provider"):60109,q=D?Symbol.for("react.context"):60110,$=D?Symbol.for("react.concurrent_mode"):60111,H=D?Symbol.for("react.forward_ref"):60112,W=D?Symbol.for("react.suspense"):60113,V=D?Symbol.for("react.suspense_list"):60120,G=D?Symbol.for("react.memo"):60115,Y=D?Symbol.for("react.lazy"):60116;D&&Symbol.for("react.fundamental"),D&&Symbol.for("react.responder"),D&&Symbol.for("react.scope");var X="function"==typeof Symbol&&Symbol.iterator;function K(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=X&&e[X]||e["@@iterator"])?e:null}function J(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case L:return"Fragment";case z:return"Portal";case B:return"Profiler";case F:return"StrictMode";case W:return"Suspense";case V:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case q:return"Context.Consumer";case U:return"Context.Provider";case H:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case G:return J(e.type);case Y:if(e=1===e._status?e._result:null)return J(e)}return null}function Z(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=J(e.type);n=null,r&&(n=J(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(I,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var Q=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ee=null,te=null,ne=null;function re(e){if(e=O(e)){if("function"!=typeof ee)throw Error(a(280));var t=w(e.stateNode);ee(e.stateNode,e.type,t)}}function ie(e){te?ne?ne.push(e):ne=[e]:te=e}function oe(){if(te){var e=te,t=ne;if(ne=te=null,re(e),t)for(e=0;e<t.length;e++)re(t[e])}}function ae(e,t){return e(t)}function se(e,t,n,r){return e(t,n,r)}function le(){}var ue=ae,ce=!1,fe=!1;function de(){null===te&&null===ne||(le(),oe())}new Map;var pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,he=Object.prototype.hasOwnProperty,me={},ge={};function be(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ye[e]=new be(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ye[t]=new be(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ye[e]=new be(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ye[e]=new be(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ye[e]=new be(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ye[e]=new be(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ye[e]=new be(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ye[e]=new be(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ye[e]=new be(e,5,!1,e.toLowerCase(),null,!1)}));var ve=/[\-:]([a-z])/g;function xe(e){return e[1].toUpperCase()}function _e(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e,t,n,r){var i=ye.hasOwnProperty(t)?ye[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!he.call(ge,e)||!he.call(me,e)&&(pe.test(e)?ge[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Oe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ee(e){e._valueTracker||(e._valueTracker=function(e){var t=Oe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Oe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Se(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=_e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function je(e,t){null!=(t=t.checked)&&we(e,"checked",t,!1)}function Ae(e,t){je(e,t);var n=_e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ce(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ce(e,t.type,_e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Pe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ce(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ne(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Me(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function De(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(a(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(a(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:_e(n)}}function Re(e,t){var n=_e(t.value),r=_e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ze(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ve,xe);ye[t]=new be(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ve,xe);ye[t]=new be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ve,xe);ye[t]=new be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ye[e]=new be(e,1,!1,e.toLowerCase(),null,!1)})),ye.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ye[e]=new be(e,1,!1,e.toLowerCase(),null,!0)}));var Le={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,qe=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Le.svg||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function $e(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function He(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var We={animationend:He("Animation","AnimationEnd"),animationiteration:He("Animation","AnimationIteration"),animationstart:He("Animation","AnimationStart"),transitionend:He("Transition","TransitionEnd")},Ve={},Ge={};function Ye(e){if(Ve[e])return Ve[e];if(!We[e])return e;var t,n=We[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ve[e]=n[t];return e}Q&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);var Xe=Ye("animationend"),Ke=Ye("animationiteration"),Je=Ye("animationstart"),Ze=Ye("transitionend"),Qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var it,ot,at,st=!1,lt=[],ut=null,ct=null,ft=null,dt=new Map,pt=new Map,ht=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),gt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function bt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function yt(e,t){switch(e){case"focus":case"blur":ut=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function vt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=bt(t,n,r,i),null!==t&&(null!==(t=pr(t))&&ot(t)),e):(e.eventSystemFlags|=r,e)}function xt(e){var t=dr(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){at(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;var t=Cn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=pr(t);return null!==n&&ot(n),e.blockedOn=t,!1}return!0}function wt(e,t,n){_t(e)&&n.delete(t)}function Ot(){for(st=!1;0<lt.length;){var e=lt[0];if(null!==e.blockedOn){null!==(e=pr(e.blockedOn))&&it(e);break}var t=Cn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:lt.shift()}null!==ut&&_t(ut)&&(ut=null),null!==ct&&_t(ct)&&(ct=null),null!==ft&&_t(ft)&&(ft=null),dt.forEach(wt),pt.forEach(wt)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ot)))}function kt(e){function t(t){return Et(t,e)}if(0<lt.length){Et(lt[0],e);for(var n=1;n<lt.length;n++){var r=lt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&Et(ut,e),null!==ct&&Et(ct,e),null!==ft&&Et(ft,e),dt.forEach(t),pt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)xt(n),null===n.blockedOn&&ht.shift()}function St(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Tt(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function jt(e,t,n){(t=N(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function At(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Tt(t);for(t=n.length;0<t--;)jt(n[t],"captured",e);for(t=0;t<n.length;t++)jt(n[t],"bubbled",e)}}function Pt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=N(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function Ct(e){e&&e.dispatchConfig.registrationName&&Pt(e._targetInst,null,e)}function Nt(e){T(e,At)}function Mt(){return!0}function It(){return!1}function Dt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Mt:It,this.isPropagationStopped=It,this}function Rt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function zt(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Lt(e){e.eventPool=[],e.getPooled=Rt,e.release=zt}i(Dt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Mt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Mt)},persist:function(){this.isPersistent=Mt},isPersistent:It,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=It,this._dispatchInstances=this._dispatchListeners=null}}),Dt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Dt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Lt(n),n},Lt(Dt);var Ft=Dt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bt=Dt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ut=Dt.extend({view:null,detail:null}),qt=Ut.extend({relatedTarget:null});function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Ht={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Vt[e])&&!!t[e]}function Yt(){return Gt}for(var Xt=Ut.extend({key:function(e){if(e.key){var t=Ht[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Wt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Yt,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Kt=0,Jt=0,Zt=!1,Qt=!1,en=Ut.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Yt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Kt;return Kt=e.screenX,Zt?"mousemove"===e.type?e.screenX-t:0:(Zt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jt;return Jt=e.screenY,Qt?"mousemove"===e.type?e.screenY-t:0:(Qt=!0,0)}}),tn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nn=en.extend({dataTransfer:null}),rn=Ut.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Yt}),on=Dt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),an=en.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Xe,"animationEnd",2],[Ke,"animationIteration",2],[Je,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Ze,"transitionEnd",2],["waiting","waiting",2]],ln={},un={},cn=0;cn<sn.length;cn++){var fn=sn[cn],dn=fn[0],pn=fn[1],hn=fn[2],mn="on"+(pn[0].toUpperCase()+pn.slice(1)),gn={phasedRegistrationNames:{bubbled:mn,captured:mn+"Capture"},dependencies:[dn],eventPriority:hn};ln[pn]=gn,un[dn]=gn}var bn={eventTypes:ln,getEventPriority:function(e){return void 0!==(e=un[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=un[e];if(!i)return null;switch(e){case"keypress":if(0===$t(n))return null;case"keydown":case"keyup":e=Xt;break;case"blur":case"focus":e=qt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rn;break;case Xe:case Ke:case Je:e=Ft;break;case Ze:e=on;break;case"scroll":e=Ut;break;case"wheel":e=an;break;case"copy":case"cut":case"paste":e=Bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tn;break;default:e=Dt}return Nt(t=e.getPooled(i,t,n,r)),t}},yn=o.unstable_UserBlockingPriority,vn=o.unstable_runWithPriority,xn=bn.getEventPriority,_n=10,wn=[];function On(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=dr(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=St(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,l=0;l<f.length;l++){var u=f[l];u&&(u=u.extractEvents(r,t,o,i,a))&&(s=S(s,u))}P(s)}}var En=!0;function kn(e,t){Sn(t,e,!1)}function Sn(e,t,n){switch(xn(t)){case 0:var r=Tn.bind(null,t,1);break;case 1:r=jn.bind(null,t,1);break;default:r=Pn.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Tn(e,t,n){ce||le();var r=Pn,i=ce;ce=!0;try{se(r,e,t,n)}finally{(ce=i)||de()}}function jn(e,t,n){vn(yn,Pn.bind(null,e,t,n))}function An(e,t,n,r){if(wn.length){var i=wn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=On,n=e,fe)t(n,void 0);else{fe=!0;try{ue(t,n,void 0)}finally{fe=!1,de()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,wn.length<_n&&wn.push(e)}}function Pn(e,t,n){if(En)if(0<lt.length&&-1<mt.indexOf(e))e=bt(null,e,t,n),lt.push(e);else{var r=Cn(e,t,n);null===r?yt(e,n):-1<mt.indexOf(e)?(e=bt(r,e,t,n),lt.push(e)):function(e,t,n,r){switch(t){case"focus":return ut=vt(ut,e,t,n,r),!0;case"dragenter":return ct=vt(ct,e,t,n,r),!0;case"mouseover":return ft=vt(ft,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return dt.set(i,vt(dt.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,pt.set(i,vt(pt.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(yt(e,n),An(e,t,n,null))}}function Cn(e,t,n){var r=St(n);if(null!==(r=dr(r))){var i=et(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=tt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return An(e,t,n,r),null}function Nn(e){if(!Q)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Mn=new("function"==typeof WeakMap?WeakMap:Map);function In(e){var t=Mn.get(e);return void 0===t&&(t=new Set,Mn.set(e,t)),t}function Dn(e,t,n){if(!n.has(e)){switch(e){case"scroll":Sn(t,"scroll",!0);break;case"focus":case"blur":Sn(t,"focus",!0),Sn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Nn(e)&&Sn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qe.indexOf(e)&&kn(e,t)}n.add(e)}}var Rn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zn=["Webkit","ms","Moz","O"];function Ln(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Rn.hasOwnProperty(e)&&Rn[e]?(""+t).trim():t+"px"}function Fn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Ln(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Rn).forEach((function(e){zn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rn[t]=Rn[e]}))}));var Bn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Un(e,t){if(t){if(Bn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function qn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function $n(e,t){var n=In(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=h[t];for(var r=0;r<t.length;r++)Dn(t[r],e,n)}function Hn(){}function Wn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Vn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gn(e,t){var n,r=Vn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vn(r)}}function Yn(){for(var e=window,t=Wn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Wn((e=t.contentWindow).document)}return t}function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Kn="$",Jn="/$",Zn="$?",Qn="$!",er=null,tr=null;function nr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function rr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"==typeof setTimeout?setTimeout:void 0,or="function"==typeof clearTimeout?clearTimeout:void 0;function ar(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function sr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Kn||n===Qn||n===Zn){if(0===t)return e;t--}else n===Jn&&t++}e=e.previousSibling}return null}var lr=Math.random().toString(36).slice(2),ur="__reactInternalInstance$"+lr,cr="__reactEventHandlers$"+lr,fr="__reactContainere$"+lr;function dr(e){var t=e[ur];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[ur]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=sr(e);null!==e;){if(n=e[ur])return n;e=sr(e)}return t}n=(e=n).parentNode}return null}function pr(e){return!(e=e[ur]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function hr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function mr(e){return e[cr]||null}var gr=null,br=null,yr=null;function vr(){if(yr)return yr;var e,t,n=br,r=n.length,i="value"in gr?gr.value:gr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return yr=i.slice(e,1<t?1-t:void 0)}var xr=Dt.extend({data:null}),_r=Dt.extend({data:null}),wr=[9,13,27,32],Or=Q&&"CompositionEvent"in window,Er=null;Q&&"documentMode"in document&&(Er=document.documentMode);var kr=Q&&"TextEvent"in window&&!Er,Sr=Q&&(!Or||Er&&8<Er&&11>=Er),Tr=String.fromCharCode(32),jr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ar=!1;function Pr(e,t){switch(e){case"keyup":return-1!==wr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Cr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Nr=!1;var Mr={eventTypes:jr,extractEvents:function(e,t,n,r){var i;if(Or)e:{switch(e){case"compositionstart":var o=jr.compositionStart;break e;case"compositionend":o=jr.compositionEnd;break e;case"compositionupdate":o=jr.compositionUpdate;break e}o=void 0}else Nr?Pr(e,n)&&(o=jr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=jr.compositionStart);return o?(Sr&&"ko"!==n.locale&&(Nr||o!==jr.compositionStart?o===jr.compositionEnd&&Nr&&(i=vr()):(br="value"in(gr=r)?gr.value:gr.textContent,Nr=!0)),o=xr.getPooled(o,t,n,r),i?o.data=i:null!==(i=Cr(n))&&(o.data=i),Nt(o),i=o):i=null,(e=kr?function(e,t){switch(e){case"compositionend":return Cr(t);case"keypress":return 32!==t.which?null:(Ar=!0,Tr);case"textInput":return(e=t.data)===Tr&&Ar?null:e;default:return null}}(e,n):function(e,t){if(Nr)return"compositionend"===e||!Or&&Pr(e,t)?(e=vr(),yr=br=gr=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=_r.getPooled(jr.beforeInput,t,n,r)).data=e,Nt(t)):t=null,null===i?t:null===t?i:[i,t]}},Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ir[e.type]:"textarea"===t}var Rr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function zr(e,t,n){return(e=Dt.getPooled(Rr.change,e,t,n)).type="change",ie(n),Nt(e),e}var Lr=null,Fr=null;function Br(e){P(e)}function Ur(e){if(ke(hr(e)))return e}function qr(e,t){if("change"===e)return t}var $r=!1;function Hr(){Lr&&(Lr.detachEvent("onpropertychange",Wr),Fr=Lr=null)}function Wr(e){if("value"===e.propertyName&&Ur(Fr))if(e=zr(Fr,e,St(e)),ce)P(e);else{ce=!0;try{ae(Br,e)}finally{ce=!1,de()}}}function Vr(e,t,n){"focus"===e?(Hr(),Fr=n,(Lr=t).attachEvent("onpropertychange",Wr)):"blur"===e&&Hr()}function Gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ur(Fr)}function Yr(e,t){if("click"===e)return Ur(t)}function Xr(e,t){if("input"===e||"change"===e)return Ur(t)}Q&&($r=Nn("input")&&(!document.documentMode||9<document.documentMode));var Kr,Jr={eventTypes:Rr,_isInputEventSupported:$r,extractEvents:function(e,t,n,r){var i=t?hr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=qr;else if(Dr(i))if($r)a=Xr;else{a=Gr;var s=Vr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Yr);if(a&&(a=a(e,t)))return zr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ce(i,"number",i.value)}},Zr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qr={eventTypes:Zr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?dr(t):null)&&(t!==(o=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=en,l=Zr.mouseLeave,u=Zr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=tn,l=Zr.pointerLeave,u=Zr.pointerEnter,c="pointer");if(e=null==a?i:hr(a),i=null==t?i:hr(t),(l=s.getPooled(l,a,n,r)).type=c+"leave",l.target=e,l.relatedTarget=i,(r=s.getPooled(u,t,n,r)).type=c+"enter",r.target=i,r.relatedTarget=e,c=t,(s=a)&&c)e:{for(e=c,a=0,t=u=s;t;t=Tt(t))a++;for(t=0,i=e;i;i=Tt(i))t++;for(;0<a-t;)u=Tt(u),a--;for(;0<t-a;)e=Tt(e),t--;for(;a--;){if(u===e||u===e.alternate)break e;u=Tt(u),e=Tt(e)}u=null}else u=null;for(e=u,u=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)u.push(s),s=Tt(s);for(s=[];c&&c!==e&&(null===(a=c.alternate)||a!==e);)s.push(c),c=Tt(c);for(c=0;c<u.length;c++)Pt(u[c],"bubbled",l);for(c=s.length;0<c--;)Pt(s[c],"captured",r);return n===Kr?(Kr=null,[l]):(Kr=n,[l,r])}};var ei="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ti=Object.prototype.hasOwnProperty;function ni(e,t){if(ei(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ti.call(t,n[r])||!ei(e[n[r]],t[n[r]]))return!1;return!0}var ri=Q&&"documentMode"in document&&11>=document.documentMode,ii={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},oi=null,ai=null,si=null,li=!1;function ui(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return li||null==oi||oi!==Wn(n)?null:("selectionStart"in(n=oi)&&Xn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},si&&ni(si,n)?null:(si=n,(e=Dt.getPooled(ii.select,ai,e,t)).type="select",e.target=oi,Nt(e),e))}var ci={eventTypes:ii,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=In(o),i=h.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?hr(t):window,e){case"focus":(Dr(o)||"true"===o.contentEditable)&&(oi=o,ai=t,si=null);break;case"blur":si=ai=oi=null;break;case"mousedown":li=!0;break;case"contextmenu":case"mouseup":case"dragend":return li=!1,ui(n,r);case"selectionchange":if(ri)break;case"keydown":case"keyup":return ui(n,r)}return null}};C.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=mr,O=pr,E=hr,C.injectEventPluginsByName({SimpleEventPlugin:bn,EnterLeaveEventPlugin:Qr,ChangeEventPlugin:Jr,SelectEventPlugin:ci,BeforeInputEventPlugin:Mr}),new Set;var fi=[],di=-1;function pi(e){0>di||(e.current=fi[di],fi[di]=null,di--)}function hi(e,t){fi[++di]=e.current,e.current=t}var mi={},gi={current:mi},bi={current:!1},yi=mi;function vi(e,t){var n=e.type.contextTypes;if(!n)return mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function xi(e){return null!=(e=e.childContextTypes)}function _i(e){pi(bi),pi(gi)}function wi(e){pi(bi),pi(gi)}function Oi(e,t,n){if(gi.current!==mi)throw Error(a(168));hi(gi,t),hi(bi,n)}function Ei(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,J(t)||"Unknown",o));return i({},n,{},r)}function ki(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||mi,yi=gi.current,hi(gi,t),hi(bi,bi.current),!0}function Si(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(t=Ei(e,t,yi),r.__reactInternalMemoizedMergedChildContext=t,pi(bi),pi(gi),hi(gi,t)):pi(bi),hi(bi,n)}var Ti=o.unstable_runWithPriority,ji=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Pi=o.unstable_shouldYield,Ci=o.unstable_requestPaint,Ni=o.unstable_now,Mi=o.unstable_getCurrentPriorityLevel,Ii=o.unstable_ImmediatePriority,Di=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,zi=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Fi={},Bi=void 0!==Ci?Ci:function(){},Ui=null,qi=null,$i=!1,Hi=Ni(),Wi=1e4>Hi?Ni:function(){return Ni()-Hi};function Vi(){switch(Mi()){case Ii:return 99;case Di:return 98;case Ri:return 97;case zi:return 96;case Li:return 95;default:throw Error(a(332))}}function Gi(e){switch(e){case 99:return Ii;case 98:return Di;case 97:return Ri;case 96:return zi;case 95:return Li;default:throw Error(a(332))}}function Yi(e,t){return e=Gi(e),Ti(e,t)}function Xi(e,t,n){return e=Gi(e),ji(e,t,n)}function Ki(e){return null===Ui?(Ui=[e],qi=ji(Ii,Zi)):Ui.push(e),Fi}function Ji(){if(null!==qi){var e=qi;qi=null,Ai(e)}Zi()}function Zi(){if(!$i&&null!==Ui){$i=!0;var e=0;try{var t=Ui;Yi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),ji(Ii,Ji),t}finally{$i=!1}}}var Qi=3;function eo(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function to(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var no={current:null},ro=null,io=null,oo=null;function ao(){oo=io=ro=null}function so(e,t){var n=e.type._context;hi(no,n._currentValue),n._currentValue=t}function lo(e){var t=no.current;pi(no),e.type._context._currentValue=t}function uo(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function co(e,t){ro=e,oo=io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Wa=!0),e.firstContext=null)}function fo(e,t){if(oo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(oo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===io){if(null===ro)throw Error(a(308));io=t,ro.dependencies={expirationTime:0,firstContext:t,responders:null}}else io=io.next=t;return e._currentValue}var po=!1;function ho(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function go(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function bo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function yo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=ho(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=ho(e.memoizedState),i=n.updateQueue=ho(n.memoizedState)):r=e.updateQueue=mo(i):null===i&&(i=n.updateQueue=mo(r));null===i||r===i?bo(r,t):null===r.lastUpdate||null===i.lastUpdate?(bo(r,t),bo(i,t)):(bo(r,t),i.lastUpdate=t)}function vo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=ho(e.memoizedState):xo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function xo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=mo(t)),t}function _o(e,t,n,r,o,a){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null==(o="function"==typeof(e=n.payload)?e.call(a,r,o):e))break;return i({},r,o);case 2:po=!0}return r}function wo(e,t,n,r,i){po=!1;for(var o=(t=xo(e,t)).baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(Tl(c,l.suspenseConfig),u=_o(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var f=l.expirationTime;f<i?(null===c&&(c=l,null===a&&(o=u)),s<f&&(s=f)):(u=_o(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,jl(s),e.expirationTime=s,e.memoizedState=u}function Oo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Eo(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Eo(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Eo(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!=typeof n)throw Error(a(191,n));n.call(r)}e=e.nextEffect}}var ko=M.ReactCurrentBatchConfig,So=(new r.Component).refs;function To(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var jo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=hl(),i=ko.suspense;(i=go(r=ml(r,e,i),i)).payload=t,null!=n&&(i.callback=n),yo(e,i),gl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=hl(),i=ko.suspense;(i=go(r=ml(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),yo(e,i),gl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=hl(),r=ko.suspense;(r=go(n=ml(n,e,r),r)).tag=2,null!=t&&(r.callback=t),yo(e,r),gl(e,n)}};function Ao(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ni(n,r)||!ni(i,o))}function Po(e,t,n){var r=!1,i=mi,o=t.contextType;return"object"==typeof o&&null!==o?o=fo(o):(i=xi(t)?yi:gi.current,o=(r=null!=(r=t.contextTypes))?vi(e,i):mi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Co(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function No(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=So;var o=t.contextType;"object"==typeof o&&null!==o?i.context=fo(o):(o=xi(t)?yi:gi.current,i.context=vi(e,o)),null!==(o=e.updateQueue)&&(wo(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(To(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&jo.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(wo(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Mo=Array.isArray;function Io(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===So&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Do(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ro(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Yl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Io(e,t,n),r.return=e,r):((r=Xl(n.type,n.key,n.props,null,e.mode,r)).ref=Io(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Kl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Jl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case R:return(n=Xl(t.type,t.key,t.props,null,e.mode,n)).ref=Io(e,null,t),n.return=e,n;case z:return(t=Zl(t,e.mode,n)).return=e,t}if(Mo(t)||K(t))return(t=Kl(t,e.mode,n,null)).return=e,t;Do(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case R:return n.key===i?n.type===L?f(e,t,n.props.children,r,i):u(e,t,n,r):null;case z:return n.key===i?c(e,t,n,r):null}if(Mo(n)||K(n))return null!==i?null:f(e,t,n,r,null);Do(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case R:return e=e.get(null===r.key?n:r.key)||null,r.type===L?f(t,e,r.props.children,i,r.key):u(t,e,r,i);case z:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Mo(r)||K(r))return f(t,e=e.get(n)||null,r,i,null);Do(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,f=a,m=a=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var b=p(i,f,s[m],l);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),a=o(b,a,m),null===c?u=b:c.sibling=b,c=b,f=g}if(m===s.length)return n(i,f),u;if(null===f){for(;m<s.length;m++)null!==(f=d(i,s[m],l))&&(a=o(f,a,m),null===c?u=f:c.sibling=f,c=f);return u}for(f=r(i,f);m<s.length;m++)null!==(g=h(f,i,m,s[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(i,e)})),u}function g(i,s,l,u){var c=K(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var f=c=null,m=s,g=s=0,b=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(b=m,m=null):b=m.sibling;var v=p(i,m,y.value,u);if(null===v){null===m&&(m=b);break}e&&m&&null===v.alternate&&t(i,m),s=o(v,s,g),null===f?c=v:f.sibling=v,f=v,m=b}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,g),null===f?c=y:f.sibling=y,f=y);return c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=h(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===f?c=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"==typeof o&&null!==o&&o.type===L&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case R:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag?o.type===L:u.elementType===o.type){n(e,u.sibling),(r=i(u,o.type===L?o.props.children:o.props)).ref=Io(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===L?((r=Kl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Xl(o.type,o.key,o.props,null,e.mode,l)).ref=Io(e,r,o),l.return=e,e=l)}return s(e);case z:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Zl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Jl(o,e.mode,l)).return=e,e=r),s(e);if(Mo(o))return m(e,r,o,l);if(K(o))return g(e,r,o,l);if(c&&Do(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var zo=Ro(!0),Lo=Ro(!1),Fo={},Bo={current:Fo},Uo={current:Fo},qo={current:Fo};function $o(e){if(e===Fo)throw Error(a(174));return e}function Ho(e,t){hi(qo,t),hi(Uo,e),hi(Bo,Fo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Be(null,"");break;default:t=Be(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}pi(Bo),hi(Bo,t)}function Wo(e){pi(Bo),pi(Uo),pi(qo)}function Vo(e){$o(qo.current);var t=$o(Bo.current),n=Be(t,e.type);t!==n&&(hi(Uo,e),hi(Bo,n))}function Go(e){Uo.current===e&&(pi(Bo),pi(Uo))}var Yo={current:0};function Xo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Zn||n.data===Qn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ko(e,t){return{responder:e,props:t}}var Jo=M.ReactCurrentDispatcher,Zo=M.ReactCurrentBatchConfig,Qo=0,ea=null,ta=null,na=null,ra=null,ia=null,oa=null,aa=0,sa=null,la=0,ua=!1,ca=null,fa=0;function da(){throw Error(a(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ei(e[n],t[n]))return!1;return!0}function ha(e,t,n,r,i,o){if(Qo=o,ea=t,na=null!==e?e.memoizedState:null,Jo.current=null===na?Ma:Ia,t=n(r,i),ua){do{ua=!1,fa+=1,na=null!==e?e.memoizedState:null,oa=ra,sa=ia=ta=null,Jo.current=Ia,t=n(r,i)}while(ua);ca=null,fa=0}if(Jo.current=Na,(e=ea).memoizedState=ra,e.expirationTime=aa,e.updateQueue=sa,e.effectTag|=la,e=null!==ta&&null!==ta.next,Qo=0,oa=ia=ra=na=ta=ea=null,aa=0,sa=null,la=0,e)throw Error(a(300));return t}function ma(){Jo.current=Na,Qo=0,oa=ia=ra=na=ta=ea=null,aa=0,sa=null,la=0,ua=!1,ca=null,fa=0}function ga(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ia?ra=ia=e:ia=ia.next=e,ia}function ba(){if(null!==oa)oa=(ia=oa).next,na=null!==(ta=na)?ta.next:null;else{if(null===na)throw Error(a(310));var e={memoizedState:(ta=na).memoizedState,baseState:ta.baseState,queue:ta.queue,baseUpdate:ta.baseUpdate,next:null};ia=null===ia?ra=e:ia.next=e,na=ta.next}return ia}function ya(e,t){return"function"==typeof t?t(e):t}function va(e){var t=ba(),n=t.queue;if(null===n)throw Error(a(311));if(n.lastRenderedReducer=e,0<fa){var r=n.dispatch;if(null!==ca){var i=ca.get(n);if(void 0!==i){ca.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return ei(o,t.memoizedState)||(Wa=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var l=i=null,u=r,c=!1;do{var f=u.expirationTime;f<Qo?(c||(c=!0,l=s,i=o),f>aa&&jl(aa=f)):(Tl(f,u.suspenseConfig),o=u.eagerReducer===e?u.eagerState:e(o,u.action)),s=u,u=u.next}while(null!==u&&u!==r);c||(l=s,i=o),ei(o,t.memoizedState)||(Wa=!0),t.memoizedState=o,t.baseUpdate=l,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function xa(e){var t=ga();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e}).dispatch=Ca.bind(null,ea,e),[t.memoizedState,e]}function _a(e){return va(ya)}function wa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===sa?(sa={lastEffect:null}).lastEffect=e.next=e:null===(t=sa.lastEffect)?sa.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,sa.lastEffect=e),e}function Oa(e,t,n,r){var i=ga();la|=e,i.memoizedState=wa(t,n,void 0,void 0===r?null:r)}function Ea(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&pa(r,a.deps))return void wa(0,n,o,r)}la|=e,i.memoizedState=wa(t,n,o,r)}function ka(e,t){return Oa(516,192,e,t)}function Sa(e,t){return Ea(516,192,e,t)}function Ta(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(){}function Aa(e,t){return ga().memoizedState=[e,void 0===t?null:t],e}function Pa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t,n){if(!(25>fa))throw Error(a(301));var r=e.alternate;if(e===ea||null!==r&&r===ea)if(ua=!0,e={expirationTime:Qo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ca&&(ca=new Map),void 0===(n=ca.get(t)))ca.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=hl(),o=ko.suspense;o={expirationTime:i=ml(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var l=s.next;null!==l&&(o.next=l),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var u=t.lastRenderedState,c=r(u,n);if(o.eagerReducer=r,o.eagerState=c,ei(c,u))return}catch(e){}gl(e,i)}}var Na={readContext:fo,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useResponder:da,useDeferredValue:da,useTransition:da},Ma={readContext:fo,useCallback:Aa,useContext:fo,useEffect:ka,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Oa(4,36,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4,36,e,t)},useMemo:function(e,t){var n=ga();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ga();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ca.bind(null,ea,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ga().memoizedState=e},useState:xa,useDebugValue:ja,useResponder:Ko,useDeferredValue:function(e,t){var n=xa(e),r=n[0],i=n[1];return ka((function(){o.unstable_next((function(){var n=Zo.suspense;Zo.suspense=void 0===t?null:t;try{i(e)}finally{Zo.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=xa(!1),n=t[0],r=t[1];return[Aa((function(t){r(!0),o.unstable_next((function(){var n=Zo.suspense;Zo.suspense=void 0===e?null:e;try{r(!1),t()}finally{Zo.suspense=n}}))}),[e,n]),n]}},Ia={readContext:fo,useCallback:Pa,useContext:fo,useEffect:Sa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ea(4,36,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ea(4,36,e,t)},useMemo:function(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:va,useRef:function(){return ba().memoizedState},useState:_a,useDebugValue:ja,useResponder:Ko,useDeferredValue:function(e,t){var n=_a(),r=n[0],i=n[1];return Sa((function(){o.unstable_next((function(){var n=Zo.suspense;Zo.suspense=void 0===t?null:t;try{i(e)}finally{Zo.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=_a(),n=t[0],r=t[1];return[Pa((function(t){r(!0),o.unstable_next((function(){var n=Zo.suspense;Zo.suspense=void 0===e?null:e;try{r(!1),t()}finally{Zo.suspense=n}}))}),[e,n]),n]}},Da=null,Ra=null,za=!1;function La(e,t){var n=Vl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Fa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ba(e){if(za){var t=Ra;if(t){var n=t;if(!Fa(e,t)){if(!(t=ar(n.nextSibling))||!Fa(e,t))return e.effectTag=-1025&e.effectTag|2,za=!1,void(Da=e);La(Da,n)}Da=e,Ra=ar(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,za=!1,Da=e}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Da=e}function qa(e){if(e!==Da)return!1;if(!za)return Ua(e),za=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!rr(t,e.memoizedProps))for(t=Ra;t;)La(e,t),t=ar(t.nextSibling);if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Jn){if(0===t){Ra=ar(e.nextSibling);break e}t--}else n!==Kn&&n!==Qn&&n!==Zn||t++}e=e.nextSibling}Ra=null}}else Ra=Da?ar(e.stateNode.nextSibling):null;return!0}function $a(){Ra=Da=null,za=!1}var Ha=M.ReactCurrentOwner,Wa=!1;function Va(e,t,n,r){t.child=null===e?Lo(t,null,n,r):zo(t,e.child,n,r)}function Ga(e,t,n,r,i){n=n.render;var o=t.ref;return co(t,i),r=ha(e,t,n,r,o,i),null===e||Wa?(t.effectTag|=1,Va(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),cs(e,t,i))}function Ya(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Gl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Xa(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ni)(i,r)&&e.ref===t.ref)?cs(e,t,o):(t.effectTag|=1,(e=Yl(a,r)).ref=t.ref,e.return=t,t.child=e)}function Xa(e,t,n,r,i,o){return null!==e&&ni(e.memoizedProps,r)&&e.ref===t.ref&&(Wa=!1,i<o)?cs(e,t,o):Ja(e,t,n,r,o)}function Ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ja(e,t,n,r,i){var o=xi(n)?yi:gi.current;return o=vi(t,o),co(t,i),n=ha(e,t,n,r,o,i),null===e||Wa?(t.effectTag|=1,Va(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),cs(e,t,i))}function Za(e,t,n,r,i){if(xi(n)){var o=!0;ki(t)}else o=!1;if(co(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Po(t,n,r),No(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=fo(u):u=vi(t,u=xi(n)?yi:gi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Co(t,a,r,u),po=!1;var d=t.memoizedState;l=a.state=d;var p=t.updateQueue;null!==p&&(wo(t,p,r,a,i),l=t.memoizedState),s!==r||d!==l||bi.current||po?("function"==typeof c&&(To(t,n,c,r),l=t.memoizedState),(s=po||Ao(t,n,s,r,d,l,u))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:to(t.type,s),l=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=fo(u):u=vi(t,u=xi(n)?yi:gi.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Co(t,a,r,u),po=!1,l=t.memoizedState,d=a.state=l,null!==(p=t.updateQueue)&&(wo(t,p,r,a,i),d=t.memoizedState),s!==r||l!==d||bi.current||po?("function"==typeof c&&(To(t,n,c,r),d=t.memoizedState),(c=po||Ao(t,n,s,r,l,d,u))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Qa(e,t,n,r,o,i)}function Qa(e,t,n,r,i,o){Ka(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Si(t,n,!1),cs(e,t,o);r=t.stateNode,Ha.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=zo(t,e.child,null,o),t.child=zo(t,null,s,o)):Va(e,t,s,o),t.memoizedState=r.state,i&&Si(t,n,!0),t.child}function es(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ho(e,t.containerInfo)}var ts,ns,rs,is,os={dehydrated:null,retryTime:0};function as(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Yo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),hi(Yo,1&a),null===e){if(void 0!==o.fallback&&Ba(t),s){if(s=o.fallback,(o=Kl(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Kl(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=os,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Lo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Yl(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Yl(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=os,t.child=n,i}return n=zo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Kl(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Kl(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=os,t.child=o,n}return t.memoizedState=null,t.child=zo(t,e,o.children,n)}function ss(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),uo(e.return,t)}function ls(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function us(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Va(e,t,r.children,n),0!=(2&(r=Yo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ss(e,n);else if(19===e.tag)ss(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Yo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Xo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ls(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Xo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ls(t,!0,n,null,o,t.lastEffect);break;case"together":ls(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cs(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&jl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Yl(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Yl(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function fs(e){e.effectTag|=4}function ds(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ps(e){switch(e.tag){case 1:xi(e.type)&&_i();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Wo(),wi(),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Go(e),null;case 13:return pi(Yo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(Yo),null;case 4:return Wo(),null;case 10:return lo(e),null;default:return null}}function hs(e,t){return{value:e,source:t,stack:Z(t)}}ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ns=function(){},rs=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,l,u=t.stateNode;switch($o(Bo.current),e=null,n){case"input":a=Se(u,a),r=Se(u,r),e=[];break;case"option":a=Ne(u,a),r=Ne(u,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Ie(u,a),r=Ie(u,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(u.onclick=Hn)}for(s in Un(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in u=a[s])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(p.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var c=r[s];if(u=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==u&&(null!=c||null!=u))if("style"===s)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(s,""+c)):"children"===s?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(p.hasOwnProperty(s)?(null!=c&&$n(o,s),e||u===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&fs(t)}},is=function(e,t,n,r){n!==r&&fs(t)};var ms="function"==typeof WeakSet?WeakSet:Set;function gs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Z(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function bs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Bl(e,t)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:vs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:to(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}function vs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function xs(e,t,n){switch("function"==typeof Hl&&Hl(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Yi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){Bl(i,e)}}e=e.next}while(e!==r)}))}break;case 1:bs(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Bl(e,t)}}(t,n);break;case 5:bs(t);break;case 4:Es(e,t,n)}}function _s(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&_s(t)}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function Os(e){e:{for(var t=e.return;null!==t;){if(ws(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&($e(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var l=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(l,s):o.insertBefore(l,s)}else t.insertBefore(s,n);else r?(8===(l=t).nodeType?(o=l.parentNode).insertBefore(s,l):(o=l).appendChild(s),null!=(l=l._reactRootContainer)||null!==o.onclick||(o.onclick=Hn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Es(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,f=u;;)if(xs(l,f,c),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===u)break;for(;null===f.sibling;){if(null===f.return||f.return===u)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(xs(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:vs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[cr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&je(n,r),qn(e,i),t=qn(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?Fn(n,l):"dangerouslySetInnerHTML"===s?qe(n,l):"children"===s?$e(n,l):we(n,s,l,t)}switch(e){case"input":Ae(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Me(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Me(n,!!r.multiple,r.defaultValue,!0):Me(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(a(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,kt(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,tl=Wi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=Ln("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}Ss(t);break;case 19:Ss(t);break;case 17:case 20:case 21:break;default:throw Error(a(163))}}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ms),t.forEach((function(t){var r=ql.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ts="function"==typeof WeakMap?WeakMap:Map;function js(e,t,n){(n=go(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){il||(il=!0,ol=r),gs(e,t)},n}function As(e,t,n){(n=go(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return gs(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===al?al=new Set([this]):al.add(this),gs(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ps,Cs=Math.ceil,Ns=M.ReactCurrentDispatcher,Ms=M.ReactCurrentOwner,Is=0,Ds=8,Rs=16,zs=32,Ls=0,Fs=1,Bs=2,Us=3,qs=4,$s=5,Hs=Is,Ws=null,Vs=null,Gs=0,Ys=Ls,Xs=null,Ks=1073741823,Js=1073741823,Zs=null,Qs=0,el=!1,tl=0,nl=500,rl=null,il=!1,ol=null,al=null,sl=!1,ll=null,ul=90,cl=null,fl=0,dl=null,pl=0;function hl(){return(Hs&(Rs|zs))!==Is?1073741821-(Wi()/10|0):0!==pl?pl:pl=1073741821-(Wi()/10|0)}function ml(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Vi();if(0==(4&t))return 99===r?1073741823:1073741822;if((Hs&Rs)!==Is)return Gs;if(null!==n)e=eo(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=eo(e,150,100);break;case 97:case 96:e=eo(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ws&&e===Gs&&--e,e}function gl(e,t){if(50<fl)throw fl=0,dl=null,Error(a(185));if(null!==(e=bl(e,t))){var n=Vi();1073741823===t?(Hs&Ds)!==Is&&(Hs&(Rs|zs))===Is?_l(e):(vl(e),Hs===Is&&Ji()):vl(e),(4&Hs)===Is||98!==n&&99!==n||(null===cl?cl=new Map([[e,t]]):(void 0===(n=cl.get(e))||n>t)&&cl.set(e,t))}}function bl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ws===i&&(jl(t),Ys===qs&&tu(i,Gs)),nu(i,t)),i}function yl(e){var t=e.lastExpiredTime;return 0!==t?t:eu(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function vl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ki(_l.bind(null,e));else{var t=yl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=hl();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Fi&&Ai(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ki(_l.bind(null,e)):Xi(r,xl.bind(null,e),{timeout:10*(1073741821-t)-Wi()}),e.callbackNode=t}}}function xl(e,t){if(pl=0,t)return ru(e,t=hl()),vl(e),null;var n=yl(e);if(0!==n){if(t=e.callbackNode,(Hs&(Rs|zs))!==Is)throw Error(a(327));if(zl(),e===Ws&&n===Gs||El(e,n),null!==Vs){var r=Hs;Hs|=Rs;for(var i=Sl();;)try{Pl();break}catch(t){kl(e,t)}if(ao(),Hs=r,Ns.current=i,Ys===Fs)throw t=Xs,El(e,n),tu(e,n),vl(e),t;if(null===Vs)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ys,Ws=null,r){case Ls:case Fs:throw Error(a(345));case Bs:ru(e,2<n?2:n);break;case Us:if(tu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ml(i)),1073741823===Ks&&10<(i=tl+nl-Wi())){if(el){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,El(e,n);break}}if(0!==(o=yl(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=ir(Il.bind(null,e),i);break}Il(e);break;case qs:if(tu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ml(i)),el&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,El(e,n);break}if(0!==(i=yl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Js?r=10*(1073741821-Js)-Wi():1073741823===Ks?r=0:(r=10*(1073741821-Ks)-5e3,0>(r=(i=Wi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=ir(Il.bind(null,e),r);break}Il(e);break;case $s:if(1073741823!==Ks&&null!==Zs){o=Ks;var s=Zs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Wi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){tu(e,n),e.timeoutHandle=ir(Il.bind(null,e),r);break}}Il(e);break;default:throw Error(a(329))}if(vl(e),e.callbackNode===t)return xl.bind(null,e)}}return null}function _l(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Il(e);else{if((Hs&(Rs|zs))!==Is)throw Error(a(327));if(zl(),e===Ws&&t===Gs||El(e,t),null!==Vs){var n=Hs;Hs|=Rs;for(var r=Sl();;)try{Al();break}catch(t){kl(e,t)}if(ao(),Hs=n,Ns.current=r,Ys===Fs)throw n=Xs,El(e,t),tu(e,t),vl(e),n;if(null!==Vs)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ws=null,Il(e),vl(e)}}return null}function wl(e,t){var n=Hs;Hs|=1;try{return e(t)}finally{(Hs=n)===Is&&Ji()}}function Ol(e,t){var n=Hs;Hs&=-2,Hs|=Ds;try{return e(t)}finally{(Hs=n)===Is&&Ji()}}function El(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,or(n)),null!==Vs)for(n=Vs.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!=i&&_i();break;case 3:Wo(),wi();break;case 5:Go(r);break;case 4:Wo();break;case 13:case 19:pi(Yo);break;case 10:lo(r)}n=n.return}Ws=e,Vs=Yl(e.current,null),Gs=t,Ys=Ls,Xs=null,Js=Ks=1073741823,Zs=null,Qs=0,el=!1}function kl(e,t){for(;;){try{if(ao(),ma(),null===Vs||null===Vs.return)return Ys=Fs,Xs=t,null;e:{var n=e,r=Vs.return,i=Vs,o=t;if(t=Gs,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var a=o,s=0!=(1&Yo.current),l=r;do{var u;if(u=13===l.tag){var c=l.memoizedState;if(null!==c)u=null!==c.dehydrated;else{var f=l.memoizedProps;u=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!s)}}if(u){var d=l.updateQueue;if(null===d){var p=new Set;p.add(a),l.updateQueue=p}else d.add(a);if(0==(2&l.mode)){if(l.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var h=go(1073741823,null);h.tag=2,yo(i,h)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new Ts,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var g=Ul.bind(null,n,a,i);a.then(g,g)}l.effectTag|=4096,l.expirationTime=t;break e}l=l.return}while(null!==l);o=Error((J(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Z(i))}Ys!==$s&&(Ys=Bs),o=hs(o,i),l=r;do{switch(l.tag){case 3:a=o,l.effectTag|=4096,l.expirationTime=t,vo(l,js(l,a,t));break e;case 1:a=o;var b=l.type,y=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===al||!al.has(y)))){l.effectTag|=4096,l.expirationTime=t,vo(l,As(l,a,t));break e}}l=l.return}while(null!==l)}Vs=Nl(Vs)}catch(e){t=e;continue}break}}function Sl(){var e=Ns.current;return Ns.current=Na,null===e?Na:e}function Tl(e,t){e<Ks&&2<e&&(Ks=e),null!==t&&e<Js&&2<e&&(Js=e,Zs=t)}function jl(e){e>Qs&&(Qs=e)}function Al(){for(;null!==Vs;)Vs=Cl(Vs)}function Pl(){for(;null!==Vs&&!Pi();)Vs=Cl(Vs)}function Cl(e){var t=Ps(e.alternate,e,Gs);return e.memoizedProps=e.pendingProps,null===t&&(t=Nl(e)),Ms.current=null,t}function Nl(e){Vs=e;do{var t=Vs.alternate;if(e=Vs.return,0==(2048&Vs.effectTag)){e:{var n=t,r=Gs,o=(t=Vs).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:xi(t.type)&&_i();break;case 3:Wo(),wi(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===n||null===n.child)&&qa(t)&&fs(t),ns(t);break;case 5:Go(t),r=$o(qo.current);var s=t.type;if(null!==n&&null!=t.stateNode)rs(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var l=$o(Bo.current);if(qa(t)){var u=(o=t).stateNode;n=o.type;var c=o.memoizedProps,f=r;switch(u[ur]=o,u[cr]=c,s=void 0,r=u,n){case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(u=0;u<Qe.length;u++)kn(Qe[u],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"form":kn("reset",r),kn("submit",r);break;case"details":kn("toggle",r);break;case"input":Te(r,c),kn("invalid",r),$n(f,"onChange");break;case"select":r._wrapperState={wasMultiple:!!c.multiple},kn("invalid",r),$n(f,"onChange");break;case"textarea":De(r,c),kn("invalid",r),$n(f,"onChange")}for(s in Un(n,c),u=null,c)c.hasOwnProperty(s)&&(l=c[s],"children"===s?"string"==typeof l?r.textContent!==l&&(u=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(u=["children",""+l]):p.hasOwnProperty(s)&&null!=l&&$n(f,s));switch(n){case"input":Ee(r),Pe(r,c,!0);break;case"textarea":Ee(r),ze(r);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(r.onclick=Hn)}s=u,o.updateQueue=s,(o=null!==s)&&fs(t)}else{n=t,f=s,c=o,u=9===r.nodeType?r:r.ownerDocument,l===Le.html&&(l=Fe(f)),l===Le.html?"script"===f?((c=u.createElement("div")).innerHTML="<script><\/script>",u=c.removeChild(c.firstChild)):"string"==typeof c.is?u=u.createElement(f,{is:c.is}):(u=u.createElement(f),"select"===f&&(f=u,c.multiple?f.multiple=!0:c.size&&(f.size=c.size))):u=u.createElementNS(l,f),(c=u)[ur]=n,c[cr]=o,ts(c,t,!1,!1),t.stateNode=c;var d=r,h=qn(f=s,n=o);switch(f){case"iframe":case"object":case"embed":kn("load",c),r=n;break;case"video":case"audio":for(r=0;r<Qe.length;r++)kn(Qe[r],c);r=n;break;case"source":kn("error",c),r=n;break;case"img":case"image":case"link":kn("error",c),kn("load",c),r=n;break;case"form":kn("reset",c),kn("submit",c),r=n;break;case"details":kn("toggle",c),r=n;break;case"input":Te(c,n),r=Se(c,n),kn("invalid",c),$n(d,"onChange");break;case"option":r=Ne(c,n);break;case"select":c._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),kn("invalid",c),$n(d,"onChange");break;case"textarea":De(c,n),r=Ie(c,n),kn("invalid",c),$n(d,"onChange");break;default:r=n}Un(f,r),u=void 0,l=f;var m=c,g=r;for(u in g)if(g.hasOwnProperty(u)){var b=g[u];"style"===u?Fn(m,b):"dangerouslySetInnerHTML"===u?null!=(b=b?b.__html:void 0)&&qe(m,b):"children"===u?"string"==typeof b?("textarea"!==l||""!==b)&&$e(m,b):"number"==typeof b&&$e(m,""+b):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(p.hasOwnProperty(u)?null!=b&&$n(d,u):null!=b&&we(m,u,b,h))}switch(f){case"input":Ee(c),Pe(c,n,!1);break;case"textarea":Ee(c),ze(c);break;case"option":null!=n.value&&c.setAttribute("value",""+_e(n.value));break;case"select":(r=c).multiple=!!n.multiple,null!=(c=n.value)?Me(r,!!n.multiple,c,!1):null!=n.defaultValue&&Me(r,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(c.onclick=Hn)}(o=nr(s,o))&&fs(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(a(166));break;case 6:if(n&&null!=t.stateNode)is(n,t,n.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw Error(a(166));r=$o(qo.current),$o(Bo.current),qa(t)?(s=(o=t).stateNode,r=o.memoizedProps,s[ur]=o,(o=s.nodeValue!==r)&&fs(t)):(s=t,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[ur]=s,t.stateNode=o)}break;case 11:break;case 13:if(pi(Yo),o=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=r;break e}o=null!==o,s=!1,null===n?void 0!==t.memoizedProps.fallback&&qa(t):(s=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=r,r.nextEffect=c):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!s&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Yo.current)?Ys===Ls&&(Ys=Us):(Ys!==Ls&&Ys!==Us||(Ys=qs),0!==Qs&&null!==Ws&&(tu(Ws,Gs),nu(Ws,Qs)))),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Wo(),ns(t);break;case 10:lo(t);break;case 9:case 14:break;case 17:xi(t.type)&&_i();break;case 19:if(pi(Yo),null===(o=t.memoizedState))break;if(s=0!=(64&t.effectTag),null===(c=o.rendering)){if(s)ds(o,!1);else if(Ys!==Ls||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(c=Xo(n))){for(t.effectTag|=64,ds(o,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,s=t.child;null!==s;)n=o,(r=s).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(c=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=c.childExpirationTime,r.expirationTime=c.expirationTime,r.child=c.child,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,n=c.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;hi(Yo,1&Yo.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=Xo(c))){if(t.effectTag|=64,s=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),ds(o,!0),null===o.tail&&"hidden"===o.tailMode){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Wi()>o.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,ds(o,!1),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=o.last)?r.sibling=c:t.child=c,o.last=c)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Wi()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=Yo.current,hi(Yo,o=s?1&o|2:1&o),t=r;break e}break;case 20:case 21:break;default:throw Error(a(156,t.tag))}t=null}if(o=Vs,1===Gs||1!==o.childExpirationTime){for(s=0,r=o.child;null!==r;)(n=r.expirationTime)>s&&(s=n),(c=r.childExpirationTime)>s&&(s=c),r=r.sibling;o.childExpirationTime=s}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Vs.firstEffect),null!==Vs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Vs.firstEffect),e.lastEffect=Vs.lastEffect),1<Vs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Vs:e.firstEffect=Vs,e.lastEffect=Vs))}else{if(null!==(t=ps(Vs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Vs.sibling))return t;Vs=e}while(null!==Vs);return Ys===Ls&&(Ys=$s),null}function Ml(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Il(e){var t=Vi();return Yi(99,Dl.bind(null,e,t)),null}function Dl(e,t){if(zl(),(Hs&(Rs|zs))!==Is)throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Ml(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ws&&(Vs=Ws=null,Gs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Hs;Hs|=zs,Ms.current=null,er=En;var s=Yn();if(Xn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{l.nodeType,f.nodeType}catch(e){l=null;break e}var d=0,p=-1,h=-1,m=0,g=0,b=s,y=null;t:for(;;){for(var v;b!==l||0!==c&&3!==b.nodeType||(p=d+c),b!==f||0!==u&&3!==b.nodeType||(h=d+u),3===b.nodeType&&(d+=b.nodeValue.length),null!==(v=b.firstChild);)y=b,b=v;for(;;){if(b===s)break t;if(y===l&&++m===c&&(p=d),y===f&&++g===u&&(h=d),null!==(v=b.nextSibling))break;y=(b=y).parentNode}b=v}l=-1===p||-1===h?null:{start:p,end:h}}else l=null}l=l||{start:0,end:0}}else l=null;tr={focusedElem:s,selectionRange:l},En=!1,rl=i;do{try{Rl()}catch(e){if(null===rl)throw Error(a(330));Bl(rl,e),rl=rl.nextEffect}}while(null!==rl);rl=i;do{try{for(s=e,l=t;null!==rl;){var x=rl.effectTag;if(16&x&&$e(rl.stateNode,""),128&x){var _=rl.alternate;if(null!==_){var w=_.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&x){case 2:Os(rl),rl.effectTag&=-3;break;case 6:Os(rl),rl.effectTag&=-3,ks(rl.alternate,rl);break;case 1024:rl.effectTag&=-1025;break;case 1028:rl.effectTag&=-1025,ks(rl.alternate,rl);break;case 4:ks(rl.alternate,rl);break;case 8:Es(s,c=rl,l),_s(c)}rl=rl.nextEffect}}catch(e){if(null===rl)throw Error(a(330));Bl(rl,e),rl=rl.nextEffect}}while(null!==rl);if(w=tr,_=Yn(),x=w.focusedElem,l=w.selectionRange,_!==x&&x&&x.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==l&&Xn(x)&&(_=l.start,void 0===(w=l.end)&&(w=_),"selectionStart"in x?(x.selectionStart=_,x.selectionEnd=Math.min(w,x.value.length)):(w=(_=x.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),c=x.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!w.extend&&s>l&&(c=l,l=s,s=c),c=Gn(x,s),f=Gn(x,l),c&&f&&(1!==w.rangeCount||w.anchorNode!==c.node||w.anchorOffset!==c.offset||w.focusNode!==f.node||w.focusOffset!==f.offset)&&((_=_.createRange()).setStart(c.node,c.offset),w.removeAllRanges(),s>l?(w.addRange(_),w.extend(f.node,f.offset)):(_.setEnd(f.node,f.offset),w.addRange(_))))),_=[];for(w=x;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<_.length;x++)(w=_[x]).element.scrollLeft=w.left,w.element.scrollTop=w.top}tr=null,En=!!er,er=null,e.current=n,rl=i;do{try{for(x=r;null!==rl;){var O=rl.effectTag;if(36&O){var E=rl.alternate;switch(w=x,(_=rl).tag){case 0:case 11:case 15:vs(16,32,_);break;case 1:var k=_.stateNode;if(4&_.effectTag)if(null===E)k.componentDidMount();else{var S=_.elementType===_.type?E.memoizedProps:to(_.type,E.memoizedProps);k.componentDidUpdate(S,E.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var T=_.updateQueue;null!==T&&Oo(0,T,k);break;case 3:var j=_.updateQueue;if(null!==j){if(s=null,null!==_.child)switch(_.child.tag){case 5:s=_.child.stateNode;break;case 1:s=_.child.stateNode}Oo(0,j,s)}break;case 5:var A=_.stateNode;null===E&&4&_.effectTag&&nr(_.type,_.memoizedProps)&&A.focus();break;case 6:case 4:case 12:break;case 13:if(null===_.memoizedState){var P=_.alternate;if(null!==P){var C=P.memoizedState;if(null!==C){var N=C.dehydrated;null!==N&&kt(N)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(a(163))}}if(128&O){_=void 0;var M=rl.ref;if(null!==M){var I=rl.stateNode;switch(rl.tag){case 5:_=I;break;default:_=I}"function"==typeof M?M(_):M.current=_}}rl=rl.nextEffect}}catch(e){if(null===rl)throw Error(a(330));Bl(rl,e),rl=rl.nextEffect}}while(null!==rl);rl=null,Bi(),Hs=o}else e.current=n;if(sl)sl=!1,ll=e,ul=t;else for(rl=i;null!==rl;)t=rl.nextEffect,rl.nextEffect=null,rl=t;if(0===(t=e.firstPendingTime)&&(al=null),1073741823===t?e===dl?fl++:(fl=0,dl=e):fl=0,"function"==typeof $l&&$l(n.stateNode,r),vl(e),il)throw il=!1,e=ol,ol=null,e;return(Hs&Ds)!==Is?null:(Ji(),null)}function Rl(){for(;null!==rl;){var e=rl.effectTag;0!=(256&e)&&ys(rl.alternate,rl),0==(512&e)||sl||(sl=!0,Xi(97,(function(){return zl(),null}))),rl=rl.nextEffect}}function zl(){if(90!==ul){var e=97<ul?97:ul;return ul=90,Yi(e,Ll)}}function Ll(){if(null===ll)return!1;var e=ll;if(ll=null,(Hs&(Rs|zs))!==Is)throw Error(a(331));var t=Hs;for(Hs|=zs,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:vs(128,0,n),vs(0,64,n)}}catch(t){if(null===e)throw Error(a(330));Bl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Hs=t,Ji(),!0}function Fl(e,t,n){yo(e,t=js(e,t=hs(n,t),1073741823)),null!==(e=bl(e,1073741823))&&vl(e)}function Bl(e,t){if(3===e.tag)Fl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===al||!al.has(r))){yo(n,e=As(n,e=hs(t,e),1073741823)),null!==(n=bl(n,1073741823))&&vl(n);break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ws===e&&Gs===n?Ys===qs||Ys===Us&&1073741823===Ks&&Wi()-tl<nl?El(e,Gs):el=!0:eu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),vl(e)))}function ql(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ml(t=hl(),e,null)),null!==(e=bl(e,t))&&vl(e)}Ps=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||bi.current)Wa=!0;else{if(r<n){switch(Wa=!1,t.tag){case 3:es(t),$a();break;case 5:if(Vo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:xi(t.type)&&ki(t);break;case 4:Ho(t,t.stateNode.containerInfo);break;case 10:so(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?as(e,t,n):(hi(Yo,1&Yo.current),null!==(t=cs(e,t,n))?t.sibling:null);hi(Yo,1&Yo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return us(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),hi(Yo,Yo.current),!r)return null}return cs(e,t,n)}Wa=!1}}else Wa=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=vi(t,gi.current),co(t,n),i=ha(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,ma(),xi(r)){var o=!0;ki(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&To(t,r,s,e),i.updater=jo,t.stateNode=i,i._reactInternalFiber=t,No(t,r,e,n),t=Qa(null,t,r,!0,o,n)}else t.tag=0,Va(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Gl(e)?1:0;if(null!=e){if((e=e.$$typeof)===H)return 11;if(e===G)return 14}return 2}(i),e=to(i,e),o){case 0:t=Ja(null,t,i,e,n);break;case 1:t=Za(null,t,i,e,n);break;case 11:t=Ga(null,t,i,e,n);break;case 14:t=Ya(null,t,i,to(i.type,e),r,n);break;default:throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ja(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Za(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:if(es(t),null===(r=t.updateQueue))throw Error(a(282));if(i=null!==(i=t.memoizedState)?i.element:null,wo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)$a(),t=cs(e,t,n);else{if((i=t.stateNode.hydrate)&&(Ra=ar(t.stateNode.containerInfo.firstChild),Da=t,i=za=!0),i)for(n=Lo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Va(e,t,r,n),$a();t=t.child}return t;case 5:return Vo(t),null===e&&Ba(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,rr(r,i)?s=null:null!==o&&rr(r,o)&&(t.effectTag|=16),Ka(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Va(e,t,s,n),t=t.child),t;case 6:return null===e&&Ba(t),null;case 13:return as(e,t,n);case 4:return Ho(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=zo(t,null,r,n):Va(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ga(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return Va(e,t,t.pendingProps,n),t.child;case 8:case 12:return Va(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,so(t,o=i.value),null!==s){var l=s.value;if(0===(o=ei(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!bi.current){t=cs(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=go(n,null)).tag=2,yo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),uo(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Va(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,co(t,n),r=r(i=fo(i,o.unstable_observedBits)),t.effectTag|=1,Va(e,t,r,n),t.child;case 14:return o=to(i=t.type,t.pendingProps),Ya(e,t,i,o=to(i.type,o),r,n);case 15:return Xa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,xi(r)?(e=!0,ki(t)):e=!1,co(t,n),Po(t,r,i),No(t,r,i,n),Qa(null,t,r,!0,e,n);case 19:return us(e,t,n)}throw Error(a(156,t.tag))};var $l=null,Hl=null;function Wl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Vl(e,t,n,r){return new Wl(e,t,n,r)}function Gl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yl(e,t){var n=e.alternate;return null===n?((n=Vl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Gl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case L:return Kl(n.children,i,o,t);case $:s=8,i|=7;break;case F:s=8,i|=1;break;case B:return(e=Vl(12,n,t,8|i)).elementType=B,e.type=B,e.expirationTime=o,e;case W:return(e=Vl(13,n,t,i)).type=W,e.elementType=W,e.expirationTime=o,e;case V:return(e=Vl(19,n,t,i)).elementType=V,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case U:s=10;break e;case q:s=9;break e;case H:s=11;break e;case G:s=14;break e;case Y:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Vl(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Kl(e,t,n,r){return(e=Vl(7,e,r,t)).expirationTime=n,e}function Jl(e,t,n){return(e=Vl(6,e,null,t)).expirationTime=n,e}function Zl(e,t,n){return(t=Vl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function eu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function tu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function nu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function ru(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function iu(e,t,n,r){var i=t.current,o=hl(),s=ko.suspense;o=ml(o,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(xi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(xi(u)){n=Ei(n,u,l);break e}}n=l}else n=mi;return null===t.context?t.context=n:t.pendingContext=n,(t=go(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),yo(i,t),gl(i,o),o}function ou(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function au(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function su(e,t){au(e,t),(e=e.alternate)&&au(e,t)}function lu(e,t,n){var r=new Ql(e,t,n=null!=n&&!0===n.hydrate),i=Vl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,e[fr]=r.current,n&&0!==t&&function(e){var t=In(e);mt.forEach((function(n){Dn(n,e,t)})),gt.forEach((function(n){Dn(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function uu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function cu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=ou(a);s.call(e)}}iu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new lu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=ou(a);l.call(e)}}Ol((function(){iu(t,a,e,i)}))}return ou(a)}function fu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!uu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:z,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}it=function(e){if(13===e.tag){var t=eo(hl(),150,100);gl(e,t),su(e,t)}},ot=function(e){if(13===e.tag){hl();var t=Qi++;gl(e,t),su(e,t)}},at=function(e){if(13===e.tag){var t=hl();gl(e,t=ml(t,e,null)),su(e,t)}},ee=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=mr(r);if(!i)throw Error(a(90));ke(r),Ae(r,i)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&Me(e,!!n.multiple,t,!1)}},lu.prototype.render=function(e,t){iu(e,this._internalRoot,null,void 0===t?null:t)},lu.prototype.unmount=function(e){iu(null,this._internalRoot,null,void 0===e?null:e)},ae=wl,se=function(e,t,n,r){var i=Hs;Hs|=4;try{return Yi(98,e.bind(null,t,n,r))}finally{(Hs=i)===Is&&Ji()}},le=function(){(Hs&(1|Rs|zs))===Is&&(function(){if(null!==cl){var e=cl;cl=null,e.forEach((function(e,t){ru(t,e),vl(t)})),Ji()}}(),zl())},ue=function(e,t){var n=Hs;Hs|=2;try{return e(t)}finally{(Hs=n)===Is&&Ji()}};var du,pu,hu={createPortal:fu,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},hydrate:function(e,t,n){if(!uu(t))throw Error(a(200));return cu(null,e,t,!0,n)},render:function(e,t,n){if(!uu(t))throw Error(a(200));return cu(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!uu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return cu(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!uu(e))throw Error(a(40));return!!e._reactRootContainer&&(Ol((function(){cu(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return fu.apply(void 0,arguments)},unstable_batchedUpdates:wl,flushSync:function(e,t){if((Hs&(Rs|zs))!==Is)throw Error(a(187));var n=Hs;Hs|=1;try{return Yi(99,e.bind(null,t))}finally{Hs=n,Ji()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[pr,hr,mr,C.injectEventPluginsByName,d,Nt,function(e){T(e,Ct)},ie,oe,Pn,P,zl,{current:!1}]}};pu=(du={findFiberByHostInstance:dr,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);$l=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Hl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(i({},du,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return pu?pu(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var mu={default:hu},gu=mu&&hu||mu;e.exports=gu.default||gu},function(e,t,n){"use strict";e.exports=n(354)},function(e,t,n){"use strict";
/** @license React v0.17.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(c,0),e}},f=Date.now();t.unstable_now=function(){return Date.now()-f},r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(c,0))},i=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,h=window.setTimeout,m=window.clearTimeout,g=window.requestAnimationFrame,b=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var y=p.now();t.unstable_now=function(){return p.now()-y}}var v=!1,x=null,_=-1,w=5,O=0;a=function(){return t.unstable_now()>=O},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):33.33};var E=new MessageChannel,k=E.port2;E.port1.onmessage=function(){if(null!==x){var e=t.unstable_now();O=e+w;try{x(!0,e)?k.postMessage(null):(v=!1,x=null)}catch(e){throw k.postMessage(null),e}}else v=!1},r=function(e){x=e,v||(v=!0,k.postMessage(null))},i=function(e,n){_=h((function(){e(t.unstable_now())}),n)},o=function(){m(_),_=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function j(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>A(a,n))void 0!==l&&0>A(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>A(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],C=[],N=1,M=null,I=3,D=!1,R=!1,z=!1;function L(e){for(var t=T(C);null!==t;){if(null===t.callback)j(C);else{if(!(t.startTime<=e))break;j(C),t.sortIndex=t.expirationTime,S(P,t)}t=T(C)}}function F(e){if(z=!1,L(e),!R)if(null!==T(P))R=!0,r(B);else{var t=T(C);null!==t&&i(F,t.startTime-e)}}function B(e,n){R=!1,z&&(z=!1,o()),D=!0;var r=I;try{for(L(n),M=T(P);null!==M&&(!(M.expirationTime>n)||e&&!a());){var s=M.callback;if(null!==s){M.callback=null,I=M.priorityLevel;var l=s(M.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?M.callback=l:M===T(P)&&j(P),L(n)}else j(P);M=T(P)}if(null!==M)var u=!0;else{var c=T(C);null!==c&&i(F,c.startTime-n),u=!1}return u}finally{M=null,I=r,D=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:U(e)}else a=U(e),l=s;return e={id:N++,callback:n,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,S(C,e),null===T(P)&&e===T(C)&&(z?o():z=!0,i(F,l-s))):(e.sortIndex=a,S(P,e),R||D||(R=!0,r(B))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=T(P);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<M.expirationTime||a()},t.unstable_requestPaint=q,t.unstable_continueExecution=function(){R||D||(R=!0,r(B))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return T(P)},t.unstable_Profiling=null},function(e,t,n){"use strict";const r=n(111),i={contextualizers:{bib:n(356),glossary:n(535),webpage:n(538),embed:n(550),video:n(554),image:n(564),sourceCode:n(622),vegaLite:n(625),table:n(637)},templates:[n(650).default,n(759).default,n(909).default,n(928).default],renderingModes:["screened","paged"],htmlBuilds:{"single-page-html":{deucalion:!0,callirhoe:!0,chrysaor:!0}},generators:{"single-page-html":{outputFormat:"html",generatorType:"single-page-html",id:"single-page-html",interfaceCoverage:["desktop","web"]},"multi-page-html":{outputFormat:"zip",generatorType:"multi-page-html",id:"multi-page-html",interfaceCoverage:["desktop"]}},resourcesSchemas:{section:r.definitions.section,bib:r.definitions.bib,glossary:r.definitions.glossary,webpage:r.definitions.webpage,image:r.definitions.image,table:r.definitions.table,video:r.definitions.video,embed:r.definitions.embed}};e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Inline=t.Block=void 0;var r=a(n(357)),i=a(n(533)),o=a(n(534));function a(e){return e&&e.__esModule?e:{default:e}}const s=r.default;t.Block=s;const l=i.default;t.Inline=l;const u=o.default;t.meta=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=n(30),a=n(4);function s(e){return e&&e.__esModule?e:{default:e}}const l=({resource:e={},contextualization:t={},renderingMode:n="paged",children:i},{citationLocale:s,citationStyle:l})=>{const u=(0,a.resourceToCslJSON)(e)[0];return u?r.default.createElement("div",{id:t.id,className:`peritext-contextualization block bib rendering-mode-${n}`},r.default.createElement("blockquote",{style:{display:"none"}},i),r.default.createElement(o.Bibliography,{style:l,locale:s,items:{[u.id]:u}})):null};l.contextTypes={citationLocale:i.default.string,citationStyle:i.default.string,citationItems:i.default.object};var u=l;t.default=u},function(e,t,n){"use strict";var r=n(188);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(112)),i=p(n(196)),o=p(n(198)),a=p(n(199)),s=p(n(200)),l=p(n(206)),u=n(207),c=p(u),f=p(n(1)),d=p(n(67));function p(e){return e&&e.__esModule?e:{default:e}}var h=new(n(215).Parser),m=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));n.makeReactBibliography=function(e,t){e.updateItems((0,r.default)(t));var n=e.makeBibliography()[1].join("\n");return h.parse(n)};var a={retrieveLocale:function(){return n.props.locale},retrieveItem:function(e){return n.props.items[e]},variableWrapper:function(e,t,n,r){return"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?t+'<a href="'+e.itemData.URL+'" target="blank">'+n+"</a>"+r:"URL"===e.variableNames[0]?t+'<a href="'+n+'" target="blank">'+n+"</a>"+r:t+n+r}},l=new d.default.Engine(a,e.style);return n.state={sys:a,bibliography:e.items&&e.style&&e.locale?n.makeReactBibliography(l,e.items):""},n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){if(this.props.locale&&this.props.style){var e=new d.default.Engine(this.state.sys,this.props.style);this.setState({processor:e,bibliography:this.props.items&&this.makeReactBibliography(e,this.props.items)})}}},{key:"componentWillReceiveProps",value:function(e){if(!this.state.processor&&this.props.locale&&this.props.style){var t=new d.default.Engine(this.state.sys,e.style);this.setState({processor:t})}}},{key:"componentDidUpdate",value:function(e){var t=this;if((this.state.processor&&this.props.items!==e.items||!this.state.bibliography)&&this.setState({bibliography:this.makeReactBibliography(this.state.processor,this.props.items)}),this.props.locale!==e.locale){var n={retrieveLocale:function(){return t.props.locale},retrieveItem:function(e){return t.props.items[e]},variableWrapper:function(e,t,n,r){return"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?t+'<a href="'+e.itemData.URL+'" target="blank">'+n+"</a>"+r:"URL"===e.variableNames[0]?t+'<a href="'+n+'" target="blank">'+n+"</a>"+r:t+n+r}},r=new d.default.Engine(n,this.props.style);this.setState({processor:r,bibliography:this.makeReactBibliography(r,this.props.items),sys:n})}if(this.props.style!==e.style){var i=new d.default.Engine(this.state.sys,this.props.style);this.setState({processor:i,bibliography:this.makeReactBibliography(i,this.props.items)})}}},{key:"render",value:function(){var e=this.props.componentClass,t=void 0===e?"Bibliography":e,n=this.state.bibliography;return n?c.default.createElement("div",{className:t},n):c.default.createElement("div",{className:t+" loading"},this.props.loadingContent||"loading")}}]),t}(u.Component);m.propTypes={componentClass:f.default.string,style:f.default.string,locale:f.default.string,items:f.default.object},t.default=m,e.exports=t.default},function(e,t,n){n(361),e.exports=n(21).Object.keys},function(e,t,n){var r=n(64),i=n(65);n(192)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(47),i=n(363),o=n(364);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(114),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(114),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){n(367),e.exports=n(21).Object.getPrototypeOf},function(e,t,n){var r=n(64),i=n(197);n(192)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){e.exports={default:n(369),__esModule:!0}},function(e,t,n){n(370);var r=n(21).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(36);r(r.S+r.F*!n(32),"Object",{defineProperty:n(37).f})},function(e,t,n){e.exports={default:n(372),__esModule:!0}},function(e,t,n){n(373),n(378),e.exports=n(122).f("iterator")},function(e,t,n){"use strict";var r=n(374)(!0);n(202)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(114),i=n(113);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(120),i=n(80),o=n(121),a={};n(48)(a,n(51)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(37),i=n(66),o=n(65);e.exports=n(32)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(31).document;e.exports=r&&r.documentElement},function(e,t,n){n(379);for(var r=n(31),i=n(48),o=n(119),a=n(51)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],f=c&&c.prototype;f&&!f[a]&&i(f,a,u),o[u]=o.Array}},function(e,t,n){"use strict";var r=n(380),i=n(381),o=n(119),a=n(47);e.exports=n(202)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(383),__esModule:!0}},function(e,t,n){n(384),n(389),n(390),n(391),e.exports=n(21).Symbol},function(e,t,n){"use strict";var r=n(31),i=n(35),o=n(32),a=n(36),s=n(203),l=n(385).KEY,u=n(50),c=n(116),f=n(121),d=n(79),p=n(51),h=n(122),m=n(123),g=n(386),b=n(387),y=n(66),v=n(49),x=n(64),_=n(47),w=n(118),O=n(80),E=n(120),k=n(388),S=n(205),T=n(124),j=n(37),A=n(65),P=S.f,C=j.f,N=k.f,M=r.Symbol,I=r.JSON,D=I&&I.stringify,R=p("_hidden"),z=p("toPrimitive"),L={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),U=c("op-symbols"),q=Object.prototype,$="function"==typeof M&&!!T.f,H=r.QObject,W=!H||!H.prototype||!H.prototype.findChild,V=o&&u((function(){return 7!=E(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=P(q,t);r&&delete q[t],C(e,t,n),r&&e!==q&&C(q,t,r)}:C,G=function(e){var t=B[e]=E(M.prototype);return t._k=e,t},Y=$&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},X=function(e,t,n){return e===q&&X(U,t,n),y(e),t=w(t,!0),y(n),i(B,t)?(n.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),n=E(n,{enumerable:O(0,!1)})):(i(e,R)||C(e,R,O(1,{})),e[R][t]=!0),V(e,t,n)):C(e,t,n)},K=function(e,t){y(e);for(var n,r=g(t=_(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},J=function(e){var t=L.call(this,e=w(e,!0));return!(this===q&&i(B,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,R)&&this[R][e])||t)},Z=function(e,t){if(e=_(e),t=w(t,!0),e!==q||!i(B,t)||i(U,t)){var n=P(e,t);return!n||!i(B,t)||i(e,R)&&e[R][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=N(_(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==R||t==l||r.push(t);return r},ee=function(e){for(var t,n=e===q,r=N(n?U:_(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(q,t)||o.push(B[t]);return o};$||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(U,n),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),V(this,e,O(1,n))};return o&&W&&V(q,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),S.f=Z,j.f=X,n(204).f=k.f=Q,n(81).f=J,T.f=ee,o&&!n(78)&&s(q,"propertyIsEnumerable",J,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!$,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=A(p.store),ie=0;re.length>ie;)m(re[ie++]);a(a.S+a.F*!$,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!$,"Object",{create:function(e,t){return void 0===t?E(e):K(E(e),t)},defineProperty:X,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var oe=u((function(){T.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return T.f(x(e))}}),I&&a(a.S+a.F*(!$||u((function(){var e=M();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(v(t)||void 0!==e)&&!Y(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,D.apply(I,r)}}),M.prototype[z]||n(48)(M.prototype,z,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(79)("meta"),i=n(49),o=n(35),a=n(37).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(50)((function(){return l(Object.preventExtensions({}))})),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return u&&f.NEED&&l(e)&&!o(e,r)&&c(e),e}}},function(e,t,n){var r=n(65),i=n(124),o=n(81);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(191);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(47),i=n(204).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t){},function(e,t,n){n(123)("asyncIterator")},function(e,t,n){n(123)("observable")},function(e,t,n){e.exports={default:n(393),__esModule:!0}},function(e,t,n){n(394),e.exports=n(21).Object.setPrototypeOf},function(e,t,n){var r=n(36);r(r.S,"Object",{setPrototypeOf:n(395).set})},function(e,t,n){var r=n(49),i=n(66),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(193)(Function.call,n(205).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(397),__esModule:!0}},function(e,t,n){n(398);var r=n(21).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(36);r(r.S,"Object",{create:n(120)})},function(e,t,n){"use strict";var r=n(29),i=n(208),o=n(402),a=n(407),s=n(52),l=n(408),u=n(413),c=n(414),f=n(418),d=s.createElement,p=s.createFactory,h=s.cloneElement,m=r,g={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:f},Component:i.Component,PureComponent:i.PureComponent,createElement:d,cloneElement:h,isValidElement:s.isValidElement,PropTypes:l,createClass:c,createFactory:p,createMixin:function(e){return e},DOM:a,version:u,__spread:m};e.exports=g},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(403),i=n(52),o=n(210),a=n(404),s=r.twoArgumentPooler,l=r.fourArgumentPooler,u=/\/+/g;function c(e){return(""+e).replace(u,"$&/")}function f(e,t){this.func=e,this.context=t,this.count=0}function d(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function p(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function h(e,t,n){var r=e.result,a=e.keyPrefix,s=e.func,l=e.context,u=s.call(l,t,e.count++);Array.isArray(u)?m(u,r,n,o.thatReturnsArgument):null!=u&&(i.isValidElement(u)&&(u=i.cloneAndReplaceKey(u,a+(!u.key||t&&t.key===u.key?"":c(u.key)+"/")+n)),r.push(u))}function m(e,t,n,r,i){var o="";null!=n&&(o=c(n)+"/");var s=p.getPooled(t,o,r,i);a(e,h,s),p.release(s)}function g(e,t,n){return null}f.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},r.addPoolingTo(f,s),p.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},r.addPoolingTo(p,l);var b={forEach:function(e,t,n){if(null==e)return e;var r=f.getPooled(t,n);a(e,d,r),f.release(r)},map:function(e,t,n){if(null==e)return e;var r=[];return m(e,r,null,t,n),r},mapIntoWithKeyPrefixInternal:m,count:function(e,t){return a(e,g,null)},toArray:function(e){var t=[];return m(e,t,null,o.thatReturnsArgument),t}};e.exports=b},function(e,t,n){"use strict";var r=n(82),i=(n(83),function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)}),o=function(e){e instanceof this||r("25"),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)},a=i,s={addPoolingTo:function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||a,n.poolSize||(n.poolSize=10),n.release=o,n},oneArgumentPooler:i,twoArgumentPooler:function(e,t){if(this.instancePool.length){var n=this.instancePool.pop();return this.call(n,e,t),n}return new this(e,t)},threeArgumentPooler:function(e,t,n){if(this.instancePool.length){var r=this.instancePool.pop();return this.call(r,e,t,n),r}return new this(e,t,n)},fourArgumentPooler:function(e,t,n,r){if(this.instancePool.length){var i=this.instancePool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}};e.exports=s},function(e,t,n){"use strict";var r=n(82),i=(n(212),n(213)),o=n(405),a=(n(83),n(406)),s=(n(125),"."),l=":";function u(e,t){return e&&"object"==typeof e&&null!=e.key?a.escape(e.key):t.toString(36)}e.exports=function(e,t,n){return null==e?0:function e(t,n,c,f){var d,p=typeof t;if("undefined"!==p&&"boolean"!==p||(t=null),null===t||"string"===p||"number"===p||"object"===p&&t.$$typeof===i)return c(f,t,""===n?s+u(t,0):n),1;var h=0,m=""===n?s:n+l;if(Array.isArray(t))for(var g=0;g<t.length;g++)h+=e(d=t[g],m+u(d,g),c,f);else{var b=o(t);if(b){var y,v=b.call(t);if(b!==t.entries)for(var x=0;!(y=v.next()).done;)h+=e(d=y.value,m+u(d,x++),c,f);else for(;!(y=v.next()).done;){var _=y.value;_&&(h+=e(d=_[1],m+a.escape(_[0])+l+u(d,0),c,f))}}else if("object"===p){var w=String(t);r("31","[object Object]"===w?"object with keys {"+Object.keys(t).join(", ")+"}":w,"")}}return h}(e,"",t,n)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=function(e){var t=e&&(r&&e[r]||e[i]);if("function"==typeof t)return t}},function(e,t,n){"use strict";var r={escape:function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))},unescape:function(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,(function(e){return t[e]}))}};e.exports=r},function(e,t,n){"use strict";var r=n(52).createFactory,i={a:r("a"),abbr:r("abbr"),address:r("address"),area:r("area"),article:r("article"),aside:r("aside"),audio:r("audio"),b:r("b"),base:r("base"),bdi:r("bdi"),bdo:r("bdo"),big:r("big"),blockquote:r("blockquote"),body:r("body"),br:r("br"),button:r("button"),canvas:r("canvas"),caption:r("caption"),cite:r("cite"),code:r("code"),col:r("col"),colgroup:r("colgroup"),data:r("data"),datalist:r("datalist"),dd:r("dd"),del:r("del"),details:r("details"),dfn:r("dfn"),dialog:r("dialog"),div:r("div"),dl:r("dl"),dt:r("dt"),em:r("em"),embed:r("embed"),fieldset:r("fieldset"),figcaption:r("figcaption"),figure:r("figure"),footer:r("footer"),form:r("form"),h1:r("h1"),h2:r("h2"),h3:r("h3"),h4:r("h4"),h5:r("h5"),h6:r("h6"),head:r("head"),header:r("header"),hgroup:r("hgroup"),hr:r("hr"),html:r("html"),i:r("i"),iframe:r("iframe"),img:r("img"),input:r("input"),ins:r("ins"),kbd:r("kbd"),keygen:r("keygen"),label:r("label"),legend:r("legend"),li:r("li"),link:r("link"),main:r("main"),map:r("map"),mark:r("mark"),menu:r("menu"),menuitem:r("menuitem"),meta:r("meta"),meter:r("meter"),nav:r("nav"),noscript:r("noscript"),object:r("object"),ol:r("ol"),optgroup:r("optgroup"),option:r("option"),output:r("output"),p:r("p"),param:r("param"),picture:r("picture"),pre:r("pre"),progress:r("progress"),q:r("q"),rp:r("rp"),rt:r("rt"),ruby:r("ruby"),s:r("s"),samp:r("samp"),script:r("script"),section:r("section"),select:r("select"),small:r("small"),source:r("source"),span:r("span"),strong:r("strong"),style:r("style"),sub:r("sub"),summary:r("summary"),sup:r("sup"),table:r("table"),tbody:r("tbody"),td:r("td"),textarea:r("textarea"),tfoot:r("tfoot"),th:r("th"),thead:r("thead"),time:r("time"),title:r("title"),tr:r("tr"),track:r("track"),u:r("u"),ul:r("ul"),var:r("var"),video:r("video"),wbr:r("wbr"),circle:r("circle"),clipPath:r("clipPath"),defs:r("defs"),ellipse:r("ellipse"),g:r("g"),image:r("image"),line:r("line"),linearGradient:r("linearGradient"),mask:r("mask"),path:r("path"),pattern:r("pattern"),polygon:r("polygon"),polyline:r("polyline"),radialGradient:r("radialGradient"),rect:r("rect"),stop:r("stop"),svg:r("svg"),text:r("text"),tspan:r("tspan")};e.exports=i},function(e,t,n){"use strict";var r=n(52).isValidElement,i=n(409);e.exports=i(r)},function(e,t,n){"use strict";var r=n(410);e.exports=function(e){return r(e,!1)}},function(e,t,n){"use strict";var r=n(214),i=n(29),o=n(188),a=n(412),s=Function.call.bind(Object.prototype.hasOwnProperty),l=function(){};function u(){return null}e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c="@@iterator";var f="<<anonymous>>",d={array:g("array"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:m(u),arrayOf:function(e){return m((function(t,n,r,i,a){if("function"!=typeof e)return new h("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new h("Invalid "+i+" `"+a+"` of type `"+y(s)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<s.length;l++){var u=e(s,l,r,i,a+"["+l+"]",o);if(u instanceof Error)return u}return null}))},element:m((function(t,n,r,i,o){var a=t[n];return e(a)?null:new h("Invalid "+i+" `"+o+"` of type `"+y(a)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:m((function(e,t,n,i,o){var a=e[t];return r.isValidElementType(a)?null:new h("Invalid "+i+" `"+o+"` of type `"+y(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return m((function(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||f;return new h("Invalid "+i+" `"+o+"` of type `"+function(e){if(!e.constructor||!e.constructor.name)return f;return e.constructor.name}(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}))},node:m((function(e,t,n,r,i){return b(e[t])?null:new h("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return m((function(t,n,r,i,a){if("function"!=typeof e)return new h("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],u=y(l);if("object"!==u)return new h("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var c in l)if(s(l,c)){var f=e(l,c,r,i,a+"."+c,o);if(f instanceof Error)return f}return null}))},oneOf:function(e){if(!Array.isArray(e))return u;return m((function(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(p(a,e[s]))return null;var l=JSON.stringify(e,(function(e,t){return"symbol"===v(t)?String(t):t}));return new h("Invalid "+i+" `"+o+"` of value `"+String(a)+"` supplied to `"+r+"`, expected one of "+l+".")}))},oneOfType:function(e){if(!Array.isArray(e))return u;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return l("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+x(n)+" at index "+t+"."),u}return m((function(t,n,r,i,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,i,a,o))return null}return new h("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return m((function(t,n,r,i,a){var s=t[n],l=y(s);if("object"!==l)return new h("Invalid "+i+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var c=e[u];if(c){var f=c(s,u,r,i,a+"."+u,o);if(f)return f}}return null}))},exact:function(e){return m((function(t,n,r,a,s){var l=t[n],u=y(l);if("object"!==u)return new h("Invalid "+a+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var c=i({},t[n],e);for(var f in c){var d=e[f];if(!d)return new h("Invalid "+a+" `"+s+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=d(l,f,r,a,s+"."+f,o);if(p)return p}return null}))}};function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){this.message=e,this.stack=""}function m(e){function n(n,r,i,a,s,l,u){if((a=a||f,l=l||i,u!==o)&&t){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}return null==r[i]?n?null===r[i]?new h("The "+s+" `"+l+"` is marked as required in `"+a+"`, but its value is `null`."):new h("The "+s+" `"+l+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:e(r,i,a,s,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function g(e){return m((function(t,n,r,i,o,a){var s=t[n];return y(s)!==e?new h("Invalid "+i+" `"+o+"` of type `"+v(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function b(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(b);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[c]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!b(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!b(a[1]))return!1}return!0;default:return!1}}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return h.prototype=Error.prototype,d.checkPropTypes=a,d.resetWarningCache=a.resetWarningCache,d.PropTypes=d,d}},function(e,t,n){"use strict";
/** @license React v16.11.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case d:case a:case l:case s:case h:return e;default:switch(e=e&&e.$$typeof){case c:case p:case u:return e;default:return t}}case b:case g:case o:return t}}}function w(e){return _(e)===d}t.typeOf=_,t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=b,t.Memo=g,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===l||e===s||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p||e.$$typeof===y||e.$$typeof===v||e.$$typeof===x)},t.isAsyncMode=function(e){return w(e)||_(e)===f},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===p},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===b},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===l},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===h}},function(e,t,n){"use strict";function r(e,t,n,r,i){}r.resetWarningCache=function(){0},e.exports=r},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var r=n(208).Component,i=n(52).isValidElement,o=n(209),a=n(415);e.exports=a(r,i,o)},function(e,t,n){"use strict";var r=n(29),i=n(416),o=n(417),a="mixins";e.exports=function(e,t,n){var s=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},u={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)d(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=h(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){if(o(!(n in c),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in e){var i=u.hasOwnProperty(n)?u[n]:null;return o("DEFINE_MANY_MERGED"===i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=h(e[n],r))}e[n]=r}}}(e,t)},autobind:function(){}};function f(e,t){var n=l.hasOwnProperty(t)?l[t]:null;v.hasOwnProperty(t)&&o("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&o("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function d(e,n){if(n){o("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;for(var s in n.hasOwnProperty(a)&&c.mixins(e,n.mixins),n)if(n.hasOwnProperty(s)&&s!==a){var u=n[s],d=r.hasOwnProperty(s);if(f(d,s),c.hasOwnProperty(s))c[s](e,u);else{var p=l.hasOwnProperty(s);if("function"==typeof u&&!p&&!d&&!1!==n.autobind)i.push(s,u),r[s]=u;else if(d){var g=l[s];o(p&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?r[s]=h(r[s],u):"DEFINE_MANY"===g&&(r[s]=m(r[s],u))}else r[s]=u}}}else;}function p(e,t){for(var n in o(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(o(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function h(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return p(i,n),p(i,r),i}}function m(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function g(e,t){return t.bind(e)}var b={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},v={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},x=function(){};return r(x.prototype,e.prototype,v),function(e){var t=function(e,r,a){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=g(e,i)}}(this),this.props=e,this.context=r,this.refs=i,this.updater=a||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;o("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s};for(var r in t.prototype=new x,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(d.bind(null,t)),d(t,b),d(t,e),d(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),o(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),l)t.prototype[r]||(t.prototype[r]=null);return t}}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,i,o,a,s,l){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,a,s,l],f=0;(u=new Error(t.replace(/%s/g,(function(){return c[f++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";var r=n(82),i=n(52);n(83);e.exports=function(e){return i.isValidElement(e)||r("143"),e}},function(e,t,n){"use strict";var r=n(420),i=n(422),o=n(426),a=n(437),s=n(440),l=n(443).Parser,u=n(132).DomHandler,c=n(227),f=n(230),d=n(229);e.exports=function(e){function t(t,n,c,f){var p=function(t){(e=e||{}).decodeEntities=!0;var n=new u;return new l(n,e).parseComplete(t),n.dom.filter((function(e){return"directive"!==e.type}))}(t).map((function(e,t){return function e(t,n,l,u,c){if(n(t)){r((function(e){e.shouldPreprocessNode(t)&&e.preprocessNode(t,c)}),u||[]);var f=i((function(e){return e.shouldProcessNode(t)}),l||[]);if(null!=f){var p=o((function(e){return null==e||!1===e}),a(s)((function(t,r){return e(t,n,l,u,r)}),t.children||[]));return f.replaceChildren?d.createElement(t,c,t.data,[f.processNode(t,p,c)]):f.processNode(t,p,c)}return!1}return!1}(e,n,c,f,t)}));return p.length<=1?p[0]:p}return{parse:function(e){var n=new c;return t(e,f.alwaysValid,n.defaultProcessingInstructions)},parseWithInstructions:t}}},function(e,t,n){var r=n(421),i=n(22)(r("forEach",(function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t})));e.exports=i},function(e,t,n){var r=n(126);e.exports=function(e,t){return function(){var n=arguments.length;if(0===n)return t();var i=arguments[n-1];return r(i)||"function"!=typeof i[e]?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}},function(e,t,n){var r=n(22)(n(127)(["find"],n(424),(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}})));e.exports=r},function(e,t){e.exports=function(e){return null!=e&&"function"==typeof e["@@transducer/step"]}},function(e,t,n){var r=n(22),i=n(425),o=n(128),a=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=o.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=i(this.xf["@@transducer/step"](e,t))),e},e}(),s=r((function(e,t){return new a(e,t)}));e.exports=s},function(e,t){e.exports=function(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}},function(e,t,n){var r=n(427),i=n(22),o=n(428),a=i((function(e,t){return o(r(e),t)}));e.exports=a},function(e,t){e.exports=function(e){return function(){return!e.apply(this,arguments)}}},function(e,t,n){var r=n(22),i=n(127),o=n(429),a=n(430),s=n(129),l=n(435),u=n(216),c=r(i(["filter"],l,(function(e,t){return a(t)?s((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{},u(t)):o(e,t)})));e.exports=c},function(e,t){e.exports=function(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}},function(e,t){e.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(38),i=n(126),o=n(432),a=r((function(e){return!!i(e)||!!e&&("object"==typeof e&&(!o(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}));e.exports=a},function(e,t){e.exports=function(e){return"[object String]"===Object.prototype.toString.call(e)}},function(e,t){var n=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();e.exports=function(e){return new n(e)}},function(e,t,n){var r=n(130),i=n(22)((function(e,t){return r(e.length,(function(){return e.apply(t,arguments)}))}));e.exports=i},function(e,t,n){var r=n(22),i=n(128),o=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=i.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),a=r((function(e,t){return new o(e,t)}));e.exports=a},function(e,t,n){var r=n(131),i=Object.prototype.toString,o=function(){return"[object Arguments]"===i.call(arguments)?function(e){return"[object Arguments]"===i.call(e)}:function(e){return r("callee",e)}}();e.exports=o},function(e,t,n){var r=n(438),i=n(38),o=n(217),a=i((function(e){return o(e.length,(function(){var t=0,n=arguments[0],i=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var e=n.apply(this,r(arguments,[t,i]));return t+=1,e},e.apply(this,o)}))}));e.exports=a},function(e,t){e.exports=function(e,t){var n;t=t||[];var r=(e=e||[]).length,i=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<i;)o[o.length]=t[n],n+=1;return o}},function(e,t,n){var r=n(130),i=n(84);e.exports=function e(t,n,o){return function(){for(var a=[],s=0,l=t,u=0;u<n.length||s<arguments.length;){var c;u<n.length&&(!i(n[u])||s>=arguments.length)?c=n[u]:(c=arguments[s],s+=1),a[u]=c,i(c)||(l-=1),u+=1}return l<=0?o.apply(this,a):r(l,e(t,a,o))}}},function(e,t,n){var r=n(22),i=n(127),o=n(441),a=n(129),s=n(442),l=n(217),u=n(216),c=r(i(["fantasy-land/map","map"],s,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return l(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return a((function(n,r){return n[r]=e(t[r]),n}),{},u(t));default:return o(e,t)}})));e.exports=c},function(e,t){e.exports=function(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}},function(e,t,n){var r=n(22),i=n(128),o=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=i.init,e.prototype["@@transducer/result"]=i.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),a=r((function(e,t){return new o(e,t)}));e.exports=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(218);t.Parser=o.Parser;var a=n(132);t.DomHandler=a.DomHandler,t.DefaultHandler=a.DomHandler,t.parseDOM=function(e,t){var n=new a.DomHandler(void 0,t);return new o.Parser(n,t).end(e),n.dom},t.createDomStream=function(e,t,n){var r=new a.DomHandler(e,t,n);return new o.Parser(r,t)};var s=n(219);t.Tokenizer=s.default;var l=i(n(133));t.ElementType=l,t.EVENTS={attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0},r(n(220)),r(n(462)),r(n(463));var u=i(n(221));t.DomUtils=u;var c=n(220);t.RssHandler=c.FeedHandler},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(445));t.default=function(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in i.default&&(e=i.default[e]);var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,c=m(l,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=new Map([["tag",1],["script",1],["style",1],["directive",1],["text",3],["cdata",4],["comment",8]]),a=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return o.get(this.type)||1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent||null},set:function(e){this.parent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev||null},set:function(e){this.prev=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next||null},set:function(e){this.next=e},enumerable:!0,configurable:!0}),e}();t.Node=a;var s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return i(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!0,configurable:!0}),t}(a);t.DataNode=s;var l=function(e){function t(t,n){var r=e.call(this,"directive",n)||this;return r.name=t,r}return i(t,e),t}(s);t.ProcessingInstruction=l;var u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.children=n,r}return i(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!0,configurable:!0}),t}(a);t.NodeWithChildren=u;var c=function(e){function t(t,n){var r=e.call(this,"script"===t?"script":"style"===t?"style":"tag",[])||this;return r.name=t,r.attribs=n,r.attribs=n,r}return i(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!0,configurable:!0}),t}(u);t.Element=c},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(68),o=r(n(452));t.getOuterHTML=o.default,t.getInnerHTML=function(e,n){return i.hasChildren(e)?e.children.map((function(e){return t.getOuterHTML(e,n)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):i.isTag(t)?"br"===t.name?"\n":e(t.children):i.isCDATA(t)?e(t.children):i.isText(t)?t.data:""}},function(e,t,n){var r=n(133),i=n(453),o=n(457);o.elementNames.__proto__=null,o.attributeNames.__proto__=null;var a={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0};var s={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},l=e.exports=function(e,t){Array.isArray(e)||e.cheerio||(e=[e]),t=t||{};for(var n="",i=0;i<e.length;i++){var o=e[i];"root"===o.type?n+=l(o.children,t):r.isTag(o)?n+=c(o,t):o.type===r.Directive?n+=f(o):o.type===r.Comment?n+=h(o):o.type===r.CDATA?n+=p(o):n+=d(o,t)}return n};const u=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function c(e,t){"foreign"===t.xmlMode&&(e.name=o.elementNames[e.name]||e.name,e.parent&&u.indexOf(e.parent.name)>=0&&(t=Object.assign({},t,{xmlMode:!1}))),!t.xmlMode&&["svg","math"].indexOf(e.name)>=0&&(t=Object.assign({},t,{xmlMode:"foreign"}));var n="<"+e.name,r=function(e,t){if(e){var n,r="";for(var a in e)n=e[a],r&&(r+=" "),"foreign"===t.xmlMode&&(a=o.attributeNames[a]||a),r+=a,(null!==n&&""!==n||t.xmlMode)&&(r+='="'+(t.decodeEntities?i.encodeXML(n):n.replace(/\"/g,"&quot;"))+'"');return r}}(e.attribs,t);return r&&(n+=" "+r),!t.xmlMode||e.children&&0!==e.children.length?(n+=">",e.children&&(n+=l(e.children,t)),s[e.name]&&!t.xmlMode||(n+="</"+e.name+">")):n+="/>",n}function f(e){return"<"+e.data+">"}function d(e,t){var n=e.data||"";return!t.decodeEntities||e.parent&&e.parent.name in a||(n=i.encodeXML(n)),n}function p(e){return"<![CDATA["+e.children[0].data+"]]>"}function h(e){return"\x3c!--"+e.data+"--\x3e"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(222),i=n(225);t.decode=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?i.encodeXML:i.encodeHTML)(e)};var o=n(225);t.encodeXML=o.encodeXML,t.encodeHTML=o.encodeHTML,t.escape=o.escape,t.encodeHTML4=o.encodeHTML,t.encodeHTML5=o.encodeHTML;var a=n(222);t.decodeXML=a.decodeXML,t.decodeHTML=a.decodeHTML,t.decodeHTMLStrict=a.decodeHTMLStrict,t.decodeHTML4=a.decodeHTML,t.decodeHTML5=a.decodeHTML,t.decodeHTML4Strict=a.decodeHTMLStrict,t.decodeHTML5Strict=a.decodeHTMLStrict,t.decodeXMLStrict=a.decodeXML},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(456));t.default=function(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in i.default&&(e=i.default[e]);var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e){e.exports=JSON.parse('{"elementNames":{"altglyph":"altGlyph","altglyphdef":"altGlyphDef","altglyphitem":"altGlyphItem","animatecolor":"animateColor","animatemotion":"animateMotion","animatetransform":"animateTransform","clippath":"clipPath","feblend":"feBlend","fecolormatrix":"feColorMatrix","fecomponenttransfer":"feComponentTransfer","fecomposite":"feComposite","feconvolvematrix":"feConvolveMatrix","fediffuselighting":"feDiffuseLighting","fedisplacementmap":"feDisplacementMap","fedistantlight":"feDistantLight","fedropshadow":"feDropShadow","feflood":"feFlood","fefunca":"feFuncA","fefuncb":"feFuncB","fefuncg":"feFuncG","fefuncr":"feFuncR","fegaussianblur":"feGaussianBlur","feimage":"feImage","femerge":"feMerge","femergenode":"feMergeNode","femorphology":"feMorphology","feoffset":"feOffset","fepointlight":"fePointLight","fespecularlighting":"feSpecularLighting","fespotlight":"feSpotLight","fetile":"feTile","feturbulence":"feTurbulence","foreignobject":"foreignObject","glyphref":"glyphRef","lineargradient":"linearGradient","radialgradient":"radialGradient","textpath":"textPath"},"attributeNames":{"definitionurl":"definitionURL","attributename":"attributeName","attributetype":"attributeType","basefrequency":"baseFrequency","baseprofile":"baseProfile","calcmode":"calcMode","clippathunits":"clipPathUnits","diffuseconstant":"diffuseConstant","edgemode":"edgeMode","filterunits":"filterUnits","glyphref":"glyphRef","gradienttransform":"gradientTransform","gradientunits":"gradientUnits","kernelmatrix":"kernelMatrix","kernelunitlength":"kernelUnitLength","keypoints":"keyPoints","keysplines":"keySplines","keytimes":"keyTimes","lengthadjust":"lengthAdjust","limitingconeangle":"limitingConeAngle","markerheight":"markerHeight","markerunits":"markerUnits","markerwidth":"markerWidth","maskcontentunits":"maskContentUnits","maskunits":"maskUnits","numoctaves":"numOctaves","pathlength":"pathLength","patterncontentunits":"patternContentUnits","patterntransform":"patternTransform","patternunits":"patternUnits","pointsatx":"pointsAtX","pointsaty":"pointsAtY","pointsatz":"pointsAtZ","preservealpha":"preserveAlpha","preserveaspectratio":"preserveAspectRatio","primitiveunits":"primitiveUnits","refx":"refX","refy":"refY","repeatcount":"repeatCount","repeatdur":"repeatDur","requiredextensions":"requiredExtensions","requiredfeatures":"requiredFeatures","specularconstant":"specularConstant","specularexponent":"specularExponent","spreadmethod":"spreadMethod","startoffset":"startOffset","stddeviation":"stdDeviation","stitchtiles":"stitchTiles","surfacescale":"surfaceScale","systemlanguage":"systemLanguage","tablevalues":"tableValues","targetx":"targetX","targety":"targetY","textlength":"textLength","viewbox":"viewBox","viewtarget":"viewTarget","xchannelselector":"xChannelSelector","ychannelselector":"yChannelSelector","zoomandpan":"zoomAndPan"}}')},function(e,t,n){"use strict";function r(e){return e.children||null}function i(e){return e.parent||null}function o(e,t){return e.attribs&&e.attribs[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getChildren=r,t.getParent=i,t.getSiblings=function(e){var t=i(e);return t?r(t):[e]},t.getAttributeValue=o,t.hasAttrib=function(e,t){return!!o(e,t)},t.getName=function(e){return e.name}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeElement=function(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}},t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(t.parent=e,1!==e.children.push(t)){var n=e.children[e.children.length-2];n.next=t,t.prev=n,t.next=null}},t.append=function(e,t){var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},t.prepend=function(e,t){var n=e.parent;if(n){var r=n.children;r.splice(r.lastIndexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(226),i=n(68);function o(e){return"text"===e.type}var a={tag_name:function(e){return"function"==typeof e?function(t){return i.isTag(t)&&e(t.name)}:"*"===e?i.isTag:function(t){return i.isTag(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return o(t)&&e(t.data)}:function(t){return o(t)&&t.data===e}}};function s(e,t){return"function"==typeof t?function(n){return i.isTag(n)&&t(n.attribs[e])}:function(n){return i.isTag(n)&&n.attribs[e]===t}}function l(e,t){return function(n){return e(n)||t(n)}}function u(e){var t=Object.keys(e).map((function(t){var n=e[t];return t in a?a[t](n):s(t,n)}));return 0===t.length?null:t.reduce(l)}t.testElement=function(e,t){var n=u(e);return!n||n(t)},t.getElements=function(e,t,n,i){void 0===i&&(i=1/0);var o=u(e);return o?r.filter(o,t,n,i):[]},t.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),r.findOne(s("id",e),t,n)},t.getElementsByTagName=function(e,t,n,i){return void 0===i&&(i=1/0),r.filter(a.tag_name(e),t,n,i)},t.getElementsByTagType=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),r.filter(a.tag_type(e),t,n,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68);function i(e,t){var n=[],i=[];if(e===t)return 0;for(var o=r.hasChildren(e)?e:e.parent;o;)n.unshift(o),o=o.parent;for(o=r.hasChildren(t)?t:t.parent;o;)i.unshift(o),o=o.parent;for(var a=0;n[a]===i[a];)a++;if(0===a)return 1;var s=n[a-1],l=s.children,u=n[a],c=i[a];return l.indexOf(u)>l.indexOf(c)?s===t?20:4:s===e?10:2}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.indexOf(r)>-1){e.splice(t,1);break}}return e},t.compareDocumentPosition=i,t.uniqueSort=function(e){return(e=e.filter((function(e,t,n){return!n.includes(e,t+1)}))).sort((function(e,t){var n=i(e,t);return 2&n?-1:4&n?1:0})),e}},function(e,t){},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,(function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];n.events.push([e].concat(r)),n._cbs[e]&&(t=n._cbs)[e].apply(t,r)}))||this;return n._cbs=t,n.events=[],n}return i(t,e),t.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},t.prototype.restart=function(){var e;this._cbs.onreset&&this._cbs.onreset();for(var t=0;t<this.events.length;t++){var n=this.events[t],r=n[0],i=n.slice(1);this._cbs[r]&&(e=this._cbs)[r].apply(e,i)}},t}(o(n(464)).default);t.CollectingHandler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._func=e}return e.prototype.onattribute=function(e,t){this._func("onattribute",e,t)},e.prototype.oncdatastart=function(){this._func("oncdatastart")},e.prototype.oncdataend=function(){this._func("oncdataend")},e.prototype.ontext=function(e){this._func("ontext",e)},e.prototype.onprocessinginstruction=function(e,t){this._func("onprocessinginstruction",e,t)},e.prototype.oncomment=function(e){this._func("oncomment",e)},e.prototype.oncommentend=function(){this._func("oncommentend")},e.prototype.onclosetag=function(e){this._func("onclosetag",e)},e.prototype.onopentag=function(e,t){this._func("onopentag",e,t)},e.prototype.onopentagname=function(e){this._func("onopentagname",e)},e.prototype.onerror=function(e){this._func("onerror",e)},e.prototype.onend=function(){this._func("onend")},e.prototype.onparserinit=function(e){this._func("onparserinit",e)},e.prototype.onreset=function(){this._func("onreset")},e}();t.default=r},function(e,t,n){"use strict";e.exports={shouldProcessEveryNode:function(e){return!0}}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="[\\ud800-\\udfff]",l="["+a+"]",u="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",c="\\d+",f="[\\u2700-\\u27bf]",d="[a-z\\xdf-\\xf6\\xf8-\\xff]",p="[^\\ud800-\\udfff"+a+c+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",h="\\ud83c[\\udffb-\\udfff]",m="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",y="[A-Z\\xc0-\\xd6\\xd8-\\xde]",v="(?:"+d+"|"+p+")",x="(?:"+y+"|"+p+")",_="(?:"+u+"|"+h+")"+"?",w="[\\ufe0e\\ufe0f]?"+_+("(?:\\u200d(?:"+[m,g,b].join("|")+")[\\ufe0e\\ufe0f]?"+_+")*"),O="(?:"+[f,g,b].join("|")+")"+w,E="(?:"+[m+u+"?",u,g,b,s].join("|")+")",k=RegExp("['’]","g"),S=RegExp(u,"g"),T=RegExp(h+"(?="+h+")|"+E+w,"g"),j=RegExp([y+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[l,y,"$"].join("|")+")",x+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[l,y+v,"$"].join("|")+")",y+"?"+v+"+(?:['’](?:d|ll|m|re|s|t|ve))?",y+"+(?:['’](?:D|LL|M|RE|S|T|VE))?",c,O].join("|"),"g"),A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),P=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,C="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,M=C||N||Function("return this")();var I,D=(I={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(e){return null==I?void 0:I[e]});function R(e){return A.test(e)}function z(e){return R(e)?function(e){return e.match(T)||[]}(e):function(e){return e.split("")}(e)}var L=Object.prototype.toString,F=M.Symbol,B=F?F.prototype:void 0,U=B?B.toString:void 0;function q(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&L.call(e)==r}(e))return U?U.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}function $(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}function H(e){return null==e?"":q(e)}var W,V=(W=function(e,t,n){return t=t.toLowerCase(),e+(n?Y(H(t).toLowerCase()):t)},function(e){return function(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}(function(e,t,n){return e=H(e),void 0===(t=n?void 0:t)?function(e){return P.test(e)}(e)?function(e){return e.match(j)||[]}(e):function(e){return e.match(i)||[]}(e):e.match(t)||[]}(function(e){return(e=H(e))&&e.replace(o,D).replace(S,"")}(e).replace(k,"")),W,"")});var G,Y=(G="toUpperCase",function(e){var t=R(e=H(e))?z(e):void 0,n=t?t[0]:e.charAt(0),r=t?$(t,1).join(""):e.slice(1);return n[G]()+r});e.exports=V}).call(this,n(33))},function(e,t,n){var r=n(38),i=n(131),o=r((function(e){var t=[];for(var n in e)i(n,e)&&(t[t.length]=[n,e[n]]);return t}));e.exports=o},function(e,t,n){var r=n(469)(n(129));e.exports=r},function(e,t,n){var r=n(38),i=n(22),o=n(84);e.exports=function(e){return function t(n,a,s){switch(arguments.length){case 0:return t;case 1:return o(n)?t:i((function(t,r){return e(n,t,r)}));case 2:return o(n)&&o(a)?t:o(n)?i((function(t,n){return e(t,a,n)})):o(a)?i((function(t,r){return e(n,t,r)})):r((function(t){return e(n,a,t)}));default:return o(n)&&o(a)&&o(s)?t:o(n)&&o(a)?i((function(t,n){return e(t,n,s)})):o(n)&&o(s)?i((function(t,n){return e(t,a,n)})):o(a)&&o(s)?i((function(t,r){return e(n,t,r)})):o(n)?r((function(t){return e(t,a,s)})):o(a)?r((function(t){return e(n,t,s)})):o(s)?r((function(t){return e(n,a,t)})):e(n,a,s)}}}},function(e,t,n){"use strict";var r=["accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","capture","cellPadding","cellSpacing","challenge","charSet","checked","cite","classID","className","colSpan","cols","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","encType","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","height","hidden","high","href","hrefLang","htmlFor","httpEquiv","icon","id","inputMode","integrity","is","keyParams","keyType","kind","label","lang","list","loop","low","manifest","marginHeight","marginWidth","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","nonce","open","optimum","pattern","placeholder","poster","preload","profile","radioGroup","readOnly","rel","required","reversed","role","rowSpan","rows","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcLang","srcSet","start","step","style","summary","tabIndex","target","title","type","useMap","value","width","wmode","wrap","onClick"].concat(["autoCapitalize","autoCorrect","color","itemProp","itemScope","itemType","itemRef","itemID","security","unselectable","results","autoSave"]).concat(["accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseProfile","baselineShift","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","ideographic","imageRendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","viewBox","viewTarget","visibility","widths","wordSpacing","writingMode","x","x1","x2","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlns","xmlnsXlink","xmlBase","xmlLang","xmlSpace","y","y1","y2","yChannelSelector","z","zoomAndPan"]).reduce((function(e,t){var n=t.toLowerCase();return n!==t&&(e[n]=t),e}),{});e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(472)),i=p(n(112)),o=p(n(196)),a=p(n(198)),s=p(n(199)),l=p(n(200)),u=p(n(206)),c=n(207),f=p(c),d=p(n(1));function p(e){return e&&e.__esModule?e:{default:e}}var h=n(67),m=new(0,n(215).Parser),g=function(e){function t(e){(0,a.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),s={retrieveLocale:function(){return n.props.locale},retrieveItem:function(e){return n.props.items[e]},variableWrapper:function(e,t,n,r){return"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?t+'<a href="'+e.itemData.URL+'" target="blank">'+n+"</a>"+r:"URL"===e.variableNames[0]?t+'<a href="'+n+'" target="blank">'+n+"</a>"+r:t+n+r}};n.makeReactBibliography=function(e,t){e.updateItems((0,i.default)(t));var n=e.makeBibliography()[1].join("\n");return m.parse(n)},n.makeReactCitations=function(e,t){return t.reduce((function(t,n){var i=(0,r.default)({},t),o=n[0],a=n[1],s=n[2],l=e.processCitationCluster(o,a,s);return(l=l[1]).forEach((function(e){var t=e[0],n=e[1],r=m.parse(e[1]),o=e[2];i[o]={order:t,html:n,Component:r}})),i}),{})};var u=new h.Engine(s,e.style);return n.state={sys:s,bibliography:e.items&&e.style&&e.locale?n.makeReactBibliography(u,e.items):void 0,citations:e.citations&&e.style&&e.locale?n.makeReactCitations(u,e.citations):void 0,citationStyle:e.citations&&e.style,citationLocale:e.citations&&e.locale},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{bibliography:this.state.bibliography,citations:this.state.citations,citationStyle:this.props.style,citationLocale:this.props.locale}}},{key:"componentDidMount",value:function(){if(this.props.locale&&this.props.style){var e=new h.Engine(this.state.sys,this.props.style);this.setState({processor:e,citations:this.props.citations&&this.props.citations.length?this.makeReactCitations(e,this.props.citations):void 0,bibliography:this.props.items&&this.props.items.length?this.makeReactBibliography(e,this.props.items):void 0})}}},{key:"componentWillReceiveProps",value:function(e){if(!this.state.processor&&this.props.locale&&this.props.style){var t=new h.Engine(this.state.sys,e.style);this.setState({processor:t})}}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.items&&(0,i.default)(this.props.items).length){if((this.state.processor&&this.props.items!==e.items||this.props.citations!==e.citations||!this.state.bibliography)&&this.setState({citations:this.props.citations&&this.makeReactCitations(this.state.processor,this.props.citations),bibliography:this.makeReactBibliography(this.state.processor,this.props.items)}),this.props.locale!==e.locale){var n={retrieveLocale:function(){return t.props.locale},retrieveItem:function(e){return t.props.items[e]},variableWrapper:function(e,t,n,r){return"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?t+'<a href="'+e.itemData.URL+'" target="blank">'+n+"</a>"+r:"URL"===e.variableNames[0]?t+'<a href="'+n+'" target="blank">'+n+"</a>"+r:t+n+r}},r=new h.Engine(n,this.props.style);this.setState({processor:r,citations:this.props.citations&&this.makeReactCitations(r,this.props.citations),bibliography:this.makeReactBibliography(r,this.props.items),sys:n})}if(this.props.style!==e.style){var o=new h.Engine(this.state.sys,this.props.style);this.setState({processor:o,citations:this.props.citations&&this.makeReactCitations(o,this.props.citations),bibliography:this.makeReactBibliography(o,this.props.items)})}}}},{key:"render",value:function(){var e=this.props,t=e.componentClass,n=e.children;return f.default.createElement("div",{className:t},n)}}]),t}(c.Component);g.propTypes={componentClass:d.default.string,style:d.default.string,locale:d.default.string,items:d.default.object,citations:d.default.array},g.childContextTypes={bibliography:d.default.array,citations:d.default.object,citationLocale:d.default.string,citationStyle:d.default.string},t.default=g,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(473),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){e.exports={default:n(474),__esModule:!0}},function(e,t,n){n(475),e.exports=n(21).Object.assign},function(e,t,n){var r=n(36);r(r.S+r.F,"Object",{assign:n(476)})},function(e,t,n){"use strict";var r=n(32),i=n(65),o=n(124),a=n(81),s=n(64),l=n(190),u=Object.assign;e.exports=!u||n(50)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,c=1,f=o.f,d=a.f;u>c;)for(var p,h=l(arguments[c++]),m=f?i(h).concat(f(h)):i(h),g=m.length,b=0;g>b;)p=m[b++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(112),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t||!n)return;var i={retrieveLocale:function(){return n},retrieveItem:function(t){return e[t]},variableWrapper:function(e,t,n,r){return"title"===e.variableNames[0]&&e.itemData.URL&&"bibliography"===e.context?t+'<a href="'+e.itemData.URL+'" target="blank">'+n+"</a>"+r:"URL"===e.variableNames[0]?t+'<a href="'+n+'" target="blank">'+n+"</a>"+r:t+n+r}},s=new a.Engine(i,t);return s.updateItems((0,o.default)(e)),s.makeBibliography(r)};var a=n(67);e.exports=t.default},function(e,t){e.exports={draftEntitiesNames:{LINK:"LINK",BLOCK_ASSET:"BLOCK_ASSET",INLINE_ASSET:"INLINE_ASSET",SECTION_POINTER:"SECTION_POINTER"}}},function(e){e.exports=JSON.parse('{"id":"production","title":"Production","description":"Peritext basic document","$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"type":{"type":"string","enum":["production"],"default":"production","editable":false},"schemaVersion":{"type":"string","default":"0.2.2"},"id":{"type":"string","description":"id of the production (uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"metadata":{"$ref":"#/definitions/metadata","description":"metadata describing the production"},"assets":{"type":"object","description":"map of assets used in the production","patternProperties":{"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}":{"$ref":"#/definitions/asset"}},"default":{}},"editions":{"type":"object","description":"map of editions used in the production","patternProperties":{"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}":{"$ref":"#/definitions/edition"}},"default":{}},"sectionsOrder":{"type":"array","items":{"type":"object","properties":{"resourceId":{"type":"string"},"level":{"type":"number"}}},"default":[],"description":"default order of the sections to display in the production"},"resources":{"type":"object","description":"map of resources used by the production","default":{},"patternProperties":{"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}":{"description":"content of the resource","$ref":"#/definitions/resource"}}},"contextualizers":{"type":"object","description":"map of contextualizers used by the production","default":{},"patternProperties":{"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}":{"description":"content of the contextualizer","$ref":"#/definitions/contextualizer"}}},"contextualizations":{"type":"object","description":"map of contextualizations used by the production","default":{},"patternProperties":{"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}":{"description":"content of the contextualization","$ref":"#/definitions/contextualization"}}},"settings":{"type":"object","description":"settings of the production","default":{"citationStyle":{"title":"American Psychological Association 5th edition","idUrl":"http://www.zotero.org/styles/apa-5th-edition","id":"apa-5th-edition","fileName":"apa-5th-edition.csl","data":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"sort-only\\"> <info> <title>American Psychological Association 5th edition</title> <title-short>APA</title-short> <id>http://www.zotero.org/styles/apa-5th-edition</id> <link href=\\"http://www.zotero.org/styles/apa-5th-edition\\" rel=\\"self\\"/> <link href=\\"http://rdc.libguides.com/content.php?pid=63487\\" rel=\\"documentation\\"/> <author> <name>Simon Kornblith</name> <email>simon@simonster.com</email> </author> <contributor> <name>Bruce D\'Arcus</name> </contributor> <contributor> <name>Curtis M. Humphrey</name> </contributor> <contributor> <name>Richard Karnesky</name> <email>karnesky+zotero@gmail.com</email> <uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri> </contributor> <contributor> <name>Sebastian Karcher</name> </contributor> <category citation-format=\\"author-date\\"/> <category field=\\"psychology\\"/> <category field=\\"generic-base\\"/> <updated>2012-09-27T22:06:38+00:00</updated> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> </info> <macro name=\\"container-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"any\\"> <text term=\\"in\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <names variable=\\"editor\\" delimiter=\\", \\" suffix=\\", \\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\" (\\" text-case=\\"capitalize-first\\" suffix=\\")\\"/> <substitute> <names variable=\\"translator\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"secondary-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"none\\"> <names variable=\\"translator\\" delimiter=\\", \\" prefix=\\" (\\" suffix=\\")\\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\", \\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"author\\"> <names variable=\\"author\\"> <name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/> <label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <text macro=\\"title\\"/> </substitute> </names> </macro> <macro name=\\"author-short\\"> <names variable=\\"author\\"> <name form=\\"short\\" and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <choose> <if type=\\"bill book graphic legal_case legislation motion_picture report song\\" match=\\"any\\"> <text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\"/> </if> <else> <text variable=\\"title\\" form=\\"short\\" quotes=\\"true\\"/> </else> </choose> </substitute> </names> </macro> <macro name=\\"access\\"> <choose> <if type=\\"thesis\\"> <choose> <if variable=\\"archive\\" match=\\"any\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> <text variable=\\"archive_location\\" prefix=\\" (\\" suffix=\\")\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </else> </choose> </if> <else> <choose> <if variable=\\"URL\\"> <choose> <if variable=\\"archive\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <group> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </group> </else> </choose> </if> </choose> </else> </choose> </macro> <macro name=\\"title\\"> <choose> <if type=\\"report thesis\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> <group prefix=\\" (\\" suffix=\\")\\"> <text variable=\\"genre\\"/> <text variable=\\"number\\" prefix=\\" No. \\"/> </group> </if> <else-if type=\\"bill book graphic legal_case legislation manuscript motion_picture report song speech\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> </else-if> <else> <text variable=\\"title\\"/> </else> </choose> </macro> <macro name=\\"publisher\\"> <choose> <if type=\\"report\\" match=\\"any\\"> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </if> <else-if type=\\"thesis\\" match=\\"any\\"> <group delimiter=\\", \\"> <text variable=\\"publisher\\"/> <text variable=\\"publisher-place\\"/> </group> </else-if> <else> <choose> <if variable=\\"event\\" match=\\"none\\"> <text variable=\\"genre\\" suffix=\\", \\"/> </if> </choose> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </else> </choose> </macro> <macro name=\\"event\\"> <choose> <if variable=\\"event\\"> <choose> <if variable=\\"genre\\" match=\\"none\\"> <text term=\\"presented at\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text variable=\\"event\\"/> </if> <else> <group delimiter=\\" \\"> <text variable=\\"genre\\" text-case=\\"capitalize-first\\"/> <text term=\\"presented at\\"/> <text variable=\\"event\\"/> </group> </else> </choose> </if> </choose> </macro> <macro name=\\"issued\\"> <choose> <if variable=\\"issued\\"> <group prefix=\\" (\\" suffix=\\").\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> <choose> <if type=\\"article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"none\\"> <date variable=\\"issued\\"> <date-part prefix=\\", \\" name=\\"month\\"/> <date-part prefix=\\" \\" name=\\"day\\"/> </date> </if> </choose> </group> </if> <else> <text prefix=\\" (\\" term=\\"no date\\" suffix=\\").\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"issued-year\\"> <choose> <if variable=\\"issued\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> </if> <else> <text term=\\"no date\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"edition\\"> <choose> <if is-numeric=\\"edition\\"> <group delimiter=\\" \\"> <number variable=\\"edition\\" form=\\"ordinal\\"/> <text term=\\"edition\\" form=\\"short\\"/> </group> </if> <else> <text variable=\\"edition\\" suffix=\\".\\"/> </else> </choose> </macro> <macro name=\\"locators\\"> <choose> <if type=\\"article-journal article-magazine article-newspaper\\" match=\\"any\\"> <group prefix=\\", \\" delimiter=\\", \\"> <group> <text variable=\\"volume\\" font-style=\\"italic\\"/> <text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/> </group> <text variable=\\"page\\"/> </group> </if> <else-if type=\\"bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"any\\"> <group prefix=\\" (\\" suffix=\\")\\" delimiter=\\", \\"> <text macro=\\"edition\\"/> <group> <text term=\\"volume\\" form=\\"short\\" plural=\\"true\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"number-of-volumes\\" form=\\"numeric\\" prefix=\\"1-\\"/> </group> <group> <text term=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"volume\\" form=\\"numeric\\"/> </group> <group> <label variable=\\"page\\" form=\\"short\\" suffix=\\" \\"/> <text variable=\\"page\\"/> </group> </group> </else-if> </choose> </macro> <macro name=\\"citation-locator\\"> <group> <label variable=\\"locator\\" form=\\"short\\"/> <text variable=\\"locator\\" prefix=\\" \\"/> </group> </macro> <citation et-al-min=\\"6\\" et-al-use-first=\\"1\\" et-al-subsequent-min=\\"3\\" et-al-subsequent-use-first=\\"1\\" disambiguate-add-year-suffix=\\"true\\" disambiguate-add-names=\\"true\\" disambiguate-add-givenname=\\"true\\" givenname-disambiguation-rule=\\"primary-name\\" collapse=\\"year\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\"/> </sort> <layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\"; \\"> <group delimiter=\\", \\"> <text macro=\\"author-short\\"/> <text macro=\\"issued-year\\"/> <text macro=\\"citation-locator\\"/> </group> </layout> </citation> <bibliography hanging-indent=\\"true\\" et-al-min=\\"8\\" et-al-use-first=\\"7\\" entry-spacing=\\"0\\" line-spacing=\\"2\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\" sort=\\"ascending\\"/> </sort> <layout> <group suffix=\\".\\"> <text macro=\\"author\\" suffix=\\".\\"/> <text macro=\\"issued\\" suffix=\\" \\"/> <group delimiter=\\". \\"> <text macro=\\"title\\"/> <group> <text macro=\\"container-contributors\\"/> <text macro=\\"secondary-contributors\\"/> <group delimiter=\\", \\"> <text variable=\\"container-title\\" font-style=\\"italic\\"/> <text variable=\\"collection-title\\"/> </group> </group> </group> <text macro=\\"locators\\"/> <group delimiter=\\", \\" prefix=\\". \\"> <text macro=\\"event\\"/> <text macro=\\"publisher\\"/> </group> </group> <text macro=\\"access\\" prefix=\\". \\"/> </layout> </bibliography> </style>"},"citationLocale":{"id":"fr-FR","names":["Français (France)","French (France)"],"fileName":"locales-fr-FR.xml","data":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"fr-FR\\"> <info> <translator> <name>Grégoire Colly</name> </translator> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> <updated>2012-07-04T23:31:02+00:00</updated> </info> <style-options punctuation-in-quote=\\"false\\" limit-day-ordinals-to-day-1=\\"true\\"/> <date form=\\"text\\"> <date-part name=\\"day\\" suffix=\\" \\"/> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"year\\"/> </date> <date form=\\"numeric\\"> <date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"year\\"/> </date> <terms> <term name=\\"accessed\\">consulté le</term> <term name=\\"and\\">et</term> <term name=\\"and others\\">et autres</term> <term name=\\"anonymous\\">anonyme</term> <term name=\\"anonymous\\" form=\\"short\\">anon.</term> <term name=\\"at\\">sur</term> <term name=\\"available at\\">disponible sur</term> <term name=\\"by\\">par</term> <term name=\\"circa\\">vers</term> <term name=\\"circa\\" form=\\"short\\">v.</term> <term name=\\"cited\\">cité</term> <term name=\\"edition\\" gender=\\"feminine\\"> <single>édition</single> <multiple>éditions</multiple> </term> <term name=\\"edition\\" form=\\"short\\">éd.</term> <term name=\\"et-al\\">et al.</term> <term name=\\"forthcoming\\">à paraître</term> <term name=\\"from\\">à l\'adresse</term> <term name=\\"ibid\\">ibid.</term> <term name=\\"in\\">in</term> <term name=\\"in press\\">sous presse</term> <term name=\\"internet\\">Internet</term> <term name=\\"interview\\">entretien</term> <term name=\\"letter\\">lettre</term> <term name=\\"no date\\">sans date</term> <term name=\\"no date\\" form=\\"short\\">s.&#160;d.</term> <term name=\\"online\\">en ligne</term> <term name=\\"presented at\\">présenté à</term> <term name=\\"reference\\"> <single>référence</single> <multiple>références</multiple> </term> <term name=\\"reference\\" form=\\"short\\"> <single>réf.</single> <multiple>réf.</multiple> </term> <term name=\\"retrieved\\">consulté</term> <term name=\\"scale\\">échelle</term> <term name=\\"version\\">version</term> \x3c!-- ANNO DOMINI; BEFORE CHRIST --\x3e <term name=\\"ad\\">apr. J.-C.</term> <term name=\\"bc\\">av. J.-C.</term> \x3c!-- PUNCTUATION --\x3e <term name=\\"open-quote\\">«&#160;</term> <term name=\\"close-quote\\">&#160;»</term> <term name=\\"open-inner-quote\\">“</term> <term name=\\"close-inner-quote\\">”</term> <term name=\\"page-range-delimiter\\">&#8209;</term> \x3c!-- non-breaking hyphen --\x3e \x3c!-- ORDINALS --\x3e <term name=\\"ordinal\\">ᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"feminine\\" match=\\"whole-number\\">ʳᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"masculine\\" match=\\"whole-number\\">ᵉʳ</term> \x3c!-- LONG ORDINALS --\x3e <term name=\\"long-ordinal-01\\">premier</term> <term name=\\"long-ordinal-02\\">deuxième</term> <term name=\\"long-ordinal-03\\">troisième</term> <term name=\\"long-ordinal-04\\">quatrième</term> <term name=\\"long-ordinal-05\\">cinquième</term> <term name=\\"long-ordinal-06\\">sixième</term> <term name=\\"long-ordinal-07\\">septième</term> <term name=\\"long-ordinal-08\\">huitième</term> <term name=\\"long-ordinal-09\\">neuvième</term> <term name=\\"long-ordinal-10\\">dixième</term> \x3c!-- LONG LOCATOR FORMS --\x3e <term name=\\"book\\"> <single>livre</single> <multiple>livres</multiple> </term> <term name=\\"chapter\\"> <single>chapitre</single> <multiple>chapitres</multiple> </term> <term name=\\"column\\"> <single>colonne</single> <multiple>colonnes</multiple> </term> <term name=\\"figure\\"> <single>figure</single> <multiple>figures</multiple> </term> <term name=\\"folio\\"> <single>folio</single> <multiple>folios</multiple> </term> <term name=\\"issue\\" gender=\\"masculine\\"> <single>numéro</single> <multiple>numéros</multiple> </term> <term name=\\"line\\"> <single>ligne</single> <multiple>lignes</multiple> </term> <term name=\\"note\\"> <single>note</single> <multiple>notes</multiple> </term> <term name=\\"opus\\"> <single>opus</single> <multiple>opus</multiple> </term> <term name=\\"page\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"number-of-pages\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"paragraph\\"> <single>paragraphe</single> <multiple>paragraphes</multiple> </term> <term name=\\"part\\"> <single>partie</single> <multiple>parties</multiple> </term> <term name=\\"section\\"> <single>section</single> <multiple>sections</multiple> </term> <term name=\\"sub verbo\\"> <single>sub verbo</single> <multiple>sub verbis</multiple> </term> <term name=\\"verse\\"> <single>verset</single> <multiple>versets</multiple> </term> <term name=\\"volume\\" gender=\\"masculine\\"> <single>volume</single> <multiple>volumes</multiple> </term> \x3c!-- SHORT LOCATOR FORMS --\x3e <term name=\\"book\\" form=\\"short\\">liv.</term> <term name=\\"chapter\\" form=\\"short\\">chap.</term> <term name=\\"column\\" form=\\"short\\">col.</term> <term name=\\"figure\\" form=\\"short\\">fig.</term> <term name=\\"folio\\" form=\\"short\\"> <single>fᵒ</single> <multiple>fᵒˢ</multiple> </term> <term name=\\"issue\\" form=\\"short\\"> <single>nᵒ</single> <multiple>nᵒˢ</multiple> </term> <term name=\\"line\\" form=\\"short\\">l.</term> <term name=\\"note\\" form=\\"short\\">n.</term> <term name=\\"opus\\" form=\\"short\\">op.</term> <term name=\\"page\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"number-of-pages\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"paragraph\\" form=\\"short\\">paragr.</term> <term name=\\"part\\" form=\\"short\\">part.</term> <term name=\\"section\\" form=\\"short\\">sect.</term> <term name=\\"sub verbo\\" form=\\"short\\"> <single>s.&#160;v.</single> <multiple>s.&#160;vv.</multiple> </term> <term name=\\"verse\\" form=\\"short\\"> <single>v.</single> <multiple>v.</multiple> </term> <term name=\\"volume\\" form=\\"short\\"> <single>vol.</single> <multiple>vol.</multiple> </term> \x3c!-- SYMBOL LOCATOR FORMS --\x3e <term name=\\"paragraph\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> <term name=\\"section\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> \x3c!-- LONG ROLE FORMS --\x3e <term name=\\"director\\"> <single>réalisateur</single> <multiple>réalisateurs</multiple> </term> <term name=\\"editor\\"> <single>éditeur</single> <multiple>éditeurs</multiple> </term> <term name=\\"editorial-director\\"> <single>directeur</single> <multiple>directeurs</multiple> </term> <term name=\\"illustrator\\"> <single>illustrateur</single> <multiple>illustrateurs</multiple> </term> <term name=\\"translator\\"> <single>traducteur</single> <multiple>traducteurs</multiple> </term> <term name=\\"editortranslator\\"> <single>éditeur et traducteur</single> <multiple>éditeurs et traducteurs</multiple> </term> \x3c!-- SHORT ROLE FORMS --\x3e <term name=\\"director\\" form=\\"short\\"> <single>réal.</single> <multiple>réal.</multiple> </term> <term name=\\"editor\\" form=\\"short\\"> <single>éd.</single> <multiple>éd.</multiple> </term> <term name=\\"editorial-director\\" form=\\"short\\"> <single>dir.</single> <multiple>dir.</multiple> </term> <term name=\\"illustrator\\" form=\\"short\\"> <single>ill.</single> <multiple>ill.</multiple> </term> <term name=\\"translator\\" form=\\"short\\"> <single>trad.</single> <multiple>trad.</multiple> </term> <term name=\\"editortranslator\\" form=\\"short\\"> <single>éd. et trad.</single> <multiple>éd. et trad.</multiple> </term> \x3c!-- VERB ROLE FORMS --\x3e <term name=\\"container-author\\" form=\\"verb\\">par</term> <term name=\\"director\\" form=\\"verb\\">réalisé par</term> <term name=\\"editor\\" form=\\"verb\\">édité par</term> <term name=\\"editorial-director\\" form=\\"verb\\">sous la direction de</term> <term name=\\"illustrator\\" form=\\"verb\\">illustré par</term> <term name=\\"interviewer\\" form=\\"verb\\">entretien réalisé par</term> <term name=\\"recipient\\" form=\\"verb\\">à</term> <term name=\\"reviewed-author\\" form=\\"verb\\">par</term> <term name=\\"translator\\" form=\\"verb\\">traduit par</term> <term name=\\"editortranslator\\" form=\\"verb\\">édité et traduit par</term> \x3c!-- SHORT VERB ROLE FORMS --\x3e <term name=\\"director\\" form=\\"verb-short\\">réal. par</term> <term name=\\"editor\\" form=\\"verb-short\\">éd. par</term> <term name=\\"editorial-director\\" form=\\"verb-short\\">ss la dir. de</term> <term name=\\"illustrator\\" form=\\"verb-short\\">ill. par</term> <term name=\\"translator\\" form=\\"verb-short\\">trad. par</term> <term name=\\"editortranslator\\" form=\\"verb-short\\">éd. et trad. par</term> \x3c!-- LONG MONTH FORMS --\x3e <term name=\\"month-01\\" gender=\\"masculine\\">janvier</term> <term name=\\"month-02\\" gender=\\"masculine\\">février</term> <term name=\\"month-03\\" gender=\\"masculine\\">mars</term> <term name=\\"month-04\\" gender=\\"masculine\\">avril</term> <term name=\\"month-05\\" gender=\\"masculine\\">mai</term> <term name=\\"month-06\\" gender=\\"masculine\\">juin</term> <term name=\\"month-07\\" gender=\\"masculine\\">juillet</term> <term name=\\"month-08\\" gender=\\"masculine\\">août</term> <term name=\\"month-09\\" gender=\\"masculine\\">septembre</term> <term name=\\"month-10\\" gender=\\"masculine\\">octobre</term> <term name=\\"month-11\\" gender=\\"masculine\\">novembre</term> <term name=\\"month-12\\" gender=\\"masculine\\">décembre</term> \x3c!-- SHORT MONTH FORMS --\x3e <term name=\\"month-01\\" form=\\"short\\">janv.</term> <term name=\\"month-02\\" form=\\"short\\">févr.</term> <term name=\\"month-03\\" form=\\"short\\">mars</term> <term name=\\"month-04\\" form=\\"short\\">avr.</term> <term name=\\"month-05\\" form=\\"short\\">mai</term> <term name=\\"month-06\\" form=\\"short\\">juin</term> <term name=\\"month-07\\" form=\\"short\\">juill.</term> <term name=\\"month-08\\" form=\\"short\\">août</term> <term name=\\"month-09\\" form=\\"short\\">sept.</term> <term name=\\"month-10\\" form=\\"short\\">oct.</term> <term name=\\"month-11\\" form=\\"short\\">nov.</term> <term name=\\"month-12\\" form=\\"short\\">déc.</term> \x3c!-- SEASONS --\x3e <term name=\\"season-01\\">printemps</term> <term name=\\"season-02\\">été</term> <term name=\\"season-03\\">automne</term> <term name=\\"season-04\\">hiver</term> </terms> </locale>"}},"properties":{"citationStyle":{"type":"object","properties":{"title":{"type":"string","default":"American Psychological Association 5th edition"},"idUrl":{"type":"string","default":"http://www.zotero.org/styles/apa-5th-edition"},"id":{"type":"string","default":"apa-5th-edition"},"fileName":{"type":"string","default":"apa-5th-edition.csl"},"data":{"type":"string","default":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"sort-only\\"> <info> <title>American Psychological Association 5th edition</title> <title-short>APA</title-short> <id>http://www.zotero.org/styles/apa-5th-edition</id> <link href=\\"http://www.zotero.org/styles/apa-5th-edition\\" rel=\\"self\\"/> <link href=\\"http://rdc.libguides.com/content.php?pid=63487\\" rel=\\"documentation\\"/> <author> <name>Simon Kornblith</name> <email>simon@simonster.com</email> </author> <contributor> <name>Bruce D\'Arcus</name> </contributor> <contributor> <name>Curtis M. Humphrey</name> </contributor> <contributor> <name>Richard Karnesky</name> <email>karnesky+zotero@gmail.com</email> <uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri> </contributor> <contributor> <name>Sebastian Karcher</name> </contributor> <category citation-format=\\"author-date\\"/> <category field=\\"psychology\\"/> <category field=\\"generic-base\\"/> <updated>2012-09-27T22:06:38+00:00</updated> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> </info> <macro name=\\"container-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"any\\"> <text term=\\"in\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <names variable=\\"editor\\" delimiter=\\", \\" suffix=\\", \\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\" (\\" text-case=\\"capitalize-first\\" suffix=\\")\\"/> <substitute> <names variable=\\"translator\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"secondary-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"none\\"> <names variable=\\"translator\\" delimiter=\\", \\" prefix=\\" (\\" suffix=\\")\\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\", \\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"author\\"> <names variable=\\"author\\"> <name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/> <label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <text macro=\\"title\\"/> </substitute> </names> </macro> <macro name=\\"author-short\\"> <names variable=\\"author\\"> <name form=\\"short\\" and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <choose> <if type=\\"bill book graphic legal_case legislation motion_picture report song\\" match=\\"any\\"> <text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\"/> </if> <else> <text variable=\\"title\\" form=\\"short\\" quotes=\\"true\\"/> </else> </choose> </substitute> </names> </macro> <macro name=\\"access\\"> <choose> <if type=\\"thesis\\"> <choose> <if variable=\\"archive\\" match=\\"any\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> <text variable=\\"archive_location\\" prefix=\\" (\\" suffix=\\")\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </else> </choose> </if> <else> <choose> <if variable=\\"URL\\"> <choose> <if variable=\\"archive\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <group> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </group> </else> </choose> </if> </choose> </else> </choose> </macro> <macro name=\\"title\\"> <choose> <if type=\\"report thesis\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> <group prefix=\\" (\\" suffix=\\")\\"> <text variable=\\"genre\\"/> <text variable=\\"number\\" prefix=\\" No. \\"/> </group> </if> <else-if type=\\"bill book graphic legal_case legislation manuscript motion_picture report song speech\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> </else-if> <else> <text variable=\\"title\\"/> </else> </choose> </macro> <macro name=\\"publisher\\"> <choose> <if type=\\"report\\" match=\\"any\\"> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </if> <else-if type=\\"thesis\\" match=\\"any\\"> <group delimiter=\\", \\"> <text variable=\\"publisher\\"/> <text variable=\\"publisher-place\\"/> </group> </else-if> <else> <choose> <if variable=\\"event\\" match=\\"none\\"> <text variable=\\"genre\\" suffix=\\", \\"/> </if> </choose> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </else> </choose> </macro> <macro name=\\"event\\"> <choose> <if variable=\\"event\\"> <choose> <if variable=\\"genre\\" match=\\"none\\"> <text term=\\"presented at\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text variable=\\"event\\"/> </if> <else> <group delimiter=\\" \\"> <text variable=\\"genre\\" text-case=\\"capitalize-first\\"/> <text term=\\"presented at\\"/> <text variable=\\"event\\"/> </group> </else> </choose> </if> </choose> </macro> <macro name=\\"issued\\"> <choose> <if variable=\\"issued\\"> <group prefix=\\" (\\" suffix=\\").\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> <choose> <if type=\\"article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"none\\"> <date variable=\\"issued\\"> <date-part prefix=\\", \\" name=\\"month\\"/> <date-part prefix=\\" \\" name=\\"day\\"/> </date> </if> </choose> </group> </if> <else> <text prefix=\\" (\\" term=\\"no date\\" suffix=\\").\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"issued-year\\"> <choose> <if variable=\\"issued\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> </if> <else> <text term=\\"no date\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"edition\\"> <choose> <if is-numeric=\\"edition\\"> <group delimiter=\\" \\"> <number variable=\\"edition\\" form=\\"ordinal\\"/> <text term=\\"edition\\" form=\\"short\\"/> </group> </if> <else> <text variable=\\"edition\\" suffix=\\".\\"/> </else> </choose> </macro> <macro name=\\"locators\\"> <choose> <if type=\\"article-journal article-magazine article-newspaper\\" match=\\"any\\"> <group prefix=\\", \\" delimiter=\\", \\"> <group> <text variable=\\"volume\\" font-style=\\"italic\\"/> <text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/> </group> <text variable=\\"page\\"/> </group> </if> <else-if type=\\"bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"any\\"> <group prefix=\\" (\\" suffix=\\")\\" delimiter=\\", \\"> <text macro=\\"edition\\"/> <group> <text term=\\"volume\\" form=\\"short\\" plural=\\"true\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"number-of-volumes\\" form=\\"numeric\\" prefix=\\"1-\\"/> </group> <group> <text term=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"volume\\" form=\\"numeric\\"/> </group> <group> <label variable=\\"page\\" form=\\"short\\" suffix=\\" \\"/> <text variable=\\"page\\"/> </group> </group> </else-if> </choose> </macro> <macro name=\\"citation-locator\\"> <group> <label variable=\\"locator\\" form=\\"short\\"/> <text variable=\\"locator\\" prefix=\\" \\"/> </group> </macro> <citation et-al-min=\\"6\\" et-al-use-first=\\"1\\" et-al-subsequent-min=\\"3\\" et-al-subsequent-use-first=\\"1\\" disambiguate-add-year-suffix=\\"true\\" disambiguate-add-names=\\"true\\" disambiguate-add-givenname=\\"true\\" givenname-disambiguation-rule=\\"primary-name\\" collapse=\\"year\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\"/> </sort> <layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\"; \\"> <group delimiter=\\", \\"> <text macro=\\"author-short\\"/> <text macro=\\"issued-year\\"/> <text macro=\\"citation-locator\\"/> </group> </layout> </citation> <bibliography hanging-indent=\\"true\\" et-al-min=\\"8\\" et-al-use-first=\\"7\\" entry-spacing=\\"0\\" line-spacing=\\"2\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\" sort=\\"ascending\\"/> </sort> <layout> <group suffix=\\".\\"> <text macro=\\"author\\" suffix=\\".\\"/> <text macro=\\"issued\\" suffix=\\" \\"/> <group delimiter=\\". \\"> <text macro=\\"title\\"/> <group> <text macro=\\"container-contributors\\"/> <text macro=\\"secondary-contributors\\"/> <group delimiter=\\", \\"> <text variable=\\"container-title\\" font-style=\\"italic\\"/> <text variable=\\"collection-title\\"/> </group> </group> </group> <text macro=\\"locators\\"/> <group delimiter=\\", \\" prefix=\\". \\"> <text macro=\\"event\\"/> <text macro=\\"publisher\\"/> </group> </group> <text macro=\\"access\\" prefix=\\". \\"/> </layout> </bibliography> </style>"},"xmlJs":{"type":"object"}}},"citationLocale":{"type":"object","keys":{"id":{"type":"string","default":"fr-FR"},"names":{"type":"array","default":["Français (France)","French (France)"]},"fileName":{"type":"string","default":"locales-fr-FR.xml"},"data":{"type":"string","default":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"fr-FR\\"> <info> <translator> <name>Grégoire Colly</name> </translator> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> <updated>2012-07-04T23:31:02+00:00</updated> </info> <style-options punctuation-in-quote=\\"false\\" limit-day-ordinals-to-day-1=\\"true\\"/> <date form=\\"text\\"> <date-part name=\\"day\\" suffix=\\" \\"/> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"year\\"/> </date> <date form=\\"numeric\\"> <date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"year\\"/> </date> <terms> <term name=\\"accessed\\">consulté le</term> <term name=\\"and\\">et</term> <term name=\\"and others\\">et autres</term> <term name=\\"anonymous\\">anonyme</term> <term name=\\"anonymous\\" form=\\"short\\">anon.</term> <term name=\\"at\\">sur</term> <term name=\\"available at\\">disponible sur</term> <term name=\\"by\\">par</term> <term name=\\"circa\\">vers</term> <term name=\\"circa\\" form=\\"short\\">v.</term> <term name=\\"cited\\">cité</term> <term name=\\"edition\\" gender=\\"feminine\\"> <single>édition</single> <multiple>éditions</multiple> </term> <term name=\\"edition\\" form=\\"short\\">éd.</term> <term name=\\"et-al\\">et al.</term> <term name=\\"forthcoming\\">à paraître</term> <term name=\\"from\\">à l\'adresse</term> <term name=\\"ibid\\">ibid.</term> <term name=\\"in\\">in</term> <term name=\\"in press\\">sous presse</term> <term name=\\"internet\\">Internet</term> <term name=\\"interview\\">entretien</term> <term name=\\"letter\\">lettre</term> <term name=\\"no date\\">sans date</term> <term name=\\"no date\\" form=\\"short\\">s.&#160;d.</term> <term name=\\"online\\">en ligne</term> <term name=\\"presented at\\">présenté à</term> <term name=\\"reference\\"> <single>référence</single> <multiple>références</multiple> </term> <term name=\\"reference\\" form=\\"short\\"> <single>réf.</single> <multiple>réf.</multiple> </term> <term name=\\"retrieved\\">consulté</term> <term name=\\"scale\\">échelle</term> <term name=\\"version\\">version</term> \x3c!-- ANNO DOMINI; BEFORE CHRIST --\x3e <term name=\\"ad\\">apr. J.-C.</term> <term name=\\"bc\\">av. J.-C.</term> \x3c!-- PUNCTUATION --\x3e <term name=\\"open-quote\\">«&#160;</term> <term name=\\"close-quote\\">&#160;»</term> <term name=\\"open-inner-quote\\">“</term> <term name=\\"close-inner-quote\\">”</term> <term name=\\"page-range-delimiter\\">&#8209;</term> \x3c!-- non-breaking hyphen --\x3e \x3c!-- ORDINALS --\x3e <term name=\\"ordinal\\">ᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"feminine\\" match=\\"whole-number\\">ʳᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"masculine\\" match=\\"whole-number\\">ᵉʳ</term> \x3c!-- LONG ORDINALS --\x3e <term name=\\"long-ordinal-01\\">premier</term> <term name=\\"long-ordinal-02\\">deuxième</term> <term name=\\"long-ordinal-03\\">troisième</term> <term name=\\"long-ordinal-04\\">quatrième</term> <term name=\\"long-ordinal-05\\">cinquième</term> <term name=\\"long-ordinal-06\\">sixième</term> <term name=\\"long-ordinal-07\\">septième</term> <term name=\\"long-ordinal-08\\">huitième</term> <term name=\\"long-ordinal-09\\">neuvième</term> <term name=\\"long-ordinal-10\\">dixième</term> \x3c!-- LONG LOCATOR FORMS --\x3e <term name=\\"book\\"> <single>livre</single> <multiple>livres</multiple> </term> <term name=\\"chapter\\"> <single>chapitre</single> <multiple>chapitres</multiple> </term> <term name=\\"column\\"> <single>colonne</single> <multiple>colonnes</multiple> </term> <term name=\\"figure\\"> <single>figure</single> <multiple>figures</multiple> </term> <term name=\\"folio\\"> <single>folio</single> <multiple>folios</multiple> </term> <term name=\\"issue\\" gender=\\"masculine\\"> <single>numéro</single> <multiple>numéros</multiple> </term> <term name=\\"line\\"> <single>ligne</single> <multiple>lignes</multiple> </term> <term name=\\"note\\"> <single>note</single> <multiple>notes</multiple> </term> <term name=\\"opus\\"> <single>opus</single> <multiple>opus</multiple> </term> <term name=\\"page\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"number-of-pages\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"paragraph\\"> <single>paragraphe</single> <multiple>paragraphes</multiple> </term> <term name=\\"part\\"> <single>partie</single> <multiple>parties</multiple> </term> <term name=\\"section\\"> <single>section</single> <multiple>sections</multiple> </term> <term name=\\"sub verbo\\"> <single>sub verbo</single> <multiple>sub verbis</multiple> </term> <term name=\\"verse\\"> <single>verset</single> <multiple>versets</multiple> </term> <term name=\\"volume\\" gender=\\"masculine\\"> <single>volume</single> <multiple>volumes</multiple> </term> \x3c!-- SHORT LOCATOR FORMS --\x3e <term name=\\"book\\" form=\\"short\\">liv.</term> <term name=\\"chapter\\" form=\\"short\\">chap.</term> <term name=\\"column\\" form=\\"short\\">col.</term> <term name=\\"figure\\" form=\\"short\\">fig.</term> <term name=\\"folio\\" form=\\"short\\"> <single>fᵒ</single> <multiple>fᵒˢ</multiple> </term> <term name=\\"issue\\" form=\\"short\\"> <single>nᵒ</single> <multiple>nᵒˢ</multiple> </term> <term name=\\"line\\" form=\\"short\\">l.</term> <term name=\\"note\\" form=\\"short\\">n.</term> <term name=\\"opus\\" form=\\"short\\">op.</term> <term name=\\"page\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"number-of-pages\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"paragraph\\" form=\\"short\\">paragr.</term> <term name=\\"part\\" form=\\"short\\">part.</term> <term name=\\"section\\" form=\\"short\\">sect.</term> <term name=\\"sub verbo\\" form=\\"short\\"> <single>s.&#160;v.</single> <multiple>s.&#160;vv.</multiple> </term> <term name=\\"verse\\" form=\\"short\\"> <single>v.</single> <multiple>v.</multiple> </term> <term name=\\"volume\\" form=\\"short\\"> <single>vol.</single> <multiple>vol.</multiple> </term> \x3c!-- SYMBOL LOCATOR FORMS --\x3e <term name=\\"paragraph\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> <term name=\\"section\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> \x3c!-- LONG ROLE FORMS --\x3e <term name=\\"director\\"> <single>réalisateur</single> <multiple>réalisateurs</multiple> </term> <term name=\\"editor\\"> <single>éditeur</single> <multiple>éditeurs</multiple> </term> <term name=\\"editorial-director\\"> <single>directeur</single> <multiple>directeurs</multiple> </term> <term name=\\"illustrator\\"> <single>illustrateur</single> <multiple>illustrateurs</multiple> </term> <term name=\\"translator\\"> <single>traducteur</single> <multiple>traducteurs</multiple> </term> <term name=\\"editortranslator\\"> <single>éditeur et traducteur</single> <multiple>éditeurs et traducteurs</multiple> </term> \x3c!-- SHORT ROLE FORMS --\x3e <term name=\\"director\\" form=\\"short\\"> <single>réal.</single> <multiple>réal.</multiple> </term> <term name=\\"editor\\" form=\\"short\\"> <single>éd.</single> <multiple>éd.</multiple> </term> <term name=\\"editorial-director\\" form=\\"short\\"> <single>dir.</single> <multiple>dir.</multiple> </term> <term name=\\"illustrator\\" form=\\"short\\"> <single>ill.</single> <multiple>ill.</multiple> </term> <term name=\\"translator\\" form=\\"short\\"> <single>trad.</single> <multiple>trad.</multiple> </term> <term name=\\"editortranslator\\" form=\\"short\\"> <single>éd. et trad.</single> <multiple>éd. et trad.</multiple> </term> \x3c!-- VERB ROLE FORMS --\x3e <term name=\\"container-author\\" form=\\"verb\\">par</term> <term name=\\"director\\" form=\\"verb\\">réalisé par</term> <term name=\\"editor\\" form=\\"verb\\">édité par</term> <term name=\\"editorial-director\\" form=\\"verb\\">sous la direction de</term> <term name=\\"illustrator\\" form=\\"verb\\">illustré par</term> <term name=\\"interviewer\\" form=\\"verb\\">entretien réalisé par</term> <term name=\\"recipient\\" form=\\"verb\\">à</term> <term name=\\"reviewed-author\\" form=\\"verb\\">par</term> <term name=\\"translator\\" form=\\"verb\\">traduit par</term> <term name=\\"editortranslator\\" form=\\"verb\\">édité et traduit par</term> \x3c!-- SHORT VERB ROLE FORMS --\x3e <term name=\\"director\\" form=\\"verb-short\\">réal. par</term> <term name=\\"editor\\" form=\\"verb-short\\">éd. par</term> <term name=\\"editorial-director\\" form=\\"verb-short\\">ss la dir. de</term> <term name=\\"illustrator\\" form=\\"verb-short\\">ill. par</term> <term name=\\"translator\\" form=\\"verb-short\\">trad. par</term> <term name=\\"editortranslator\\" form=\\"verb-short\\">éd. et trad. par</term> \x3c!-- LONG MONTH FORMS --\x3e <term name=\\"month-01\\" gender=\\"masculine\\">janvier</term> <term name=\\"month-02\\" gender=\\"masculine\\">février</term> <term name=\\"month-03\\" gender=\\"masculine\\">mars</term> <term name=\\"month-04\\" gender=\\"masculine\\">avril</term> <term name=\\"month-05\\" gender=\\"masculine\\">mai</term> <term name=\\"month-06\\" gender=\\"masculine\\">juin</term> <term name=\\"month-07\\" gender=\\"masculine\\">juillet</term> <term name=\\"month-08\\" gender=\\"masculine\\">août</term> <term name=\\"month-09\\" gender=\\"masculine\\">septembre</term> <term name=\\"month-10\\" gender=\\"masculine\\">octobre</term> <term name=\\"month-11\\" gender=\\"masculine\\">novembre</term> <term name=\\"month-12\\" gender=\\"masculine\\">décembre</term> \x3c!-- SHORT MONTH FORMS --\x3e <term name=\\"month-01\\" form=\\"short\\">janv.</term> <term name=\\"month-02\\" form=\\"short\\">févr.</term> <term name=\\"month-03\\" form=\\"short\\">mars</term> <term name=\\"month-04\\" form=\\"short\\">avr.</term> <term name=\\"month-05\\" form=\\"short\\">mai</term> <term name=\\"month-06\\" form=\\"short\\">juin</term> <term name=\\"month-07\\" form=\\"short\\">juill.</term> <term name=\\"month-08\\" form=\\"short\\">août</term> <term name=\\"month-09\\" form=\\"short\\">sept.</term> <term name=\\"month-10\\" form=\\"short\\">oct.</term> <term name=\\"month-11\\" form=\\"short\\">nov.</term> <term name=\\"month-12\\" form=\\"short\\">déc.</term> \x3c!-- SEASONS --\x3e <term name=\\"season-01\\">printemps</term> <term name=\\"season-02\\">été</term> <term name=\\"season-03\\">automne</term> <term name=\\"season-04\\">hiver</term> </terms> </locale>"}}}}}},"required":["type","metadata","sectionsOrder","resources","contextualizers","assets","contextualizations"],"definitions":{"asset":{"type":"object","properties":{"id":{"type":"string","description":"self-identifying id of the dataset (uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"filename":{"type":"string","description":"The filename if any"},"mimetype":{"type":"string","description":"The mimetype"},"data":{"type":["string","object","array"],"description":"raw data stored directly the dataset object if any"}}},"summaryBlock":{"type":"object","default":{"type":"section"},"properties":{"type":{"type":"string"},"data":{"type":"object"}}},"edition":{"type":"object","default":{"data":{"citationStyle":{"title":"American Psychological Association 5th edition","id":"apa-5th-edition","data":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"sort-only\\"> <info> <title>American Psychological Association 5th edition</title> <title-short>APA</title-short> <id>http://www.zotero.org/styles/apa-5th-edition</id> <link href=\\"http://www.zotero.org/styles/apa-5th-edition\\" rel=\\"self\\"/> <link href=\\"http://rdc.libguides.com/content.php?pid=63487\\" rel=\\"documentation\\"/> <author> <name>Simon Kornblith</name> <email>simon@simonster.com</email> </author> <contributor> <name>Bruce D\'Arcus</name> </contributor> <contributor> <name>Curtis M. Humphrey</name> </contributor> <contributor> <name>Richard Karnesky</name> <email>karnesky+zotero@gmail.com</email> <uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri> </contributor> <contributor> <name>Sebastian Karcher</name> </contributor> <category citation-format=\\"author-date\\"/> <category field=\\"psychology\\"/> <category field=\\"generic-base\\"/> <updated>2012-09-27T22:06:38+00:00</updated> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> </info> <macro name=\\"container-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"any\\"> <text term=\\"in\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <names variable=\\"editor\\" delimiter=\\", \\" suffix=\\", \\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\" (\\" text-case=\\"capitalize-first\\" suffix=\\")\\"/> <substitute> <names variable=\\"translator\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"secondary-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"none\\"> <names variable=\\"translator\\" delimiter=\\", \\" prefix=\\" (\\" suffix=\\")\\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\", \\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"author\\"> <names variable=\\"author\\"> <name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/> <label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <text macro=\\"title\\"/> </substitute> </names> </macro> <macro name=\\"author-short\\"> <names variable=\\"author\\"> <name form=\\"short\\" and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <choose> <if type=\\"bill book graphic legal_case legislation motion_picture report song\\" match=\\"any\\"> <text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\"/> </if> <else> <text variable=\\"title\\" form=\\"short\\" quotes=\\"true\\"/> </else> </choose> </substitute> </names> </macro> <macro name=\\"access\\"> <choose> <if type=\\"thesis\\"> <choose> <if variable=\\"archive\\" match=\\"any\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> <text variable=\\"archive_location\\" prefix=\\" (\\" suffix=\\")\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </else> </choose> </if> <else> <choose> <if variable=\\"URL\\"> <choose> <if variable=\\"archive\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <group> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </group> </else> </choose> </if> </choose> </else> </choose> </macro> <macro name=\\"title\\"> <choose> <if type=\\"report thesis\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> <group prefix=\\" (\\" suffix=\\")\\"> <text variable=\\"genre\\"/> <text variable=\\"number\\" prefix=\\" No. \\"/> </group> </if> <else-if type=\\"bill book graphic legal_case legislation manuscript motion_picture report song speech\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> </else-if> <else> <text variable=\\"title\\"/> </else> </choose> </macro> <macro name=\\"publisher\\"> <choose> <if type=\\"report\\" match=\\"any\\"> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </if> <else-if type=\\"thesis\\" match=\\"any\\"> <group delimiter=\\", \\"> <text variable=\\"publisher\\"/> <text variable=\\"publisher-place\\"/> </group> </else-if> <else> <choose> <if variable=\\"event\\" match=\\"none\\"> <text variable=\\"genre\\" suffix=\\", \\"/> </if> </choose> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </else> </choose> </macro> <macro name=\\"event\\"> <choose> <if variable=\\"event\\"> <choose> <if variable=\\"genre\\" match=\\"none\\"> <text term=\\"presented at\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text variable=\\"event\\"/> </if> <else> <group delimiter=\\" \\"> <text variable=\\"genre\\" text-case=\\"capitalize-first\\"/> <text term=\\"presented at\\"/> <text variable=\\"event\\"/> </group> </else> </choose> </if> </choose> </macro> <macro name=\\"issued\\"> <choose> <if variable=\\"issued\\"> <group prefix=\\" (\\" suffix=\\").\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> <choose> <if type=\\"article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"none\\"> <date variable=\\"issued\\"> <date-part prefix=\\", \\" name=\\"month\\"/> <date-part prefix=\\" \\" name=\\"day\\"/> </date> </if> </choose> </group> </if> <else> <text prefix=\\" (\\" term=\\"no date\\" suffix=\\").\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"issued-year\\"> <choose> <if variable=\\"issued\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> </if> <else> <text term=\\"no date\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"edition\\"> <choose> <if is-numeric=\\"edition\\"> <group delimiter=\\" \\"> <number variable=\\"edition\\" form=\\"ordinal\\"/> <text term=\\"edition\\" form=\\"short\\"/> </group> </if> <else> <text variable=\\"edition\\" suffix=\\".\\"/> </else> </choose> </macro> <macro name=\\"locators\\"> <choose> <if type=\\"article-journal article-magazine article-newspaper\\" match=\\"any\\"> <group prefix=\\", \\" delimiter=\\", \\"> <group> <text variable=\\"volume\\" font-style=\\"italic\\"/> <text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/> </group> <text variable=\\"page\\"/> </group> </if> <else-if type=\\"bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"any\\"> <group prefix=\\" (\\" suffix=\\")\\" delimiter=\\", \\"> <text macro=\\"edition\\"/> <group> <text term=\\"volume\\" form=\\"short\\" plural=\\"true\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"number-of-volumes\\" form=\\"numeric\\" prefix=\\"1-\\"/> </group> <group> <text term=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"volume\\" form=\\"numeric\\"/> </group> <group> <label variable=\\"page\\" form=\\"short\\" suffix=\\" \\"/> <text variable=\\"page\\"/> </group> </group> </else-if> </choose> </macro> <macro name=\\"citation-locator\\"> <group> <label variable=\\"locator\\" form=\\"short\\"/> <text variable=\\"locator\\" prefix=\\" \\"/> </group> </macro> <citation et-al-min=\\"6\\" et-al-use-first=\\"1\\" et-al-subsequent-min=\\"3\\" et-al-subsequent-use-first=\\"1\\" disambiguate-add-year-suffix=\\"true\\" disambiguate-add-names=\\"true\\" disambiguate-add-givenname=\\"true\\" givenname-disambiguation-rule=\\"primary-name\\" collapse=\\"year\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\"/> </sort> <layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\"; \\"> <group delimiter=\\", \\"> <text macro=\\"author-short\\"/> <text macro=\\"issued-year\\"/> <text macro=\\"citation-locator\\"/> </group> </layout> </citation> <bibliography hanging-indent=\\"true\\" et-al-min=\\"8\\" et-al-use-first=\\"7\\" entry-spacing=\\"0\\" line-spacing=\\"2\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\" sort=\\"ascending\\"/> </sort> <layout> <group suffix=\\".\\"> <text macro=\\"author\\" suffix=\\".\\"/> <text macro=\\"issued\\" suffix=\\" \\"/> <group delimiter=\\". \\"> <text macro=\\"title\\"/> <group> <text macro=\\"container-contributors\\"/> <text macro=\\"secondary-contributors\\"/> <group delimiter=\\", \\"> <text variable=\\"container-title\\" font-style=\\"italic\\"/> <text variable=\\"collection-title\\"/> </group> </group> </group> <text macro=\\"locators\\"/> <group delimiter=\\", \\" prefix=\\". \\"> <text macro=\\"event\\"/> <text macro=\\"publisher\\"/> </group> </group> <text macro=\\"access\\" prefix=\\". \\"/> </layout> </bibliography> </style>"},"citationLocale":{"id":"fr-FR","names":["Français (France)","French (France)"],"data":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"fr-FR\\"> <info> <translator> <name>Grégoire Colly</name> </translator> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> <updated>2012-07-04T23:31:02+00:00</updated> </info> <style-options punctuation-in-quote=\\"false\\" limit-day-ordinals-to-day-1=\\"true\\"/> <date form=\\"text\\"> <date-part name=\\"day\\" suffix=\\" \\"/> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"year\\"/> </date> <date form=\\"numeric\\"> <date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"year\\"/> </date> <terms> <term name=\\"accessed\\">consulté le</term> <term name=\\"and\\">et</term> <term name=\\"and others\\">et autres</term> <term name=\\"anonymous\\">anonyme</term> <term name=\\"anonymous\\" form=\\"short\\">anon.</term> <term name=\\"at\\">sur</term> <term name=\\"available at\\">disponible sur</term> <term name=\\"by\\">par</term> <term name=\\"circa\\">vers</term> <term name=\\"circa\\" form=\\"short\\">v.</term> <term name=\\"cited\\">cité</term> <term name=\\"edition\\" gender=\\"feminine\\"> <single>édition</single> <multiple>éditions</multiple> </term> <term name=\\"edition\\" form=\\"short\\">éd.</term> <term name=\\"et-al\\">et al.</term> <term name=\\"forthcoming\\">à paraître</term> <term name=\\"from\\">à l\'adresse</term> <term name=\\"ibid\\">ibid.</term> <term name=\\"in\\">in</term> <term name=\\"in press\\">sous presse</term> <term name=\\"internet\\">Internet</term> <term name=\\"interview\\">entretien</term> <term name=\\"letter\\">lettre</term> <term name=\\"no date\\">sans date</term> <term name=\\"no date\\" form=\\"short\\">s.&#160;d.</term> <term name=\\"online\\">en ligne</term> <term name=\\"presented at\\">présenté à</term> <term name=\\"reference\\"> <single>référence</single> <multiple>références</multiple> </term> <term name=\\"reference\\" form=\\"short\\"> <single>réf.</single> <multiple>réf.</multiple> </term> <term name=\\"retrieved\\">consulté</term> <term name=\\"scale\\">échelle</term> <term name=\\"version\\">version</term> \x3c!-- ANNO DOMINI; BEFORE CHRIST --\x3e <term name=\\"ad\\">apr. J.-C.</term> <term name=\\"bc\\">av. J.-C.</term> \x3c!-- PUNCTUATION --\x3e <term name=\\"open-quote\\">«&#160;</term> <term name=\\"close-quote\\">&#160;»</term> <term name=\\"open-inner-quote\\">“</term> <term name=\\"close-inner-quote\\">”</term> <term name=\\"page-range-delimiter\\">&#8209;</term> \x3c!-- non-breaking hyphen --\x3e \x3c!-- ORDINALS --\x3e <term name=\\"ordinal\\">ᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"feminine\\" match=\\"whole-number\\">ʳᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"masculine\\" match=\\"whole-number\\">ᵉʳ</term> \x3c!-- LONG ORDINALS --\x3e <term name=\\"long-ordinal-01\\">premier</term> <term name=\\"long-ordinal-02\\">deuxième</term> <term name=\\"long-ordinal-03\\">troisième</term> <term name=\\"long-ordinal-04\\">quatrième</term> <term name=\\"long-ordinal-05\\">cinquième</term> <term name=\\"long-ordinal-06\\">sixième</term> <term name=\\"long-ordinal-07\\">septième</term> <term name=\\"long-ordinal-08\\">huitième</term> <term name=\\"long-ordinal-09\\">neuvième</term> <term name=\\"long-ordinal-10\\">dixième</term> \x3c!-- LONG LOCATOR FORMS --\x3e <term name=\\"book\\"> <single>livre</single> <multiple>livres</multiple> </term> <term name=\\"chapter\\"> <single>chapitre</single> <multiple>chapitres</multiple> </term> <term name=\\"column\\"> <single>colonne</single> <multiple>colonnes</multiple> </term> <term name=\\"figure\\"> <single>figure</single> <multiple>figures</multiple> </term> <term name=\\"folio\\"> <single>folio</single> <multiple>folios</multiple> </term> <term name=\\"issue\\" gender=\\"masculine\\"> <single>numéro</single> <multiple>numéros</multiple> </term> <term name=\\"line\\"> <single>ligne</single> <multiple>lignes</multiple> </term> <term name=\\"note\\"> <single>note</single> <multiple>notes</multiple> </term> <term name=\\"opus\\"> <single>opus</single> <multiple>opus</multiple> </term> <term name=\\"page\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"number-of-pages\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"paragraph\\"> <single>paragraphe</single> <multiple>paragraphes</multiple> </term> <term name=\\"part\\"> <single>partie</single> <multiple>parties</multiple> </term> <term name=\\"section\\"> <single>section</single> <multiple>sections</multiple> </term> <term name=\\"sub verbo\\"> <single>sub verbo</single> <multiple>sub verbis</multiple> </term> <term name=\\"verse\\"> <single>verset</single> <multiple>versets</multiple> </term> <term name=\\"volume\\" gender=\\"masculine\\"> <single>volume</single> <multiple>volumes</multiple> </term> \x3c!-- SHORT LOCATOR FORMS --\x3e <term name=\\"book\\" form=\\"short\\">liv.</term> <term name=\\"chapter\\" form=\\"short\\">chap.</term> <term name=\\"column\\" form=\\"short\\">col.</term> <term name=\\"figure\\" form=\\"short\\">fig.</term> <term name=\\"folio\\" form=\\"short\\"> <single>fᵒ</single> <multiple>fᵒˢ</multiple> </term> <term name=\\"issue\\" form=\\"short\\"> <single>nᵒ</single> <multiple>nᵒˢ</multiple> </term> <term name=\\"line\\" form=\\"short\\">l.</term> <term name=\\"note\\" form=\\"short\\">n.</term> <term name=\\"opus\\" form=\\"short\\">op.</term> <term name=\\"page\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"number-of-pages\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"paragraph\\" form=\\"short\\">paragr.</term> <term name=\\"part\\" form=\\"short\\">part.</term> <term name=\\"section\\" form=\\"short\\">sect.</term> <term name=\\"sub verbo\\" form=\\"short\\"> <single>s.&#160;v.</single> <multiple>s.&#160;vv.</multiple> </term> <term name=\\"verse\\" form=\\"short\\"> <single>v.</single> <multiple>v.</multiple> </term> <term name=\\"volume\\" form=\\"short\\"> <single>vol.</single> <multiple>vol.</multiple> </term> \x3c!-- SYMBOL LOCATOR FORMS --\x3e <term name=\\"paragraph\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> <term name=\\"section\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> \x3c!-- LONG ROLE FORMS --\x3e <term name=\\"director\\"> <single>réalisateur</single> <multiple>réalisateurs</multiple> </term> <term name=\\"editor\\"> <single>éditeur</single> <multiple>éditeurs</multiple> </term> <term name=\\"editorial-director\\"> <single>directeur</single> <multiple>directeurs</multiple> </term> <term name=\\"illustrator\\"> <single>illustrateur</single> <multiple>illustrateurs</multiple> </term> <term name=\\"translator\\"> <single>traducteur</single> <multiple>traducteurs</multiple> </term> <term name=\\"editortranslator\\"> <single>éditeur et traducteur</single> <multiple>éditeurs et traducteurs</multiple> </term> \x3c!-- SHORT ROLE FORMS --\x3e <term name=\\"director\\" form=\\"short\\"> <single>réal.</single> <multiple>réal.</multiple> </term> <term name=\\"editor\\" form=\\"short\\"> <single>éd.</single> <multiple>éd.</multiple> </term> <term name=\\"editorial-director\\" form=\\"short\\"> <single>dir.</single> <multiple>dir.</multiple> </term> <term name=\\"illustrator\\" form=\\"short\\"> <single>ill.</single> <multiple>ill.</multiple> </term> <term name=\\"translator\\" form=\\"short\\"> <single>trad.</single> <multiple>trad.</multiple> </term> <term name=\\"editortranslator\\" form=\\"short\\"> <single>éd. et trad.</single> <multiple>éd. et trad.</multiple> </term> \x3c!-- VERB ROLE FORMS --\x3e <term name=\\"container-author\\" form=\\"verb\\">par</term> <term name=\\"director\\" form=\\"verb\\">réalisé par</term> <term name=\\"editor\\" form=\\"verb\\">édité par</term> <term name=\\"editorial-director\\" form=\\"verb\\">sous la direction de</term> <term name=\\"illustrator\\" form=\\"verb\\">illustré par</term> <term name=\\"interviewer\\" form=\\"verb\\">entretien réalisé par</term> <term name=\\"recipient\\" form=\\"verb\\">à</term> <term name=\\"reviewed-author\\" form=\\"verb\\">par</term> <term name=\\"translator\\" form=\\"verb\\">traduit par</term> <term name=\\"editortranslator\\" form=\\"verb\\">édité et traduit par</term> \x3c!-- SHORT VERB ROLE FORMS --\x3e <term name=\\"director\\" form=\\"verb-short\\">réal. par</term> <term name=\\"editor\\" form=\\"verb-short\\">éd. par</term> <term name=\\"editorial-director\\" form=\\"verb-short\\">ss la dir. de</term> <term name=\\"illustrator\\" form=\\"verb-short\\">ill. par</term> <term name=\\"translator\\" form=\\"verb-short\\">trad. par</term> <term name=\\"editortranslator\\" form=\\"verb-short\\">éd. et trad. par</term> \x3c!-- LONG MONTH FORMS --\x3e <term name=\\"month-01\\" gender=\\"masculine\\">janvier</term> <term name=\\"month-02\\" gender=\\"masculine\\">février</term> <term name=\\"month-03\\" gender=\\"masculine\\">mars</term> <term name=\\"month-04\\" gender=\\"masculine\\">avril</term> <term name=\\"month-05\\" gender=\\"masculine\\">mai</term> <term name=\\"month-06\\" gender=\\"masculine\\">juin</term> <term name=\\"month-07\\" gender=\\"masculine\\">juillet</term> <term name=\\"month-08\\" gender=\\"masculine\\">août</term> <term name=\\"month-09\\" gender=\\"masculine\\">septembre</term> <term name=\\"month-10\\" gender=\\"masculine\\">octobre</term> <term name=\\"month-11\\" gender=\\"masculine\\">novembre</term> <term name=\\"month-12\\" gender=\\"masculine\\">décembre</term> \x3c!-- SHORT MONTH FORMS --\x3e <term name=\\"month-01\\" form=\\"short\\">janv.</term> <term name=\\"month-02\\" form=\\"short\\">févr.</term> <term name=\\"month-03\\" form=\\"short\\">mars</term> <term name=\\"month-04\\" form=\\"short\\">avr.</term> <term name=\\"month-05\\" form=\\"short\\">mai</term> <term name=\\"month-06\\" form=\\"short\\">juin</term> <term name=\\"month-07\\" form=\\"short\\">juill.</term> <term name=\\"month-08\\" form=\\"short\\">août</term> <term name=\\"month-09\\" form=\\"short\\">sept.</term> <term name=\\"month-10\\" form=\\"short\\">oct.</term> <term name=\\"month-11\\" form=\\"short\\">nov.</term> <term name=\\"month-12\\" form=\\"short\\">déc.</term> \x3c!-- SEASONS --\x3e <term name=\\"season-01\\">printemps</term> <term name=\\"season-02\\">été</term> <term name=\\"season-03\\">automne</term> <term name=\\"season-04\\">hiver</term> </terms> </locale>"},"style":{"mode":"merge","css":""},"additionalHTML":"","allowAnnotation":false}},"properties":{"id":{"type":"string","description":"self-identifying id of the edition (uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"metadata":{"type":"object","properties":{"title":{"type":"string","description":"The title of the edition"},"description":{"type":"string","description":"The description of the edition"},"date":{"type":"string","description":"The displayed date of publication of the edition"},"type":{"type":"string","description":"The rendering type of the edition","enum":["screened","paged"]},"templateId":{"type":"string","description":"The id of the template module used by the edition"}}},"data":{"type":"object","properties":{"plan":{"type":"object","properties":{"type":{"type":"string","enum":["linear"]},"summary":{"type":"array","items":{"description":"summary block","$ref":"#/definitions/summaryBlock"}}}},"publicationTitle":{"type":"string","description":"A specific title to display as the title of the edition"},"publicationAuthors":{"type":"array","description":"Specific authors of this edition","default":[],"items":{"type":["object","string"],"properties":{"given":{"type":"string"},"family":{"type":"string"},"affiliation":{"type":"string"},"role":{"type":"string"}}}},"publicationSubtitle":{"type":"string","description":"A specific subtitle to display as the title of the edition"},"bibType":{"type":"string","description":"type of item to register the edition in","enum":["article","book","booklet","inbook","incollection","inproceedings","manual","mastersthesis","misc","phdthesis","proceedings","techreport","unpublished"]},"templateOptions":{"type":"object","description":"Map of options for a given template"},"allowAnnotation":{"type":"boolean","description":"Whether to allow annotation"},"citationStyle":{"type":"object","properties":{"title":{"type":"string","default":"American Psychological Association 5th edition"},"id":{"type":"string","default":"apa-5th-edition"},"data":{"type":"string","default":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <style xmlns=\\"http://purl.org/net/xbiblio/csl\\" class=\\"in-text\\" version=\\"1.0\\" demote-non-dropping-particle=\\"sort-only\\"> <info> <title>American Psychological Association 5th edition</title> <title-short>APA</title-short> <id>http://www.zotero.org/styles/apa-5th-edition</id> <link href=\\"http://www.zotero.org/styles/apa-5th-edition\\" rel=\\"self\\"/> <link href=\\"http://rdc.libguides.com/content.php?pid=63487\\" rel=\\"documentation\\"/> <author> <name>Simon Kornblith</name> <email>simon@simonster.com</email> </author> <contributor> <name>Bruce D\'Arcus</name> </contributor> <contributor> <name>Curtis M. Humphrey</name> </contributor> <contributor> <name>Richard Karnesky</name> <email>karnesky+zotero@gmail.com</email> <uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri> </contributor> <contributor> <name>Sebastian Karcher</name> </contributor> <category citation-format=\\"author-date\\"/> <category field=\\"psychology\\"/> <category field=\\"generic-base\\"/> <updated>2012-09-27T22:06:38+00:00</updated> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> </info> <macro name=\\"container-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"any\\"> <text term=\\"in\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <names variable=\\"editor\\" delimiter=\\", \\" suffix=\\", \\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\" (\\" text-case=\\"capitalize-first\\" suffix=\\")\\"/> <substitute> <names variable=\\"translator\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"secondary-contributors\\"> <choose> <if type=\\"chapter paper-conference\\" match=\\"none\\"> <names variable=\\"translator\\" delimiter=\\", \\" prefix=\\" (\\" suffix=\\")\\"> <name and=\\"symbol\\" initialize-with=\\". \\" delimiter=\\", \\"/> <label form=\\"short\\" prefix=\\", \\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> </substitute> </names> </if> </choose> </macro> <macro name=\\"author\\"> <names variable=\\"author\\"> <name name-as-sort-order=\\"all\\" and=\\"symbol\\" sort-separator=\\", \\" initialize-with=\\". \\" delimiter=\\", \\" delimiter-precedes-last=\\"always\\"/> <label form=\\"short\\" prefix=\\" (\\" suffix=\\")\\" text-case=\\"capitalize-first\\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <text macro=\\"title\\"/> </substitute> </names> </macro> <macro name=\\"author-short\\"> <names variable=\\"author\\"> <name form=\\"short\\" and=\\"symbol\\" delimiter=\\", \\" initialize-with=\\". \\"/> <substitute> <names variable=\\"editor\\"/> <names variable=\\"translator\\"/> <choose> <if type=\\"bill book graphic legal_case legislation motion_picture report song\\" match=\\"any\\"> <text variable=\\"title\\" form=\\"short\\" font-style=\\"italic\\"/> </if> <else> <text variable=\\"title\\" form=\\"short\\" quotes=\\"true\\"/> </else> </choose> </substitute> </names> </macro> <macro name=\\"access\\"> <choose> <if type=\\"thesis\\"> <choose> <if variable=\\"archive\\" match=\\"any\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> <text variable=\\"archive_location\\" prefix=\\" (\\" suffix=\\")\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </else> </choose> </if> <else> <choose> <if variable=\\"URL\\"> <choose> <if variable=\\"archive\\"> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"archive\\" suffix=\\".\\"/> </group> </if> <else> <group> <text term=\\"retrieved\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <date variable=\\"accessed\\" suffix=\\", \\"> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"day\\" suffix=\\", \\"/> <date-part name=\\"year\\"/> </date> <group> <text term=\\"from\\" suffix=\\" \\"/> <text variable=\\"URL\\"/> </group> </group> </else> </choose> </if> </choose> </else> </choose> </macro> <macro name=\\"title\\"> <choose> <if type=\\"report thesis\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> <group prefix=\\" (\\" suffix=\\")\\"> <text variable=\\"genre\\"/> <text variable=\\"number\\" prefix=\\" No. \\"/> </group> </if> <else-if type=\\"bill book graphic legal_case legislation manuscript motion_picture report song speech\\" match=\\"any\\"> <text variable=\\"title\\" font-style=\\"italic\\"/> </else-if> <else> <text variable=\\"title\\"/> </else> </choose> </macro> <macro name=\\"publisher\\"> <choose> <if type=\\"report\\" match=\\"any\\"> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </if> <else-if type=\\"thesis\\" match=\\"any\\"> <group delimiter=\\", \\"> <text variable=\\"publisher\\"/> <text variable=\\"publisher-place\\"/> </group> </else-if> <else> <choose> <if variable=\\"event\\" match=\\"none\\"> <text variable=\\"genre\\" suffix=\\", \\"/> </if> </choose> <group delimiter=\\": \\"> <text variable=\\"publisher-place\\"/> <text variable=\\"publisher\\"/> </group> </else> </choose> </macro> <macro name=\\"event\\"> <choose> <if variable=\\"event\\"> <choose> <if variable=\\"genre\\" match=\\"none\\"> <text term=\\"presented at\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <text variable=\\"event\\"/> </if> <else> <group delimiter=\\" \\"> <text variable=\\"genre\\" text-case=\\"capitalize-first\\"/> <text term=\\"presented at\\"/> <text variable=\\"event\\"/> </group> </else> </choose> </if> </choose> </macro> <macro name=\\"issued\\"> <choose> <if variable=\\"issued\\"> <group prefix=\\" (\\" suffix=\\").\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> <choose> <if type=\\"article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"none\\"> <date variable=\\"issued\\"> <date-part prefix=\\", \\" name=\\"month\\"/> <date-part prefix=\\" \\" name=\\"day\\"/> </date> </if> </choose> </group> </if> <else> <text prefix=\\" (\\" term=\\"no date\\" suffix=\\").\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"issued-year\\"> <choose> <if variable=\\"issued\\"> <date variable=\\"issued\\"> <date-part name=\\"year\\"/> </date> </if> <else> <text term=\\"no date\\" form=\\"short\\"/> </else> </choose> </macro> <macro name=\\"edition\\"> <choose> <if is-numeric=\\"edition\\"> <group delimiter=\\" \\"> <number variable=\\"edition\\" form=\\"ordinal\\"/> <text term=\\"edition\\" form=\\"short\\"/> </group> </if> <else> <text variable=\\"edition\\" suffix=\\".\\"/> </else> </choose> </macro> <macro name=\\"locators\\"> <choose> <if type=\\"article-journal article-magazine article-newspaper\\" match=\\"any\\"> <group prefix=\\", \\" delimiter=\\", \\"> <group> <text variable=\\"volume\\" font-style=\\"italic\\"/> <text variable=\\"issue\\" prefix=\\"(\\" suffix=\\")\\"/> </group> <text variable=\\"page\\"/> </group> </if> <else-if type=\\"bill book chapter graphic legal_case legislation motion_picture paper-conference report song\\" match=\\"any\\"> <group prefix=\\" (\\" suffix=\\")\\" delimiter=\\", \\"> <text macro=\\"edition\\"/> <group> <text term=\\"volume\\" form=\\"short\\" plural=\\"true\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"number-of-volumes\\" form=\\"numeric\\" prefix=\\"1-\\"/> </group> <group> <text term=\\"volume\\" form=\\"short\\" text-case=\\"capitalize-first\\" suffix=\\" \\"/> <number variable=\\"volume\\" form=\\"numeric\\"/> </group> <group> <label variable=\\"page\\" form=\\"short\\" suffix=\\" \\"/> <text variable=\\"page\\"/> </group> </group> </else-if> </choose> </macro> <macro name=\\"citation-locator\\"> <group> <label variable=\\"locator\\" form=\\"short\\"/> <text variable=\\"locator\\" prefix=\\" \\"/> </group> </macro> <citation et-al-min=\\"6\\" et-al-use-first=\\"1\\" et-al-subsequent-min=\\"3\\" et-al-subsequent-use-first=\\"1\\" disambiguate-add-year-suffix=\\"true\\" disambiguate-add-names=\\"true\\" disambiguate-add-givenname=\\"true\\" givenname-disambiguation-rule=\\"primary-name\\" collapse=\\"year\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\"/> </sort> <layout prefix=\\"(\\" suffix=\\")\\" delimiter=\\"; \\"> <group delimiter=\\", \\"> <text macro=\\"author-short\\"/> <text macro=\\"issued-year\\"/> <text macro=\\"citation-locator\\"/> </group> </layout> </citation> <bibliography hanging-indent=\\"true\\" et-al-min=\\"8\\" et-al-use-first=\\"7\\" entry-spacing=\\"0\\" line-spacing=\\"2\\"> <sort> <key macro=\\"author\\"/> <key macro=\\"issued-year\\" sort=\\"ascending\\"/> </sort> <layout> <group suffix=\\".\\"> <text macro=\\"author\\" suffix=\\".\\"/> <text macro=\\"issued\\" suffix=\\" \\"/> <group delimiter=\\". \\"> <text macro=\\"title\\"/> <group> <text macro=\\"container-contributors\\"/> <text macro=\\"secondary-contributors\\"/> <group delimiter=\\", \\"> <text variable=\\"container-title\\" font-style=\\"italic\\"/> <text variable=\\"collection-title\\"/> </group> </group> </group> <text macro=\\"locators\\"/> <group delimiter=\\", \\" prefix=\\". \\"> <text macro=\\"event\\"/> <text macro=\\"publisher\\"/> </group> </group> <text macro=\\"access\\" prefix=\\". \\"/> </layout> </bibliography> </style>"}}},"citationLocale":{"type":"object","keys":{"id":{"type":"string","default":"fr-FR"},"names":{"type":"array","default":["Français (France)","French (France)"]},"data":{"type":"string","default":"<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?> <locale xmlns=\\"http://purl.org/net/xbiblio/csl\\" version=\\"1.0\\" xml:lang=\\"fr-FR\\"> <info> <translator> <name>Grégoire Colly</name> </translator> <rights license=\\"http://creativecommons.org/licenses/by-sa/3.0/\\">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> <updated>2012-07-04T23:31:02+00:00</updated> </info> <style-options punctuation-in-quote=\\"false\\" limit-day-ordinals-to-day-1=\\"true\\"/> <date form=\\"text\\"> <date-part name=\\"day\\" suffix=\\" \\"/> <date-part name=\\"month\\" suffix=\\" \\"/> <date-part name=\\"year\\"/> </date> <date form=\\"numeric\\"> <date-part name=\\"day\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"month\\" form=\\"numeric-leading-zeros\\" suffix=\\"/\\"/> <date-part name=\\"year\\"/> </date> <terms> <term name=\\"accessed\\">consulté le</term> <term name=\\"and\\">et</term> <term name=\\"and others\\">et autres</term> <term name=\\"anonymous\\">anonyme</term> <term name=\\"anonymous\\" form=\\"short\\">anon.</term> <term name=\\"at\\">sur</term> <term name=\\"available at\\">disponible sur</term> <term name=\\"by\\">par</term> <term name=\\"circa\\">vers</term> <term name=\\"circa\\" form=\\"short\\">v.</term> <term name=\\"cited\\">cité</term> <term name=\\"edition\\" gender=\\"feminine\\"> <single>édition</single> <multiple>éditions</multiple> </term> <term name=\\"edition\\" form=\\"short\\">éd.</term> <term name=\\"et-al\\">et al.</term> <term name=\\"forthcoming\\">à paraître</term> <term name=\\"from\\">à l\'adresse</term> <term name=\\"ibid\\">ibid.</term> <term name=\\"in\\">in</term> <term name=\\"in press\\">sous presse</term> <term name=\\"internet\\">Internet</term> <term name=\\"interview\\">entretien</term> <term name=\\"letter\\">lettre</term> <term name=\\"no date\\">sans date</term> <term name=\\"no date\\" form=\\"short\\">s.&#160;d.</term> <term name=\\"online\\">en ligne</term> <term name=\\"presented at\\">présenté à</term> <term name=\\"reference\\"> <single>référence</single> <multiple>références</multiple> </term> <term name=\\"reference\\" form=\\"short\\"> <single>réf.</single> <multiple>réf.</multiple> </term> <term name=\\"retrieved\\">consulté</term> <term name=\\"scale\\">échelle</term> <term name=\\"version\\">version</term> \x3c!-- ANNO DOMINI; BEFORE CHRIST --\x3e <term name=\\"ad\\">apr. J.-C.</term> <term name=\\"bc\\">av. J.-C.</term> \x3c!-- PUNCTUATION --\x3e <term name=\\"open-quote\\">«&#160;</term> <term name=\\"close-quote\\">&#160;»</term> <term name=\\"open-inner-quote\\">“</term> <term name=\\"close-inner-quote\\">”</term> <term name=\\"page-range-delimiter\\">&#8209;</term> \x3c!-- non-breaking hyphen --\x3e \x3c!-- ORDINALS --\x3e <term name=\\"ordinal\\">ᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"feminine\\" match=\\"whole-number\\">ʳᵉ</term> <term name=\\"ordinal-01\\" gender-form=\\"masculine\\" match=\\"whole-number\\">ᵉʳ</term> \x3c!-- LONG ORDINALS --\x3e <term name=\\"long-ordinal-01\\">premier</term> <term name=\\"long-ordinal-02\\">deuxième</term> <term name=\\"long-ordinal-03\\">troisième</term> <term name=\\"long-ordinal-04\\">quatrième</term> <term name=\\"long-ordinal-05\\">cinquième</term> <term name=\\"long-ordinal-06\\">sixième</term> <term name=\\"long-ordinal-07\\">septième</term> <term name=\\"long-ordinal-08\\">huitième</term> <term name=\\"long-ordinal-09\\">neuvième</term> <term name=\\"long-ordinal-10\\">dixième</term> \x3c!-- LONG LOCATOR FORMS --\x3e <term name=\\"book\\"> <single>livre</single> <multiple>livres</multiple> </term> <term name=\\"chapter\\"> <single>chapitre</single> <multiple>chapitres</multiple> </term> <term name=\\"column\\"> <single>colonne</single> <multiple>colonnes</multiple> </term> <term name=\\"figure\\"> <single>figure</single> <multiple>figures</multiple> </term> <term name=\\"folio\\"> <single>folio</single> <multiple>folios</multiple> </term> <term name=\\"issue\\" gender=\\"masculine\\"> <single>numéro</single> <multiple>numéros</multiple> </term> <term name=\\"line\\"> <single>ligne</single> <multiple>lignes</multiple> </term> <term name=\\"note\\"> <single>note</single> <multiple>notes</multiple> </term> <term name=\\"opus\\"> <single>opus</single> <multiple>opus</multiple> </term> <term name=\\"page\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"number-of-pages\\"> <single>page</single> <multiple>pages</multiple> </term> <term name=\\"paragraph\\"> <single>paragraphe</single> <multiple>paragraphes</multiple> </term> <term name=\\"part\\"> <single>partie</single> <multiple>parties</multiple> </term> <term name=\\"section\\"> <single>section</single> <multiple>sections</multiple> </term> <term name=\\"sub verbo\\"> <single>sub verbo</single> <multiple>sub verbis</multiple> </term> <term name=\\"verse\\"> <single>verset</single> <multiple>versets</multiple> </term> <term name=\\"volume\\" gender=\\"masculine\\"> <single>volume</single> <multiple>volumes</multiple> </term> \x3c!-- SHORT LOCATOR FORMS --\x3e <term name=\\"book\\" form=\\"short\\">liv.</term> <term name=\\"chapter\\" form=\\"short\\">chap.</term> <term name=\\"column\\" form=\\"short\\">col.</term> <term name=\\"figure\\" form=\\"short\\">fig.</term> <term name=\\"folio\\" form=\\"short\\"> <single>fᵒ</single> <multiple>fᵒˢ</multiple> </term> <term name=\\"issue\\" form=\\"short\\"> <single>nᵒ</single> <multiple>nᵒˢ</multiple> </term> <term name=\\"line\\" form=\\"short\\">l.</term> <term name=\\"note\\" form=\\"short\\">n.</term> <term name=\\"opus\\" form=\\"short\\">op.</term> <term name=\\"page\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"number-of-pages\\" form=\\"short\\"> <single>p.</single> <multiple>p.</multiple> </term> <term name=\\"paragraph\\" form=\\"short\\">paragr.</term> <term name=\\"part\\" form=\\"short\\">part.</term> <term name=\\"section\\" form=\\"short\\">sect.</term> <term name=\\"sub verbo\\" form=\\"short\\"> <single>s.&#160;v.</single> <multiple>s.&#160;vv.</multiple> </term> <term name=\\"verse\\" form=\\"short\\"> <single>v.</single> <multiple>v.</multiple> </term> <term name=\\"volume\\" form=\\"short\\"> <single>vol.</single> <multiple>vol.</multiple> </term> \x3c!-- SYMBOL LOCATOR FORMS --\x3e <term name=\\"paragraph\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> <term name=\\"section\\" form=\\"symbol\\"> <single>§</single> <multiple>§</multiple> </term> \x3c!-- LONG ROLE FORMS --\x3e <term name=\\"director\\"> <single>réalisateur</single> <multiple>réalisateurs</multiple> </term> <term name=\\"editor\\"> <single>éditeur</single> <multiple>éditeurs</multiple> </term> <term name=\\"editorial-director\\"> <single>directeur</single> <multiple>directeurs</multiple> </term> <term name=\\"illustrator\\"> <single>illustrateur</single> <multiple>illustrateurs</multiple> </term> <term name=\\"translator\\"> <single>traducteur</single> <multiple>traducteurs</multiple> </term> <term name=\\"editortranslator\\"> <single>éditeur et traducteur</single> <multiple>éditeurs et traducteurs</multiple> </term> \x3c!-- SHORT ROLE FORMS --\x3e <term name=\\"director\\" form=\\"short\\"> <single>réal.</single> <multiple>réal.</multiple> </term> <term name=\\"editor\\" form=\\"short\\"> <single>éd.</single> <multiple>éd.</multiple> </term> <term name=\\"editorial-director\\" form=\\"short\\"> <single>dir.</single> <multiple>dir.</multiple> </term> <term name=\\"illustrator\\" form=\\"short\\"> <single>ill.</single> <multiple>ill.</multiple> </term> <term name=\\"translator\\" form=\\"short\\"> <single>trad.</single> <multiple>trad.</multiple> </term> <term name=\\"editortranslator\\" form=\\"short\\"> <single>éd. et trad.</single> <multiple>éd. et trad.</multiple> </term> \x3c!-- VERB ROLE FORMS --\x3e <term name=\\"container-author\\" form=\\"verb\\">par</term> <term name=\\"director\\" form=\\"verb\\">réalisé par</term> <term name=\\"editor\\" form=\\"verb\\">édité par</term> <term name=\\"editorial-director\\" form=\\"verb\\">sous la direction de</term> <term name=\\"illustrator\\" form=\\"verb\\">illustré par</term> <term name=\\"interviewer\\" form=\\"verb\\">entretien réalisé par</term> <term name=\\"recipient\\" form=\\"verb\\">à</term> <term name=\\"reviewed-author\\" form=\\"verb\\">par</term> <term name=\\"translator\\" form=\\"verb\\">traduit par</term> <term name=\\"editortranslator\\" form=\\"verb\\">édité et traduit par</term> \x3c!-- SHORT VERB ROLE FORMS --\x3e <term name=\\"director\\" form=\\"verb-short\\">réal. par</term> <term name=\\"editor\\" form=\\"verb-short\\">éd. par</term> <term name=\\"editorial-director\\" form=\\"verb-short\\">ss la dir. de</term> <term name=\\"illustrator\\" form=\\"verb-short\\">ill. par</term> <term name=\\"translator\\" form=\\"verb-short\\">trad. par</term> <term name=\\"editortranslator\\" form=\\"verb-short\\">éd. et trad. par</term> \x3c!-- LONG MONTH FORMS --\x3e <term name=\\"month-01\\" gender=\\"masculine\\">janvier</term> <term name=\\"month-02\\" gender=\\"masculine\\">février</term> <term name=\\"month-03\\" gender=\\"masculine\\">mars</term> <term name=\\"month-04\\" gender=\\"masculine\\">avril</term> <term name=\\"month-05\\" gender=\\"masculine\\">mai</term> <term name=\\"month-06\\" gender=\\"masculine\\">juin</term> <term name=\\"month-07\\" gender=\\"masculine\\">juillet</term> <term name=\\"month-08\\" gender=\\"masculine\\">août</term> <term name=\\"month-09\\" gender=\\"masculine\\">septembre</term> <term name=\\"month-10\\" gender=\\"masculine\\">octobre</term> <term name=\\"month-11\\" gender=\\"masculine\\">novembre</term> <term name=\\"month-12\\" gender=\\"masculine\\">décembre</term> \x3c!-- SHORT MONTH FORMS --\x3e <term name=\\"month-01\\" form=\\"short\\">janv.</term> <term name=\\"month-02\\" form=\\"short\\">févr.</term> <term name=\\"month-03\\" form=\\"short\\">mars</term> <term name=\\"month-04\\" form=\\"short\\">avr.</term> <term name=\\"month-05\\" form=\\"short\\">mai</term> <term name=\\"month-06\\" form=\\"short\\">juin</term> <term name=\\"month-07\\" form=\\"short\\">juill.</term> <term name=\\"month-08\\" form=\\"short\\">août</term> <term name=\\"month-09\\" form=\\"short\\">sept.</term> <term name=\\"month-10\\" form=\\"short\\">oct.</term> <term name=\\"month-11\\" form=\\"short\\">nov.</term> <term name=\\"month-12\\" form=\\"short\\">déc.</term> \x3c!-- SEASONS --\x3e <term name=\\"season-01\\">printemps</term> <term name=\\"season-02\\">été</term> <term name=\\"season-03\\">automne</term> <term name=\\"season-04\\">hiver</term> </terms> </locale>"}}},"additionalHTML":{"type":"string","description":"additional document-level HTML code"},"style":{"type":"object","default":{"mode":"merge","css":""},"properties":{"mode":{"type":"string","description":"whether to merge or replace css","enum":["merge","replace"],"default":"merge"},"css":{"type":"string","default":""}}}}}}},"metadata":{"type":"object","properties":{"title":{"type":"string","description":"Title of the item","default":""},"subtitle":{"type":"string","description":"Subtitle fo the item","default":""},"authors":{"type":"array","description":"authors of the item","default":[],"items":{"type":["object","string"],"properties":{"given":{"type":"string"},"family":{"type":"string"},"affiliation":{"type":"string"},"role":{"type":"string"}}}},"type":{"type":"string"},"description":{"type":"string","default":""},"level":{"type":"number","description":"level of hierarchy of the item","default":0}}},"resource":{"type":"object","description":"description of a resource used in the production","properties":{"id":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"metadata":{"type":"object","properties":{"type":{"type":"string","description":"type of the resource","enum":["image","table","video","embed","glossary","bib","webpage","section"]}}},"data":{"type":["object","string","array"]}}},"contextualizer":{"type":"object","properties":{"id":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","description":"type of the contextualizer"},"insertionType":{"type":"string","enum":["BLOCK_ASSET","INLINE_ASSET"],"description":"whether contextualizer targets an inline or block contextualization"}}},"contextualization":{"type":"object","properties":{"id":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"sourceId":{"type":"string"},"targetId":{"type":"string"},"contextualizerId":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","description":"type of the contextualizer being used for this contextualization (note: this is some sugar for implementation, as this information is redundant with associated contextualizer)","default":""},"title":{"type":"string","description":"specific title of the contextualization","default":""},"legend":{"type":"string","longString":true,"description":"legend of the contextualization","default":""}}}}}')},function(e){e.exports=JSON.parse('{"id":"contextualizer","title":"contextualizer","description":"Contextualizers used in quinoa","$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"anyOf":[{"$ref":"#/definitions/image"},{"$ref":"#/definitions/table"},{"$ref":"#/definitions/bib"},{"$ref":"#/definitions/video"},{"$ref":"#/definitions/webpage"},{"$ref":"#/definitions/glossary"},{"$ref":"#/definitions/embed"}]},"definitions":{"image":{"supports_insertion_types":["BLOCK"],"properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["image"]},"lastUpdateAt":{"type":"number","editable":false}}},"table":{"supports_insertion_types":["BLOCK"],"properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["table"]},"lastUpdateAt":{"type":"number","editable":false},"options":{}}},"video":{"supports_insertion_types":["BLOCK"],"properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["video"]},"lastUpdateAt":{"type":"number","editable":false},"options":{}}},"embed":{"supports_insertion_types":["BLOCK"],"properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["embed"]},"lastUpdateAt":{"type":"number","editable":false}}},"bib":{"supports_insertion_types":["INLINE"],"draft_entity_mutability":"IMMUTABLE","properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["glossary"]},"lastUpdateAt":{"type":"number","editable":false},"locator":{"type":"string"},"prefix":{"type":"string"},"suffix":{"type":"string"}}},"webpage":{"supports_insertion_types":["INLINE"],"draft_entity_mutability":"MUTABLE","properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["webpage"]},"lastUpdateAt":{"type":"number","editable":false}}},"glossary":{"supports_insertion_types":["INLINE"],"draft_entity_mutability":"MUTABLE","properties":{"id":{"type":"string","description":"id of the contextualizer(uuid v4)","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"type":{"type":"string","enum":["glossary"]},"lastUpdateAt":{"type":"number","editable":false}}}}}')},function(e,t,n){var r,i,o=n(235),a=n(236),s=0,l=0;e.exports=function(e,t,n){var u=t&&n||0,c=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var p=o();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,g=h-s+(m-l)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,l=m,i=d;var b=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;c[u++]=b>>>24&255,c[u++]=b>>>16&255,c[u++]=b>>>8&255,c[u++]=255&b;var y=h/4294967296*1e4&268435455;c[u++]=y>>>8&255,c[u++]=255&y,c[u++]=y>>>24&15|16,c[u++]=y>>>16&255,c[u++]=d>>>8|128,c[u++]=255&d;for(var v=0;v<6;++v)c[u+v]=f[v];return t||a(c)}},function(e,t,n){var r=n(235),i=n(236);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){var r=n(137),i=n(241),o=n(242),a=n(140),s=n(513),l=n(141),u=200;e.exports=function(e,t,n){var c=-1,f=i,d=e.length,p=!0,h=[],m=h;if(n)p=!1,f=o;else if(d>=u){var g=t?null:s(e);if(g)return l(g);p=!1,f=a,m=new r}else m=t?[]:h;e:for(;++c<d;){var b=e[c],y=t?t(b):b;if(b=n||0!==b?b:0,p&&y==y){for(var v=m.length;v--;)if(m[v]===y)continue e;t&&m.push(y),h.push(b)}else f(m,y,n)||(m!==h&&m.push(y),h.push(b))}return h}},function(e,t,n){var r=n(485),i=n(87),o=n(139);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(486),i=n(493),o=n(494),a=n(495),s=n(496);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(86);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t,n){var r=n(237),i=n(490),o=n(73),a=n(239),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,f=u.hasOwnProperty,d=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},function(e,t,n){var r=n(72),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,i=n(491),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(23)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(86),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(86),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(86),i="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(88),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(88);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(88);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(88);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(89);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(89);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(89);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(89);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(510),i=n(511),o=n(512);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(243),i=n(514),o=n(141),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},function(e,t){e.exports=function(){}},function(e,t,n){var r,i,o;!function(n,a){"use strict";"object"==typeof e.exports?e.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))}(0,(function(){"use strict";var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function n(e){if(!e)return!0;if(i(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function r(t){return e.call(t)}var i=Array.isArray||function(t){return"[object Array]"===e.call(t)};function o(e){var t=parseInt(e);return t.toString()===e?t:e}function a(e){e=e||{};var a=function(e){return Object.keys(a).reduce((function(t,n){return"create"===n?t:("function"==typeof a[n]&&(t[n]=a[n].bind(a,e)),t)}),{})};function s(n,r){return e.includeInheritedProps||"number"==typeof r&&Array.isArray(n)||t(n,r)}function l(e,t){if(s(e,t))return e[t]}function u(e,t,n,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return u(e,t.split(".").map(o),n,r);var i=t[0],a=l(e,i);return 1===t.length?(void 0!==a&&r||(e[i]=n),a):(void 0===a&&("number"==typeof t[1]?e[i]=[]:e[i]={}),u(e[i],t.slice(1),n,r))}return a.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var a=0;a<r.length;a++){var s=o(r[a]);if(!("number"==typeof s&&i(n)&&s<n.length||(e.includeInheritedProps?s in Object(n):t(n,s))))return!1;n=n[s]}return!0},a.ensureExists=function(e,t,n){return u(e,t,n,!0)},a.set=function(e,t,n,r){return u(e,t,n,r)},a.insert=function(e,t,n,r){var o=a.get(e,t);r=~~r,i(o)||(o=[],a.set(e,t,o)),o.splice(r,0,n)},a.empty=function(e,t){var o,l;if(!n(t)&&(null!=e&&(o=a.get(e,t)))){if("string"==typeof o)return a.set(e,t,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}(o))return a.set(e,t,!1);if("number"==typeof o)return a.set(e,t,0);if(i(o))o.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===r(e)}(o))return a.set(e,t,null);for(l in o)s(o,l)&&delete o[l]}}},a.push=function(e,t){var n=a.get(e,t);i(n)||(n=[],a.set(e,t,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},a.coalesce=function(e,t,n){for(var r,i=0,o=t.length;i<o;i++)if(void 0!==(r=a.get(e,t[i])))return r;return n},a.get=function(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return n;if("string"==typeof t)return a.get(e,t.split("."),n);var r=o(t[0]),i=l(e,r);return void 0===i?n:1===t.length?i:a.get(e[r],t.slice(1),n)},a.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(n(t))return e;if("string"==typeof t)return a.del(e,t.split("."));var r=o(t[0]);return s(e,r)?1!==t.length?a.del(e[r],t.slice(1)):(i(e)?e.splice(r,1):delete e[r],e):e},a}var s=a();return s.create=a,s.withInheritedProps=a({includeInheritedProps:!0}),s}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(1),a=n(4);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.default.Component{constructor(...e){super(...e),s(this,"shouldComponentUpdate",()=>!0)}render(){let e;if(this.props.resource)e=(0,a.generateOpenUrl)((0,a.resourceToCslJSON)(this.props.resource));else{if(!this.props.cslRecord)return null;e=(0,a.generateOpenUrl)([this.props.cslRecord])}return i.default.createElement("span",{className:"peritext-structured-context-object-in-span-container Z3988",title:e})}}t.default=l,s(l,"propTypes",{cslRecord:o.PropTypes.object,resource:o.PropTypes.object}),s(l,"defaultProps",{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],n={}){let r=0;for(;r<t.length;){const i=t[r];if(-1===i.indexOf("AssetId"))return{resourceDataField:i,asset:null};if(e.data[i]&&n[e.data[i]])return{resourceDataField:i,asset:n[e.data[i]]};r++}return},t.chooseAppropriateSubAsset=void 0;t.chooseAppropriateSubAsset=(e,t=[],n)=>{let r=0;for(;r<t.length;){const i=t[r];if(e[i]&&n[e[i]])return{resourceDataField:i,asset:n[e[i]]};r++}}},function(e,t,n){var r=n(249),i=n(519);e.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},function(e,t,n){var r=n(72),i=n(142),o=n(24),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(71),i=n(53),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(244)),i=a(n(231)),o=a(n(246));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=({production:e,edition:t})=>{const n=(0,r.default)({production:e,edition:t},!0),{plan:{summary:a=[]}}=t.data,l=a.reduce((r,a)=>{const{id:l,data:u,type:c}=a;let f;switch(c){case"references":return s({},r,{[l]:{bibliographyData:f=(0,i.default)({production:e,edition:t,citations:n,options:u})}});case"glossary":return s({},r,{[l]:{glossaryData:f=(0,o.default)({production:e,edition:t,options:u})}});default:return r}},{});return{global:{citations:n},blocks:l}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(40),i=a(n(69)),o=a(n(248));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=({production:e,edition:t,requestAssetData:n})=>new Promise((a,l)=>{const u=(0,i.default)(e,t),c=(0,r.uniq)(u.reduce((t,n)=>{return[...t,...(0,o.default)(e.resources[n.contextualization.sourceId])]},[])),f={};c.reduce((t,r)=>t.then(()=>new Promise((t,i)=>{n({productionId:e.id,asset:e.assets[r]}).then(n=>{f[r]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},e.assets[r],{data:n}),t()}).catch(i)})),Promise.resolve()).then(()=>{a(f)}).catch(l)});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e={metadata:{}},t={})=>{const{data:n=[]}=t,{allowAnnotation:r=!1}=n,i=e.metadata.title?`\n    <title>${e.metadata.title}</title>\n    <meta name="DC.Title" content="${e.metadata.title}"/>\n    <meta name="twitter:title" content="${e.metadata.title}" />\n    <meta name="og:title" content="${e.metadata.title}" />\n  `:"<title>Quinoa production</title>",o=e.metadata.abstract?`\n    <meta name="description" content="${e.metadata.abstract}"/>\n    <meta name="DC.Description" content="${e.metadata.abstract}"/>\n    <meta name="og:description" content="${e.metadata.abstract}" />\n    <meta name="twitter:description" content="${e.metadata.abstract}" />\n  `:"";return`\n  <meta name    = "DC.Format"\n          content = "text/html">\n  <meta name    = "DC.Type"\n          content = "data production">\n  <meta name="twitter:card" content="summary" />\n  <meta name="twitter:site" content="@peritext" />\n  <meta property="og:url" content="http://www.peritext.github.io" />\n  <meta name="og:type" content="website" />\n  ${i}\n  ${e.metadata.authors&&e.metadata.authors.length?e.metadata.authors.map(e=>`\n                    <meta name="DC.Creator" content="${`${e.given} ${e.family}`}" />\n                    <meta name="author" content="${`${e.given} ${e.family}`}" />`):""}\n  ${o}\n  ${r?'<script src="https://hypothes.is/embed.js" async><\/script>':""}\n`};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(75))&&r.__esModule?r:{default:r};var o=(e="",t=30)=>e.length>t?`${(0,i.default)(e,t)}...`:e;t.default=o},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(529);e.exports=Number.isInteger||function(e){return"number"==typeof e&&r(e)&&Math.floor(e)===e}},function(e,t,n){"use strict";var r=n(530);e.exports=Number.isFinite||function(e){return!("number"!=typeof e||r(e)||e===1/0||e===-1/0)}},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,n){"use strict";function r(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&e.length>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?e.substring(t,t+2):e[t]}function i(e,t,n){for(var i,o="",a=0,s=0,l=e.length;a<l;)i=r(e,a),s>=t&&s<n&&(o+=i),a+=i.length,s+=1;return o}function o(e,t){return void 0===e?t:Number(e)}e.exports=function(e,t,n){var r=o(t,0),a=o(n,e.length);return a==r?"":a>r?i(e,r,a):i(e,a,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOpenUrl=t.bibToSchema=void 0;t.bibToSchema=e=>{switch(e){case"book":return"Book";case"article":return"ScholarlyArticle";case"booklet":return"CreativeWork";case"conference":case"incollection":case"inherits":case"inbook":return"Chapter";case"mastersthesis":case"phdthesis":return"Thesis";case"proceedings":return"Book";case"image":return"ImageObject";case"online":return"WebSite";case"vectorsImage":return"ImageObject";case"tabularData":return"Dataset";case"video":return"VideoObject";case"audio":return"AudioObject";case"person":return"Person";case"place":return"Place";case"organization":return"Organization";case"artefact":return"Product";case"topic":case"concept":case"technology":return"Thing";default:return"CreativeWork"}};const r=(e,t)=>({key:e,value:t}),i=(e=[])=>{const t=[];return e.forEach((function(e){t.push(((e,t)=>`${e}=${encodeURIComponent(t)}`)(e.key,e.value))})),t.join("&amp;")},o={"rft.date":"date","rft.pages":"pages","rft.issn":"ISSN","rft.isbn":"ISBN",rft_id:"URL","rft.place":"address","rft.pub":"publisher","rft.atitle":"title"},a={"rft.atitle":"title","rft.jtitle":"journal","rft.volume":"volume","rft.issue":"issue"},s={"rft.btitle":"title"},l={"rft.atitle":"title","rft.btitle":"booktitle"},u=(e,t,n)=>{for(const i in n)t[n[i]]&&e.push(r(i,t[n[i]]));return e};t.generateOpenUrl=(e=[])=>{if(!e.length)return"";const t=e[0];let n=[];return n.push(r("ctx_ver","Z39.88-2004")),n.push(r("url_ver","Z39.88-2004")),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"].length&&n.push(r("rft.date",t.issued["date-parts"][0])),t.author&&t.author.length&&t.author.forEach((function(e){const t=`${e.given} ${e.family}`;n.push(r("rft.au",t)),n.push(r("dc:creator",t))})),n=u(n,t,o),"article"===t.type?((n=u(n,t,a)).push(r("rft.genre","article")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"dissertation"===t.type?(n=u(n,t,s)).push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:dissertation")):"book"===t.type?((n=u(n,t,s)).push(r("rft.genre","book")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):"proceedings"===t.type?((n=u(n,t,a)).push(r("rft.genre","proceeding")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"conferencePaper"===t.type?((n=u(n,t,a)).push(r("rft.genre","conference")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"chapter"===t.type?((n=u(n,t,l)).push(r("rft.genre","bookitem")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):(n.push(r("rft.genre","unknown")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))),i(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({contextualization:e,renderingMode:t,children:n},{citations:i={}})=>{const o=i[e.id];return o&&o.html?r.default.createElement("span",{id:e.id,className:`peritext-contextualization inline bib rendering-mode-${t}`},n,r.default.createElement("cite",{dangerouslySetInnerHTML:{__html:o.html}})):null};a.contextTypes={citations:i.default.object};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"bib",type:"peritext-contextualizer",name:"Bibliographic citation contextualizer",acceptedResourceTypes:[{test:e=>"glossary"!==e.metadata.type}],profile:{inline:{mutable:!0,options:{prefix:{type:"string"},locator:{type:"string"},suffix:{type:"string"}}},block:{mutable:!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Inline=void 0;var r=o(n(536)),i=o(n(537));function o(e){return e&&e.__esModule?e:{default:e}}const a=r.default;t.Inline=a;const s=i.default;t.meta=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};var o=({contextualization:e,renderingMode:t,children:n},{})=>i.default.createElement("span",{id:e.id,className:`peritext-contextualization inline glossary rendering-mode-${t}`},n);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"glossary",type:"peritext-contextualizer",name:"Glossary entry contextualizer",acceptedResourceTypes:[{type:"glossary"}],profile:{inline:{mutable:!0,options:{}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Block=t.Inline=void 0;var r=a(n(539)),i=a(n(540)),o=a(n(250));function a(e){return e&&e.__esModule?e:{default:e}}const s=r.default;t.Inline=s;const l=i.default;t.Block=l;const u=o.default;t.meta=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};var o=({resource:e,contextualization:t,renderingMode:n="screen",children:r},{})=>{const o=e.data.url;return i.default.createElement("a",{id:t.id,target:"blank",rel:"noopener",href:o,className:`peritext-contextualization inline webpage rendering-mode-${n}`},r&&r.length&&r.filter(e=>"string"!=typeof e||e.trim().length).length?r:"*","paged"===n&&i.default.createElement("sup",{id:t.id,className:"footnote","data-notenumber":"*"},o))};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=s(n(250)),a=n(251);function s(e){return e&&e.__esModule?e:{default:e}}const l=({resource:e,contextualization:t={},renderingMode:n},{productionAssets:i})=>{const s=(0,a.chooseAppropriateAsset)(e,o.default.profile.block.assetPickingRules.element[n],i);let l,u;if(!s)return null;l=s.resourceDataField;const c=s.asset;return r.default.createElement("div",{id:t.id,className:`peritext-contextualization block webpage rendering-mode-${n} asset-field-${l}`},(()=>{switch(l){case"url":return u=e.data.url,r.default.createElement("iframe",{src:u});default:return s?(u=c.data,r.default.createElement("img",{src:u})):null}})())};l.contextTypes={productionAssets:i.default.object};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{contextualizations:n,contextualizers:a,resources:s}=e,u=Object.keys(n).reduce((e,t)=>{const r=n[t],i=a[r.contextualizerId];return l({},e,{[t]:l({},r,{resource:s[r.resourceId],contextualizer:i,type:i?i.type:c})})},{}),f=Object.keys(u).filter(e=>"glossary"!==u[e].type).map(e=>u[e]);return Object.keys(t.citationItems).map(n=>{const a=f.filter(e=>{if(e.resource){const t=(0,i.default)(e.resource);return t&&t[0]&&t[0].id===n}}),s=(0,o.makeBibliography)(t.citationItems,e.settings.citationStyle.data,e.settings.citationLocale.data,{select:[{field:"id",value:n}]}),u=s&&s[1]&&s[1][0];return{citationKey:n,title:u,item:t.citationItems[n],mentions:a.map(t=>l({},t,{contextContent:(0,r.default)(e,t.id)}))}})};var r=s(n(143)),i=s(n(144)),o=n(30),a=n(12);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:c}}=a.constants},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({production:e,sectionId:t,edition:n}){const{contextualizations:r={},contextualizers:o={},resources:s={}}=e,c=n?u({production:e,edition:n}):r,f=Object.keys(c).filter(e=>!t||r[e].sectionId===t).reduce((e,t)=>{const n=r[t],i=o[n.contextualizerId];return a({},e,{[t]:a({},n,{resource:s[n.resourceId],additionalResources:n.additionalResources?n.additionalResources.map(e=>s[e]):[],contextualizer:i,type:i?i.type:l})})},{}),d=Object.keys(f).filter(e=>"bib"===f[e].type).map(e=>f[e]),p=Object.keys(f).filter(e=>f[e]&&f[e].resource&&"glossary"!==f[e].resource.metadata.type).reduce((e,t)=>{const n=f[t],r=[...(0,i.default)(n.resource),...n.additionalResources?n.additionalResources.map(e=>(0,i.default)(e)):[]].flat().reduce((e,t)=>a({},e,{[t.id]:t}),{});return a({},e,r)},{}),h=d.map((e,t)=>{const n=e.id,a=r[n],s=o[a.contextualizerId];return{citationID:n,citationItems:[...(0,i.default)(e.resource),...e.additionalResources?e.additionalResources.map(e=>(0,i.default)(e)):[]].flat().map(e=>({locator:s.locator,prefix:s.prefix,suffix:s.suffix,id:e.id})),properties:{noteIndex:t+1}}});return{citationData:h.map((e,t)=>[e,h.slice(0,0===t?0:t).map(e=>[e.citationID,e.properties.noteIndex]),[]]),citationItems:p}};var r,i=(r=n(144))&&r.__esModule?r:{default:r},o=n(12);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:l}}=o.constants,u=({production:e={},edition:t={}})=>{const{contextualizations:n={}}=e,{data:r={}}=t,{plan:i={}}=r,{summary:o=[]}=i;return o.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).reduce((e,t)=>a({},e,{[t]:n[t]}),e)},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contextualizations:t,contextualizers:n,resources:r}=e;let a=Object.keys(t).filter(e=>{const r=t[e].contextualizerId,i=n[r];return i&&"glossary"===i.type}).map(a=>o({},t[a],{contextualizer:n[t[a].contextualizerId],resource:r[t[a].resourceId],contextContent:(0,i.default)(e,a)})).reduce((e,t)=>o({},e,{[t.resourceId]:{resource:t.resource,mentions:e[t.resourceId]?e[t.resourceId].mentions.concat(t):[t]}}),{});return a=Object.keys(a).map(e=>a[e]).sort((e,t)=>e.resource.metadata.title.toLowerCase()>t.resource.metadata.title.toLowerCase()?1:-1)};var r,i=(r=n(143))&&r.__esModule?r:{default:r};function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(1),a=n(251);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.default.Component{constructor(...e){super(...e),s(this,"shouldComponentUpdate",()=>!0)}render(){let e;if(this.props.resource)e=(0,a.generateOpenUrl)((0,a.resourceToCslJSON)(this.props.resource));else{if(!this.props.cslRecord)return null;e=(0,a.generateOpenUrl)([this.props.cslRecord])}return i.default.createElement("span",{className:"peritext-structured-context-object-in-span-container Z3988",title:e})}}t.default=l,s(l,"propTypes",{cslRecord:o.PropTypes.object,resource:o.PropTypes.object}),s(l,"defaultProps",{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],n={}){let r=0;for(;r<t.length;){const i=t[r];if(-1===i.indexOf("AssetId"))return{resourceDataField:i,asset:null};if(e.data[i]&&n[e.data[i]])return{resourceDataField:i,asset:n[e.data[i]]};r++}return},t.chooseAppropriateSubAsset=void 0;t.chooseAppropriateSubAsset=(e,t=[],n)=>{let r=0;for(;r<t.length;){const i=t[r];if(e[i]&&n[e[i]])return{resourceDataField:i,asset:n[e[i]]};r++}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(40),i=a(n(253)),o=a(n(252));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=({production:e,edition:t,requestAssetData:n})=>new Promise((a,l)=>{const u=(0,i.default)(e,t),c=(0,r.uniq)(u.reduce((t,n)=>{return[...t,...(0,o.default)(e.resources[n.contextualization.resourceId])]},[])),f={};c.reduce((t,r)=>t.then(()=>new Promise((t,i)=>{n({productionId:e.id,asset:e.assets[r]}).then(n=>{f[r]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},e.assets[r],{data:n}),t()}).catch(i)})),Promise.resolve()).then(()=>{a(f)}).catch(l)});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e={metadata:{}},t={})=>{const{data:n=[]}=t,{allowAnnotation:r=!1}=n,i=e.metadata.title?`\n    <title>${e.metadata.title}</title>\n    <meta name="DC.Title" content="${e.metadata.title}"/>\n    <meta name="twitter:title" content="${e.metadata.title}" />\n    <meta name="og:title" content="${e.metadata.title}" />\n  `:"<title>Quinoa production</title>",o=e.metadata.abstract?`\n    <meta name="description" content="${e.metadata.abstract}"/>\n    <meta name="DC.Description" content="${e.metadata.abstract}"/>\n    <meta name="og:description" content="${e.metadata.abstract}" />\n    <meta name="twitter:description" content="${e.metadata.abstract}" />\n  `:"";return`\n  <meta name    = "DC.Format"\n          content = "text/html">\n  <meta name    = "DC.Type"\n          content = "data production">\n  <meta name="twitter:card" content="summary" />\n  <meta name="twitter:site" content="@peritext" />\n  <meta property="og:url" content="http://www.peritext.github.io" />\n  <meta name="og:type" content="website" />\n  ${i}\n  ${e.metadata.authors&&e.metadata.authors.length?e.metadata.authors.map(e=>`\n                    <meta name="DC.Creator" content="${`${e.given} ${e.family}`}" />\n                    <meta name="author" content="${`${e.given} ${e.family}`}" />`):""}\n  ${o}\n  ${r?'<script src="https://hypothes.is/embed.js" async><\/script>':""}\n`};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(75))&&r.__esModule?r:{default:r};var o=(e="",t=30)=>e.length>t?`${(0,i.default)(e,t)}...`:e;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOpenUrl=t.bibToSchema=void 0;t.bibToSchema=e=>{switch(e){case"book":return"Book";case"article":return"ScholarlyArticle";case"booklet":return"CreativeWork";case"conference":case"incollection":case"inherits":case"inbook":return"Chapter";case"mastersthesis":case"phdthesis":return"Thesis";case"proceedings":return"Book";case"image":return"ImageObject";case"online":return"WebSite";case"vectorsImage":return"ImageObject";case"tabularData":return"Dataset";case"video":return"VideoObject";case"audio":return"AudioObject";case"person":return"Person";case"place":return"Place";case"organization":return"Organization";case"artefact":return"Product";case"topic":case"concept":case"technology":return"Thing";default:return"CreativeWork"}};const r=(e,t)=>({key:e,value:t}),i=(e=[])=>{const t=[];return e.forEach((function(e){t.push(((e,t)=>`${e}=${encodeURIComponent(t)}`)(e.key,e.value))})),t.join("&amp;")},o={"rft.date":"date","rft.pages":"pages","rft.issn":"ISSN","rft.isbn":"ISBN",rft_id:"URL","rft.place":"address","rft.pub":"publisher","rft.atitle":"title"},a={"rft.atitle":"title","rft.jtitle":"journal","rft.volume":"volume","rft.issue":"issue"},s={"rft.btitle":"title"},l={"rft.atitle":"title","rft.btitle":"booktitle"},u=(e,t,n)=>{for(const i in n)t[n[i]]&&e.push(r(i,t[n[i]]));return e};t.generateOpenUrl=(e=[])=>{if(!e.length)return"";const t=e[0];let n=[];return n.push(r("ctx_ver","Z39.88-2004")),n.push(r("url_ver","Z39.88-2004")),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"].length&&n.push(r("rft.date",t.issued["date-parts"][0])),t.author&&t.author.length&&t.author.forEach((function(e){const t=`${e.given} ${e.family}`;n.push(r("rft.au",t)),n.push(r("dc:creator",t))})),n=u(n,t,o),"article"===t.type?((n=u(n,t,a)).push(r("rft.genre","article")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"dissertation"===t.type?(n=u(n,t,s)).push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:dissertation")):"book"===t.type?((n=u(n,t,s)).push(r("rft.genre","book")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):"proceedings"===t.type?((n=u(n,t,a)).push(r("rft.genre","proceeding")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"conferencePaper"===t.type?((n=u(n,t,a)).push(r("rft.genre","conference")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"chapter"===t.type?((n=u(n,t,l)).push(r("rft.genre","bookitem")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):(n.push(r("rft.genre","unknown")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))),i(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Block=void 0;var r=o(n(551)),i=o(n(254));function o(e){return e&&e.__esModule?e:{default:e}}const a=r.default;t.Block=a;const s=i.default;t.meta=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=l(n(1)),o=l(n(552)),a=l(n(254)),s=n(4);function l(e){return e&&e.__esModule?e:{default:e}}const u=({html:e})=>{const[t,n]=(0,r.useState)(!1);return[r.default.createElement(o.default,{key:0,enabled:t,onChange:e=>n(e)},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}}),t&&r.default.createElement("button",{key:1,className:"fullscreen-btn",onClick:()=>n(!1)},"❖")),r.default.createElement("button",{key:1,className:"fullscreen-btn",onClick:()=>n(!0)},"❖")]},c=({resource:e,contextualization:t={},renderingMode:n},{productionAssets:i})=>{const o=t.title||(0,s.getResourceTitle)(e),[l,c]=(0,r.useState)(!0),f=(0,s.chooseAppropriateAsset)(e,a.default.profile.block.assetPickingRules.element.paged,i);let d,p;if(!f)return null;let h=d=f.resourceDataField,m=()=>null;return"paged"===n?f&&f.asset&&(p=f.asset.data,h=d,m=()=>r.default.createElement("img",{src:p})):f&&f.asset&&l?(p=f.asset.data,h=d,m=()=>r.default.createElement("div",{onClick:()=>c(!1),className:"cover"},r.default.createElement("img",{src:p}),r.default.createElement("h3",null,o))):(h="html",m=()=>r.default.createElement(u,{html:e.data.html})),r.default.createElement("div",{id:t.id,className:`peritext-contextualization block embed rendering-mode-${n} asset-field-${h}`},r.default.createElement(m,null))};c.contextTypes={productionAssets:i.default.object};var f=c;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),o=l(i),a=l(n(1)),s=l(n(553));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.detectFullScreen=n.detectFullScreen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){s.default.addEventListener("fullscreenchange",this.detectFullScreen)}},{key:"componentWillUnmount",value:function(){s.default.removeEventListener("fullscreenchange",this.detectFullScreen)}},{key:"componentDidUpdate",value:function(){this.handleProps(this.props)}},{key:"handleProps",value:function(e){var t=s.default.fullscreenElement===this.node;t&&!e.enabled?this.leaveFullScreen():!t&&e.enabled&&this.enterFullScreen()}},{key:"detectFullScreen",value:function(){this.props.onChange&&this.props.onChange(s.default.fullscreenElement===this.node)}},{key:"enterFullScreen",value:function(){s.default.fullscreenEnabled&&s.default.requestFullscreen(this.node)}},{key:"leaveFullScreen",value:function(){s.default.fullscreenEnabled&&s.default.exitFullscreen()}},{key:"render",value:function(){var e=this,t=["fullscreen"];return this.props.enabled&&t.push("fullscreen-enabled"),o.default.createElement("div",{className:t.join(" "),ref:function(t){return e.node=t},style:this.props.enabled?{height:"100%",width:"100%"}:void 0},this.props.children)}}]),t}(i.Component);u.propTypes={children:a.default.node.isRequired,enabled:a.default.bool.isRequired,onChange:a.default.func},u.defaultProps={enabled:!1},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},i=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},l="fullscreenEnabled"in s&&Object.keys(r)||i[0]in s&&i||o[0]in s&&o||a[0]in s&&a||[];t.default={requestFullscreen:function(e){return e[l[r.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[r.requestFullscreen]]},get exitFullscreen(){return s[l[r.exitFullscreen]].bind(s)},addEventListener:function(e,t,n){return s.addEventListener(l[r[e]],t,n)},removeEventListener:function(e,t,n){return s.removeEventListener(l[r[e]],t,n)},get fullscreenEnabled(){return Boolean(s[l[r.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[l[r.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+l[r.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+l[r.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+l[r.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+l[r.fullscreenerror]).toLowerCase()]=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Inline=t.Block=void 0;var r=a(n(555)),i=a(n(562)),o=a(n(145));function a(e){return e&&e.__esModule?e:{default:e}}const s=r.default;t.Block=s;const l=i.default;t.Inline=l;const u=o.default;t.meta=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(2)),i=l(n(1)),o=l(n(145)),a=n(4),s=l(n(556));function l(e){return e&&e.__esModule?e:{default:e}}const u=new Function("try {return this===window;}catch(e){ return false;}")(),c=({resource:e,contextualizer:t={},contextualization:n={},renderingMode:i},{productionAssets:l})=>{const c=(0,a.chooseAppropriateAsset)(e,o.default.profile.block.assetPickingRules.element[i],l);let f,d;if(!c)return null;f=c.resourceDataField;const p=c.asset;return r.default.createElement("div",{id:n.id,className:`peritext-contextualization block video rendering-mode-${i} asset-field-${f}`},(()=>{switch(f){case"mediaUrl":if(d="mediaUrl"===f?e.data.mediaUrl:p.data,u){const{parameters:e={}}=t,{heavyPlayer:n=!0,displayControls:i=!0,autoPlay:o=!1,loop:a=!1,muted:l=!1,startTime:u,endTime:c}=e;return r.default.createElement("div",{className:"media"},r.default.createElement(s.default,{url:d,light:!n,controls:i,autoPlay:o,loop:a,muted:l,volume:l?0:null,startTime:u,endTime:c}))}return d?r.default.createElement("video",{controls:!0},r.default.createElement("source",{src:d,type:`video/${d.split(".").pop()}`})):null;default:return c?(d=c.asset.data,r.default.createElement("img",{src:d})):null}})())};c.contextTypes={productionAssets:i.default.object};var f=c;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2));const i=new Function("try {return this===window;}catch(e){ return false;}")()?n(255).default:void 0;var o=({url:e,light:t=!1,displayControls:n,autoPlay:o,loop:a,muted:s,startTime:l,endTime:u})=>{const c=(0,r.useRef)(null);return r.default.createElement(i,{url:e,light:t,controls:n,ref:c,autoPlay:o,loop:a,muted:s,volume:s?0:null,onProgress:({playedSeconds:e})=>{(l&&e<l||u&&e>u)&&c.current.seekTo(l,"seconds")}})};t.default=o},function(e,t){function n(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function r(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,i){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof t&&(i=t,t={}),t=t||{},i=i||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,t.attrs),t.text&&(a.text=""+t.text),("onload"in a?n:r)(a,i),a.onload||n(a,i),o.appendChild(a)}},function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function a(e,t,n){return e.concat(t).map((function(e){return o(e,n)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function l(e,t){try{return t in e}catch(e){return!1}}function u(e,t,n){var r={};return n.isMergeableObject(e)&&s(e).forEach((function(t){r[t]=o(e[t],n)})),s(t).forEach((function(i){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(l(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return c;var n=t.customMerge(e);return"function"==typeof n?n:c}(i,n)(e[i],t[i],n):r[i]=o(t[i],n))})),r}function c(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=o;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):u(e,t,n):o(t,n)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return c(e,n,t)}),{})};var f=c;e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(146),i=n(148),o=n(149),a=n(256),s=n(257),l=n(258),u=n(259),c=n(150),f=n(260),d=n(261),p=[r.YouTube,i.SoundCloud,o.Vimeo,a.Facebook,s.Streamable,l.Wistia,u.Twitch,c.DailyMotion,f.Mixcloud,d.FilePlayer];t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}}n.default=e,t&&t.set(e,n);return n}(n(2));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}(this,(e=u(t)).call.apply(e,[this].concat(i))),d(c(n),"mounted",!1),d(c(n),"state",{image:null}),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.url,r=t.light;e.url===n&&e.light===r||this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(e){var t=this,n=e.url,r=e.light;if("string"!=typeof r)return this.setState({image:null}),window.fetch("https://noembed.com/embed?url=".concat(n)).then((function(e){return e.json()})).then((function(e){if(e.thumbnail_url&&t.mounted){var n=e.thumbnail_url.replace("height=100","height=480");t.setState({image:n})}}));this.setState({image:r})}},{key:"render",value:function(){var e=this.props.onClick,t=this.state.image,n={display:"flex",alignItems:"center",justifyContent:"center"},i={preview:s({width:"100%",height:"100%",backgroundImage:t?"url(".concat(t,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},n),shadow:s({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:"64px",width:"64px",height:"64px"},n),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}};return r.default.createElement("div",{style:i.preview,className:"react-player__preview",onClick:e},r.default.createElement("div",{style:i.shadow,className:"react-player__shadow"},r.default.createElement("div",{style:i.playIcon,className:"react-player__play-icon"})))}}])&&l(n.prototype,i),a&&l(n,a),t}(r.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=[],a=!0,s=!1,l=void 0;try{for(var u,f=c[Symbol.iterator]();!(a=(u=f.next()).done);a=!0){var d=u.value;!d.Player.canPlay(e)&&n[d.configKey].preload&&o.push(r.default.createElement(i.default,{key:d.Player.displayName,activePlayer:d.Player,url:d.url,controls:t,playing:!0,muted:!0,display:"none"}))}}catch(e){s=!0,l=e}finally{try{a||null==f.return||f.return()}finally{if(s)throw l}}return o};var r=u(n(2)),i=u(n(147)),o=n(146),a=n(148),s=n(149),l=n(150);function u(e){return e&&e.__esModule?e:{default:e}}var c=[{Player:o.YouTube,configKey:"youtube",url:"https://www.youtube.com/watch?v=GlCmAC4MHek"},{Player:a.SoundCloud,configKey:"soundcloud",url:"https://soundcloud.com/seucheu/john-cage-433-8-bit-version"},{Player:s.Vimeo,configKey:"vimeo",url:"https://vimeo.com/300970506"},{Player:l.DailyMotion,configKey:"dailymotion",url:"http://www.dailymotion.com/video/xqdpyk"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(145)),o=n(4),a=s(n(563));function s(e){return e&&e.__esModule?e:{default:e}}const l=new Function("try {return this===window;}catch(e){ return false;}")();var u=({resource:e,contextualizer:t={},contextualization:n={},renderingMode:s,assets:u={}},{})=>{const c=(0,o.chooseAppropriateAsset)(e,i.default.profile.inline.assetPickingRules.element[s],u);let f,d;if(!c)return null;f=c.resourceDataField;const p=c.asset;return r.default.createElement("span",{id:n.id,className:`peritext-contextualization inline video rendering-mode-${s} asset-field-${f}`},(()=>{switch(f){case"mediaUrl":if(d="mediaUrl"===f?e.data.mediaUrl:p.data,l){const{parameters:e={}}=t,{loop:n=!1,startTime:i,endTime:o}=e;return r.default.createElement(a.default,{url:d,loop:n,startTime:i,endTime:o})}return d?r.default.createElement("video",{controls:!0},r.default.createElement("source",{src:d,type:`video/${d.split(".").pop()}`})):null;default:return console.log({appropriateAsset:c}),c?(d=c.asset.data,r.default.createElement("span",{className:"inline-images-container"},r.default.createElement("img",{src:d}))):null}})())};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2));const i=new Function("try {return this===window;}catch(e){ return false;}")()?n(255).default:void 0;var o=({url:e,loop:t,startTime:n,endTime:o})=>{const[a,s]=(0,r.useState)(!1),l=(0,r.useRef)(null);return[r.default.createElement("span",{key:1,style:{display:"none"}},r.default.createElement(i,{url:e,playing:a,onProgress:({playedSeconds:e})=>{n&&e<n?l.current.seekTo(n,"seconds"):o&&e>o&&(s(!1),l.current.seekTo(n,"seconds"))},loop:t,ref:l})),r.default.createElement("button",{onClick:e=>{e.stopPropagation(),s(!a)},key:2},a?"■":"▶")]};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Inline=t.Block=void 0;var r=a(n(565)),i=a(n(620)),o=a(n(151));function a(e){return e&&e.__esModule?e:{default:e}}const s=r.default;t.Block=s;const l=i.default;t.Inline=l;const u=o.default;t.meta=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(2)),i=l(n(1)),o=l(n(151)),a=n(152),s=l(n(575));function l(e){return e&&e.__esModule?e:{default:e}}const u=({resource:e,renderingMode:t="screened",assets:n={}},{})=>{switch(t){case"screened":const i=e=>{const r=(0,a.chooseAppropriateSubAsset)(e,o.default.profile.block.assetPickingRules.image[t],n);if(r)return r.asset.data};return r.default.createElement(s.default,{getAppropriateAssetUri:i,resource:e});default:return r.default.createElement("div",{className:"static-images-container block"},e.data.images.map((e,i)=>{const s=(0,a.chooseAppropriateSubAsset)(e,o.default.profile.block.assetPickingRules.image[t],n);if(s){const t=s.asset.data;return r.default.createElement("div",{key:i,className:"specific-image-container"},r.default.createElement("img",{src:t}),e.caption&&r.default.createElement("figcaption",{className:"image-specific-caption"},e.caption))}return null}))}};u.contextTypes={productionAssets:i.default.object};var c=u;t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{contextualizations:n,contextualizers:a,resources:s}=e,u=Object.keys(n).reduce((e,t)=>{const r=n[t],i=a[r.contextualizerId];return l({},e,{[t]:l({},r,{resource:s[r.resourceId],contextualizer:i,type:i?i.type:c})})},{}),f=Object.keys(u).filter(e=>"glossary"!==u[e].type).map(e=>u[e]);return Object.keys(t.citationItems).map(n=>{const a=f.filter(e=>{if(e.resource){const t=(0,i.default)(e.resource);return t&&t[0]&&t[0].id===n}}),s=(0,o.makeBibliography)(t.citationItems,e.settings.citationStyle.data,e.settings.citationLocale.data,{select:[{field:"id",value:n}]}),u=s&&s[1]&&s[1][0];return{citationKey:n,title:u,item:t.citationItems[n],mentions:a.map(t=>l({},t,{contextContent:(0,r.default)(e,t.id)}))}})};var r=s(n(153)),i=s(n(154)),o=n(30),a=n(12);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:c}}=a.constants},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({production:e,sectionId:t,edition:n}){const{contextualizations:r={},contextualizers:o={},resources:s={}}=e,c=n?u({production:e,edition:n}):r,f=Object.keys(c).filter(e=>!t||r[e].sectionId===t).reduce((e,t)=>{const n=r[t],i=o[n.contextualizerId];return a({},e,{[t]:a({},n,{resource:s[n.resourceId],additionalResources:n.additionalResources?n.additionalResources.map(e=>s[e]):[],contextualizer:i,type:i?i.type:l})})},{}),d=Object.keys(f).filter(e=>"bib"===f[e].type).map(e=>f[e]),p=Object.keys(f).filter(e=>f[e]&&f[e].resource&&"glossary"!==f[e].resource.metadata.type).reduce((e,t)=>{const n=f[t],r=[...(0,i.default)(n.resource),...n.additionalResources?n.additionalResources.map(e=>(0,i.default)(e)):[]].flat().reduce((e,t)=>a({},e,{[t.id]:t}),{});return a({},e,r)},{}),h=d.map((e,t)=>{const n=e.id,a=r[n],s=o[a.contextualizerId];return{citationID:n,citationItems:[...(0,i.default)(e.resource),...e.additionalResources?e.additionalResources.map(e=>(0,i.default)(e)):[]].flat().map(e=>({locator:s.locator,prefix:s.prefix,suffix:s.suffix,id:e.id})),properties:{noteIndex:t+1}}});return{citationData:h.map((e,t)=>[e,h.slice(0,0===t?0:t).map(e=>[e.citationID,e.properties.noteIndex]),[]]),citationItems:p}};var r,i=(r=n(154))&&r.__esModule?r:{default:r},o=n(12);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:l}}=o.constants,u=({production:e={},edition:t={}})=>{const{contextualizations:n={}}=e,{data:r={}}=t,{plan:i={}}=r,{summary:o=[]}=i;return o.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).reduce((e,t)=>a({},e,{[t]:n[t]}),e)},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contextualizations:t,contextualizers:n,resources:r}=e;let a=Object.keys(t).filter(e=>{const r=t[e].contextualizerId,i=n[r];return i&&"glossary"===i.type}).map(a=>o({},t[a],{contextualizer:n[t[a].contextualizerId],resource:r[t[a].resourceId],contextContent:(0,i.default)(e,a)})).reduce((e,t)=>o({},e,{[t.resourceId]:{resource:t.resource,mentions:e[t.resourceId]?e[t.resourceId].mentions.concat(t):[t]}}),{});return a=Object.keys(a).map(e=>a[e]).sort((e,t)=>e.resource.metadata.title.toLowerCase()>t.resource.metadata.title.toLowerCase()?1:-1)};var r,i=(r=n(153))&&r.__esModule?r:{default:r};function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(1),a=n(152);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.default.Component{constructor(...e){super(...e),s(this,"shouldComponentUpdate",()=>!0)}render(){let e;if(this.props.resource)e=(0,a.generateOpenUrl)((0,a.resourceToCslJSON)(this.props.resource));else{if(!this.props.cslRecord)return null;e=(0,a.generateOpenUrl)([this.props.cslRecord])}return i.default.createElement("span",{className:"peritext-structured-context-object-in-span-container Z3988",title:e})}}t.default=l,s(l,"propTypes",{cslRecord:o.PropTypes.object,resource:o.PropTypes.object}),s(l,"defaultProps",{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],n={}){let r=0;for(;r<t.length;){const i=t[r];if(-1===i.indexOf("AssetId"))return{resourceDataField:i,asset:null};if(e.data[i]&&n[e.data[i]])return{resourceDataField:i,asset:n[e.data[i]]};r++}return},t.chooseAppropriateSubAsset=void 0;t.chooseAppropriateSubAsset=(e,t=[],n)=>{let r=0;for(;r<t.length;){const i=t[r];if(e[i]&&n[e[i]])return{resourceDataField:i,asset:n[e[i]]};r++}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(40),i=a(n(263)),o=a(n(262));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=({production:e,edition:t,requestAssetData:n})=>new Promise((a,l)=>{const u=(0,i.default)(e,t),c=(0,r.uniq)(u.reduce((t,n)=>{return[...t,...(0,o.default)(e.resources[n.contextualization.resourceId])]},[])),f={};c.reduce((t,r)=>t.then(()=>new Promise((t,i)=>{n({productionId:e.id,asset:e.assets[r]}).then(n=>{f[r]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},e.assets[r],{data:n}),t()}).catch(i)})),Promise.resolve()).then(()=>{a(f)}).catch(l)});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e={metadata:{}},t={})=>{const{data:n=[]}=t,{allowAnnotation:r=!1}=n,i=e.metadata.title?`\n    <title>${e.metadata.title}</title>\n    <meta name="DC.Title" content="${e.metadata.title}"/>\n    <meta name="twitter:title" content="${e.metadata.title}" />\n    <meta name="og:title" content="${e.metadata.title}" />\n  `:"<title>Quinoa production</title>",o=e.metadata.abstract?`\n    <meta name="description" content="${e.metadata.abstract}"/>\n    <meta name="DC.Description" content="${e.metadata.abstract}"/>\n    <meta name="og:description" content="${e.metadata.abstract}" />\n    <meta name="twitter:description" content="${e.metadata.abstract}" />\n  `:"";return`\n  <meta name    = "DC.Format"\n          content = "text/html">\n  <meta name    = "DC.Type"\n          content = "data production">\n  <meta name="twitter:card" content="summary" />\n  <meta name="twitter:site" content="@peritext" />\n  <meta property="og:url" content="http://www.peritext.github.io" />\n  <meta name="og:type" content="website" />\n  ${i}\n  ${e.metadata.authors&&e.metadata.authors.length?e.metadata.authors.map(e=>`\n                    <meta name="DC.Creator" content="${`${e.given} ${e.family}`}" />\n                    <meta name="author" content="${`${e.given} ${e.family}`}" />`):""}\n  ${o}\n  ${r?'<script src="https://hypothes.is/embed.js" async><\/script>':""}\n`};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(75))&&r.__esModule?r:{default:r};var o=(e="",t=30)=>e.length>t?`${(0,i.default)(e,t)}...`:e;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOpenUrl=t.bibToSchema=void 0;t.bibToSchema=e=>{switch(e){case"book":return"Book";case"article":return"ScholarlyArticle";case"booklet":return"CreativeWork";case"conference":case"incollection":case"inherits":case"inbook":return"Chapter";case"mastersthesis":case"phdthesis":return"Thesis";case"proceedings":return"Book";case"image":return"ImageObject";case"online":return"WebSite";case"vectorsImage":return"ImageObject";case"tabularData":return"Dataset";case"video":return"VideoObject";case"audio":return"AudioObject";case"person":return"Person";case"place":return"Place";case"organization":return"Organization";case"artefact":return"Product";case"topic":case"concept":case"technology":return"Thing";default:return"CreativeWork"}};const r=(e,t)=>({key:e,value:t}),i=(e=[])=>{const t=[];return e.forEach((function(e){t.push(((e,t)=>`${e}=${encodeURIComponent(t)}`)(e.key,e.value))})),t.join("&amp;")},o={"rft.date":"date","rft.pages":"pages","rft.issn":"ISSN","rft.isbn":"ISBN",rft_id:"URL","rft.place":"address","rft.pub":"publisher","rft.atitle":"title"},a={"rft.atitle":"title","rft.jtitle":"journal","rft.volume":"volume","rft.issue":"issue"},s={"rft.btitle":"title"},l={"rft.atitle":"title","rft.btitle":"booktitle"},u=(e,t,n)=>{for(const i in n)t[n[i]]&&e.push(r(i,t[n[i]]));return e};t.generateOpenUrl=(e=[])=>{if(!e.length)return"";const t=e[0];let n=[];return n.push(r("ctx_ver","Z39.88-2004")),n.push(r("url_ver","Z39.88-2004")),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"].length&&n.push(r("rft.date",t.issued["date-parts"][0])),t.author&&t.author.length&&t.author.forEach((function(e){const t=`${e.given} ${e.family}`;n.push(r("rft.au",t)),n.push(r("dc:creator",t))})),n=u(n,t,o),"article"===t.type?((n=u(n,t,a)).push(r("rft.genre","article")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"dissertation"===t.type?(n=u(n,t,s)).push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:dissertation")):"book"===t.type?((n=u(n,t,s)).push(r("rft.genre","book")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):"proceedings"===t.type?((n=u(n,t,a)).push(r("rft.genre","proceeding")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"conferencePaper"===t.type?((n=u(n,t,a)).push(r("rft.genre","conference")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"chapter"===t.type?((n=u(n,t,l)).push(r("rft.genre","bookitem")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):(n.push(r("rft.genre","unknown")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))),i(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(264))&&r.__esModule?r:{default:r};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=new Function("try {return this===window;}catch(e){ return false;}")();class l extends i.Component{constructor(e){super(e),a(this,"setCurrentImage",e=>{this.setState({currentImage:e})}),a(this,"nextImage",()=>{const{currentImage:e}=this.state,t=e+1>this.props.resource.data.length-1?0:e+1;this.setState({currentImage:t})}),a(this,"previousImage",()=>{const{currentImage:e}=this.state,t=e-1<0?this.props.resource.data.length-1:e-1;this.setState({currentImage:t})}),a(this,"onOpenLightBox",()=>{this.setState({currentImage:0,lightBoxOpen:!0})}),a(this,"onCloseLightBox",()=>{this.setState({lightBoxOpen:!1})}),this.state={currentImage:0,lightBoxOpen:!1}}render(){const{props:{resource:e,getAppropriateAssetUri:t},state:{currentImage:n=0,lightBoxOpen:r},nextImage:a,previousImage:l,onOpenLightBox:u,onCloseLightBox:c,setCurrentImage:f}=this,d=e.data&&e.data.images&&e.data.images.map(e=>t(e)).map((t,n)=>({src:t,caption:e.data.images[n].caption,alt:e.data.images[n].caption})).filter(e=>e.src);return s?i.default.createElement("figure",null,d.length>0&&i.default.createElement("img",{src:d[n].src,onClick:u}),d.length>1?i.default.createElement("ul",{className:"image-nav-container"},d.map((e,t)=>{const r=t===n;return i.default.createElement("li",{onClick:()=>f(t),className:`image-nav-item ${r?"is-active":""}`,key:t},i.default.createElement("button",{className:`image-nav-item-counter ${r?"active":""}`},t+1))})):null,i.default.createElement(o.default,{images:d,isOpen:r,currentImage:n,onClickPrev:l,onClickNext:a,onClose:c,showImageCount:!1,rightArrowTitle:"→",backdropClosesModal:!0})):i.default.createElement("div",null,i.default.createElement("img",{src:d[n].src}))}}var u=l;t.default=u},function(e,t,n){"use strict";var r=n(577),i=[],o=[],a=r.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function s(e){var t;(t=i.length?i.pop():new l).task=e,r(t)}function l(){this.task=null}e.exports=s,l.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(o.push(e),a())}finally{this.task=null,i[i.length]=this}}},function(e,t,n){"use strict";(function(t){function n(e){i.length||(r(),!0),i[i.length]=e}e.exports=n;var r,i=[],o=0,a=1024;function s(){for(;o<i.length;){var e=o;if(o+=1,i[e].call(),o>a){for(var t=0,n=i.length-o;t<n;t++)i[t]=i[t+o];i.length-=o,o=0}}i.length=0,o=0,!1}var l,u,c,f=void 0!==t?t:self,d=f.MutationObserver||f.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof d?(l=1,u=new d(s),c=document.createTextNode(""),u.observe(c,{characterData:!0}),r=function(){l=-l,c.data=l}):r=p(s),n.requestFlush=r,n.makeRequestCallFromTimer=p}).call(this,n(33))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var i,o=n(579),a=(i=o)&&i.__esModule?i:{default:i},s=n(155);t.generateCSS=function e(t,n,r,i){var o=n.reduce(s.recursiveMerge),a={},u={},c={};return Object.keys(o).forEach((function(e){":"===e[0]?c[e]=o[e]:"@"===e[0]?u[e]=o[e]:a[e]=o[e]})),l(t,a,r,i)+Object.keys(c).map((function(e){return l(t+e,c[e],r,i)})).join("")+Object.keys(u).map((function(n){return n+"{"+e(t,[u[n]],r,i)+"}"})).join("")};var l=function(e,t,n,i){var o=function(e,t){var n={};return Object.keys(e).forEach((function(r){t&&t.hasOwnProperty(r)?n[r]=t[r](e[r]):n[r]=e[r]})),n}(t,n),l=(0,a.default)(o),u=(0,s.flatten)((0,s.objectToPairs)(l).map((function(e){var t,n,i=r(e,2),o=i[0],a=i[1];if(Array.isArray(a)){var s=(t=[],n=[],a.forEach((function(e){0===e.indexOf("-")?t.push(e):n.push(e)})),t.sort(),n.sort(),{v:t.concat(n).map((function(e){return[o,e]}))});if("object"==typeof s)return s.v}return[[o,a]]}))).map((function(e){var t=r(e,2),n=t[0],o=t[1],a=(0,s.stringifyValue)(n,o),l=(0,s.kebabifyStyleName)(n)+":"+a+";";return!1===i?l:(0,s.importantify)(l)})).join("");return u?e+"{"+u+"}":""};t.generateCSSRuleset=l},function(e,t,n){e.exports=n(580)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){Object.keys(t).forEach((function(n){var o=t[n];o instanceof Object&&!Array.isArray(o)?t[n]=e(o):Object.keys(r.default).forEach((function(e){r.default[e][n]&&(t[e+(0,i.default)(n)]=o)}))}));Object.keys(t).forEach((function(e){[].concat(t[e]).forEach((function(n,r){g.forEach((function(r){return function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];Object.keys(t).forEach((function(n){var r=e[n];Array.isArray(r)?[].concat(t[n]).forEach((function(t){var i=r.indexOf(t);i>-1&&e[n].splice(i,1),e[n].push(t)})):e[n]=t[n]}))}(t,r(e,n))}))}))}));return(0,o.default)(t)};var r=m(n(267)),i=m(n(268)),o=m(n(581)),a=m(n(583)),s=m(n(584)),l=m(n(585)),u=m(n(586)),c=m(n(587)),f=m(n(588)),d=m(n(589)),p=m(n(591)),h=m(n(592));function m(e){return e&&e.__esModule?e:{default:e}}var g=[a.default,s.default,l.default,c.default,f.default,d.default,p.default,h.default,u.default];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).sort((function(e,t){return(0,o.default)(e)&&!(0,o.default)(t)?-1:!(0,o.default)(e)&&(0,o.default)(t)?1:0})).reduce((function(t,n){return t[n]=e[n],t}),{})};var r,i=n(582),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!==e.match(/^(Webkit|Moz|O|ms)/)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return{position:["-webkit-sticky","sticky"]}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,i.default)(t)&&t.indexOf("calc(")>-1)return(0,r.default)(e,t,(function(e,t){return t.replace(/calc\(/g,e+"calc(")}))};var r=o(n(93)),i=o(n(156));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&a[t])return(0,o.default)(e,t)};var r,i=n(93),o=(r=i)&&r.__esModule?r:{default:r};var a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r[t])return{display:["-webkit-box","-moz-box","-ms-"+t+"box","-webkit-"+t,t]}};var r={flex:!0,"inline-flex":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a[e]&&s[t])return(0,o.default)(e,t)};var r,i=n(93),o=(r=i)&&r.__esModule?r:{default:r};var a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},s={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,i.default)(t)&&null!==t.match(a))return(0,r.default)(e,t)};var r=o(n(93)),i=o(n(156));function o(e){return e&&e.__esModule?e:{default:e}}var a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&u[e]){var n,s=function(e){if((0,o.default)(e))return e;var t=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g);return t.forEach((function(e,n){t[n]=Object.keys(a.default).reduce((function(t,n){var i="-"+n.toLowerCase()+"-";return Object.keys(a.default[n]).forEach((function(n){var o=(0,r.default)(n);e.indexOf(o)>-1&&"order"!==o&&(t=e.replace(o,i+o)+","+t)})),t}),e)})),t.join(",")}(t),c=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return null===e.match(/-moz-|-ms-/)})).join(",");return e.indexOf("Webkit")>-1?l({},e,c):(l(n={},"Webkit"+(0,i.default)(e),c),l(n,e,s),n)}};var r=s(n(590)),i=s(n(268)),o=s(n(156)),a=s(n(267));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0};e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,i=/^ms-/,o={};function a(e){return"-"+e.toLowerCase()}t.default=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,a);return o[e]=i.test(t)?"-"+t:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i[e])return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},i[e],r[t]||t)};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},i={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msPreferredSize"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("flexDirection"===e&&"string"==typeof t)return{WebkitBoxOrient:t.indexOf("column")>-1?"vertical":"horizontal",WebkitBoxDirection:t.indexOf("reverse")>-1?"reverse":"normal"};if(i[e])return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},i[e],r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(594);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),a=f(o),s=n(269),l=n(595),u=n(271),c=f(n(597));function f(e){return e&&e.__esModule?e:{default:e}}var d=0,p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){d++,s.canUseDOM&&(this.initialHeight=window.innerHeight)}},{key:"componentWillUnmount",value:function(){if(d=Math.max(d-1,0),s.canUseDOM){var e=window.innerHeight-this.initialHeight;e&&window.scrollTo(0,window.pageYOffset+e)}this.initialHeight=window.innerHeight}},{key:"render",value:function(){var e=this.props.accountForScrollbars&&d<1?{"padding-right":(0,u.getPadding)()+"px"}:{},t=(0,u.getDocumentHeight)()+"px";return a.default.createElement(l.SimpleToggle,{styles:r({"box-sizing":"border-box",overflow:"hidden",position:"relative",height:t},e)})}}]),t}(o.PureComponent);p.defaultProps={accountForScrollbars:!0},t.default=(0,c.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(596);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(r).default}});var i=n(270);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"SimpleToggle",{enumerable:!0,get:function(){return o(i).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(2)),i=n(270),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.isActive,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isActive"]);return t?r.default.createElement(o.default,n):null};s.defaultProps=i.defaultProps,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r=u(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.listenerOptions={capture:!1,passive:!1},u(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentDidMount",value:function(){if(s.canUseDOM){var e=this.props.touchScrollTarget,t=document.body;t&&(0,l.isTouchDevice)()&&(t.addEventListener("touchmove",l.preventTouchMove,this.listenerOptions),e&&(e.addEventListener("touchstart",l.preventInertiaScroll,this.listenerOptions),e.addEventListener("touchmove",l.allowTouchMove,this.listenerOptions)))}}},{key:"componentWillUnmount",value:function(){if(s.canUseDOM){var e=this.props.touchScrollTarget,t=document.body;t&&(0,l.isTouchDevice)()&&(t.removeEventListener("touchmove",l.preventTouchMove,this.listenerOptions),e&&(e.removeEventListener("touchstart",l.preventInertiaScroll,this.listenerOptions),e.removeEventListener("touchmove",l.allowTouchMove,this.listenerOptions)))}}},{key:"render",value:function(){return a.default.createElement(e,this.props)}}]),n}(o.PureComponent)};var i,o=n(2),a=(i=o)&&i.__esModule?i:{default:i},s=n(269),l=n(271);function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(266),i=n(265);t.StyleSheet=i.StyleSheet,t.StyleSheetServer=i.StyleSheetServer,t.StyleSheetTestUtils=i.StyleSheetTestUtils,t.css=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!1;return(0,r.injectAndGetClassName)(i,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<svg fill="'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" xml:space="preserve">\n\t\t<path d="M213.7,256L213.7,256L213.7,256L380.9,81.9c4.2-4.3,4.1-11.4-0.2-15.8l-29.9-30.6c-4.3-4.4-11.3-4.5-15.5-0.2L131.1,247.9 c-2.2,2.2-3.2,5.2-3,8.1c-0.1,3,0.9,5.9,3,8.1l204.2,212.7c4.2,4.3,11.2,4.2,15.5-0.2l29.9-30.6c4.3-4.4,4.4-11.5,0.2-15.8 L213.7,256z"/>\n\t</svg>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<svg fill="'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" xml:space="preserve">\n\t\t<path d="M298.3,256L298.3,256L298.3,256L131.1,81.9c-4.2-4.3-4.1-11.4,0.2-15.8l29.9-30.6c4.3-4.4,11.3-4.5,15.5-0.2l204.2,212.7 c2.2,2.2,3.2,5.2,3,8.1c0.1,3-0.9,5.9-3,8.1L176.7,476.8c-4.2,4.3-11.2,4.2-15.5-0.2L131.3,446c-4.3-4.4-4.4-11.5-0.2-15.8 L298.3,256z"/>\n\t</svg>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<svg fill="'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n\t\t<path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4 L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1 c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1 c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"/>\n\t</svg>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(1)),o=u(n(2)),a=n(42),s=u(n(41)),l=u(n(54));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=t.theme,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,[]),s=a.StyleSheet.create((0,l.default)(f,n));return o.default.createElement("div",r({id:"lightboxBackdrop",className:(0,a.css)(s.container)},i))}c.contextTypes={theme:i.default.object.isRequired};var f={container:{alignItems:"center",backgroundColor:s.default.container.background,boxSizing:"border-box",display:"flex",height:"100%",justifyContent:"center",left:0,paddingBottom:s.default.container.gutter.vertical,paddingLeft:s.default.container.gutter.horizontal,paddingRight:s.default.container.gutter.horizontal,paddingTop:s.default.container.gutter.vertical,position:"fixed",top:0,width:"100%",zIndex:s.default.container.zIndex}};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(1)),o=u(n(2)),a=n(42),s=u(n(41)),l=u(n(54));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=t.theme,i=e.caption,s=e.countCurrent,u=e.countSeparator,c=e.countTotal,d=e.showCount,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["caption","countCurrent","countSeparator","countTotal","showCount"]);if(!i&&!d)return null;var h=a.StyleSheet.create((0,l.default)(f,n)),m=d?o.default.createElement("div",{className:(0,a.css)(h.footerCount)},s,u,c):o.default.createElement("span",null);return o.default.createElement("div",r({className:(0,a.css)(h.footer)},p),i?o.default.createElement("figcaption",{className:(0,a.css)(h.footerCaption)},i):o.default.createElement("span",null),m)}c.propTypes={caption:i.default.oneOfType([i.default.string,i.default.element]),countCurrent:i.default.number,countSeparator:i.default.string,countTotal:i.default.number,showCount:i.default.bool},c.contextTypes={theme:i.default.object.isRequired};var f={footer:{boxSizing:"border-box",color:s.default.footer.color,cursor:"auto",display:"flex",justifyContent:"space-between",left:0,lineHeight:1.3,paddingBottom:s.default.footer.gutter.vertical,paddingLeft:s.default.footer.gutter.horizontal,paddingRight:s.default.footer.gutter.horizontal,paddingTop:s.default.footer.gutter.vertical},footerCount:{color:s.default.footer.count.color,fontSize:s.default.footer.count.fontSize,paddingLeft:"1em"},footerCaption:{flex:"1 1 0"}};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n(1)),o=c(n(2)),a=n(42),s=c(n(41)),l=c(n(54)),u=c(n(273));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=t.theme,i=e.customControls,c=e.onClose,f=e.showCloseButton,p=e.closeButtonTitle,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["customControls","onClose","showCloseButton","closeButtonTitle"]),m=a.StyleSheet.create((0,l.default)(d,n));return o.default.createElement("div",r({className:(0,a.css)(m.header)},h),i||o.default.createElement("span",null),!!f&&o.default.createElement("button",{title:p,className:(0,a.css)(m.close),onClick:c},o.default.createElement(u.default,{fill:!!n.close&&n.close.fill||s.default.close.fill,type:"close"})))}f.propTypes={customControls:i.default.array,onClose:i.default.func.isRequired,showCloseButton:i.default.bool},f.contextTypes={theme:i.default.object.isRequired};var d={header:{display:"flex",justifyContent:"space-between",height:s.default.header.height},close:{background:"none",border:"none",cursor:"pointer",outline:"none",position:"relative",top:0,verticalAlign:"bottom",zIndex:1,height:40,marginRight:-10,padding:10,width:40}};t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n(1)),a=n(2),s=d(a),l=n(42),u=d(n(606)),c=d(n(272)),f=d(n(41));function d(e){return e&&e.__esModule?e:{default:e}}var p=l.StyleSheet.create({paginatedThumbnails:{bottom:f.default.container.gutter.vertical,height:f.default.thumbnail.size,padding:"0 50px",position:"absolute",textAlign:"center",whiteSpace:"nowrap",left:"50%",transform:"translateX(-50%)"}}),h={height:f.default.thumbnail.size+2*f.default.thumbnail.gutter,width:40},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasCustomPage:!1},n.gotoPrev=n.gotoPrev.bind(n),n.gotoNext=n.gotoNext.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){e.currentImage!==this.props.currentImage&&this.setState({hasCustomPage:!1})}},{key:"getFirst",value:function(){var e=this.props,t=e.currentImage,n=e.offset;return this.state.hasCustomPage?this.clampFirst(this.state.first):this.clampFirst(t-n)}},{key:"setFirst",value:function(e,t){var n=this.state.first;e&&(e.preventDefault(),e.stopPropagation()),n!==t&&this.setState({hasCustomPage:!0,first:t})}},{key:"gotoPrev",value:function(e){this.setFirst(e,this.getFirst()-this.props.offset)}},{key:"gotoNext",value:function(e){this.setFirst(e,this.getFirst()+this.props.offset)}},{key:"clampFirst",value:function(e){var t=this.props,n=t.images,r=2*t.offset+1;return e<0?0:e+r>n.length?n.length-r:e}},{key:"renderArrowPrev",value:function(){return this.getFirst()<=0?null:s.default.createElement(c.default,{direction:"left",size:"small",icon:"arrowLeft",onClick:this.gotoPrev,style:h,title:"Previous (Left arrow key)",type:"button"})}},{key:"renderArrowNext",value:function(){var e=this.props,t=e.offset,n=e.images,r=2*t+1;return this.getFirst()+r>=n.length?null:s.default.createElement(c.default,{direction:"right",size:"small",icon:"arrowRight",onClick:this.gotoNext,style:h,title:"Next (Right arrow key)",type:"button"})}},{key:"render",value:function(){var e=this.props,t=e.images,n=e.currentImage,i=e.onClickThumbnail,o=2*e.offset+1,a=[],c=0;return t.length<=o?a=t:(c=this.getFirst(),a=t.slice(c,c+o)),s.default.createElement("div",{className:(0,l.css)(p.paginatedThumbnails)},this.renderArrowPrev(),a.map((function(e,t){return s.default.createElement(u.default,r({key:c+t},e,{index:c+t,onClick:i,active:c+t===n}))})),this.renderArrowNext())}}]),t}(a.Component);t.default=m,m.propTypes={currentImage:o.default.number,images:o.default.array,offset:o.default.number,onClickThumbnail:o.default.func.isRequired}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(1)),i=l(n(2)),o=n(42),a=l(n(41)),s=l(n(54));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=e.index,r=e.src,a=e.thumbnail,l=e.active,u=e.onClick,f=t.theme,d=a||r,p=o.StyleSheet.create((0,s.default)(c,f));return i.default.createElement("div",{className:(0,o.css)(p.thumbnail,l&&p.thumbnail__active),onClick:function(e){e.preventDefault(),e.stopPropagation(),u(n)},style:{backgroundImage:'url("'+d+'")'}})}u.propTypes={active:r.default.bool,index:r.default.number,onClick:r.default.func.isRequired,src:r.default.string,thumbnail:r.default.string},u.contextTypes={theme:r.default.object.isRequired};var c={thumbnail:{backgroundPosition:"center",backgroundSize:"cover",borderRadius:2,boxShadow:"inset 0 0 0 1px hsla(0,0%,100%,.2)",cursor:"pointer",display:"inline-block",height:a.default.thumbnail.size,margin:a.default.thumbnail.gutter,overflow:"hidden",width:a.default.thumbnail.size},thumbnail__active:{boxShadow:"inset 0 0 0 2px "+a.default.thumbnail.activeBorderColor}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(1)),o=n(2),a=c(o),s=n(608),l=n(46),u=c(n(616));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.portalElement=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=document.createElement("div");document.body.appendChild(e),this.portalElement=e,this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){(0,l.render)(a.default.createElement(u.default,{context:this.context},a.default.createElement("div",null,a.default.createElement("style",null,"\n\t\t\t\t.fade-enter { opacity: 0.01; }\n\t\t\t\t.fade-enter.fade-enter-active { opacity: 1; transition: opacity 200ms; }\n\t\t\t\t.fade-leave { opacity: 1; }\n\t\t\t\t.fade-leave.fade-leave-active { opacity: 0.01; transition: opacity 200ms; }\n\t\t"),a.default.createElement(s.TransitionGroup,this.props,a.default.createElement(s.CSSTransition,{timeout:{enter:200,exit:200},classNames:"fade"},this.props.children)))),this.portalElement)}},{key:"componentWillUnmount",value:function(){(0,l.unmountComponentAtNode)(this.portalElement),document.body.removeChild(this.portalElement)}},{key:"render",value:function(){return null}}]),t}(o.Component);t.default=f,f.contextTypes={theme:i.default.object.isRequired}},function(e,t,n){"use strict";var r=s(n(609)),i=s(n(614)),o=s(n(277)),a=s(n(274));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(1));var r=s(n(610)),i=s(n(613)),o=s(n(2)),a=s(n(274));n(276);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))},f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),u(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,o=n?r+" "+i:i;t.removeClasses(e,n?"appear":"enter"),u(e,o),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),u(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),u(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{className:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&c(e,r),i&&c(e,i),o&&c(e,o)},i.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,u(e,t))},i.render=function(){var e=l({},this.props);return delete e.classNames,o.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);f.defaultProps={classNames:""},f.propTypes={};var d=f;t.default=d,e.exports=t.default},function(e,t,n){"use strict";var r=n(611);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(612));e.exports=t.default},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;a(n(1));var r=a(n(2)),i=n(46),o=a(n(277));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(o=s.props)[e].apply(o,n),this.props[e]&&this.props[e]((0,i.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=o,t.getInitialChildMapping=function(e,t){return i(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=i(e.children),l=o(t,s);return Object.keys(l).forEach((function(i){var o=l[i];if((0,r.isValidElement)(o)){var u=i in t,c=i in s,f=t[i],d=(0,r.isValidElement)(f)&&!f.props.in;!c||u&&!d?c||!u||d?c&&u&&(0,r.isValidElement)(f)&&(l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:f.props.in,exit:a(o,"exit",e),enter:a(o,"enter",e)})):l[i]=(0,r.cloneElement)(o,{in:!1}):l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",e),enter:a(o,"enter",e)})}})),l};var r=n(2);function i(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function o(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r},s=n(2);var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getChildContext",value:function(){return this.props.context}},{key:"render",value:function(){return s.Children.only(this.props.children)}}]),t}(s.Component);l.propTypes={context:a.default.object.isRequired},l.childContextTypes={theme:a.default.object},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(2)),o=n(42);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=o.StyleSheet.create(u(e));return i.default.createElement("div",{className:(0,o.css)(t.spinner)},i.default.createElement("div",{className:(0,o.css)(t.ripple)}))};s.propTypes={color:r.default.string,size:r.default.number};var l={"0%":{top:"50%",left:"50%",width:0,height:0,opacity:1},"100%":{top:0,left:0,width:"100%",height:"100%",opacity:0}},u=function(e){var t=e.color,n=e.size;return{spinner:{display:"inline-block",position:"relative",width:n,height:n},ripple:{position:"absolute",border:"4px solid "+t,opacity:1,borderRadius:"50%",animationName:l,animationDuration:"1s",animationTimingFunction:"cubic-bezier(0, 0.2, 0.8, 1)",animationIterationCount:"infinite"}}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.forEach((function(e){return t[e]=t[e].bind(t)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(2)),i=l(n(1)),o=l(n(151)),a=n(152),s=l(n(621));function l(e){return e&&e.__esModule?e:{default:e}}const u=({resource:e,renderingMode:t="screened",assets:n={},children:i,contextualizer:l={}},{})=>{const{parameters:u={}}=l,{showOnlyFirstImage:c=!1}=u;switch(t){case"screened":const u=e=>{const r=(0,a.chooseAppropriateSubAsset)(e,o.default.profile.inline.assetPickingRules.image[t],n);if(r)return r.asset.data};return r.default.createElement(s.default,{getAppropriateAssetUri:u,resource:e,contextualizer:l});default:return r.default.createElement("span",{className:"static-images-container inline"},(c&&e.data.images.length?[e.data.images[0]]:e.data.images).map((e,s)=>{const l=(0,a.chooseAppropriateSubAsset)(e,o.default.profile.inline.assetPickingRules.image[t],n);if(l){const e=l.asset.data;return r.default.createElement("span",{key:s,className:"specific-image-container inline-images-container"},r.default.createElement("img",{src:e}),i)}return null}))}};u.contextTypes={productionAssets:i.default.object};var c=u;t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(264))&&r.__esModule?r:{default:r};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=new Function("try {return this===window;}catch(e){ return false;}")();class l extends i.Component{constructor(e){super(e),a(this,"setCurrentImage",e=>{this.setState({currentImage:e})}),a(this,"nextImage",()=>{const{currentImage:e}=this.state,t=e+1>this.props.resource.data.length-1?0:e+1;this.setState({currentImage:t})}),a(this,"previousImage",()=>{const{currentImage:e}=this.state,t=e-1<0?this.props.resource.data.length-1:e-1;this.setState({currentImage:t})}),a(this,"onOpenLightBox",()=>{this.setState({currentImage:0,lightBoxOpen:!0})}),a(this,"onCloseLightBox",()=>{this.setState({lightBoxOpen:!1})}),this.state={currentImage:0,lightBoxOpen:!1}}render(){const{props:{resource:e,getAppropriateAssetUri:t,contextualizer:{parameters:n={}}},state:{currentImage:r=0,lightBoxOpen:a},nextImage:l,previousImage:u,onOpenLightBox:c,onCloseLightBox:f,setCurrentImage:d}=this;let p=e.data&&e.data.images&&e.data.images.map(e=>t(e)).map((t,n)=>({src:t,caption:e.data.images[n].caption,alt:e.data.images[n].caption})).filter(e=>e.src);return n.showOnlyFirstImage&&p.length&&(p=[p[0]]),[i.default.createElement("span",{key:1,className:"inline-images-container"},p.map((e,t)=>{return i.default.createElement("img",{key:t,src:p[t].src,onClick:()=>{d(t),c()}})})),s?i.default.createElement(o.default,{key:2,images:p,isOpen:a,currentImage:r,onClickPrev:u,onClickNext:l,onClose:f,showImageCount:!1,rightArrowTitle:"→",backdropClosesModal:!0}):null]}}var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Block=void 0;var r=o(n(623)),i=o(n(624));function o(e){return e&&e.__esModule?e:{default:e}}const a=r.default;t.Block=a;const s=i.default;t.meta=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};const o=({resource:e})=>i.default.createElement("pre",null,i.default.createElement("code",null,e.data.html));o.contextTypes={};var a=o;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={id:"sourceCode",type:"peritext-contextualizer",name:"Embed source code contextualizer",acceptedResourceTypes:[{type:"embed"}],profile:{block:{mutable:!1,assetPickingRules:{element:{screened:["html"],paged:["html"]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.Block=void 0;var r=o(n(626)),i=o(n(157));function o(e){return e&&e.__esModule?e:{default:e}}const a=r.default;t.Block=a;const s=i.default;t.meta=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=s(n(1)),o=s(n(157)),a=n(158);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=new Function("try {return this===window;}catch(e){ return false;}")();let f,d;c&&(f=n(340).VegaLite,d=n(340).Vega);class p extends r.Component{constructor(...e){super(...e),u(this,"componentDidCatch",e=>{console.error("vega contextualizer crashed with error:",e)}),u(this,"render",()=>{const{props:{resource:e,contextualizer:t={},contextualization:n={},renderingMode:i},context:{productionAssets:s,preprocessedContextualizations:u}}=this,p=(0,a.chooseAppropriateAsset)(e,o.default.profile.block.assetPickingRules.element[i],s);let h;if(!p)return null;h=p.resourceDataField;const{parameters:m={}}=t,{vegaLiteSpecificationCode:g="",liteMode:b=!0}=m,y=p.asset;return r.default.createElement("div",{id:n.id,className:`peritext-contextualization block vegaLite rendering-mode-${i} asset-field-${h}`},(()=>{if(!c){if(u&&u[n.id]){if(u[n.id].svg)return r.default.createElement("div",{dangerouslySetInnerHTML:{__html:u[n.id].svg}});if(u[n.id].base64)return r.default.createElement("img",{src:u[n.id].base64})}return null}switch(h){case"dataAssetId":let e;try{e=JSON.parse(g)}catch(e){return r.default.createElement("div",null,"Invalid vegaLite specification (bad JSON):",r.default.createElement("pre",null,r.default.createElement("code",null,g)))}const t=(y.data||[]).map(e=>Object.keys(e).reduce((t,n)=>l({},t,{[n]:isNaN(+e[n])?e[n]:+e[n]}),{})),n=b?"https://vega.github.io/schema/vega-lite/v4.json":"https://vega.github.io/schema/vega/v4.json";let i=Array.isArray(e.data)?e.data:[],o={};i.length&&(o=i.find(e=>"data"===e.name)||{},i=i.filter(e=>"data"!==e.name));const a=l({$schema:n},e,{data:[l({name:"data",values:t},o),...i]});return b?r.default.createElement(f,{spec:a}):r.default.createElement(d,{spec:a});default:return null}})())})}}u(p,"contextTypes",{productionAssets:i.default.object,preprocessedContextualizations:i.default.object});var h=p;t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncPrerender=void 0;var r,i=n(158),o=n(77),a=(r=n(157))&&r.__esModule?r:{default:r},s=n(185);function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.asyncPrerender=({resource:e={},contextualizer:t={},contextualization:n={},productionAssets:r={},renderingMode:u="paged"})=>new Promise((n,c)=>{const f=(0,i.chooseAppropriateAsset)(e,a.default.profile.block.assetPickingRules.element[u],r);let d;if(!f)return null;d=f.resourceDataField;const{parameters:p={}}=t,{vegaLiteSpecificationCode:h="",liteMode:m=!0}=p,g=f.asset;let b;try{b=JSON.parse(h)}catch(e){c(e)}const y=(g.data||[]).map(e=>Object.keys(e).reduce((t,n)=>l({},t,{[n]:isNaN(+e[n])?e[n]:+e[n]}),{})),v=m?"https://vega.github.io/schema/vega-lite/v4.json":"https://vega.github.io/schema/vega/v4.json";let x=Array.isArray(b.data)?b.data:[],_={};x.length&&(_=x.find(e=>"data"===e.name)||{},x=x.filter(e=>"data"!==e.name));const w=l({$schema:v},b,{data:[l({name:"data",values:y},_),...x]});let O;(O=m?new o.View((0,o.parse)((0,s.compile)(w).spec),{renderer:"none"}):new o.View((0,o.parse)(w),{renderer:"none"})).toCanvas().then((function(e){const t=e.toDataURL();n({base64:t})})).catch(c)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{contextualizations:n,contextualizers:a,resources:s}=e,u=Object.keys(n).reduce((e,t)=>{const r=n[t],i=a[r.contextualizerId];return l({},e,{[t]:l({},r,{resource:s[r.resourceId],contextualizer:i,type:i?i.type:c})})},{}),f=Object.keys(u).filter(e=>"glossary"!==u[e].type).map(e=>u[e]);return Object.keys(t.citationItems).map(n=>{const a=f.filter(e=>{if(e.resource){const t=(0,i.default)(e.resource);return t&&t[0]&&t[0].id===n}}),s=(0,o.makeBibliography)(t.citationItems,e.settings.citationStyle.data,e.settings.citationLocale.data,{select:[{field:"id",value:n}]}),u=s&&s[1]&&s[1][0];return{citationKey:n,title:u,item:t.citationItems[n],mentions:a.map(t=>l({},t,{contextContent:(0,r.default)(e,t.id)}))}})};var r=s(n(159)),i=s(n(160)),o=n(30),a=n(12);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:c}}=a.constants},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({production:e,sectionId:t,edition:n}){const{contextualizations:r={},contextualizers:o={},resources:s={}}=e,c=n?u({production:e,edition:n}):r,f=Object.keys(c).filter(e=>!t||r[e].sectionId===t).reduce((e,t)=>{const n=r[t],i=o[n.contextualizerId];return a({},e,{[t]:a({},n,{resource:s[n.resourceId],additionalResources:n.additionalResources?n.additionalResources.map(e=>s[e]):[],contextualizer:i,type:i?i.type:l})})},{}),d=Object.keys(f).filter(e=>"bib"===f[e].type).map(e=>f[e]),p=Object.keys(f).filter(e=>f[e]&&f[e].resource&&"glossary"!==f[e].resource.metadata.type).reduce((e,t)=>{const n=f[t],r=[...(0,i.default)(n.resource),...n.additionalResources?n.additionalResources.map(e=>(0,i.default)(e)):[]].flat().reduce((e,t)=>a({},e,{[t.id]:t}),{});return a({},e,r)},{}),h=d.map((e,t)=>{const n=e.id,a=r[n],s=o[a.contextualizerId];return{citationID:n,citationItems:[...(0,i.default)(e.resource),...e.additionalResources?e.additionalResources.map(e=>(0,i.default)(e)):[]].flat().map(e=>({locator:s.locator,prefix:s.prefix,suffix:s.suffix,id:e.id})),properties:{noteIndex:t+1}}});return{citationData:h.map((e,t)=>[e,h.slice(0,0===t?0:t).map(e=>[e.citationID,e.properties.noteIndex]),[]]),citationItems:p}};var r,i=(r=n(160))&&r.__esModule?r:{default:r},o=n(12);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:l}}=o.constants,u=({production:e={},edition:t={}})=>{const{contextualizations:n={}}=e,{data:r={}}=t,{plan:i={}}=r,{summary:o=[]}=i;return o.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).reduce((e,t)=>a({},e,{[t]:n[t]}),e)},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contextualizations:t,contextualizers:n,resources:r}=e;let a=Object.keys(t).filter(e=>{const r=t[e].contextualizerId,i=n[r];return i&&"glossary"===i.type}).map(a=>o({},t[a],{contextualizer:n[t[a].contextualizerId],resource:r[t[a].resourceId],contextContent:(0,i.default)(e,a)})).reduce((e,t)=>o({},e,{[t.resourceId]:{resource:t.resource,mentions:e[t.resourceId]?e[t.resourceId].mentions.concat(t):[t]}}),{});return a=Object.keys(a).map(e=>a[e]).sort((e,t)=>e.resource.metadata.title.toLowerCase()>t.resource.metadata.title.toLowerCase()?1:-1)};var r,i=(r=n(159))&&r.__esModule?r:{default:r};function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(1),a=n(158);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.default.Component{constructor(...e){super(...e),s(this,"shouldComponentUpdate",()=>!0)}render(){let e;if(this.props.resource)e=(0,a.generateOpenUrl)((0,a.resourceToCslJSON)(this.props.resource));else{if(!this.props.cslRecord)return null;e=(0,a.generateOpenUrl)([this.props.cslRecord])}return i.default.createElement("span",{className:"peritext-structured-context-object-in-span-container Z3988",title:e})}}t.default=l,s(l,"propTypes",{cslRecord:o.PropTypes.object,resource:o.PropTypes.object}),s(l,"defaultProps",{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],n={}){let r=0;for(;r<t.length;){const i=t[r];if(-1===i.indexOf("AssetId"))return{resourceDataField:i,asset:null};if(e.data[i]&&n[e.data[i]])return{resourceDataField:i,asset:n[e.data[i]]};r++}return},t.chooseAppropriateSubAsset=void 0;t.chooseAppropriateSubAsset=(e,t=[],n)=>{let r=0;for(;r<t.length;){const i=t[r];if(e[i]&&n[e[i]])return{resourceDataField:i,asset:n[e[i]]};r++}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(40),i=a(n(279)),o=a(n(278));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=({production:e,edition:t,requestAssetData:n})=>new Promise((a,l)=>{const u=(0,i.default)(e,t),c=(0,r.uniq)(u.reduce((t,n)=>{return[...t,...(0,o.default)(e.resources[n.contextualization.resourceId])]},[])),f={};c.reduce((t,r)=>t.then(()=>new Promise((t,i)=>{n({productionId:e.id,asset:e.assets[r]}).then(n=>{f[r]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},e.assets[r],{data:n}),t()}).catch(i)})),Promise.resolve()).then(()=>{a(f)}).catch(l)});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e={metadata:{}},t={})=>{const{data:n=[]}=t,{allowAnnotation:r=!1}=n,i=e.metadata.title?`\n    <title>${e.metadata.title}</title>\n    <meta name="DC.Title" content="${e.metadata.title}"/>\n    <meta name="twitter:title" content="${e.metadata.title}" />\n    <meta name="og:title" content="${e.metadata.title}" />\n  `:"<title>Quinoa production</title>",o=e.metadata.abstract?`\n    <meta name="description" content="${e.metadata.abstract}"/>\n    <meta name="DC.Description" content="${e.metadata.abstract}"/>\n    <meta name="og:description" content="${e.metadata.abstract}" />\n    <meta name="twitter:description" content="${e.metadata.abstract}" />\n  `:"";return`\n  <meta name    = "DC.Format"\n          content = "text/html">\n  <meta name    = "DC.Type"\n          content = "data production">\n  <meta name="twitter:card" content="summary" />\n  <meta name="twitter:site" content="@peritext" />\n  <meta property="og:url" content="http://www.peritext.github.io" />\n  <meta name="og:type" content="website" />\n  ${i}\n  ${e.metadata.authors&&e.metadata.authors.length?e.metadata.authors.map(e=>`\n                    <meta name="DC.Creator" content="${`${e.given} ${e.family}`}" />\n                    <meta name="author" content="${`${e.given} ${e.family}`}" />`):""}\n  ${o}\n  ${r?'<script src="https://hypothes.is/embed.js" async><\/script>':""}\n`};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(75))&&r.__esModule?r:{default:r};var o=(e="",t=30)=>e.length>t?`${(0,i.default)(e,t)}...`:e;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOpenUrl=t.bibToSchema=void 0;t.bibToSchema=e=>{switch(e){case"book":return"Book";case"article":return"ScholarlyArticle";case"booklet":return"CreativeWork";case"conference":case"incollection":case"inherits":case"inbook":return"Chapter";case"mastersthesis":case"phdthesis":return"Thesis";case"proceedings":return"Book";case"image":return"ImageObject";case"online":return"WebSite";case"vectorsImage":return"ImageObject";case"tabularData":return"Dataset";case"video":return"VideoObject";case"audio":return"AudioObject";case"person":return"Person";case"place":return"Place";case"organization":return"Organization";case"artefact":return"Product";case"topic":case"concept":case"technology":return"Thing";default:return"CreativeWork"}};const r=(e,t)=>({key:e,value:t}),i=(e=[])=>{const t=[];return e.forEach((function(e){t.push(((e,t)=>`${e}=${encodeURIComponent(t)}`)(e.key,e.value))})),t.join("&amp;")},o={"rft.date":"date","rft.pages":"pages","rft.issn":"ISSN","rft.isbn":"ISBN",rft_id:"URL","rft.place":"address","rft.pub":"publisher","rft.atitle":"title"},a={"rft.atitle":"title","rft.jtitle":"journal","rft.volume":"volume","rft.issue":"issue"},s={"rft.btitle":"title"},l={"rft.atitle":"title","rft.btitle":"booktitle"},u=(e,t,n)=>{for(const i in n)t[n[i]]&&e.push(r(i,t[n[i]]));return e};t.generateOpenUrl=(e=[])=>{if(!e.length)return"";const t=e[0];let n=[];return n.push(r("ctx_ver","Z39.88-2004")),n.push(r("url_ver","Z39.88-2004")),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"].length&&n.push(r("rft.date",t.issued["date-parts"][0])),t.author&&t.author.length&&t.author.forEach((function(e){const t=`${e.given} ${e.family}`;n.push(r("rft.au",t)),n.push(r("dc:creator",t))})),n=u(n,t,o),"article"===t.type?((n=u(n,t,a)).push(r("rft.genre","article")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"dissertation"===t.type?(n=u(n,t,s)).push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:dissertation")):"book"===t.type?((n=u(n,t,s)).push(r("rft.genre","book")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):"proceedings"===t.type?((n=u(n,t,a)).push(r("rft.genre","proceeding")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"conferencePaper"===t.type?((n=u(n,t,a)).push(r("rft.genre","conference")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"chapter"===t.type?((n=u(n,t,l)).push(r("rft.genre","bookitem")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):(n.push(r("rft.genre","unknown")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))),i(n)}},function(e,t,n){"use strict";const r=n(638).default,i=n(281).default;e.exports={Block:r,meta:i,defaultCss:".ReactTable{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border:1px solid rgba(0,0,0,0.1);}.ReactTable *{box-sizing:border-box}.ReactTable .rt-table{-webkit-box-flex:1;-ms-flex:auto 1;flex:auto 1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;width:100%;border-collapse:collapse;overflow:auto}.ReactTable .rt-thead{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.ReactTable .rt-thead.-headerGroups{background:rgba(0,0,0,0.03);border-bottom:1px solid rgba(0,0,0,0.05)}.ReactTable .rt-thead.-filters{border-bottom:1px solid rgba(0,0,0,0.05);}.ReactTable .rt-thead.-filters input,.ReactTable .rt-thead.-filters select{border:1px solid rgba(0,0,0,0.1);background:#fff;padding:5px 7px;font-size:inherit;border-radius:3px;font-weight:normal;outline:none}.ReactTable .rt-thead.-filters .rt-th{border-right:1px solid rgba(0,0,0,0.02)}.ReactTable .rt-thead.-header{box-shadow:0 2px 15px 0 rgba(0,0,0,0.15)}.ReactTable .rt-thead .rt-tr{text-align:center}.ReactTable .rt-thead .rt-th,.ReactTable .rt-thead .rt-td{padding:5px 5px;line-height:normal;position:relative;border-right:1px solid rgba(0,0,0,0.05);transition:box-shadow .3s cubic-bezier(.175,.885,.32,1.275);box-shadow:inset 0 0 0 0 transparent;}.ReactTable .rt-thead .rt-th.-sort-asc,.ReactTable .rt-thead .rt-td.-sort-asc{box-shadow:inset 0 3px 0 0 rgba(0,0,0,0.6)}.ReactTable .rt-thead .rt-th.-sort-desc,.ReactTable .rt-thead .rt-td.-sort-desc{box-shadow:inset 0 -3px 0 0 rgba(0,0,0,0.6)}.ReactTable .rt-thead .rt-th.-cursor-pointer,.ReactTable .rt-thead .rt-td.-cursor-pointer{cursor:pointer}.ReactTable .rt-thead .rt-th:last-child,.ReactTable .rt-thead .rt-td:last-child{border-right:0}.ReactTable .rt-thead .rt-resizable-header{overflow:visible;}.ReactTable .rt-thead .rt-resizable-header:last-child{overflow:hidden}.ReactTable .rt-thead .rt-resizable-header-content{overflow:hidden;text-overflow:ellipsis}.ReactTable .rt-thead .rt-header-pivot{border-right-color:#f7f7f7}.ReactTable .rt-thead .rt-header-pivot:after,.ReactTable .rt-thead .rt-header-pivot:before{left:100%;top:50%;border:solid transparent;content:\" \";height:0;width:0;position:absolute;pointer-events:none}.ReactTable .rt-thead .rt-header-pivot:after{border-color:rgba(255,255,255,0);border-left-color:#fff;border-width:8px;margin-top:-8px}.ReactTable .rt-thead .rt-header-pivot:before{border-color:rgba(102,102,102,0);border-left-color:#f7f7f7;border-width:10px;margin-top:-10px}.ReactTable .rt-tbody{-webkit-box-flex:99999;-ms-flex:99999 1 auto;flex:99999 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:auto;}.ReactTable .rt-tbody .rt-tr-group{border-bottom:solid 1px rgba(0,0,0,0.05);}.ReactTable .rt-tbody .rt-tr-group:last-child{border-bottom:0}.ReactTable .rt-tbody .rt-td{border-right:1px solid rgba(0,0,0,0.02);}.ReactTable .rt-tbody .rt-td:last-child{border-right:0}.ReactTable .rt-tbody .rt-expandable{cursor:pointer;text-overflow:clip}.ReactTable .rt-tr-group{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.ReactTable .rt-tr{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.ReactTable .rt-th,.ReactTable .rt-td{-webkit-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0;white-space:nowrap;text-overflow:ellipsis;padding:7px 5px;overflow:hidden;transition:.3s ease;transition-property:width,min-width,padding,opacity;}.ReactTable .rt-th.-hidden,.ReactTable .rt-td.-hidden{width:0 !important;min-width:0 !important;padding:0 !important;border:0 !important;opacity:0 !important}.ReactTable .rt-expander{display:inline-block;position:relative;margin:0;color:transparent;margin:0 10px;}.ReactTable .rt-expander:after{content:'';position:absolute;width:0;height:0;top:50%;left:50%;-webkit-transform:translate(-50%,-50%) rotate(-90deg);transform:translate(-50%,-50%) rotate(-90deg);border-left:5.04px solid transparent;border-right:5.04px solid transparent;border-top:7px solid rgba(0,0,0,0.8);transition:all .3s cubic-bezier(.175,.885,.32,1.275);cursor:pointer}.ReactTable .rt-expander.-open:after{-webkit-transform:translate(-50%,-50%) rotate(0);transform:translate(-50%,-50%) rotate(0)}.ReactTable .rt-resizer{display:inline-block;position:absolute;width:36px;top:0;bottom:0;right:-18px;cursor:col-resize;z-index:10}.ReactTable .rt-tfoot{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;box-shadow:0 0 15px 0 rgba(0,0,0,0.15);}.ReactTable .rt-tfoot .rt-td{border-right:1px solid rgba(0,0,0,0.05);}.ReactTable .rt-tfoot .rt-td:last-child{border-right:0}.ReactTable.-striped .rt-tr.-odd{background:rgba(0,0,0,0.03)}.ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover{background:rgba(0,0,0,0.05)}.ReactTable .-pagination{z-index:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:3px;box-shadow:0 0 15px 0 rgba(0,0,0,0.1);border-top:2px solid rgba(0,0,0,0.1);}.ReactTable .-pagination input,.ReactTable .-pagination select{border:1px solid rgba(0,0,0,0.1);background:#fff;padding:5px 7px;font-size:inherit;border-radius:3px;font-weight:normal;outline:none}.ReactTable .-pagination .-btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:block;width:100%;height:100%;border:0;border-radius:3px;padding:6px;font-size:1em;color:rgba(0,0,0,0.6);background:rgba(0,0,0,0.1);transition:all .1s ease;cursor:pointer;outline:none;}.ReactTable .-pagination .-btn[disabled]{opacity:.5;cursor:default}.ReactTable .-pagination .-btn:not([disabled]):hover{background:rgba(0,0,0,0.3);color:#fff}.ReactTable .-pagination .-previous,.ReactTable .-pagination .-next{-webkit-box-flex:1;-ms-flex:1;flex:1;text-align:center}.ReactTable .-pagination .-center{-webkit-box-flex:1.5;-ms-flex:1.5;flex:1.5;text-align:center;margin-bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.ReactTable .-pagination .-pageInfo{display:inline-block;margin:3px 10px;white-space:nowrap}.ReactTable .-pagination .-pageJump{display:inline-block;}.ReactTable .-pagination .-pageJump input{width:70px;text-align:center}.ReactTable .-pagination .-pageSizeOptions{margin:3px 10px}.ReactTable .rt-noData{display:block;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(255,255,255,0.8);transition:all .3s ease;z-index:1;pointer-events:none;padding:20px;color:rgba(0,0,0,0.5)}.ReactTable .-loading{display:block;position:absolute;left:0;right:0;top:0;bottom:0;background:rgba(255,255,255,0.8);transition:all .3s ease;z-index:-1;opacity:0;pointer-events:none;}.ReactTable .-loading > div{position:absolute;display:block;text-align:center;width:100%;top:50%;left:0;font-size:15px;color:rgba(0,0,0,0.6);-webkit-transform:translateY(-52%);transform:translateY(-52%);transition:all .3s cubic-bezier(.25,.46,.45,.94)}.ReactTable .-loading.-active{opacity:1;z-index:2;pointer-events:all;}.ReactTable .-loading.-active > div{-webkit-transform:translateY(50%);transform:translateY(50%)}.ReactTable .rt-resizing .rt-th,.ReactTable .rt-resizing .rt-td{transition:none !important;cursor:col-resize;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(2)),i=l(n(281)),o=n(282),a=l(n(648)),s=l(n(649));function l(e){return e&&e.__esModule?e:{default:e}}var u=({resource:e,contextualizer:t={},renderingMode:n="screened",assets:l={}})=>{const{parameters:u={simpleTable:!1}}=t,c=(0,o.chooseAppropriateAsset)(e,i.default.profile.block.assetPickingRules.element[n],l);if(c){const e=c.asset.data||[],i=e.length?e[0]:{},o=Object.keys(i).filter(e=>e.trim().length).map(e=>({Header:e,accessor:e}));switch(n){case"screened":return u.simpleTable?r.default.createElement("div",{className:"static-table-container"},r.default.createElement(s.default,{data:e,columns:o,contextualizer:t})):r.default.createElement("div",{className:"dynamic-table-container"},r.default.createElement(a.default,{data:e,contextualizer:t,columns:o}));case"paged":case"micro":return r.default.createElement(s.default,{data:e,columns:o,contextualizer:t});default:return null}}return null};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{contextualizations:n,contextualizers:a,resources:s}=e,u=Object.keys(n).reduce((e,t)=>{const r=n[t],i=a[r.contextualizerId];return l({},e,{[t]:l({},r,{resource:s[r.resourceId],contextualizer:i,type:i?i.type:c})})},{}),f=Object.keys(u).filter(e=>"glossary"!==u[e].type).map(e=>u[e]);return Object.keys(t.citationItems).map(n=>{const a=f.filter(e=>{if(e.resource){const t=(0,i.default)(e.resource);return t&&t[0]&&t[0].id===n}}),s=(0,o.makeBibliography)(t.citationItems,e.settings.citationStyle.data,e.settings.citationLocale.data,{select:[{field:"id",value:n}]}),u=s&&s[1]&&s[1][0];return{citationKey:n,title:u,item:t.citationItems[n],mentions:a.map(t=>l({},t,{contextContent:(0,r.default)(e,t.id)}))}})};var r=s(n(161)),i=s(n(162)),o=n(30),a=n(12);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:c}}=a.constants},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({production:e,sectionId:t,edition:n}){const{contextualizations:r={},contextualizers:o={},resources:s={}}=e,c=n?u({production:e,edition:n}):r,f=Object.keys(c).filter(e=>!t||r[e].sectionId===t).reduce((e,t)=>{const n=r[t],i=o[n.contextualizerId];return a({},e,{[t]:a({},n,{resource:s[n.resourceId],additionalResources:n.additionalResources?n.additionalResources.map(e=>s[e]):[],contextualizer:i,type:i?i.type:l})})},{}),d=Object.keys(f).filter(e=>"bib"===f[e].type).map(e=>f[e]),p=Object.keys(f).filter(e=>f[e]&&f[e].resource&&"glossary"!==f[e].resource.metadata.type).reduce((e,t)=>{const n=f[t],r=[...(0,i.default)(n.resource),...n.additionalResources?n.additionalResources.map(e=>(0,i.default)(e)):[]].flat().reduce((e,t)=>a({},e,{[t.id]:t}),{});return a({},e,r)},{}),h=d.map((e,t)=>{const n=e.id,a=r[n],s=o[a.contextualizerId];return{citationID:n,citationItems:[...(0,i.default)(e.resource),...e.additionalResources?e.additionalResources.map(e=>(0,i.default)(e)):[]].flat().map(e=>({locator:s.locator,prefix:s.prefix,suffix:s.suffix,id:e.id})),properties:{noteIndex:t+1}}});return{citationData:h.map((e,t)=>[e,h.slice(0,0===t?0:t).map(e=>[e.citationID,e.properties.noteIndex]),[]]),citationItems:p}};var r,i=(r=n(162))&&r.__esModule?r:{default:r},o=n(12);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{draftEntitiesNames:{INLINE_ASSET:l}}=o.constants,u=({production:e={},edition:t={}})=>{const{contextualizations:n={}}=e,{data:r={}}=t,{plan:i={}}=r,{summary:o=[]}=i;return o.reduce((t,n)=>{if("sections"===n.type){let r=[];return r=n.data&&n.data.customSummary&&n.data.customSummary.active?n.data.customSummary.summary.map(e=>({sectionId:e.id,containerId:n.id})):e.sectionsOrder.map(e=>({sectionId:e,containerId:n.id})),[...t,...r]}return t},[]).reduce((e,t)=>{return Object.keys(n).filter(e=>n[e].sectionId===t.sectionId).reduce((e,t)=>a({},e,{[t]:n[t]}),e)},{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contextualizations:t,contextualizers:n,resources:r}=e;let a=Object.keys(t).filter(e=>{const r=t[e].contextualizerId,i=n[r];return i&&"glossary"===i.type}).map(a=>o({},t[a],{contextualizer:n[t[a].contextualizerId],resource:r[t[a].resourceId],contextContent:(0,i.default)(e,a)})).reduce((e,t)=>o({},e,{[t.resourceId]:{resource:t.resource,mentions:e[t.resourceId]?e[t.resourceId].mentions.concat(t):[t]}}),{});return a=Object.keys(a).map(e=>a[e]).sort((e,t)=>e.resource.metadata.title.toLowerCase()>t.resource.metadata.title.toLowerCase()?1:-1)};var r,i=(r=n(161))&&r.__esModule?r:{default:r};function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(1),a=n(282);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.default.Component{constructor(...e){super(...e),s(this,"shouldComponentUpdate",()=>!0)}render(){let e;if(this.props.resource)e=(0,a.generateOpenUrl)((0,a.resourceToCslJSON)(this.props.resource));else{if(!this.props.cslRecord)return null;e=(0,a.generateOpenUrl)([this.props.cslRecord])}return i.default.createElement("span",{className:"peritext-structured-context-object-in-span-container Z3988",title:e})}}t.default=l,s(l,"propTypes",{cslRecord:o.PropTypes.object,resource:o.PropTypes.object}),s(l,"defaultProps",{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=[],n={}){let r=0;for(;r<t.length;){const i=t[r];if(-1===i.indexOf("AssetId"))return{resourceDataField:i,asset:null};if(e.data[i]&&n[e.data[i]])return{resourceDataField:i,asset:n[e.data[i]]};r++}return},t.chooseAppropriateSubAsset=void 0;t.chooseAppropriateSubAsset=(e,t=[],n)=>{let r=0;for(;r<t.length;){const i=t[r];if(e[i]&&n[e[i]])return{resourceDataField:i,asset:n[e[i]]};r++}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(40),i=a(n(284)),o=a(n(283));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=({production:e,edition:t,requestAssetData:n})=>new Promise((a,l)=>{const u=(0,i.default)(e,t),c=(0,r.uniq)(u.reduce((t,n)=>{return[...t,...(0,o.default)(e.resources[n.contextualization.resourceId])]},[])),f={};c.reduce((t,r)=>t.then(()=>new Promise((t,i)=>{n({productionId:e.id,asset:e.assets[r]}).then(n=>{f[r]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},e.assets[r],{data:n}),t()}).catch(i)})),Promise.resolve()).then(()=>{a(f)}).catch(l)});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e={metadata:{}},t={})=>{const{data:n=[]}=t,{allowAnnotation:r=!1}=n,i=e.metadata.title?`\n    <title>${e.metadata.title}</title>\n    <meta name="DC.Title" content="${e.metadata.title}"/>\n    <meta name="twitter:title" content="${e.metadata.title}" />\n    <meta name="og:title" content="${e.metadata.title}" />\n  `:"<title>Quinoa production</title>",o=e.metadata.abstract?`\n    <meta name="description" content="${e.metadata.abstract}"/>\n    <meta name="DC.Description" content="${e.metadata.abstract}"/>\n    <meta name="og:description" content="${e.metadata.abstract}" />\n    <meta name="twitter:description" content="${e.metadata.abstract}" />\n  `:"";return`\n  <meta name    = "DC.Format"\n          content = "text/html">\n  <meta name    = "DC.Type"\n          content = "data production">\n  <meta name="twitter:card" content="summary" />\n  <meta name="twitter:site" content="@peritext" />\n  <meta property="og:url" content="http://www.peritext.github.io" />\n  <meta name="og:type" content="website" />\n  ${i}\n  ${e.metadata.authors&&e.metadata.authors.length?e.metadata.authors.map(e=>`\n                    <meta name="DC.Creator" content="${`${e.given} ${e.family}`}" />\n                    <meta name="author" content="${`${e.given} ${e.family}`}" />`):""}\n  ${o}\n  ${r?'<script src="https://hypothes.is/embed.js" async><\/script>':""}\n`};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(75))&&r.__esModule?r:{default:r};var o=(e="",t=30)=>e.length>t?`${(0,i.default)(e,t)}...`:e;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOpenUrl=t.bibToSchema=void 0;t.bibToSchema=e=>{switch(e){case"book":return"Book";case"article":return"ScholarlyArticle";case"booklet":return"CreativeWork";case"conference":case"incollection":case"inherits":case"inbook":return"Chapter";case"mastersthesis":case"phdthesis":return"Thesis";case"proceedings":return"Book";case"image":return"ImageObject";case"online":return"WebSite";case"vectorsImage":return"ImageObject";case"tabularData":return"Dataset";case"video":return"VideoObject";case"audio":return"AudioObject";case"person":return"Person";case"place":return"Place";case"organization":return"Organization";case"artefact":return"Product";case"topic":case"concept":case"technology":return"Thing";default:return"CreativeWork"}};const r=(e,t)=>({key:e,value:t}),i=(e=[])=>{const t=[];return e.forEach((function(e){t.push(((e,t)=>`${e}=${encodeURIComponent(t)}`)(e.key,e.value))})),t.join("&amp;")},o={"rft.date":"date","rft.pages":"pages","rft.issn":"ISSN","rft.isbn":"ISBN",rft_id:"URL","rft.place":"address","rft.pub":"publisher","rft.atitle":"title"},a={"rft.atitle":"title","rft.jtitle":"journal","rft.volume":"volume","rft.issue":"issue"},s={"rft.btitle":"title"},l={"rft.atitle":"title","rft.btitle":"booktitle"},u=(e,t,n)=>{for(const i in n)t[n[i]]&&e.push(r(i,t[n[i]]));return e};t.generateOpenUrl=(e=[])=>{if(!e.length)return"";const t=e[0];let n=[];return n.push(r("ctx_ver","Z39.88-2004")),n.push(r("url_ver","Z39.88-2004")),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"].length&&n.push(r("rft.date",t.issued["date-parts"][0])),t.author&&t.author.length&&t.author.forEach((function(e){const t=`${e.given} ${e.family}`;n.push(r("rft.au",t)),n.push(r("dc:creator",t))})),n=u(n,t,o),"article"===t.type?((n=u(n,t,a)).push(r("rft.genre","article")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"dissertation"===t.type?(n=u(n,t,s)).push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:dissertation")):"book"===t.type?((n=u(n,t,s)).push(r("rft.genre","book")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):"proceedings"===t.type?((n=u(n,t,a)).push(r("rft.genre","proceeding")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"conferencePaper"===t.type?((n=u(n,t,a)).push(r("rft.genre","conference")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))):"chapter"===t.type?((n=u(n,t,l)).push(r("rft.genre","bookitem")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:book"))):(n.push(r("rft.genre","unknown")),n.push(r("rft_val_fmt","info:ofi/fmt:kev:mtx:journal"))),i(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(958));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=({data:e=[],columns:t=[],contextualizer:n={}})=>{const{parameters:o={}}=n,{screenedMaxRows:s,showPagination:l=!0,showPageSizeOptions:u=!0,defaultPageSize:c=5,sortable:f=!0,filterable:d=!1}=o,p=s&&"number"==typeof s&&s>0?e.slice(0,s):e;return r.default.createElement(i.default,a({data:p,columns:t},{showPagination:l,showPageSizeOptions:u,defaultPageSize:c,sortable:f,filterable:d}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};var o=({data:e=[],columns:t=[],contextualizer:n={}})=>{const{parameters:r={}}=n,{pagedMaxRows:o=10}=r,a=o&&"number"==typeof o&&o>0?e.slice(0,o):e;return i.default.createElement("table",null,i.default.createElement("thead",null,i.default.createElement("tr",null,t.map((e,t)=>i.default.createElement("th",{key:t},e.Header)))),i.default.createElement("tbody",null,a.map((e,n)=>i.default.createElement("tr",{key:n},t.map((t,n)=>i.default.createElement("th",{key:n},e[t.accessor]))))))};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(651)),i=c(n(292)),o=c(n(293)),a=c(n(98)),s=c(n(169)),l=c(n(302)),u=c(n(758));function c(e){return e&&e.__esModule?e:{default:e}}const f={Edition:r.default,EndNotes:a.default,References:i.default,Glossary:o.default,Renderer:s.default};var d={meta:u.default,components:f,css:l.default};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),i=O(n(1)),o=n(4),a=n(285),s=O(n(652)),l=O(n(732)),u=O(n(733)),c=O(n(734)),f=O(n(292)),d=O(n(293)),p=O(n(98)),h=O(n(752)),m=O(n(753)),g=O(n(754)),b=O(n(43)),y=O(n(755)),v=O(n(756)),x=O(n(301)),_=O(n(302)),w=O(n(171));function O(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const T=()=>r.default.createElement("div",{className:"composition-block empty-page"}),j=e=>{const{edition:{data:t={}},contextualizers:n={}}=e,{style:{css:r="",mode:i="merge"}={css:""}}=t,o=Object.keys(n).map(e=>n[e]&&n[e].defaultCss||"").join("\n");return"merge"===i?[_.default,o,r].join("\n"):[o,r].join("\n")},A=(e,t)=>e.data.customSummary&&e.data.customSummary.active?e.data.customSummary.summary:t.sectionsOrder,P=({production:e,edition:t,translate:n,data:i={},citations:o,publicationTitle:s,publicationSubtitle:l,id:u})=>{const c=t.data.plan.summary,{notesPosition:f="footnotes",figuresPosition:d="endOfSections",displayHeader:h=!1}=i,m=c.filter(e=>"sections"===e.type).reduce((t,n)=>[...t,...A(n,e)],[]),{figuresNumberMap:g,figures:b}=(0,a.buildFiguresNumberMap)({production:e,sectionsIds:m.map(({resourceId:e})=>e),figuresPosition:d});return[...m.map(({resourceId:t},i)=>{const a=e.resources[t];return r.default.createElement(x.default,{section:a,notesPosition:f,figuresPosition:d,figuresNumberMap:g,figures:"endOfSections"===d?b[t]:void 0,key:`${i}-${t}`,displayHeader:h,production:e,containerId:u,translate:n,citations:o,publicationTitle:s,publicationSubtitle:l})}),"endOfContents"===f?r.default.createElement(p.default,{key:"endnotes",sectionsIds:m,production:e,translate:n,citations:o,publicationTitle:s,publicationSubtitle:l}):null,"endOfContents"===d?r.default.createElement(w.default,{production:e,translate:n,figures:b,figuresNumberMap:g}):null]},C=({production:e,edition:t,translate:n,citations:i})=>{const a=t.data.plan.summary,{data:p={}}=t,{metadata:h}=e,m=p.publicationTitle||h.title,g=p.publicationSubtitle||h.subtitle;return a.map((a,p)=>{switch(a.type){case"frontCover":return r.default.createElement(s.default,S({key:p,production:e,edition:t,translate:n},a));case"titlePage":return r.default.createElement(l.default,S({key:p,production:e,edition:t,translate:n},a));case"colophon":return r.default.createElement(c.default,S({key:p,production:e,edition:t,translate:n},a));case"backCover":return r.default.createElement(u.default,S({key:p,production:e,edition:t,translate:n},a));case"emptyPage":return r.default.createElement(T,{key:p});case"tableOfContents":const h=((e,t,n)=>{const r=t.data.plan.summary,i=r.find(e=>"tableOfContents"===e.type),a=i&&+i.data.level||0;return r.reduce((t,r)=>{const{data:i={}}=r;switch(r.type){case"customPage":const{title:s,displayInTableOfContents:l}=i;return l?[...t,{title:s,level:0,href:`custom-block-${r.id}`}]:t;case"sections":case"resourceSections":const{id:u}=r,{customSummary:c={active:!1},level:f=0}=i;if(c.active){const{summary:n}=c;return[...t,...n.reduce((t,{resourceId:n,level:r})=>{const i=e.resources[n],s={"header-one":1,"header-two":2,"header-three":3,"header-four":4},l=[{title:(0,o.getResourceTitle)(i),level:f+r,href:`section-${u}-${n}`}];if(a>0){i.data.contents.contents.blocks.forEach(e=>{s[e.type]&&l.push({title:e.text,level:f+r+s[e.type],href:`title-${e.key}`})})}return[...t,...l]},[]).filter(e=>e)]}if("resourceSections"===r.type){const{data:{hideEmptyResources:n=!1}}=r;return[...t,...Object.keys(e.resources).filter(t=>{const n=e.resources[t];return i.resourceTypes.includes(n.metadata.type)}).filter(t=>{if(n){const n=e.resources[t];return(0,o.resourceHasContents)(n)}return!0}).sort(o.defaultSortResourceSections).reduce((t,n)=>{const r=e.resources[n],i={"header-one":1,"header-two":2,"header-three":3,"header-four":4},s=[{title:(0,o.getResourceTitle)(r),level:f+0,href:`section-${u}-${n}`}];if(a>0){r.data.contents.contents.blocks.forEach(e=>{i[e.type]&&s.push({title:e.text,level:f+0+i[e.type],href:`title-${e.key}`})})}return[...t,...s]},[])]}return[...t,...e.sectionsOrder.reduce((t,{resourceId:n,level:r})=>{const i=e.resources[n],s={"header-one":1,"header-two":2,"header-three":3,"header-four":4},l=[{title:(0,o.getResourceTitle)(i),level:f+r,href:`section-${u}-${n}`}];if(a>0){i.data.contents.contents.blocks.forEach(e=>{s[e.type]&&l.push({title:e.text,level:f+r+s[e.type],href:`title-${e.key}`})})}return[...t,...l]},[])];case"glossary":return[...t,{title:i.customTitle||n("Glossary list"),level:0,href:`glossary-block-${r.id}`}];case"references":return[...t,{level:0,title:i.customTitle||n("References"),href:`reference-block-${r.id}`}];default:return t}},[])})(e,t,n);return r.default.createElement(y.default,{key:p,data:a.data,tableOfContents:h,translate:n,id:a.id});case"customPage":return r.default.createElement("div",{id:a.data.customCssId||a.id,key:p,className:`composition-block custom-page ${a.data.displayPageNumber?"has-page-number":""}`},a.data.title&&r.default.createElement("h1",{id:`custom-block-${a.id}`,className:"composition-block-title peritext-block-title"},a.data.title),a.data.markdownContents&&r.default.createElement(b.default,{src:a.data.markdownContents}));case"sections":return r.default.createElement(P,S({key:p,production:e,edition:t,translate:n,citations:i,publicationTitle:m,publicationSubtitle:g},a));case"glossary":return r.default.createElement(d.default,S({key:p,production:e,edition:t,translate:n,citations:i},a));case"references":return r.default.createElement(f.default,S({key:p,production:e,edition:t,translate:n,citations:i},a));case"resourceSections":return r.default.createElement(v.default,S({key:p,production:e,edition:t,translate:n,citations:i,publicationTitle:m,publicationSubtitle:g},a));default:return r.default.createElement("div",{id:a.id,className:"composition-block",key:p},a.type)}})};class N extends r.Component{constructor(e){super(e),k(this,"shouldComponentUpdate",()=>!0),k(this,"translate",e=>{const{locale:t={}}=this.props;return t[e]||e})}getChildContext(){return{LinkComponent:this.props.LinkComponent||h.default,MentionComponent:this.props.MentionComponent||m.default,SectionLinkComponent:this.props.SectionLinkComponent||g.default,production:this.props.production,productionAssets:this.props.production.assets,preprocessedData:this.props.preprocessedData,contextualizers:this.props.contextualizers,translate:this.translate}}render(){const{props:{production:e,edition:t,contextualizers:n,renderAdditionalHTML:i=!1,preprocessedData:a},translate:s}=this,{data:l={}}=t,{additionalHTML:u=""}=l,c=a&&a.global&&a.global.citations?a.global.citations:(0,o.buildCitations)({production:e,edition:t},!0),f=j({edition:t,contextualizers:n});return[...C({production:e,edition:t,translate:s,citations:c}),r.default.createElement("style",{key:"styles",dangerouslySetInnerHTML:{__html:f}}),i?r.default.createElement("div",{id:"additional-html",key:"additional-html",dangerouslySetInnerHTML:{__html:`${u} `}}):null].filter(e=>e)}}t.default=N,N.childContextTypes={LinkComponent:i.default.func,MentionComponent:i.default.func,SectionLinkComponent:i.default.func,translate:i.default.func,production:i.default.object,productionAssets:i.default.object,contextualizers:i.default.object,preprocessedData:i.default.object}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(43)),o=a(n(97));function a(e){return e&&e.__esModule?e:{default:e}}t.default=({production:{metadata:e},edition:t,data:{backgroundColor:n,textColor:a,customCoverFooter:s,animatedBackground:l,svgData:u}={},id:c})=>{if(u)return r.default.createElement("section",{id:"front-cover",className:"composition-block front-cover",dangerouslySetInnerHTML:{__html:u}});const{data:f={}}=t,d=f.publicationTitle||e.title,p=f.publicationSubtitle||e.subtitle,h=f.publicationAuthors&&f.publicationAuthors.length?f.publicationAuthors:e.authors;return r.default.createElement("section",{id:"front-cover",className:`composition-block front-cover ${l&&"none"!==l?`with-animated-background-${l}`:""}`,style:{backgroundColor:n,color:a}},r.default.createElement("div",{className:"front-cover-content"},r.default.createElement("h1",{id:c,className:"front-cover-title"},d),p&&r.default.createElement("h2",{className:"front-cover-subtitle"},p),r.default.createElement("h3",{className:"front-cover-authors"},e.authors&&r.default.createElement(o.default,{authors:h}))),s&&s.length>0&&r.default.createElement("div",{className:"front-cover-footer"},r.default.createElement(i.default,{src:s})))}},function(e,t,n){"use strict";var r=n(654),i=n(655),o=n(656),a=n(662),s=n(664),l=n(665);e.exports=function e(){var t=[];var n=a();var y={};var v=!1;var x=-1;_.data=function(e,t){if(s(e))return 2===arguments.length?(m("data",v),y[e]=t,_):c.call(y,e)&&y[e]||null;if(e)return m("data",v),y=e,_;return y};_.freeze=w;_.attachers=t;_.use=function(e){var n;if(m("use",v),null==e);else if("function"==typeof e)s.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?a(e):i(e)}n&&(y.settings=r(y.settings||{},n));return _;function i(e){a(e.plugins),e.settings&&(n=r(n||{},e.settings))}function o(e){if("function"==typeof e)s(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?s.apply(null,e):i(e)}}function a(e){var t,n;if(null==e);else{if(!("object"==typeof e&&"length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)o(e[n])}}function s(e,n){var i=function(e){var n,r=t.length,i=-1;for(;++i<r;)if((n=t[i])[0]===e)return n}(e);i?(l(i[1])&&l(n)&&(n=r(i[1],n)),i[1]=n):t.push(u.call(arguments))}};_.parse=function(e){var t,n=o(e);if(w(),p("parse",t=_.Parser),d(t))return new t(String(n),n).parse();return t(String(n),n)};_.stringify=function(e,t){var n,r=o(t);if(w(),h("stringify",n=_.Compiler),g(e),d(n))return new n(e,r).compile();return n(e,r)};_.run=O;_.runSync=function(e,t){var n,r=!1;return O(e,t,(function(e,t){r=!0,i(e),n=t})),b("runSync","run",r),n};_.process=E;_.processSync=function(e){var t,n=!1;return w(),p("processSync",_.Parser),h("processSync",_.Compiler),E(t=o(e),(function(e){n=!0,i(e)})),b("processSync","process",n),t};return _;function _(){for(var n=e(),i=t.length,o=-1;++o<i;)n.use.apply(null,t[o]);return n.data(r(!0,{},y)),n}function w(){var e,r,i,o;if(v)return _;for(;++x<t.length;)r=(e=t[x])[0],null,!1!==(i=e[1])&&(!0===i&&(e[1]=void 0),"function"==typeof(o=r.apply(_,e.slice(1)))&&n.use(o));return v=!0,x=1/0,_}function O(e,t,r){if(g(e),w(),r||"function"!=typeof t||(r=t,t=null),!r)return new Promise(i);function i(i,a){n.run(e,o(t),(function(t,n,o){n=n||e,t?a(t):i?i(n):r(null,n,o)}))}i(null,r)}function E(e,t){if(w(),p("process",_.Parser),h("process",_.Compiler),!t)return new Promise(n);function n(n,r){var i=o(e);f.run(_,{file:i},(function(e){e?r(e):n?n(i):t(null,i)}))}n(null,t)}}().freeze();var u=[].slice,c={}.hasOwnProperty,f=a().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,i){e?n(e):(t.tree=r,t.file=i,n())}))})).use((function(e,t){t.file.contents=e.stringify(t.tree,t.file)}));function d(e){return"function"==typeof e&&function(e){var t;for(t in e)return!0;return!1}(e.prototype)}function p(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function h(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error(["Cannot invoke `"+e+"` on a frozen processor.\nCreate a new ","processor first, by invoking it: use `processor()` instead of ","`processor`."].join(""))}function g(e){if(!e||!s(e.type))throw new Error("Expected node, got `"+e+"`")}function b(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},l=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,n=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;for(t in e);return void 0===t||r.call(e,t)},u=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(a)return a(e,t).value}return e[t]};e.exports=function e(){var t,n,r,i,o,a,f=arguments[0],d=1,p=arguments.length,h=!1;for("boolean"==typeof f&&(h=f,f=arguments[1]||{},d=2),(null==f||"object"!=typeof f&&"function"!=typeof f)&&(f={});d<p;++d)if(null!=(t=arguments[d]))for(n in t)r=c(f,n),f!==(i=c(t,n))&&(h&&i&&(l(i)||(o=s(i)))?(o?(o=!1,a=r&&s(r)?r:[]):a=r&&l(r)?r:{},u(f,{name:n,newValue:e(h,a,i)})):void 0!==i&&u(f,{name:n,newValue:i}));return f}},function(e,t,n){"use strict";e.exports=function(e){if(e)throw e}},function(e,t,n){"use strict";var r=n(657),i=n(659);e.exports=i;var o=i.prototype;function a(e,t,n){var i=this.path,o=new r(e,t,n);return i&&(o.name=i+":"+o.name,o.file=i),o.fatal=!1,this.messages.push(o),o}o.message=a,o.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},o.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e},o.warn=a},function(e,t,n){"use strict";var r=n(658);function i(){}e.exports=a,i.prototype=Error.prototype,a.prototype=new i;var o=a.prototype;function a(e,t,n){var i,o,a;"string"==typeof t&&(n=t,t=null),i=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),o=r(t)||"1:1",a={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(a=t,t=t.start):a.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=a,this.source=i[0],this.ruleId=i[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},function(e,t,n){"use strict";var r={}.hasOwnProperty;function i(e){return e&&"object"==typeof e||(e={}),a(e.line)+":"+a(e.column)}function o(e){return e&&"object"==typeof e||(e={}),i(e.start)+"-"+i(e.end)}function a(e){return e&&"number"==typeof e?e:1}e.exports=function(e){if(!e||"object"!=typeof e)return null;if(r.call(e,"position")||r.call(e,"type"))return o(e.position);if(r.call(e,"start")||r.call(e,"end"))return o(e);if(r.call(e,"line")||r.call(e,"column"))return i(e);return null}},function(e,t,n){"use strict";(function(t){var r=n(163),i=n(660),o=n(661);e.exports=u;var a={}.hasOwnProperty,s=u.prototype;s.toString=function(e){var t=this.contents||"";return o(t)?t.toString(e):String(t)};var l=["history","path","basename","stem","extname","dirname"];function u(e){var n,r,i;if(e){if("string"==typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof u))return new u(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),r=-1,i=l.length;++r<i;)n=l[r],a.call(e,n)&&(this[n]=e[n]);for(n in e)-1===l.indexOf(n)&&(this[n]=e[n])}function c(e,t){if(-1!==e.indexOf(r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+r.sep+"`")}function f(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function d(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}Object.defineProperty(s,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){f(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(s,"dirname",{get:function(){return"string"==typeof this.path?r.dirname(this.path):void 0},set:function(e){d(this.path,"dirname"),this.path=r.join(e||"",this.basename)}}),Object.defineProperty(s,"basename",{get:function(){return"string"==typeof this.path?r.basename(this.path):void 0},set:function(e){f(e,"basename"),c(e,"basename"),this.path=r.join(this.dirname||"",e)}}),Object.defineProperty(s,"extname",{get:function(){return"string"==typeof this.path?r.extname(this.path):void 0},set:function(e){var t=e||"";if(c(t,"extname"),d(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=i(this.path,t)}}),Object.defineProperty(s,"stem",{get:function(){return"string"==typeof this.path?r.basename(this.path,this.extname):void 0},set:function(e){f(e,"stem"),c(e,"stem"),this.path=r.join(this.dirname||"",e+(this.extname||""))}})}).call(this,n(55))},function(e,t,n){"use strict";var r=n(163);e.exports=function(e,t){if("string"!=typeof e)return e;if(0===e.length)return e;var n=r.basename(e,r.extname(e))+t;return r.join(r.dirname(e),n)}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(663);e.exports=o,o.wrap=r;var i=[].slice;function o(){var e=[],t={run:function(){var t=-1,n=i.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!=typeof o)throw new Error("Expected function as last argument, not "+o);(function a(s){var l=e[++t],u=i.call(arguments,0).slice(1),c=n.length,f=-1;if(s)o(s);else{for(;++f<c;)null!==u[f]&&void 0!==u[f]||(u[f]=n[f]);n=u,l?r(l,a).apply(null,n):o.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},function(e,t,n){"use strict";var r=[].slice;e.exports=function(e,t){var n;return function(){var t,a=r.call(arguments,0),s=e.length>a.length;s&&a.push(i);try{t=e.apply(null,a)}catch(e){if(s&&n)throw e;return i(e)}s||(t&&"function"==typeof t.then?t.then(o,i):t instanceof Error?i(t):o(t))};function i(){n||(n=!0,t.apply(null,arguments))}function o(e){i(null,e)}}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return"[object String]"===n.call(e)}},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===r.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";var r=n(667),i=n(27),o=n(669);function a(e){var t=r(o);t.prototype.options=i(t.prototype.options,this.data("settings"),e),this.Parser=t}e.exports=a,a.Parser=o},function(e,t,n){"use strict";var r=n(27),i=n(668);e.exports=function(e){var t,n,o;for(n in i(s,e),i(a,s),t=s.prototype)(o=t[n])&&"object"==typeof o&&(t[n]="concat"in o?o.concat():r(o));return s;function a(t){return e.apply(this,t)}function s(){return this instanceof s?e.apply(this,arguments):new a(arguments)}}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";var r=n(27),i=n(670),o=n(671),a=n(672),s=n(673),l=n(679);function u(e,t){this.file=t,this.offset={},this.options=r(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=o(t).toOffset,this.unescape=a(this,"escape"),this.decode=s(this)}e.exports=u;var c=u.prototype;function f(e){var t,n=[];for(t in e)n.push(t);return n}c.setOptions=n(680),c.parse=n(683),c.options=n(287),c.exitStart=i("atStart",!0),c.enterList=i("inList",!1),c.enterLink=i("inLink",!1),c.enterBlock=i("inBlock",!1),c.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],c.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],c.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],c.blockTokenizers={newline:n(687),indentedCode:n(688),fencedCode:n(689),blockquote:n(690),atxHeading:n(691),thematicBreak:n(692),list:n(693),setextHeading:n(695),html:n(696),footnote:n(697),definition:n(699),table:n(700),paragraph:n(701)},c.inlineTokenizers={escape:n(702),autoLink:n(704),url:n(705),html:n(707),link:n(708),reference:n(709),strong:n(710),emphasis:n(712),deletion:n(715),code:n(717),break:n(719),text:n(721)},c.blockMethods=f(c.blockTokenizers),c.inlineMethods=f(c.inlineTokenizers),c.tokenizeBlock=l("block"),c.tokenizeInline=l("inline"),c.tokenizeFactory=l},function(e,t,n){"use strict";e.exports=function(e,t,n){return function(){var r=n||this,i=r[e];return r[e]=!t,function(){r[e]=i}}}},function(e,t,n){"use strict";function r(e){return function(t){var n=-1,r=e.length;if(t<0)return{};for(;++n<r;)if(e[n]>t)return{line:n+1,column:t-(e[n-1]||0)+1,offset:t};return{}}}function i(e){return function(t){var n=t&&t.line,r=t&&t.column;if(!isNaN(n)&&!isNaN(r)&&n-1 in e)return(e[n-2]||0)+r-1||0;return-1}}e.exports=function(e){var t=function(e){var t=[],n=e.indexOf("\n");for(;-1!==n;)t.push(n+1),n=e.indexOf("\n",n+1);return t.push(e.length+1),t}(String(e));return{toPosition:r(t),toOffset:i(t)}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(n){var r,i=0,o=n.indexOf("\\"),a=e[t],s=[];for(;-1!==o;)s.push(n.slice(i,o)),i=o+1,(r=n.charAt(i))&&-1!==a.indexOf(r)||s.push("\\"),o=n.indexOf("\\",i);return s.push(n.slice(i)),s.join("")}}},function(e,t,n){"use strict";var r=n(27),i=n(164);e.exports=function(e){return o.raw=function(e,o,a){return i(e,r(a,{position:t(o),warning:n}))},o;function t(t){for(var n=e.offset,r=t.line,i=[];++r&&r in n;)i.push((n[r]||0)+1);return{start:t,indent:i}}function n(t,n,r){3!==r&&e.file.message(t,n)}function o(r,o,a){i(r,{position:t(o),warning:n,text:a,reference:a,textContext:e,referenceContext:e})}}},function(e){e.exports=JSON.parse('{"AElig":"Æ","AMP":"&","Aacute":"Á","Acirc":"Â","Agrave":"À","Aring":"Å","Atilde":"Ã","Auml":"Ä","COPY":"©","Ccedil":"Ç","ETH":"Ð","Eacute":"É","Ecirc":"Ê","Egrave":"È","Euml":"Ë","GT":">","Iacute":"Í","Icirc":"Î","Igrave":"Ì","Iuml":"Ï","LT":"<","Ntilde":"Ñ","Oacute":"Ó","Ocirc":"Ô","Ograve":"Ò","Oslash":"Ø","Otilde":"Õ","Ouml":"Ö","QUOT":"\\"","REG":"®","THORN":"Þ","Uacute":"Ú","Ucirc":"Û","Ugrave":"Ù","Uuml":"Ü","Yacute":"Ý","aacute":"á","acirc":"â","acute":"´","aelig":"æ","agrave":"à","amp":"&","aring":"å","atilde":"ã","auml":"ä","brvbar":"¦","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","curren":"¤","deg":"°","divide":"÷","eacute":"é","ecirc":"ê","egrave":"è","eth":"ð","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","iacute":"í","icirc":"î","iexcl":"¡","igrave":"ì","iquest":"¿","iuml":"ï","laquo":"«","lt":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","ntilde":"ñ","oacute":"ó","ocirc":"ô","ograve":"ò","ordf":"ª","ordm":"º","oslash":"ø","otilde":"õ","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","raquo":"»","reg":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","thorn":"þ","times":"×","uacute":"ú","ucirc":"û","ugrave":"ù","uml":"¨","uuml":"ü","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e){e.exports=JSON.parse('{"0":"�","128":"€","130":"‚","131":"ƒ","132":"„","133":"…","134":"†","135":"‡","136":"ˆ","137":"‰","138":"Š","139":"‹","140":"Œ","142":"Ž","145":"‘","146":"’","147":"“","148":"”","149":"•","150":"–","151":"—","152":"˜","153":"™","154":"š","155":"›","156":"œ","158":"ž","159":"Ÿ"}')},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},function(e,t,n){"use strict";var r=n(286),i=n(95);e.exports=function(e){return r(e)||i(e)}},function(e,t,n){"use strict";var r,i=59;e.exports=function(e){var t,n="&"+e+";";if((r=r||document.createElement("i")).innerHTML=n,(t=r.textContent).charCodeAt(t.length-1)===i&&"semi"!==e)return!1;return t!==n&&t}},function(e,t,n){"use strict";e.exports=function(e){return function(t,n){var o,a,s,l,u,c,f=this,d=f.offset,p=[],h=f[e+"Methods"],m=f[e+"Tokenizers"],g=n.line,b=n.column;if(!t)return p;_.now=v,_.file=f.file,y("");for(;t;){for(o=-1,a=h.length,u=!1;++o<a&&(l=h[o],!(s=m[l])||s.onlyAtStart&&!f.atStart||s.notInList&&f.inList||s.notInBlock&&f.inBlock||s.notInLink&&f.inLink||(c=t.length,s.apply(f,[_,t]),!(u=c!==t.length))););u||f.file.fail(new Error("Infinite loop"),_.now())}return f.eof=v(),p;function y(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)g++,t=n,n=e.indexOf("\n",n+1);-1===t?b+=e.length:b=e.length-t,g in d&&(-1!==t?b+=d[g]:b<=d[g]&&(b=d[g]+1))}function v(){var e={line:g,column:b};return e.offset=f.toOffset(e),e}function x(e){this.start=e,this.end=v()}function _(e){var n,o=function(){var e=[],t=g+1;return function(){for(var n=g+1;t<n;)e.push((d[t]||0)+1),t++;return e}}(),a=(n=v(),function(e,t){var r=e.position,i=r?r.start:n,o=[],a=r&&r.end.line,s=n.line;if(e.position=new x(i),r&&t&&r.indent){if(o=r.indent,a<s){for(;++a<s;)o.push((d[a]||0)+1);o.push(n.column)}t=o.concat(t)}return e.position.indent=t||[],e}),s=v();return function(e){t.substring(0,e.length)!==e&&f.file.fail(new Error("Incorrectly eaten value: please report this warning on http://git.io/vg5Ft"),v())}(e),l.reset=u,u.test=c,l.test=c,t=t.substring(e.length),y(e),o=o(),l;function l(e,t){return a(function(e,t){var n=t?t.children:p,o=n[n.length-1];return o&&e.type===o.type&&e.type in r&&i(o)&&i(e)&&(e=r[e.type].call(f,o,e)),e!==o&&n.push(e),f.atStart&&0!==p.length&&f.exitStart(),e}(a(e),t),o)}function u(){var n=l.apply(null,arguments);return g=s.line,b=s.column,t=e+t,n}function c(){var n=a({});return g=s.line,b=s.column,t=e+t,n.position}}}};var r={text:function(e,t){return e.value+=t.value,e},blockquote:function(e,t){if(this.options.commonmark)return t;return e.children=e.children.concat(t.children),e}};function i(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}},function(e,t,n){"use strict";var r=n(27),i=n(681),o=n(287);e.exports=function(e){var t,n,a=this.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=r(e)}for(t in o){if(null==(n=e[t])&&(n=a[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return this.options=e,this.escape=i(e),this}},function(e,t,n){"use strict";e.exports=a;var r=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],i=r.concat(["~","|"]),o=i.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function a(e){var t=e||{};return t.commonmark?o:t.gfm?i:r}a.default=r,a.gfm=i,a.commonmark=o},function(e){e.exports=JSON.parse('["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]')},function(e,t,n){"use strict";var r=n(27),i=n(684);e.exports=function(){var e,t=String(this.file),n={line:1,column:1,offset:0},s=r(n);65279===(t=t.replace(a,o)).charCodeAt(0)&&(t=t.slice(1),s.column++,s.offset++);e={type:"root",children:this.tokenizeBlock(t,s),position:{start:n,end:this.eof||r(n)}},this.options.position||i(e,!0);return e};var o="\n",a=/\r\n|\r/g},function(e,t,n){"use strict";var r=n(96);function i(e){delete e.position}function o(e){e.position=void 0}e.exports=function(e,t){return r(e,t?i:o),e}},function(e,t,n){"use strict";e.exports=s;var r=n(686),i=!0,o="skip",a=!1;function s(e,t,n,i){var s;function u(e,r,c){var f,d=[];return(t&&!s(e,r,c[c.length-1]||null)||(d=l(n(e,c)))[0]!==a)&&e.children&&d[0]!==o&&(f=l(function(e,t){var n,r=i?-1:1,o=(i?e.length:-1)+r;for(;o>-1&&o<e.length;){if((n=u(e[o],o,t))[0]===a)return n;o="number"==typeof n[1]?n[1]:o+r}}(e.children,c.concat(e))))[0]===a?f:d}"function"==typeof t&&"function"!=typeof n&&(i=n,n=t,t=null),s=r(t),u(e,null,[])}function l(e){return null!==e&&"object"==typeof e&&"length"in e?e:"number"==typeof e?[i,e]:[e]}s.CONTINUE=i,s.SKIP=o,s.EXIT=a},function(e,t,n){"use strict";function r(e){if("string"==typeof e)return function(e){return function(t){return Boolean(t&&t.type===e)}}(e);if(null==e)return a;if("object"==typeof e)return("length"in e?o:i)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function i(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function o(e){var t=function(e){for(var t=[],n=e.length,i=-1;++i<n;)t[i]=r(e[i]);return t}(e),n=t.length;return function(){var e=-1;for(;++e<n;)if(t[e].apply(this,arguments))return!0;return!1}}function a(){return!0}e.exports=r},function(e,t,n){"use strict";var r=n(19);e.exports=function(e,t,n){var i,o,a,s,l=t.charAt(0);if("\n"!==l)return;if(n)return!0;s=1,i=t.length,o=l,a="";for(;s<i&&(l=t.charAt(s),r(l));)a+=l,"\n"===l&&(o+=a,a=""),s++;e(o)}},function(e,t,n){"use strict";var r=n(165),i=n(166);e.exports=function(e,t,n){var r,u,c,f=-1,d=t.length,p="",h="",m="",g="";for(;++f<d;)if(r=t.charAt(f),c)if(c=!1,p+=m,h+=g,m="",g="",r===o)m=r,g=r;else for(p+=r,h+=r;++f<d;){if(!(r=t.charAt(f))||r===o){g=r,m=r;break}p+=r,h+=r}else if(r===s&&t.charAt(f+1)===r&&t.charAt(f+2)===r&&t.charAt(f+3)===r)m+=l,f+=3,c=!0;else if(r===a)m+=r,c=!0;else{for(u="";r===a||r===s;)u+=r,r=t.charAt(++f);if(r!==o)break;m+=u+r,g+=r}if(h)return!!n||e(p)({type:"code",lang:null,value:i(h)})};var o="\n",a="\t",s=" ",l=r(s,4)},function(e,t,n){"use strict";var r=n(166);e.exports=function(e,t,n){var f,d,p,h,m,g,b,y,v,x,_,w=this.options,O=t.length+1,E=0,k="";if(!w.gfm)return;for(;E<O&&((p=t.charAt(E))===a||p===o);)k+=p,E++;if(x=E,(p=t.charAt(E))!==s&&p!==l)return;E++,d=p,f=1,k+=p;for(;E<O&&(p=t.charAt(E))===d;)k+=p,f++,E++;if(f<u)return;for(;E<O&&((p=t.charAt(E))===a||p===o);)k+=p,E++;h="",m="";for(;E<O&&(p=t.charAt(E))!==i&&p!==s&&p!==l;)p===a||p===o?m+=p:(h+=m+p,m=""),E++;if((p=t.charAt(E))&&p!==i)return;if(n)return!0;(_=e.now()).column+=k.length,_.offset+=k.length,k+=h,h=this.decode.raw(this.unescape(h),_),m&&(k+=m);m="",y="",v="",g="",b="";for(;E<O;)if(p=t.charAt(E),g+=y,b+=v,y="",v="",p===i){for(g?(y+=p,v+=p):k+=p,m="",E++;E<O&&(p=t.charAt(E))===a;)m+=p,E++;if(y+=m,v+=m.slice(x),!(m.length>=c)){for(m="";E<O&&(p=t.charAt(E))===d;)m+=p,E++;if(y+=m,v+=m,!(m.length<f)){for(m="";E<O&&((p=t.charAt(E))===a||p===o);)y+=p,v+=p,E++;if(!p||p===i)break}}}else g+=p,v+=p,E++;return e(k+=g+y)({type:"code",lang:h||null,value:r(b)})};var i="\n",o="\t",a=" ",s="~",l="`",u=3,c=4},function(e,t,n){"use strict";var r=n(56),i=n(167);e.exports=function(e,t,n){var u,c,f,d,p,h,m,g,b,y=this.offset,v=this.blockTokenizers,x=this.interruptBlockquote,_=e.now(),w=_.line,O=t.length,E=[],k=[],S=[],T=0;for(;T<O&&((c=t.charAt(T))===s||c===a);)T++;if(t.charAt(T)!==l)return;if(n)return!0;T=0;for(;T<O;){for(d=t.indexOf(o,T),m=T,g=!1,-1===d&&(d=O);T<O&&((c=t.charAt(T))===s||c===a);)T++;if(t.charAt(T)===l?(T++,g=!0,t.charAt(T)===s&&T++):T=m,p=t.slice(T,d),!g&&!r(p)){T=m;break}if(!g&&(f=t.slice(T),i(x,v,this,[e,f,!0])))break;h=m===T?p:t.slice(m,d),S.push(T-m),E.push(h),k.push(p),T=d+1}T=-1,O=S.length,u=e(E.join(o));for(;++T<O;)y[w]=(y[w]||0)+S[T],w++;return b=this.enterBlock(),k=this.tokenizeBlock(k.join(o),_),b(),u({type:"blockquote",children:k})};var o="\n",a="\t",s=" ",l=">"},function(e,t,n){"use strict";e.exports=function(e,t,n){var l,u,c,f=this.options,d=t.length+1,p=-1,h=e.now(),m="",g="";for(;++p<d;){if((l=t.charAt(p))!==o&&l!==i){p--;break}m+=l}c=0;for(;++p<=d;){if((l=t.charAt(p))!==a){p--;break}m+=l,c++}if(c>s)return;if(!c||!f.pedantic&&t.charAt(p+1)===a)return;d=t.length+1,u="";for(;++p<d;){if((l=t.charAt(p))!==o&&l!==i){p--;break}u+=l}if(!f.pedantic&&0===u.length&&l&&l!==r)return;if(n)return!0;m+=u,u="",g="";for(;++p<d&&(l=t.charAt(p))&&l!==r;)if(l===o||l===i||l===a){for(;l===o||l===i;)u+=l,l=t.charAt(++p);for(;l===a;)u+=l,l=t.charAt(++p);for(;l===o||l===i;)u+=l,l=t.charAt(++p);p--}else g+=u+l,u="";return h.column+=m.length,h.offset+=m.length,e(m+=g+u)({type:"heading",depth:c,children:this.tokenizeInline(g,h)})};var r="\n",i="\t",o=" ",a="#",s=6},function(e,t,n){"use strict";e.exports=function(e,t,n){var c,f,d,p,h=-1,m=t.length+1,g="";for(;++h<m&&((c=t.charAt(h))===i||c===o);)g+=c;if(c!==a&&c!==l&&c!==s)return;f=c,g+=c,d=1,p="";for(;++h<m;)if((c=t.charAt(h))===f)d++,g+=p+f,p="";else{if(c!==o)return d>=u&&(!c||c===r)?(g+=p,!!n||e(g)({type:"thematicBreak"})):void 0;p+=c}};var r="\n",i="\t",o=" ",a="*",s="_",l="-",u=3},function(e,t,n){"use strict";var r=n(56),i=n(165),o=n(95),a=n(288),s=n(694),l=n(167);e.exports=function(e,t,n){var i,a,s,m,b,y,v,x,_,S,T,j,A,P,C,N,M,I,D,R,z,L,F,B,U=this.options.commonmark,q=this.options.pedantic,$=this.blockTokenizers,H=this.interruptList,W=0,V=t.length,G=null,Y=0;for(;W<V;){if((m=t.charAt(W))===h)Y+=g-Y%g;else{if(m!==d)break;Y++}W++}if(Y>=g)return;if(m=t.charAt(W),i=U?E:O,!0===w[m])b=m,s=!1;else{for(s=!0,a="";W<V&&(m=t.charAt(W),o(m));)a+=m,W++;if(m=t.charAt(W),!a||!0!==i[m])return;G=parseInt(a,10),b=m}if((m=t.charAt(++W))!==d&&m!==h)return;if(n)return!0;W=0,P=[],C=[],N=[];for(;W<V;){for(y=t.indexOf(p,W),v=W,x=!1,B=!1,-1===y&&(y=V),F=W+g,Y=0;W<V;){if((m=t.charAt(W))===h)Y+=g-Y%g;else{if(m!==d)break;Y++}W++}if(Y>=g&&(B=!0),M&&Y>=M.indent&&(B=!0),m=t.charAt(W),_=null,!B){if(!0===w[m])_=m,W++,Y++;else{for(a="";W<V&&(m=t.charAt(W),o(m));)a+=m,W++;m=t.charAt(W),W++,a&&!0===i[m]&&(_=m,Y+=a.length+1)}if(_)if((m=t.charAt(W))===h)Y+=g-Y%g,W++;else if(m===d){for(F=W+g;W<F&&t.charAt(W)===d;)W++,Y++;W===F&&t.charAt(W)===d&&(W-=g-1,Y-=g-1)}else m!==p&&""!==m&&(_=null)}if(_){if(!q&&b!==_)break;x=!0}else U||B||t.charAt(v)!==d?U&&M&&(B=Y>=M.indent||Y>g):B=!0,x=!1,W=v;if(T=t.slice(v,y),S=v===W?T:t.slice(W,y),(_===u||_===c||_===f)&&$.thematicBreak.call(this,e,T,!0))break;if(j=A,A=!r(S).length,B&&M)M.value=M.value.concat(N,T),C=C.concat(N,T),N=[];else if(x)0!==N.length&&(M.value.push(""),M.trail=N.concat()),M={value:[T],indent:Y,trail:[]},P.push(M),C=C.concat(N,T),N=[];else if(A){if(j)break;N.push(T)}else{if(j)break;if(l(H,$,this,[e,T,!0]))break;M.value=M.value.concat(N,T),C=C.concat(N,T),N=[]}W=y+1}z=e(C.join(p)).reset({type:"list",ordered:s,start:G,loose:null,children:[]}),I=this.enterList(),D=this.enterBlock(),R=!1,W=-1,V=P.length;for(;++W<V;)M=P[W].value.join(p),L=e.now(),(M=e(M)(k(this,M,L),z)).loose&&(R=!0),M=P[W].trail.join(p),W!==V-1&&(M+=p),e(M);return I(),D(),z.loose=R,z};var u="*",c="_",f="-",d=" ",p="\n",h="\t",m="x",g=4,b=/\n\n(?!\s*$)/,y=/^\[([ \t]|x|X)][ \t]/,v=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,x=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,_=/^( {1,4}|\t)?/gm,w={};w[u]=!0,w["+"]=!0,w[f]=!0;var O={".":!0},E={};function k(e,t,n){var r,i,o=e.offset,a=null;return t=(e.options.pedantic?S:T).apply(null,arguments),e.options.gfm&&(r=t.match(y))&&(i=r[0].length,a=r[1].toLowerCase()===m,o[n.line]+=i,t=t.slice(i)),{type:"listItem",loose:b.test(t)||t.charAt(t.length-1)===p,checked:a,children:e.tokenizeBlock(t,n)}}function S(e,t,n){var r=e.offset,i=n.line;return t=t.replace(x,o),i=n.line,t.replace(_,o);function o(e){return r[i]=(r[i]||0)+e.length,i++,""}}function T(e,t,n){var r,o,l,u,c,f,h,m=e.offset,g=n.line;for(u=(t=t.replace(v,(function(e,t,n,a,s){o=t+n+a,l=s,Number(n)<10&&o.length%2==1&&(n=d+n);return(r=t+i(d,n.length)+a)+l}))).split(p),(c=s(t,a(r).indent).split(p))[0]=l,m[g]=(m[g]||0)+o.length,g++,f=0,h=u.length;++f<h;)m[g]=(m[g]||0)+u[f].length-c[f].length,g++;return c.join(p)}E["."]=!0,E[")"]=!0},function(e,t,n){"use strict";var r=n(56),i=n(165),o=n(288);e.exports=function(e,t){var n,u,c,f,d=e.split(s),p=d.length+1,h=1/0,m=[];d.unshift(i(a,t)+"!");for(;p--;)if(u=o(d[p]),m[p]=u.stops,0!==r(d[p]).length){if(!u.indent){h=1/0;break}u.indent>0&&u.indent<h&&(h=u.indent)}if(h!==1/0)for(p=d.length;p--;){for(c=m[p],n=h;n&&!(n in c);)n--;f=0!==r(d[p]).length&&h&&n!==h?l:"",d[p]=f+d[p].slice(n in c?c[n]+1:0)}return d.shift(),d.join(s)};var a=" ",s="\n",l="\t"},function(e,t,n){"use strict";e.exports=function(e,t,n){var l,u,c,f,d,p=e.now(),h=t.length,m=-1,g="";for(;++m<h;){if((c=t.charAt(m))!==o||m>=a){m--;break}g+=c}l="",u="";for(;++m<h;){if((c=t.charAt(m))===r){m--;break}c===o||c===i?u+=c:(l+=u+c,u="")}if(p.column+=g.length,p.offset+=g.length,g+=l+u,c=t.charAt(++m),f=t.charAt(++m),c!==r||!s[f])return;g+=c,u=f,d=s[f];for(;++m<h;){if((c=t.charAt(m))!==f){if(c!==r)return;m--;break}u+=c}if(n)return!0;return e(g+u)({type:"heading",depth:d,children:this.tokenizeInline(l,p)})};var r="\n",i="\t",o=" ",a=3,s={};s["="]=1,s["-"]=2},function(e,t,n){"use strict";var r=n(289).openCloseTag;e.exports=function(e,t,n){var l,u,c,f,d,p,h,m=this.options.blocks,g=t.length,b=0,y=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Za-z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+m.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(r.source+"\\s*$"),/^$/,!1]];for(;b<g&&((f=t.charAt(b))===i||f===o);)b++;if(t.charAt(b)!==s)return;l=-1===(l=t.indexOf(a,b+1))?g:l,u=t.slice(b,l),c=-1,d=y.length;for(;++c<d;)if(y[c][0].test(u)){p=y[c];break}if(!p)return;if(n)return p[2];if(b=l,!p[1].test(u))for(;b<g;){if(l=-1===(l=t.indexOf(a,b+1))?g:l,u=t.slice(b+1,l),p[1].test(u)){u&&(b=l);break}b=l}return h=t.slice(0,b),e(h)({type:"html",value:h})};var i="\t",o=" ",a="\n",s="<"},function(e,t,n){"use strict";var r=n(19),i=n(168);e.exports=h,h.notInList=!0,h.notInBlock=!0;var o="\\",a="\n",s="\t",l=" ",u="[",c="]",f="^",d=":",p=/^( {4}|\t)?/gm;function h(e,t,n){var h,m,g,b,y,v,x,_,w,O,E,k,S=this.offset;if(this.options.footnotes){for(h=0,m=t.length,g="",b=e.now(),y=b.line;h<m&&(w=t.charAt(h),r(w));)g+=w,h++;if(t.charAt(h)===u&&t.charAt(h+1)===f){for(h=(g+=u+f).length,x="";h<m&&(w=t.charAt(h))!==c;)w===o&&(x+=w,h++,w=t.charAt(h)),x+=w,h++;if(x&&t.charAt(h)===c&&t.charAt(h+1)===d){if(n)return!0;for(O=i(x),h=(g+=x+c+d).length;h<m&&((w=t.charAt(h))===s||w===l);)g+=w,h++;for(b.column+=g.length,b.offset+=g.length,x="",v="",_="";h<m;){if((w=t.charAt(h))===a){for(_=w,h++;h<m&&(w=t.charAt(h))===a;)_+=w,h++;for(x+=_,_="";h<m&&(w=t.charAt(h))===l;)_+=w,h++;if(0===_.length)break;x+=_}x&&(v+=x,x=""),v+=w,h++}return g+=v,v=v.replace(p,(function(e){return S[y]=(S[y]||0)+e.length,y++,""})),E=e(g),k=this.enterBlock(),v=this.tokenizeBlock(v,b),k(),E({type:"footnoteDefinition",identifier:O,children:v})}}}}},function(e,t,n){"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},function(e,t,n){"use strict";var r=n(19),i=n(168);e.exports=y,y.notInList=!0,y.notInBlock=!0;var o='"',a="'",s="\\",l="\n",u="\t",c=" ",f="[",d="]",p="(",h=")",m=":",g="<",b=">";function y(e,t,n){for(var r,b,y,_,w,O,E,k,S=this.options.commonmark,T=0,j=t.length,A="";T<j&&((_=t.charAt(T))===c||_===u);)A+=_,T++;if((_=t.charAt(T))===f){for(T++,A+=_,y="";T<j&&(_=t.charAt(T))!==d;)_===s&&(y+=_,T++,_=t.charAt(T)),y+=_,T++;if(y&&t.charAt(T)===d&&t.charAt(T+1)===m){for(O=y,T=(A+=y+d+m).length,y="";T<j&&((_=t.charAt(T))===u||_===c||_===l);)A+=_,T++;if(y="",r=A,(_=t.charAt(T))===g){for(T++;T<j&&v(_=t.charAt(T));)y+=_,T++;if((_=t.charAt(T))===v.delimiter)A+=g+y+_,T++;else{if(S)return;T-=y.length+1,y=""}}if(!y){for(;T<j&&x(_=t.charAt(T));)y+=_,T++;A+=y}if(y){for(E=y,y="";T<j&&((_=t.charAt(T))===u||_===c||_===l);)y+=_,T++;if(w=null,(_=t.charAt(T))===o?w=o:_===a?w=a:_===p&&(w=h),w){if(!y)return;for(T=(A+=y+_).length,y="";T<j&&(_=t.charAt(T))!==w;){if(_===l){if(T++,(_=t.charAt(T))===l||_===w)return;y+=l}y+=_,T++}if((_=t.charAt(T))!==w)return;b=A,A+=y+_,T++,k=y,y=""}else y="",T=A.length;for(;T<j&&((_=t.charAt(T))===u||_===c);)A+=_,T++;return(_=t.charAt(T))&&_!==l?void 0:!!n||(r=e(r).test().end,E=this.decode.raw(this.unescape(E),r,{nonTerminated:!1}),k&&(b=e(b).test().end,k=this.decode.raw(this.unescape(k),b)),e(A)({type:"definition",identifier:i(O),title:k||null,url:E}))}}}}function v(e){return e!==b&&e!==f&&e!==d}function x(e){return e!==f&&e!==d&&!r(e)}v.delimiter=b},function(e,t,n){"use strict";var r=n(19);e.exports=function(e,t,n){var y,v,x,_,w,O,E,k,S,T,j,A,P,C,N,M,I,D,R,z,L,F,B,U;if(!this.options.gfm)return;y=0,D=0,O=t.length+1,E=[];for(;y<O;){if(F=t.indexOf(c,y),B=t.indexOf(s,y+1),-1===F&&(F=t.length),-1===B||B>F){if(D<p)return;break}E.push(t.slice(y,F)),D++,y=F+1}_=E.join(c),v=E.splice(1,1)[0]||[],y=0,O=v.length,D--,x=!1,j=[];for(;y<O;){if((S=v.charAt(y))===s){if(T=null,!1===x){if(!1===U)return}else j.push(x),x=!1;U=!1}else if(S===a)T=!0,x=x||b;else if(S===l)x=x===h?m:T&&x===b?g:h;else if(!r(S))return;y++}!1!==x&&j.push(x);if(j.length<d)return;if(n)return!0;I=-1,z=[],L=e(_).reset({type:"table",align:j,children:z});for(;++I<D;){for(R=E[I],w={type:"tableRow",children:[]},I&&e(c),e(R).reset(w,L),O=R.length+1,y=0,k="",A="",P=!0,C=null,N=null;y<O;)if((S=R.charAt(y))!==f&&S!==u){if(""===S||S===s)if(P)e(S);else{if(S&&N){k+=S,y++;continue}!A&&!S||P||(_=A,k.length>1&&(S?(_+=k.slice(0,k.length-1),k=k.charAt(k.length-1)):(_+=k,k="")),M=e.now(),e(_)({type:"tableCell",children:this.tokenizeInline(A,M)},w)),e(k+S),k="",A=""}else if(k&&(A+=k,k=""),A+=S,S===i&&y!==O-2&&(A+=R.charAt(y+1),y++),S===o){for(C=1;R.charAt(y+1)===S;)A+=S,y++,C++;N?C>=N&&(N=0):N=C}P=!1,y++}else A?k+=S:e(S),y++;I||e(c+v)}return L};var i="\\",o="`",a="-",s="|",l=":",u=" ",c="\n",f="\t",d=1,p=2,h="left",m="center",g="right",b=null},function(e,t,n){"use strict";var r=n(56),i=n(95),o=n(166),a=n(167);e.exports=function(e,t,n){var f,d,p,h,m,g=this.options,b=g.commonmark,y=g.gfm,v=this.blockTokenizers,x=this.interruptParagraph,_=t.indexOf(s),w=t.length;for(;_<w;){if(-1===_){_=w;break}if(t.charAt(_+1)===s)break;if(b){for(h=0,f=_+1;f<w;){if((p=t.charAt(f))===l){h=c;break}if(p!==u)break;h++,f++}if(h>=c){_=t.indexOf(s,_+1);continue}}if(d=t.slice(_+1),a(x,v,this,[e,d,!0]))break;if(v.list.call(this,e,d,!0)&&(this.inList||b||y&&!i(r.left(d).charAt(0))))break;if(f=_,-1!==(_=t.indexOf(s,_+1))&&""===r(t.slice(f,_))){_=f;break}}if(d=t.slice(0,_),""===r(d))return e(d),null;if(n)return!0;return m=e.now(),d=o(d),e(d)({type:"paragraph",children:this.tokenizeInline(d,m)})};var s="\n",l="\t",u=" ",c=4},function(e,t,n){"use strict";var r=n(703);function i(e,t,n){var r,i;if("\\"===t.charAt(0)&&(r=t.charAt(1),-1!==this.escape.indexOf(r)))return!!n||(i="\n"===r?{type:"break"}:{type:"text",value:r},e("\\"+r)(i))}e.exports=i,i.locator=r},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},function(e,t,n){"use strict";var r=n(19),i=n(164),o=n(290);e.exports=d,d.locator=o,d.notInLink=!0;var a="<",s=">",l="@",u="/",c="mailto:",f=c.length;function d(e,t,n){var o,d,p,h,m,g,b,y,v,x,_;if(t.charAt(0)===a){for(this,o="",d=t.length,p=0,h="",g=!1,b="",p++,o=a;p<d&&(m=t.charAt(p),!(r(m)||m===s||m===l||":"===m&&t.charAt(p+1)===u));)h+=m,p++;if(h){if(b+=h,h="",b+=m=t.charAt(p),p++,m===l)g=!0;else{if(":"!==m||t.charAt(p+1)!==u)return;b+=u,p++}for(;p<d&&(m=t.charAt(p),!r(m)&&m!==s);)h+=m,p++;if(m=t.charAt(p),h&&m===s)return!!n||(v=b+=h,o+=b+m,(y=e.now()).column++,y.offset++,g&&(b.slice(0,f).toLowerCase()===c?(v=v.substr(f),y.column+=f,y.offset+=f):b=c+b),x=this.inlineTokenizers,this.inlineTokenizers={text:x.text},_=this.enterLink(),v=this.tokenizeInline(v,y),this.inlineTokenizers=x,_(),e(o)({type:"link",title:null,url:i(b,{nonTerminated:!1}),children:v}))}}}},function(e,t,n){"use strict";var r=n(164),i=n(19),o=n(706);e.exports=m,m.locator=o,m.notInLink=!0;var a="[",s="]",l="(",u=")",c="<",f="@",d="mailto:",p=["http://","https://",d],h=p.length;function m(e,t,n){var o,m,g,b,y,v,x,_,w,O,E,k;if(this.options.gfm){for(o="",b=-1,_=h;++b<_;)if(v=p[b],(x=t.slice(0,v.length)).toLowerCase()===v){o=x;break}if(o){for(b=o.length,_=t.length,w="",O=0;b<_&&(g=t.charAt(b),!i(g)&&g!==c)&&("."!==g&&","!==g&&":"!==g&&";"!==g&&'"'!==g&&"'"!==g&&")"!==g&&"]"!==g||(E=t.charAt(b+1))&&!i(E))&&(g!==l&&g!==a||O++,g!==u&&g!==s||!(--O<0));)w+=g,b++;if(w){if(m=o+=w,v===d){if(-1===(y=w.indexOf(f))||y===_-1)return;m=m.substr(d.length)}return!!n||(k=this.enterLink(),m=this.tokenizeInline(m,e.now()),k(),e(o)({type:"link",title:null,url:r(o,{nonTerminated:!1}),children:m}))}}}}},function(e,t,n){"use strict";e.exports=function(e,t){var n,i=r.length,o=-1,a=-1;if(!this.options.gfm)return-1;for(;++o<i;)-1!==(n=e.indexOf(r[o],t))&&(n<a||-1===a)&&(a=n);return a};var r=["https://","http://","mailto:"]},function(e,t,n){"use strict";var r=n(286),i=n(290),o=n(289).tag;e.exports=l,l.locator=i;var a=/^<a /i,s=/^<\/a>/i;function l(e,t,n){var i,l,u=t.length;if(!("<"!==t.charAt(0)||u<3)&&(i=t.charAt(1),(r(i)||"?"===i||"!"===i||"/"===i)&&(l=t.match(o))))return!!n||(l=l[0],!this.inLink&&a.test(l)?this.inLink=!0:this.inLink&&s.test(l)&&(this.inLink=!1),e(l)({type:"html",value:l}))}},function(e,t,n){"use strict";var r=n(19),i=n(291);e.exports=g,g.locator=i;var o={}.hasOwnProperty,a="\\",s="[",l="]",u="(",c=")",f="<",d=">",p="`",h={'"':'"',"'":"'"},m={};function g(e,t,n){var i,g,b,y,v,x,_,w,O,E,k,S,T,j,A,P,C,N,M,I="",D=0,R=t.charAt(0),z=this.options.pedantic,L=this.options.commonmark,F=this.options.gfm;if("!"===R&&(O=!0,I=R,R=t.charAt(++D)),R===s&&(O||!this.inLink)){for(I+=R,A="",D++,S=t.length,j=0,(C=e.now()).column+=D,C.offset+=D;D<S;){if(x=R=t.charAt(D),R===p){for(g=1;t.charAt(D+1)===p;)x+=R,D++,g++;b?g>=b&&(b=0):b=g}else if(R===a)D++,x+=t.charAt(D);else if(b&&!F||R!==s){if((!b||F)&&R===l){if(!j){if(!z)for(;D<S&&(R=t.charAt(D+1),r(R));)x+=R,D++;if(t.charAt(D+1)!==u)return;x+=u,i=!0,D++;break}j--}}else j++;A+=x,x="",D++}if(i){for(E=A,I+=A+x,D++;D<S&&(R=t.charAt(D),r(R));)I+=R,D++;if(R=t.charAt(D),w=L?m:h,A="",y=I,R===f){for(D++,y+=f;D<S&&(R=t.charAt(D))!==d;){if(L&&"\n"===R)return;A+=R,D++}if(t.charAt(D)!==d)return;I+=f+A+d,P=A,D++}else{for(R=null,x="";D<S&&(R=t.charAt(D),!x||!o.call(w,R));){if(r(R)){if(!z)break;x+=R}else{if(R===u)j++;else if(R===c){if(0===j)break;j--}A+=x,x="",R===a&&(A+=a,R=t.charAt(++D)),A+=R}D++}P=A,D=(I+=A).length}for(A="";D<S&&(R=t.charAt(D),r(R));)A+=R,D++;if(R=t.charAt(D),I+=A,A&&o.call(w,R))if(D++,I+=R,A="",k=w[R],v=I,L){for(;D<S&&(R=t.charAt(D))!==k;)R===a&&(A+=a,R=t.charAt(++D)),D++,A+=R;if((R=t.charAt(D))!==k)return;for(T=A,I+=A+R,D++;D<S&&(R=t.charAt(D),r(R));)I+=R,D++}else for(x="";D<S;){if((R=t.charAt(D))===k)_&&(A+=k+x,x=""),_=!0;else if(_){if(R===c){I+=A+k+x,T=A;break}r(R)?x+=R:(A+=k+x+R,x="",_=!1)}else A+=R;D++}if(t.charAt(D)===c)return!!n||(I+=c,P=this.decode.raw(this.unescape(P),e(y).test().end,{nonTerminated:!1}),T&&(v=e(v).test().end,T=this.decode.raw(this.unescape(T),v)),M={type:O?"image":"link",title:T||null,url:P},O?M.alt=this.decode.raw(this.unescape(E),C)||null:(N=this.enterLink(),M.children=this.tokenizeInline(E,C),N()),e(I)(M))}}}m['"']='"',m["'"]="'",m[u]=c},function(e,t,n){"use strict";var r=n(19),i=n(291),o=n(168);e.exports=g,g.locator=i;var a="link",s="image",l="footnote",u="shortcut",c="collapsed",f="full",d="^",p="\\",h="[",m="]";function g(e,t,n){var i,g,b,y,v,x,_,w,O=t.charAt(0),E=0,k=t.length,S="",T="",j=a,A=u;if("!"===O&&(j=s,T=O,O=t.charAt(++E)),O===h){if(E++,T+=O,x="",this.options.footnotes&&t.charAt(E)===d){if(j===s)return;T+=d,E++,j=l}for(w=0;E<k;){if((O=t.charAt(E))===h)_=!0,w++;else if(O===m){if(!w)break;w--}O===p&&(x+=p,O=t.charAt(++E)),x+=O,E++}if(S=x,i=x,(O=t.charAt(E))===m){for(E++,S+=O,x="";E<k&&(O=t.charAt(E),r(O));)x+=O,E++;if(O=t.charAt(E),j!==l&&O===h){for(g="",x+=O,E++;E<k&&(O=t.charAt(E))!==h&&O!==m;)O===p&&(g+=p,O=t.charAt(++E)),g+=O,E++;(O=t.charAt(E))===m?(A=g?f:c,x+=g+O,E++):g="",S+=x,x=""}else{if(!i)return;g=i}if(A===f||!_)return S=T+S,j===a&&this.inLink?null:!!n||(j===l&&-1!==i.indexOf(" ")?e(S)({type:"footnote",children:this.tokenizeInline(i,e.now())}):((b=e.now()).column+=T.length,b.offset+=T.length,y={type:j+"Reference",identifier:o(g=A===f?g:i)},j!==a&&j!==s||(y.referenceType=A),j===a?(v=this.enterLink(),y.children=this.tokenizeInline(i,b),v()):j===s&&(y.alt=this.decode.raw(this.unescape(i),b)||null),e(S)(y)))}}}},function(e,t,n){"use strict";var r=n(56),i=n(19),o=n(711);e.exports=l,l.locator=o;var a="*",s="_";function l(e,t,n){var o,l,u,c,f,d,p,h=0,m=t.charAt(h);if(!(m!==a&&m!==s||t.charAt(++h)!==m||(l=this.options.pedantic,f=(u=m)+u,d=t.length,h++,c="",m="",l&&i(t.charAt(h)))))for(;h<d;){if(p=m,!((m=t.charAt(h))!==u||t.charAt(h+1)!==u||l&&i(p))&&(m=t.charAt(h+2))!==u){if(!r(c))return;return!!n||((o=e.now()).column+=2,o.offset+=2,e(f+c+f)({type:"strong",children:this.tokenizeInline(c,o)}))}l||"\\"!==m||(c+=m,m=t.charAt(++h)),c+=m,h++}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),r=e.indexOf("__",t);if(-1===r)return n;if(-1===n)return r;return r<n?r:n}},function(e,t,n){"use strict";var r=n(56),i=n(713),o=n(19),a=n(714);e.exports=u,u.locator=a;var s="*",l="_";function u(e,t,n){var a,u,c,f,d,p,h,m=0,g=t.charAt(m);if(!(g!==s&&g!==l||(u=this.options.pedantic,d=g,c=g,p=t.length,m++,f="",g="",u&&o(t.charAt(m)))))for(;m<p;){if(h=g,!((g=t.charAt(m))!==c||u&&o(h))){if((g=t.charAt(++m))!==c){if(!r(f)||h===c)return;if(!u&&c===l&&i(g)){f+=c;continue}return!!n||((a=e.now()).column++,a.offset++,e(d+f+c)({type:"emphasis",children:this.tokenizeInline(f,a)}))}f+=c}u||"\\"!==g||(f+=g,g=t.charAt(++m)),f+=g,m++}}},function(e,t,n){"use strict";e.exports=function(e){return i.test("number"==typeof e?r(e):e.charAt(0))};var r=String.fromCharCode,i=/\w/},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),r=e.indexOf("_",t);if(-1===r)return n;if(-1===n)return r;return r<n?r:n}},function(e,t,n){"use strict";var r=n(19),i=n(716);e.exports=s,s.locator=i;var o="~",a="~~";function s(e,t,n){var i,s,l,u="",c="",f="",d="";if(this.options.gfm&&t.charAt(0)===o&&t.charAt(1)===o&&!r(t.charAt(2)))for(i=1,s=t.length,(l=e.now()).column+=2,l.offset+=2;++i<s;){if(!((u=t.charAt(i))!==o||c!==o||f&&r(f)))return!!n||e(a+d+a)({type:"delete",children:this.tokenizeInline(d,l)});d+=c,f=c,c=u}}},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},function(e,t,n){"use strict";var r=n(19),i=n(718);e.exports=a,a.locator=i;var o="`";function a(e,t,n){for(var i,a,s,l,u,c,f,d,p=t.length,h=0,m="",g="";h<p&&t.charAt(h)===o;)m+=o,h++;if(m){for(u=m,l=h,m="",d=t.charAt(h),s=0;h<p;){if(c=d,d=t.charAt(h+1),c===o?(s++,g+=c):(s=0,m+=c),s&&d!==o){if(s===l){u+=m+g,f=!0;break}m+=g,g=""}h++}if(!f){if(l%2!=0)return;m=""}if(n)return!0;for(i="",a="",p=m.length,h=-1;++h<p;)c=m.charAt(h),r(c)?a+=c:(a&&(i&&(i+=a),a=""),i+=c);return e(u)({type:"inlineCode",value:i})}}},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},function(e,t,n){"use strict";var r=n(720);e.exports=o,o.locator=r;var i=2;function o(e,t,n){for(var r,o=t.length,a=-1,s="";++a<o;){if("\n"===(r=t.charAt(a))){if(a<i)return;return!!n||e(s+=r)({type:"break"})}if(" "!==r)return;s+=r}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("\n",t);for(;n>t&&" "===e.charAt(n-1);)n--;return n}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o,a,s,l,u,c,f,d;if(n)return!0;r=this.inlineMethods,a=r.length,i=this.inlineTokenizers,o=-1,f=t.length;for(;++o<a;)"text"!==(c=r[o])&&i[c]&&((u=i[c].locator)||e.file.fail("Missing locator: `"+c+"`"),-1!==(l=u.call(this,t,1))&&l<f&&(f=l));s=t.slice(0,f),d=e.now(),this.decode(s,d,(function(t,n,r){e(r||t)({type:"text",value:t})}))}},function(e,t,n){var r=n(723);e.exports=function(){return function(e){return r(e,"list",(function(e,t){var n,r,i=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(i+=1);for(n=0,r=e.children.length;n<r;n++){var o=e.children[n];o.index=n,o.ordered=e.ordered}e.depth=i})),e}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=[];"function"==typeof t&&(n=t,t=null);function i(e){var o;return t&&e.type!==t||(o=n(e,r.concat())),e.children&&!1!==o?function(e,t){var n,o=e.length,a=-1;r.push(t);for(;++a<o;)if((n=e[a])&&!1===i(n))return!1;return r.pop(),!0}(e.children,e):o}i(e)}},function(e,t,n){"use strict";var r=n(96),i="virtualHtml",o=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,a=/^<(\/?)([a-z]+)\s*>$/;e.exports=function(e){var t,n;return r(e,"html",(function(e,r,s){n!==s&&(t=[],n=s);var l=function(e){var t=e.value.match(o);return!!t&&t[1]}(e);if(l)return s.children.splice(r,1,{type:i,tag:l,position:e.position}),!0;var u=function(e,t){var n=e.value.match(a);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!u)return!0;var c=function(e,t){var n=e.length;for(;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,u.tag);return c?s.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),o=n.children.indexOf(t.node),a=n.children.splice(r,o-r+1).slice(1,-1);return{type:i,children:a,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(u,c,s)):u.opening||t.push(u),!0}),!0),e}},function(e,t,n){"use strict";var r=n(96);function i(e,t,n,r){if("remove"===r)n.children.splice(t,1);else if("unwrap"===r){var i=[t,1];e.children&&(i=i.concat(e.children)),Array.prototype.splice.apply(n.children,i)}}t.ofType=function(e,t){return function(t){return e.forEach((function(e){return r(t,e,n,!0)})),t};function n(e,n,r){r&&i(e,n,r,t)}},t.ifNotMatch=function(e,t){return function(e){return r(e,n,!0),e};function n(n,r,o){o&&!e(n,r,o)&&i(n,r,o,t)}}},function(e,t,n){"use strict";var r=n(2),i=n(27),o=n(214),a={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=t.renderers[e.type];void 0===e.position&&(e.position=n.node&&n.node.position||a);var f=e.position.start,d=[e.type,f.line,f.column,u].join("-");if(!o.isValidElementType(c))throw new Error("Renderer for type `".concat(e.type,"` not defined or is not renderable"));var p=function(e,t,n,o,a,u){var c={key:t},f="string"==typeof o;n.sourcePos&&e.position&&(c["data-sourcepos"]=[(d=e.position).start.line,":",d.start.column,"-",d.end.line,":",d.end.column].map(String).join(""));var d;n.rawSourcePos&&!f&&(c.sourcePosition=e.position);n.includeNodeIndex&&a.node&&a.node.children&&!f&&(c.index=a.node.children.indexOf(e),c.parentChildCount=a.node.children.length);var p=null!==e.identifier&&void 0!==e.identifier?n.definitions[e.identifier]||{}:null;switch(e.type){case"root":l(c,{className:n.className});break;case"text":c.nodeKey=t,c.children=e.value;break;case"heading":c.level=e.depth;break;case"list":c.start=e.start,c.ordered=e.ordered,c.tight=!e.loose,c.depth=e.depth;break;case"listItem":c.checked=e.checked,c.tight=!e.loose,c.ordered=e.ordered,c.index=e.index,c.children=function(e,t){if(e.loose)return e.children;if(t.node&&e.index>0&&t.node.children[e.index-1].loose)return e.children;return function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children||[]:[t])}),[])}(e)}(e,a).map((function(t,r){return s(t,n,{node:e,props:c},r)}));break;case"definition":l(c,{identifier:e.identifier,title:e.title,url:e.url});break;case"code":l(c,{language:e.lang&&e.lang.split(/\s/,1)[0]});break;case"inlineCode":c.children=e.value,c.inline=!0;break;case"link":l(c,{title:e.title||void 0,target:"function"==typeof n.linkTarget?n.linkTarget(e.url,e.children,e.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(e.url,e.children,e.title):e.url});break;case"image":l(c,{alt:e.alt||void 0,title:e.title||void 0,src:n.transformImageUri?n.transformImageUri(e.url,e.children,e.title,e.alt):e.url});break;case"linkReference":l(c,i(p,{href:n.transformLinkUri?n.transformLinkUri(p.href):p.href}));break;case"imageReference":l(c,{src:n.transformImageUri&&p.href?n.transformImageUri(p.href,e.children,p.title,e.alt):p.href,title:p.title||void 0,alt:e.alt||void 0});break;case"table":case"tableHead":case"tableBody":c.columnAlignment=e.align;break;case"tableRow":c.isHeader="tableHead"===a.node.type,c.columnAlignment=a.props.columnAlignment;break;case"tableCell":l(c,{isHeader:a.props.isHeader,align:a.props.columnAlignment[u]});break;case"virtualHtml":c.tag=e.tag;break;case"html":c.isBlock=e.position.start.line!==e.position.end.line,c.escapeHtml=n.escapeHtml,c.skipHtml=n.skipHtml;break;case"parsedHtml":var h;e.children&&(h=e.children.map((function(t,r){return s(t,n,{node:e,props:c},r)}))),c.escapeHtml=n.escapeHtml,c.skipHtml=n.skipHtml,c.element=function(e,t){var n=e.element;if(Array.isArray(n)){var i=r.Fragment||"div";return r.createElement(i,null,n)}if(n.props.children||t){var o=r.Children.toArray(n.props.children).concat(t);return r.cloneElement(n,null,o)}return r.cloneElement(n,null)}(e,h);break;default:l(c,i(e,{type:void 0,position:void 0,children:void 0}))}!f&&e.value&&(c.value=e.value);return c}(e,d,t,c,n,u);return r.createElement(c,p,p.children||e.children&&e.children.map((function(n,r){return s(n,t,{node:e,props:p},r)}))||void 0)}function l(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}e.exports=s},function(e,t,n){"use strict";var r=n(96);function i(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}e.exports=function(e){return r(e,"table",i),e}},function(e,t,n){"use strict";e.exports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t.children||[]).reduce((function(t,n){return"definition"===n.type&&(t[n.identifier]={href:n.url,title:n.title}),e(n,t)}),n)}},function(e,t,n){"use strict";var r=["http","https","mailto","tel"];e.exports=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var i=t.indexOf(":");if(-1===i)return t;for(var o=r.length,a=-1;++a<o;){var s=r[a];if(i===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return-1!==(a=t.indexOf("?"))&&i>a?t:-1!==(a=t.indexOf("#"))&&i>a?t:"javascript:void(0)"}},function(e,t,n){"use strict";var r=n(27),i=n(2),o=parseInt((i.version||"16").slice(0,2),10)>=16,a=i.createElement;function s(e,t){return a(e,l(t),t.children)}function l(e){return e["data-sourcepos"]?{"data-sourcepos":e["data-sourcepos"]}:{}}e.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:s.bind(null,"table"),tableHead:s.bind(null,"thead"),tableBody:s.bind(null,"tbody"),tableRow:s.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=l(e);return a(e.isHeader?"th":"td",t?r({style:t},n):n,e.children)},root:function(e){var t=!e.className,n=t&&i.Fragment||"div";return a(n,t?null:e,e.children)},text:function(e){return o?e.children:a("span",null,e.children)},list:function(e){var t=l(e);null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString());return a(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=a("input",{type:"checkbox",checked:n,readOnly:!0})}return a("li",l(e),t,e.children)},definition:function(){return null},heading:function(e){return a("h".concat(e.level),l(e),e.children)},inlineCode:function(e){return a("code",l(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=a("code",t?{className:t}:null,e.value);return a("pre",l(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.isBlock?"div":"span";if(e.escapeHtml){var n=i.Fragment||t;return a(n,null,e.value)}var r={dangerouslySetInnerHTML:{__html:e.value}};return a(t,r)},virtualHtml:function(e){return a(e.tag,l(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?i.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}}},function(e,t,n){"use strict";t.HtmlParser="undefined"==typeof Symbol?"__RMD_HTML_PARSER__":Symbol("__RMD_HTML_PARSER__")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(43)),o=a(n(97));function a(e){return e&&e.__esModule?e:{default:e}}t.default=({production:{metadata:e},edition:t,data:{customCoverFooter:n}={},id:a})=>{const{data:s={}}=t,l=s.publicationTitle||e.title,u=s.publicationSubtitle||e.subtitle,c=s.publicationAuthors&&s.publicationAuthors.length?s.publicationAuthors:e.authors;return r.default.createElement("section",{className:"composition-block title-page"},r.default.createElement("div",{className:"title-page-content"},r.default.createElement("h1",{id:a,className:"title-page-title"},l),u&&r.default.createElement("h2",{className:"title-page-subtitle"},u),r.default.createElement("h3",{className:"title-page-authors"},c&&c.length>0?r.default.createElement(o.default,{authors:c}):null)),n&&n.length>0&&r.default.createElement("div",{className:"title-page-footer"},r.default.createElement(i.default,{src:n})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(43)),o=a(n(97));function a(e){return e&&e.__esModule?e:{default:e}}t.default=({production:{metadata:e},edition:t,data:{backgroundColor:n,textColor:a,useAbstract:s=!0,customMarkdownContents:l,animatedBackground:u,customCoverFooter:c}={},id:f})=>{const{data:d={}}=t,p=d.publicationTitle||e.title,h=d.publicationSubtitle||e.subtitle,m=d.publicationAuthors&&d.publicationAuthors.length?d.publicationAuthors:e.authors;return r.default.createElement("section",{className:`composition-block back-cover ${u&&"none"!==u?`with-animated-background-${u}`:""}`,style:{backgroundColor:n,color:a}},r.default.createElement("div",{className:"back-cover-content"},r.default.createElement("h2",{id:f,className:"back-cover-title"},p),h&&r.default.createElement("h3",{className:"back-cover-subtitle"},h),e.authors&&r.default.createElement("h3",{className:"back-cover-authors"},r.default.createElement(o.default,{authors:m})),r.default.createElement("div",{className:"back-cover-text"},s&&r.default.createElement(i.default,{src:e.abstract}),l&&l.trim().length?r.default.createElement(i.default,{src:l}):null),c&&c.length>0&&r.default.createElement("div",{className:"back-cover-footer"},r.default.createElement(i.default,{src:c}))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(43));function o(e){return e&&e.__esModule?e:{default:e}}t.default=({data:{customText:e,copyright:t,issn:n,isbn:o}={},id:a})=>r.default.createElement("section",{id:a,className:"composition-block colophon"},r.default.createElement("div",{className:"colophon-content"},e&&e.length>0&&r.default.createElement("div",{className:"colophon-custom-text"},r.default.createElement(i.default,{src:e})),t&&t.length>0&&r.default.createElement("div",{className:"colophon-copyright"},r.default.createElement(i.default,{src:t})),o&&o.length>0&&r.default.createElement("div",{className:"colophon-isbn"},"ISBN ",o),n&&n.length>0&&r.default.createElement("div",{className:"colophon-issn"},"ISSN ",n)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(736),a=(r=o)&&r.__esModule?r:{default:r};function s(e){return Array.isArray(e)?e:Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t.content||[],this.start=void 0!==t.start?t.start:null,this.end=void 0!==t.end?t.end:null,this.entity=void 0!==t.entity?t.entity:null,this.decorator=void 0!==t.decorator?t.decorator:null,this.decoratorProps=t.decoratorProps||null,this.decoratedText=void 0!==t.decoratedText?t.decoratedText:null,this.contentState=t.contentState,this.style=t.style||null,this.styles=t.styles||null,this.block=t.block||{}}return i(e,[{key:"getCurrentContent",value:function(){return this.content[this.content.length-1]}},{key:"addToCurrentContent",value:function(e){this.content[this.content.length-1]=this.content[this.content.length-1]+e}},{key:"handleFlatPush",value:function(t,n){var r=this.getCurrentContent();if(r instanceof e&&(0,a.default)(n,r.styles))r.addToCurrentContent(t);else{var i=new e({styles:[].concat(l(n)),content:[t]});this.content.push(i)}}},{key:"pushContent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n||n.length<1)return"string"==typeof t&&"string"==typeof this.getCurrentContent()?this.addToCurrentContent(t):this.content.push(t),this;if(r)return this.handleFlatPush(t,n),this;var i=s(n),o=i[0],a=i.slice(1),l=this.getCurrentContent();if(l instanceof e&&l.style===o)l.pushContent(t,a,r);else{var u=new e({style:o});u.pushContent(t,a,r),this.content.push(u)}return this}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return function(n,r,i){var o=function(e,t){return e.map((function(e){return t[e]})).reduce((function(e,t){var n={};if(void 0!==t){var r="text-decoration"in t?"text-decoration":"textDecoration";t[r]!==e[r]&&(n[r]=[e[r],t[r]].join(" ").trim())}return Object.assign(e,t,n)}),{})}(r,t);return e(Object.assign({},{children:n},i,{style:o}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.renderNode=void 0;var r=f(n(294)),i=f(n(739)),o=f(n(740)),a=f(n(741)),s=f(n(742)),l=f(n(743)),u=f(n(744)),c=f(n(745));function f(e){return e&&e.__esModule?e:{default:e}}var d=t.renderNode=function e(t,n,r,i,o,a,u){if(t.styles&&i)return i((0,s.default)(t.content,a),t.styles,{key:u()});var c=[],f=0;if(t.content.forEach((function(t){"string"==typeof t?c=(0,l.default)(t,c,f):(c[f+=1]=e(t,n,r,i,o,a,u),f+=1)})),t.style&&n[t.style])return n[t.style]((0,s.default)(c,a),{key:u()});if(null!==t.entity){var d=o[t.entity];if(d&&r[d.type])return r[d.type]((0,s.default)(c,a),d.data,{key:t.entity})}if(null!==t.decorator){var p=[t.block.key,t.start,0].join(".");return t.decorator(Object.assign({children:(0,s.default)(c,a),decoratedText:t.decoratedText,contentState:t.contentState,entityKey:t.entity,offsetKey:p,key:p},t.decoratorProps))}return c},p=function(e){var t=[],n=[],r=0,i=function(e){var i=r-e;for(n.length<i&&(i=n.length);i>0;i-=1){var o=t;(t=n.pop())[t.length-1].children=o}};return e.forEach((function(e){r<e.depth?(n.push(t),t=[]):r>e.depth&&i(e.depth),r=e.depth,t.push(Object.assign({},e))})),0!==r&&i(0),t},h=function(e,t,n,r,i){var o=r.prevType,a=r.prevDepth,s=r.prevKeys,l=r.prevData;if(0!==e.length){var u=t[o]||t[i.blockFallback];if(u){var c={depth:a,keys:s};return l&&l.some((function(e){return!!e}))&&(c.data=l),void n.push(u(e,c))}n.push(e)}},m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments[4],f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},m=Object.assign({},u.default,p),g=[],b=[],y=null,v=0,x=[],_=[],w=!1,O=new r.default({flat:!!c});return t.forEach((function(t){if((0,o.default)(t,y,m))!0===m.cleanup.split&&(w=!0);else{var r=O.parse(t),s=d(r,n,l,c,f,m,(0,a.default)());if((y&&y!==t.type||w)&&(h(b,i,g,{prevType:y,prevDepth:v,prevKeys:x,prevData:_},m),_=[],x=[],b=[],w=!1),t.children){var u=e(t.children,n,i,l,c,f,m);s.push(u)}b.push(s),y=t.type,v=t.depth,x.push(t.key),_.push(t.data)}})),h(b,i,g,{prevType:y,prevDepth:v,prevKeys:x,prevData:_},m),(0,s.default)(g,m)};t.render=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!Array.isArray(e.blocks))return(0,i.default)("invalid raw object"),null;if(!e.blocks.length)return null;var r=t.inline,o=t.blocks,a=t.entities,s=t.styles,l=t.decorators,u=l?(0,c.default)(e,l,n):e.blocks,f=p(u);return m(f,r,o,a,s,e.entityMap,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){var r=n.cleanup;return!(!r||function(e,t){return n=e.text,!(t.trim?!n.trim():!n)||(!(!e.data||!Object.keys(e.data).length)||!(!e.entityRanges||!e.entityRanges.length));var n}(e,r))&&((!r.after||"all"===r.after||-1!==r.after.indexOf(t))&&(!(!r.except||-1!==r.except.indexOf(e.type))||!(!r.types||"all"!==r.types&&-1===r.types.indexOf(e.type))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=0;return function(){var t=e;return e+=1,t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return Array.isArray(e)&&t.joinOutput?e.join(""):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){var r=t;return t[n]?r[n]+=e:r[n]=e,r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={joinOutput:!1,cleanup:{after:["atomic"],types:["unstyled"],trim:!1,split:!0},blockFallback:"unstyled"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(295)),i=s(n(296)),o=s(n(746)),a=s(n(747));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t){return e.forEach((function(e){var n=t.text.substring(0,e.offset),i=t.text.substring(e.offset,e.offset+e.length);e.offset=r.default.ucs2.decode(n).length,e.length=r.default.ucs2.decode(i).length})),e},u=function(e){return"function"==typeof e.getDecorations&&"function"==typeof e.getComponentForKey&&"function"==typeof e.getPropsForKey},c=function(e){var t=new i.default(e.filter((function(e){return!u(e)}))),n=e.filter((function(e){return u(e)})),r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t]);return new o.default(r)};t.default=function(e,t,n){var r=n.convertFromRaw&&n.convertFromRaw(e);return e.blocks.map((function(e){return function(e,t,n,r){var i=r.createContentBlock,o=[],s=c(t),u=i?i(e):(0,a.default)(e),f=s.getDecorations(u,n),d=0;return f.forEach((function(e,t){if(e){var r=t+1,i=f[r];i&&i===e||(o.push({offset:d,length:r-d,component:s.getComponentForKey(e),decoratorProps:s.getPropsForKey(e)||{},contentState:n}),d=r)}else d+=1})),Object.assign({},e,{decoratorRanges:l(o,e)})}(e,t,r,n||{})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decorators=t}return r(e,[{key:"getDecorations",value:function(e,t){var n=new Array(e.getText().length).fill(null);return this.decorators.forEach((function(r,i){r.getDecorations(e,t).forEach((function(e,t){e&&(n[t]=i+"-"+e)}))})),n}},{key:"getComponentForKey",value:function(t){return this.getDecoratorForKey(t).getComponentForKey(e.getInnerKey(t))}},{key:"getPropsForKey",value:function(t){return this.getDecoratorForKey(t).getPropsForKey(e.getInnerKey(t))}},{key:"getDecoratorForKey",value:function(e){var t=e.split("-"),n=Number(t[0]);return this.decorators[n]}}],[{key:"getInnerKey",value:function(e){return e.split("-").slice(1).join("-")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t)}return r(e,[{key:"get",value:function(e){return this[e]}},{key:"getText",value:function(){return this.text}},{key:"getType",value:function(){return this.type}},{key:"getKey",value:function(){return this.key}},{key:"getLength",value:function(){return this.text.length}},{key:"getDepth",value:function(){return this.depth}},{key:"getData",value:function(){return this.data}}]),e}();t.default=function(e){return new i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return function(n,r,i){var o=Object.assign({},r),a=function(e,t){var n=e.keys;return t||(n?n.join(","):void 0)}(o,i);return delete o.depth,delete o.keys,t.apply(void 0,[e,Object.assign({},o,{key:a})].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)))}};t.default=function(e,t){var n={};return Object.keys(t).forEach((function(i){var o=t[i];o.wrapper?n[i]=function(t,n,i){return function(e,t,n){var i=n.children,o=n.props,a=n.key,s=r(t.wrapper,e),l=r(t.element,e);return s(i.map((function(e,t){return l(e,{depth:o.depth},o.keys&&o.keys[t])})),o,a)}(e,o,{children:t,props:n,key:i})}:n[i]=r(o.element,e)})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e,noteId:t=""},n)=>{const i=n.notes,o=n.NoteLinkComponent;if(i){const n=i[t];return n?r.default.createElement("sup",{className:"note-pointer",id:`note-pointer-${t}`},o?r.default.createElement(o,{href:`#note-content-${t}`},n.order,e):r.default.createElement("a",{href:`#note-content-${t}`},n.order,e)):null}return null};a.propTypes={children:i.default.array,noteId:i.default.string},a.contextTypes={notes:i.default.object,onNoteContentPointerClick:i.default.func,NoteLinkComponent:i.default.func};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=a(n(751));function a(e){return e&&e.__esModule?e:{default:e}}const s=({noteId:e="",notesPosition:t},n)=>{const i=n.notes;if(i){const n=i[e];return n?r.default.createElement("sup",{className:"sidenotes"===t?"sidenote":"footnote",id:`note-pointer-${e}`,"data-notenumber":n.order},r.default.createElement("span",{className:"footnote-content"},r.default.createElement(o.default,{raw:n.contents}))):null}return null};s.propTypes={children:i.default.array,noteId:i.default.string},s.contextTypes={notes:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(2)),i=f(n(1)),o=f(n(76)),a=n(12),s=f(n(297)),l=f(n(170)),u=f(n(298)),c=f(n(299));function f(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}const{LINK:p,BLOCK_ASSET:h,INLINE_ASSET:m,SECTION_POINTER:g}=a.constants.draftEntitiesNames,b=e=>e.map((e,t)=>[e,r.default.createElement("br",{key:t+1})]),y={inline:{BOLD:(e,{key:t})=>r.default.createElement("strong",{key:t},e),ITALIC:(e,{key:t})=>r.default.createElement("em",{key:t},e),UNDERLINE:(e,{key:t})=>r.default.createElement("u",{key:t},e),CODE:(e,{key:t})=>r.default.createElement("span",{key:t},e)},blocks:{unstyled:e=>e.map((e,t)=>r.default.createElement("span",{key:t,className:"footnote-p"},e)),blockquote:e=>r.default.createElement("span",{className:"footnote-blockquote"},b(e)),"header-one":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("span",{className:"footnote-h1",key:n,id:t[n]},e)),"header-two":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("span",{className:"footnote-h2",key:n,id:t[n]},e)),"header-three":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("span",{className:"footnote-h3",key:n,id:t[n]},e)),"header-four":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("span",{className:"footnote-h4",key:n,id:t[n]},e)),"header-five":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("span",{className:"footnote-h5",key:n,id:t[n]},e)),"header-six":(e,{keys:t})=>e.map((e,n)=>r.default.createElement("span",{className:"footnote-h6",key:n,id:t[n]},e)),"code-block":(e,{keys:t})=>r.default.createElement("span",{className:"footnote-pre",key:t[0]},b(e)),"unordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("span",{key:n[n.length-1],className:`ul-level-${t}`},e.map((e,t)=>r.default.createElement("span",{className:"footnote-li",key:t},e))),"ordered-list-item":(e,{depth:t,keys:n})=>r.default.createElement("span",{key:n.join("|"),className:`ol-level-${t}`},e.map((e,t)=>r.default.createElement("span",{className:"footnote-li",key:n[t]},e)))},entities:{[p]:(e,t,{key:n})=>r.default.createElement(s.default,{key:n,to:t.url},e),[h]:(e,t,{key:n})=>r.default.createElement(l.default,{key:n,data:t}),[m]:(e,t,{key:n})=>r.default.createElement(u.default,{data:t,key:n},e),[g]:(e,t,{key:n})=>r.default.createElement(c.default,{key:n,sectionId:t.sectionId},e)}};class v extends r.Component{constructor(e){super(e)}shouldComponentUpdate(){return!0}renderWarning(){return r.default.createElement("div",null)}render(){const{raw:e}=this.props;if(!e)return this.renderWarning();const t=(0,o.default)(e,y);return t?r.default.createElement("span",null,t):this.renderWarning()}}v.propTypes={raw:i.default.object};var x=v;t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};t.default=({href:e,target:t,children:n,className:r,id:o,style:a})=>i.default.createElement("a",{href:e,target:t,className:r,id:o,style:a},n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};t.default=({href:e,target:t,className:n,id:r,style:o})=>i.default.createElement("a",{href:e,target:t,className:`page-link ${n||""}`,id:r,style:o},"p.")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};t.default=({sectionId:e,target:t,children:n,className:r,id:o,style:a})=>i.default.createElement("a",{href:`#section-${e}`,target:t,className:`page-link ${r}`,id:o,style:a},n,i.default.createElement("span",null,"(p. "),i.default.createElement("span",{className:"page-link",href:`#section-${e}`}),i.default.createElement("span",null,")"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2))&&r.__esModule?r:{default:r};const o=({title:e,href:t,level:n=0})=>i.default.createElement("li",{className:`table-of-contents-element level-${n}`},i.default.createElement("span",{className:"element-title"},e),i.default.createElement("span",{className:"element-leading"}),i.default.createElement("a",{className:"page-link",href:`#${t}`},"p."));t.default=({tableOfContents:e,data:{customTitle:t,displayPageNumber:n}={},translate:r})=>i.default.createElement("section",{className:`composition-block table-of-contents ${n?"has-page-number":""}`},i.default.createElement("h2",{className:"composition-block-title peritext-block-title"},t&&t.trim().length?t:r("Table of contents")),i.default.createElement("ul",{className:"table-of-contents-elements-container"},e.map((e,t)=>i.default.createElement(o,{key:t,title:e.title,href:e.href,level:e.level}))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),i=c(n(1)),o=c(n(301)),a=c(n(98)),s=c(n(171)),l=n(285),u=n(4);function c(e){return e&&e.__esModule?e:{default:e}}const f=({production:e,translate:t,data:n={showMentions:!0,resourceTypes:["glossary"],notesPosition:"footnotes",figuresPosition:"inBody",customSummary:{active:!1,summary:[]},level:0},citationStyle:i,citationLocale:c,id:f,publicationTitle:d,publicationSubtitle:p},{})=>{const{notesPosition:h,figuresPosition:m,displayHeader:g=!1}=n,b=(0,u.buildResourceSectionsSummary)({production:e,options:n}),y=(0,u.buildCitations)({production:e}),v=b.map(({resourceId:e})=>e),{figuresNumberMap:x,figures:_}=(0,l.buildFiguresNumberMap)({production:e,sectionsIds:v,figuresPosition:m});return[...b.map(({resourceId:n,level:a})=>{const s=e.resources[n];return r.default.createElement(o.default,{section:s,className:"resource-section",notesPosition:h,key:`${f}-${n}`,production:e,figuresPosition:m,figuresNumberMap:x,figures:"endOfSections"===m?_[n]:void 0,level:a,containerId:f,translate:t,citations:y,citationStyle:i,citationLocale:c,publicationTitle:d,publicationSubtitle:p,displayHeader:g})}),"endOfContents"===h?r.default.createElement(a.default,{key:"endnotes",sectionsIds:b.map(({resourceId:e})=>e),production:e,translate:t,citations:y,citationStyle:i,citationLocale:c,publicationTitle:d,publicationSubtitle:p}):null,"endOfContents"===m?r.default.createElement(s.default,{production:e,translate:t,figures:_,figuresNumberMap:x}):null]};f.contextTypes={LinkComponent:i.default.func,MentionComponent:i.default.func};var d=f;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(70);function a(e){return e&&e.__esModule?e:{default:e}}const s=({resource:e},{contextualizers:t,productionAssets:n})=>{if(!["bib","glossary","section"].includes(e.metadata.type)){const i=t[e.metadata.type]&&t[e.metadata.type].Block,a=(0,o.v4)(),s={contextualizerId:a,sourceId:e.id,targetId:e.id},l={id:a,type:e.metadata.type,parameters:{}};return r.default.createElement("figure",{className:`block-contextualization-container ${l.type}`},r.default.createElement(i,{renderingMode:"paged",resource:e,contextualization:s,contextualizer:l,assets:n}))}return null};s.contextTypes={contextualizers:i.default.object,productionAssets:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";e.exports={id:"pyrrah",type:"peritext-template",name:"Pyrrah template",renderingTypes:["paged"],generatorsTypes:["pdf","epub"],summaryType:"linear",options:{referencesScope:{type:"string",enum:["sections","edition"],default:"edition"}},defaultBibType:"book",defaultAdditionalHTML:'<link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600,700" rel="stylesheet">',defaultPlan:{type:"linear",summary:[{type:"frontCover",data:{animatedBackground:"none",backgroundColor:"#466CA6",textColor:"#FFF"}},{type:"titlePage"},{type:"tableOfContents",data:{displayPageNumber:!0,level:0}},{type:"sections",data:{notesPosition:"footnotes",figuresPosition:"endOfSections",customSummary:{active:!1,summary:[]}}},{type:"backCover",data:{backgroundColor:"#D6CFC4",textColor:"#FFF",useAbstract:!0}}]},summaryBlockDataTypes:{frontCover:{type:"object",default:{animatedBackground:"none",backgroundColor:"#466CA6",textColor:"#FFF"},properties:{backgroundColor:{type:"string",uiType:"color"},textColor:{type:"string",uiType:"color"},customCoverFooter:{type:"string",longString:!0},animatedBackground:{type:"string",description:"animated background to use",enum:["gradient","none"]}}},titlePage:{type:"object",default:{},properties:{customCoverFooter:{type:"string",longString:!0}}},colophon:{type:"object",default:{},properties:{customText:{type:"string",longString:!0},copyright:{type:"string"},issn:{type:"string"},isbn:{type:"string"}}},backCover:{type:"object",default:{backgroundColor:"#D6CFC4",textColor:"#FFF",useAbstract:!0},properties:{backgroundColor:{type:"string",uiType:"color"},textColor:{type:"string",uiType:"color"},useAbstract:{type:"boolean"},customMarkdownContents:{type:"string",description:"custom content to put on this page",longString:!0},animatedBackground:{type:"string",description:"animated background to use",enum:["gradient","none"]},customCoverFooter:{type:"string",longString:!0}}},tableOfContents:{type:"object",properties:{customTitle:{type:"string",description:"Custom title of the table of contents section"},displayPageNumber:{type:"boolean",description:"whether to display page number"},level:{type:"number",enum:[0,1,2,3,4],description:"level to use for displaying items in the table of contents"}},default:{displayPageNumber:!0}},sections:{type:"object",properties:{customSummary:{type:"object",uiType:"customSectionsSummary",properties:{active:{type:"boolean"},summary:{type:"array",items:{type:"object",properties:{sectionId:{type:"string"},sectionLevel:{type:"number"}}}}}},notesPosition:{type:"string",enum:["footnotes","endOfSections","endOfContents"]},figuresPosition:{type:"string",enum:["inBody","endOfSections","endOfContents"]}},default:{customSummary:{active:!1,summary:[]},notesPosition:"footnotes"}},resourceSections:{type:"object",default:{resourceTypes:["glossary"],customSummary:{active:!1,summary:[]},notesPosition:"footnotes",figuresPosition:"inBody",level:0},properties:{level:{type:"number",uiType:"select",enum:[0,1,2,3,4,5,6]},resourceTypes:{type:"array",items:{type:"string",enum:["bib","image","table","video","embed","webpage","glossary"]},uiType:"select",description:"which types of resources to show"},customSummary:{type:"object",uiType:"customResourcesSummary",properties:{active:{type:"boolean"},summary:{type:"array",items:{type:"object",properties:{resourceId:{type:"string"},level:{type:"number"}}}}}},hideEmptyResources:{type:"boolean",description:"whether to hide resources with no contents"},displayHeader:{type:"boolean",description:"whether to display resources headers in their views"},notesPosition:{type:"string",enum:["footnotes","endOfSections"]},figuresPosition:{type:"string",enum:["inBody","endOfSections","endOfContents"]}}},customPage:{type:"object",default:{displayInTableOfContents:!0,displayPageNumber:!0},properties:{title:{type:"string"},markdownContents:{type:"string",longString:!0},customCssId:{type:"string",description:"custom id for this page"},displayInTableOfContents:{type:"boolean",description:"whether to display this content in table of contents"},displayPageNumber:{type:"boolean",description:"whether to display page number"}}},emptyPage:{type:"object",properties:{}},references:{type:"object",default:{showUncitedReferences:!1,showMentions:!0,resourceTypes:["bib"],sortingKey:"date",sortingAscending:!0},properties:{resourceTypes:{type:"array",items:{type:"string",enum:["bib","image","table","video","embed","webpage"]},uiType:"select",description:"which types of resources to show as references"},showUncitedReferences:{type:"boolean",description:"whether to show references which are not cited in the contents of the edition"},showMentions:{type:"boolean",description:"whether to show active mentions in the text for each reference"},sortingKey:{type:"string",description:"key to use for sorting references",enum:["authors","title","date"]},sortingAscending:{type:"boolean",description:"whether to sort references in ascending order"}}},glossary:{type:"object",default:{showDescription:!0,showMentions:!0,showUncited:!1,glossaryTypes:["person","place","event","notion","other"]},properties:{customTitle:{type:"string"},showDescriptions:{type:"boolean",description:"whether to show elements descriptions in the glossary"},showMentions:{type:"boolean",description:"whether to show active mentions in the text for each glossary element"},glossaryTypes:{type:"array",items:{type:"string",enum:["person","place","event","notion","other"]},uiType:"select",description:"which types of glossary items to show"},showUncited:{type:"boolean",description:"whether to show uncited glossary items"}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(760)),i=a(n(313)),o=a(n(908));function a(e){return e&&e.__esModule?e:{default:e}}const s={Edition:r.default};var l={meta:o.default,components:s,utils:{buildNav:r.buildNav,routeItemToUrl:r.routeItemToUrl,renderHeadFromRouteItem:r.renderHeadFromRouteItem,getAdditionalRoutes:r.getAdditionalRoutes},css:i.default};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.renderHeadFromRouteItem=t.routeItemToUrl=t.buildNav=t.getAdditionalRoutes=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=w(n(1)),o=n(4),a=n(61),s=w(n(762)),l=w(n(307)),u=w(n(310)),c=w(n(789)),f=w(n(819)),d=w(n(820)),p=w(n(821)),h=w(n(822)),m=w(n(823)),g=w(n(882)),b=w(n(883)),y=w(n(884)),v=w(n(906)),x=w(n(907)),_=w(n(247));function w(e){return e&&e.__esModule?e:{default:e}}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k=new Function("try {return this===window;}catch(e){ return false;}")();t.getAdditionalRoutes=()=>[{routeClass:"resourceSheet",routeParams:{}},{routeClass:"resourcePage",routeParams:{}}];const S=({production:e,edition:t={},locale:n={}})=>{const{data:r={}}=t,{plan:i={}}=r,{summary:a=[]}=i;return a.reduce((t,r,i)=>{switch(r.type){case"landing":return[...t,{routeClass:"landing",level:0,title:e.metadata.title,routeParams:{},options:r.data,viewId:r.id}];case"customPage":return[...t,{routeClass:"customPage",level:0,title:r.data.title,routeParams:{routeSlug:r.data.routeSlug||i},options:r.data,viewId:r.id}];case"sections":const{data:a={}}=r,{customSummary:s={}}=a;let l;if(s.active){const{summary:t}=s;l=t.map(({resourceId:t,level:n},i)=>({routeClass:"sections",level:n,title:e.resources[t].metadata.title,routeParams:{resourceId:t},options:r.data,viewId:`${r.id}-${i}`}))}else l=e.sectionsOrder.map(({resourceId:t,level:n},i)=>({routeClass:"sections",level:n,title:e.resources[t].metadata.title,options:r.data,viewId:`${r.id}-${i}`,routeParams:{resourceId:t}}));return[...t,...l];case"resourceSections":let u;if(r.data.customSummary.active)u=r.data.customSummary.summary;else{const{hideEmptyResources:t=!1}=r.data;u=Object.keys(e.resources).filter(t=>r.data.resourceTypes.includes(e.resources[t].metadata.type)).filter(n=>!t||(0,o.resourceHasContents)(e.resources[n])).map(e=>({resourceId:e,level:0})).sort(o.defaultSortResourceSections)}return u=u.map(({resourceId:t,level:n},i)=>({routeClass:"sections",level:r.data.level+n,title:(0,_.default)(e.resources[t]),options:r.data,viewId:`${r.id}-${i}`,routeParams:{resourceId:t}})),[...t,...u];default:const{data:c={}}=r;return[...t,{routeClass:r.type,level:0,title:c.customTitle||n[r.type]||r.type,options:r.data,viewId:r.id,routeParams:{}}]}},[])};t.buildNav=S;const T=(e,t)=>{if(void 0!==t&&0===t)return"/";switch(e.routeClass){case"landing":return"/";case"sections":return`/sections/${e.viewId}${e.routeParams.contextualizationId?`?contextualizationId=${e.routeParams.contextualizationId}`:""}`;case"customPage":return`/c/${e.viewId}/${e.routeParams.routeSlug}`;case"resourceSheet":return`/resource?resourceId=${e.routeParams.resourceId}&mode=print`;case"resourcePage":return`/resource?resourceId=${e.routeParams.resourceId}&mode=screen`;default:return`/${e.routeClass}/${e.viewId}`}};t.routeItemToUrl=T;t.renderHeadFromRouteItem=({item:e,production:t,edition:n})=>{switch(e.routeClass){case"sections":case"resourcePage":return r.default.createElement(l.default,{production:t,edition:n,section:t.resources[e.routeParams.resourceId]});case"landing":case"customPage":case"resourceSheet":default:return r.default.createElement(u.default,{production:t,edition:n,pageName:`${t.metadata.title} - ${e.title}`})}};class j extends r.Component{constructor(e){super(e),E(this,"getChildContext",()=>({LinkComponent:this.props.previewMode?v.default:x.default,activeViewId:this.state.viewId,activeViewParams:this.state.viewParams,contextualizers:this.props.contextualizers,edition:this.props.edition,translate:this.translate,navigateTo:this.navigateTo,routeItemToUrl:T,production:this.props.production,productionAssets:this.props.production.assets,usedDocument:this.props.usedDocument,getViewIdForSectionId:this.getViewIdForSectionId})),E(this,"translate",e=>{const{locale:t={}}=this.props;return t[e]||e}),E(this,"identifyView",(e,t,n)=>{switch(e){case"sections":return t.resourceId===n.resourceId;case"customPage":return t.routeSlug===n.routeSlug;default:return!0}}),E(this,"getSummaryIndex",({viewId:e,routeClass:t,routeParams:n})=>{let r;return this.state.navSummary.find((t,n)=>{if(t.viewId===e)return r=n,!0}),r||this.state.navSummary.find((e,i)=>{if(e.routeClass===t&&this.identifyView(t,n,e.routeParams))return r=i,!0}),r}),E(this,"navigateTo",({routeClass:e,routeParams:t,viewNavSummaryIndex:n,viewId:r})=>{let i=n,o=r;i||(i=this.getSummaryIndex({routeClass:e,routeParams:t,viewId:r}),!o&&i&&(o=this.state.navSummary[i].viewId)),i||this.state.navSummary.some((t,n)=>{if(t.routeClass===e)return i=n,o=t.viewId,!0}),this.setState({viewClass:e,viewParams:t,viewNavSummaryIndex:i,viewId:o}),"function"==typeof this.props.onActiveViewChange&&this.props.onActiveViewChange({viewClass:e,viewId:o,viewParams:t})}),E(this,"getViewIdForSectionId",e=>{const{navSummary:t}=this.state,n=t.find(t=>"sections"===t.routeClass&&t.routeParams.resourceId===e);if(n)return n.viewId}),E(this,"renderView",({viewClass:e,viewParams:t,navSummary:n,viewNavSummaryIndex:i})=>{switch(e){case"sections":let o,a;return i>0&&"sections"===n[i-1].routeClass&&(o=n[i-1]),i<n.length-1&&"sections"===n[i+1].routeClass&&(a=n[i+1]),r.default.createElement(s.default,{production:this.props.production,edition:this.props.edition,previousSection:o,nextSection:a,activeViewClass:e,activeViewParams:t,options:n[i].options});case"landing":const l=i<n.length-1&&n[i+1];return r.default.createElement(d.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,activeViewParams:t,nextNavItem:l,options:i<n.length&&n[i].options});case"customPage":return r.default.createElement(f.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,activeViewParams:t,options:n[i].options});case"glossary":return r.default.createElement(h.default,{production:this.props.production,edition:this.props.edition,title:n[i].title,activeViewClass:e,id:n[i].id,activeViewParams:t,options:n[i].options});case"places":return r.default.createElement(m.default,{production:this.props.production,edition:this.props.edition,title:n[i].title,activeViewClass:e,activeViewParams:t,options:n[i].options});case"events":return r.default.createElement(g.default,{production:this.props.production,edition:this.props.edition,title:n[i].title,activeViewClass:e,activeViewParams:t,options:n[i].options});case"references":return r.default.createElement(b.default,{production:this.props.production,edition:this.props.edition,id:n[i].id,title:n[i].title,activeViewClass:e,activeViewParams:t,options:n[i].options});case"resourceSheet":return r.default.createElement(p.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,activeViewParams:t});case"resourcePage":return r.default.createElement(s.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,activeViewParams:t});case"resourcesMap":return r.default.createElement(y.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,options:n[i].options,activeViewParams:t});default:return r.default.createElement("div",null,r.default.createElement("p",null,"view id: ",e),r.default.createElement("pre",null,"route params: ",JSON.stringify(t,null,2)))}});const{production:t,edition:n,locale:i}=e,o=S({production:t,edition:n,locale:i}),a=o.length&&o[0];this.state={viewClass:e.viewClass||a&&a.routeClass||"landing",viewId:e.viewId||a&&a.viewId,viewParams:e.viewParams||a&&a.routeParams||{},viewNavSummaryIndex:0,navSummary:o}}componentWillReceiveProps(e){if(this.props.production!==e.production||this.props.contextualizers!==e.contextualizers||this.props.edition!==e.edition){const{production:t,edition:n,locale:r}=e,i=S({production:t,edition:n,locale:r}),o=i.length&&i[0],a=e.viewClass||o&&o.routeClass||"landing",s=e.viewId||o&&o.viewId,l=e.viewParams||o&&o.routeParams||{};this.setState({viewClass:a,viewParams:l,viewId:s,viewNavSummaryIndex:0,navSummary:i})}}render(){const{props:{production:e,edition:t,previewMode:n,preprocessedData:i,useBrowserRouter:o=!1},state:{viewId:s,viewClass:l,viewParams:u,navSummary:f,viewNavSummaryIndex:d},renderView:p}=this,h=o?a.BrowserRouter:a.HashRouter;if(n||!k)return r.default.createElement(c.default,{summary:f,production:e,edition:t,viewId:s,viewClass:l,preprocessedData:i},p({viewId:s,viewClass:l,viewParams:u,navSummary:f,viewNavSummaryIndex:d}));let m=f;return m.length&&"landing"!==m[0].routeClass&&(m=[m[0],...m]),r.default.createElement(h,{basename:window.__urlBaseName},r.default.createElement(c.default,{summary:f,production:e,edition:t,preprocessedData:i},r.default.createElement(a.Switch,null,m.map((e,t)=>{const n=T(e,t),i=this.getSummaryIndex({routeClass:e.routeClass,routeParams:e.routeParams,viewId:e.viewId});return r.default.createElement(a.Route,{exact:!0,path:n,key:t,component:t=>{let n={};return t.location.search&&(n=t.location.search.slice(1).split("&").map(e=>e.split("=")).map(e=>({[e[0]]:e[1]})).reduce((e,t)=>O({},e,t),{})),p({viewClass:e.routeClass,viewParams:O({},e.routeParams,n),navSummary:f,viewNavSummaryIndex:i})}})}),r.default.createElement(a.Route,{path:"/resource",component:e=>{const t=(e.history.location.search||"").slice(1).split("&").map(e=>e.split("=")).reduce((e,t)=>O({},e,{[t[0]]:t[1]}),{}),{resourceId:n,mode:r}=t;return p("print"===r?{viewClass:"resourceSheet",viewParams:{resourceId:n},navSummary:f,viewNavSummaryIndex:d}:{viewClass:"resourcePage",viewParams:{resourceId:n},navSummary:f,viewNavSummaryIndex:d})}}),r.default.createElement(a.Route,{component:()=>r.default.createElement("div",{className:"main-contents-container"},r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",null,this.translate("Nothing to see here!")),r.default.createElement("h2",null,this.translate("There is not content to display for this URL."))))}))))}}t.default=j,E(j,"childContextTypes",{activeViewId:i.default.string,activeViewParams:i.default.object,navigateTo:i.default.func,LinkComponent:i.default.func,production:i.default.object,edition:i.default.object,contextualizers:i.default.object,productionAssets:i.default.object,routeItemToUrl:i.default.func,usedDocument:i.default.object,translate:i.default.func,getViewIdForSectionId:i.default.func}),E(j,"propTypes",{contextualizers:i.default.object,locale:i.default.object,onActiveViewIdChange:i.default.object,production:i.default.object})},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=g(n(1)),o=n(4),a=g(n(172)),s=n(304),l=g(n(57)),u=g(n(779)),c=g(n(173)),f=g(n(307)),d=g(n(44)),p=g(n(59)),h=g(n(787)),m=g(n(788));function g(e){return e&&e.__esModule?e:{default:e}}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v=(e,t=50)=>e.length>t?`${e.substr(0,t-3)}...`:e;class x extends r.Component{constructor(e){super(e),y(this,"getChildContext",()=>{const{production:e={},activeViewParams:t={}}=this.props;return{openAsideContextualization:this.openAsideContextualization,openedContextualizationId:this.state.gui.openedContextualizationId,notes:e.resources[t.resourceId]&&e.resources[t.resourceId].data.contents.notes,onNoteContentPointerClick:this.onNoteContentPointerClick}}),y(this,"componentDidMount",()=>{this.init(this.props),this.buildRailwayData()}),y(this,"componentWillReceiveProps",e=>{this.props.activeViewClass===e.activeViewClass&&this.props.activeViewParams.resourceId===e.activeViewParams.resourceId&&this.props.activeViewParams.contextualizationId===e.activeViewParams.contextualizationId||this.init(e)}),y(this,"componentWillUpdate",(e,t,n)=>{this.props.activeViewParams.resourceId===e.activeViewParams.resourceId&&this.state.gui.openedContextualizationId&&!t.gui.openedContextualizationId&&n.asideVisible&&n.toggleAsideVisible(),(this.context.dimensions&&n.dimensions&&(this.context.dimensions.width!==n.dimensions.width||this.context.dimensions.height!==n.dimensions.height)||this.context.scrollHeight!==n.scrollHeight)&&setTimeout(()=>this.buildRailwayData())}),y(this,"componentDidUpdate",e=>{this.props.activeViewClass===e.activeViewClass&&this.props.activeViewParams.resourceId===e.activeViewParams.resourceId&&this.props.activeViewParams.contextualizationId===e.activeViewParams.contextualizationId||this.buildRailwayData()}),y(this,"init",e=>{setTimeout(()=>{e.activeViewParams.contextualizationId?(this.context.scrollToContextualization(e.activeViewParams.contextualizationId),this.setState({gui:{openedContextualizationId:e.activeViewParams.contextualizationId}})):this.context.scrollToTop(0,!1,!1)}),this.setState({gui:{openedContextualizationId:void 0}})}),y(this,"buildRailwayData",()=>{const{scrollHeight:e,usedDocument:t}=this.context;let n=(t||document).querySelector(".main-contents-wrapper .rendered-content");n=n&&n.childNodes;const r=[];n&&(n.forEach(t=>{const{height:n}=t.getBoundingClientRect();r.push({y:t.offsetTop/e,h:n/e,html:t.innerHTML,text:0===t.tagName.indexOf("H")?t.textContent:v(t.textContent,60),tagName:t.tagName,element:t})}),this.setState({shadows:r}),a.default.rebuild())}),y(this,"onNoteContentPointerClick",e=>{this.context.scrollToElementId(e)}),y(this,"onNotePointerClick",e=>{this.context.scrollToElementId(`note-content-pointer-${e}`)}),y(this,"closeAsideContextualization",()=>{this.context.asideVisible&&this.context.toggleAsideVisible(),this.state.gui.openedContextualizationId&&this.setState({gui:b({},this.state.gui,{openedContextualizationId:void 0})})}),y(this,"openAsideContextualization",e=>{this.context.asideVisible||this.context.toggleAsideVisible(),this.state.gui.openedContextualizationId!==e?this.setState({gui:b({},this.state.gui,{isLoadingAside:!0})},()=>{setTimeout(()=>{this.setState({gui:b({},this.state.gui,{openedContextualizationId:e})},()=>{this.setState({gui:b({},this.state.gui,{isLoadingAside:!1})})})})}):this.setState({gui:b({},this.state.gui,{openedContextualizationId:void 0})})}),y(this,"render",()=>{const{closeAsideContextualization:e,state:{gui:{openedContextualizationId:t,isLoadingAside:n},shadows:i},props:{production:a,edition:g={},previousSection:b,nextSection:y,activeViewClass:v,activeViewParams:x={},options:_={}},context:{translate:w={},scrollRatio:O,scrollTopRatio:E,scrollToElement:k,rawCitations:S},onNotePointerClick:T}=this;if(!["sections","resourcePage"].includes(v))return null;const{data:j={}}=g,{publicationTitle:A=""}=j,P=A.length?A:a.metadata.title,C=a.resources[x.resourceId];if(!C)return null;const N=C.data.contents.contents,M=C.metadata.authors||{},{notesPosition:I,displayHeader:D}=_,R=(0,s.convertSectionToCslRecord)(C,a,g);return r.default.createElement("section",{className:`main-contents-container section-player has-notes-position-${I}`},r.default.createElement(f.default,{production:a,section:C,edition:g,withHelmet:!0}),r.default.createElement(o.StructuredCOinS,{cslRecord:R}),r.default.createElement("div",{className:"main-column"},D&&r.default.createElement(m.default,{resource:C}),r.default.createElement("h1",{className:"view-title section-title"},(0,o.getResourceTitle)(C)||w("untitled section")||"Section sans titre"),C.metadata.subtitle&&r.default.createElement("h2",{className:"subtitle"},C.metadata.subtitle),M.length>0&&r.default.createElement("h2",{className:"authors"},M&&M.length>0&&M.map((e,t)=>r.default.createElement("span",{key:t},e.given," ",e.family)).reduce((e,t)=>[e,", ",t])),r.default.createElement("div",{className:"main-contents-wrapper"},r.default.createElement(c.default,{raw:N}))),Object.keys(C.data.contents.notes).length>0?r.default.createElement(u.default,{pointers:this.noteContentPointers,notes:C.data.contents.notes,notesOrder:C.data.contents.notesOrder,notesPosition:I,title:w("Notes"),id:"notes-container",onNotePointerClick:T}):null,r.default.createElement("footer",{className:"navigation-footer"},r.default.createElement("ul",null,b&&r.default.createElement("li",{className:"prev"},r.default.createElement(d.default,{to:{routeClass:"sections",viewId:b.viewId,routeParams:{resourceId:b.routeParams.resourceId}}},r.default.createElement("span",{className:"navigation-item"},r.default.createElement("span",{className:"navigation-item-arrow"},"←"),r.default.createElement("span",{className:"navigation-item-text"},(0,o.abbrevString)((0,o.getResourceTitle)(a.resources[b.routeParams.resourceId]),40))))),r.default.createElement("li",null,r.default.createElement("i",null,(0,o.abbrevString)(P,30)," - ",(0,o.abbrevString)((0,o.getResourceTitle)(C),40))),y&&r.default.createElement("li",{className:"next"},r.default.createElement(d.default,{to:{routeClass:"sections",viewId:y.viewId,routeParams:{resourceId:y.routeParams.resourceId}}},r.default.createElement("span",{className:"navigation-item"},r.default.createElement("span",{className:"navigation-item-text"},(0,o.abbrevString)((0,o.getResourceTitle)(a.resources[y.routeParams.resourceId]),40)),r.default.createElement("span",{className:"navigation-item-arrow"},"→")))))),t?r.default.createElement(p.default,{isActive:void 0!==t,title:t&&(0,s.makeAssetTitle)(a.resources[a.contextualizations[t].sourceId],a,g,S.citationItems),onClose:e},r.default.createElement(l.default,{production:a,edition:g,assetId:t,onDismiss:e})):r.default.createElement(h.default,{scrollRatio:O,scrollTopRatio:E,scrollToElement:k,shadows:i}),r.default.createElement("div",{className:`loader ${n?"active":""}`},r.default.createElement("span",null,w("Loading"))))}),this.state={gui:{openedContextualizationId:void 0}}}}y(x,"contextTypes",{scrollToTop:i.default.func,dimensions:i.default.object}),x.childContextTypes={openAsideContextualization:i.default.func,openedContextualizationId:i.default.string,notes:i.default.object,onNoteContentPointerClick:i.default.func},x.contextTypes={dimensions:i.default.object,production:i.default.object,scrollTopRatio:i.default.number,scrollTopAbs:i.default.number,scrollRatio:i.default.number,scrollHeight:i.default.number,scrollToTop:i.default.func,scrollToElementId:i.default.func,contextualizers:i.default.object,translate:i.default.func,citations:i.default.object,usedDocument:i.default.object,rawCitations:i.default.object,scrollToContextualization:i.default.func,scrollToElement:i.default.func,toggleAsideVisible:i.default.func,asideVisible:i.default.bool};var _=x;t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.hide=function(e){a(o.default.GLOBAL.HIDE,{target:e})},e.rebuild=function(){a(o.default.GLOBAL.REBUILD)},e.show=function(e){a(o.default.GLOBAL.SHOW,{target:e})},e.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},e.prototype.globalShow=function(e){if(this.mount){var t={currentTarget:e.detail.target};this.showTooltip(t,!0)}},e.prototype.globalHide=function(e){if(this.mount){var t=!!(e&&e.detail&&e.detail.target);this.hideTooltip({currentTarget:t&&e.detail.target},t)}}};var r,i=n(303),o=(r=i)&&r.__esModule?r:{default:r};var a=function(e,t){var n=void 0;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):((n=document.createEvent("Event")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.bindWindowEvents=function(e){window.removeEventListener(o.default.GLOBAL.HIDE,this.globalHide),window.addEventListener(o.default.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(o.default.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(o.default.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(o.default.GLOBAL.SHOW,this.globalShow),window.addEventListener(o.default.GLOBAL.SHOW,this.globalShow,!1),e&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},e.prototype.unbindWindowEvents=function(){window.removeEventListener(o.default.GLOBAL.HIDE,this.globalHide),window.removeEventListener(o.default.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(o.default.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},e.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}};var r,i=n(303),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.isCustomEvent=function(e){return this.state.event||!!e.getAttribute("data-event")},e.prototype.customBindListener=function(e){var t=this,n=this.state,i=n.event,a=n.eventOff,s=e.getAttribute("data-event")||i,l=e.getAttribute("data-event-off")||a;s.split(" ").forEach((function(n){e.removeEventListener(n,o.get(e,n));var i=r.bind(t,l);o.set(e,n,i),e.addEventListener(n,i,!1)})),l&&l.split(" ").forEach((function(n){e.removeEventListener(n,t.hideTooltip),e.addEventListener(n,t.hideTooltip,!1)}))},e.prototype.customUnbindListener=function(e){var t=this.state,n=t.event,r=t.eventOff,i=n||e.getAttribute("data-event"),a=r||e.getAttribute("data-event-off");e.removeEventListener(i,o.get(e,n)),a&&e.removeEventListener(a,this.hideTooltip)}};var r=function(e,t){var n=this.state.show,r=this.props.id,o=t.currentTarget.getAttribute("data-iscapture"),a=o&&"true"===o||this.props.isCapture,s=t.currentTarget.getAttribute("currentItem");a||t.stopPropagation(),n&&"true"===s?e||this.hideTooltip(t):(t.currentTarget.setAttribute("currentItem","true"),i(t.currentTarget,this.getTargetArray(r)),this.showTooltip(t))},i=function(e,t){for(var n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")},o={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(e,t,n){var r,i,o;this.id in e?e[this.id][t]=n:Object.defineProperty(e,this.id,{configurable:!0,value:(r={},i=t,o=n,i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r)})},get:function(e,t){var n=e[this.id];if(void 0!==n)return n[t]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.isCapture=function(e){return e&&"true"===e.getAttribute("data-iscapture")||this.props.isCapture||!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.getEffect=function(e){return e.getAttribute("data-effect")||this.props.effect||"float"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.bindRemovalTracker=function(){var e=this,t=r();if(null!=t){var n=new t((function(t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.removedNodes.length;i++){if(r.removedNodes[i]===e.state.currentTarget)return void e.hideTooltip()}}));n.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=n}},e.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}};var r=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l,u,c,f){for(var d=r(n),p=d.width,h=d.height,m=r(t),g=m.width,b=m.height,y=i(e,t,c),v=y.mouseX,x=y.mouseY,_=o(c,g,b,p,h),w=a(f),O=w.extraOffset_X,E=w.extraOffset_Y,k=window.innerWidth,S=window.innerHeight,T=s(n),j=T.parentTop,A=T.parentLeft,P=function(e){var t=_[e].l;return v+t+O},C=function(e){var t=_[e].t;return x+t+E},N=function(e){return function(e){var t=_[e].r;return v+t+O}(e)>k},M=function(e){return function(e){var t=_[e].b;return x+t+E}(e)>S},I=function(e){return function(e){return P(e)<0}(e)||N(e)||function(e){return C(e)<0}(e)||M(e)},D=function(e){return!I(e)},R=["top","bottom","left","right"],z=[],L=0;L<4;L++){var F=R[L];D(F)&&z.push(F)}var B=!1,U=void 0;return D(u)&&u!==l?(B=!0,U=u):z.length>0&&I(u)&&I(l)&&(B=!0,U=z[0]),B?{isNewState:!0,newState:{place:U}}:{isNewState:!1,position:{left:parseInt(P(l)-A,10),top:parseInt(C(l)-j,10)}}};var r=function(e){var t=e.getBoundingClientRect(),n=t.height,r=t.width;return{height:parseInt(n,10),width:parseInt(r,10)}},i=function(e,t,n){var i=t.getBoundingClientRect(),o=i.top,a=i.left,s=r(t),l=s.width,u=s.height;return"float"===n?{mouseX:e.clientX,mouseY:e.clientY}:{mouseX:a+l/2,mouseY:o+u/2}},o=function(e,t,n,r,i){var o=void 0,a=void 0,s=void 0,l=void 0;return"float"===e?(o={l:-r/2,r:r/2,t:-(i+3+2),b:-3},s={l:-r/2,r:r/2,t:15,b:i+3+2+12},l={l:-(r+3+2),r:-3,t:-i/2,b:i/2},a={l:3,r:r+3+2,t:-i/2,b:i/2}):"solid"===e&&(o={l:-r/2,r:r/2,t:-(n/2+i+2),b:-n/2},s={l:-r/2,r:r/2,t:n/2,b:n/2+i+2},l={l:-(r+t/2+2),r:-t/2,t:-i/2,b:i/2},a={l:t/2,r:r+t/2+2,t:-i/2,b:i/2}),{top:o,bottom:s,left:l,right:a}},a=function(e){var t=0,n=0;for(var r in"[object String]"===Object.prototype.toString.apply(e)&&(e=JSON.parse(e.toString().replace(/\'/g,'"'))),e)"top"===r?n-=parseInt(e[r],10):"bottom"===r?n+=parseInt(e[r],10):"left"===r?t-=parseInt(e[r],10):"right"===r&&(t+=parseInt(e[r],10));return{extraOffset_X:t,extraOffset_Y:n}},s=function(e){for(var t=e;t&&"none"===window.getComputedStyle(t).getPropertyValue("transform");)t=t.parentElement;return{parentTop:t&&t.getBoundingClientRect().top||0,parentLeft:t&&t.getBoundingClientRect().left||0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){if(t)return t;if(null!=n)return n;if(null===n)return null;var i=/<br\s*\/?>/;return r&&"false"!==r&&i.test(e)?e.split(i).map((function(e,t){return o.default.createElement("span",{key:t,className:"multi-line"},e)})):e};var r,i=n(2),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAria=function(e){var t={};return Object.keys(e).filter((function(e){return/(^aria-\w+$|^role$)/.test(e)})).forEach((function(n){t[n]=e[n]})),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length;return e.hasOwnProperty?Array.prototype.slice.call(e):new Array(t).fill().map((function(t){return e[t]}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity 0.3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip.allow_hover,.__react_component_tooltip.allow_click{pointer-events:auto}.__react_component_tooltip:before,.__react_component_tooltip:after{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:0.9;margin-top:0px;margin-left:0px;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top-color:#222;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom-color:#222;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-dark.place-left:after{border-left-color:#222;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-dark.place-right:after{border-right-color:#222;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8DC572}.__react_component_tooltip.type-success.place-top:after{border-top-color:#8DC572;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-success.place-bottom:after{border-bottom-color:#8DC572;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-success.place-left:after{border-left-color:#8DC572;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-success.place-right:after{border-right-color:#8DC572;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#F0AD4E}.__react_component_tooltip.type-warning.place-top:after{border-top-color:#F0AD4E;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom-color:#F0AD4E;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-warning.place-left:after{border-left-color:#F0AD4E;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-warning.place-right:after{border-right-color:#F0AD4E;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#BE6464}.__react_component_tooltip.type-error.place-top:after{border-top-color:#BE6464;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-error.place-bottom:after{border-bottom-color:#BE6464;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-error.place-left:after{border-left-color:#BE6464;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-error.place-right:after{border-right-color:#BE6464;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337AB7}.__react_component_tooltip.type-info.place-top:after{border-top-color:#337AB7;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-info.place-bottom:after{border-bottom-color:#337AB7;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-info.place-left:after{border-left-color:#337AB7;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-info.place-right:after{border-right-color:#337AB7;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top-color:#fff;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-light.place-bottom:after{border-bottom-color:#fff;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-light.place-left:after{border-left-color:#fff;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-light.place-right:after{border-right-color:#fff;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0px;text-align:center}'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e,children:t})=>r.default.createElement("a",{href:e,target:"blank"},t);a.propTypes={children:i.default.array,to:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=n(4),a=s(n(99));function s(e){return e&&e.__esModule?e:{default:e}}const l=({data:e},{production:t={},productionAssets:n={},openAsideContextualization:i,contextualizers:s,containerId:l,bindContextualizationElement:u,renderingMode:c="screened",openedContextualizationId:f})=>{const d=e.asset.id,p=t&&t.contextualizations&&t.contextualizations[d];if(!p)return null;const{visibility:h={paged:!0,screened:!0}}=p,m=t.contextualizers[p.contextualizerId],g=t.resources[p.sourceId],b=s[m.type],y=b&&b.Block,v=()=>{"function"==typeof i&&i(p.id)},x=e=>{"function"==typeof u&&u(p.id,e)},_=d===f;if(p&&y){return!h[c]?null:r.default.createElement("figure",{className:`block-contextualization-container ${m.type} ${_?"active":""}`,style:{position:"relative"},id:`contextualization-${l}-${d}`,ref:x},r.default.createElement(y,{resource:g,contextualizer:m,contextualization:p,renderingMode:c,assets:n}),r.default.createElement("figcaption",{className:"figure-caption"},r.default.createElement("h4",{className:"figure-title"},"screened"===c?r.default.createElement("div",null,r.default.createElement("button",{className:"link mention-context-pointer",onClick:v},r.default.createElement("span",null,p.title||g.metadata.title))):r.default.createElement("span",null,p.title||g.metadata.title)),p.legend&&r.default.createElement("div",{className:"figure-legend"},r.default.createElement(a.default,{src:p.legend}))),r.default.createElement(o.StructuredCOinS,{resource:g}))}return null};l.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},l.contextTypes={production:i.default.object,dimensions:i.default.object,inNote:i.default.bool,contextualizers:i.default.object,productionAssets:i.default.object,containerId:i.default.string,openAsideContextualization:i.default.func,bindContextualizationElement:i.default.func,renderingMode:i.default.string,openedContextualizationId:i.default.string};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(4);function a(e){return e&&e.__esModule?e:{default:e}}const s=({data:e,children:t},{production:n,contextualizers:i,openedContextualizationId:a,openAsideContextualization:s,bindContextualizationElement:l,productionAssets:u={}})=>{const c=e.asset&&e.asset.id;if(!c||!n)return null;const f=n.contextualizations[c];if(!f)return null;const d=n.contextualizers[f.contextualizerId],p=n.resources[f.sourceId],h=i[d.type],m=h&&h.Inline,g=()=>{"glossary"!==p.metadata.type&&"bib"!==p.metadata.type||"function"==typeof s&&s(f.id)},b=c===a,y=e=>{"function"==typeof l&&l(f.id,e)};return d&&m?r.default.createElement("span",{className:`inline-${d.type} ${b?"active":""} inline-contextualization-container ${d.type}`,id:c,ref:y,onClick:g},"glossary"!==p.metadata.type&&r.default.createElement(o.StructuredCOinS,{resource:p}),r.default.createElement(m,{contextualization:f,contextualizer:d,assets:u,resource:p,renderingMode:"screened"},t)):null};s.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},s.contextTypes={production:i.default.object,contextualizers:i.default.object,onAssetContextRequest:i.default.func,openedContextualizationId:i.default.string,openAsideContextualization:i.default.func,bindContextualizationElement:i.default.func,productionAssets:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e,noteId:t=""},n)=>{const i=n.notes,o=()=>"function"==typeof n.onNoteContentPointerClick&&n.onNoteContentPointerClick(t);if(i){const n=i[t];return n?r.default.createElement("sup",{onClick:o,className:"note-content-pointer link",id:`note-content-pointer-${t}`},n.order,e):null}return null};a.propTypes={children:i.default.array,noteId:i.default.string},a.contextTypes={notes:i.default.object,onNoteContentPointerClick:i.default.func};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=a(n(44));function a(e){return e&&e.__esModule?e:{default:e}}const s=({children:e,sectionId:t},{getViewIdForSectionId:n})=>r.default.createElement(o.default,{to:{routeClass:"sections",viewId:n(t),routeParams:{sectionId:t}}},e);s.contextTypes={getViewIdForSectionId:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=s(n(1)),o=s(n(780)),a=s(n(783));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=new Function("try {return this===window;}catch(e){ return false;}")();class c extends r.Component{constructor(e){super(e),l(this,"componentDidUpdate",(e,t)=>{t.witnessTop!==this.state.witnessTop&&"sidenotes"===this.props.notesPosition&&setTimeout(()=>this.updatePositions(),500)}),l(this,"updatePositions",()=>{const e=this.props.notesOrder.map(e=>{const t=this.props.notes[e],n=(this.context.usedDocument||document).getElementById(`note-content-pointer-${t.id}`),r=function(e){let t=0,n=0;for(;e&&!e.classList.contains("deucalion-layout")&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{top:n,left:t}}(n);return{order:t.finalOrder,noteId:t.id,component:n,offsetTop:r.top}}),t={};let n=0,r=0;for(let i=0;i<e.length;i++){const o=e[i],a=o.offsetTop;a>n+r?n=a:n+=r,r=this.notes[o.noteId].component.offsetHeight,t[o.noteId]={top:n,position:"absolute",left:0}}this.setState({notesStyles:t,notesVisible:!0})}),this.notes={},this.state={notesStyles:{},witnessTop:0,notesVisible:!("sidenotes"===e.notesPosition&&u)},this.witness=(0,r.createRef)(null),this.updatePositions=(0,o.default)(this.updatePositions,500)}componentDidMount(){const e={};if(this.witness&&this.witness.current){const t=this.witness.current.offsetTop;e.witnessTop=t}"sidenotes"===this.props.notesPosition&&setTimeout(()=>this.updatePositions()),this.setState(e)}componentWillReceiveProps(e,t){const n=this.witness&&this.witness.current&&this.witness.current.offsetTop;n!==this.state.witnessTop&&this.setState({witnessTop:n}),"sidenotes"===e.notesPosition&&this.props.notesOrder!==e.notesOrder&&this.setState({notesVisible:!1}),"sidenotes"!==e.notesPosition||this.props.notesPosition===e.notesPosition&&this.context.dimensions.width===t.dimensions.width||setTimeout(()=>this.updatePositions(),500)}render(){const{id:e,notes:t,notesOrder:n,onNotePointerClick:i,notesPosition:o,title:s}=this.props,{notesStyles:l,notesVisible:u}=this.state;return r.default.createElement("div",{style:{display:u?"block":"none"},className:`notes-container is-position-${o}`},r.default.createElement("h2",{className:"notes-title",id:e},s),r.default.createElement("ol",{className:"notes-list"},n.map((e,n)=>{const o=t[e];return r.default.createElement(a.default,{key:n,note:o,onNotePointerClick:i,ref:e=>{this.notes[o.id]=e},style:"sidenotes"===this.props.notesPosition?l[o.id]:{}})})),r.default.createElement("div",{ref:this.witness}))}}c.contextTypes={usedDocument:i.default.object,dimensions:i.default.object},c.propTypes={notes:i.default.object,notesOrder:i.default.array,notesPosition:i.default.oneOf(["sidenotes","footnotes"]),onNotePointerClick:i.default.func};var f=c;t.default=f},function(e,t,n){var r=n(73),i=n(781),o=n(782),a="Expected a function",s=Math.max,l=Math.min;e.exports=function(e,t,n){var u,c,f,d,p,h,m=0,g=!1,b=!1,y=!0;if("function"!=typeof e)throw new TypeError(a);function v(t){var n=u,r=c;return u=c=void 0,m=t,d=e.apply(r,n)}function x(e){var n=e-h;return void 0===h||n>=t||n<0||b&&e-m>=f}function _(){var e=i();if(x(e))return w(e);p=setTimeout(_,function(e){var n=t-(e-h);return b?l(n,f-(e-m)):n}(e))}function w(e){return p=void 0,y&&u?v(e):(u=c=void 0,d)}function O(){var e=i(),n=x(e);if(u=arguments,c=this,h=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(_,t),g?v(e):d}(h);if(b)return clearTimeout(p),p=setTimeout(_,t),v(h)}return void 0===p&&(p=setTimeout(_,t)),d}return t=o(t)||0,r(n)&&(g=!!n.leading,f=(b="maxWait"in n)?s(o(n.maxWait)||0,t):f,y="trailing"in n?!!n.trailing:y),O.cancel=function(){void 0!==p&&clearTimeout(p),m=0,u=h=c=p=void 0},O.flush=function(){return void 0===p?d:w(i())},O}},function(e,t,n){var r=n(23);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(73),i=n(100),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=a(n(1)),o=a(n(173));function a(e){return e&&e.__esModule?e:{default:e}}class s extends r.Component{constructor(e){var t,n,r;super(e),r=()=>({inNote:!0}),(n="getChildContext")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}render(){const{note:e,onNotePointerClick:t,style:n={}}=this.props;return r.default.createElement("li",{style:n,className:"note-item",ref:e=>{this.component=e},id:e.id},r.default.createElement("span",{onClick:n=>{n.stopPropagation(),t(e.id)},className:"link note-block-pointer",id:`note-block-pointer-${e.id}`},e.order),r.default.createElement(o.default,{raw:e.contents}))}}s.propTypes={note:i.default.object,onNotePointerClick:i.default.func,style:i.default.object},s.childContextTypes={inNote:i.default.bool};var l=s;t.default=l},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(2),o=r(i),a=r(n(308));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var u,c=[];function f(){u=e(c.map((function(e){return e.props}))),d.canUseDOM?t(u):n&&(u=n(u))}var d=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.peek=function(){return u},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,c=[],e};var s=i.prototype;return s.shouldComponentUpdate=function(e){return!a(e,this.props)},s.componentWillMount=function(){c.push(this),f()},s.componentDidUpdate=function(){f()},s.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),f()},s.render=function(){return o.createElement(r,this.props)},i}(i.Component);return s(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),s(d,"canUseDOM",l),d}}},function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty,a="undefined"!=typeof Element;e.exports=function(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s,l,u,c=r(t),f=r(n);if(c&&f){if((l=t.length)!=n.length)return!1;for(s=l;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(c!=f)return!1;var d=t instanceof Date,p=n instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==n.getTime();var h=t instanceof RegExp,m=n instanceof RegExp;if(h!=m)return!1;if(h&&m)return t.toString()==n.toString();var g=i(t);if((l=g.length)!==i(n).length)return!1;for(s=l;0!=s--;)if(!o.call(n,g[s]))return!1;if(a&&t instanceof Element&&n instanceof Element)return t===n;for(s=l;0!=s--;)if(!("_owner"===(u=g[s])&&t.$$typeof||e(t[u],n[u])))return!1;return!0}return t!=t&&n!=n}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},function(e,t,n){(function(e){t.__esModule=!0,t.warn=t.requestAnimationFrame=t.reducePropsToState=t.mapStateOnServer=t.handleClientStateChange=t.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(2)),a=l(n(29)),s=n(309);function l(e){return e&&e.__esModule?e:{default:e}}var u,c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},f=function(e){var t=g(e,s.TAG_NAMES.TITLE),n=g(e,s.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,(function(){return t}));var r=g(e,s.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},d=function(e){return g(e,s.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},p=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return i({},e,t)}),{})},h=function(e,t){return t.filter((function(e){return void 0!==e[s.TAG_NAMES.BASE]})).map((function(e){return e[s.TAG_NAMES.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t}),[])},m=function(e,t,n){var i={};return n.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&_("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var r={};n.filter((function(e){for(var n=void 0,o=Object.keys(e),a=0;a<o.length;a++){var l=o[a],u=l.toLowerCase();-1===t.indexOf(u)||n===s.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||u===s.TAG_PROPERTIES.REL&&"stylesheet"===e[u].toLowerCase()||(n=u),-1===t.indexOf(l)||l!==s.TAG_PROPERTIES.INNER_HTML&&l!==s.TAG_PROPERTIES.CSS_TEXT&&l!==s.TAG_PROPERTIES.ITEM_PROP||(n=l)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][c]&&(r[n][c]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(r),l=0;l<o.length;l++){var u=o[l],c=(0,a.default)({},i[u],r[u]);i[u]=c}return e}),[]).reverse()},g=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},b=(u=Date.now(),function(e){var t=Date.now();t-u>16?(u=t,e(t)):setTimeout((function(){b(e)}),0)}),y=function(e){return clearTimeout(e)},v="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||b:e.requestAnimationFrame||b,x="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||y:e.cancelAnimationFrame||y,_=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},w=null,O=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,u=e.onChangeClientState,c=e.scriptTags,f=e.styleTags,d=e.title,p=e.titleAttributes;S(s.TAG_NAMES.BODY,r),S(s.TAG_NAMES.HTML,i),k(d,p);var h={baseTag:T(s.TAG_NAMES.BASE,n),linkTags:T(s.TAG_NAMES.LINK,o),metaTags:T(s.TAG_NAMES.META,a),noscriptTags:T(s.TAG_NAMES.NOSCRIPT,l),scriptTags:T(s.TAG_NAMES.SCRIPT,c),styleTags:T(s.TAG_NAMES.STYLE,f)},m={},g={};Object.keys(h).forEach((function(e){var t=h[e],n=t.newTags,r=t.oldTags;n.length&&(m[e]=n),r.length&&(g[e]=h[e].oldTags)})),t&&t(),u(e,m,g)},E=function(e){return Array.isArray(e)?e.join(""):e},k=function(e,t){void 0!==e&&document.title!==e&&(document.title=E(e)),S(s.TAG_NAMES.TITLE,t)},S=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(s.HELMET_ATTRIBUTE),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],c=t[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),-1===i.indexOf(u)&&i.push(u);var f=o.indexOf(u);-1!==f&&o.splice(f,1)}for(var d=o.length-1;d>=0;d--)n.removeAttribute(o[d]);i.length===o.length?n.removeAttribute(s.HELMET_ATTRIBUTE):n.getAttribute(s.HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(s.HELMET_ATTRIBUTE,a.join(","))}},T=function(e,t){var n=document.head||document.querySelector(s.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+s.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===s.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===s.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var l=void 0===t[r]?"":t[r];n.setAttribute(r,l)}n.setAttribute(s.HELMET_ATTRIBUTE,"true"),i.some((function(e,t){return a=t,n.isEqualNode(e)}))?i.splice(a,1):o.push(n)})),i.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return n.appendChild(e)})),{oldTags:i,newTags:o}},j=function(e){return Object.keys(e).reduce((function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[s.REACT_TAG_MAP[n]||n]=e[n],t}),t)},P=function(e,t,n){switch(e){case s.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[s.HELMET_ATTRIBUTE]=!0,i=A(n,r),[o.default.createElement(s.TAG_NAMES.TITLE,i,e)];var e,n,r,i},toString:function(){return function(e,t,n,r){var i=j(n),o=E(t);return i?"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+">"+c(o,r)+"</"+e+">":"<"+e+" "+s.HELMET_ATTRIBUTE+'="true">'+c(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case s.ATTRIBUTE_NAMES.BODY:case s.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return A(t)},toString:function(){return j(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var r,i=((r={key:n})[s.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach((function(e){var n=s.REACT_TAG_MAP[e]||e;if(n===s.TAG_PROPERTIES.INNER_HTML||n===s.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]})),o.default.createElement(e,i)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var i=Object.keys(r).filter((function(e){return!(e===s.TAG_PROPERTIES.INNER_HTML||e===s.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(e,t){var i=void 0===r[t]?t:t+'="'+c(r[t],n)+'"';return e?e+" "+i:i}),""),o=r.innerHTML||r.cssText||"",a=-1===s.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+(a?"/>":">"+o+"</"+e+">")}),"")}(e,t,n)}}}};t.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[s.HTML_TAG_MAP[n]||n]=e[n],t}),t)},t.handleClientStateChange=function(e){w&&x(w),e.defer?w=v((function(){O(e,(function(){w=null}))})):(O(e),w=null)},t.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,u=e.scriptTags,c=e.styleTags,f=e.title,d=void 0===f?"":f,p=e.titleAttributes;return{base:P(s.TAG_NAMES.BASE,t,r),bodyAttributes:P(s.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:P(s.ATTRIBUTE_NAMES.HTML,i,r),link:P(s.TAG_NAMES.LINK,o,r),meta:P(s.TAG_NAMES.META,a,r),noscript:P(s.TAG_NAMES.NOSCRIPT,l,r),script:P(s.TAG_NAMES.SCRIPT,u,r),style:P(s.TAG_NAMES.STYLE,c,r),title:P(s.TAG_NAMES.TITLE,{title:d,titleAttributes:p},r)}},t.reducePropsToState=function(e){return{baseTag:h([s.TAG_PROPERTIES.HREF],e),bodyAttributes:p(s.ATTRIBUTE_NAMES.BODY,e),defer:g(e,s.HELMET_PROPS.DEFER),encode:g(e,s.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:p(s.ATTRIBUTE_NAMES.HTML,e),linkTags:m(s.TAG_NAMES.LINK,[s.TAG_PROPERTIES.REL,s.TAG_PROPERTIES.HREF],e),metaTags:m(s.TAG_NAMES.META,[s.TAG_PROPERTIES.NAME,s.TAG_PROPERTIES.CHARSET,s.TAG_PROPERTIES.HTTPEQUIV,s.TAG_PROPERTIES.PROPERTY,s.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:m(s.TAG_NAMES.NOSCRIPT,[s.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:d(e),scriptTags:m(s.TAG_NAMES.SCRIPT,[s.TAG_PROPERTIES.SRC,s.TAG_PROPERTIES.INNER_HTML],e),styleTags:m(s.TAG_NAMES.STYLE,[s.TAG_PROPERTIES.CSS_TEXT],e),title:f(e),titleAttributes:p(s.ATTRIBUTE_NAMES.TITLE,e)}},t.requestAnimationFrame=v,t.warn=_}).call(this,n(33))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(172));function o(e){return e&&e.__esModule?e:{default:e}}var a=({scrollRatio:e,scrollTopRatio:t,scrollToElement:n,shadows:o=[]},{})=>r.default.createElement("nav",{className:"railway"},o.map((e,t)=>{return r.default.createElement("div",{className:`shadow ${e.tagName.toLowerCase()}`,"data-html":!0,"data-tip":0!==e.tagName.indexOf("H1")?e.text:void 0,"data-place":"left","data-effect":"solid","data-for":"railway-tooltip","data-offset":"{'left': 20}",onClick:()=>{n(e.element)},key:t,style:{top:`${100*e.y}%`,height:`${100*e.h}%`}},0===e.tagName.indexOf("H1")&&r.default.createElement("span",{className:"railway-title"},e.text))}),void 0!==e&&void 0!==t?r.default.createElement("div",{className:"elevator",style:{top:`${100*t}%`,height:`${100*e}%`}}):null,r.default.createElement(i.default,{id:"railway-tooltip"}));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(70);function a(e){return e&&e.__esModule?e:{default:e}}const s=({resource:e},{contextualizers:t,productionAssets:n})=>{if(!["bib","glossary","section"].includes(e.metadata.type)){const i=t[e.metadata.type]&&t[e.metadata.type].Block,a=(0,o.v4)(),s={contextualizerId:a,sourceId:e.id,targetId:e.id},l={id:a,type:e.metadata.type,parameters:{}};return r.default.createElement("figure",{className:`block-contextualization-container ${l.type}`},r.default.createElement(i,{renderingMode:"screened",resource:e,contextualization:s,contextualizer:l,assets:n}))}return null};s.contextTypes={contextualizers:i.default.object,productionAssets:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=h(n(1)),o=n(341),a=n(311),s=n(4),l=n(40),u=h(n(310)),c=n(304),f=h(n(805)),d=h(n(313)),p=h(n(806));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=new Function("try {return this===window;}catch(e){ return false;}")();let y;b&&(y=n(174));const v={TABLET_MIN_WIDTH:768,DESKTOP_MIN_WIDTH:1224},x=(e,t)=>{let n=0,r=e;do{n+=r.offsetTop,r=r.offsetParent}while(void 0!==r&&r!==t);return n};class _ extends r.Component{constructor(e,t){super(e),g(this,"getChildContext",()=>{return{dimensions:m({},this.props.size,{width:this.props.size&&this.props.size.width||b&&window.innerWidth,height:this.props.size&&this.props.size.height||b&&window.innerHeight}),scrollToElement:this.scrollToElement,scrollToElementId:this.scrollToElementId,scrollToTop:this.scrollTo,scrollTop:this.state.gui.scrollTop,scrollTopAbs:this.state.gui.scrollTopAbs,scrollRatio:this.state.gui.scrollRatio,scrollTopRatio:this.state.gui.scrollTopRatio,scrollHeight:this.globalScrollbar&&this.globalScrollbar.getScrollHeight(),rawCitations:this.state.citations,bindContextualizationElement:this.bindContextualizationElement,scrollToContextualization:this.scrollToContextualization,toggleAsideVisible:this.toggleAsideVisible,asideVisible:this.state.gui.asideVisible,preprocessedData:this.props.preprocessedData,citationStyle:this.props.edition.data.citationStyle.data,citationLocale:this.props.edition.data.citationLocale.data}}),g(this,"componentDidMount",()=>{this.updateConstants(this.props),this.onProductionChange(this.context.production)}),g(this,"componentWillReceiveProps",e=>{this.props.production!==e.production&&this.updateConstants(e),this.props.viewId!==e.viewId&&(this.state.gui.asideVisible&&setTimeout(()=>this.toggleAsideVisible()),this.state.gui.indexOpen&&e.size.width<v.DESKTOP_MIN_WIDTH&&this.toggleIndex())}),g(this,"componentWillUpdate",(e,t,n)=>{this.context.production&&n.production&&this.context.production.id!==n.production.id&&this.onProductionChange(n.production)}),g(this,"updateConstants",e=>{this.setState({finalCss:this.updateStyles(e,this.context)})}),g(this,"bindContextualizationElement",(e,t)=>{this.contextualizationElements[e]=t}),g(this,"onProductionChange",e=>{const{edition:t}=this.props;this.setState({citations:this.props.preprocessedData&&this.props.preprocessedData.global&&this.props.preprocessedData.global.citations||(0,s.buildCitations)({production:e,edition:t},!0)})}),g(this,"scrollToElement",(e,t=!0,n=!0)=>{if(e&&b&&this.globalScrollbar){const r=this.globalScrollbar.container;let i=x(e,r);i=t&&this.props.size?i-this.props.size.height/2:i,this.scrollTo(i,n)}}),g(this,"scrollToContextualization",(e,t=!0)=>{const n=this.contextualizationElements[e];this.scrollToElement(n,t)}),g(this,"scrollToElementId",(e,t=!0)=>{const n=(this.context.usedDocument||document).getElementById(e);this.scrollToElement(n,t)}),g(this,"scrollTo",(e,t=!0)=>{if(!t)return void(this.globalScrollbar&&this.globalScrollbar.scrollTop(e));const n=this.globalScrollbar;if(!n)return void setTimeout(()=>{this.globalScrollbar&&this.scrollTo(e)});const r=n.getScrollTop(),i=n.getScrollHeight();let a=e>i?i:e;const s=(a=a<0?0:a)-r;for(let e=0;e<=1;e+=.1){const t=(0,o.easeCubic)(e);setTimeout(()=>{this.globalScrollbar.scrollTop(r+s*t)},1e3*e)}}),g(this,"onScrollUpdate",e=>{const t=e.top,n=e.scrollTop,r=e.clientHeight/e.scrollHeight,i=e.scrollTop/e.scrollHeight;let o={};t!==this.state.gui.scrollTop&&(o=m({},o,{gui:m({},this.state.gui,{inTop:0===t,scrollTop:t,scrollTopAbs:n,scrollRatio:r,scrollTopRatio:i,scrollHeight:e.scrollHeight})})),Object.keys(o).length&&this.setState(o)}),g(this,"toggleIndex",()=>{this.setState({gui:m({},this.state.gui,{indexOpen:!this.state.gui.indexOpen})})}),g(this,"toggleAsideVisible",()=>{this.setState({gui:m({},this.state.gui,{asideVisible:!this.state.gui.asideVisible})})}),g(this,"updateStyles",(e,t)=>{const{edition:{data:n={}}}=e,{contextualizers:r={}}=t,{style:{css:i="",mode:o="merge"}={css:""}}=n,a=Object.keys(r).map(e=>r[e]&&r[e].defaultCss||"").join("\n");return"merge"===o?[d.default,a,i].join("\n"):[a,i].join("\n")}),g(this,"render",()=>{const{props:{children:e,production:t,edition:n={},summary:i=[],viewId:o,viewClass:l},context:{},state:{finalCss:d,gui:{indexOpen:h,inTop:m,asideVisible:g},citations:y},toggleIndex:v,onScrollUpdate:x}=this,{data:_={}}=n,{additionalHTML:w=""}=_,O=n.data.publicationTitle&&n.data.publicationTitle.length?n.data.publicationTitle:t.metadata.title,E=(0,c.convertEditionToCslRecord)(t,n),k=o&&i.find(e=>e.viewId===o),S=k&&"landing"!==k.routeClass&&k.title;return r.default.createElement(p.default,{citations:y},r.default.createElement(u.default,{production:t,edition:n,withHelmet:!0}),b?r.default.createElement("section",{className:`deucalion-layout has-view-class-${l} ${g?"has-aside-visible":""} ${h?"has-index-open":""}`},r.default.createElement("section",{className:"main-container"},r.default.createElement(a.Scrollbars,{ref:e=>{this.globalScrollbar=e},autoHide:!0,onUpdate:x,universal:!0},r.default.createElement(s.StructuredCOinS,{cslRecord:E}),e)),r.default.createElement(f.default,{indexOpen:h,toggleIndex:v,locationTitle:S,inTop:m,summary:i,title:O})):r.default.createElement("section",{className:`deucalion-layout has-view-class-${l} ${g?"has-aside-visible":""} ${h?"has-index-open":""}`},r.default.createElement("section",{className:"main-container"},e),r.default.createElement(f.default,{indexOpen:h,toggleIndex:v,locationTitle:S,inTop:m,edition:n,summary:i,title:O})),r.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:d}}),r.default.createElement("div",{dangerouslySetInnerHTML:{__html:w}}))}),this.state={gui:{indexOpen:!1},citations:this.props.preprocessedData&&this.props.preprocessedData.global&&this.props.preprocessedData.global.citations||(0,s.buildCitations)({production:e.production,edition:e.edition},!0),finalCss:this.updateStyles(e,t)},this.contextualizationElements={},this.onScrollUpdate=(0,l.debounce)(this.onScrollUpdate,1e3)}}_.contextTypes={production:i.default.object,edition:i.default.object,usedDocument:i.default.object,contextualizers:i.default.object},_.childContextTypes={dimensions:i.default.object,scrollToElementId:i.default.func,scrollToElement:i.default.func,scrollToTop:i.default.func,scrollTop:i.default.number,scrollTopAbs:i.default.number,scrollRatio:i.default.number,scrollTopRatio:i.default.number,scrollHeight:i.default.number,rawCitations:i.default.object,bindContextualizationElement:i.default.func,scrollToContextualization:i.default.func,asideVisible:i.default.bool,toggleAsideVisible:i.default.func,preprocessedData:i.default.object,citationStyle:i.default.string,citationLocale:i.default.string};var w=b&&y?y({monitorHeight:!0,monitorWidth:!0,monitorPosition:!0})(_):_;t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(791),a=b(o),s=b(n(312)),l=n(2),u=b(n(1)),c=b(n(798)),f=b(n(799)),d=b(n(800)),p=b(n(801)),h=b(n(802)),m=n(803),g=n(804);function b(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e].concat(i)));return a.getScrollLeft=a.getScrollLeft.bind(a),a.getScrollTop=a.getScrollTop.bind(a),a.getScrollWidth=a.getScrollWidth.bind(a),a.getScrollHeight=a.getScrollHeight.bind(a),a.getClientWidth=a.getClientWidth.bind(a),a.getClientHeight=a.getClientHeight.bind(a),a.getValues=a.getValues.bind(a),a.getThumbHorizontalWidth=a.getThumbHorizontalWidth.bind(a),a.getThumbVerticalHeight=a.getThumbVerticalHeight.bind(a),a.getScrollLeftForOffset=a.getScrollLeftForOffset.bind(a),a.getScrollTopForOffset=a.getScrollTopForOffset.bind(a),a.scrollLeft=a.scrollLeft.bind(a),a.scrollTop=a.scrollTop.bind(a),a.scrollToLeft=a.scrollToLeft.bind(a),a.scrollToTop=a.scrollToTop.bind(a),a.scrollToRight=a.scrollToRight.bind(a),a.scrollToBottom=a.scrollToBottom.bind(a),a.handleTrackMouseEnter=a.handleTrackMouseEnter.bind(a),a.handleTrackMouseLeave=a.handleTrackMouseLeave.bind(a),a.handleHorizontalTrackMouseDown=a.handleHorizontalTrackMouseDown.bind(a),a.handleVerticalTrackMouseDown=a.handleVerticalTrackMouseDown.bind(a),a.handleHorizontalThumbMouseDown=a.handleHorizontalThumbMouseDown.bind(a),a.handleVerticalThumbMouseDown=a.handleVerticalThumbMouseDown.bind(a),a.handleWindowResize=a.handleWindowResize.bind(a),a.handleScroll=a.handleScroll.bind(a),a.handleDrag=a.handleDrag.bind(a),a.handleDragEnd=a.handleDragEnd.bind(a),a.state={didMountUniversal:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.addListeners(),this.update(),this.componentDidMountUniversal()}},{key:"componentDidMountUniversal",value:function(){this.props.universal&&this.setState({didMountUniversal:!0})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.removeListeners(),(0,o.cancel)(this.requestFrame),clearTimeout(this.hideTracksTimeout),clearInterval(this.detectScrollingInterval)}},{key:"getScrollLeft",value:function(){return this.view?this.view.scrollLeft:0}},{key:"getScrollTop",value:function(){return this.view?this.view.scrollTop:0}},{key:"getScrollWidth",value:function(){return this.view?this.view.scrollWidth:0}},{key:"getScrollHeight",value:function(){return this.view?this.view.scrollHeight:0}},{key:"getClientWidth",value:function(){return this.view?this.view.clientWidth:0}},{key:"getClientHeight",value:function(){return this.view?this.view.clientHeight:0}},{key:"getValues",value:function(){var e=this.view||{},t=e.scrollLeft,n=void 0===t?0:t,r=e.scrollTop,i=void 0===r?0:r,o=e.scrollWidth,a=void 0===o?0:o,s=e.scrollHeight,l=void 0===s?0:s,u=e.clientWidth,c=void 0===u?0:u,f=e.clientHeight,d=void 0===f?0:f;return{left:n/(a-c)||0,top:i/(l-d)||0,scrollLeft:n,scrollTop:i,scrollWidth:a,scrollHeight:l,clientWidth:c,clientHeight:d}}},{key:"getThumbHorizontalWidth",value:function(){var e=this.props,t=e.thumbSize,n=e.thumbMinSize,r=this.view,i=r.scrollWidth,o=r.clientWidth,a=(0,p.default)(this.trackHorizontal),s=Math.ceil(o/i*a);return a===s?0:t||Math.max(s,n)}},{key:"getThumbVerticalHeight",value:function(){var e=this.props,t=e.thumbSize,n=e.thumbMinSize,r=this.view,i=r.scrollHeight,o=r.clientHeight,a=(0,h.default)(this.trackVertical),s=Math.ceil(o/i*a);return a===s?0:t||Math.max(s,n)}},{key:"getScrollLeftForOffset",value:function(e){var t=this.view,n=t.scrollWidth,r=t.clientWidth;return e/((0,p.default)(this.trackHorizontal)-this.getThumbHorizontalWidth())*(n-r)}},{key:"getScrollTopForOffset",value:function(e){var t=this.view,n=t.scrollHeight,r=t.clientHeight;return e/((0,h.default)(this.trackVertical)-this.getThumbVerticalHeight())*(n-r)}},{key:"scrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollLeft=e)}},{key:"scrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollTop=e)}},{key:"scrollToLeft",value:function(){this.view&&(this.view.scrollLeft=0)}},{key:"scrollToTop",value:function(){this.view&&(this.view.scrollTop=0)}},{key:"scrollToRight",value:function(){this.view&&(this.view.scrollLeft=this.view.scrollWidth)}},{key:"scrollToBottom",value:function(){this.view&&(this.view.scrollTop=this.view.scrollHeight)}},{key:"addListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,n=this.trackVertical,r=this.thumbHorizontal,i=this.thumbVertical;e.addEventListener("scroll",this.handleScroll),(0,f.default)()&&(t.addEventListener("mouseenter",this.handleTrackMouseEnter),t.addEventListener("mouseleave",this.handleTrackMouseLeave),t.addEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.addEventListener("mouseenter",this.handleTrackMouseEnter),n.addEventListener("mouseleave",this.handleTrackMouseLeave),n.addEventListener("mousedown",this.handleVerticalTrackMouseDown),r.addEventListener("mousedown",this.handleHorizontalThumbMouseDown),i.addEventListener("mousedown",this.handleVerticalThumbMouseDown),window.addEventListener("resize",this.handleWindowResize))}}},{key:"removeListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,n=this.trackVertical,r=this.thumbHorizontal,i=this.thumbVertical;e.removeEventListener("scroll",this.handleScroll),(0,f.default)()&&(t.removeEventListener("mouseenter",this.handleTrackMouseEnter),t.removeEventListener("mouseleave",this.handleTrackMouseLeave),t.removeEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.removeEventListener("mouseenter",this.handleTrackMouseEnter),n.removeEventListener("mouseleave",this.handleTrackMouseLeave),n.removeEventListener("mousedown",this.handleVerticalTrackMouseDown),r.removeEventListener("mousedown",this.handleHorizontalThumbMouseDown),i.removeEventListener("mousedown",this.handleVerticalThumbMouseDown),window.removeEventListener("resize",this.handleWindowResize),this.teardownDragging())}}},{key:"handleScroll",value:function(e){var t=this,n=this.props,r=n.onScroll,i=n.onScrollFrame;r&&r(e),this.update((function(e){var n=e.scrollLeft,r=e.scrollTop;t.viewScrollLeft=n,t.viewScrollTop=r,i&&i(e)})),this.detectScrolling()}},{key:"handleScrollStart",value:function(){var e=this.props.onScrollStart;e&&e(),this.handleScrollStartAutoHide()}},{key:"handleScrollStartAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleScrollStop",value:function(){var e=this.props.onScrollStop;e&&e(),this.handleScrollStopAutoHide()}},{key:"handleScrollStopAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleWindowResize",value:function(){this.update()}},{key:"handleHorizontalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,n=e.clientX,r=t.getBoundingClientRect().left,i=this.getThumbHorizontalWidth(),o=Math.abs(r-n)-i/2;this.view.scrollLeft=this.getScrollLeftForOffset(o)}},{key:"handleVerticalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,n=e.clientY,r=t.getBoundingClientRect().top,i=this.getThumbVerticalHeight(),o=Math.abs(r-n)-i/2;this.view.scrollTop=this.getScrollTopForOffset(o)}},{key:"handleHorizontalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,n=e.clientX,r=t.offsetWidth,i=t.getBoundingClientRect().left;this.prevPageX=r-(n-i)}},{key:"handleVerticalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,n=e.clientY,r=t.offsetHeight,i=t.getBoundingClientRect().top;this.prevPageY=r-(n-i)}},{key:"setupDragging",value:function(){(0,s.default)(document.body,m.disableSelectStyle),document.addEventListener("mousemove",this.handleDrag),document.addEventListener("mouseup",this.handleDragEnd),document.onselectstart=d.default}},{key:"teardownDragging",value:function(){(0,s.default)(document.body,m.disableSelectStyleReset),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleDragEnd),document.onselectstart=void 0}},{key:"handleDragStart",value:function(e){this.dragging=!0,e.stopImmediatePropagation(),this.setupDragging()}},{key:"handleDrag",value:function(e){if(this.prevPageX){var t=e.clientX,n=-this.trackHorizontal.getBoundingClientRect().left+t-(this.getThumbHorizontalWidth()-this.prevPageX);this.view.scrollLeft=this.getScrollLeftForOffset(n)}if(this.prevPageY){var r=e.clientY,i=-this.trackVertical.getBoundingClientRect().top+r-(this.getThumbVerticalHeight()-this.prevPageY);this.view.scrollTop=this.getScrollTopForOffset(i)}return!1}},{key:"handleDragEnd",value:function(){this.dragging=!1,this.prevPageX=this.prevPageY=0,this.teardownDragging(),this.handleDragEndAutoHide()}},{key:"handleDragEndAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleTrackMouseEnter",value:function(){this.trackMouseOver=!0,this.handleTrackMouseEnterAutoHide()}},{key:"handleTrackMouseEnterAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleTrackMouseLeave",value:function(){this.trackMouseOver=!1,this.handleTrackMouseLeaveAutoHide()}},{key:"handleTrackMouseLeaveAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"showTracks",value:function(){clearTimeout(this.hideTracksTimeout),(0,s.default)(this.trackHorizontal,{opacity:1}),(0,s.default)(this.trackVertical,{opacity:1})}},{key:"hideTracks",value:function(){var e=this;if(!this.dragging&&!this.scrolling&&!this.trackMouseOver){var t=this.props.autoHideTimeout;clearTimeout(this.hideTracksTimeout),this.hideTracksTimeout=setTimeout((function(){(0,s.default)(e.trackHorizontal,{opacity:0}),(0,s.default)(e.trackVertical,{opacity:0})}),t)}}},{key:"detectScrolling",value:function(){var e=this;this.scrolling||(this.scrolling=!0,this.handleScrollStart(),this.detectScrollingInterval=setInterval((function(){e.lastViewScrollLeft===e.viewScrollLeft&&e.lastViewScrollTop===e.viewScrollTop&&(clearInterval(e.detectScrollingInterval),e.scrolling=!1,e.handleScrollStop()),e.lastViewScrollLeft=e.viewScrollLeft,e.lastViewScrollTop=e.viewScrollTop}),100))}},{key:"raf",value:function(e){var t=this;this.requestFrame&&a.default.cancel(this.requestFrame),this.requestFrame=(0,a.default)((function(){t.requestFrame=void 0,e()}))}},{key:"update",value:function(e){var t=this;this.raf((function(){return t._update(e)}))}},{key:"_update",value:function(e){var t=this.props,n=t.onUpdate,r=t.hideTracksWhenNotNeeded,i=this.getValues();if((0,f.default)()){var o=i.scrollLeft,a=i.clientWidth,l=i.scrollWidth,u=(0,p.default)(this.trackHorizontal),c=this.getThumbHorizontalWidth(),d={width:c,transform:"translateX("+o/(l-a)*(u-c)+"px)"},m=i.scrollTop,g=i.clientHeight,b=i.scrollHeight,y=(0,h.default)(this.trackVertical),v=this.getThumbVerticalHeight(),x={height:v,transform:"translateY("+m/(b-g)*(y-v)+"px)"};if(r){var _={visibility:l>a?"visible":"hidden"},w={visibility:b>g?"visible":"hidden"};(0,s.default)(this.trackHorizontal,_),(0,s.default)(this.trackVertical,w)}(0,s.default)(this.thumbHorizontal,d),(0,s.default)(this.thumbVertical,x)}n&&n(i),"function"==typeof e&&e(i)}},{key:"render",value:function(){var e=this,t=(0,f.default)(),n=this.props,i=(n.onScroll,n.onScrollFrame,n.onScrollStart,n.onScrollStop,n.onUpdate,n.renderView),o=n.renderTrackHorizontal,a=n.renderTrackVertical,s=n.renderThumbHorizontal,u=n.renderThumbVertical,d=n.tagName,p=(n.hideTracksWhenNotNeeded,n.autoHide),h=(n.autoHideTimeout,n.autoHideDuration),g=(n.thumbSize,n.thumbMinSize,n.universal),b=n.autoHeight,y=n.autoHeightMin,v=n.autoHeightMax,x=n.style,_=n.children,w=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["onScroll","onScrollFrame","onScrollStart","onScrollStop","onUpdate","renderView","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","tagName","hideTracksWhenNotNeeded","autoHide","autoHideTimeout","autoHideDuration","thumbSize","thumbMinSize","universal","autoHeight","autoHeightMin","autoHeightMax","style","children"]),O=this.state.didMountUniversal,E=r({},m.containerStyleDefault,b&&r({},m.containerStyleAutoHeight,{minHeight:y,maxHeight:v}),x),k=r({},m.viewStyleDefault,{marginRight:t?-t:0,marginBottom:t?-t:0},b&&r({},m.viewStyleAutoHeight,{minHeight:(0,c.default)(y)?"calc("+y+" + "+t+"px)":y+t,maxHeight:(0,c.default)(v)?"calc("+v+" + "+t+"px)":v+t}),b&&g&&!O&&{minHeight:y,maxHeight:v},g&&!O&&m.viewStyleUniversalInitial),S={transition:"opacity "+h+"ms",opacity:0},T=r({},m.trackHorizontalStyleDefault,p&&S,(!t||g&&!O)&&{display:"none"}),j=r({},m.trackVerticalStyleDefault,p&&S,(!t||g&&!O)&&{display:"none"});return(0,l.createElement)(d,r({},w,{style:E,ref:function(t){e.container=t}}),[(0,l.cloneElement)(i({style:k}),{key:"view",ref:function(t){e.view=t}},_),(0,l.cloneElement)(o({style:T}),{key:"trackHorizontal",ref:function(t){e.trackHorizontal=t}},(0,l.cloneElement)(s({style:m.thumbHorizontalStyleDefault}),{ref:function(t){e.thumbHorizontal=t}})),(0,l.cloneElement)(a({style:j}),{key:"trackVertical",ref:function(t){e.trackVertical=t}},(0,l.cloneElement)(u({style:m.thumbVerticalStyleDefault}),{ref:function(t){e.thumbVertical=t}}))])}}]),t}(l.Component);t.default=y,y.propTypes={onScroll:u.default.func,onScrollFrame:u.default.func,onScrollStart:u.default.func,onScrollStop:u.default.func,onUpdate:u.default.func,renderView:u.default.func,renderTrackHorizontal:u.default.func,renderTrackVertical:u.default.func,renderThumbHorizontal:u.default.func,renderThumbVertical:u.default.func,tagName:u.default.string,thumbSize:u.default.number,thumbMinSize:u.default.number,hideTracksWhenNotNeeded:u.default.bool,autoHide:u.default.bool,autoHideTimeout:u.default.number,autoHideDuration:u.default.number,autoHeight:u.default.bool,autoHeightMin:u.default.oneOfType([u.default.number,u.default.string]),autoHeightMax:u.default.oneOfType([u.default.number,u.default.string]),universal:u.default.bool,style:u.default.object,children:u.default.node},y.defaultProps={renderView:g.renderViewDefault,renderTrackHorizontal:g.renderTrackHorizontalDefault,renderTrackVertical:g.renderTrackVerticalDefault,renderThumbHorizontal:g.renderThumbHorizontalDefault,renderThumbVertical:g.renderThumbVerticalDefault,tagName:"div",thumbMinSize:30,hideTracksWhenNotNeeded:!1,autoHide:!1,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!1,autoHeightMin:0,autoHeightMax:200,universal:!1}},function(e,t,n){(function(t){for(var r=n(792),i="undefined"==typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],u=0;!s&&u<o.length;u++)s=i[o[u]+"Request"+a],l=i[o[u]+"Cancel"+a]||i[o[u]+"CancelRequest"+a];if(!s||!l){var c=0,f=0,d=[];s=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return d.push({handle:++f,callback:e,cancelled:!1}),f},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this,n(33))},function(e,t,n){(function(t){(function(){var n,r,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(55))},function(e,t){var n=null,r=["Webkit","Moz","O","ms"];e.exports=function(e){n||(n=document.createElement("div"));var t=n.style;if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),o=r.length;o>=0;o--){var a=r[o]+i;if(a in t)return a}return!1}},function(e,t,n){var r=n(795);e.exports=function(e){return r(e).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))}},function(e,t,n){var r=n(796);e.exports=function(e){return r(e).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()}},function(e,t){e.exports=function(e){return n.test(e)?e.toLowerCase():r.test(e)?(function(e){return e.replace(o,(function(e,t){return t?" "+t:""}))}(e)||e).toLowerCase():i.test(e)?function(e){return e.replace(a,(function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")}))}(e).toLowerCase():e.toLowerCase()};var n=/\s/,r=/(_|-|\.|:)/,i=/([a-z][A-Z]|[A-Z][a-z])/;var o=/[\W_]+(.|$)/g;var a=/(.)([A-Z]+)/g},function(e,t){var n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0};e.exports=function(e,t){return"number"!=typeof t||n[e]?t:t+"px"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!1!==a)return a;if("undefined"!=typeof document){var e=document.createElement("div");(0,o.default)(e,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",MsOverflowStyle:"scrollbar"}),document.body.appendChild(e),a=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else a=0;return a||0};var r,i=n(312),o=(r=i)&&r.__esModule?r:{default:r};var a=!1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.clientWidth,n=getComputedStyle(e),r=n.paddingLeft,i=n.paddingRight;return t-parseFloat(r)-parseFloat(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.clientHeight,n=getComputedStyle(e),r=n.paddingTop,i=n.paddingBottom;return t-parseFloat(r)-parseFloat(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.containerStyleDefault={position:"relative",overflow:"hidden",width:"100%",height:"100%"},t.containerStyleAutoHeight={height:"auto"},t.viewStyleDefault={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"scroll",WebkitOverflowScrolling:"touch"},t.viewStyleAutoHeight={position:"relative",top:void 0,left:void 0,right:void 0,bottom:void 0},t.viewStyleUniversalInitial={overflow:"hidden",marginRight:0,marginBottom:0},t.trackHorizontalStyleDefault={position:"absolute",height:6},t.trackVerticalStyleDefault={position:"absolute",width:6},t.thumbHorizontalStyleDefault={position:"relative",display:"block",height:"100%"},t.thumbVerticalStyleDefault={position:"relative",display:"block",width:"100%"},t.disableSelectStyle={userSelect:"none"},t.disableSelectStyleReset={userSelect:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.renderViewDefault=function(e){return a.default.createElement("div",e)},t.renderTrackHorizontalDefault=function(e){var t=e.style,n=s(e,["style"]),i=r({},t,{right:2,bottom:2,left:2,borderRadius:3});return a.default.createElement("div",r({style:i},n))},t.renderTrackVerticalDefault=function(e){var t=e.style,n=s(e,["style"]),i=r({},t,{right:2,bottom:2,top:2,borderRadius:3});return a.default.createElement("div",r({style:i},n))},t.renderThumbHorizontalDefault=function(e){var t=e.style,n=s(e,["style"]),i=r({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return a.default.createElement("div",r({style:i},n))},t.renderThumbVerticalDefault=function(e){var t=e.style,n=s(e,["style"]),i=r({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return a.default.createElement("div",r({style:i},n))};var i,o=n(2),a=(i=o)&&i.__esModule?i:{default:i};function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(4);function a(e){return e&&e.__esModule?e:{default:e}}const s=({summary:e=[],toggleIndex:t,locationTitle:n,title:i},{LinkComponent:a})=>{const s=e.filter(e=>"landing"!==e.routeClass);let l=e.find(e=>"landing"===e.routeClass);return!l&&e.length&&(l=e[0]),r.default.createElement("nav",{className:"nav"},r.default.createElement("div",{className:"nav-header"},r.default.createElement("button",{className:"nav-toggle",onClick:t},r.default.createElement("span",{className:"nav-toggle-symbol"},"✚")),r.default.createElement("h1",{className:"title"},l?r.default.createElement(a,{to:l},r.default.createElement("strong",{className:"hero-title"},(0,o.abbrevString)(i))):i," ",n&&r.default.createElement("em",{onClick:t,className:"location-title"},(0,o.abbrevString)(n,60)))),r.default.createElement("div",{className:"nav-content-container"},r.default.createElement("ul",null,s.map((e,t)=>r.default.createElement("li",{key:t,className:`nav-item level-${e.level}`},r.default.createElement(a,{to:e},e.title))))))};s.contextTypes={LinkComponent:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(1))&&r.__esModule?r:{default:r};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),a(this,"getChildContext",()=>({citations:this.props.citations?this.props.citations.citationComponents:{}})),a(this,"render",()=>{const{children:e}=this.props;return e})}}t.default=s,a(s,"childContextTypes",{citations:o.default.object})},function(e,t,n){"use strict";var r=n(314).forEach,i=n(808),o=n(809),a=n(810),s=n(811),l=n(812),u=n(315),c=n(813),f=n(815),d=n(816),p=n(817);function h(e){return Array.isArray(e)||void 0!==e.length}function m(e){if(Array.isArray(e))return e;var t=[];return r(e,(function(e){t.push(e)})),t}function g(e){return e&&1===e.nodeType}function b(e,t,n){var r=e[t];return null==r&&void 0!==n?n:r}e.exports=function(e){var t;if((e=e||{}).idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var n=a(),y=s({idGenerator:n,stateHandler:f});t=y}var v=e.reporter;v||(v=l(!1===v));var x=b(e,"batchProcessor",c({reporter:v})),_={};_.callOnAdd=!!b(e,"callOnAdd",!0),_.debug=!!b(e,"debug",!1);var w,O=o(t),E=i({stateHandler:f}),k=b(e,"strategy","object"),S={reporter:v,batchProcessor:x,stateHandler:f,idHandler:t};if("scroll"===k&&(u.isLegacyOpera()?(v.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),k="object"):u.isIE(9)&&(v.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),k="object")),"scroll"===k)w=p(S);else{if("object"!==k)throw new Error("Invalid strategy name: "+k);w=d(S)}var T={};return{listenTo:function(e,n,i){function o(e){var t=O.get(e);r(t,(function(t){t(e)}))}function a(e,t,n){O.add(t,n),e&&n(t)}if(i||(i=n,n=e,e={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(g(n))n=[n];else{if(!h(n))return v.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=m(n)}var s=0,l=b(e,"callOnAdd",_.callOnAdd),u=b(e,"onReady",(function(){})),c=b(e,"debug",_.debug);r(n,(function(e){f.getState(e)||(f.initState(e),t.set(e));var d=t.get(e);if(c&&v.log("Attaching listener to element",d,e),!E.isDetectable(e))return c&&v.log(d,"Not detectable."),E.isBusy(e)?(c&&v.log(d,"System busy making it detectable"),a(l,e,i),T[d]=T[d]||[],void T[d].push((function(){++s===n.length&&u()}))):(c&&v.log(d,"Making detectable..."),E.markBusy(e,!0),w.makeDetectable({debug:c},e,(function(e){if(c&&v.log(d,"onElementDetectable"),f.getState(e)){E.markAsDetectable(e),E.markBusy(e,!1),w.addListener(e,o),a(l,e,i);var t=f.getState(e);if(t&&t.startSize){var p=e.offsetWidth,h=e.offsetHeight;t.startSize.width===p&&t.startSize.height===h||o(e)}T[d]&&r(T[d],(function(e){e()}))}else c&&v.log(d,"Element uninstalled before being detectable.");delete T[d],++s===n.length&&u()})));c&&v.log(d,"Already detecable, adding listener."),a(l,e,i),s++})),s===n.length&&u()},removeListener:O.removeListener,removeAllListeners:O.removeAllListeners,uninstall:function(e){if(!e)return v.error("At least one element is required.");if(g(e))e=[e];else{if(!h(e))return v.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=m(e)}r(e,(function(e){O.removeAllListeners(e),w.uninstall(e),f.cleanState(e)}))}}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.stateHandler.getState;return{isDetectable:function(e){var n=t(e);return n&&!!n.isDetectable},markAsDetectable:function(e){t(e).isDetectable=!0},isBusy:function(e){return!!t(e).busy},markBusy:function(e,n){t(e).busy=!!n}}}},function(e,t,n){"use strict";e.exports=function(e){var t={};function n(n){var r=e.get(n);return void 0===r?[]:t[r]||[]}return{get:n,add:function(n,r){var i=e.get(n);t[i]||(t[i]=[]),t[i].push(r)},removeListener:function(e,t){for(var r=n(e),i=0,o=r.length;i<o;++i)if(r[i]===t){r.splice(i,1);break}},removeAllListeners:function(e){var t=n(e);t&&(t.length=0)}}}},function(e,t,n){"use strict";e.exports=function(){var e=1;return{generate:function(){return e++}}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.idGenerator,n=e.stateHandler.getState;return{get:function(e){var t=n(e);return t&&void 0!==t.id?t.id:null},set:function(e){var r=n(e);if(!r)throw new Error("setId required the element to have a resize detection state.");var i=t.generate();return r.id=i,i}}}},function(e,t,n){"use strict";e.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},function(e,t,n){"use strict";var r=n(814);function i(){var e={},t=0,n=0,r=0;return{add:function(i,o){o||(o=i,i=0),i>n?n=i:i<r&&(r=i),e[i]||(e[i]=[]),e[i].push(o),t++},process:function(){for(var t=r;t<=n;t++)for(var i=e[t],o=0;o<i.length;o++){(0,i[o])()}},size:function(){return t}}}e.exports=function(e){var t=(e=e||{}).reporter,n=r.getOption(e,"async",!0),o=r.getOption(e,"auto",!0);o&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var a,s=i(),l=!1;function u(){for(l=!0;s.size();){var e=s;s=i(),e.process()}l=!1}function c(){var e;e=u,a=setTimeout(e,0)}return{add:function(e,t){!l&&o&&n&&0===s.size()&&c(),s.add(e,t)},force:function(e){l||(void 0===e&&(e=n),a&&(clearTimeout(a),a=null),e?c():u())}}}},function(e,t,n){"use strict";(e.exports={}).getOption=function(e,t,n){var r=e[t];if(null==r&&void 0!==n)return n;return r}},function(e,t,n){"use strict";var r="_erd";function i(e){return e[r]}e.exports={initState:function(e){return e[r]={},i(e)},getState:i,cleanState:function(e){delete e[r]}}},function(e,t,n){"use strict";var r=n(315);e.exports=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,i=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function o(e){return i(e).object}return{makeDetectable:function(e,o,a){a||(a=o,o=e,e=null),(e=e||{}).debug,r.isIE(8)?a(o):function(e,o){var a="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",s=!1,l=window.getComputedStyle(e),u=e.offsetWidth,c=e.offsetHeight;function f(){function n(){if("static"===l.position){e.style.position="relative";var n=function(e,t,n,r){var i=n[r];"auto"!==i&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(i)&&(e.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};n(t,e,l,"top"),n(t,e,l,"right"),n(t,e,l,"bottom"),n(t,e,l,"left")}}""!==l.position&&(n(),s=!0);var u=document.createElement("object");u.style.cssText=a,u.tabIndex=-1,u.type="text/html",u.setAttribute("aria-hidden","true"),u.onload=function(){s||n(),function e(t,n){t.contentDocument?n(t.contentDocument):setTimeout((function(){e(t,n)}),100)}(this,(function(t){o(e)}))},r.isIE()||(u.data="about:blank"),e.appendChild(u),i(e).object=u,r.isIE()&&(u.data="about:blank")}i(e).startSize={width:u,height:c},n?n.add(f):f()}(o,a)},addListener:function(e,t){if(!o(e))throw new Error("Element is not detectable by this strategy.");function n(){t(e)}r.isIE(8)?(i(e).object={proxy:n},e.attachEvent("onresize",n)):o(e).contentDocument.defaultView.addEventListener("resize",n)},uninstall:function(e){r.isIE(8)?e.detachEvent("onresize",i(e).object.proxy):e.removeChild(o(e)),delete i(e).object}}}},function(e,t,n){"use strict";var r=n(314).forEach;e.exports=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,i=e.stateHandler.getState,o=(e.stateHandler.hasState,e.idHandler);if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var a=function(){var e=document.createElement("div");e.style.cssText="position: absolute; width: 1000px; height: 1000px; visibility: hidden; margin: 0; padding: 0;";var t=document.createElement("div");t.style.cssText="position: absolute; width: 500px; height: 500px; overflow: scroll; visibility: none; top: -1500px; left: -1500px; visibility: hidden; margin: 0; padding: 0;",t.appendChild(e),document.body.insertBefore(t,document.body.firstChild);var n=500-t.clientWidth,r=500-t.clientHeight;return document.body.removeChild(t),{width:n,height:r}}(),s="erd_scroll_detection_container";function l(e,n,r){if(e.addEventListener)e.addEventListener(n,r);else{if(!e.attachEvent)return t.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+n,r)}}function u(e,n,r){if(e.removeEventListener)e.removeEventListener(n,r);else{if(!e.detachEvent)return t.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+n,r)}}function c(e){return i(e).container.childNodes[0].childNodes[0].childNodes[0]}function f(e){return i(e).container.childNodes[0].childNodes[0].childNodes[1]}return function(e,t){if(!document.getElementById(e)){var n=t+"_animation",r="/* Created by the element-resize-detector library. */\n";r+="."+t+" > div::-webkit-scrollbar { display: none; }\n\n",r+="."+(t+"_animation_active")+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+n+"; animation-name: "+n+"; }\n",r+="@-webkit-keyframes "+n+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function(t,n){n=n||function(e){document.head.appendChild(e)};var r=document.createElement("style");r.innerHTML=t,r.id=e,n(r)}(r+="@keyframes "+n+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}("erd_scroll_detection_scrollbar_style",s),{makeDetectable:function(e,u,d){function p(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(o.get(u),"Scroll: "),t.log.apply)t.log.apply(null,n);else for(var r=0;r<n.length;r++)t.log(n[r])}}function h(e){var t=i(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function m(){var e=window.getComputedStyle(u),t={};return t.position=e.position,t.width=u.offsetWidth,t.height=u.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function g(){if(p("storeStyle invoked."),i(u)){var e=m();i(u).style=e}else p("Aborting because element has been uninstalled")}function b(e,t,n){i(e).lastWidth=t,i(e).lastHeight=n}function y(){return 2*a.width+1}function v(){return 2*a.height+1}function x(e){return e+10+y()}function _(e){return e+10+v()}function w(e,t,n){var r=c(e),i=f(e),o=x(t),a=_(n),s=function(e){return 2*e+y()}(t),l=function(e){return 2*e+v()}(n);r.scrollLeft=o,r.scrollTop=a,i.scrollLeft=s,i.scrollTop=l}function O(){var e=i(u).container;if(!e){(e=document.createElement("div")).className=s,e.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",i(u).container=e,function(e){e.className+=" "+s+"_animation_active"}(e),u.appendChild(e);var t=function(){i(u).onRendered&&i(u).onRendered()};l(e,"animationstart",t),i(u).onAnimationStart=t}return e}function E(){if(p("Injecting elements"),i(u)){!function(){var e=i(u).style;if("static"===e.position){u.style.position="relative";var n=function(e,t,n,r){var i=n[r];"auto"!==i&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(i)&&(e.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};n(t,u,e,"top"),n(t,u,e,"right"),n(t,u,e,"bottom"),n(t,u,e,"left")}}();var e=i(u).container;e||(e=O());var n,r,o,c,f=a.width,d=a.height,h="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; "+("left: "+(n=(n=-(1+f))?n+"px":"0")+"; top: "+(r=(r=-(1+d))?r+"px":"0")+"; right: "+(c=(c=-f)?c+"px":"0")+"; bottom: "+(o=(o=-d)?o+"px":"0")+";"),m=document.createElement("div"),g=document.createElement("div"),b=document.createElement("div"),y=document.createElement("div"),v=document.createElement("div"),x=document.createElement("div");m.dir="ltr",m.style.cssText="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",m.className=s,g.className=s,g.style.cssText=h,b.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",y.style.cssText="position: absolute; left: 0; top: 0;",v.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",x.style.cssText="position: absolute; width: 200%; height: 200%;",b.appendChild(y),v.appendChild(x),g.appendChild(b),g.appendChild(v),m.appendChild(g),e.appendChild(m),l(b,"scroll",_),l(v,"scroll",w),i(u).onExpandScroll=_,i(u).onShrinkScroll=w}else p("Aborting because element has been uninstalled");function _(){i(u).onExpand&&i(u).onExpand()}function w(){i(u).onShrink&&i(u).onShrink()}}function k(){function a(e,t,n){var r=function(e){return c(e).childNodes[0]}(e),i=x(t),o=_(n);r.style.width=i+"px",r.style.height=o+"px"}function s(r){var s=u.offsetWidth,c=u.offsetHeight;p("Storing current size",s,c),b(u,s,c),n.add(0,(function(){if(i(u))if(l()){if(e.debug){var n=u.offsetWidth,r=u.offsetHeight;n===s&&r===c||t.warn(o.get(u),"Scroll: Size changed before updating detector elements.")}a(u,s,c)}else p("Aborting because element container has not been initialized");else p("Aborting because element has been uninstalled")})),n.add(1,(function(){i(u)?l()?w(u,s,c):p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")})),r&&n.add(2,(function(){i(u)?l()?r():p("Aborting because element container has not been initialized"):p("Aborting because element has been uninstalled")}))}function l(){return!!i(u).container}function d(){p("notifyListenersIfNeeded invoked");var e=i(u);return void 0===i(u).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?p("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?p("Not notifying: Size already notified"):(p("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void r(i(u).listeners,(function(e){e(u)})))}function m(){if(p("Scroll detected."),h(u))p("Scroll event fired while unrendered. Ignoring...");else{var e=u.offsetWidth,t=u.offsetHeight;e!==i(u).lastWidth||t!==i(u).lastHeight?(p("Element size changed."),s(d)):p("Element size has not changed ("+e+"x"+t+").")}}if(p("registerListenersAndPositionElements invoked."),i(u)){i(u).onRendered=function(){if(p("startanimation triggered."),h(u))p("Ignoring since element is still unrendered...");else{p("Element rendered.");var e=c(u),t=f(u);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(p("Scrollbars out of sync. Updating detector elements..."),s(d))}},i(u).onExpand=m,i(u).onShrink=m;var g=i(u).style;a(u,g.width,g.height)}else p("Aborting because element has been uninstalled")}function S(){if(p("finalizeDomMutation invoked."),i(u)){var e=i(u).style;b(u,e.width,e.height),w(u,e.width,e.height)}else p("Aborting because element has been uninstalled")}function T(){d(u)}function j(){var e;p("Installing..."),i(u).listeners=[],e=m(),i(u).startSize={width:e.width,height:e.height},p("Element start size",i(u).startSize),n.add(0,g),n.add(1,E),n.add(2,k),n.add(3,S),n.add(4,T)}d||(d=u,u=e,e=null),e=e||{},p("Making detectable..."),!function(e){return!function(e){return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)}(e)||null===window.getComputedStyle(e)}(u)?j():(p("Element is detached"),O(),p("Waiting until element is attached..."),i(u).onRendered=function(){p("Element is now attached"),j()})},addListener:function(e,t){if(!i(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");i(e).listeners.push(t)},uninstall:function(e){var t=i(e);t&&(t.onExpandScroll&&u(c(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&u(f(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&u(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))}}}},function(e,t,n){"use strict";function r(e,t,n,r){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function l(){var l=this,u=Date.now()-a,c=arguments;function f(){a=Date.now(),n.apply(l,c)}o||(r&&!i&&f(),s(),void 0===r&&u>e?f():!0!==t&&(i=setTimeout(r?function(){i=void 0}:f,void 0===r?e-u:e)))}return"boolean"!=typeof t&&(r=n,n=t,t=void 0),l.cancel=function(){s(),o=!0},l}function i(e,t,n){return void 0===n?r(e,t,!1):r(e,n,!1!==t)}n.r(t),n.d(t,"throttle",(function(){return r})),n.d(t,"debounce",(function(){return i}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(99));function o(e){return e&&e.__esModule?e:{default:e}}var a=({activeViewParams:e,options:t={}})=>{const{title:n,markdownContents:o,customCssId:a=e.routeSlug}=t;return r.default.createElement("div",{id:a,className:"custom-page main-contents-container"},r.default.createElement("div",{className:"main-column"},r.default.createElement("div",{className:"header view-title"},r.default.createElement("h1",null,n)),r.default.createElement("div",{className:"contents"},r.default.createElement(i.default,{src:o}))))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(44));function o(e){return e&&e.__esModule?e:{default:e}}var a=({production:e,edition:t={},options:n={},nextNavItem:o})=>{const{customTitle:a,customSubtitle:s,customPresentationText:l,customReadingLinks:u=[],customNextLinkTitle:c,animatedBackground:f="none"}=n,{data:d={}}=t,{publicationTitle:p,publicationSubtitle:h}=d,m=a&&a.trim().length?a:p||e.metadata.title,g=s&&s.trim().length?s:h||e.metadata.subtitle,b=l&&l.trim().length?l:e.metadata.abstract,y=e.metadata.authors||[];return r.default.createElement("div",{className:`landing-player main-contents-container ${f&&"none"!==f?`has-animated-background-${f}`:""}`},r.default.createElement("div",{className:"main-column"},r.default.createElement("div",{className:"header"},r.default.createElement("h1",{className:"landing-title"},m),g&&g.length&&r.default.createElement("h2",{className:"landing-subtitle"},g),r.default.createElement("h3",null,y.length>0&&y.map((e,t)=>"string"==typeof e?r.default.createElement("span",{key:t},e):r.default.createElement("span",{key:t},`${e.given} ${e.family}`)).reduce((e,t,n)=>0===n?[t]:[...e,", ",t],[]))),b&&r.default.createElement("div",{className:"presentation"},b),r.default.createElement("ul",{className:"links"},o&&r.default.createElement("li",{className:"main-link"},r.default.createElement(i.default,{to:o},c&&c.length?c:o.title," →")),u.length>0&&u.map((e,t)=>r.default.createElement("a",{key:t,href:e.link,target:"blank",rel:"noopener"},e.linkTitle," →")))))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=l(n(1)),o=n(4),a=l(n(305)),s=l(n(306));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=({production:{metadata:{title:e,subtitle:t,authors:n=[]}}})=>r.default.createElement("div",{className:"production-identity-card"},r.default.createElement("h1",null,e),t&&r.default.createElement("h2",null,t),r.default.createElement("h3",null,n.length>0&&n.map((e,t)=>"string"==typeof e?r.default.createElement("span",{key:t},e):r.default.createElement("span",{key:t},`${e.given} ${e.family}`)).reduce((e,t,n)=>0===n?[t]:[...e,", ",t],[])));class d extends r.Component{constructor(...e){super(...e),c(this,"getChildContext",()=>({renderingMode:"paged"})),c(this,"render",()=>{const{props:{production:e,edition:t,activeViewParams:n},context:{translate:i}}=this,{resourceId:l}=n;if(!l)return null;let c=(0,o.getContextualizationsFromEdition)(e,t).filter(({contextualization:{id:t}})=>e.contextualizations[t].sourceId===l).map(({contextualization:t})=>u({},t,(0,o.buildContextContent)(e,t.id,0))).filter(e=>e.targetContents);c=c.reduce((e,t,n)=>n>0&&c[n-1].sectionTitle===t.sectionTitle?[...e,u({},t,{sectionTitle:"..."})]:[...e,t],[]);const d=e.resources[l];return r.default.createElement("div",{className:"resource-sheet main-contents-container"},r.default.createElement("div",{className:"main-column"},r.default.createElement("div",{className:"header"},r.default.createElement(f,{production:e}),r.default.createElement(s.default,{resource:d,production:e,edition:t})),c.length?r.default.createElement("ul",{className:"body related-contexts-container"},r.default.createElement("h3",null,i("Mentions")," : "),c.filter(e=>void 0!==e.targetContents).map((e,t)=>r.default.createElement("li",{className:"related-context",key:t},r.default.createElement(a.default,{targetContents:e.targetContents,contents:e.contents,sectionTitle:e.sectionTitle,targetId:e.targetId,contextualizationId:e.id,displayLinks:!1})))):r.default.createElement("div",{className:"body"})))})}}c(d,"childContextTypes",{renderingMode:i.default.string}),d.contextTypes={translate:i.default.func};var p=d;t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=c(n(1)),o=c(n(57)),a=c(n(99)),s=c(n(59)),l=n(4),u=c(n(44));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends r.Component{constructor(e,t){super(e),f(this,"componentWillReceiveProps",e=>{this.setState({glossaryData:this.buildGlossaryData(e,this.context)})}),f(this,"buildGlossaryData",(e,t)=>{const{options:n,production:r,edition:i,id:o}=e,{preprocessedData:a}=t;return a&&a.blocks&&a.blocks[o]&&a.blocks[o].glossaryData||(0,l.buildGlossary)({options:n,production:r,edition:i})}),f(this,"openResource",e=>{this.context.asideVisible||this.context.toggleAsideVisible(),this.setState({openResourceId:e})}),f(this,"toggleOpenedResource",e=>{this.context.toggleAsideVisible(),this.setState({openResourceId:this.state.openResourceId?void 0:e})}),f(this,"render",()=>{const{props:{production:e,edition:t,options:n={},title:i},state:{openResourceId:c,glossaryData:f},context:{translate:d},toggleOpenedResource:p,openResource:h}=this,{showMentions:m=!0,showDescription:g=!0}=n;return r.default.createElement("div",{className:"main-contents-container glossary-player"},r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",{className:"view-title"},i),r.default.createElement("ul",{className:"big-list-items-container"},f.map((e,t)=>{const n=c===e.resource.id;return r.default.createElement("li",{className:`big-list-item ${n?"active":""}`,key:t},r.default.createElement("div",{className:"big-list-item-content"},r.default.createElement("div",{className:"title"},r.default.createElement("h3",null,e.resource.data.name)),g&&e.resource.data.description&&r.default.createElement("div",{className:"description"},r.default.createElement(a.default,{src:e.resource.data.description}))),r.default.createElement("div",{className:"big-list-item-actions"},m&&e.mentions.length>0&&r.default.createElement("div",null,r.default.createElement("button",{className:"link",onClick:()=>{h(e.resource.id)}},e.mentions.length," ",1===e.mentions.length?d("mention"):d("mentions")))),e.resource&&(0,l.resourceHasContents)(e.resource)&&r.default.createElement("div",{className:"big-list-item-actions"},r.default.createElement(u.default,{to:{routeClass:"resourcePage",routeParams:{resourceId:e.resource.id}}},d("Expand contents"))))}))),r.default.createElement(s.default,{isActive:void 0!==c,title:d("Mentions of this item"),onClose:p},c&&r.default.createElement(o.default,{production:e,edition:t,resourceId:c})))}),this.state={openResourceId:void 0,glossaryData:this.buildGlossaryData(e,t)}}}t.default=d,f(d,"contextTypes",{translate:i.default.func,asideVisible:i.default.bool,toggleAsideVisible:i.default.func})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=p(n(1)),o=p(n(316)),a=p(n(879)),s=p(n(880)),l=n(955),u=n(956),c=p(n(59)),f=p(n(57)),d=n(4);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=90,b=180,y=({items:e=[],onClick:t,nbMentions:n,markerScale:i})=>{return r.default.createElement("div",{onClick:t,className:"localization-marker"},r.default.createElement("span",{style:{cursor:"pointer",color:"white",width:`${i(n)}px`,height:`${i(n)}px`,borderRadius:"50%",background:"red",border:"1px white solid",padding:"1em",display:"flex",flexFlow:"column nowrap",alignItems:"center",justifyContent:"center",position:"relative",top:"-15px",left:"-15px"}},n),r.default.createElement("div",{style:{position:"absolute",left:5,top:-15,width:50}},location.adress&&r.default.createElement("h3",{className:"localization-adress"},location.adress),r.default.createElement("ul",{className:"localization-entries-list"},e.map((e,t)=>r.default.createElement("li",{className:"localization-entry",key:t},e.resource.data.name)))))};class v extends r.Component{constructor(e){super(e),m(this,"openPlace",e=>{this.context.asideVisible||this.context.toggleAsideVisible(),this.context.toggleAsideVisible(),this.setState({openPlaceId:e})}),m(this,"toggleOpenedPlace",e=>{this.setState({openPlaceId:this.state.openPlaceId?void 0:e})}),m(this,"render",()=>{const{props:{production:e,edition:t,options:n={},title:i},state:{openPlaceId:p},context:{translate:m},toggleOpenedPlace:v,openPlace:x}=this,{mapStyle:_="toner"}=n,w=(0,d.buildGlossary)({options:h({},n,{glossaryTypes:["place"]}),production:e,edition:t}).filter(e=>e.resource.data.location&&e.resource.data.location.latitude),O=(0,o.default)(w,e=>`${e.resource.data.location.latitude}-${e.resource.data.location.longitude}`),E=Object.keys(O).map(e=>({location:O[e][0].resource.data.location,items:O[e],nbMentions:O[e].reduce((e,t)=>e+t.mentions.length,0),id:e})),k=(0,l.extent)(E,e=>e.nbMentions),S=(0,l.extent)(E,e=>e.location.latitude),T=(0,l.extent)(E,e=>e.location.longitude),j=(0,l.mean)(E,e=>e.location.latitude),A=(0,l.mean)(E,e=>e.location.longitude),P=(S[1]-S[0])*(T[1]-T[0]),C=(0,u.scaleLinear)().domain([0,2*g*(2*b)]).range([1,12]),N=(0,u.scaleLinear)().domain(k).range([1,5]),M=P>0?C(P):6;let I;switch(_){case"nolabel":I=(e,t,n)=>`https://tiles.wmflabs.org/osm-no-labels/${n}/${e}/${t}.png`;break;case"shading":I=(e,t,n)=>`http://c.tiles.wmflabs.org/hillshading/${n}/${e}/${t}.png`;break;case"watercolor":I=(e,t,n)=>`http://c.tile.stamen.com/watercolor/${n}/${e}/${t}.png`;break;case"toner":I=(e,t,n)=>`http://a.tile.stamen.com/toner/${n}/${e}/${t}.png`;break;case"openstreetmap":default:I=(e,t,n)=>` https://a.tile.openstreetmap.org/${n}/${e}/${t}.png `}const D=p&&E.find(e=>e.id===p);return r.default.createElement("div",null,r.default.createElement("h1",null,i),r.default.createElement("div",{className:"places-container"},r.default.createElement(a.default,{center:[j,A],defaultZoom:M,provider:I},E.map(e=>{return r.default.createElement(s.default,{key:e.id,anchor:[e.location.latitude,e.location.longitude]},r.default.createElement(y,{onClick:()=>{x(e.id)},nbMentions:e.nbMentions,markerScale:N,items:e.items,location:e.location}))}))),r.default.createElement(c.default,{isActive:void 0!==p,title:m("Mentions about this place"),onClose:v},D&&r.default.createElement("h5",{className:"location-details"},r.default.createElement("span",null,"🌐"),r.default.createElement("em",null,D.location.address," (",D.location.latitude,", ",D.location.longitude,")")),r.default.createElement("div",{className:"glossaries-related-to-place-list"},p&&O[p].map((n,i)=>r.default.createElement(f.default,{production:e,key:i,edition:t,resourceId:n.resource.id})))))}),this.state={openPlaceId:void 0}}}t.default=v,m(v,"contextTypes",{asideVisible:i.default.bool,toggleAsideVisible:i.default.func,translate:i.default.func})},function(e,t,n){var r=n(317);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(826),i=n(827),o=n(842),a=n(24);e.exports=function(e,t){return function(n,s){var l=a(n)?r:i,u=t?t():{};return l(n,e,o(s,2),u)}}},function(e,t){e.exports=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}},function(e,t,n){var r=n(828);e.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,e,n(e),o)})),i}},function(e,t,n){var r=n(829),i=n(841)(r);e.exports=i},function(e,t,n){var r=n(830),i=n(175);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(831)();e.exports=r},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},function(e,t,n){var r=n(833),i=n(142),o=n(24),a=n(318),s=n(319),l=n(320),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),f=!n&&!c&&a(e),d=!n&&!c&&!f&&l(e),p=n||c||f||d,h=p?r(e.length,String):[],m=h.length;for(var g in e)!t&&!u.call(e,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||h.push(g);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(71),i=n(176),o=n(53),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){(function(e){var r=n(238),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(90)(e))},function(e,t,n){var r=n(838),i=n(839),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(840)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(177);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(e,t,n){var r=n(843),i=n(866),o=n(180),a=n(24),s=n(876);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t,n){var r=n(844),i=n(865),o=n(326);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(322),i=n(323),o=1,a=2;e.exports=function(e,t,n,s){var l=n.length,u=l,c=!s;if(null==e)return!u;for(e=Object(e);l--;){var f=n[l];if(c&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++l<u;){var d=(f=n[l])[0],p=e[d],h=f[1];if(c&&f[2]){if(void 0===p&&!(d in e))return!1}else{var m=new r;if(s)var g=s(p,h,d,e,t,m);if(!(void 0===g?i(h,p,o|a,s,m):g))return!1}}return!0}},function(e,t,n){var r=n(87);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(87),i=n(139),o=n(138),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(322),i=n(324),o=n(852),a=n(855),s=n(861),l=n(24),u=n(318),c=n(320),f=1,d="[object Arguments]",p="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,b,y){var v=l(e),x=l(t),_=v?p:s(e),w=x?p:s(t),O=(_=_==d?h:_)==h,E=(w=w==d?h:w)==h,k=_==w;if(k&&u(e)){if(!u(t))return!1;v=!0,O=!1}if(k&&!O)return y||(y=new r),v||c(e)?i(e,t,n,g,b,y):o(e,t,_,n,g,b,y);if(!(n&f)){var S=O&&m.call(e,"__wrapped__"),T=E&&m.call(t,"__wrapped__");if(S||T){var j=S?e.value():e,A=T?t.value():t;return y||(y=new r),b(j,A,n,g,y)}}return!!k&&(y||(y=new r),a(e,t,n,g,b,y))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(72),i=n(853),o=n(240),a=n(324),s=n(854),l=n(141),u=1,c=2,f="[object Boolean]",d="[object Date]",p="[object Error]",h="[object Map]",m="[object Number]",g="[object RegExp]",b="[object Set]",y="[object String]",v="[object Symbol]",x="[object ArrayBuffer]",_="[object DataView]",w=r?r.prototype:void 0,O=w?w.valueOf:void 0;e.exports=function(e,t,n,r,w,E,k){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case f:case d:case m:return o(+e,+t);case p:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var S=s;case b:var T=r&u;if(S||(S=l),e.size!=t.size&&!T)return!1;var j=k.get(e);if(j)return j==t;r|=c,k.set(e,t);var A=a(S(e),S(t),r,w,E,k);return k.delete(e),A;case v:if(O)return O.call(e)==O.call(t)}return!1}},function(e,t,n){var r=n(23).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(856),i=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,l){var u=n&i,c=r(e),f=c.length;if(f!=r(t).length&&!u)return!1;for(var d=f;d--;){var p=c[d];if(!(u?p in t:o.call(t,p)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var m=!0;l.set(e,t),l.set(t,e);for(var g=u;++d<f;){var b=e[p=c[d]],y=t[p];if(a)var v=u?a(y,b,p,t,e,l):a(b,y,p,e,t,l);if(!(void 0===v?b===y||s(b,y,n,a,l):v)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var x=e.constructor,_=t.constructor;x!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(m=!1)}return l.delete(e),l.delete(t),m}},function(e,t,n){var r=n(857),i=n(858),o=n(175);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(249),i=n(24);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t,n){var r=n(859),i=n(860),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(862),i=n(139),o=n(863),a=n(243),s=n(864),l=n(71),u=n(239),c=u(r),f=u(i),d=u(o),p=u(a),h=u(s),m=l;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case c:return"[object DataView]";case f:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,n){var r=n(39)(n(23),"DataView");e.exports=r},function(e,t,n){var r=n(39)(n(23),"Promise");e.exports=r},function(e,t,n){var r=n(39)(n(23),"WeakMap");e.exports=r},function(e,t,n){var r=n(325),i=n(175);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(323),i=n(867),o=n(873),a=n(178),s=n(325),l=n(326),u=n(101),c=1,f=2;e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,c|f)}}},function(e,t,n){var r=n(327);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(869),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},function(e,t,n){var r=n(870),i=500;e.exports=function(e){var t=r(e,(function(e){return n.size===i&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(138),i="Expected a function";function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},function(e,t,n){var r=n(872);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(72),i=n(179),o=n(24),a=n(100),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t,n){var r=n(874),i=n(875);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(328),i=n(142),o=n(24),a=n(319),s=n(176),l=n(101);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,f=!1;++u<c;){var d=l(t[u]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++u!=c?f:!!(c=null==e?0:e.length)&&s(c)&&a(d,c)&&(o(e)||i(e))}},function(e,t,n){var r=n(877),i=n(878),o=n(178),a=n(101);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(327);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(2),o=r(i);r(n(1));function a(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}function s(e,t){for(;e;){if(e.classList&&e.classList.contains(t))return!0;e=e.offsetParent}return!1}var l=300,u=1500,c=150,f=40,d=2,p=300,h=60,m=300,g=300,b=function(){};function y(e,t,n){return"https://maps.wikimedia.org/osm-intl/"+n+"/"+e+"/"+t+("undefined"!=typeof window&&window.devicePixelRatio>=2?"@2x":"")+".png"}var v=function(e,t){return(e+180)/360*Math.pow(2,t)},x=function(e,t){return(1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t)};function _(e,t){return e/Math.pow(2,t)*360-180}function w(e,t){var n=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function O(e,t){var n=a(e);return[t.clientX-n.x,t.clientY-n.y]}var E,k=[w(Math.pow(2,10),10),w(0,10),_(0,10),_(Math.pow(2,10),10)],S="undefined"!=typeof window,T=S&&window.performance&&window.performance.now?function(){return window.performance.now()}:(E=(new Date).getTime(),function(){return(new Date).getTime()-E}),j=S?window.requestAnimationFrame||window.setTimeout:function(e){return e()},A=S?window.cancelAnimationFrame||window.clearTimeout:function(){},P=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,i,o,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.updateWidthHeight=function(){if(a._containerRef){var e=a._containerRef.getBoundingClientRect();if(e&&e.width>0&&e.height>0)return a.setState({width:e.width,height:e.height}),!0}return!1},a.wa=function(e,t,n){return window.addEventListener(e,t,n)},a.wr=function(e,t){return window.removeEventListener(e,t)},a.bindMouseEvents=function(){a.wa("mousedown",a.handleMouseDown),a.wa("mouseup",a.handleMouseUp),a.wa("mousemove",a.handleMouseMove)},a.bindTouchEvents=function(){a.wa("touchstart",a.handleTouchStart,{passive:!1}),a.wa("touchmove",a.handleTouchMove,{passive:!1}),a.wa("touchend",a.handleTouchEnd,{passive:!1})},a.unbindMouseEvents=function(){a.wr("mousedown",a.handleMouseDown),a.wr("mouseup",a.handleMouseUp),a.wr("mousemove",a.handleMouseMove)},a.unbindTouchEvents=function(){a.wr("touchstart",a.handleTouchStart),a.wr("touchmove",a.handleTouchMove),a.wr("touchend",a.handleTouchEnd)},a.bindResizeEvent=function(){a.wa("resize",a.updateWidthHeight)},a.unbindResizeEvent=function(){a.wr("resize",a.updateWidthHeight)},a.bindWheelEvent=function(){a._containerRef&&a._containerRef.addEventListener("wheel",a.handleWheel,{passive:!1})},a.unbindWheelEvent=function(){a._containerRef&&a._containerRef.removeEventListener("wheel",a.handleWheel)},a.setCenterZoomTarget=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l;if(a.props.animate&&(!n||a.distanceInScreens(e,t,a.state.center,a.state.zoom)<=a.props.animateMaxScreens)){if(a._isAnimating){A(a._animFrame);var o=a.animationStep(T()),s=o.centerStep,u=o.zoomStep;a._centerStart=s,a._zoomStart=u}else a._isAnimating=!0,a._centerStart=a.limitCenterAtZoom([a._lastCenter[0],a._lastCenter[1]],a._lastZoom),a._zoomStart=a._lastZoom,a.onAnimationStart();a._animationStart=T(),a._animationEnd=a._animationStart+i,r?(a._zoomAround=r,a._centerTarget=a.calculateZoomCenter(a._lastCenter,r,a._lastZoom,t)):(a._zoomAround=null,a._centerTarget=e),a._zoomTarget=t,a._animFrame=j(a.animate)}else if(a.stopAnimating(),r){var c=a.calculateZoomCenter(a._lastCenter,r,a._lastZoom,t);a.setCenterZoom(c,t,n)}else a.setCenterZoom(e,t,n)},a.distanceInScreens=function(e,t,n,r){var i=a.state,o=i.width,s=i.height,l=a.latLngToPixel(n,n,r),u=a.latLngToPixel(e,n,r),c=a.latLngToPixel(n,n,t),f=a.latLngToPixel(e,n,t),d=(Math.abs(l[0]-u[0])+Math.abs(c[0]-f[0]))/2/o,p=(Math.abs(l[1]-u[1])+Math.abs(c[1]-f[1]))/2/s;return Math.sqrt(d*d+p*p)},a.animationStep=function(e){var t,n=a._animationEnd-a._animationStart,r=Math.max(e-a._animationStart,0),i=(t=r/n)*(2-t),o=(a._zoomTarget-a._zoomStart)*i,s=a._zoomStart+o;return a._zoomAround?{centerStep:a.calculateZoomCenter(a._centerStart,a._zoomAround,a._zoomStart,s),zoomStep:s}:{centerStep:[a._centerStart[0]+(a._centerTarget[0]-a._centerStart[0])*i,a._centerStart[1]+(a._centerTarget[1]-a._centerStart[1])*i],zoomStep:s}},a.animate=function(e){if(e>=a._animationEnd)a._isAnimating=!1,a.setCenterZoom(a._centerTarget,a._zoomTarget,!0),a.onAnimationStop();else{var t=a.animationStep(e),n=t.centerStep,r=t.zoomStep;a.setCenterZoom(n,r),a._animFrame=j(a.animate)}},a.stopAnimating=function(){a._isAnimating&&(a._isAnimating=!1,a.onAnimationStop(),A(a._animFrame))},a.limitCenterAtZoom=function(e,t){var n=a.getBoundsMinMax(t||a.state.zoom);return[Math.max(Math.min(isNaN(e[0])?a.state.center[0]:e[0],n[1]),n[0]),Math.max(Math.min(isNaN(e[1])?a.state.center[1]:e[1],n[3]),n[2])]},a.onAnimationStart=function(){a.props.onAnimationStart&&a.props.onAnimationStart()},a.onAnimationStop=function(){a.props.onAnimationStop&&a.props.onAnimationStop()},a.setCenterZoom=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a.limitCenterAtZoom(e,t);if(Math.round(a.state.zoom)!==Math.round(t)){var i=a.tileValues(a.state),o=a.tileValues({center:r,zoom:t,width:a.state.width,height:a.state.height}),s=a.state.oldTiles;a.setState({oldTiles:s.filter((function(e){return e.roundedZoom!==i.roundedZoom})).concat(i)},b);for(var l={},u=o.tileMinX;u<=o.tileMaxX;u++)for(var c=o.tileMinY;c<=o.tileMaxY;c++){var f=u+"-"+c+"-"+o.roundedZoom;l[f]=!1}a._loadTracker=l}a.setState({center:r,zoom:t},b);var d=a.props.zoom?a.props.zoom:a._lastZoom,p=a.props.center?a.props.center:a._lastCenter;(n||Math.abs(d-t)>.001||Math.abs(p[0]-r[0])>1e-5||Math.abs(p[1]-r[1])>1e-5)&&(a._lastZoom=t,a._lastCenter=[].concat(r),a.syncToProps(r,t))},a.getBoundsMinMax=function(e){if("center"===a.props.limitBounds)return k;var t=a.state,n=t.width,r=t.height;if(a._minMaxCache&&a._minMaxCache[0]===e&&a._minMaxCache[1]===n&&a._minMaxCache[2]===r)return a._minMaxCache[3];var i=256*Math.pow(2,e),o=n>i?0:_(n/512,e),s=r>i?0:w(Math.pow(2,e)-r/512,e),l=n>i?0:_(Math.pow(2,e)-n/512,e),u=[s,r>i?0:w(r/512,e),o,l];return a._minMaxCache=[e,n,r,u],u},a.imageLoaded=function(e){a._loadTracker&&e in a._loadTracker&&(a._loadTracker[e]=!0,0===Object.keys(a._loadTracker).filter((function(e){return!a._loadTracker[e]})).length&&a.setState({oldTiles:[]},b))},a.handleTouchStart=function(e){if(a._containerRef&&(!e.target||!s(e.target,"pigeon-drag-block")))if(1===e.touches.length){var t=e.touches[0],n=O(a._containerRef,t);if(a.coordsInside(n)&&(a._touchStartPixel=[n],!a.props.twoFingerDrag))if(a.stopAnimating(),a._lastTap&&T()-a._lastTap<p){e.preventDefault();var r=a.pixelToLatLng(a._touchStartPixel[0]);a.setCenterZoomTarget(null,Math.max(a.props.minZoom,Math.min(a.state.zoom+1,a.props.maxZoom)),!1,r)}else a._lastTap=T(),a.trackMoveEvents(n)}else if(2===e.touches.length&&a._touchStartPixel){e.preventDefault(),a.stopTrackingMoveEvents(),(a.state.pixelDelta||a.state.zoomDelta)&&a.sendDeltaChange();var i=O(a._containerRef,e.touches[0]),o=O(a._containerRef,e.touches[1]);a._touchStartPixel=[i,o],a._touchStartMidPoint=[(i[0]+o[0])/2,(i[1]+o[1])/2],a._touchStartDistance=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2))}},a.handleTouchMove=function(e){if(a._containerRef){if(1===e.touches.length&&a._touchStartPixel){var t=e.touches[0],n=O(a._containerRef,t);a.props.twoFingerDrag?a.coordsInside(n)&&a.showWarning("fingers"):(e.preventDefault(),a.trackMoveEvents(n),a.setState({pixelDelta:[n[0]-a._touchStartPixel[0][0],n[1]-a._touchStartPixel[0][1]]},b))}else if(2===e.touches.length&&a._touchStartPixel){var r=a.state,i=r.width,o=r.height,s=r.zoom;e.preventDefault();var l=O(a._containerRef,e.touches[0]),u=O(a._containerRef,e.touches[1]),c=[(l[0]+u[0])/2,(l[1]+u[1])/2],f=[c[0]-a._touchStartMidPoint[0],c[1]-a._touchStartMidPoint[1]],d=Math.sqrt(Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)),p=Math.max(a.props.minZoom,Math.min(a.props.maxZoom,s+Math.log2(d/a._touchStartDistance)))-s,h=Math.pow(2,p),m=[(i/2-c[0])*(h-1),(o/2-c[1])*(h-1)];a.setState({zoomDelta:p,pixelDelta:[m[0]+f[0]*h,m[1]+f[1]*h]},b)}}else a._touchStartPixel=null},a.handleTouchEnd=function(e){if(a._containerRef){if(a._touchStartPixel){var t=a.props,n=t.zoomSnap,r=t.twoFingerDrag,i=t.minZoom,o=t.maxZoom,s=a.state.zoomDelta,l=a.sendDeltaChange(),u=l.center,c=l.zoom;if(0===e.touches.length)if(r)a.clearWarning();else{var f=a._touchStartPixel[0],p=O(a._containerRef,e.changedTouches[0]);(Math.abs(f[0]-p[0])>d||Math.abs(f[1]-p[1])>d)&&(!a._secondTouchEnd||T()-a._secondTouchEnd>m)&&(e.preventDefault(),a.throwAfterMoving(p,u,c)),a._touchStartPixel=null,a._secondTouchEnd=null}else if(1===e.touches.length){e.preventDefault();var h=O(a._containerRef,e.touches[0]);if(a._secondTouchEnd=T(),a._touchStartPixel=[h],a.trackMoveEvents(h),n){var g=a._touchStartMidPoint?a.pixelToLatLng(a._touchStartMidPoint):a.state.center,b=void 0;b=r&&Math.round(a.state.zoom)===Math.round(a.state.zoom+s)?Math.round(a.state.zoom):s>0?Math.ceil(a.state.zoom):Math.floor(a.state.zoom);var y=Math.max(i,Math.min(b,o));a.setCenterZoomTarget(g,y,!1,g)}}}}else a._touchStartPixel=null},a.handleMouseDown=function(e){if(a._containerRef){var t=O(a._containerRef,e);if(0===e.button&&(!e.target||!s(e.target,"pigeon-drag-block"))&&a.coordsInside(t))if(a.stopAnimating(),e.preventDefault(),a._lastClick&&T()-a._lastClick<p){var n=a.pixelToLatLng(a._mousePosition||t);a.setCenterZoomTarget(null,Math.max(a.props.minZoom,Math.min(a.state.zoom+1,a.props.maxZoom)),!1,n)}else a._lastClick=T(),a._mouseDown=!0,a._dragStart=t,a.trackMoveEvents(t)}},a.handleMouseMove=function(e){a._containerRef&&(a._mousePosition=O(a._containerRef,e),a._mouseDown&&a._dragStart&&(a.trackMoveEvents(a._mousePosition),a.setState({pixelDelta:[a._mousePosition[0]-a._dragStart[0],a._mousePosition[1]-a._dragStart[1]]},b)))},a.handleMouseUp=function(e){if(a._containerRef){var t=a.state.pixelDelta;if(a._mouseDown){a._mouseDown=!1;var n=O(a._containerRef,e);if(!a.props.onClick||e.target&&s(e.target,"pigeon-click-block")||t&&!(Math.abs(t[0])+Math.abs(t[1])<=d)){var r=a.sendDeltaChange(),i=r.center,o=r.zoom;a.throwAfterMoving(n,i,o)}else{var l=a.pixelToLatLng(n);a.props.onClick({event:e,latLng:l,pixel:n}),a.setState({pixelDelta:null},b)}}}else a._mouseDown=!1},a.stopTrackingMoveEvents=function(){a._moveEvents=[]},a.trackMoveEvents=function(e){var t=T();(0===a._moveEvents.length||t-a._moveEvents[a._moveEvents.length-1].timestamp>40)&&(a._moveEvents.push({timestamp:t,coords:e}),a._moveEvents.length>2&&a._moveEvents.shift())},a.throwAfterMoving=function(e,t,n){var r=a.state,i=r.width,o=r.height,s=a.props.animate,l=T(),c=a._moveEvents.shift();if(c&&s){var d=Math.max(l-c.timestamp,1),p=[(e[0]-c.coords[0])/d*120,(e[1]-c.coords[1])/d*120],h=Math.sqrt(p[0]*p[0]+p[1]*p[1]);if(h>f){var m=Math.sqrt(i*i+o*o),g=u*h/m,b=_(v(t[1],n)-p[0]/256,n),y=w(x(t[0],n)-p[1]/256,n);a.setCenterZoomTarget([y,b],n,!1,null,g)}}a.stopTrackingMoveEvents()},a.sendDeltaChange=function(){var e=a.state,t=e.center,n=e.zoom,r=e.pixelDelta,i=e.zoomDelta,o=t[0],s=t[1];return(r||0!==i)&&(s=_(v(t[1],n+i)-(r?r[0]/256:0),n+i),o=w(x(t[0],n+i)-(r?r[1]/256:0),n+i),a.setCenterZoom([o,s],n+i)),a.setState({pixelDelta:null,zoomDelta:0},b),{center:a.limitCenterAtZoom([o,s],n+i),zoom:n+i}},a.getBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.center,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.zoomPlusDelta(),n=a.state,r=n.width,i=n.height;return{ne:a.pixelToLatLng([r-1,0],e,t),sw:a.pixelToLatLng([0,i-1],e,t)}},a.syncToProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.center,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.zoom,n=a.props.onBoundsChanged;if(n){var r=a.getBounds(e,t);n({center:e,zoom:t,bounds:r,initial:!a._boundsSynced}),a._boundsSynced=!0}},a.handleWheel=function(e){var t=a.props,n=t.mouseEvents,r=t.metaWheelZoom,i=t.zoomSnap,o=t.animate;if(n)if(!r||e.metaKey){e.preventDefault();var s=-e.deltaY/c;if(!i&&a._zoomTarget){var u=a._zoomTarget-a.state.zoom;a.zoomAroundMouse(s+u,e)}else o?a.zoomAroundMouse(s,e):(!a._lastWheel||T()-a._lastWheel>l)&&(a._lastWheel=T(),a.zoomAroundMouse(s,e))}else a.showWarning("wheel")},a.showWarning=function(e){a.state.showWarning&&a.state.warningType===e||a.setState({showWarning:!0,warningType:e}),a._warningClearTimeout&&window.clearTimeout(a._warningClearTimeout),a._warningClearTimeout=window.setTimeout(a.clearWarning,g)},a.clearWarning=function(){a.state.showWarning&&a.setState({showWarning:!1})},a.zoomAroundMouse=function(e,t){if(a._containerRef){var n=a.state.zoom,r=a.props,i=r.minZoom,o=r.maxZoom,s=r.zoomSnap;if(a._mousePosition=O(a._containerRef,t),!(!a._mousePosition||n===i&&e<0||n===o&&e>0)){var l=a.pixelToLatLng(a._mousePosition),u=n+e;s&&(u=e<0?Math.floor(u):Math.ceil(u)),u=Math.max(i,Math.min(u,o)),a.setCenterZoomTarget(null,u,!1,l)}}},a.zoomPlusDelta=function(){return a.state.zoom+a.state.zoomDelta},a.pixelToLatLng=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.center,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.zoomPlusDelta(),r=a.state,i=r.width,o=r.height,s=r.pixelDelta,l=[(e[0]-i/2-(s?s[0]:0))/256,(e[1]-o/2-(s?s[1]:0))/256],u=v(t[1],n)+l[0],c=x(t[0],n)+l[1];return[Math.max(k[0],Math.min(k[1],w(c,n))),Math.max(k[2],Math.min(k[3],_(u,n)))]},a.latLngToPixel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.center,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.zoomPlusDelta(),r=a.state,i=r.width,o=r.height,s=r.pixelDelta,l=v(t[1],n),u=x(t[0],n),c=v(e[1],n),f=x(e[0],n);return[256*(c-l)+i/2+(s?s[0]:0),256*(f-u)+o/2+(s?s[1]:0)]},a.calculateZoomCenter=function(e,t,n,r){var i=a.state,o=i.width,s=i.height,l=a.latLngToPixel(t,e,n),u=a.latLngToPixel(t,e,r),c=a.pixelToLatLng([o/2+u[0]-l[0],s/2+u[1]-l[1]],e,r);return a.limitCenterAtZoom(c,r)},a.setRef=function(e){a._containerRef=e},a.syncToProps=(r=a.syncToProps,i=h,o=void 0,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=this;clearTimeout(o),o=setTimeout((function(){return r.apply(a,t)}),i)}),a._mousePosition=null,a._dragStart=null,a._mouseDown=!1,a._moveEvents=[],a._lastClick=null,a._lastTap=null,a._touchStartPixel=null,a._isAnimating=!1,a._animationStart=null,a._animationEnd=null,a._centerTarget=null,a._zoomTarget=null,a._lastZoom=n.defaultZoom?n.defaultZoom:n.zoom,a._lastCenter=n.defaultCenter?n.defaultCenter:n.center,a._boundsSynced=!1,a._minMaxCache=null,a.state={zoom:a._lastZoom,center:a._lastCenter,width:n.width||n.defaultWidth,height:n.height||n.defaultHeight,zoomDelta:0,pixelDelta:null,oldTiles:[],showWarning:!1,warningType:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.mouseEvents&&this.bindMouseEvents(),this.props.touchEvents&&this.bindTouchEvents(),this.props.width&&this.props.height||(this.updateWidthHeight()||j(this.updateWidthHeight),this.bindResizeEvent(),this.bindWheelEvent()),this.syncToProps()},t.prototype.componentWillUnmount=function(){this.props.mouseEvents&&this.unbindMouseEvents(),this.props.touchEvents&&this.unbindTouchEvents(),this.props.width&&this.props.height||(this.unbindResizeEvent(),this.unbindWheelEvent())},t.prototype.componentWillReceiveProps=function(e){if(e.mouseEvents!==this.props.mouseEvents&&(e.mouseEvents?this.bindMouseEvents():this.unbindMouseEvents()),e.touchEvents!==this.props.touchEvents&&(e.touchEvents?this.bindTouchEvents():this.unbindTouchEvents()),e.width&&e.width!==this.props.width&&this.setState({width:e.width}),e.height&&e.height!==this.props.height&&this.setState({height:e.height}),(e.center||e.zoom)&&(e.center&&(e.center[0]!==this.props.center[0]||e.center[1]!==this.props.center[1])||e.zoom!==this.props.zoom)){var t=this._isAnimating?this._centerTarget:this.state.center,n=this._isAnimating?this._zoomTarget:this.state.zoom,r=e.center||t,i=e.zoom||n;(Math.abs(i-n)>.001||Math.abs(r[0]-t[0])>1e-4||Math.abs(r[1]-t[1])>1e-4)&&this.setCenterZoomTarget(r,i,!0)}},t.prototype.coordsInside=function(e){var t=this.state,n=t.width,r=t.height;if(e[0]<0||e[1]<0||e[0]>=n||e[1]>=r)return!1;var i=this._containerRef,o=a(i),s=document.elementFromPoint(e[0]+o.x,e[1]+o.y);return i===s||i.contains(s)},t.prototype.tileValues=function(e){var t=e.center,n=e.zoom,r=e.pixelDelta,i=e.zoomDelta,o=e.width,a=e.height,s=Math.round(n+(i||0)),l=n+(i||0)-s,u=Math.pow(2,l),c=o/u,f=a/u,d=v(t[1],s)-(r?r[0]/256/u:0),p=x(t[0],s)-(r?r[1]/256/u:0),h=c/2/256,m=f/2/256;return{tileMinX:Math.floor(d-h),tileMaxX:Math.floor(d+h),tileMinY:Math.floor(p-m),tileMaxY:Math.floor(p+m),tileCenterX:d,tileCenterY:p,roundedZoom:s,zoomDelta:i||0,scaleWidth:c,scaleHeight:f,scale:u}},t.prototype.renderTiles=function(){for(var e=this,t=this.state.oldTiles,n=this.props.provider||y,r=this.tileValues(this.state),i=r.tileMinX,a=r.tileMaxX,s=r.tileMinY,l=r.tileMaxY,u=r.tileCenterX,c=r.tileCenterY,f=r.roundedZoom,d=r.scaleWidth,p=r.scaleHeight,h=r.scale,m=[],g=0;g<t.length;g++){var b=t[g],v=b.roundedZoom-f;if(!(Math.abs(v)>4||0===v))for(var x=1/Math.pow(2,v),_=256*-(i-b.tileMinX*x),w=256*-(s-b.tileMinY*x),O=Math.max(b.tileMinX,0),E=Math.max(b.tileMinY,0),k=Math.min(b.tileMaxX,Math.pow(2,b.roundedZoom)-1),S=Math.min(b.tileMaxY,Math.pow(2,b.roundedZoom)-1),T=O;T<=k;T++)for(var j=E;j<=S;j++)m.push({key:T+"-"+j+"-"+b.roundedZoom,url:n(T,j,b.roundedZoom),left:_+256*(T-b.tileMinX)*x,top:w+256*(j-b.tileMinY)*x,width:256*x,height:256*x,active:!1})}for(var A=Math.max(i,0),P=Math.max(s,0),C=Math.min(a,Math.pow(2,f)-1),N=Math.min(l,Math.pow(2,f)-1),M=A;M<=C;M++)for(var I=P;I<=N;I++)m.push({key:M+"-"+I+"-"+f,url:n(M,I,f),left:256*(M-i),top:256*(I-s),width:256,height:256,active:!0});var D={width:d,height:p,position:"absolute",top:0,left:0,overflow:"hidden",willChange:"transform",transform:"scale("+h+", "+h+")",transformOrigin:"top left"},R=this.props.boxClassname||"",z={position:"absolute",width:256*(a-i+1),height:256*(l-s+1),willChange:"transform",transform:"translate("+-(256*(u-i)-d/2)+"px, "+-(256*(c-s)-p/2)+"px)"};return o.createElement("div",{style:D,className:R},o.createElement("div",{style:z},m.map((function(t){return o.createElement("img",{key:t.key,src:t.url,width:t.width,height:t.height,onLoad:function(){return e.imageLoaded(t.key)},style:{position:"absolute",left:t.left,top:t.top,willChange:"transform",transform:t.transform,transformOrigin:"top left",opacity:1}})}))))},t.prototype.renderOverlays=function(){var e=this,t=this.state,n=t.width,r=t.height,i=t.center,a={bounds:this.getBounds(),zoom:this.zoomPlusDelta(),center:i,width:n,height:r},s=o.Children.map(this.props.children,(function(t){if(!t)return null;if("string"==typeof t.type)return t;var n=t.props,r=n.anchor,s=n.position,l=n.offset,u=e.latLngToPixel(r||s||i);return o.cloneElement(t,{left:u[0]-(l?l[0]:0),top:u[1]-(l?l[1]:0),latLngToPixel:e.latLngToPixel,pixelToLatLng:e.pixelToLatLng,mapState:a})})),l={position:"absolute",width:n,height:r,top:0,left:0};return o.createElement("div",{style:l},s)},t.prototype.renderAttribution=function(){var e=this.props,t=e.attribution,n=e.attributionPrefix;if(!1===t)return null;var r={color:"#0078A8",textDecoration:"none"};return o.createElement("div",{key:"attr",className:"pigeon-attribution",style:{position:"absolute",bottom:0,right:0,fontSize:"11px",padding:"2px 5px",background:"rgba(255, 255, 255, 0.7)",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",color:"#333"}},!1===n?null:o.createElement("span",null,n||o.createElement("a",{href:"https://pigeon-maps.js.org/",style:r},"Pigeon")," | "),t||o.createElement("span",null," © ",o.createElement("a",{href:"https://www.openstreetmap.org/copyright",style:r},"OpenStreetMap")," contributors"))},t.prototype.renderWarning=function(){var e=this.props,t=e.metaWheelZoom,n=e.metaWheelZoomWarning,r=e.twoFingerDrag,i=e.twoFingerDragWarning,a=e.warningZIndex,s=this.state,l=s.showWarning,u=s.warningType,c=s.width,f=s.height;if(t&&n||r&&i){var d={position:"absolute",top:0,left:0,width:c,height:f,overflow:"hidden",pointerEvents:"none",opacity:l?100:0,transition:"opacity 300ms",background:"rgba(0,0,0,0.5)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:22,fontFamily:'"Arial", sans-serif',textAlign:"center",zIndex:a},p="undefined"!=typeof window&&window.navigator&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?"⌘":"⊞",h="fingers"===u?i:n;return o.createElement("div",{style:d},h.replace("META",p))}return null},t.prototype.render=function(){var e=this.props,t=e.touchEvents,n=e.twoFingerDrag,r=this.state,i=r.width,a=r.height,s={width:this.props.width?i:"100%",height:this.props.height?a:"100%",position:"relative",display:"inline-block",overflow:"hidden",background:"#dddddd",touchAction:t?n?"pan-x pan-y":"none":"auto"},l=!(!i||!a);return o.createElement("div",{style:s,ref:this.setRef},l&&this.renderTiles(),l&&this.renderOverlays(),l&&this.renderAttribution(),l&&this.renderWarning())},t}(i.Component);P.defaultProps={animate:!0,metaWheelZoom:!1,metaWheelZoomWarning:"Use META+wheel to zoom!",twoFingerDrag:!1,twoFingerDragWarning:"Use two fingers to move the map",zoomSnap:!0,mouseEvents:!0,touchEvents:!0,warningZIndex:100,animateMaxScreens:5,minZoom:1,maxZoom:18,limitBounds:"center"},e.exports=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(881),s=n(1),l=(r=s)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.left,n=e.top,r=e.className,o=e.style,s=void 0===o?{}:o;return a.React.createElement("div",{style:i({position:"absolute",transform:"translate("+t+"px, "+n+"px)"},s),className:r||""},this.props.children)}}]),t}(a.Component);u.propTypes={anchor:l.default.array.isRequired,offset:l.default.array,className:l.default.string,left:l.default.number,top:l.default.number,latLngToPixel:l.default.func,pixelToLatLng:l.default.func},t.default=u},function(e,t,n){"use strict";t.React=n(2),t.ReactDOM=n(46),t.Component=t.React.Component},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=u(n(1)),o=u(n(316)),a=u(n(57)),s=u(n(59)),l=n(4);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends r.Component{constructor(e){super(e),f(this,"openEvent",e=>{this.context.asideVisible||this.context.toggleAsideVisible(),this.setState({openEventId:e})}),f(this,"toggleOpenedEvent",e=>{this.context.toggleAsideVisible(),this.setState({openEventId:this.state.openEventId?void 0:e})}),f(this,"render",()=>{const{props:{production:e,edition:t,options:n={},title:i},state:{openEventId:u},context:{translate:f},toggleOpenedEvent:d,openEvent:p}=this,h=(0,l.buildGlossary)({options:c({},n,{glossaryTypes:["event"]}),production:e,edition:t}).filter(e=>e.resource.data.dates&&e.resource.data.dates.start),m=(0,o.default)(h,e=>`${e.resource.data.dates.start}-${e.resource.data.dates.end}`),g=Object.keys(m).map(e=>({dates:m[e][0].resource.data.dates,items:m[e],id:e})).sort((e,t)=>e.dates.start>t.dates.start?1:-1),b=u&&g.find(e=>e.id===u);return r.default.createElement("div",{className:"main-contents-container events-player"},r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",{className:"view-title"},i),r.default.createElement("ul",{className:"big-list-items-container"},g.map((e,t)=>{const n=new Date(e.dates.start).toLocaleDateString(),i=e.dates.end&&new Date(e.dates.end).toLocaleDateString(),o=i?`${n} - ${i}`:n;return r.default.createElement("li",{className:"big-list-item",key:t},r.default.createElement("div",{className:"big-list-item-content"},r.default.createElement("h3",null,o)),r.default.createElement("div",{className:"big-list-item-actions"},r.default.createElement("button",{onClick:()=>{p(e.id)}},f("See mentions"))))}))),r.default.createElement(s.default,{isActive:void 0!==u,title:f("Mentions about an event"),onClose:d},u&&r.default.createElement("div",null,b&&r.default.createElement("h5",{className:"event-details"},r.default.createElement("span",null,"◈"),r.default.createElement("em",null,new Date(b.dates.start).toLocaleDateString(),b.dates.end&&` - ${new Date(b.dates.end).toLocaleDateString()}`)),r.default.createElement("div",{className:"glossaries-related-to-event-list"},m[u].map((n,i)=>r.default.createElement(a.default,{production:e,edition:t,resourceId:n.resource.id,key:i}))))))}),this.state={openEventId:void 0}}}t.default=d,f(d,"contextTypes",{translate:i.default.func,asideVisible:i.default.bool,toggleAsideVisible:i.default.func})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=u(n(1)),o=u(n(57)),a=u(n(59)),s=n(4),l=u(n(44));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=({item:e,onOpen:t,translate:n,showMentions:i,active:o})=>r.default.createElement("li",{className:`big-list-item ${o?"active":""}`,onClick:t},r.default.createElement("div",{className:"big-list-item-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.html}})),e.resource&&i&&r.default.createElement("div",{className:"big-list-item-actions"},r.default.createElement("button",{className:"link",onClick:t},e.resource.mentions.length," ",1===e.resource.mentions.length?n("mention"):n("mentions"))),e.resource&&(0,s.resourceHasContents)(e.resource)&&r.default.createElement("div",{className:"big-list-item-actions"},r.default.createElement(l.default,{to:{routeClass:"resourcePage",routeParams:{resourceId:e.resource.id}}},n("Expand contents"))));class d extends r.Component{constructor(e){super(e),c(this,"componentDidMount",()=>{const{props:{production:e,edition:t,options:n={},id:r},context:{preprocessedData:i}}=this,{showUncitedReferences:o=!1,resourceTypes:a=["bib"],sortingKey:l="authors",sortingAscending:u=!0}=n,c=i&&i.blocks&&i.blocks[r]&&i.blocks[r].bibliographyData;let f;f=c||(0,s.buildBibliography)({production:e,edition:t,options:{showUncitedReferences:o,resourceTypes:a,sortingKey:l,sortingAscending:u}}),this.setState({references:f})}),c(this,"openResource",e=>{this.context.asideVisible||this.context.toggleAsideVisible(),this.setState({openResourceId:e})}),c(this,"toggleOpenedResource",e=>{this.context.toggleAsideVisible(),this.setState({openResourceId:this.state.openResourceId?void 0:e})}),c(this,"render",()=>{const{props:{production:e,edition:t,options:n={},title:i},state:{openResourceId:s,references:l},context:{translate:u},toggleOpenedResource:c,openResource:d}=this,{showMentions:p}=n;return r.default.createElement("div",{className:"main-contents-container references-player"},r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",{className:"view-title"},i),void 0!==l&&r.default.createElement("ul",{className:"big-list-items-container"},l.map((e,n)=>{return r.default.createElement(f,{key:n,item:e,onOpen:()=>{d(e.resource.id)},showMentions:p,active:s===e.resource.id,citationStyle:t.data.citationStyle,citationLocale:t.data.citationLocale,translate:u})}))),r.default.createElement(a.default,{isActive:void 0!==s,title:u("Mentions of this item"),onClose:c},s&&r.default.createElement(o.default,{production:e,edition:t,resourceId:s})))}),this.state={openResourceId:void 0}}}t.default=d,c(d,"contextTypes",{translate:i.default.func,asideVisible:i.default.bool,toggleAsideVisible:i.default.func,preprocessedData:i.default.object})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=c(n(1)),o=c(n(57)),a=c(n(59)),s=n(4),l=c(n(85)),u=c(n(329));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let d,p,h,m;new Function("try {return this===window;}catch(e){ return false;}")()&&(d=n(957),p=d.Sigma,h=d.RandomizeNodePositions,m=d.ForceAtlas2);const g=e=>{switch(e){case"bib":return"#c7f9ed";case"glossary":return"#ddc8fc";case"webpage":return"#92beff";case"video":return"#ef6d3f";case"embed":return"#cc4a27";case"table":return"#f2cf00";case"section":default:return"#00a99d"}},b=(e,t,{showUncitedReferences:n,showAllResources:r,resourceTypes:i=["bib"],minimumCooccurrenceNumber:o=2})=>{let a,c=(0,s.getContextualizationsFromEdition)(e,t);a=n?Object.keys(e.resources):(0,l.default)(c.map(e=>e.contextualization.sourceId)),r||(a=a.filter(t=>i.includes[e.resources[t].metadata.type])),c=c.filter(e=>a.includes(e.contextualization.sourceId));let d=a.map(t=>({resource:e.resources[t],id:t,type:"resource",mentions:c.filter(e=>e.contextualization.sourceId===t).map(e=>e.contextualization)}));d=d.map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e})({},e,{label:(0,s.getResourceTitle)(e.resource),color:g(e.resource.metadata.type),targetsIds:e.mentions.map(e=>e.targetId),size:1}));const p={};d.forEach((e,t)=>{d.slice(t+1).forEach(t=>{const n=(0,u.default)(e.targetsIds,t.targetsIds);if(n.length||t.targetsIds.includes(e.resource.id)||e.targetsIds.includes(t.resource.id)){const r=[e,t].map(e=>e.resource.id).sort(),i=p[r[0]]||{};i[r[1]]=i[r[1]]?i[r[1]]+(n.length||1):n.length||1,p[r[0]]=i,e.size++,t.size++}})});const h=Object.keys(p).reduce((e,t)=>[...e,...Object.keys(p[t]).map(e=>({source:t,target:e,weight:p[t][e],color:"#888889"}))],[]).filter(e=>e.weight>=o);return{nodes:d,edges:h}};class y extends r.Component{constructor(e){super(e),f(this,"openResource",e=>{this.context.asideVisible||this.context.toggleAsideVisible(),this.setState({openResourceId:e})}),f(this,"toggleOpenedResource",e=>{this.context.toggleAsideVisible(),this.setState({openResourceId:this.state.openResourceId?void 0:e})}),f(this,"render",()=>{const{props:{production:e,edition:t,options:n={},title:i},state:{openResourceId:s},context:{translate:l,dimensions:u={width:50,height:50}},toggleOpenedResource:c,openResource:f}=this,{width:g,height:y}=u,{showUncitedReferences:v=!1,showAllResources:x=!0,resourceTypes:_=["bib"],minimumCooccurrenceNumber:w=1}=n,{nodes:O,edges:E}=b(e,t,{showUncitedReferences:v,showAllResources:x,resourceTypes:_,minimumCooccurrenceNumber:w});return r.default.createElement("div",null,r.default.createElement("h1",null,i),d&&O.length?r.default.createElement("div",{className:"graph-container"},r.default.createElement(p,{onClickNode:function({data:e}){const{node:{id:t}}=e;f(t)},style:{width:g,height:y},graph:{nodes:O,edges:E},settings:{drawEdges:!0},renderer:"webgl"},r.default.createElement(h,null),r.default.createElement(m,{worker:!0,barnesHutOptimize:!0,barnesHutTheta:.6,iterationsPerRender:10,linLogMode:!0,timeout:3e3}))):r.default.createElement("div",{className:"graph-placeholder"},l("No links to display")),r.default.createElement(a.default,{isActive:void 0!==s,title:l("Mentions of this item"),onClose:c},s&&r.default.createElement(o.default,{production:e,edition:t,resourceId:s})))}),this.state={openResourceId:void 0}}}t.default=y,f(y,"contextTypes",{translate:i.default.func,usedDocument:i.default.object,asideVisible:i.default.bool,toggleAsideVisible:i.default.func,dimensions:i.default.object})},function(e,t,n){var r=n(137),i=n(241),o=n(242),a=n(179),s=n(321),l=n(140),u=Math.min;e.exports=function(e,t,n){for(var c=n?o:i,f=e[0].length,d=e.length,p=d,h=Array(d),m=1/0,g=[];p--;){var b=e[p];p&&t&&(b=a(b,s(t))),m=u(b.length,m),h[p]=!n&&(t||f>=120&&b.length>=120)?new r(p&&b):void 0}b=e[0];var y=-1,v=h[0];e:for(;++y<f&&g.length<m;){var x=b[y],_=t?t(x):x;if(x=n||0!==x?x:0,!(v?l(v,_):c(g,_,n))){for(p=d;--p;){var w=h[p];if(!(w?l(w,_):c(e[p],_,n)))continue e}v&&v.push(_),g.push(x)}}return g}},function(e,t,n){var r=n(180),i=n(887),o=n(889);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){var r=n(888),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(890),i=n(892)(r);e.exports=i},function(e,t,n){var r=n(891),i=n(317),o=n(180),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=800,r=16,i=Date.now;e.exports=function(e){var t=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(894);e.exports=function(e){return r(e)?e:[]}},function(e,t,n){var r=n(177),i=n(53);e.exports=function(e){return i(e)&&r(e)}},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=158)}({158:function(e,t,n){"use strict";n.r(t),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175)},159:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,n,r,i){var o,a=e.color,s=i("prefix")||"",l=e[s+"size"]||1,u=i("edgeColor"),c=i("defaultNodeColor"),f=i("defaultEdgeColor"),d=t[s+"size"],p=t[s+"x"],h=t[s+"y"],m=n[s+"x"],g=n[s+"y"];if(o=t.id===n.id?sigma.utils.getSelfLoopControlPoints(p,h,d):sigma.utils.getQuadraticControlPoint(p,h,m,g),!a)switch(u){case"source":a=t.color||c;break;case"target":a=n.color||c;break;default:a=f}r.strokeStyle=a,r.lineWidth=l,r.beginPath(),r.moveTo(p,h),t.id===n.id?r.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,m,g):r.quadraticCurveTo(o.x,o.y,m,g),r.stroke()}}()}).call(window)},160:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,n,r,i){var o=e.color,a=i("prefix")||"",s=i("edgeColor"),l=i("defaultNodeColor"),u=i("defaultEdgeColor"),c=e[a+"size"]||1,f=n[a+"size"],d=t[a+"x"],p=t[a+"y"],h=n[a+"x"],m=n[a+"y"],g=Math.max(2.5*c,i("minArrowSize")),b=Math.sqrt(Math.pow(h-d,2)+Math.pow(m-p,2)),y=d+(h-d)*(b-g-f)/b,v=p+(m-p)*(b-g-f)/b,x=(h-d)*g/b,_=(m-p)*g/b;if(!o)switch(s){case"source":o=t.color||l;break;case"target":o=n.color||l;break;default:o=u}r.strokeStyle=o,r.lineWidth=c,r.beginPath(),r.moveTo(d,p),r.lineTo(y,v),r.stroke(),r.fillStyle=o,r.beginPath(),r.moveTo(y+x,v+_),r.lineTo(y+.6*_,v-.6*x),r.lineTo(y-.6*_,v+.6*x),r.lineTo(y+x,v+_),r.closePath(),r.fill()}}()}).call(window)},161:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,n,r,i){var o,a,s,l,u,c,f=e.color,d=i("prefix")||"",p=i("edgeColor"),h=i("defaultNodeColor"),m=i("defaultEdgeColor"),g=e[d+"size"]||1,b=n[d+"size"],y=t[d+"x"],v=t[d+"y"],x=n[d+"x"],_=n[d+"y"],w=Math.max(2.5*g,i("minArrowSize"));if(o=t.id===n.id?sigma.utils.getSelfLoopControlPoints(y,v,b):sigma.utils.getQuadraticControlPoint(y,v,x,_),t.id===n.id?(a=Math.sqrt(Math.pow(x-o.x1,2)+Math.pow(_-o.y1,2)),s=o.x1+(x-o.x1)*(a-w-b)/a,l=o.y1+(_-o.y1)*(a-w-b)/a,u=(x-o.x1)*w/a,c=(_-o.y1)*w/a):(a=Math.sqrt(Math.pow(x-o.x,2)+Math.pow(_-o.y,2)),s=o.x+(x-o.x)*(a-w-b)/a,l=o.y+(_-o.y)*(a-w-b)/a,u=(x-o.x)*w/a,c=(_-o.y)*w/a),!f)switch(p){case"source":f=t.color||h;break;case"target":f=n.color||h;break;default:f=m}r.strokeStyle=f,r.lineWidth=g,r.beginPath(),r.moveTo(y,v),t.id===n.id?r.bezierCurveTo(o.x2,o.y2,o.x1,o.y1,s,l):r.quadraticCurveTo(o.x,o.y,s,l),r.stroke(),r.fillStyle=f,r.beginPath(),r.moveTo(s+u,l+c),r.lineTo(s+.6*c,l-.6*u),r.lineTo(s-.6*c,l+.6*u),r.lineTo(s+u,l+c),r.closePath(),r.fill()}}()}).call(window)},162:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,n,r,i){var o,a=e.color,s=i("prefix")||"",l=i("edgeHoverSizeRatio")*(e[s+"size"]||1),u=i("edgeColor"),c=i("defaultNodeColor"),f=i("defaultEdgeColor"),d=t[s+"size"],p=t[s+"x"],h=t[s+"y"],m=n[s+"x"],g=n[s+"y"];if(o=t.id===n.id?sigma.utils.getSelfLoopControlPoints(p,h,d):sigma.utils.getQuadraticControlPoint(p,h,m,g),!a)switch(u){case"source":a=t.color||c;break;case"target":a=n.color||c;break;default:a=f}a="edge"===i("edgeHoverColor")?e.hover_color||a:e.hover_color||i("defaultEdgeHoverColor")||a,r.strokeStyle=a,r.lineWidth=l,r.beginPath(),r.moveTo(p,h),t.id===n.id?r.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,m,g):r.quadraticCurveTo(o.x,o.y,m,g),r.stroke()}}()}).call(window)},163:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,n,r,i){var o=e.color,a=i("prefix")||"",s=i("edgeColor"),l=i("defaultNodeColor"),u=i("defaultEdgeColor"),c=e[a+"size"]||1,f=n[a+"size"],d=t[a+"x"],p=t[a+"y"],h=n[a+"x"],m=n[a+"y"],g=2.5*(c=e.hover?i("edgeHoverSizeRatio")*c:c),b=Math.sqrt(Math.pow(h-d,2)+Math.pow(m-p,2)),y=d+(h-d)*(b-g-f)/b,v=p+(m-p)*(b-g-f)/b,x=(h-d)*g/b,_=(m-p)*g/b;if(!o)switch(s){case"source":o=t.color||l;break;case"target":o=n.color||l;break;default:o=u}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,r.strokeStyle=o,r.lineWidth=c,r.beginPath(),r.moveTo(d,p),r.lineTo(y,v),r.stroke(),r.fillStyle=o,r.beginPath(),r.moveTo(y+x,v+_),r.lineTo(y+.6*_,v-.6*x),r.lineTo(y-.6*_,v+.6*x),r.lineTo(y+x,v+_),r.closePath(),r.fill()}}()}).call(window)},164:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,n,r,i){var o,a,s,l,u,c,f,d=e.color,p=i("prefix")||"",h=i("edgeColor"),m=i("defaultNodeColor"),g=i("defaultEdgeColor"),b=i("edgeHoverSizeRatio")*(e[p+"size"]||1),y=n[p+"size"],v=t[p+"x"],x=t[p+"y"],_=n[p+"x"],w=n[p+"y"];if(o=t.id===n.id?sigma.utils.getSelfLoopControlPoints(v,x,y):sigma.utils.getQuadraticControlPoint(v,x,_,w),t.id===n.id?(a=Math.sqrt(Math.pow(_-o.x1,2)+Math.pow(w-o.y1,2)),s=2.5*b,l=o.x1+(_-o.x1)*(a-s-y)/a,u=o.y1+(w-o.y1)*(a-s-y)/a,c=(_-o.x1)*s/a,f=(w-o.y1)*s/a):(a=Math.sqrt(Math.pow(_-o.x,2)+Math.pow(w-o.y,2)),s=2.5*b,l=o.x+(_-o.x)*(a-s-y)/a,u=o.y+(w-o.y)*(a-s-y)/a,c=(_-o.x)*s/a,f=(w-o.y)*s/a),!d)switch(h){case"source":d=t.color||m;break;case"target":d=n.color||m;break;default:d=g}d="edge"===i("edgeHoverColor")?e.hover_color||d:e.hover_color||i("defaultEdgeHoverColor")||d,r.strokeStyle=d,r.lineWidth=b,r.beginPath(),r.moveTo(v,x),t.id===n.id?r.bezierCurveTo(o.x2,o.y2,o.x1,o.y1,l,u):r.quadraticCurveTo(o.x,o.y,l,u),r.stroke(),r.fillStyle=d,r.beginPath(),r.moveTo(l+c,u+f),r.lineTo(l+.6*f,u-.6*c),r.lineTo(l-.6*f,u+.6*c),r.lineTo(l+c,u+f),r.closePath(),r.fill()}}()}).call(window)},165:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dashed=function(e,t,n,r,i){var o=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=i("prefix")||"",s=e[a+"size"]||1,l=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,s*=i("edgeHoverSizeRatio"),r.save(),r.setLineDash([8,3]),r.strokeStyle=o,r.lineWidth=s,r.beginPath(),r.moveTo(t[a+"x"],t[a+"y"]),r.lineTo(n[a+"x"],n[a+"y"]),r.stroke(),r.restore()}}()}).call(window)},166:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dotted=function(e,t,n,r,i){var o=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=i("prefix")||"",s=e[a+"size"]||1,l=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,s*=i("edgeHoverSizeRatio"),r.save(),r.setLineDash([2]),r.strokeStyle=o,r.lineWidth=s,r.beginPath(),r.moveTo(t[a+"x"],t[a+"y"]),r.lineTo(n[a+"x"],n[a+"y"]),r.stroke(),r.restore()}}()}).call(window)},167:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.parallel=function(e,t,n,r,i){var o,a,s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,l=i("prefix")||"",u=e[l+"size"]||1,c=i("edgeColor"),f=i("defaultNodeColor"),d=i("defaultEdgeColor"),p=t[l+"x"],h=t[l+"y"],m=n[l+"x"],g=n[l+"y"],b=sigma.utils.getDistance(p,h,m,g);if(!s)switch(c){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=d}s="edge"===i("edgeHoverColor")?e.hover_color||s:e.hover_color||i("defaultEdgeHoverColor")||s,u*=i("edgeHoverSizeRatio"),o=sigma.utils.getCircleIntersection(p,h,u,m,g,b),a=sigma.utils.getCircleIntersection(m,g,u,p,h,b),r.save(),r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(o.xi,o.yi),r.lineTo(a.xi_prime,a.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(o.xi_prime,o.yi_prime),r.lineTo(a.xi,a.yi),r.closePath(),r.stroke(),r.restore()}}()}).call(window)},168:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.tapered=function(e,t,n,r,i){var o=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=e[(i("prefix")||"")+"size"]||1,s=i("edgeColor"),l=i("prefix")||"",u=i("defaultNodeColor"),c=i("defaultEdgeColor"),f=t[l+"x"],d=t[l+"y"],p=n[l+"x"],h=n[l+"y"],m=sigma.utils.getDistance(f,d,p,h);if(!o)switch(s){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}o="edge"===i("edgeHoverColor")?e.hover_color||o:e.hover_color||i("defaultEdgeHoverColor")||o,a*=i("edgeHoverSizeRatio");var g=sigma.utils.getCircleIntersection(f,d,a,p,h,m);r.save(),r.globalAlpha=.65,r.fillStyle=o,r.beginPath(),r.moveTo(p,h),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),r.restore()}}()}).call(window)},169:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(e,t,n,r,i){var o=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=i("prefix")||"",s=e[a+"size"]||1,l=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}r.save(),e.active?r.strokeStyle="edge"===i("edgeActiveColor")?o||c:i("defaultEdgeActiveColor"):r.strokeStyle=o,r.setLineDash([8,3]),r.lineWidth=s,r.beginPath(),r.moveTo(t[a+"x"],t[a+"y"]),r.lineTo(n[a+"x"],n[a+"y"]),r.stroke(),r.restore()}}()}).call(window)},170:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(e,t,n,r,i){var o=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=i("prefix")||"",s=e[a+"size"]||1,l=i("edgeColor"),u=i("defaultNodeColor"),c=i("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}r.save(),e.active?r.strokeStyle="edge"===i("edgeActiveColor")?o||c:i("defaultEdgeActiveColor"):r.strokeStyle=o,r.setLineDash([2]),r.lineWidth=s,r.beginPath(),r.moveTo(t[a+"x"],t[a+"y"]),r.lineTo(n[a+"x"],n[a+"y"]),r.stroke(),r.restore()}}()}).call(window)},171:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.parallel=function(e,t,n,r,i){var o,a,s=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,l=i("prefix")||"",u=e[l+"size"]||1,c=i("edgeColor"),f=i("defaultNodeColor"),d=i("defaultEdgeColor"),p=t[l+"x"],h=t[l+"y"],m=n[l+"x"],g=n[l+"y"],b=sigma.utils.getDistance(p,h,m,g);if(!s)switch(c){case"source":s=t.color||f;break;case"target":s=n.color||f;break;default:s=d}o=sigma.utils.getCircleIntersection(p,h,u,m,g,b),a=sigma.utils.getCircleIntersection(m,g,u,p,h,b),r.save(),e.active?r.strokeStyle="edge"===i("edgeActiveColor")?s||d:i("defaultEdgeActiveColor"):r.strokeStyle=s,r.lineWidth=u,r.beginPath(),r.moveTo(o.xi,o.yi),r.lineTo(a.xi_prime,a.yi_prime),r.closePath(),r.stroke(),r.beginPath(),r.moveTo(o.xi_prime,o.yi_prime),r.lineTo(a.xi,a.yi),r.closePath(),r.stroke(),r.restore()}}()}).call(window)},172:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(e,t,n,r,i){var o=e.active?e.active_color||i("defaultEdgeActiveColor"):e.color,a=e[(i("prefix")||"")+"size"]||1,s=i("edgeColor"),l=i("prefix")||"",u=i("defaultNodeColor"),c=i("defaultEdgeColor"),f=t[l+"x"],d=t[l+"y"],p=n[l+"x"],h=n[l+"y"],m=sigma.utils.getDistance(f,d,p,h);if(!o)switch(s){case"source":o=t.color||u;break;case"target":o=n.color||u;break;default:o=c}var g=sigma.utils.getCircleIntersection(f,d,a,p,h,m);r.save(),e.active?r.fillStyle="edge"===i("edgeActiveColor")?o||c:i("defaultEdgeActiveColor"):r.fillStyle=o,r.globalAlpha=.65,r.beginPath(),r.moveTo(p,h),r.lineTo(g.xi,g.yi),r.lineTo(g.xi_prime,g.yi_prime),r.closePath(),r.fill(),r.restore()}}()}).call(window)},173:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.def=function(e,t,n,r,i){if("string"==typeof e.label&&t!=n){var o=i("prefix")||"",a=e[o+"size"]||1;if(!(a<i("edgeLabelThreshold"))){if(0===i("edgeLabelSizePowRatio"))throw'"edgeLabelSizePowRatio" must not be 0.';var s,l=(t[o+"x"]+n[o+"x"])/2,u=(t[o+"y"]+n[o+"y"])/2,c=n[o+"x"]-t[o+"x"],f=n[o+"y"]-t[o+"y"],d=t[o+"x"]<n[o+"x"]?1:-1,p=Math.atan2(f*d,c*d);s="fixed"===i("edgeLabelSize")?i("defaultEdgeLabelSize"):i("defaultEdgeLabelSize")*a*Math.pow(a,-1/i("edgeLabelSizePowRatio")),r.save(),e.active?(r.font=[i("activeFontStyle"),s+"px",i("activeFont")||i("font")].join(" "),r.fillStyle="edge"===i("edgeActiveColor")?e.active_color||i("defaultEdgeActiveColor"):i("defaultEdgeLabelActiveColor")):(r.font=[i("fontStyle"),s+"px",i("font")].join(" "),r.fillStyle="edge"===i("edgeLabelColor")?e.color||i("defaultEdgeColor"):i("defaultEdgeLabelColor")),r.textAlign="center",r.textBaseline="alphabetic",r.translate(l,u),r.rotate(p),r.fillText(e.label,0,-a/2-3),r.restore()}}}}).call(this)}).call(window)},174:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,n,r,i){if("string"==typeof e.label){var o=i("prefix")||"",a=e[o+"size"]||1;if(!(a<i("edgeLabelThreshold"))){var s,l,u,c=t[o+"size"],f=t[o+"x"],d=t[o+"y"],p=n[o+"x"],h=n[o+"y"],m=p-f,g=h-d,b=f<p?1:-1,y={};t.id===n.id?(y=sigma.utils.getSelfLoopControlPoints(f,d,c),l=sigma.utils.getPointOnBezierCurve(.5,f,d,p,h,y.x1,y.y1,y.x2,y.y2),u=Math.atan2(1,1)):(y=sigma.utils.getQuadraticControlPoint(f,d,p,h),l=sigma.utils.getPointOnQuadraticCurve(.5,f,d,p,h,y.x,y.y),u=Math.atan2(g*b,m*b)),s="fixed"===i("edgeLabelSize")?i("defaultEdgeLabelSize"):i("defaultEdgeLabelSize")*a*Math.pow(a,-1/i("edgeLabelSizePowRatio")),r.save(),e.active?(r.font=[i("activeFontStyle"),s+"px",i("activeFont")||i("font")].join(" "),r.fillStyle="edge"===i("edgeActiveColor")?e.active_color||i("defaultEdgeActiveColor"):i("defaultEdgeLabelActiveColor")):(r.font=[i("fontStyle"),s+"px",i("font")].join(" "),r.fillStyle="edge"===i("edgeLabelColor")?e.color||i("defaultEdgeColor"):i("defaultEdgeLabelColor")),r.textAlign="center",r.textBaseline="alphabetic",r.translate(l.x,l.y),r.rotate(u),r.fillText(e.label,0,-a/2-3),r.restore()}}}}).call(this)}).call(window)},175:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curvedArrow=function(e,t,n,r,i){sigma.canvas.edges.labels.curve(e,t,n,r,i)}}).call(this)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=176)}({176:function(e,t,n){"use strict";n.r(t),n(177),n(178)},177:function(e,t){(function(){(function(e){"use strict";var t=[],n=function(e,n,r){t.push({name:e,drawShape:n,drawBorder:r})},r=function(e){return function(t,n,r,i,o,a){a.fillStyle=o,a.beginPath(),e(t,n,r,i,a),a.closePath(),a.fill()}},i=function(e){return function(t,n,r,i,o,a){a.strokeStyle=o,a.lineWidth=i/5,a.beginPath(),e(t,n,r,i,a),a.closePath(),a.stroke()}},o=function(e,t,n,r,i){var o=45*Math.PI/180;i.moveTo(t+r*Math.sin(o),n-r*Math.cos(o));for(var a=1;a<4;a++)i.lineTo(t+Math.sin(o+2*Math.PI*a/4)*r,n-Math.cos(o+2*Math.PI*a/4)*r)};n("square",r(o),i(o));var a=function(e,t,n,r,i){i.arc(t,n,r,0,2*Math.PI,!0)};n("circle",r(a),i(a));var s=function(e,t,n,r,i){i.moveTo(t-r,n),i.lineTo(t,n-r),i.lineTo(t+r,n),i.lineTo(t,n+r)};n("diamond",r(s),i(s));var l=function(e,t,n,r,i){var o=e.cross&&e.cross.lineWeight||5;i.moveTo(t-r,n-o),i.lineTo(t-r,n+o),i.lineTo(t-o,n+o),i.lineTo(t-o,n+r),i.lineTo(t+o,n+r),i.lineTo(t+o,n+o),i.lineTo(t+r,n+o),i.lineTo(t+r,n-o),i.lineTo(t+o,n-o),i.lineTo(t+o,n-r),i.lineTo(t-o,n-r),i.lineTo(t-o,n-o)};n("cross",r(l),i(l));var u=function(e,t,n,r,i){var o=e.equilateral&&e.equilateral.numPoints||5,a=(e.equilateral&&e.equilateral.rotate||0)*Math.PI/180,s=r;i.moveTo(t+s*Math.sin(a),n-s*Math.cos(a));for(var l=1;l<o;l++)i.lineTo(t+Math.sin(a+2*Math.PI*l/o)*s,n-Math.cos(a+2*Math.PI*l/o)*s)};n("equilateral",r(u),i(u));var c=function(e,t,n,r,i){var o=e.star&&e.star.numPoints||5,a=r,s=r*(e.star&&e.star.innerRatio||.5),l=Math.PI/o;i.moveTo(t,n-r);for(var u=0;u<o;u++)i.lineTo(t+Math.sin(l+2*Math.PI*u/o)*s,n-Math.cos(l+2*Math.PI*u/o)*s),i.lineTo(t+Math.sin(2*Math.PI*(u+1)/o)*a,n-Math.cos(2*Math.PI*(u+1)/o)*a)};n("star",r(c),i(c)),n("pacman",(function(e,t,n,r,i,o){o.fillStyle="yellow",o.beginPath(),o.arc(t,n,r,1.25*Math.PI,0,!1),o.arc(t,n,r,0,.75*Math.PI,!1),o.lineTo(t,n),o.closePath(),o.fill(),o.fillStyle="white",o.strokeStyle="black",o.beginPath(),o.arc(t+r/3,n-r/3,r/4,0,2*Math.PI,!1),o.closePath(),o.fill(),o.stroke(),o.fillStyle="black",o.beginPath(),o.arc(t+4*r/9,n-r/3,r/8,0,2*Math.PI,!1),o.closePath(),o.fill()}),null),this.ShapeLibrary={enumerate:function(){return t},version:"0.1"}}).call(window)}).call(window)},178:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof ShapeLibrary)throw"ShapeLibrary is not declared";sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.svg.nodes");var t=e,n={},r=function(e,r,i,o,a){if(t&&e.image&&e.image.url){var s=e.image.url,l=e.image.h||1,u=e.image.w||1,c=e.image.scale||1,f=e.image.clip||1,d=n[s];d||((d=document.createElement("IMG")).src=s,d.status="loading",d.onerror=function(){console.log("error loading",s),d.status="error"},d.onload=function(){console.log("redraw on image load",s),d.status="ok",t.refresh()},n[s]=d);var p=u<l?u/l:1,h=l<u?l/u:1,m=o*c;a.save(),a.beginPath(),a.arc(r,i,o*f,0,2*Math.PI,!0),a.closePath(),a.clip(),"ok"===d.status&&a.drawImage(d,r+Math.sin(-.7855)*m*p,i-Math.cos(-.7855)*m*h,m*p*2*Math.sin(-.7855)*-1,m*h*2*Math.cos(-.7855)),a.restore()}};ShapeLibrary.enumerate().forEach((function(e){!function(e,n,i){sigma.canvas.nodes[e]=function(e,t,o){var a=o("prefix")||"",s=e[a+"size"],l=e.color||o("defaultNodeColor"),u=e.borderColor||l,c=e[a+"x"],f=e[a+"y"];t.save(),n&&n(e,c,f,s,l,t),i&&i(e,c,f,s,u,t),r(e,c,f,s,t),t.restore()},sigma.svg.nodes[e]={create:function(e,n){var r=document.createElementNS(n("xmlns"),"g"),i=document.createElementNS(n("xmlns"),"circle");return r.setAttributeNS(null,"class",n("classPrefix")+"-node-group"),r.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",n("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||n("defaultNodeColor")),r.appendChild(i),function(e,n,r){if(t&&e.image&&e.image.url){var i=document.createElementNS(r("xmlns"),"circle"),o=document.createElementNS(r("xmlns"),"clipPath"),a=r("classPrefix")+"-clip-path-"+e.id,s=document.createElementNS(r("xmlns"),"defs"),l=document.createElementNS(r("xmlns"),"image");e.image.url,o.setAttributeNS(null,"id",a),o.appendChild(i),s.appendChild(o);var u=/MSIE [5-9]/.test(navigator.userAgent)?"":document.location.href;u=u.split("#")[0],l.setAttributeNS(null,"class",r("classPrefix")+"-node-image"),l.setAttributeNS(null,"clip-path","url("+u+"#"+a+")"),l.setAttributeNS(null,"pointer-events","none"),l.setAttributeNS("http://www.w3.org/1999/xlink","href",e.image.url),n.appendChild(s),n.appendChild(l)}}(e,r,n),r},update:function(e,t,n){for(var r=n("classPrefix"),i=e.image.clip||1,o=e.image.h||1,a=e.image.w||1,s=n("prefix")||"",l=e.image.scale||1,u=e[s+"size"],c=e[s+"x"],f=e[s+"y"],d=l*u,p=a<o?a/o:1,h=o<a?o/a:1,m=0,g=t.childNodes;m<g.length;m++)switch(g[m].getAttribute("class")){case r+"-node":g[m].setAttributeNS(null,"cx",c),g[m].setAttributeNS(null,"cy",f),g[m].setAttributeNS(null,"r",u),n("freeStyle")||g[m].setAttributeNS(null,"fill",e.color||n("defaultNodeColor"));break;case r+"-node-image":g[m].setAttributeNS(null,"x",c+Math.sin(-.7855)*d*p),g[m].setAttributeNS(null,"y",f-Math.cos(-.7855)*d*h),g[m].setAttributeNS(null,"width",d*p*2*Math.sin(-.7855)*-1),g[m].setAttributeNS(null,"height",d*h*2*Math.cos(-.7855));break;default:var b=g[m].firstChild;if(null!=b){var y=r+"-clip-path-"+e.id;b.getAttribute("id")===y&&(b.firstChild.setAttributeNS(null,"cx",c),b.firstChild.setAttributeNS(null,"cy",f),b.firstChild.setAttributeNS(null,"r",i*u))}}t.style.display=""}}}(e.name,e.drawShape,e.drawBorder)})),this.CustomShapes={init:function(e){t=e},version:"0.1"}}).call(window)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=181)}({181:function(e,t,n){n(182),e.exports=n(183)},182:function(e,t,n){(function(){(function(n){"use strict";var r={getModelTags:function(e){var t,n=e.getElementsByTagName("attributes"),r={},i=n.length;for(t=0;t<i;t++)r[n[t].getAttribute("class")]=n[t].childNodes;return r},nodeListToArray:function(e){for(var t=[],n=0,r=e.length;n<r;++n)"#text"!==e[n].nodeName&&t.push(e[n]);return t},nodeListEach:function(e,t){for(var n=0,r=e.length;n<r;++n)"#text"!==e[n].nodeName&&t(e[n])},nodeListToHash:function(e,t){for(var n={},r=0;r<e.length;r++)if("#text"!==e[r].nodeName){var i=t(e[r]);n[i.key]=i.value}return n},namedNodeMapToObject:function(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=e[n].value;return t},getFirstElementByTagNS:function(e,t,n){var r=e.getElementsByTagName(t+":"+n)[0];return r||(r=e.getElementsByTagNameNS(t,n)[0]),r||(r=e.getElementsByTagName(n)[0]),r},getAttributeNS:function(e,t,r){var i=e.getAttribute(t+":"+r);return i===n&&(i=e.getAttributeNS(t,r)),i===n&&(i=e.getAttribute(r)),i},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};function i(e){var t={};t.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:r.getModelTags(e)},t.hasViz=!!r.getAttributeNS(t.els.root,"xmlns","viz"),t.version=t.els.root.getAttribute("version")||"1.0",t.mode=t.els.graph.getAttribute("mode")||"static";var n=t.els.graph.getAttribute("defaultedgetype");function i(e){var n=[];return t.els.model[e]&&r.nodeListEach(t.els.model[e],(function(e){var t={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},i=r.nodeListToArray(e.childNodes);i.length>0&&(t.defaultValue=i[0].textContent),n.push(t)})),n.length>0&&n}function o(e,t){var n={},i=t.getElementsByTagName("attvalue"),o=r.nodeListToHash(i,(function(e){var t=r.namedNodeMapToObject(e.attributes);return{key:t.id||t.for,value:t.value}}));return e.map((function(e){n[e.id]=!(e.id in o)&&"defaultValue"in e?r.enforceType(e.type,e.defaultValue):r.enforceType(e.type,o[e.id])})),n}t.defaultEdgetype=n||"undirected";var a,s,l,u=i("node"),c=i("edge"),f={version:t.version,mode:t.mode,defaultEdgeType:t.defaultEdgetype,meta:(l={},t.els.meta?(l.lastmodifieddate=t.els.meta.getAttribute("lastmodifieddate"),r.nodeListEach(t.els.meta.childNodes,(function(e){l[e.tagName.toLowerCase()]=e.textContent})),l):l),model:{},nodes:(a=u,s=[],r.nodeListEach(t.els.nodes,(function(e){var n={id:e.getAttribute("id"),label:e.getAttribute("label")||""};a&&(n.attributes=o(a,e)),t.hasViz&&(n.viz=function(e){var t={},n=r.getFirstElementByTagNS(e,"viz","color");if(n){var i=["r","g","b","a"].map((function(e){return n.getAttribute(e)}));t.color=r.getRGB(i)}var o=r.getFirstElementByTagNS(e,"viz","position");o&&(t.position={},["x","y","z"].map((function(e){t.position[e]=+o.getAttribute(e)})));var a=r.getFirstElementByTagNS(e,"viz","size");a&&(t.size=+a.getAttribute("value"));var s=r.getFirstElementByTagNS(e,"viz","shape");return s&&(t.shape=s.getAttribute("value")),t}(e)),s.push(function(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}(n))})),s),edges:function(e,n){var i=[];return r.nodeListEach(t.els.edges,(function(a){var s=r.namedNodeMapToObject(a.attributes);"type"in s||(s.type=n),e&&(s.attributes=o(e,a)),t.hasViz&&(s.viz=function(e){var t={},n=r.getFirstElementByTagNS(e,"viz","color");if(n){var i=["r","g","b","a"].map((function(e){return n.getAttribute(e)}));t.color=r.getRGB(i)}var o=r.getFirstElementByTagNS(e,"viz","shape");o&&(t.shape=o.getAttribute("value"));var a=r.getFirstElementByTagNS(e,"viz","thickness");return a&&(t.thickness=+a.getAttribute("value")),t}(a)),i.push(function(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}(s))})),i}(c,t.defaultEdgetype)};return u&&(f.model.node=u),c&&(f.model.edge=c),f}function o(e,t){var n=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject)for(t in e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"])try{return new ActiveXObject(e[t])}catch(e){}return null}();if(!n)throw"XMLHttpRequest not supported, cannot load the file.";var r,i="function"==typeof t;return n.overrideMimeType?(n.overrideMimeType("text/xml"),r=function(e){return e.responseXML}):r=function(e){return(new DOMParser).parseFromString(e.responseText,"application/xml")},n.open("GET",e,i),i&&(n.onreadystatechange=function(){4===n.readyState&&t(r(n))}),n.send(),i?n:r(n)}if(void 0!==this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:function(e){return i(e)},fetch:function(e,t){return"function"==typeof t?o(e,(function(e){t(i(e))})):i(o(e))},version:"0.1.1"},this.exports!==t&&(e.exports=this.gexf)}).call(window)}).call(window)},183:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var t=0;sigma.parsers.gexf=function(e,n,r){var i,o,a,s;function l(e){for(a=e.nodes,i=0,o=a.length;i<o;i++)(s=a[i]).id=s.id,s.viz&&"object"==typeof s.viz&&(s.viz.position&&"object"==typeof s.viz.position&&(s.x=s.viz.position.x,s.y=-s.viz.position.y),s.size=s.viz.size,s.color=s.viz.color);for(a=e.edges,i=0,o=a.length;i<o;i++)(s=a[i]).id="string"==typeof s.id?s.id:"e"+t++,s.source=""+s.source,s.target=""+s.target,s.viz&&"object"==typeof s.viz&&(s.color=s.viz.color,s.size=s.viz.thickness),s.size=s.weight,s.direction=s.type,delete s.type;if(n instanceof sigma){for(n.graph.clear(),a=e.nodes,i=0,o=a.length;i<o;i++)n.graph.addNode(a[i]);for(a=e.edges,i=0,o=a.length;i<o;i++)n.graph.addEdge(a[i])}else"object"==typeof n?(n.graph=e,n=new sigma(n)):"function"==typeof n&&(r=n,n=null);return r?void r(n||e):e}if("string"==typeof e)gexf.fetch(e,l);else if("object"==typeof e)return l(gexf.parse(e))}}).call(window)}).call(window)}})},function(module,exports){var Sigma=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=185)}({185:function(module,exports){(function(){(function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",(function(e){if("string"!=typeof e)throw"adjacentNodes: the node id must be a string.";var t,n=[];for(t in this.allNeighborsIndex[e])n.push(this.nodesIndex[t]);return n})),sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",(function(e){if("string"!=typeof e)throw"adjacentEdges: the node id must be a string.";var t,n,r=this.allNeighborsIndex[e],i=[];for(n in r)for(t in r[n])i.push(r[n][t]);return i}));var _g=undefined,_s=undefined,_chain=[],_keysIndex=Object.create(null),Processors={};function register(e,t,n){if(n!=undefined&&"string"!=typeof n)throw'The filter key "'+n.toString()+'" must be a string.';if(n!=undefined&&!n.length)throw"The filter key must be a non-empty string.";if("function"!=typeof e)throw'The predicate of key "'+n+'" must be a function.';if("undo"===n)throw'"undo" is a reserved key.';if(_keysIndex[n])throw'The filter "'+n+'" already exists.';n&&(_keysIndex[n]=!0),_chain.push({key:n,processor:e,predicate:t})}function unregister(e){for(var t in _chain=_chain.filter((function(t){return!(t.key in e)})),e)delete _keysIndex[t]}function Filter(e){_s=e,_g=e.graph}function deepCopy(o){var copy=Object.create(null);for(var i in o)"object"==typeof o[i]&&null!==o[i]?copy[i]=deepCopy(o[i]):"function"==typeof o[i]&&null!==o[i]?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function cloneChain(e){for(var t=e.slice(0),n=0,r=t.length;n<r;n++)t[n]=deepCopy(t[n]),"function"==typeof t[n].processor&&(t[n].processor="filter.processors."+t[n].processor.name);return t}Processors.nodes=function(e){for(var t=_g.nodes(),n=t.length,r=_g.edges(),i=r.length;n--;)t[n].hidden=!e.call(_g,t[n])||t[n].hidden;for(;i--;)(_g.nodes(r[i].source).hidden||_g.nodes(r[i].target).hidden)&&(r[i].hidden=!0)},Processors.edges=function(e){for(var t=_g.edges(),n=t.length;n--;)t[n].hidden=!e.call(_g,t[n])||t[n].hidden},Processors.neighbors=function(e){for(var t=_g.nodes(),n=t.length,r=_g.edges(),i=r.length,o=_g.adjacentNodes(e),a=o.length,s={};a--;)s[o[a].id]=!0;for(;n--;)t[n].id===e||t[n].id in s||(t[n].hidden=!0);for(;i--;)(_g.nodes(r[i].source).hidden||_g.nodes(r[i].target).hidden)&&(r[i].hidden=!0)},Filter.prototype.nodesBy=function(e,t){return register(Processors.nodes,e,t),this},Filter.prototype.edgesBy=function(e,t){return register(Processors.edges,e,t),this},Filter.prototype.neighborsOf=function(e,t){if("string"!=typeof e)throw'The node id "'+e.toString()+'" must be a string.';if(!e.length)throw"The node id must be a non-empty string.";return register(Processors.neighbors,e,t),this},Filter.prototype.apply=function(){for(var e=0,t=_chain.length;e<t;++e)_chain[e].processor(_chain[e].predicate);return _chain[0]&&"undo"===_chain[0].key&&_chain.shift(),_s.refresh(),this},Filter.prototype.undo=function(e){var t=Object.create(null),n=arguments.length;if(1===n)if("[object Array]"===Object.prototype.toString.call(e))for(var r=0,i=e.length;r<i;r++)t[e[r]]=!0;else t[e]=!0;else if(n>1)for(r=0;r<n;r++)t[arguments[r]]=!0;else this.clear();function o(){for(var e=_g.nodes(),t=e.length,n=_g.edges(),r=n.length;t--;)e[t].hidden=!1;for(;r--;)n[r].hidden=!1}return unregister(t),_chain.unshift({key:"undo",processor:o}),this},Filter.prototype.clear=function(){return _chain.length=0,_keysIndex=Object.create(null),this},Filter.prototype.export=function(){return cloneChain(_chain)},Filter.prototype.import=function(e){if(e===undefined)throw"Wrong arguments.";if("[object Array]"!==Object.prototype.toString.call(e))throw'The chain" must be an array.';for(var t=cloneChain(e),n=0,r=t.length;n<r;n++){if(t[n].predicate===undefined||t[n].processor===undefined)throw"Wrong arguments.";if(t[n].key!=undefined&&"string"!=typeof t[n].key)throw'The filter key "'+t[n].key.toString()+'" must be a string.';if("function"!=typeof t[n].predicate)throw'The predicate of key "'+t[n].key+'" must be a function.';if("string"!=typeof t[n].processor)throw'The processor of key "'+t[n].key+'" must be a string.';switch(t[n].processor){case"filter.processors.nodes":t[n].processor=Processors.nodes;break;case"filter.processors.edges":t[n].processor=Processors.edges;break;case"filter.processors.neighbors":t[n].processor=Processors.neighbors;break;default:throw"Unknown processor "+t[n].processor}}return _chain=t,this};var filter=null;sigma.plugins.filter=function(e){return filter=new Filter(e)}}).call(this)}).call(window)}})},function(module,exports){var Sigma=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=186)}({186:function(e,t,n){n(187),e.exports=n(188)},187:function(module,exports,__webpack_require__){(function(){(function(undefined){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();if(options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=!1!==options.worker&&webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1,this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",(function(){sigInst.killForceAtlas2()}))}Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(n){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,(t=new BlobBuilder).append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e,t,n,r=this.graph.nodes(),i=this.graph.edges(),o=r.length*this.ppn,a=i.length*this.ppe,s={};for(this.nodesByteArray=new Float32Array(o),this.edgesByteArray=new Float32Array(a),e=t=0,n=r.length;e<n;e++)s[r[e].id]=t,this.nodesByteArray[t]=r[e].x,this.nodesByteArray[t+1]=r[e].y,this.nodesByteArray[t+2]=0,this.nodesByteArray[t+3]=0,this.nodesByteArray[t+4]=0,this.nodesByteArray[t+5]=0,this.nodesByteArray[t+6]=1+this.graph.degree(r[e].id),this.nodesByteArray[t+7]=1,this.nodesByteArray[t+8]=r[e].size,this.nodesByteArray[t+9]=0,t+=this.ppn;for(e=t=0,n=i.length;e<n;e++)this.edgesByteArray[t]=s[i[e].source],this.edgesByteArray[t+1]=s[i[e].target],this.edgesByteArray[t+2]=i[e].weight||0,t+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){for(var e=this.graph.nodes(),t=0,n=0,r=this.nodesByteArray.length;n<r;n+=this.ppn)e[t].x=this.nodesByteArray[n],e[t].y=this.nodesByteArray[n+1],t++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},n=[this.nodesByteArray.buffer];"start"===e&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,n.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,n):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(!this.running){var e;for(e in this.running=!0,this.sigInst.cameras)this.sigInst.cameras[e].edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)}},Supervisor.prototype.stop=function(){if(this.running){var e,t,n;for(e in this.sigInst.cameras)(t=this.sigInst.cameras[e]).edgequadtree._enabled=!0,n=sigma.utils.getBoundaries(this.graph,t.readPrefix),t.settings("drawEdges")&&t.settings("enableEdgeHovering")&&t.edgequadtree.index(this.sigInst.graph,{prefix:t.readPrefix,bounds:{x:n.minX,y:n.minY,width:n.maxX-n.minX,height:n.maxY-n.minY}});this.running=!1}},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){if(this.config=e,this.started){var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")}},sigma.prototype.startForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),e&&this.supervisor.configure(e),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),this.supervisor.configure(e),this},sigma.prototype.isForceAtlas2Running=function(e){return!!this.supervisor&&this.supervisor.running}}).call(window)}).call(window)},188:function(module,exports){(function(){(function(undefined){"use strict";var _root=this,inWebWorker=!("document"in _root),Worker=function(e){var t,n,r,i,o={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}},a={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},s={source:0,target:1,weight:2},l={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8};function u(e,t){if(e%o.ppn!=0)throw"np: non correct ("+e+").";if(e!==parseInt(e))throw"np: non int.";if(t in a)return e+a[t];throw"ForceAtlas2.Worker - Inexistant node property given ("+t+")."}function c(e,t){if(e%o.ppe!=0)throw"ep: non correct ("+e+").";if(e!==parseInt(e))throw"ep: non int.";if(t in s)return e+s[t];throw"ForceAtlas2.Worker - Inexistant edge property given ("+t+")."}function f(e,t){if(e%o.ppr!=0)throw"rp: non correct ("+e+").";if(e!==parseInt(e))throw"rp: non int.";if(t in l)return e+l[t];throw"ForceAtlas2.Worker - Inexistant region property given ("+t+")."}function d(e){o.settings=function(){var e,t,n={};for(e=arguments.length-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}(e,o.settings)}function p(){var e,i,a,s,l,d,p,h,m,g,b,y,v,x,_,w,O,E,k;for(a=0;a<o.nodesLength;a+=o.ppn)t[u(a,"old_dx")]=t[u(a,"dx")],t[u(a,"old_dy")]=t[u(a,"dy")],t[u(a,"dx")]=0,t[u(a,"dy")]=0;if(o.settings.outboundAttractionDistribution){for(m=0,a=0;a<o.nodesLength;a+=o.ppn)m+=t[u(a,"mass")];m/=o.nodesLength}if(o.settings.barnesHutOptimize){var S,T,j=1/0,A=-1/0,P=1/0,C=-1/0;for(r=[],a=0;a<o.nodesLength;a+=o.ppn)j=Math.min(j,t[u(a,"x")]),A=Math.max(A,t[u(a,"x")]),P=Math.min(P,t[u(a,"y")]),C=Math.max(C,t[u(a,"y")]);for(r[f(0,"node")]=-1,r[f(0,"centerX")]=(j+A)/2,r[f(0,"centerY")]=(P+C)/2,r[f(0,"size")]=Math.max(A-j,C-P),r[f(0,"nextSibling")]=-1,r[f(0,"firstChild")]=-1,r[f(0,"mass")]=0,r[f(0,"massCenterX")]=0,r[f(0,"massCenterY")]=0,e=1,a=0;a<o.nodesLength;a+=o.ppn)for(i=0;;)if(r[f(i,"firstChild")]>=0)S=t[u(a,"x")]<r[f(i,"centerX")]?t[u(a,"y")]<r[f(i,"centerY")]?r[f(i,"firstChild")]:r[f(i,"firstChild")]+o.ppr:t[u(a,"y")]<r[f(i,"centerY")]?r[f(i,"firstChild")]+2*o.ppr:r[f(i,"firstChild")]+3*o.ppr,r[f(i,"massCenterX")]=(r[f(i,"massCenterX")]*r[f(i,"mass")]+t[u(a,"x")]*t[u(a,"mass")])/(r[f(i,"mass")]+t[u(a,"mass")]),r[f(i,"massCenterY")]=(r[f(i,"massCenterY")]*r[f(i,"mass")]+t[u(a,"y")]*t[u(a,"mass")])/(r[f(i,"mass")]+t[u(a,"mass")]),r[f(i,"mass")]+=t[u(a,"mass")],i=S;else{if(r[f(i,"node")]<0){r[f(i,"node")]=a;break}if(r[f(i,"firstChild")]=e*o.ppr,p=r[f(i,"size")]/2,h=r[f(i,"firstChild")],r[f(h,"node")]=-1,r[f(h,"centerX")]=r[f(i,"centerX")]-p,r[f(h,"centerY")]=r[f(i,"centerY")]-p,r[f(h,"size")]=p,r[f(h,"nextSibling")]=h+o.ppr,r[f(h,"firstChild")]=-1,r[f(h,"mass")]=0,r[f(h,"massCenterX")]=0,r[f(h,"massCenterY")]=0,h+=o.ppr,r[f(h,"node")]=-1,r[f(h,"centerX")]=r[f(i,"centerX")]-p,r[f(h,"centerY")]=r[f(i,"centerY")]+p,r[f(h,"size")]=p,r[f(h,"nextSibling")]=h+o.ppr,r[f(h,"firstChild")]=-1,r[f(h,"mass")]=0,r[f(h,"massCenterX")]=0,r[f(h,"massCenterY")]=0,h+=o.ppr,r[f(h,"node")]=-1,r[f(h,"centerX")]=r[f(i,"centerX")]+p,r[f(h,"centerY")]=r[f(i,"centerY")]-p,r[f(h,"size")]=p,r[f(h,"nextSibling")]=h+o.ppr,r[f(h,"firstChild")]=-1,r[f(h,"mass")]=0,r[f(h,"massCenterX")]=0,r[f(h,"massCenterY")]=0,h+=o.ppr,r[f(h,"node")]=-1,r[f(h,"centerX")]=r[f(i,"centerX")]+p,r[f(h,"centerY")]=r[f(i,"centerY")]+p,r[f(h,"size")]=p,r[f(h,"nextSibling")]=r[f(i,"nextSibling")],r[f(h,"firstChild")]=-1,r[f(h,"mass")]=0,r[f(h,"massCenterX")]=0,r[f(h,"massCenterY")]=0,e+=4,S=t[u(r[f(i,"node")],"x")]<r[f(i,"centerX")]?t[u(r[f(i,"node")],"y")]<r[f(i,"centerY")]?r[f(i,"firstChild")]:r[f(i,"firstChild")]+o.ppr:t[u(r[f(i,"node")],"y")]<r[f(i,"centerY")]?r[f(i,"firstChild")]+2*o.ppr:r[f(i,"firstChild")]+3*o.ppr,r[f(i,"mass")]=t[u(r[f(i,"node")],"mass")],r[f(i,"massCenterX")]=t[u(r[f(i,"node")],"x")],r[f(i,"massCenterY")]=t[u(r[f(i,"node")],"y")],r[f(S,"node")]=r[f(i,"node")],r[f(i,"node")]=-1,S!==(T=t[u(a,"x")]<r[f(i,"centerX")]?t[u(a,"y")]<r[f(i,"centerY")]?r[f(i,"firstChild")]:r[f(i,"firstChild")]+o.ppr:t[u(a,"y")]<r[f(i,"centerY")]?r[f(i,"firstChild")]+2*o.ppr:r[f(i,"firstChild")]+3*o.ppr)){r[f(T,"node")]=a;break}i=S}}if(o.settings.barnesHutOptimize)for(g=o.settings.scalingRatio,a=0;a<o.nodesLength;a+=o.ppn)for(i=0;;)if(r[f(i,"firstChild")]>=0){if(x=Math.sqrt(Math.pow(t[u(a,"x")]-r[f(i,"massCenterX")],2)+Math.pow(t[u(a,"y")]-r[f(i,"massCenterY")],2)),2*r[f(i,"size")]/x<o.settings.barnesHutTheta){if(b=t[u(a,"x")]-r[f(i,"massCenterX")],y=t[u(a,"y")]-r[f(i,"massCenterY")],o.settings.adjustSizes?x>0?(_=g*t[u(a,"mass")]*r[f(i,"mass")]/x/x,t[u(a,"dx")]+=b*_,t[u(a,"dy")]+=y*_):x<0&&(_=-g*t[u(a,"mass")]*r[f(i,"mass")]/x,t[u(a,"dx")]+=b*_,t[u(a,"dy")]+=y*_):x>0&&(_=g*t[u(a,"mass")]*r[f(i,"mass")]/x/x,t[u(a,"dx")]+=b*_,t[u(a,"dy")]+=y*_),r[f(i,"nextSibling")]<0)break;i=r[f(i,"nextSibling")];continue}i=r[f(i,"firstChild")]}else{if(r[f(i,"node")]>=0&&r[f(i,"node")]!==a&&(b=t[u(a,"x")]-t[u(r[f(i,"node")],"x")],y=t[u(a,"y")]-t[u(r[f(i,"node")],"y")],x=Math.sqrt(b*b+y*y),o.settings.adjustSizes?x>0?(_=g*t[u(a,"mass")]*t[u(r[f(i,"node")],"mass")]/x/x,t[u(a,"dx")]+=b*_,t[u(a,"dy")]+=y*_):x<0&&(_=-g*t[u(a,"mass")]*t[u(r[f(i,"node")],"mass")]/x,t[u(a,"dx")]+=b*_,t[u(a,"dy")]+=y*_):x>0&&(_=g*t[u(a,"mass")]*t[u(r[f(i,"node")],"mass")]/x/x,t[u(a,"dx")]+=b*_,t[u(a,"dy")]+=y*_)),r[f(i,"nextSibling")]<0)break;i=r[f(i,"nextSibling")]}else for(g=o.settings.scalingRatio,s=0;s<o.nodesLength;s+=o.ppn)for(l=0;l<s;l+=o.ppn)b=t[u(s,"x")]-t[u(l,"x")],y=t[u(s,"y")]-t[u(l,"y")],o.settings.adjustSizes?(x=Math.sqrt(b*b+y*y)-t[u(s,"size")]-t[u(l,"size")])>0?(_=g*t[u(s,"mass")]*t[u(l,"mass")]/x/x,t[u(s,"dx")]+=b*_,t[u(s,"dy")]+=y*_,t[u(l,"dx")]+=b*_,t[u(l,"dy")]+=y*_):x<0&&(_=100*g*t[u(s,"mass")]*t[u(l,"mass")],t[u(s,"dx")]+=b*_,t[u(s,"dy")]+=y*_,t[u(l,"dx")]-=b*_,t[u(l,"dy")]-=y*_):(x=Math.sqrt(b*b+y*y))>0&&(_=g*t[u(s,"mass")]*t[u(l,"mass")]/x/x,t[u(s,"dx")]+=b*_,t[u(s,"dy")]+=y*_,t[u(l,"dx")]-=b*_,t[u(l,"dy")]-=y*_);for(h=o.settings.gravity/o.settings.scalingRatio,g=o.settings.scalingRatio,a=0;a<o.nodesLength;a+=o.ppn)_=0,b=t[u(a,"x")],y=t[u(a,"y")],x=Math.sqrt(Math.pow(b,2)+Math.pow(y,2)),o.settings.strongGravityMode?x>0&&(_=g*t[u(a,"mass")]*h):x>0&&(_=g*t[u(a,"mass")]*h/x),t[u(a,"dx")]-=b*_,t[u(a,"dy")]-=y*_;for(g=1*(o.settings.outboundAttractionDistribution?m:1),d=0;d<o.edgesLength;d+=o.ppe)s=n[c(d,"source")],l=n[c(d,"target")],p=n[c(d,"weight")],v=Math.pow(p,o.settings.edgeWeightInfluence),b=t[u(s,"x")]-t[u(l,"x")],y=t[u(s,"y")]-t[u(l,"y")],o.settings.adjustSizes?(x=Math.sqrt(Math.pow(b,2)+Math.pow(y,2)-t[u(s,"size")]-t[u(l,"size")]),o.settings.linLogMode?o.settings.outboundAttractionDistribution?x>0&&(_=-g*v*Math.log(1+x)/x/t[u(s,"mass")]):x>0&&(_=-g*v*Math.log(1+x)/x):o.settings.outboundAttractionDistribution?x>0&&(_=-g*v/t[u(s,"mass")]):x>0&&(_=-g*v)):(x=Math.sqrt(Math.pow(b,2)+Math.pow(y,2)),o.settings.linLogMode?o.settings.outboundAttractionDistribution?x>0&&(_=-g*v*Math.log(1+x)/x/t[u(s,"mass")]):x>0&&(_=-g*v*Math.log(1+x)/x):o.settings.outboundAttractionDistribution?(x=1,_=-g*v/t[u(s,"mass")]):(x=1,_=-g*v)),x>0&&(t[u(s,"dx")]+=b*_,t[u(s,"dy")]+=y*_,t[u(l,"dx")]-=b*_,t[u(l,"dy")]-=y*_);if(o.settings.adjustSizes)for(a=0;a<o.nodesLength;a+=o.ppn)t[u(a,"fixed")]||((w=Math.sqrt(Math.pow(t[u(a,"dx")],2)+Math.pow(t[u(a,"dy")],2)))>o.maxForce&&(t[u(a,"dx")]=t[u(a,"dx")]*o.maxForce/w,t[u(a,"dy")]=t[u(a,"dy")]*o.maxForce/w),O=t[u(a,"mass")]*Math.sqrt((t[u(a,"old_dx")]-t[u(a,"dx")])*(t[u(a,"old_dx")]-t[u(a,"dx")])+(t[u(a,"old_dy")]-t[u(a,"dy")])*(t[u(a,"old_dy")]-t[u(a,"dy")])),E=Math.sqrt((t[u(a,"old_dx")]+t[u(a,"dx")])*(t[u(a,"old_dx")]+t[u(a,"dx")])+(t[u(a,"old_dy")]+t[u(a,"dy")])*(t[u(a,"old_dy")]+t[u(a,"dy")]))/2,k=.1*Math.log(1+E)/(1+Math.sqrt(O)),t[u(a,"x")]=t[u(a,"x")]+t[u(a,"dx")]*(k/o.settings.slowDown),t[u(a,"y")]=t[u(a,"y")]+t[u(a,"dy")]*(k/o.settings.slowDown));else for(a=0;a<o.nodesLength;a+=o.ppn)t[u(a,"fixed")]||(O=t[u(a,"mass")]*Math.sqrt((t[u(a,"old_dx")]-t[u(a,"dx")])*(t[u(a,"old_dx")]-t[u(a,"dx")])+(t[u(a,"old_dy")]-t[u(a,"dy")])*(t[u(a,"old_dy")]-t[u(a,"dy")])),E=Math.sqrt((t[u(a,"old_dx")]+t[u(a,"dx")])*(t[u(a,"old_dx")]+t[u(a,"dx")])+(t[u(a,"old_dy")]+t[u(a,"dy")])*(t[u(a,"old_dy")]+t[u(a,"dy")]))/2,k=t[u(a,"convergence")]*Math.log(1+E)/(1+Math.sqrt(O)),t[u(a,"convergence")]=Math.min(1,Math.sqrt(k*(Math.pow(t[u(a,"dx")],2)+Math.pow(t[u(a,"dy")],2))/(1+Math.sqrt(O)))),t[u(a,"x")]=t[u(a,"x")]+t[u(a,"dx")]*(k/o.settings.slowDown),t[u(a,"y")]=t[u(a,"y")]+t[u(a,"dy")]*(k/o.settings.slowDown));o.iterations++}function h(e){for(var t=0;t<e;t++)p();i()}i="undefined"!=typeof window&&window.document?function(){var e;document.createEvent?(e=document.createEvent("Event")).initEvent("newCoords",!0,!1):(e=document.createEventObject()).eventType="newCoords",e.eventName="newCoords",e.data={nodes:t.buffer},requestAnimationFrame((function(){document.dispatchEvent(e)}))}:function(){self.postMessage({nodes:t.buffer},[t.buffer])};var m=function(e){switch(e.data.action){case"start":i=new Float32Array(e.data.nodes),a=new Float32Array(e.data.edges),s=(s=e.data.config)||{},t=i,n=a,o.nodesLength=t.length,o.edgesLength=n.length,d(s),h(o.settings.startingIterations);break;case"loop":t=new Float32Array(e.data.nodes),h(o.settings.iterationsPerRender);break;case"config":d(e.data.config);break;case"kill":!function(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t]}(o),t=null,n=null,r=null,self.removeEventListener("message",m)}var i,a,s};self.addEventListener("message",m)};function crush(e){var t,n,r,i=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],o=["source","target","weight"],a=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(n=0,r=a.length;n<r;n++)t=new RegExp("rp\\(([^,]*), '"+a[n]+"'\\)","g"),e=e.replace(t,0===n?"$1":"$1 + "+n);for(n=0,r=i.length;n<r;n++)t=new RegExp("np\\(([^,]*), '"+i[n]+"'\\)","g"),e=e.replace(t,0===n?"$1":"$1 + "+n);for(n=0,r=o.length;n<r;n++)t=new RegExp("ep\\(([^,]*), '"+o[n]+"'\\)","g"),e=e.replace(t,0===n?"$1":"$1 + "+n);return e}function getWorkerFn(){return";("+(crush?crush(Worker.toString()):Worker.toString())+").call(this);"}if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}).call(window)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=373)}({373:function(e,t){(function(){(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.plugins.relativeSize=function(e,t){for(var n=e.graph.nodes(),r=0;r<n.length;r++){var i=e.graph.degree(n[r].id);n[r].size=t*Math.sqrt(i)}e.refresh()}}).call(window)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=370)}({370:function(e,t){(function(){(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,t={};function n(e){if(t[e])return t[e];var n=[0,0,0];return e.match(/^#/)?n=3===(e=(e||"").replace(/^#/,"")).length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]:e.match(/^ *rgba? *\(/)&&(n=[+(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],+e[2],+e[3]]),t[e]={r:n[0],g:n[1],b:n[2]},t[e]}function r(e,t,r){return e=n(e),t=n(t),"rgb("+[0|e.r*(1-r)+t.r*r,0|e.g*(1-r)+t.g*r,0|e.b*(1-r)+t.b*r].join(",")+")"}sigma.plugins.animate=function(t,n,i){var o,a,s,l=i||{},u=++e,c=l.duration||t.settings("animationsTime"),f="string"==typeof l.easing?sigma.utils.easings[l.easing]:"function"==typeof l.easing?l.easing:sigma.utils.easings.quadraticInOut,d=sigma.utils.dateNow();for(s in o=l.nodes&&l.nodes.length?"object"==typeof l.nodes[0]?l.nodes:t.graph.nodes(l.nodes):t.graph.nodes(),a=o.reduce((function(e,t){var r;for(r in e[t.id]={},n)r in t&&(e[t.id][r]=t[r]);return e}),{}),t.animations=t.animations||Object.create({}),sigma.plugins.kill(t),t.cameras)t.cameras[s].edgequadtree._enabled=!1;!function e(){var i=(sigma.utils.dateNow()-d)/c;if(i>=1){var s;for(s in o.forEach((function(e){for(var t in n)t in n&&(e[t]=e[n[t]])})),t.cameras)t.cameras[s].edgequadtree._enabled=!0;t.refresh(),"function"==typeof l.onComplete&&l.onComplete()}else i=f(i),o.forEach((function(e){for(var t in n)t in n&&(t.match(/color$/)?e[t]=r(a[e.id][t],e[n[t]],i):e[t]=e[n[t]]*i+a[e.id][t]*(1-i))})),t.refresh(),t.animations[u]=requestAnimationFrame(e)}()},sigma.plugins.kill=function(e){for(var t in e.animations||{})cancelAnimationFrame(e.animations[t]);for(t in e.cameras)e.cameras[t].edgequadtree._enabled=!0}}).call(window)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=372)}({372:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layout.noverlap");var t={speed:3,scaleNodes:1.2,nodeMargin:5,gridSize:20,permittedExpansion:1.1,rendererIndex:0,maxIterations:500},n={},r={};function i(){var e=this;this.init=function(e,n){if(n=n||{},this.sigInst=e,this.config=sigma.utils.extend(n,t),this.easing=n.easing,this.duration=n.duration,n.nodes&&(this.nodes=n.nodes,delete n.nodes),!sigma.plugins||void 0===sigma.plugins.animate)throw new Error("sigma.plugins.animate is not declared");this.running=!1},this.atomicGo=function(){if(!this.running||this.iterCount<1)return!1;var t,n,r,i,o,a,s,l,u,c,f,d,p,h,m,g,b,y,v,x,_,w=this.nodes||this.sigInst.graph.nodes(),O=w.length,E=1/0,k=-1/0,S=1/0,T=-1/0;for(this.iterCount--,this.running=!1,t=0;t<O;t++)(n=w[t]).dn.dx=0,n.dn.dy=0,E=Math.min(E,n.dn_x-(n.dn_size*e.config.scaleNodes+e.config.nodeMargin)),k=Math.max(k,n.dn_x+(n.dn_size*e.config.scaleNodes+e.config.nodeMargin)),S=Math.min(S,n.dn_y-(n.dn_size*e.config.scaleNodes+e.config.nodeMargin)),T=Math.max(T,n.dn_y+(n.dn_size*e.config.scaleNodes+e.config.nodeMargin));for(i=k-E,o=T-S,s=(S+T)/2,E=(a=(E+k)/2)-e.config.permittedExpansion*i/2,k=a+e.config.permittedExpansion*i/2,S=s-e.config.permittedExpansion*o/2,T=s+e.config.permittedExpansion*o/2,l={},u=0;u<e.config.gridSize;u++)for(l[u]={},c=0;c<e.config.gridSize;c++)l[u][c]=[];for(t=0;t<O;t++)for(y=(n=w[t]).dn_x-(n.dn_size*e.config.scaleNodes+e.config.nodeMargin),v=n.dn_x+(n.dn_size*e.config.scaleNodes+e.config.nodeMargin),x=n.dn_y-(n.dn_size*e.config.scaleNodes+e.config.nodeMargin),_=n.dn_y+(n.dn_size*e.config.scaleNodes+e.config.nodeMargin),f=Math.floor(e.config.gridSize*(y-E)/(k-E)),d=Math.floor(e.config.gridSize*(v-E)/(k-E)),p=Math.floor(e.config.gridSize*(x-S)/(T-S)),h=Math.floor(e.config.gridSize*(_-S)/(T-S)),c=f;c<=d;c++)for(u=p;u<=h;u++)l[u][c].push(n.id);for(m={},u=0;u<e.config.gridSize;u++)for(c=0;c<e.config.gridSize;c++)l[u][c].forEach((function(t){for(m[t]||(m[t]=[]),g=Math.max(0,u-1);g<=Math.min(u+1,e.config.gridSize-1);g++)for(b=Math.max(0,c-1);b<=Math.min(c+1,e.config.gridSize-1);b++)l[g][b].forEach((function(e){e!==t&&-1===m[t].indexOf(e)&&m[t].push(e)}))}));for(t=0;t<O;t++)r=w[t],m[r.id].forEach((function(t){var n=e.sigInst.graph.nodes(t),a=n.dn_x-r.dn_x,s=n.dn_y-r.dn_y,l=Math.sqrt(a*a+s*s);l<r.dn_size*e.config.scaleNodes+e.config.nodeMargin+(n.dn_size*e.config.scaleNodes+e.config.nodeMargin)&&(e.running=!0,l>0?(n.dn.dx+=a/l*(1+r.dn_size),n.dn.dy+=s/l*(1+r.dn_size)):(n.dn.dx+=.01*i*(.5-Math.random()),n.dn.dy+=.01*o*(.5-Math.random())))}));for(t=0;t<O;t++)(n=w[t]).fixed||(n.dn_x=n.dn_x+.1*n.dn.dx*e.config.speed,n.dn_y=n.dn_y+.1*n.dn.dy*e.config.speed);return this.running&&this.iterCount<1&&(this.running=!1),this.running},this.go=function(){for(this.iterCount=this.config.maxIterations;this.running;)this.atomicGo();this.stop()},this.start=function(){if(!this.running){var t=this.sigInst.graph.nodes(),n=this.sigInst.renderers[e.config.rendererIndex].options.prefix;this.running=!0;for(var i=0;i<t.length;i++)t[i].dn_x=t[i][n+"x"],t[i].dn_y=t[i][n+"y"],t[i].dn_size=t[i][n+"size"],t[i].dn={dx:0,dy:0};r[e.sigInst.id].dispatchEvent("start"),this.go()}},this.stop=function(){var t=this.sigInst.graph.nodes();if(this.running=!1,this.easing)r[e.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(e.sigInst,{x:"dn_x",y:"dn_y"},{easing:e.easing,onComplete:function(){e.sigInst.refresh();for(var n=0;n<t.length;n++)t[n].dn=null,t[n].dn_x=null,t[n].dn_y=null;r[e.sigInst.id].dispatchEvent("stop")},duration:e.duration});else{for(var n=0;n<t.length;n++)t[n].x=t[n].dn_x,t[n].y=t[n].dn_y;for(this.sigInst.refresh(),n=0;n<t.length;n++)t[n].dn=null,t[n].dn_x=null,t[n].dn_y=null;r[e.sigInst.id].dispatchEvent("stop")}},this.kill=function(){this.sigInst=null,this.config=null,this.easing=null}}sigma.prototype.configNoverlap=function(e){var t=this;if(!e)throw new Error('Missing argument: "config"');return n[t.id]||(n[t.id]=new i,r[t.id]={},sigma.classes.dispatcher.extend(r[t.id]),t.bind("kill",(function(){n[t.id].kill(),n[t.id]=null,r[t.id]=null}))),n[t.id].init(t,e),r[t.id]},sigma.prototype.startNoverlap=function(e){return e&&this.configNoverlap(this,e),n[this.id].start(),r[this.id]},sigma.prototype.isNoverlapRunning=function(){return!!n[this.id]&&n[this.id].running}}).call(this)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=184)}({184:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.neo4j"),sigma.utils.pkg("sigma.utils"),sigma.neo4j.send=function(e,t,n,r,i){var o,a,s,l=sigma.utils.xhr();if(o=e,"object"==typeof e&&(o=e.url,a=e.user,s=e.password),!l)throw"XMLHttpRequest not supported, cannot load the file.";o+=t,l.open(n,o,!0),a&&s&&l.setRequestHeader("Authorization","Basic "+btoa(a+":"+s)),l.setRequestHeader("Accept","application/json"),l.setRequestHeader("Content-type","application/json; charset=utf-8"),l.onreadystatechange=function(){4===l.readyState&&i(JSON.parse(l.responseText))},l.send(r)},sigma.neo4j.cypher_parse=function(e,t){var n,r={nodes:[],edges:[]},i={},o={};for(n in e.results[0].data.forEach((function(e){e.graph.nodes.forEach((function(e){var n=t.node(e);n.id in i||(i[n.id]=n)})),e.graph.relationships.forEach((function(e){var n=t.edge(e);n.id in o||(o[n.id]=n)}))})),i)r.nodes.push(i[n]);for(n in o)r.edges.push(o[n]);return r},sigma.neo4j.cypher=function(e,t,n,r,i){var o,a;i||(i=sigma.neo4j.defaultProducers),o=JSON.stringify({statements:[{statement:t,resultDataContents:["graph"],includeStats:!1}]}),a=function(e){return function(t){var r;r=sigma.neo4j.cypher_parse(t,i),n instanceof sigma?(n.graph.clear(),n.graph.read(r)):"object"==typeof n?((n=new sigma(n)).graph.read(r),n.refresh()):"function"==typeof n&&(e=n,n=null),e&&e(n||r)}},sigma.neo4j.send(e,"/db/data/transaction/commit","POST",o,a(r))},sigma.neo4j.getLabels=function(e,t){sigma.neo4j.send(e,"/db/data/labels","GET",null,t)},sigma.neo4j.getTypes=function(e,t){sigma.neo4j.send(e,"/db/data/relationship/types","GET",null,t)},sigma.neo4j.defaultProducers={node:function(e){return{id:e.id,label:e.id,x:Math.random(),y:Math.random(),size:1,color:"#666666",neo4j_labels:e.labels,neo4j_data:e.properties}},edge:function(e){return{id:e.id,label:e.type,source:e.startNode,target:e.endNode,color:"#7D7C8E",neo4j_type:e.type,neo4j_data:e.properties}}}}).call(window)}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=142)}({142:function(e,t,n){"use strict";n.r(t),n(143),n(144),n(145),n(146),n(147),n(148),n(149)},143:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,n,r){if("object"!=typeof r)throw"sigma.renderers.webgl: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var i,o,a,s;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?n.embedObjects(r.settings):n,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(r,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],i=0,o=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;i<o;i++)s="function"==typeof a[i]?a[i]:sigma.captors[a[i]],this.captors.push(new s(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,n,r,i,o,a=this.graph,s=sigma.utils.extend(s,this.options),l=this.settings(s,"defaultEdgeType"),u=this.settings(s,"defaultNodeType");for(r in this.nodeFloatArrays)delete this.nodeFloatArrays[r];for(r in this.edgeFloatArrays)delete this.edgeFloatArrays[r];for(r in this.edgeIndicesArrays)delete this.edgeIndicesArrays[r];for(t=0,n=(e=a.edges()).length;t<n;t++)r=(i=e[t].type||l)&&sigma.webgl.edges[i]?i:"def",this.edgeFloatArrays[r]||(this.edgeFloatArrays[r]={edges:[]}),this.edgeFloatArrays[r].edges.push(e[t]);for(t=0,n=(e=a.nodes()).length;t<n;t++)r=(i=e[t].type||u)&&sigma.webgl.nodes[i]?i:"def",this.nodeFloatArrays[r]||(this.nodeFloatArrays[r]={nodes:[]}),this.nodeFloatArrays[r].nodes.push(e[t]);for(r in this.edgeFloatArrays){for(o=sigma.webgl.edges[r],e=this.edgeFloatArrays[r].edges,this.edgeFloatArrays[r].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,n=e.length;t<n;t++)e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||o.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[r].array,t*o.POINTS*o.ATTRIBUTES,s.prefix,this.settings);"function"==typeof o.computeIndices&&(this.edgeIndicesArrays[r]=o.computeIndices(this.edgeFloatArrays[r].array))}for(r in this.nodeFloatArrays)for(o=sigma.webgl.nodes[r],e=this.nodeFloatArrays[r].nodes,this.nodeFloatArrays[r].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,n=e.length;t<n;t++)this.nodeFloatArrays[r].array||(this.nodeFloatArrays[r].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES)),e[t].hidden||o.addNode(e[t],this.nodeFloatArrays[r].array,t*o.POINTS*o.ATTRIBUTES,s.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var n,r,i,o,a,s,l=this,u=(this.graph,this.contexts.nodes),c=this.contexts.edges,f=this.camera.getMatrix(),d=sigma.utils.extend(t,this.options),p=this.settings(d,"drawLabels"),h=this.settings(d,"drawEdges"),m=this.settings(d,"drawNodes");for(o in this.resize(!1),this.settings(d,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(h=!1),this.clear(),f=sigma.utils.matrices.multiply(f,sigma.utils.matrices.translation(this.width/2,this.height/2)),this.jobs)conrad.hasJob(o)&&conrad.killJob(o);if(h)if(this.settings(d,"batchEdgesDrawing"))(function(){var e,t,n,r,i,o,a,s,l,u;n="edges_"+this.conradId,u=this.settings(d,"webglEdgesBatchSize"),(e=Object.keys(this.edgeFloatArrays)).length&&(t=0,l=sigma.webgl.edges[e[t]],i=this.edgeFloatArrays[e[t]].array,s=this.edgeIndicesArrays[e[t]],a=0,o=Math.min(a+u*l.POINTS,i.length/l.ATTRIBUTES),r=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=l.initProgram(c)),a<o&&(c.useProgram(this.edgePrograms[e[t]]),l.render(c,this.edgePrograms[e[t]],i,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio"),start:a,count:o-a,indicesData:s})),o>=i.length/l.ATTRIBUTES&&t===e.length-1?(delete this.jobs[n],!1):(o>=i.length/l.ATTRIBUTES?(t++,i=this.edgeFloatArrays[e[t]].array,l=sigma.webgl.edges[e[t]],a=0,o=Math.min(a+u*l.POINTS,i.length/l.ATTRIBUTES)):(a=o,o=Math.min(a+u*l.POINTS,i.length/l.ATTRIBUTES)),!0)},this.jobs[n]=r,conrad.addJob(n,r.bind(this)))}).call(this);else for(o in this.edgeFloatArrays)s=sigma.webgl.edges[o],this.edgePrograms[o]||(this.edgePrograms[o]=s.initProgram(c)),this.edgeFloatArrays[o]&&(c.useProgram(this.edgePrograms[o]),s.render(c,this.edgePrograms[o],this.edgeFloatArrays[o].array,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[o]}));if(m)for(o in u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),u.enable(u.BLEND),this.nodeFloatArrays)s=sigma.webgl.nodes[o],this.nodePrograms[o]||(this.nodePrograms[o]=s.initProgram(u)),this.nodeFloatArrays[o]&&(u.useProgram(this.nodePrograms[o]),s.render(u,this.nodePrograms[o],this.nodeFloatArrays[o].array,{settings:this.settings,matrix:f,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio")}));if(p)for(n=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:n,edges:[],width:this.width,height:this.height}),a=function(e){return l.settings({prefix:l.camera.prefix},e)},r=0,i=n.length;r<i;r++)n[r].hidden||(sigma.canvas.labels[n[r].type||this.settings(d,"defaultNodeType")]||sigma.canvas.labels.def)(n[r],this.contexts.labels,a);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,n){var r=document.createElement(e),i=this;r.style.position="absolute",r.setAttribute("class","sigma-"+t),this.domElements[t]=r,this.container.appendChild(r),"canvas"===e.toLowerCase()&&(this.contexts[t]=r.getContext(n?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),n&&(r.addEventListener("webglcontextlost",(function(e){e.preventDefault()}),!1),r.addEventListener("webglcontextrestored",(function(e){i.render()}),!1)))},sigma.renderers.webgl.prototype.resize=function(t,n){var r,i=this.width,o=this.height,a=sigma.utils.getPixelRatio();if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),i!==this.width||o!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=n+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.contexts[r]&&this.contexts[r].scale?(this.domElements[r].setAttribute("width",t*a+"px"),this.domElements[r].setAttribute("height",n*a+"px"),1!==a&&this.contexts[r].scale(a,a)):(this.domElements[r].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[r].setAttribute("height",n*this.settings("webglOversamplingRatio")+"px")));for(r in this.contexts)this.contexts[r]&&this.contexts[r].viewport&&this.contexts[r].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();for(e in delete this.captors,this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}).call(this)}).call(window)},144:function(e,t){(function(){!function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,n=!!e.WebGLRenderingContext;if(n){t=document.createElement("canvas");try{n=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){n=!1}}sigma.renderers.def=n?sigma.renderers.webgl:sigma.renderers.canvas}(this)}).call(window)},145:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,n,r,i){var o=sigma.utils.floatColor(e.color||i("defaultNodeColor"));t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=o,t[n++]=0,t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=o,t[n++]=2*Math.PI/3,t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=o,t[n++]=4*Math.PI/3},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),s=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),u=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),f=e.getUniformLocation(t,"u_ratio"),d=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(u,r.width,r.height),e.uniform1f(f,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(d,r.scalingRatio),e.uniformMatrix3fv(c,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.enableVertexAttribArray(l),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,n])}}}()}).call(window)},146:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,n,r,i){t[n++]=e[r+"x"],t[n++]=e[r+"y"],t[n++]=e[r+"size"],t[n++]=sigma.utils.floatColor(e.color||i("defaultNodeColor"))},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),s=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),u=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_ratio"),f=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(l,r.width,r.height),e.uniform1f(c,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(f,r.scalingRatio),e.uniformMatrix3fv(u,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,n])}}}()}).call(window)},147:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,n,r,i,o,a){var s=(e[o+"size"]||1)/2,l=t[o+"x"],u=t[o+"y"],c=n[o+"x"],f=n[o+"y"],d=e.color;if(!d)switch(a("edgeColor")){case"source":d=t.color||a("defaultNodeColor");break;case"target":d=n.color||a("defaultNodeColor");break;default:d=a("defaultEdgeColor")}d=sigma.utils.floatColor(d),r[i++]=l,r[i++]=u,r[i++]=c,r[i++]=f,r[i++]=s,r[i++]=0,r[i++]=d,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=1,r[i++]=d,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=0,r[i++]=d,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=0,r[i++]=d,r[i++]=l,r[i++]=u,r[i++]=c,r[i++]=f,r[i++]=s,r[i++]=1,r[i++]=d,r[i++]=l,r[i++]=u,r[i++]=c,r[i++]=f,r[i++]=s,r[i++]=0,r[i++]=d},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position1"),s=e.getAttribLocation(t,"a_position2"),l=e.getAttribLocation(t,"a_thickness"),u=e.getAttribLocation(t,"a_minus"),c=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),d=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),h=e.getUniformLocation(t,"u_ratio"),m=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(c,r.width,r.height),e.uniform1f(h,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(m,r.scalingRatio),e.uniformMatrix3fv(f,!1,r.matrix),e.uniformMatrix2fv(d,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.enableVertexAttribArray(l),e.enableVertexAttribArray(u),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,n])}}}()}).call(window)},148:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,n,r,i,o,a){e[o+"size"];var s=t[o+"x"],l=t[o+"y"],u=n[o+"x"],c=n[o+"y"],f=e.color;if(!f)switch(a("edgeColor")){case"source":f=t.color||a("defaultNodeColor");break;case"target":f=n.color||a("defaultNodeColor");break;default:f=a("defaultEdgeColor")}f=sigma.utils.floatColor(f),r[i++]=s,r[i++]=l,r[i++]=f,r[i++]=u,r[i++]=c,r[i++]=f},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position"),s=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(s,r.width,r.height),e.uniformMatrix3fv(l,!1,r.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,n])}}}()}).call(window)},149:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,n,r,i,o,a){var s=(e[o+"size"]||1)/2,l=t[o+"x"],u=t[o+"y"],c=n[o+"x"],f=n[o+"y"],d=n[o+"size"],p=e.color;if(!p)switch(a("edgeColor")){case"source":p=t.color||a("defaultNodeColor");break;case"target":p=n.color||a("defaultNodeColor");break;default:p=a("defaultEdgeColor")}p=sigma.utils.floatColor(p),r[i++]=l,r[i++]=u,r[i++]=c,r[i++]=f,r[i++]=s,r[i++]=d,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=d,r[i++]=1,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=d,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=d,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=u,r[i++]=c,r[i++]=f,r[i++]=s,r[i++]=d,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=l,r[i++]=u,r[i++]=c,r[i++]=f,r[i++]=s,r[i++]=d,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=p,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=d,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=-1,r[i++]=p,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=d,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=p,r[i++]=c,r[i++]=f,r[i++]=l,r[i++]=u,r[i++]=s,r[i++]=d,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=1,r[i++]=p},render:function(e,t,n,r){var i,o=e.getAttribLocation(t,"a_pos1"),a=e.getAttribLocation(t,"a_pos2"),s=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_tSize"),u=e.getAttribLocation(t,"a_delay"),c=e.getAttribLocation(t,"a_minus"),f=e.getAttribLocation(t,"a_head"),d=e.getAttribLocation(t,"a_headPosition"),p=e.getAttribLocation(t,"a_color"),h=e.getUniformLocation(t,"u_resolution"),m=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_matrixHalfPi"),b=e.getUniformLocation(t,"u_matrixHalfPiMinus"),y=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_nodeRatio"),x=e.getUniformLocation(t,"u_arrowHead"),_=e.getUniformLocation(t,"u_scale");i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(h,r.width,r.height),e.uniform1f(y,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(v,Math.pow(r.ratio,r.settings("nodesPowRatio"))/r.ratio),e.uniform1f(x,5),e.uniform1f(_,r.scalingRatio),e.uniformMatrix3fv(m,!1,r.matrix),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(b,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.enableVertexAttribArray(l),e.enableVertexAttribArray(u),e.enableVertexAttribArray(c),e.enableVertexAttribArray(f),e.enableVertexAttribArray(d),e.enableVertexAttribArray(p),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(p,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,r.start||0,r.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),sigma.utils.loadProgram(e,[t,n])}}}()}).call(window)}})},function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=150)}({150:function(e,t,n){"use strict";n.r(t),n(151),n(152),n(153),n(154),n(155),n(156),n(157)},151:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,n,r){if("object"!=typeof r)throw"sigma.renderers.svg: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var i,o,a,s,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?n.embedObjects(r.settings):n,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],i=0,o=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;i<o;i++)s="function"==typeof a[i]?a[i]:sigma.captors[a[i]],this.captors.push(new s(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",(function(){l.resize()})),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{};var n,r,i,o,a,s,l,u,c,f={},d=this.graph,p=this.graph.nodes,h=(this.options.prefix,this.settings(t,"drawEdges")),m=this.settings(t,"drawNodes"),g=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(h=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),r=0,o=(n=this.nodesOnScreen).length;r<o;r++)f[n[r].id]=n[r];for(r=0,o=(n=d.edges()).length;r<o;r++)!f[(a=n[r]).source]&&!f[a.target]||a.hidden||p(a.source).hidden||p(a.target).hidden||this.edgesOnScreen.push(a);if(u=sigma.svg.nodes,c=sigma.svg.labels,m)for(r=0,o=(n=this.nodesOnScreen).length;r<o;r++)n[r].hidden||this.domElements.nodes[n[r].id]||(i=(u[n[r].type]||u.def).create(n[r],g),this.domElements.nodes[n[r].id]=i,this.domElements.groups.nodes.appendChild(i),i=(c[n[r].type]||c.def).create(n[r],g),this.domElements.labels[n[r].id]=i,this.domElements.groups.labels.appendChild(i));if(m)for(r=0,o=(n=this.nodesOnScreen).length;r<o;r++)n[r].hidden||((u[n[r].type]||u.def).update(n[r],this.domElements.nodes[n[r].id],g),(c[n[r].type]||c.def).update(n[r],this.domElements.labels[n[r].id],g));if(u=sigma.svg.edges,h)for(r=0,o=(n=this.edgesOnScreen).length;r<o;r++)this.domElements.edges[n[r].id]||(s=p(n[r].source),l=p(n[r].target),i=(u[n[r].type]||u.def).create(n[r],s,l,g),this.domElements.edges[n[r].id]=i,this.domElements.groups.edges.appendChild(i));if(h)for(r=0,o=(n=this.edgesOnScreen).length;r<o;r++)s=p(n[r].source),l=p(n[r].target),(u[n[r].type]||u.def).update(n[r],this.domElements.edges[n[r].id],s,l,g);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,n,r,i=document.createElementNS(this.settings("xmlns"),e),o=this.settings("classPrefix");i.style.position="absolute",i.setAttribute("class",o+"-svg"),i.setAttribute("xmlns",this.settings("xmlns")),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1");var a=document.createElement("canvas");a.setAttribute("class",o+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(i);var s=["edges","nodes","labels","hovers"];for(r=0,n=s.length;r<n;r++)(t=document.createElementNS(this.settings("xmlns"),"g")).setAttributeNS(null,"id",o+"-group-"+s[r]),t.setAttributeNS(null,"class",o+"-group"),this.domElements.groups[s[r]]=this.domElements.graph.appendChild(t);this.container.appendChild(a),this.measurementCanvas=a.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,n;for(n in e)t=e[n],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){var t,n=sigma.svg.hovers,r=this;this.bind("overNode",(function(i){var o=i.data.node,a=r.settings.embedObjects({prefix:e});if(a("enableHovering")){var s=(n[o.type]||n.def).create(o,r.domElements.nodes[o.id],r.measurementCanvas,a);r.domElements.hovers[o.id]=s,r.domElements.groups.hovers.appendChild(s),t=o}})),this.bind("outNode",(function(n){var i=n.data.node;r.settings.embedObjects({prefix:e})("enableHovering")&&(r.domElements.groups.hovers.removeChild(r.domElements.hovers[i.id]),t=null,delete r.domElements.hovers[i.id],r.domElements.groups.nodes.appendChild(r.domElements.nodes[i.id]))})),this.bind("render",(function(){if(t){var i=r.settings.embedObjects({prefix:e});r.domElements.groups.hovers.removeChild(r.domElements.hovers[t.id]),delete r.domElements.hovers[t.id];var o=(n[t.type]||n.def).create(t,r.domElements.nodes[t.id],r.measurementCanvas,i);r.domElements.hovers[t.id]=o,r.domElements.groups.hovers.appendChild(o)}}))},sigma.renderers.svg.prototype.resize=function(t,n){var r=this.width,i=this.height;return t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),r===this.width&&i===this.height||(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=n+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",1*t),this.domElements.graph.setAttribute("height",1*n))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}).call(this)}).call(window)},152:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}()}).call(window)},153:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){t("prefix");var n=document.createElementNS(t("xmlns"),"circle");return n.setAttributeNS(null,"data-node-id",e.id),n.setAttributeNS(null,"class",t("classPrefix")+"-node"),n.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),n},update:function(e,t,n){var r=n("prefix")||"";return t.setAttributeNS(null,"cx",e[r+"x"]),t.setAttributeNS(null,"cy",e[r+"y"]),t.setAttributeNS(null,"r",e[r+"size"]),n("freeStyle")||t.setAttributeNS(null,"fill",e.color||n("defaultNodeColor")),t.style.display="",this}}}()}).call(window)},154:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,n,r){var i=e.color,o=(r("prefix"),r("edgeColor")),a=r("defaultNodeColor"),s=r("defaultEdgeColor");if(!i)switch(o){case"source":i=t.color||a;break;case"target":i=n.color||a;break;default:i=s}var l=document.createElementNS(r("xmlns"),"line");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",r("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",i),l},update:function(e,t,n,r,i){var o=i("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[o+"size"]||1),t.setAttributeNS(null,"x1",n[o+"x"]),t.setAttributeNS(null,"y1",n[o+"y"]),t.setAttributeNS(null,"x2",r[o+"x"]),t.setAttributeNS(null,"y2",r[o+"y"]),t.style.display="",this}}}()}).call(window)},155:function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,n,r){var i=e.color,o=(r("prefix"),r("edgeColor")),a=r("defaultNodeColor"),s=r("defaultEdgeColor");if(!i)switch(o){case"source":i=t.color||a;break;case"target":i=n.color||a;break;default:i=s}var l=document.createElementNS(r("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",r("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",i),l},update:function(e,t,n,r,i){var o=i("prefix")||"";t.setAttributeNS(null,"stroke-width",e[o+"size"]||1);var a=(n[o+"x"]+r[o+"x"])/2+(r[o+"y"]-n[o+"y"])/4,s=(n[o+"y"]+r[o+"y"])/2+(n[o+"x"]-r[o+"x"])/4,l="M"+n[o+"x"]+","+n[o+"y"]+" Q"+a+","+s+" "+r[o+"x"]+","+r[o+"y"];return t.setAttributeNS(null,"d",l),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}()}).call(window)},156:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var n=e[(t("prefix")||"")+"size"],r=document.createElementNS(t("xmlns"),"text"),i="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*n,o="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return r.setAttributeNS(null,"data-label-target",e.id),r.setAttributeNS(null,"class",t("classPrefix")+"-label"),r.setAttributeNS(null,"font-size",i),r.setAttributeNS(null,"font-family",t("font")),r.setAttributeNS(null,"fill",o),r.innerHTML=e.label,r.textContent=e.label,r},update:function(e,t,n){var r=n("prefix")||"",i=e[r+"size"],o="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*i;if((n("forceLabels")||!(i<n("labelThreshold")))&&"string"==typeof e.label)return t.setAttributeNS(null,"x",Math.round(e[r+"x"]+i+3)),t.setAttributeNS(null,"y",Math.round(e[r+"y"]+o/3)),t.style.display="",this}}}).call(this)}).call(window)},157:function(e,t){(function(){(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,n,r){r("hoverFontStyle")||r("fontStyle");var i,o,a,s=r("prefix")||"",l=e[s+"size"],u="fixed"===r("labelSize")?r("defaultLabelSize"):r("labelSizeRatio")*l,c="node"===r("labelHoverColor")?e.color||r("defaultNodeColor"):r("defaultLabelHoverColor"),f=document.createElementNS(r("xmlns"),"g"),d=document.createElementNS(r("xmlns"),"rect"),p=document.createElementNS(r("xmlns"),"circle"),h=document.createElementNS(r("xmlns"),"text");return f.setAttributeNS(null,"class",r("classPrefix")+"-hover"),f.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(h.innerHTML=e.label,h.textContent=e.label,h.setAttributeNS(null,"class",r("classPrefix")+"-hover-label"),h.setAttributeNS(null,"font-size",u),h.setAttributeNS(null,"font-family",r("font")),h.setAttributeNS(null,"fill",c),h.setAttributeNS(null,"x",Math.round(e[s+"x"]+l+3)),h.setAttributeNS(null,"y",Math.round(e[s+"y"]+u/3)),Math.round(e[s+"x"]-u/2-2),Math.round(e[s+"y"]-u/2-2),i=Math.round(n.measureText(e.label).width+u/2+l+9),o=Math.round(u+4),a=Math.round(u/2+2),p.setAttributeNS(null,"class",r("classPrefix")+"-hover-area"),p.setAttributeNS(null,"fill","#fff"),p.setAttributeNS(null,"cx",e[s+"x"]),p.setAttributeNS(null,"cy",e[s+"y"]),p.setAttributeNS(null,"r",a),d.setAttributeNS(null,"class",r("classPrefix")+"-hover-area"),d.setAttributeNS(null,"fill","#fff"),d.setAttributeNS(null,"x",e[s+"x"]+a/4),d.setAttributeNS(null,"y",e[s+"y"]-a),d.setAttributeNS(null,"width",i),d.setAttributeNS(null,"height",o)),f.appendChild(p),f.appendChild(d),f.appendChild(h),f.appendChild(t),f}}}).call(this)}).call(window)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e={},children:t,onButtonClick:n},{navigateTo:i,activeViewId:o})=>{const a=e.viewId===o;return r.default.createElement("span",{onClick:()=>{"function"==typeof n&&n(),i(e)},className:`link ${a?"active":""}`},t)};a.contextTypes={navigateTo:i.default.func,activeViewId:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(61);function a(e){return e&&e.__esModule?e:{default:e}}const s=({to:e,children:t},{routeItemToUrl:n})=>{const i=n(e);return r.default.createElement(o.NavLink,{to:`${i}`,className:"link",activeClassName:"active"},t)};s.contextTypes={routeItemToUrl:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";e.exports={id:"deucalion",type:"peritext-template",name:"Deucalion template",renderingTypes:["screened"],generatorsTypes:["multi-page-html","single-page-html"],summaryType:"linear",options:{referencesScope:{type:"string",enum:["sections","edition"],default:"edition"},allowAnnotation:{type:"boolean",default:!1}},defaultBibType:"misc",defaultAdditionalHTML:'<link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600,700" rel="stylesheet">',defaultPlan:{type:"linear",summary:[{type:"landing",data:{customReadingLinks:[],animatedBackground:"none"}},{type:"sections",data:{customSummary:{active:!1,summary:[]},notesPosition:"sidenotes"}}]},summaryBlockDataTypes:{landing:{type:"object",unique:!0,properties:{customTitle:{type:"string"},customSubtitle:{type:"string"},customPresentationText:{type:"string",longString:!0},customNextLinkTitle:{type:"string"},customReadingLinks:{type:"array",items:{type:"object",properties:{linkTitle:{type:"string"},link:{type:"string"}}}},animatedBackground:{type:"string",description:"animated background to use",enum:["gradient","none"]}},default:{customReadingLinks:[]}},sections:{type:"object",properties:{customSummary:{type:"object",uiType:"customSectionsSummary",properties:{active:{type:"boolean"},summary:{type:"array",items:{type:"object",properties:{resourceId:{type:"string"},level:{type:"number"}}}}}},notesPosition:{type:"string",enum:["footnotes","sidenotes"]}},default:{customSummary:{active:!1,summary:[]},notesPosition:"sidenotes"}},resourceSections:{type:"object",default:{resourceTypes:["glossary"],customSummary:{active:!1,summary:[]},notesPosition:"footnotes",level:0},properties:{level:{type:"number",uiType:"select",enum:[0,1,2,3,4,5,6]},resourceTypes:{type:"array",items:{type:"string",enum:["bib","image","table","video","embed","webpage","glossary"]},uiType:"select",description:"which types of resources to show"},customSummary:{type:"object",uiType:"customResourcesSummary",properties:{active:{type:"boolean"},summary:{type:"array",items:{type:"object",properties:{resourceId:{type:"string"},level:{type:"number"}}}}}},hideEmptyResources:{type:"boolean",description:"whether to hide resources with no contents"},displayHeader:{type:"boolean",description:"whether to display resources headers in their views"},notesPosition:{type:"string",enum:["footnotes","sideNotes"]}}},customPage:{type:"object",properties:{title:{type:"string"},markdownContents:{type:"string",longString:!0},routeSlug:{type:"string"},customCssId:{type:"string",description:"custom id for this page"}}},resourcesMap:{type:"object",default:{showUncitedReferences:!1,showAllResources:!0},properties:{showAllResources:{type:"boolean"},minimumCooccurrenceNumber:{type:"number",enum:[1,2,3,4,5,6,7,8,9,10]},resourceTypes:{type:"array",items:{type:"string",enum:["bib","image","table","video","embed","webpage"]},uiType:"select",description:"which types of resources to show as references"},customTitle:{type:"string"},showUncitedReferences:{type:"boolean",description:"whether to show references which are not cited in the contents of the edition"}}},references:{type:"object",default:{showUncitedReferences:!1,showMentions:!0,resourceTypes:["bib"]},properties:{resourceTypes:{type:"array",items:{type:"string",enum:["bib","image","table","video","embed","webpage"]},uiType:"select",description:"which types of resources to show as references"},customTitle:{type:"string"},showUncitedReferences:{type:"boolean",description:"whether to show references which are not cited in the contents of the edition"},showMentions:{type:"boolean",description:"whether to show active mentions in the text for each reference"},sortingKey:{type:"string",description:"key to use for sorting references",enum:["authors","title","date","mentions"]},sortingAscending:{type:"boolean",description:"whether to sort references in ascending order"}}},glossary:{type:"object",default:{showDescription:!0,showMentions:!0,showUncited:!1,glossaryTypes:["person","place","event","notion","other"]},properties:{customTitle:{type:"string"},showDescriptions:{type:"boolean",description:"whether to show elements descriptions in the glossary"},showMentions:{type:"boolean",description:"whether to show active mentions in the text for each glossary element"},glossaryTypes:{type:"array",items:{type:"string",enum:["person","place","event","notion","other"]},uiType:"select",description:"which types of glossary items to show"},showUncited:{type:"boolean",description:"whether to show uncited glossary items"}}},places:{type:"object",default:{showUncited:!0,mapStyle:"openstreetmap"},properties:{customTitle:{type:"string"},showUncited:{type:"boolean",description:"whether to show uncited glossary items"},mapStyle:{type:"string",description:"map renderer tiles style",enum:["toner","watercolor","shading","openstreetmap","nolabel"]}}},events:{type:"object",default:{showUncited:!0},properties:{customTitle:{type:"string"},showUncited:{type:"boolean",description:"whether to show uncited glossary items"}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(910)),i=a(n(335)),o=a(n(927));function a(e){return e&&e.__esModule?e:{default:e}}const s={Edition:r.default};var l={meta:o.default,components:s,utils:{buildNav:r.buildNav,routeItemToUrl:r.routeItemToUrl,renderHeadFromRouteItem:r.renderHeadFromRouteItem,getAdditionalRoutes:r.getAdditionalRoutes},css:i.default};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.renderHeadFromRouteItem=t.routeItemToUrl=t.buildNav=t.getAdditionalRoutes=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=p(n(1)),o=n(61),a=p(n(911)),s=p(n(920)),l=p(n(332)),u=p(n(334)),c=p(n(922)),f=p(n(925)),d=p(n(926));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=new Function("try {return this===window;}catch(e){ return false;}")();t.getAdditionalRoutes=()=>[];const b=({edition:e={},locale:t={},translate:n})=>{const{data:r={}}=e,{plan:i={}}=r,{summary:o=[]}=i;return o.reduce((e,r)=>{switch(r.type){case"resourceSections":return[...e,{routeClass:"sectionsList",level:0,title:r.data.customTitle||n("Selection"),options:r.data,viewId:r.id}];default:const{data:i={}}=r;return[...e,{routeClass:r.type,level:0,title:i.customTitle||t[r.type]||r.type,options:r.data,viewId:r.id,routeParams:{}}]}},[])};t.buildNav=b;const y=(e,t)=>{if(void 0!==t&&0===t)return"/";switch(e.routeClass){case"landing":return"/";case"sectionsList":return`/list/${e.routeParams.elementId}`;case"resourcePage":const t=["previousResourceId","nextResourceId","notesPosition","displayHeader"].reduce((t,n)=>`${t}${e.routeParams[n]?`&${n}=${e.routeParams[n]}`:""}`,"");return`/resource?resourceId=${e.routeParams.resourceId}&mode=screen${t}`;default:return`/${e.routeClass}/${e.viewId}`}};t.routeItemToUrl=y;t.renderHeadFromRouteItem=({item:e,production:t,edition:n})=>{switch(e.routeClass){case"resourcePage":return r.default.createElement(l.default,{production:t,edition:n,section:t.resources[e.routeParams.resourceId]});default:return r.default.createElement(u.default,{production:t,edition:n,pageName:`${t.metadata.title} - ${e.title}`})}};class v extends r.Component{constructor(e){super(e),m(this,"getChildContext",()=>({LinkComponent:this.props.previewMode?f.default:d.default,activeViewId:this.state.viewId,activeViewParams:this.state.viewParams,contextualizers:this.props.contextualizers,edition:this.props.edition,translate:this.translate,navigateTo:this.navigateTo,routeItemToUrl:y,production:this.props.production,productionAssets:this.props.production.assets,usedDocument:this.props.usedDocument,getViewIdForSectionId:this.getViewIdForSectionId})),m(this,"translate",e=>{const{locale:t={}}=this.props;return t[e]||e}),m(this,"identifyView",(e,t,n)=>{switch(e){case"sections":return t.resourceId===n.resourceId;default:return!0}}),m(this,"getSummaryIndex",({viewId:e,routeClass:t,routeParams:n})=>{let r;return this.state.navSummary.find((t,n)=>{if(t.viewId===e)return r=n,!0}),r||this.state.navSummary.find((e,i)=>{if(e.routeClass===t&&this.identifyView(t,n,e.routeParams))return r=i,!0}),r}),m(this,"navigateTo",({routeClass:e,routeParams:t,viewNavSummaryIndex:n,viewId:r})=>{let i=n,o=r;i||(i=this.getSummaryIndex({routeClass:e,routeParams:t,viewId:r}),!o&&i&&(o=this.state.navSummary[i].viewId)),i||this.state.navSummary.some((t,n)=>{if(t.routeClass===e)return i=n,o=t.viewId,!0}),this.setState({viewClass:e,viewParams:t,viewNavSummaryIndex:i,viewId:o}),"function"==typeof this.props.onActiveViewChange&&this.props.onActiveViewChange({viewClass:e,viewId:o,viewParams:t})}),m(this,"getViewIdForSectionId",e=>{const{navSummary:t}=this.state,n=t.find(t=>"sections"===t.routeClass&&t.routeParams.resourceId===e);if(n)return n.viewId}),m(this,"renderView",({viewClass:e,viewParams:t,navSummary:n,viewNavSummaryIndex:i})=>{switch(e){case"resourcePage":return r.default.createElement(a.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,activeViewParams:t});case"sectionsList":return r.default.createElement(s.default,{production:this.props.production,edition:this.props.edition,activeViewClass:e,activeViewParams:t,parentBlockId:n[i].viewId,options:n[i].options});default:return r.default.createElement("div",null,r.default.createElement("p",null,"view id: ",e),r.default.createElement("pre",null,"route params: ",JSON.stringify(t,null,2)))}});const{production:t,edition:n,locale:i}=e,o=b({production:t,edition:n,locale:i,translate:this.translate}),l=o.length&&o[0];this.state={viewClass:e.viewClass||l&&l.routeClass||"landing",viewId:e.viewId||l&&l.viewId,viewParams:e.viewParams||l&&l.routeParams||{},viewNavSummaryIndex:0,navSummary:o}}componentWillReceiveProps(e){if(this.props.production!==e.production||this.props.contextualizers!==e.contextualizers||this.props.edition!==e.edition){const{production:t,edition:n,locale:r}=e,i=b({production:t,edition:n,locale:r,translate:this.translate}),o=i.length&&i[0],a=e.viewClass||o&&o.routeClass||"landing",s=e.viewId||o&&o.viewId,l=e.viewParams||o&&o.routeParams||{};this.setState({viewClass:a,viewParams:l,viewId:s,viewNavSummaryIndex:0,navSummary:i})}}render(){const{props:{production:e,edition:t,previewMode:n,useBrowserRouter:i=!1,preprocessedData:a},state:{viewId:s,viewClass:l,viewParams:u,navSummary:f,viewNavSummaryIndex:d},renderView:p}=this,m=i?o.BrowserRouter:o.HashRouter;if(n||!g)return r.default.createElement(c.default,{summary:f,production:e,edition:t,viewId:s,viewClass:l,viewParams:u,preprocessedData:a},p({viewId:s,viewClass:l,viewParams:u,navSummary:f,viewNavSummaryIndex:d}));let b=f;return b.length&&"landing"!==b[0].routeClass&&(b=[b[0],...b]),r.default.createElement(m,{basename:window.__urlBaseName},r.default.createElement(c.default,{summary:f,production:e,edition:t,viewParams:u},r.default.createElement(o.Switch,null,b.map((e,t)=>{const n=y(e,t),i=this.getSummaryIndex({routeClass:e.routeClass,routeParams:e.routeParams,viewId:e.viewId});return r.default.createElement(o.Route,{exact:!0,path:n,key:t,component:t=>{let n={};return t.location.search&&(n=t.location.search.slice(1).split("&").map(e=>e.split("=")).map(e=>({[e[0]]:e[1]})).reduce((e,t)=>h({},e,t),{})),p({viewClass:e.routeClass,viewParams:h({},e.routeParams,n),navSummary:f,viewNavSummaryIndex:i})}})}),r.default.createElement(o.Route,{path:"/resource",component:e=>{const t=e.history.location.search||"",n=e=>isNaN(+e)?"true"===e||"false"!==e&&e:+e,r=t.slice(1).split("&").map(e=>e.split("=")).reduce((e,t)=>h({},e,{[t[0]]:n(t[1])}),{}),{resourceId:i,previousResourceId:o,nextResourceId:a,notesPosition:s,displayHeader:l}=r;return p({viewClass:"resourcePage",viewParams:{resourceId:i,previousResourceId:o,nextResourceId:a,notesPosition:s,displayHeader:l},navSummary:f,viewNavSummaryIndex:d})}}),r.default.createElement(o.Route,{component:()=>r.default.createElement("div",{className:"main-contents-container"},r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",null,this.translate("Nothing to see here!")),r.default.createElement("h2",null,this.translate("There is not content to display for this URL."))))}))))}}t.default=v,m(v,"childContextTypes",{activeViewId:i.default.string,activeViewParams:i.default.object,navigateTo:i.default.func,LinkComponent:i.default.func,production:i.default.object,edition:i.default.object,contextualizers:i.default.object,productionAssets:i.default.object,routeItemToUrl:i.default.func,usedDocument:i.default.object,translate:i.default.func,getViewIdForSectionId:i.default.func}),m(v,"propTypes",{contextualizers:i.default.object,locale:i.default.object,onActiveViewIdChange:i.default.object,production:i.default.object})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=d(n(1)),o=n(4),a=n(181),s=d(n(912)),l=d(n(331)),u=d(n(332)),c=d(n(182)),f=d(n(333));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends r.Component{constructor(e){super(e),p(this,"getChildContext",()=>{const{production:e={},activeViewParams:t={}}=this.props;return{notes:e.resources[t.resourceId].data.contents.notes,onNoteContentPointerClick:this.onNoteContentPointerClick}}),p(this,"componentWillUpdate",(e,t,n)=>{this.props.activeViewParams.resourceId===e.activeViewParams.resourceId&&this.state.gui.openedContextualizationId&&!t.gui.openedContextualizationId&&n.asideVisible&&n.toggleAsideVisible()}),p(this,"onNoteContentPointerClick",e=>{this.context.scrollToElementId(e)}),p(this,"onNotePointerClick",e=>{this.context.scrollToElementId(`note-content-pointer-${e}`)}),p(this,"render",()=>{const{props:{production:e,edition:t={},activeViewClass:n,activeViewParams:i={}},context:{translate:d={}},onNotePointerClick:p}=this;if(!["sections","resourcePage"].includes(n))return null;const{previousResourceId:h,nextResourceId:m,notesPosition:g="footnotes",displayHeader:b=!1}=i,{data:y={}}=t,{publicationTitle:v=""}=y,x=v.length?v:e.metadata.title,_=e.resources[i.resourceId];if(!_)return;const w=h&&e.resources[h],O=m&&e.resources[m],E=_.data&&_.data.contents?_.data.contents.contents:{contents:{},notes:{},notesOrder:[]},k=_.metadata.authors||[],S=(0,a.convertSectionToCslRecord)(_,e,t);return r.default.createElement("section",{className:`main-contents-container section-player has-notes-position-${g}`},r.default.createElement(u.default,{production:e,section:_,edition:t,withHelmet:!0}),r.default.createElement(o.StructuredCOinS,{cslRecord:S}),r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",{className:"view-title section-title"},(0,o.getResourceTitle)(_)||d("untitled section")||"Section sans titre"),b&&r.default.createElement(f.default,{resource:_}),_.metadata.subtitle&&r.default.createElement("h2",{className:"subtitle"},_.metadata.subtitle),k.length>0&&r.default.createElement("h2",{className:"authors"},k&&k.length>0&&k.map((e,t)=>r.default.createElement("span",{key:t},e.given," ",e.family)).reduce((e,t)=>[e,", ",t])),r.default.createElement("div",{className:"main-contents-wrapper"},r.default.createElement(l.default,{raw:E}))),Object.keys(_.data.contents.notes).length>0?r.default.createElement(s.default,{pointers:this.noteContentPointers,notes:_.data.contents.notes,notesOrder:_.data.contents.notesOrder,notesPosition:g,title:d("Notes"),id:"notes-container",onNotePointerClick:p}):null,r.default.createElement("footer",{className:"navigation-footer"},r.default.createElement("ul",null,w&&r.default.createElement("li",{className:"prev"},r.default.createElement(c.default,{to:{routeClass:"resourcePage",viewId:"nope",routeParams:{resourceId:w.id,notesPosition:g,displayHeader:b}}},r.default.createElement("span",{className:"navigation-item"},r.default.createElement("span",{className:"navigation-item-arrow"},"←"),r.default.createElement("span",{className:"navigation-item-text"},(0,o.abbrevString)((0,o.getResourceTitle)(w),40))))),r.default.createElement("li",null,r.default.createElement("i",null,(0,o.abbrevString)(x,30)," - ",(0,o.abbrevString)((0,o.getResourceTitle)(_),40))),O&&r.default.createElement("li",{className:"next"},r.default.createElement(c.default,{to:{routeClass:"resourcePage",viewId:"nope",routeParams:{resourceId:O.id,notesPosition:g,displayHeader:b}}},r.default.createElement("span",{className:"navigation-item"},r.default.createElement("span",{className:"navigation-item-text"},(0,o.abbrevString)((0,o.getResourceTitle)(O),40)),r.default.createElement("span",{className:"navigation-item-arrow"},"→")))))))}),this.state={gui:{openedContextualizationId:void 0}}}}p(h,"contextTypes",{scrollToTop:i.default.func,dimensions:i.default.object}),h.childContextTypes={notes:i.default.object,onNoteContentPointerClick:i.default.func},h.contextTypes={dimensions:i.default.object,production:i.default.object,scrollTopRatio:i.default.number,scrollTopAbs:i.default.number,scrollRatio:i.default.number,scrollHeight:i.default.number,scrollToTop:i.default.func,scrollToElementId:i.default.func,contextualizers:i.default.object,translate:i.default.func,citations:i.default.object,usedDocument:i.default.object,rawCitations:i.default.object,scrollToContextualization:i.default.func,scrollToElement:i.default.func,toggleAsideVisible:i.default.func,asideVisible:i.default.bool};var m=h;t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=a(n(1)),o=a(n(913));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends r.Component{constructor(e){super(e),s(this,"componentDidUpdate",e=>{"sidenotes"!==this.props.notesPosition||this.props.notesPosition===e.notesPosition&&this.props.notes===e.notes||setTimeout(()=>{this.updatePositions()})}),s(this,"updatePositions",()=>{const e=this.props.notesOrder.map(e=>{const t=this.props.notes[e],n=(this.context.usedDocument||document).getElementById(`note-content-pointer-${t.id}`),r=function(e){let t=0,n=0;for(;e&&!e.classList.contains("callirhoe-layout")&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}}(n);return{order:t.finalOrder,noteId:t.id,component:n,offsetTop:r.top}}),t={};let n=0,r=0;for(let i=0;i<e.length;i++){const o=e[i],a=o.offsetTop;a>n+r?n=a:n+=r,r=this.notes[o.noteId].component.offsetHeight,t[o.noteId]={top:n,position:"absolute",left:0}}this.setState({notesStyles:t})}),this.notes={},this.state={notesStyles:{}}}componentDidMount(){"sidenotes"===this.props.notesPosition&&setTimeout(()=>{this.updatePositions()},2e3)}componentWillReceiveProps(e,t){"sidenotes"===e.notesPosition&&this.context.dimensions.width!==t.dimensions.width&&setTimeout(this.updatePositions)}render(){const{id:e,notes:t,notesOrder:n,onNotePointerClick:i,notesPosition:a,title:s}=this.props,{notesStyles:l}=this.state;return r.default.createElement("div",{className:`notes-container is-position-${a}`},r.default.createElement("h2",{className:"notes-title",id:e},s),r.default.createElement("ol",{className:"notes-list"},n.map((e,n)=>{const a=t[e];return r.default.createElement(o.default,{key:n,note:a,onNotePointerClick:i,ref:e=>{this.notes[a.id]=e},style:"sidenotes"===this.props.notesPosition?l[a.id]:{}})})))}}l.contextTypes={usedDocument:i.default.object,dimensions:i.default.object},l.propTypes={notes:i.default.object,notesOrder:i.default.array,notesPosition:i.default.oneOf(["sidenotes","footnotes"]),onNotePointerClick:i.default.func};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=a(n(1)),o=a(n(331));function a(e){return e&&e.__esModule?e:{default:e}}class s extends r.Component{constructor(e){var t,n,r;super(e),r=()=>({inNote:!0}),(n="getChildContext")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}render(){const{note:e,onNotePointerClick:t,style:n={}}=this.props;return r.default.createElement("li",{style:n,className:"note-item",ref:e=>{this.component=e},id:e.id},r.default.createElement("span",{onClick:n=>{n.stopPropagation(),t(e.id)},className:"link note-block-pointer",id:`note-block-pointer-${e.id}`},e.order),r.default.createElement(o.default,{raw:e.contents}))}}s.propTypes={note:i.default.object,onNotePointerClick:i.default.func,style:i.default.object},s.childContextTypes={inNote:i.default.bool};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e,children:t})=>r.default.createElement("a",{href:e,target:"blank"},t);a.propTypes={children:i.default.array,to:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=n(4),a=s(n(916));function s(e){return e&&e.__esModule?e:{default:e}}const l=({data:e},{production:t={},productionAssets:n={},openAsideContextualization:i,contextualizers:s,containerId:l,bindContextualizationElement:u,renderingMode:c="screened"})=>{const f=e.asset.id,d=t&&t.contextualizations&&t.contextualizations[f];if(!d)return null;const{visibility:p={paged:!0,screened:!0}}=d,h=t.contextualizers[d.contextualizerId],m=t.resources[d.sourceId],g=s[h.type],b=g&&g.Block,y=()=>{"function"==typeof i&&i(d.id)},v=e=>{"function"==typeof u&&u(d.id,e)};if(d&&b){return!p[c]?null:r.default.createElement("figure",{className:`block-contextualization-container ${h.type}`,style:{position:"relative"},id:`contextualization-${l}-${f}`,ref:v},r.default.createElement(b,{resource:m,contextualizer:h,contextualization:d,renderingMode:c,assets:n}),r.default.createElement("figcaption",{className:"figure-caption"},r.default.createElement("h4",{className:"figure-title"},"screened"===c?r.default.createElement("div",null,r.default.createElement("button",{className:"link mention-context-pointer",onClick:y},r.default.createElement("span",null,d.title||m.metadata.title))):r.default.createElement("span",null,d.title||m.metadata.title)),d.legend&&r.default.createElement("div",{className:"figure-legend"},r.default.createElement(a.default,{src:d.legend}))),r.default.createElement(o.StructuredCOinS,{resource:m}))}return null};l.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},l.contextTypes={production:i.default.object,dimensions:i.default.object,inNote:i.default.bool,contextualizers:i.default.object,productionAssets:i.default.object,containerId:i.default.string,openAsideContextualization:i.default.func,bindContextualizationElement:i.default.func,renderingMode:i.default.string};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(94));function o(e){return e&&e.__esModule?e:{default:e}}t.default=({src:e=""})=>r.default.createElement(i.default,{escapeHtml:!1,source:e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(4);function a(e){return e&&e.__esModule?e:{default:e}}const s=({data:e,children:t},{production:n,contextualizers:i,openedContextualizationId:a,openAsideContextualization:s,bindContextualizationElement:l,productionAssets:u={}})=>{const c=e.asset&&e.asset.id;if(!c||!n)return null;const f=n.contextualizations[c];if(!f)return null;const d=n.contextualizers[f.contextualizerId],p=n.resources[f.sourceId],h=i[d.type],m=h&&h.Inline,g=()=>{"glossary"!==p.metadata.type&&"bib"!==p.metadata.type||"function"==typeof s&&s(f.id)},b=c===a,y=e=>{"function"==typeof l&&l(f.id,e)};return d&&m?r.default.createElement("span",{className:`InlineAssetWrapper inline-${d.type}${b?" active":""} inline-contextualization-container ${d.type}`,id:c,ref:y,onClick:g},"glossary"!==p.metadata.type&&r.default.createElement(o.StructuredCOinS,{resource:p}),r.default.createElement(m,{contextualization:f,contextualizer:d,assets:u,resource:p,renderingMode:"screened"},t)):null};s.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},s.contextTypes={production:i.default.object,contextualizers:i.default.object,onAssetContextRequest:i.default.func,openedContextualizationId:i.default.string,openAsideContextualization:i.default.func,bindContextualizationElement:i.default.func,productionAssets:i.default.object};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e,noteId:t=""},n)=>{const i=n.notes,o=()=>"function"==typeof n.onNoteContentPointerClick&&n.onNoteContentPointerClick(t);if(i){const n=i[t];return n?r.default.createElement("sup",{onClick:o,className:"note-content-pointer link",id:`note-content-pointer-${t}`},n.order,e):null}return null};a.propTypes={children:i.default.array,noteId:i.default.string},a.contextTypes={notes:i.default.object,onNoteContentPointerClick:i.default.func};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=a(n(182));function a(e){return e&&e.__esModule?e:{default:e}}const s=({children:e,sectionId:t},{getViewIdForSectionId:n})=>r.default.createElement(o.default,{to:{routeClass:"sections",viewId:n(t),routeParams:{sectionId:t}}},e);s.contextTypes={getViewIdForSectionId:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=n(4),o=a(n(921));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=({production:e,parentBlockId:t,options:n})=>{const{notesPosition:a,displayThumbnail:l=!1,displayHeader:u=!1}=n,c=(0,i.buildResourceSectionsSummary)({production:e,options:n});return r.default.createElement("section",{className:"main-contents-container sections-list"},r.default.createElement("ul",null,c.map(({resourceId:n},i)=>{const f=i<c.length-1?c[i+1].resourceId:void 0,d=i>1?c[i-1].resourceId:void 0,p=e.resources[n];return r.default.createElement(o.default,s({key:i},{resource:p,previousResourceId:d,nextResourceId:f,displayHeader:u,parentBlockId:t,notesPosition:a,displayThumbnail:l}))})))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(2)),i=l(n(182)),o=n(4),a=n(181),s=l(n(333));function l(e){return e&&e.__esModule?e:{default:e}}var u=({resource:e,previousResourceId:t,nextResourceId:n,displayHeader:l,parentBlockId:u,notesPosition:c,displayThumbnail:f})=>{const{id:d}=e;return r.default.createElement("li",{className:"resource-card"},r.default.createElement(i.default,{to:{routeClass:"resourcePage",routeParams:{resourceId:d,previousResourceId:t,nextResourceId:n,notesPosition:c,displayHeader:l,parentBlockId:u}}},f&&r.default.createElement(s.default,{resource:e}),r.default.createElement("h2",{className:"resource-card-title"},(0,a.ellipse)((0,o.getResourceTitle)(e),100)),e.metadata.authors&&r.default.createElement("p",null,e.metadata.authors.map(({family:e,given:t},n)=>r.default.createElement("span",{key:n},t," ",e)).reduce((e,t)=>[...e,", ",t],[]))))};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=h(n(1)),o=n(341),a=n(311),s=h(n(923)),l=n(4),u=n(40),c=h(n(334)),f=n(181),d=h(n(924)),p=h(n(335));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=new Function("try {return this===window;}catch(e){ return false;}")();let y;b&&(y=n(174));const v={TABLET_MIN_WIDTH:768,DESKTOP_MIN_WIDTH:1224},x=(e,t)=>{let n=0,r=e;do{n+=r.offsetTop,r=r.offsetParent}while(void 0!==r&&r!==t);return n};class _ extends r.Component{constructor(e,t){super(e),g(this,"getChildContext",()=>{return{dimensions:m({},this.props.size,{width:this.props.size&&this.props.size.width||b&&window.innerWidth,height:this.props.size&&this.props.size.height||b&&window.innerHeight}),scrollToElement:this.scrollToElement,scrollToElementId:this.scrollToElementId,scrollToTop:this.scrollTo,scrollTop:this.state.gui.scrollTop,scrollTopAbs:this.state.gui.scrollTopAbs,scrollRatio:this.state.gui.scrollRatio,scrollTopRatio:this.state.gui.scrollTopRatio,scrollHeight:this.globalScrollbar&&this.globalScrollbar.getScrollHeight(),rawCitations:this.state.citations,bindContextualizationElement:this.bindContextualizationElement,scrollToContextualization:this.scrollToContextualization,toggleAsideVisible:this.toggleAsideVisible,asideVisible:this.state.gui.asideVisible,preprocessedData:this.props.preprocessedData,citationStyle:this.props.edition.data.citationStyle.data,citationLocale:this.props.edition.data.citationLocale.data}}),g(this,"componentDidMount",()=>{this.updateConstants(this.props)}),g(this,"componentWillReceiveProps",e=>{this.props.production!==e.production&&this.updateConstants(e),this.props.viewId!==e.viewId&&(this.state.gui.asideVisible&&setTimeout(()=>this.toggleAsideVisible()),this.state.gui.indexOpen&&e.size.width<v.DESKTOP_MIN_WIDTH&&this.toggleIndex())}),g(this,"componentWillUpdate",(e,t,n)=>{this.context.production&&n.production&&this.context.production.id!==n.production.id&&this.updateConstants(e,n)}),g(this,"updateConstants",(e,t)=>{this.setState({finalCss:this.updateStyles(e,t),citations:this.buildCitations(e)})}),g(this,"bindContextualizationElement",(e,t)=>{this.contextualizationElements[e]=t}),g(this,"buildCitations",e=>{const{production:t,edition:n,preprocessedData:r}=e;return r&&r.global&&r.global.citations||(0,l.buildCitations)({production:t,edition:n},!0)}),g(this,"scrollToElement",(e,t=!0,n=!0)=>{if(e&&b&&this.globalScrollbar){const r=this.globalScrollbar.container;let i=x(e,r);i=t&&this.props.size?i-this.props.size.height/2:i,this.scrollTo(i,n)}}),g(this,"scrollToContextualization",(e,t=!0)=>{const n=this.contextualizationElements[e];this.scrollToElement(n,t)}),g(this,"scrollToElementId",(e,t=!0)=>{const n=(this.context.usedDocument||document).getElementById(e);this.scrollToElement(n,t)}),g(this,"scrollTo",(e,t=!0)=>{if(!t)return void(this.globalScrollbar&&this.globalScrollbar.scrollTop(e));const n=this.globalScrollbar;if(!n)return void setTimeout(()=>{this.globalScrollbar&&this.scrollTo(e)});const r=n.getScrollTop(),i=n.getScrollHeight();let a=e>i?i:e;const s=(a=a<0?0:a)-r;for(let e=0;e<=1;e+=.1){const t=(0,o.easeCubic)(e);setTimeout(()=>{this.globalScrollbar.scrollTop(r+s*t)},1e3*e)}}),g(this,"onScrollUpdate",e=>{const t=e.top,n=e.scrollTop,r=e.clientHeight/e.scrollHeight,i=e.scrollTop/e.scrollHeight;let o={};t!==this.state.gui.scrollTop&&(o=m({},o,{gui:m({},this.state.gui,{inTop:0===t,scrollTop:t,scrollTopAbs:n,scrollRatio:r,scrollTopRatio:i,scrollHeight:e.scrollHeight})})),Object.keys(o).length&&this.setState(o)}),g(this,"toggleIndex",()=>{this.setState({gui:m({},this.state.gui,{indexOpen:!this.state.gui.indexOpen})})}),g(this,"toggleAsideVisible",()=>{this.setState({gui:m({},this.state.gui,{asideVisible:!this.state.gui.asideVisible})})}),g(this,"updateStyles",(e={},t={})=>{const{edition:{data:n={}}}=e,{contextualizers:r={}}=t,{style:{css:i="",mode:o="merge"}={css:""}}=n,a=Object.keys(r).map(e=>r[e]&&r[e].defaultCss||"").join("\n");return"merge"===o?[p.default,a,i].join("\n"):[a,i].join("\n")}),g(this,"render",()=>{const{props:{children:e,production:t,edition:n={},summary:i=[],viewClass:o,viewParams:u={}},context:{},state:{finalCss:p,gui:{indexOpen:h,inTop:m,asideVisible:g},citations:y},toggleIndex:v,onScrollUpdate:x}=this,{data:_={}}=n,{additionalHTML:w=""}=_,O=n.data.publicationTitle&&n.data.publicationTitle.length?n.data.publicationTitle:t.metadata.title,E=n.data.publicationSubtitle&&n.data.publicationSubtitle.length?n.data.publicationSubtitle:t.metadata.subtitle,k=t.metadata.abstract,S=n.data.authors&&n.data.authors.length?n.data.authors:t.metadata.authors,T=(0,f.convertEditionToCslRecord)(t,n),j=u.parentBlockId?i.find(e=>e.viewId===u.parentBlockId):i.length>0&&i[0],A=j&&"landing"!==j.routeClass&&j.title;return r.default.createElement(s.default,{citations:y},r.default.createElement(c.default,{production:t,edition:n,withHelmet:!0}),b?r.default.createElement("section",{className:`callirhoe-layout has-view-class-${o} ${g?"has-aside-visible":""} ${h?"has-index-open":""}`},r.default.createElement("section",{className:"main-container"},r.default.createElement(a.Scrollbars,{ref:e=>{this.globalScrollbar=e},autoHide:!0,onUpdate:x,universal:!0},r.default.createElement(l.StructuredCOinS,{cslRecord:T}),e)),r.default.createElement(d.default,{indexOpen:h,toggleIndex:v,locationTitle:A,inTop:m,summary:i,title:O,subtitle:E,description:k,authors:S})):r.default.createElement("section",{className:`callirhoe-layout has-view-class-${o} ${g?"has-aside-visible":""} ${h?"has-index-open":""}`},r.default.createElement("section",{className:"main-container"},e),r.default.createElement(d.default,{indexOpen:h,toggleIndex:v,locationTitle:A,inTop:m,edition:n,summary:i,title:O})),r.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:p}}),r.default.createElement("div",{dangerouslySetInnerHTML:{__html:w}}))}),this.state={gui:{indexOpen:!1},citations:this.buildCitations(e),finalCss:this.updateStyles(e,t)},this.contextualizationElements={},this.onScrollUpdate=(0,u.debounce)(this.onScrollUpdate,1e3)}}_.contextTypes={production:i.default.object,edition:i.default.object,usedDocument:i.default.object,contextualizers:i.default.object},_.childContextTypes={dimensions:i.default.object,scrollToElementId:i.default.func,scrollToElement:i.default.func,scrollToTop:i.default.func,scrollTop:i.default.number,scrollTopAbs:i.default.number,scrollRatio:i.default.number,scrollTopRatio:i.default.number,scrollHeight:i.default.number,rawCitations:i.default.object,bindContextualizationElement:i.default.func,scrollToContextualization:i.default.func,asideVisible:i.default.bool,toggleAsideVisible:i.default.func,preprocessedData:i.default.object,citationStyle:i.default.string,citationLocale:i.default.string};var w=b&&y?y({monitorHeight:!0,monitorWidth:!0,monitorPosition:!0})(_):_;t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(1))&&r.__esModule?r:{default:r};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),a(this,"getChildContext",()=>({citations:this.props.citations?this.props.citations.citationComponents:{}})),a(this,"render",()=>{const{children:e}=this.props;return e})}}t.default=s,a(s,"childContextTypes",{citations:o.default.object})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(4);function a(e){return e&&e.__esModule?e:{default:e}}const s=({summary:e=[],toggleIndex:t,locationTitle:n,title:i,subtitle:a,description:s,authors:l},{LinkComponent:u})=>{const c=e.filter(e=>"landing"!==e.routeClass);let f=e.find(e=>"landing"===e.routeClass);!f&&e.length&&(f=e[0]);const d=()=>t(!1);return r.default.createElement("nav",{className:"nav"},r.default.createElement("div",{className:"nav-header"},r.default.createElement("button",{className:"nav-toggle",onClick:t},r.default.createElement("span",{className:"nav-toggle-symbol"},"✚")),r.default.createElement("h1",{className:"title"},f?r.default.createElement(u,{onClick:d,to:f},r.default.createElement("strong",{className:"hero-title"},(0,o.abbrevString)(i))):i," ",n&&r.default.createElement("em",{onClick:t,className:"location-title"},(0,o.abbrevString)(n,60)))),r.default.createElement("div",{className:"additional-header"},a&&r.default.createElement("h2",{className:"subtitle"},a),l&&l.length?r.default.createElement("h3",{className:"authors"},l.map(({given:e,family:t},n)=>r.default.createElement("span",{key:n},e," ",t))):null,s&&r.default.createElement("p",{className:"description"},s)),r.default.createElement("div",{className:"nav-content-container"},r.default.createElement("ul",null,c.map((e,t)=>r.default.createElement("li",{key:t,className:`nav-item level-${e.level}`},r.default.createElement(u,{onClick:d,to:e},e.title))))))};s.contextTypes={LinkComponent:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e={},children:t,onButtonClick:n,onClick:i},{navigateTo:o,activeViewId:a})=>{const s=e.viewId===a;return r.default.createElement("span",{onClick:()=>{"function"==typeof n&&n(),"function"==typeof i&&i(),o(e)},className:`link ${s?"active":""}`},t)};a.contextTypes={navigateTo:i.default.func,activeViewId:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(61);function a(e){return e&&e.__esModule?e:{default:e}}const s=({to:e,children:t},{routeItemToUrl:n})=>{const i=n(e);return r.default.createElement(o.NavLink,{to:`${i}`,className:"link",activeClassName:"active"},t)};s.contextTypes={routeItemToUrl:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";e.exports={id:"callirhoe",type:"peritext-template",name:"Deucalion template",renderingTypes:["screened"],generatorsTypes:["multi-page-html","single-page-html"],summaryType:"linear",options:{referencesScope:{type:"string",enum:["sections","edition"],default:"edition"},allowAnnotation:{type:"boolean",default:!1}},defaultBibType:"misc",defaultAdditionalHTML:'<link href="https://fonts.googleapis.com/css?family=Work+Sans&display=swap" rel="stylesheet">',defaultPlan:{type:"linear",summary:[{type:"resourceSections",id:"first",data:{customSummary:{active:!1,summary:[]},resourceTypes:["section"],notesPosition:"footnotes"}}]},summaryBlockDataTypes:{resourceSections:{type:"object",default:{resourceTypes:["glossary"],customSummary:{active:!1,summary:[]},notesPosition:"footnotes",displayHeader:!0,displayThumbnail:!1},properties:{customTitle:{type:"string"},resourceTypes:{type:"array",items:{type:"string",enum:["section","bib","image","table","video","embed","webpage","glossary"]},uiType:"select",description:"which types of resources to show"},hideEmptyResources:{type:"boolean",description:"whether to hide resources with no contents"},displayHeader:{type:"boolean",description:"whether to display resources headers in their views"},displayThumbnail:{type:"boolean",description:"whether to display resources previews in lists"},customSummary:{type:"object",uiType:"customResourcesSummary",properties:{active:{type:"boolean"},summary:{type:"array",items:{type:"object",properties:{resourceId:{type:"string"},level:{type:"number"}}}}}},notesPosition:{type:"string",enum:["footnotes","sideNotes"]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(929)),i=a(n(337)),o=a(n(947));function a(e){return e&&e.__esModule?e:{default:e}}const s={Edition:r.default};var l={meta:o.default,components:s,utils:{buildNav:r.buildNav,routeItemToUrl:r.routeItemToUrl,renderHeadFromRouteItem:r.renderHeadFromRouteItem,getAdditionalRoutes:r.getAdditionalRoutes},css:i.default};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.renderHeadFromRouteItem=t.routeItemToUrl=t.buildNav=t.getAdditionalRoutes=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=f(n(1)),o=n(61),a=f(n(930)),s=f(n(336)),l=f(n(931)),u=f(n(945)),c=f(n(946));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=new Function("try {return this===window;}catch(e){ return false;}")();t.getAdditionalRoutes=()=>[{routeParams:{}}];const h=()=>[];t.buildNav=h;const m=(e,t)=>{if(void 0!==t&&0===t)return"/";return e.routeClass,`?${Object.keys(e.routeParams).reduce((t,n)=>`${t}${e.routeParams[n]?`&${n}=${e.routeParams[n]}`:""}`,"")}`};t.routeItemToUrl=m;t.renderHeadFromRouteItem=({item:e,production:t,edition:n})=>{switch(e.routeClass){case"resourcePage":return r.default.createElement(a.default,{production:t,edition:n,section:t.resources[e.routeParams.resourceId]});default:return r.default.createElement(s.default,{production:t,edition:n,pageName:`${t.metadata.title} - ${e.title}`})}};class g extends r.Component{constructor(e){super(e),d(this,"getChildContext",()=>({LinkComponent:this.props.previewMode?u.default:c.default,activeViewParams:this.state.viewParams,contextualizers:this.props.contextualizers,edition:this.props.edition,translate:this.translate,navigateTo:this.navigateTo,routeItemToUrl:m,production:this.props.production,productionAssets:this.props.production.assets,usedDocument:this.props.usedDocument,getViewIdForSectionId:this.getViewIdForSectionId})),d(this,"translate",e=>{const{locale:t={}}=this.props;return t[e]||e}),d(this,"identifyView",(e,t,n)=>{switch(e){case"sections":return t.resourceId===n.resourceId;default:return!0}}),d(this,"getSummaryIndex",({viewId:e,routeClass:t,routeParams:n})=>{let r;return this.state.navSummary.find((t,n)=>{if(t.viewId===e)return r=n,!0}),r||this.state.navSummary.find((e,i)=>{if(e.routeClass===t&&this.identifyView(t,n,e.routeParams))return r=i,!0}),r}),d(this,"navigateTo",({routeClass:e,routeParams:t,viewNavSummaryIndex:n,viewId:r})=>{let i=n,o=r;i||(i=this.getSummaryIndex({routeClass:e,routeParams:t,viewId:r}),!o&&i&&(o=this.state.navSummary[i].viewId)),i||this.state.navSummary.some((t,n)=>{if(t.routeClass===e)return i=n,o=t.viewId,!0}),this.setState({viewClass:e,viewParams:t,viewNavSummaryIndex:i,viewId:o}),"function"==typeof this.props.onActiveViewChange&&this.props.onActiveViewChange({viewClass:e,viewId:o,viewParams:t})}),d(this,"getViewIdForSectionId",e=>{const{navSummary:t}=this.state,n=t.find(t=>"sections"===t.routeClass&&t.routeParams.resourceId===e);if(n)return n.viewId});const{production:t,edition:n,locale:r}=e,i=h({production:t,edition:n,locale:r,translate:this.translate}),o=i.length&&i[0];this.state={viewClass:e.viewClass||o&&o.routeClass||"landing",viewId:e.viewId||o&&o.viewId,viewParams:e.viewParams||o&&o.routeParams||{},viewNavSummaryIndex:0,navSummary:i}}componentWillReceiveProps(e){if(this.props.production!==e.production||this.props.contextualizers!==e.contextualizers||this.props.edition!==e.edition){const{production:t,edition:n,locale:r}=e,i=h({production:t,edition:n,locale:r,translate:this.translate}),o=i.length&&i[0],a=e.viewClass||o&&o.routeClass||"landing",s=e.viewId||o&&o.viewId,l=e.viewParams||o&&o.routeParams||{};this.setState({viewClass:a,viewParams:l,viewId:s,viewNavSummaryIndex:0,navSummary:i})}}render(){const{props:{production:e,edition:t,previewMode:n,useBrowserRouter:i=!1,preprocessedData:a},state:{viewId:s,viewClass:u,viewParams:c,navSummary:f}}=this,h=i?o.BrowserRouter:o.HashRouter;if(n||!p)return r.default.createElement(l.default,{summary:f,production:e,edition:t,viewId:s,viewClass:u,viewParams:c,translate:this.translate,preprocessedData:a});let m=f;return m.length&&"landing"!==m[0].routeClass&&(m=[m[0],...m]),r.default.createElement(h,{basename:window.__urlBaseName},r.default.createElement(o.Switch,null,r.default.createElement(o.Route,{path:"/",component:n=>{let i={};return n.location.search&&(i=n.location.search.slice(1).split("&").map(e=>e.split("=")).map(e=>({[e[0]]:e[1]})).reduce((e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e})({},e,t),{})),r.default.createElement(l.default,{summary:f,production:e,edition:t,translate:this.translate,viewClass:u,viewParams:i,preprocessedData:a})}}),r.default.createElement(o.Route,{component:()=>r.default.createElement("div",{className:"main-contents-container"},r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",null,this.translate("Nothing to see here!")),r.default.createElement("h2",null,this.translate("There is not content to display for this URL."))))})))}}t.default=g,d(g,"childContextTypes",{activeViewParams:i.default.object,navigateTo:i.default.func,LinkComponent:i.default.func,production:i.default.object,edition:i.default.object,contextualizers:i.default.object,productionAssets:i.default.object,routeItemToUrl:i.default.func,usedDocument:i.default.object,translate:i.default.func,getViewIdForSectionId:i.default.func}),d(g,"propTypes",{contextualizers:i.default.object,locale:i.default.object,onActiveViewIdChange:i.default.object,production:i.default.object})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e})=>r.default.createElement("head",null,e);var s=({section:e,production:t,edition:n,withHelmet:o=!1})=>{const s=`${n.data.publicationTitle&&n.data.publicationTitle.length?n.data.publicationTitle:t.metadata.title} - ${e.metadata.title}`,l=e.metadata.authors&&e.metadata.authors.length?e.metadata.authors:t.metadata.authors||[],u=e.metadata.tags&&e.metadata.tags.length?e.metadata.tags:t.metadata.tags||[],c=e.metadata.description&&e.metadata.description.length?e.metadata.description:t.metadata.description,f=l.map(e=>`${e.given} ${e.family}`).join(", "),d=o?i.default:a;return r.default.createElement(d,null,r.default.createElement("title",null,s),r.default.createElement("meta",{name:"generator",content:"peritext"}),r.default.createElement("meta",{name:"DC.Title",lang:"fr",content:s}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),l.map((e,t)=>r.default.createElement("meta",{key:`${e.family}, ${e.given}-${t}`,name:"DC.creator",content:`${e.family}, ${e.given}`})),r.default.createElement("meta",{name:"DC.issued",lang:"fr",content:n.metadata.lastUpdateAt&&new Date(n.metadata.lastUpdateAt).toISOString()}),r.default.createElement("meta",{name:"DC.Date.created",schema:"W3CDTF",content:(new Date).toISOString()}),r.default.createElement("meta",{name:"author",content:f}),r.default.createElement("meta",{name:"keywords",content:u.join(",")}),r.default.createElement("meta",{name:"description",content:c}),r.default.createElement("meta",{name:"viewport",content:"user-scalable=no,width=device-width"}),r.default.createElement("meta",{name:"twitter:card",value:"summary"}),r.default.createElement("meta",{name:"twitter:site",content:""}),r.default.createElement("meta",{name:"twitter:title",content:s}),r.default.createElement("meta",{name:"twitter:description",content:c}),r.default.createElement("meta",{itemProp:"name",content:s}),r.default.createElement("meta",{itemProp:"description",content:c}),r.default.createElement("meta",{property:"og:title",content:s}),r.default.createElement("meta",{property:"og:type",content:"website"}),r.default.createElement("meta",{property:"og:url",content:""}),r.default.createElement("meta",{property:"og:description",content:c}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=d(n(1)),o=n(4),a=d(n(336)),s=n(183),l=d(n(932)),u=d(n(337)),c=d(n(933)),f=d(n(944));function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=new Function("try {return this===window;}catch(e){ return false;}")();let g;m&&(g=n(174));class b extends r.Component{constructor(e,t){super(e),h(this,"getChildContext",()=>{return{dimensions:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},this.props.size,{width:this.props.size&&this.props.size.width||m&&window.innerWidth,height:this.props.size&&this.props.size.height||m&&window.innerHeight}),preprocessedData:this.props.preprocessedData,citationStyle:this.props.edition.data.citationStyle.data,citationLocale:this.props.edition.data.citationLocale.data,viewParams:this.props.viewParams,rawCitations:this.state.citations,bindContextualizationElement:this.bindContextualizationElement,scrollToContextualization:this.scrollToContextualization}}),h(this,"componentDidMount",()=>{this.updateConstants(this.props,this.context)}),h(this,"componentWillReceiveProps",(e,t)=>{this.props.production!==e.production&&this.updateConstants(e,t)}),h(this,"componentWillUpdate",(e,t,n)=>{this.context.production&&n.production&&this.context.production.id!==n.production.id&&this.updateConstants(e,n)}),h(this,"updateConstants",(e,t)=>{this.setState({finalCss:this.updateStyles(e,t),citations:this.buildCitations(e)})}),h(this,"bindContextualizationElement",(e,t)=>{this.contextualizationElements[e]=t}),h(this,"buildCitations",e=>{const{production:t,edition:n,preprocessedData:r}=e;return r&&r.global&&r.global.citations||(0,o.buildCitations)({production:t,edition:n},!0)}),h(this,"updateStyles",(e,t)=>{const{edition:{data:n={}}}=e,{contextualizers:r={}}=t,{style:{css:i="",mode:o="merge"}={css:""}}=n,a=Object.keys(r).map(e=>r[e]&&r[e].defaultCss||"").join("\n");return"merge"===o?[u.default,a,i].join("\n"):[a,i].join("\n")}),h(this,"render",()=>{const{props:{children:e,production:t,edition:n={},summary:i=[],viewParams:u={},viewId:d,viewClass:h,translate:m},context:{},state:{finalCss:g,gui:{inTop:b},citations:y}}=this,{data:v={}}=n,{additionalHTML:x=""}=v,_=n.data.publicationTitle&&n.data.publicationTitle.length?n.data.publicationTitle:t.metadata.title,w=n.data.publicationSubtitle&&n.data.publicationSubtitle.length?n.data.publicationSubtitle:t.metadata.subtitle,O=t.metadata.abstract,E=n.data.authors&&n.data.authors.length?n.data.authors:t.metadata.authors,k=(0,s.convertEditionToCslRecord)(t,n),S=d&&i.find(e=>e.viewId===d),T=S&&"landing"!==S.routeClass&&S.title,{plan:j={}}=v,{summary:A=[]}=j,{resourceId:P,elementId:C,selectedResourceId:N,selectedContextualizationId:M}=u;return r.default.createElement(f.default,{citations:y},r.default.createElement(a.default,{production:t,edition:n,withHelmet:!0}),r.default.createElement("section",{className:`chrysaor-layout has-view-class-${h}`},r.default.createElement(l.default,{locationTitle:T,inTop:b,title:_,subtitle:w,description:O,authors:E}),r.default.createElement("section",{className:"main-container"},r.default.createElement(o.StructuredCOinS,{cslRecord:k}),r.default.createElement("div",{className:"columns-container"},A.map(e=>r.default.createElement(c.default,p({key:e.id,isDefaultActive:1===A.length},{element:e,edition:n,activeResourceId:P,activeElementId:C,selectedResourceId:N,selectedContextualizationId:M,production:t,translate:m,numberOfColumns:A.length})))),e)),r.default.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:g}}),r.default.createElement("div",{dangerouslySetInnerHTML:{__html:x}}))}),this.state={citations:this.buildCitations(e,t),finalCss:this.updateStyles(e,t),gui:{}},this.contextualizationElements={}}}b.contextTypes={production:i.default.object,edition:i.default.object,usedDocument:i.default.object,contextualizers:i.default.object},b.childContextTypes={dimensions:i.default.object,viewParams:i.default.object,rawCitations:i.default.object,bindContextualizationElement:i.default.func,scrollToContextualization:i.default.func,preprocessedData:i.default.object,citationStyle:i.default.string,citationLocale:i.default.string};var y=m&&g?g({monitorHeight:!0,monitorWidth:!0,monitorPosition:!0})(b):b;t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(60))&&r.__esModule?r:{default:r};var a=({title:e,subtitle:t,description:n,authors:r})=>{const[a,s]=(0,i.useState)(!1);return i.default.createElement("header",{className:`header ${a?"is-open":""}`},i.default.createElement("h1",{className:"title"},i.default.createElement(o.default,{to:{routeParams:{}}},e),i.default.createElement("span",{onClick:()=>s(!a)},"+")),i.default.createElement("div",{className:"additional-container"},i.default.createElement("div",{className:"main-header"},t&&i.default.createElement("h2",{className:"subtitle"},t),r&&r.length?i.default.createElement("h3",{className:"authors"},r.map(({given:e,family:t},n)=>i.default.createElement("span",{key:n},e," ",t))):null),i.default.createElement("div",{className:"additional-header"},n&&i.default.createElement("p",{className:"description"},n))))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=n(4),o=u(n(934)),a=u(n(1)),s=u(n(329)),l=u(n(85));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=new Function("try {return this===window;}catch(e){ return false;}")(),d=function({element:e,production:t,edition:n,translate:a,activeResourceId:u,activeElementId:d,selectedResourceId:p,numberOfColumns:h=1,selectedContextualizationId:m,isDefaultActive:g},{usedDocument:b}){const y=b||(f?document:{}),{data:v={}}=e,x=(0,r.useRef)(null),{displayThumbnail:_,displayHeader:w}=v,O=v.customTitle||a("Selection"),E=(0,i.buildResourceSectionsSummary)({production:t,options:e.data});let k,S=g?"is-active":"";void 0===d||g||(S=d===(e.id||"nope")?"is-active":"is-collapsed",E.some(({resourceId:e},t)=>{if(e===u)return k=t,!0}));let T,j=[],A={};u&&(j=Object.keys(t.contextualizations).reduce((e,n)=>{const r=t.contextualizations[n];return r.sourceId===u?(A[r.targetId]=A[r.targetId]?[...A[r.targetId],r.id]:[r.id],[...e,r.targetId]):r.targetId===u?[...e,r.sourceId]:e},[])),j=(0,s.default)(j,E.map(({resourceId:e})=>e)),p&&(A=E.reduce((e,{resourceId:n})=>{const r=Object.keys(t.contextualizations).filter(e=>{const r=t.contextualizations[e];return r.sourceId===p&&r.targetId===n});return r.length?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({},e,{[n]:e[n]?(0,l.default)([...e[n],...r]):r}):e},A)),(0,r.useEffect)(()=>{d===e.id&&u&&setTimeout(()=>{let e;(e=m?y.getElementById(`${m}`):y.getElementById(`${d}-${u}`))&&(x.current.scrollTop=e.offsetTop-80)},1200)},[u,m]),(0,r.useEffect)(()=>{if(p){const t=y.getElementById(`${e.id}-${p}`);t&&(x.current.scrollTop=t.offsetTop-80)}},[p]),"is-collapsed"!==S||Object.keys(A).length||j.length?"is-active"===S||(T=`${100/h}%`):(S="is-hidden",T=0);const[P,C]=(0,r.useState)(0),N=e=>{const t=y.getElementById(e);t&&x.current&&(x.current.scrollTop=t.offsetTop)},M=x&&x.current&&x.current.getBoundingClientRect();return r.default.createElement("section",{style:{maxWidth:T,minWidth:"is-collapsed"===S?"10%":void 0},className:`contents-column ${S}`},r.default.createElement("div",{className:"column-header"},r.default.createElement("h1",null,O)),r.default.createElement("ul",{ref:x,className:"cards-list",id:e.id||"nope",onScroll:e=>{C(e.target.scrollTop)}},E.map(({resourceId:i},a)=>{let s;return void 0!==u&&(s=u===i&&"is-active"===S?"is-active":A[i]?"has-related":a===k-1||a===k+1?"is-adjacent":j.includes(i)?"is-related":"is-collapsed"),r.default.createElement(o.default,{key:a,resource:t.resources[i],elementId:e.id,status:s,production:t,isHighlighted:p===i,highlights:A[i],edition:n,displayThumbnail:_,displayHeader:w,parentBoundingRect:M,parentScrollPosition:P,onScrollToElementId:N})})))};d.contextTypes={usedDocument:a.default.object};var p=d;t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(2)),i=c(n(338)),o=c(n(60)),a=n(4),s=n(183),l=c(n(935)),u=c(n(184));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=({resource:e,elementId:t="nope",displayThumbnail:n,production:c,edition:d,status:p="",displayHeader:h,highlights:m=[],isHighlighted:g,parentBoundingRect:b,parentScrollPosition:y,onScrollToElementId:v})=>{if("is-active"===p)return r.default.createElement("li",{className:`resource-card ${p}`,id:`${t}-${e.id}`},r.default.createElement("div",{className:"resource-card-content"},r.default.createElement(l.default,{production:c,edition:d,section:e,displayHeader:h,parentBoundingRect:b,parentScrollPosition:y,onScrollToElementId:v})));const x=m.map(e=>{return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},(0,a.buildContextContent)(c,e),{contextualizationId:e})});return r.default.createElement("li",{className:`resource-card ${p} ${g?"is-highlighted":""}`,id:`${t}-${e.id}`},r.default.createElement("div",{className:"resource-card-content"},x.length?r.default.createElement("div",{className:"mentions-container"},r.default.createElement(o.default,{to:{routeParams:{resourceId:e.id,elementId:t}}},r.default.createElement("h2",{className:"card-title"},(0,s.ellipse)((0,a.getResourceTitle)(e))),e.metadata.authors&&e.metadata.authors.length>0&&r.default.createElement("p",{className:"card-authors"},e.metadata.authors.map(({family:e,given:t},n)=>r.default.createElement("span",{key:n},t," ",e)))),x.map(({contextualizationId:n,contents:i},a)=>r.default.createElement("div",{key:a,className:"excerpt"},r.default.createElement(o.default,{to:{routeParams:{resourceId:e.id,selectedContextualizationId:n,elementId:t}}},r.default.createElement(u.default,{raw:i}))))):r.default.createElement(o.default,{to:{routeParams:{resourceId:e.id,elementId:t}}},n&&"is-active"!==p&&r.default.createElement(i.default,{resource:e}),r.default.createElement("h2",{className:"card-title"},(0,s.ellipse)((0,a.getResourceTitle)(e))),e.metadata.authors&&e.metadata.authors.length>0&&r.default.createElement("p",{className:"card-authors"},e.metadata.authors.map(({family:e,given:t},n)=>r.default.createElement("span",{key:n},t," ",e))))))};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=f(n(1)),o=n(4),a=n(183),s=f(n(936)),l=f(n(184)),u=f(n(60)),c=f(n(338));function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.Component{constructor(e){super(e),d(this,"getChildContext",()=>{const{section:e}=this.props,{data:{contents:t={contents:{},notesOrder:[],notes:{}}}}=e;return{notes:t.notes,onNoteContentPointerClick:this.onNoteContentPointerClick}}),d(this,"componentWillUpdate",(e,t,n)=>{this.props.section.id===e.section.id&&this.state.gui.openedContextualizationId&&!t.gui.openedContextualizationId&&n.asideVisible&&n.toggleAsideVisible()}),d(this,"onNoteContentPointerClick",e=>{this.props.onScrollToElementId(e)}),d(this,"onNotePointerClick",e=>{this.props.onScrollToElementId(`note-content-pointer-${e}`)}),d(this,"render",()=>{const{props:{production:e,edition:t={},section:n,displayHeader:i,parentBoundingRect:f={}},context:{translate:d={}},onNotePointerClick:p}=this,{data:h={}}=t,{}=h,m=n.data&&n.data.contents?n.data.contents.contents:{contents:{},notes:{},notesOrder:[]},g=n.metadata.authors||[];let b=!1;this.markerRef.current&&this.markerRef.current.getBoundingClientRect().top<90&&(b=!0);const y=(0,a.convertSectionToCslRecord)(n,e,t);return r.default.createElement("section",{ref:this.markerRef,className:`main-contents-container section-player ${b?"is-sticky":""}`},r.default.createElement(o.StructuredCOinS,{cslRecord:y}),r.default.createElement("div",{className:"main-column"},r.default.createElement("h1",{style:b?{left:f.x,top:f.y,width:f.width}:{},className:"view-title section-title"},r.default.createElement("span",{className:"title-content"},(0,o.getResourceTitle)(n)||d("untitled section")||"Section sans titre"),r.default.createElement(u.default,{to:{routeParams:{}}},"✕")),i&&r.default.createElement(c.default,{resource:n}),n.metadata.subtitle&&r.default.createElement("h2",{className:"subtitle"},n.metadata.subtitle),g.length>0&&r.default.createElement("h2",{className:"authors"},g&&g.length>0&&g.map((e,t)=>r.default.createElement("span",{key:t},e.given," ",e.family)).reduce((e,t)=>[e,", ",t])),r.default.createElement("div",{className:"main-contents-wrapper"},r.default.createElement(l.default,{raw:m}))),n.data.contents&&Object.keys(n.data.contents.notes).length>0?r.default.createElement(s.default,{pointers:this.noteContentPointers,notes:n.data.contents.notes,notesOrder:n.data.contents.notesOrder,notesPosition:"footnotes",title:d("Notes"),id:"notes-container",onNotePointerClick:p}):null)}),this.state={gui:{openedContextualizationId:void 0}},this.markerRef=r.default.createRef()}}d(p,"contextTypes",{scrollToTop:i.default.func,dimensions:i.default.object}),p.childContextTypes={notes:i.default.object,onNoteContentPointerClick:i.default.func},p.contextTypes={dimensions:i.default.object,production:i.default.object,scrollTopRatio:i.default.number,scrollTopAbs:i.default.number,scrollRatio:i.default.number,scrollHeight:i.default.number,scrollToTop:i.default.func,contextualizers:i.default.object,translate:i.default.func,citations:i.default.object,usedDocument:i.default.object,rawCitations:i.default.object,scrollToContextualization:i.default.func,scrollToElement:i.default.func,toggleAsideVisible:i.default.func,asideVisible:i.default.bool};var h=p;t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=a(n(1)),o=a(n(937));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends r.Component{constructor(e){super(e),s(this,"componentDidUpdate",e=>{"sidenotes"!==this.props.notesPosition||this.props.notesPosition===e.notesPosition&&this.props.notes===e.notes||setTimeout(()=>{this.updatePositions()})}),s(this,"updatePositions",()=>{const e=this.props.notesOrder.map(e=>{const t=this.props.notes[e],n=(this.context.usedDocument||document).getElementById(`note-content-pointer-${t.id}`),r=function(e){let t=0,n=0;for(;e&&!e.classList.contains("chrysaor-layout")&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}}(n);return{order:t.finalOrder,noteId:t.id,component:n,offsetTop:r.top}}),t={};let n=0,r=0;for(let i=0;i<e.length;i++){const o=e[i],a=o.offsetTop;a>n+r?n=a:n+=r,r=this.notes[o.noteId].component.offsetHeight,t[o.noteId]={top:n,position:"absolute",left:0}}this.setState({notesStyles:t})}),this.notes={},this.state={notesStyles:{}}}componentDidMount(){"sidenotes"===this.props.notesPosition&&setTimeout(()=>{this.updatePositions()},2e3)}componentWillReceiveProps(e,t){"sidenotes"===e.notesPosition&&this.context.dimensions.width!==t.dimensions.width&&setTimeout(this.updatePositions)}render(){const{id:e,notes:t,notesOrder:n,onNotePointerClick:i,notesPosition:a,title:s}=this.props,{notesStyles:l}=this.state;return r.default.createElement("div",{className:`notes-container is-position-${a}`},r.default.createElement("h2",{className:"notes-title",id:e},s),r.default.createElement("ol",{className:"notes-list"},n.map((e,n)=>{const a=t[e];return r.default.createElement(o.default,{key:n,note:a,onNotePointerClick:i,ref:e=>{this.notes[a.id]=e},style:"sidenotes"===this.props.notesPosition?l[a.id]:{}})})))}}l.contextTypes={usedDocument:i.default.object,dimensions:i.default.object},l.propTypes={notes:i.default.object,notesOrder:i.default.array,notesPosition:i.default.oneOf(["sidenotes","footnotes"]),onNotePointerClick:i.default.func};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),i=a(n(1)),o=a(n(184));function a(e){return e&&e.__esModule?e:{default:e}}class s extends r.Component{constructor(e){var t,n,r;super(e),r=()=>({inNote:!0}),(n="getChildContext")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}render(){const{note:e,onNotePointerClick:t,style:n={}}=this.props;return r.default.createElement("li",{style:n,className:"note-item",ref:e=>{this.component=e},id:e.id},r.default.createElement("span",{onClick:n=>{n.stopPropagation(),t(e.id)},className:"link note-block-pointer",id:`note-block-pointer-${e.id}`},e.order),r.default.createElement(o.default,{raw:e.contents}))}}s.propTypes={note:i.default.object,onNotePointerClick:i.default.func,style:i.default.object},s.childContextTypes={inNote:i.default.bool};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e,children:t})=>r.default.createElement("a",{href:e,target:"blank"},t);a.propTypes={children:i.default.array,to:i.default.string};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(2)),i=l(n(1)),o=n(4),a=l(n(940)),s=l(n(60));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=({data:e},{production:t={},productionAssets:n={},contextualizers:i,containerId:l,bindContextualizationElement:c,renderingMode:f="screened",viewParams:d={}})=>{const p=e.asset.id,h=t&&t.contextualizations&&t.contextualizations[p];if(!h)return null;const{visibility:m={paged:!0,screened:!0}}=h,g=t.contextualizers[h.contextualizerId],b=t.resources[h.sourceId],y=i[g.type],v=y&&y.Block,x=e=>{"function"==typeof c&&c(h.id,e)},_=d.selectedResourceId===b.id;if(h&&v){return!m[f]?null:r.default.createElement("figure",{className:`block-contextualization-container ${_?"is-active":""} ${g.type}`,style:{position:"relative"},id:`contextualization-${l}-${p}`,ref:x},r.default.createElement(v,{resource:b,contextualizer:g,contextualization:h,renderingMode:f,assets:n}),r.default.createElement("figcaption",{className:"figure-caption"},r.default.createElement("h4",{className:"figure-title"},"screened"===f?r.default.createElement("div",null,r.default.createElement(s.default,{className:"link mention-context-pointer",to:{routeParams:u({},d,{selectedResourceId:_?void 0:b.id})}},r.default.createElement("span",null,h.title||b.metadata.title))):r.default.createElement("span",null,h.title||b.metadata.title)),h.legend&&r.default.createElement("div",{className:"figure-legend"},r.default.createElement(a.default,{src:h.legend}))),r.default.createElement(o.StructuredCOinS,{resource:b}))}return null};f.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},f.contextTypes={production:i.default.object,dimensions:i.default.object,inNote:i.default.bool,contextualizers:i.default.object,productionAssets:i.default.object,containerId:i.default.string,bindContextualizationElement:i.default.func,renderingMode:i.default.string,viewParams:i.default.object};var d=f;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(94));function o(e){return e&&e.__esModule?e:{default:e}}t.default=({src:e=""})=>r.default.createElement(i.default,{escapeHtml:!1,source:e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(2)),i=s(n(1)),o=n(4),a=s(n(60));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=({data:e,children:t},{production:n,contextualizers:i,openAsideContextualization:s,bindContextualizationElement:u,productionAssets:c={},viewParams:f={}})=>{const d=e.asset&&e.asset.id;if(!d||!n)return null;const p=n.contextualizations[d];if(!p)return null;const h=n.contextualizers[p.contextualizerId],m=n.resources[p.sourceId],g=i[h.type],b=g&&g.Inline,y=()=>{"glossary"!==m.metadata.type&&"bib"!==m.metadata.type||"function"==typeof s&&s(p.id)},v=f.selectedResourceId===m.id,x=e=>{"function"==typeof u&&u(p.id,e)};return h&&b?r.default.createElement("span",{className:`InlineAssetWrapper inline-${h.type} ${v?"is-active":""} inline-contextualization-container ${h.type}`,id:d,ref:x,onClick:y},"glossary"!==m.metadata.type&&r.default.createElement(o.StructuredCOinS,{resource:m}),r.default.createElement(a.default,{to:{routeParams:l({},f,{selectedResourceId:v?void 0:m.id})}},"●"),r.default.createElement(a.default,{to:{routeParams:l({},f,{selectedResourceId:v?void 0:m.id})}},r.default.createElement(b,{contextualization:p,contextualizer:h,assets:c,resource:m,renderingMode:"screened"},t)),r.default.createElement(a.default,{to:{routeParams:l({},f,{selectedResourceId:v?void 0:m.id})}},"●")):null};c.propTypes={data:i.default.shape({asset:i.default.shape({id:i.default.string})})},c.contextTypes={production:i.default.object,contextualizers:i.default.object,onAssetContextRequest:i.default.func,openAsideContextualization:i.default.func,bindContextualizationElement:i.default.func,productionAssets:i.default.object,viewParams:i.default.object};var f=c;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({children:e,noteId:t=""},n)=>{const i=n.notes,o=()=>"function"==typeof n.onNoteContentPointerClick&&n.onNoteContentPointerClick(t);if(i){const n=i[t];return n?r.default.createElement("sup",{onClick:o,className:"note-content-pointer link",id:`note-content-pointer-${t}`},n.order,e):null}return null};a.propTypes={children:i.default.array,noteId:i.default.string},a.contextTypes={notes:i.default.object,onNoteContentPointerClick:i.default.func};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=a(n(60));function a(e){return e&&e.__esModule?e:{default:e}}const s=({children:e,sectionId:t},{getViewIdForSectionId:n})=>r.default.createElement(o.default,{to:{routeClass:"sections",viewId:n(t),routeParams:{sectionId:t}}},e);s.contextTypes={getViewIdForSectionId:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=(r=n(1))&&r.__esModule?r:{default:r};function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),a(this,"getChildContext",()=>({citations:this.props.citations?this.props.citations.citationComponents:{}})),a(this,"render",()=>{const{children:e}=this.props;return e})}}t.default=s,a(s,"childContextTypes",{citations:o.default.object})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(2)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}const a=({to:e={},children:t,onButtonClick:n},{navigateTo:i})=>{return r.default.createElement("span",{onClick:()=>{"function"==typeof n&&n(),i(e)},className:"link "},t)};a.contextTypes={navigateTo:i.default.func};var s=a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2)),i=a(n(1)),o=n(61);function a(e){return e&&e.__esModule?e:{default:e}}const s=({to:e,children:t},{routeItemToUrl:n})=>{const i=n(e);return r.default.createElement(o.NavLink,{to:`${i}`,className:"link",activeClassName:"active"},t)};s.contextTypes={routeItemToUrl:i.default.func};var l=s;t.default=l},function(e,t,n){"use strict";e.exports={id:"chrysaor",type:"peritext-template",name:"Deucalion template",renderingTypes:["screened"],generatorsTypes:["multi-page-html","single-page-html"],summaryType:"linear",options:{referencesScope:{type:"string",enum:["sections","edition"],default:"edition"},allowAnnotation:{type:"boolean",default:!1}},defaultBibType:"misc",defaultAdditionalHTML:'<link href="https://fonts.googleapis.com/css?family=Fira+Sans&display=swap" rel="stylesheet"> ',defaultPlan:{type:"linear",summary:[{type:"resourceSections",data:{customSummary:{active:!1,summary:[]},resourceTypes:["section"]}}]},summaryBlockDataTypes:{resourceSections:{type:"object",default:{resourceTypes:["glossary"],customSummary:{active:!1,summary:[]},notesPosition:"footnotes",displayHeader:!0,displayThumbnail:!1},properties:{customTitle:{type:"string"},resourceTypes:{type:"array",items:{type:"string",enum:["section","bib","image","table","video","embed","webpage","glossary"]},uiType:"select",description:"which types of resources to show"},hideEmptyResources:{type:"boolean",description:"whether to hide resources with no contents"},displayHeader:{type:"boolean",description:"whether to display resources headers in their views"},displayThumbnail:{type:"boolean",description:"whether to display resources previews in lists"},customSummary:{type:"object",uiType:"customResourcesSummary",properties:{active:{type:"boolean"},summary:{type:"array",items:{type:"object",properties:{resourceId:{type:"string"},level:{type:"number"}}}}}}}}}}},function(e,t,n){(function(t,r){var i,o,a,s,l,u,c,f=null,d=null,p=null,h=null,m=null,g=null,b=null,y=null,v=null,x=null,_=(n(339).deferConfig,n(339).DeferredConfig),w=n(949).RawConfig,O=n(950),E=n(163),k=n(953),S={},T=[],j=!0,A=/^.GITCRYPT/,P=function(){var e=this;for(var t in C)C[t]=C[t].bind(e);C.extendDeep(e,C.loadFileConfigs()),C.attachProtoDeep(e),C.runStrictnessChecks(e)},C=P.prototype.util={},N=function(e,t){var n=Array.isArray(t)?t:t.split("."),r=e[n[0]];return n.length<=1?r:null!==r&&"object"==typeof r?N(r,n.slice(1)):void 0};P.prototype.get=function(e){if(null==e)throw new Error("Calling config.get with null or undefined argument");j&&(C.initParam("ALLOW_CONFIG_MUTATIONS",!1)||C.makeImmutable(M),j=!1);var t=N(this,e);if(void 0===t)throw new Error('Configuration property "'+e+'" is not defined');return t},P.prototype.has=function(e){if(null==e)return!1;return void 0!==N(this,e)},C.setModuleDefaults=function(e,t){var n=this,r=C.cloneDeep(t);return 0!==T.length&&"Module Defaults"===T[0].name||T.splice(0,0,{name:"Module Defaults",parsed:{}}),C.setPath(T[0].parsed,e.split("."),{}),C.extendDeep(N(T[0].parsed,e),t),C.setPath(n,e.split("."),N(n,e)||{}),C.setPath(r,e.split("."),N(r,e)||{}),C.extendDeep(r,N(n,e)),C.extendDeep(N(n,e),r),C.initParam("ALLOW_CONFIG_MUTATIONS",!1)||(j=!0),C.attachProtoDeep(N(n,e))},C.makeHidden=function(e,t,n){return void 0===n?Object.defineProperty(e,t,{enumerable:!1}):Object.defineProperty(e,t,{value:n,enumerable:!1}),e},C.makeImmutable=function(e,t,n){var r=null;if("string"==typeof t)return Object.defineProperty(e,t,{value:void 0===n?e[t]:n,writable:!1,configurable:!1});r=Array.isArray(t)?t:Object.keys(e);for(var i=0;i<r.length;i++){var o=r[i];(n=e[o])instanceof w?Object.defineProperty(e,o,{value:n.resolve(),writable:!1,configurable:!1}):Array.isArray(n)?Object.defineProperty(e,o,{value:Object.freeze(n)}):(Object.defineProperty(e,o,{value:n,writable:!1,configurable:!1}),C.isObject(n)&&C.makeImmutable(n))}return e},C.getConfigSources=function(){return T.slice(0)},C.loadFileConfigs=function(e){var r={};a=C.initParam("NODE_ENV","development"),a=(a=C.initParam("NODE_CONFIG_ENV",a)).split(","),0===(i=e||C.initParam("NODE_CONFIG_DIR",E.join(t.cwd(),"config"))).indexOf(".")&&(i=E.join(t.cwd(),i)),s=C.initParam("NODE_APP_INSTANCE"),l=C.initParam("HOST"),u=C.initParam("HOSTNAME"),c=C.initParam("CONFIG_SKIP_GITCRYPT"),o=C.initParam("NODE_CONFIG_RUNTIME_JSON",E.join(i,"runtime.json"));try{var f=l||u;if(!f){var d=n(954);f=d.hostname()}}catch(e){f=""}S.HOSTNAME=f;var p=["default"].concat(a);if(f){var h=f.split(".")[0];a.forEach((function(e){p.push(h,h+"-"+e),f!=h&&p.push(f,f+"-"+e)}))}a.forEach((function(e){p.push("local","local-"+e)}));var m=["js","ts","json","json5","hjson","toml","coffee","iced","yaml","yml","cson","properties","xml"];if(p.forEach((function(e){m.forEach((function(t){var n=E.join(i,e+"."+t),o=C.parseFile(n);o&&C.extendDeep(r,o),s&&(n=E.join(i,e+"-"+s+"."+t),(o=C.parseFile(n))&&C.extendDeep(r,o))}))})),!e){var g={};if(t.env.NODE_CONFIG){try{g=JSON.parse(t.env.NODE_CONFIG)}catch(e){console.error("The $NODE_CONFIG environment variable is malformed JSON")}C.extendDeep(r,g),T.push({name:"$NODE_CONFIG",parsed:g})}var b=C.getCmdLineArg("NODE_CONFIG");if(b){try{b=JSON.parse(b)}catch(e){console.error("The --NODE_CONFIG={json} command line argument is malformed JSON")}C.extendDeep(r,b),T.push({name:"--NODE_CONFIG argument",parsed:b})}S.NODE_CONFIG=JSON.stringify(C.extendDeep(g,b,{}))}var y=C.getCustomEnvVars(i,m);C.extendDeep(r,y);var v=C.parseFile(o)||{};return C.extendDeep(r,v),C.resolveDeferredConfigs(r),r},C.resolveDeferredConfigs=function(e){var t=e;!function e(n){var r=[];for(var i in n)n.hasOwnProperty(i)&&null!=n[i]&&r.push(i);r.sort().forEach((function(r){if(n[r].constructor==Object)e(n[r]);else if(n[r].constructor==Array)for(var i=0;i<n[r].length;i++)e(n[r][i]);else n[r]instanceof _&&(n[r]=n[r].resolve.call(t,t,n[r]._original))}))}(e)},C.parseFile=function(e){var t=e.substr(e.lastIndexOf(".")+1),r=null,i=null,o=null;try{if(!(o=k.statSync(e))||o.size<1)return null}catch(e){return null}try{i=(i=k.readFileSync(e,"UTF-8")).replace(/^\uFEFF/,"")}catch(t){throw new Error("Config file "+e+" cannot be read")}try{if(c&&A.test(i))return console.error("WARNING: "+e+" is a git-crypt file and CONFIG_SKIP_GITCRYPT is set. skipping."),null;if("js"===t)r=n(14)(e);else if("ts"===t)(void 0)[".ts"]||n(14)("ts-node").register({lazy:!0,compilerOptions:{allowJs:!0}}),r=n(14)(e).default;else if("coffee"===t){if(!p){p={};try{p=n(14)("coffeescript")}catch(e){p=n(14)("coffee-script")}p.register&&p.register()}r=n(14)(e)}else"iced"===t?(h=n(14)("iced-coffee-script")).register&&h.register():r=C.parseString(i,t)}catch(t){throw A.test(i)&&console.error("ERROR: "+e+" is a git-crypt file and CONFIG_SKIP_GITCRYPT is not set."),new Error("Cannot parse config file: '"+e+"': "+t)}return"object"==typeof r&&T.push({name:e,original:i,parsed:r}),r},C.parseString=function(e,t){var r=null;if("yaml"===t||"yml"===t){if(!f&&!d)try{f=n(14)("js-yaml")}catch(e){try{d=n(14)("yaml")}catch(e){}}f?r=f.load(e):d?(e+="\n",r=d.eval(C.stripYamlComments(e))):console.error("No YAML parser loaded.  Suggest adding js-yaml dependency to your package.json file.")}else if("json"===t)try{r=JSON.parse(e)}catch(t){if("SyntaxError"!==t.name||0!==t.message.indexOf("Unexpected token /"))throw t;b||(b=n(14)("json5")),r=b.parse(e)}else if("json5"===t)b||(b=n(14)("json5")),r=b.parse(e);else if("hjson"===t)v||(v=n(14)("hjson")),r=v.parse(e);else if("toml"===t)y||(y=n(14)("toml")),r=y.parse(e);else if("cson"===t)m||(m=n(14)("cson")),r="function"==typeof m.parseSync?m.parseSync(C.stripComments(e)):m.parse(C.stripComments(e));else if("properties"===t)g||(g=n(14)("properties")),r=g.parse(e,{namespaces:!0,variables:!0,sections:!0});else if("xml"===t){x||(x=n(14)("x2js")),r=(new x).xml2js(e);var i=Object.keys(r);1==i.length&&(r=r[i[0]])}return r},C.attachProtoDeep=function(e,t){if(e instanceof w)return e;if((t=null===t?20:t)<0)return e;for(var n in P.prototype)e[n]||C.makeHidden(e,n,P.prototype[n]);for(var r in e)C.isObject(e[r])&&C.attachProtoDeep(e[r],t-1);return e},C.cloneDeep=function(e,t,n,i){var o=[],a=[],s=void 0!==r;return void 0===n&&(n=!0),void 0===t&&(t=20),function e(t,l){if(null===t)return null;if(0===l)return t;var u;if("object"!=typeof t)return t;if(O.isArray(t))u=[];else if(O.isRegExp(t))u=new RegExp(t.source,C.getRegExpFlags(t)),t.lastIndex&&(u.lastIndex=t.lastIndex);else if(O.isDate(t))u=new Date(t.getTime());else{if(s&&r.isBuffer(t))return u=new r(t.length),t.copy(u),u;u=void 0===i?Object.create(Object.getPrototypeOf(t)):Object.create(i)}if(n){var c=o.indexOf(t);if(-1!=c)return a[c];o.push(t),a.push(u)}for(var f in t){var d=Object.getOwnPropertyDescriptor(t,f);void 0!==d&&void 0!==d.get?Object.defineProperty(u,f,d):u[f]=e(t[f],l-1)}return u}(e,t)},C.setPath=function(e,t,n){var r=null;null!==n&&0!==t.length&&(1===t.length?e[t.shift()]=n:(r=t.shift(),e.hasOwnProperty(r)||(e[r]={}),C.setPath(e[r],t,n)))},C.substituteDeep=function(e,t){var n={};return function e(t,r,i){for(var o in t){var a=t[o];if("string"==typeof a)r[a]&&C.setPath(n,i.concat(o),r[a]);else{if(!C.isObject(a))throw msg="Illegal key type for substitution map at "+i.join(".")+": "+typeof a,Error(msg);if("__name"in a&&"__format"in a&&r[a.__name]){var s=C.parseString(r[a.__name],a.__format);C.setPath(n,i.concat(o),s)}else e(a,r,i.concat(o))}}}(e,t,[]),n},C.getCustomEnvVars=function(e,n){var r={};return n.forEach((function(n){var i=E.join(e,"custom-environment-variables."+n),o=C.parseFile(i);if(o){var a=C.substituteDeep(o,t.env);C.extendDeep(r,a)}})),r},C.equalsDeep=function(e,t,n){if((n=null===n?20:n)<0)return{};if(!e||!t)return!1;if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t)return!1;if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var r in e)if(e[r]&&"object"==typeof e[r]){if(!C.equalsDeep(e[r],t[r],n-1))return!1}else if(e[r]!==t[r])return!1;return!0},C.diffDeep=function(e,t,n){var r={};if((n=null===n?20:n)<0)return{};for(var i in t){var o=e[i],a=t[i];o&&a&&C.isObject(a)?C.equalsDeep(o,a)||(r[i]=C.diffDeep(o,a,n-1)):Array.isArray(o)&&Array.isArray(a)?C.equalsDeep(o,a)||(r[i]=a):o!==a&&(r[i]=a)}return r},C.extendDeep=function(e){var t=Array.prototype.slice.call(arguments,1),n=t.pop();return"number"!=typeof n&&(t.push(n),n=20),n<0?e:(t.forEach((function(t){for(var r in t){var i=t[r]instanceof _,o=e[r]instanceof _;i&&e.hasOwnProperty(r)&&(t[r]._original=o?e[r]._original:e[r]),t[r]instanceof Date&&(e[r]=t[r]),t[r]instanceof RegExp?e[r]=t[r]:C.isObject(e[r])&&C.isObject(t[r])&&!o?C.extendDeep(e[r],t[r],n-1):t[r]&&"object"==typeof t[r]?e[r]=C.cloneDeep(t[r],n-1):Object.getOwnPropertyDescriptor(Object(t),r)?Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(Object(t),r)):e[r]=t[r]}})),e)},C.stripYamlComments=function(e){return e.replace(/^\s*#.*/gm,"").replace(/^\s*[\n|\r]+/gm,"")},C.stripComments=function(e,t){t=t||/(['"])(\\\1|.)+?\1/g;var n="_"+ +new Date,r=[],i=0;return e.replace(t,(function(e){return r[i]=e,n+""+i++})).replace(/([^\/])(\/(?!\*|\/)(\\\/|.)+?\/[gim]{0,3})/g,(function(e,t,o){return r[i]=o,t+(n+"")+i++})).replace(/\/\/.*?\/?\*.+?(?=\n|\r|$)|\/\*[\s\S]*?\/\/[\s\S]*?\*\//g,"").replace(/\/\/.+?(?=\n|\r|$)|\/\*[\s\S]+?\*\//g,"").replace(RegExp("\\/\\*[\\s\\S]+"+n+"\\d+","g"),"").replace(RegExp(n+"(\\d+)","g"),(function(e,t){return r[t]}))},C.isObject=function(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)},C.initParam=function(e,n){var r=C.getCmdLineArg(e)||t.env[e]||n;return S[e]=r,r},C.getCmdLineArg=function(e){for(var n=t.argv.slice(2,t.argv.length),r="--"+e+"=",i=0;i<n.length;i++)if(0===n[i].indexOf(r))return n[i].substr(r.length);return!1},C.getEnv=function(e){return S[e]},C.getRegExpFlags=function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t},C.toObject=function(e){return JSON.parse(JSON.stringify(e||this))},C.runStrictnessChecks=function(e){var n=e.util.getConfigSources().map((function(e){return E.basename(e.name)}));a.forEach((function(e){var t=n.some((function(t){return t.match(e)}));e&&"development"!==e&&!t&&i("NODE_ENV value of '"+e+"' did not match any deployment config file names."),"default"!==e&&"local"!==e||i("NODE_ENV value of '"+e+"' is ambiguous.")}));var r=n.some((function(e){return e.match(s)}));function i(e){var n=t.env.NODE_CONFIG_STRICT_MODE,r=n?"FATAL: ":"WARNING: ",i="See https://github.com/lorenwest/node-config/wiki/Strict-Mode";if(console.error(r+e),console.error(r+i),["true","1"].indexOf(n)>=0)throw new Error(r+e+" "+i)}s&&!r&&i("NODE_APP_INSTANCE value of '"+s+"' did not match any instance config file names.")};var M=e.exports=new P;!C.initParam("SUPPRESS_NO_CONFIG_WARNING")&&0===Object.keys(M).length&&(console.error("WARNING: No configurations found in configuration directory:"+i),console.error("WARNING: To disable this warning set SUPPRESS_NO_CONFIG_WARNING in the environment."))}).call(this,n(55),n(91).Buffer)},function(e,t){function n(){}e.exports.RawConfig=n,e.exports.raw=function(e){var t=Object.create(n.prototype);return t.resolve=function(){return e},t}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),l=r[n];n<o;l=r[++n])m(l)||!x(l)?a+=" "+l:a+=" "+s(l);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),c(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&O(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(O(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return f(n)}var u,x="",E=!1,k=["{","}"];(p(n)&&(E=!0,k=["[","]"]),O(n))&&(x=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(x=" "+RegExp.prototype.toString.call(n)),_(n)&&(x=" "+Date.prototype.toUTCString.call(n)),w(n)&&(x=" "+f(n)),0!==a.length||E&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=E?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)j(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return d(e,n,r,s,t,E)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,x,k)):k[0]+x+k[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),j(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?c(e,l.value,null):c(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return x(e)&&"[object RegExp]"===E(e)}function x(e){return"object"==typeof e&&null!==e}function _(e){return x(e)&&"[object Date]"===E(e)}function w(e){return x(e)&&("[object Error]"===E(e)||e instanceof Error)}function O(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=x,t.isDate=_,t.isError=w,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(951);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=n(952),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!=typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=A,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(P,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(55))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,n){"use strict";n.r(t);var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},i=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,s=o.left,l=a;function u(e,t){let n=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&++n;else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(i=+i)>=i&&++n}return n}function c(e){return 0|e.length}function f(e){return!(e>0)}function d(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function p(...e){const t="function"==typeof e[e.length-1]&&function(e){return t=>e(...t)}(e.pop()),n=(e=e.map(d)).map(c),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(f))return o;for(;;){o.push(i.map((t,n)=>e[n][t]));let a=r;for(;++i[a]===n[a];){if(0===a)return t?o.map(t):o;i[a--]=0}}}function h(e,t){var n=0,r=0;return Float64Array.from(e,void 0===t?e=>n+=+e||0:i=>n+=+t(i,r++,e)||0)}var m=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};function g(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(o+=(n=t-i)*(t-(i+=n/++r)));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(o+=(n=s-i)*(s-(i+=n/++r)))}if(r>1)return o/(r-1)}function b(e,t){const n=g(e,t);return n?Math.sqrt(n):n}var y=function(e,t){let n,r;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]},v=function(e){return e};function x(e,...t){return E(e,v,v,t)}function _(e,...t){return E(e,Array.from,v,t)}function w(e,t,...n){return E(e,v,t,n)}function O(e,t,...n){return E(e,Array.from,t,n)}function E(e,t,n,r){return function e(i,o){if(o>=r.length)return n(i);const a=new Map,s=r[o++];let l=-1;for(const e of i){const t=s(e,++l,i),n=a.get(t);n?n.push(e):a.set(t,[e])}for(const[t,n]of a)a.set(t,e(n,o));return t(a)}(e,0)}var k=Array.prototype,S=k.slice,T=(k.map,function(e){return function(){return e}}),j=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o},A=Math.sqrt(50),P=Math.sqrt(10),C=Math.sqrt(2),N=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=M(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function M(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=A?10:o>=P?5:o>=C?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=A?10:o>=P?5:o>=C?2:1)}function I(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=A?i*=10:o>=P?i*=5:o>=C&&(i*=2),t<e?-i:i}var D=function(e){return Math.ceil(Math.log(u(e))/Math.LN2)+1},R=function(){var e=v,t=y,n=D;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(r[i],i,r);var u=t(s),c=u[0],f=u[1],d=n(s,c,f);Array.isArray(d)||(d=I(c,f,d),d=j(Math.ceil(c/d)*d,f,d));for(var p=d.length;d[0]<=c;)d.shift(),--p;for(;d[p-1]>f;)d.pop(),--p;var h,m=new Array(p+1);for(i=0;i<=p;++i)(h=m[i]=[]).x0=i>0?d[i-1]:c,h.x1=i<p?d[i]:f;for(i=0;i<a;++i)c<=(o=s[i])&&o<=f&&m[l(d,o,0,p)].push(r[i]);return m}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:T(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:T([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?T(S.call(e)):T(e),r):n},r};function z(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function L(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function F(e,t,n=0,i=e.length-1,o=r){for(;i>n;){if(i-n>600){const r=i-n+1,a=t-n+1,s=Math.log(r),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(r-l)/r)*(a-r/2<0?-1:1);F(e,t,Math.max(n,Math.floor(t-a*l/r+u)),Math.min(i,Math.floor(t+(r-a)*l/r+u)),o)}const r=e[t];let a=n,s=i;for(B(e,n,t),o(e[i],r)>0&&B(e,n,i);a<s;){for(B(e,a,s),++a,--s;o(e[a],r)<0;)++a;for(;o(e[s],r)>0;)--s}0===o(e[n],r)?B(e,n,s):B(e,++s,i),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function B(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}var U=function(e){return null===e?NaN:+e};function q(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return L(e);if(t>=1)return z(e);var r,i=(r-1)*t,o=Math.floor(i),a=z(F(e,o).subarray(0,o+1));return a+(L(e.subarray(o+1))-a)*(i-o)}}function $(e,t,n=U){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}var H=function(e,t,n){return Math.ceil((n-t)/(2*(q(e,.75)-q(e,.25))*Math.pow(u(e),-1/3)))},W=function(e,t,n){return Math.ceil((n-t)/(3.5*b(e)*Math.pow(u(e),-1/3)))};function V(e,t){let n,r=-1,i=-1;if(void 0===t)for(const t of e)++i,null!=t&&(n<t||void 0===n&&t>=t)&&(n=t,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function G(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}var Y=function(e,t){return q(e,.5,t)};function X(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}function K(e,t){let n,r=-1,i=-1;if(void 0===t)for(const t of e)++i,null!=t&&(n>t||void 0===n&&t>=t)&&(n=t,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function J(e,t=Z){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function Z(e,t){return[e,t]}var Q=function(e,t){return Array.from(t,t=>e[t])};function ee(e,t=r){let n,i=!1;if(1===t.length){let o;for(const a of e){const e=t(a);(i?r(e,o)<0:0===r(e,e))&&(n=a,o=e,i=!0)}}else for(const r of e)(i?t(r,n)<0:0===t(r,r))&&(n=r,i=!0);return n}function te(e,t=r){if(1===t.length)return K(e,t);let n,i=-1,o=-1;for(const r of e)++o,(i<0?0===t(r,r):t(r,n)<0)&&(n=r,i=o);return i}function ne(e,t=r){let n,i=!1;if(1===t.length){let o;for(const a of e){const e=t(a);(i?r(e,o)>0:0===r(e,e))&&(n=a,o=e,i=!0)}}else for(const r of e)(i?t(r,n)>0:0===t(r,r))&&(n=r,i=!0);return n}function re(e,t=r){if(1===t.length)return V(e,t);let n,i=-1,o=-1;for(const r of e)++o,(i<0?0===t(r,r):t(r,n)>0)&&(n=r,i=o);return i}function ie(e,t){const n=te(e,t);return n<0?void 0:n}function oe(e,t=0,n=e.length){for(var r,i,o=n-(t=+t);o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e}function ae(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var se=function(e){if(!(i=e.length))return[];for(var t=-1,n=L(e,le),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r};function le(e){return e.length}var ue=function(){return se(arguments)};n.d(t,"bisect",(function(){return l})),n.d(t,"bisectRight",(function(){return a})),n.d(t,"bisectLeft",(function(){return s})),n.d(t,"ascending",(function(){return r})),n.d(t,"bisector",(function(){return i})),n.d(t,"count",(function(){return u})),n.d(t,"cross",(function(){return p})),n.d(t,"cumsum",(function(){return h})),n.d(t,"descending",(function(){return m})),n.d(t,"deviation",(function(){return b})),n.d(t,"extent",(function(){return y})),n.d(t,"group",(function(){return x})),n.d(t,"groups",(function(){return _})),n.d(t,"rollup",(function(){return w})),n.d(t,"rollups",(function(){return O})),n.d(t,"bin",(function(){return R})),n.d(t,"histogram",(function(){return R})),n.d(t,"thresholdFreedmanDiaconis",(function(){return H})),n.d(t,"thresholdScott",(function(){return W})),n.d(t,"thresholdSturges",(function(){return D})),n.d(t,"max",(function(){return z})),n.d(t,"maxIndex",(function(){return V})),n.d(t,"mean",(function(){return G})),n.d(t,"median",(function(){return Y})),n.d(t,"merge",(function(){return X})),n.d(t,"min",(function(){return L})),n.d(t,"minIndex",(function(){return K})),n.d(t,"pairs",(function(){return J})),n.d(t,"permute",(function(){return Q})),n.d(t,"quantile",(function(){return q})),n.d(t,"quantileSorted",(function(){return $})),n.d(t,"quickselect",(function(){return F})),n.d(t,"range",(function(){return j})),n.d(t,"least",(function(){return ee})),n.d(t,"leastIndex",(function(){return te})),n.d(t,"greatest",(function(){return ne})),n.d(t,"greatestIndex",(function(){return re})),n.d(t,"scan",(function(){return ie})),n.d(t,"shuffle",(function(){return oe})),n.d(t,"sum",(function(){return ae})),n.d(t,"ticks",(function(){return N})),n.d(t,"tickIncrement",(function(){return M})),n.d(t,"tickStep",(function(){return I})),n.d(t,"transpose",(function(){return se})),n.d(t,"variance",(function(){return g})),n.d(t,"zip",(function(){return ue}))},function(e,t,n){"use strict";n.r(t);var r=n(5);function i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function o(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}function a(){}function s(e,t){var n=new a;if(e instanceof a)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var s in e)n.set(s,e[s]);return n}a.prototype=s.prototype={constructor:a,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var l=s;function u(){}var c=l.prototype;function f(e,t){var n=new u;if(e instanceof u)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}u.prototype=f.prototype={constructor:u,has:c.has,add:function(e){return this["$"+(e+="")]=e,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};var d=Array.prototype,p=d.map,h=d.slice,m={name:"implicit"};function g(){var e=l(),t=[],n=[],r=m;function o(i){var o=i+"",a=e.get(o);if(!a){if(r!==m)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return o.domain=function(n){if(!arguments.length)return t.slice();t=[],e=l();for(var r,i,a=-1,s=n.length;++a<s;)e.has(i=(r=n[a])+"")||e.set(i,t.push(r));return o},o.range=function(e){return arguments.length?(n=h.call(e),o):n.slice()},o.unknown=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return g(t,n).unknown(r)},i.apply(o,arguments),o}function b(){var e,t,n=g().unknown(void 0),o=n.domain,a=n.range,s=[0,1],l=!1,u=0,c=0,f=.5;function d(){var n=o().length,i=s[1]<s[0],d=s[i-0],p=s[1-i];e=(p-d)/Math.max(1,n-u+2*c),l&&(e=Math.floor(e)),d+=(p-d-e*(n-u))*f,t=e*(1-u),l&&(d=Math.round(d),t=Math.round(t));var h=Object(r.f)(n).map((function(t){return d+e*t}));return a(i?h.reverse():h)}return delete n.unknown,n.domain=function(e){return arguments.length?(o(e),d()):o()},n.range=function(e){return arguments.length?(s=[+e[0],+e[1]],d()):s.slice()},n.rangeRound=function(e){return s=[+e[0],+e[1]],l=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(l=!!e,d()):l},n.padding=function(e){return arguments.length?(u=Math.min(1,c=+e),d()):u},n.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),d()):u},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),d()):f},n.copy=function(){return b(o(),s).round(l).paddingInner(u).paddingOuter(c).align(f)},i.apply(d(),arguments)}function y(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(b.apply(null,arguments).paddingInner(1))}var v=n(11),x=function(e){return function(){return e}},_=function(e){return+e},w=[0,1];function O(e){return e}function E(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:x(isNaN(t)?NaN:.5)}function k(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function S(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=E(i,r),o=n(a,o)):(r=E(r,i),o=n(o,a)),function(e){return o(r(e))}}function T(e,t,n){var i=Math.min(e.length,t.length)-1,o=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=E(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=Object(r.b)(e,t,1,i)-1;return a[n](o[n](t))}}function j(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function A(){var e,t,n,r,i,o,a=w,s=w,l=v.interpolate,u=O;function c(){return r=Math.min(a.length,s.length)>2?T:S,i=o=null,f}function f(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return f.invert=function(n){return u(t((o||(o=r(s,a.map(e),v.interpolateNumber)))(n)))},f.domain=function(e){return arguments.length?(a=p.call(e,_),u===O||(u=k(a)),c()):a.slice()},f.range=function(e){return arguments.length?(s=h.call(e),c()):s.slice()},f.rangeRound=function(e){return s=h.call(e),l=v.interpolateRound,c()},f.clamp=function(e){return arguments.length?(u=e?k(a):O,f):u!==O},f.interpolate=function(e){return arguments.length?(l=e,c()):l},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function P(e,t){return A()(e,t)}var C=n(9),N=function(e,t,n,i){var o,a=Object(r.h)(e,t,n);switch((i=Object(C.d)(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(o=Object(C.f)(a,s))||(i.precision=o),Object(C.c)(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Object(C.g)(a,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Object(C.e)(a))||(i.precision=o-2*("%"===i.type))}return Object(C.a)(i)};function M(e){var t=e.domain;return e.ticks=function(e){var n=t();return Object(r.i)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return N(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,o=t(),a=0,s=o.length-1,l=o[a],u=o[s];return u<l&&(i=l,l=u,u=i,i=a,a=s,s=i),(i=Object(r.g)(l,u,n))>0?(l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i,i=Object(r.g)(l,u,n)):i<0&&(l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i,i=Object(r.g)(l,u,n)),i>0?(o[a]=Math.floor(l/i)*i,o[s]=Math.ceil(u/i)*i,t(o)):i<0&&(o[a]=Math.ceil(l*i)/i,o[s]=Math.floor(u*i)/i,t(o)),e},e}function I(){var e=P(O,O);return e.copy=function(){return j(e,I())},i.apply(e,arguments),M(e)}function D(e){var t;function n(e){return isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=p.call(t,_),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return D(e).unknown(t)},e=arguments.length?p.call(e,_):[0,1],M(n)}var R=function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e};function z(e){return Math.log(e)}function L(e){return Math.exp(e)}function F(e){return-Math.log(-e)}function B(e){return-Math.exp(-e)}function U(e){return isFinite(e)?+("1e"+e):e<0?0:e}function q(e){return function(t){return-e(-t)}}function $(e){var t,n,i=e(z,L),o=i.domain,a=10;function s(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(a),n=function(e){return 10===e?U:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),o()[0]<0?(t=q(t),n=q(n),e(F,B)):e(z,L),i}return i.base=function(e){return arguments.length?(a=+e,s()):a},i.domain=function(e){return arguments.length?(o(e),s()):o()},i.ticks=function(e){var i,s=o(),l=s[0],u=s[s.length-1];(i=u<l)&&(p=l,l=u,u=p);var c,f,d,p=t(l),h=t(u),m=null==e?10:+e,g=[];if(!(a%1)&&h-p<m){if(p=Math.round(p)-1,h=Math.round(h)+1,l>0){for(;p<h;++p)for(f=1,c=n(p);f<a;++f)if(!((d=c*f)<l)){if(d>u)break;g.push(d)}}else for(;p<h;++p)for(f=a-1,c=n(p);f>=1;--f)if(!((d=c*f)<l)){if(d>u)break;g.push(d)}}else g=Object(r.i)(p,h,Math.min(h-p,m)).map(n);return i?g.reverse():g},i.tickFormat=function(e,r){if(null==r&&(r=10===a?".0e":","),"function"!=typeof r&&(r=Object(C.a)(r)),e===1/0)return r;null==e&&(e=10);var o=Math.max(1,a*e/i.ticks().length);return function(e){var i=e/n(Math.round(t(e)));return i*a<a-.5&&(i*=a),i<=o?r(e):""}},i.nice=function(){return o(R(o(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},i}function H(){var e=$(A()).domain([1,10]);return e.copy=function(){return j(e,H()).base(e.base())},i.apply(e,arguments),e}function W(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function V(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function G(e){var t=1,n=e(W(t),V(t));return n.constant=function(n){return arguments.length?e(W(t=+n),V(t)):t},M(n)}function Y(){var e=G(A());return e.copy=function(){return j(e,Y()).constant(e.constant())},i.apply(e,arguments)}function X(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function K(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function J(e){return e<0?-e*e:e*e}function Z(e){var t=e(O,O),n=1;function r(){return 1===n?e(O,O):.5===n?e(K,J):e(X(n),X(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},M(t)}function Q(){var e=Z(A());return e.copy=function(){return j(e,Q()).exponent(e.exponent())},i.apply(e,arguments),e}function ee(){return Q.apply(null,arguments).exponent(.5)}function te(){var e,t=[],n=[],o=[];function a(){var e=0,i=Math.max(1,n.length);for(o=new Array(i-1);++e<i;)o[e-1]=Object(r.e)(t,e/i);return s}function s(t){return isNaN(t=+t)?e:n[Object(r.b)(o,t)]}return s.invertExtent=function(e){var r=n.indexOf(e);return r<0?[NaN,NaN]:[r>0?o[r-1]:t[0],r<o.length?o[r]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,i=0,o=e.length;i<o;++i)null==(n=e[i])||isNaN(n=+n)||t.push(n);return t.sort(r.a),a()},s.range=function(e){return arguments.length?(n=h.call(e),a()):n.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return o.slice()},s.copy=function(){return te().domain(t).range(n).unknown(e)},i.apply(s,arguments)}function ne(){var e,t=0,n=1,o=1,a=[.5],s=[0,1];function l(t){return t<=t?s[Object(r.b)(a,t,0,o)]:e}function u(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*n-(e-o)*t)/(o+1);return l}return l.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],u()):[t,n]},l.range=function(e){return arguments.length?(o=(s=h.call(e)).length-1,u()):s.slice()},l.invertExtent=function(e){var r=s.indexOf(e);return r<0?[NaN,NaN]:r<1?[t,a[0]]:r>=o?[a[o-1],n]:[a[r-1],a[r]]},l.unknown=function(t){return arguments.length?(e=t,l):l},l.thresholds=function(){return a.slice()},l.copy=function(){return ne().domain([t,n]).range(s).unknown(e)},i.apply(M(l),arguments)}function re(){var e,t=[.5],n=[0,1],o=1;function a(i){return i<=i?n[Object(r.b)(t,i,0,o)]:e}return a.domain=function(e){return arguments.length?(t=h.call(e),o=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=h.call(e),o=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return re().domain(t).range(n).unknown(e)},i.apply(a,arguments)}var ie=n(970),oe=n(972),ae=n(968),se=n(969),le=n(973),ue=n(974),ce=n(975),fe=n(976),de=n(981),pe=1e3,he=60*pe,me=60*he,ge=24*me,be=7*ge,ye=30*ge,ve=365*ge;function xe(e){return new Date(e)}function _e(e){return e instanceof Date?+e:+new Date(+e)}function we(e,t,n,i,o,a,s,l,u){var c=P(O,O),f=c.invert,d=c.domain,h=u(".%L"),m=u(":%S"),g=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),v=u("%b %d"),x=u("%B"),_=u("%Y"),w=[[s,1,pe],[s,5,5*pe],[s,15,15*pe],[s,30,30*pe],[a,1,he],[a,5,5*he],[a,15,15*he],[a,30,30*he],[o,1,me],[o,3,3*me],[o,6,6*me],[o,12,12*me],[i,1,ge],[i,2,2*ge],[n,1,be],[t,1,ye],[t,3,3*ye],[e,1,ve]];function E(r){return(s(r)<r?h:a(r)<r?m:o(r)<r?g:i(r)<r?b:t(r)<r?n(r)<r?y:v:e(r)<r?x:_)(r)}function k(t,n,i,o){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(i-n)/t,s=Object(r.c)((function(e){return e[2]})).right(w,a);s===w.length?(o=Object(r.h)(n/ve,i/ve,t),t=e):s?(o=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],t=s[0]):(o=Math.max(Object(r.h)(n,i,t),1),t=l)}return null==o?t:t.every(o)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(p.call(e,_e)):d().map(xe)},c.ticks=function(e,t){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=k(e,i,o,t))?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(e,t){return null==t?E:u(t)},c.nice=function(e,t){var n=d();return(e=k(e,n[0],n[n.length-1],t))?d(R(n,e)):c},c.copy=function(){return j(c,we(e,t,n,i,o,a,s,l,u))},c}var Oe=function(){return i.apply(we(ie.a,oe.a,ae.b,se.a,le.a,ue.a,ce.a,fe.a,de.b).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Ee=n(971),ke=n(977),Se=n(966),Te=n(967),je=n(978),Ae=n(979),Pe=function(){return i.apply(we(Ee.a,ke.a,Se.b,Te.a,je.a,Ae.a,ce.a,fe.a,de.d).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function Ce(){var e,t,n,r,i,o=0,a=1,s=O,l=!1;function u(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}return u.domain=function(i){return arguments.length?(e=r(o=+i[0]),t=r(a=+i[1]),n=e===t?0:1/(t-e),u):[o,a]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),u}}function Ne(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Me(){var e=M(Ce()(O));return e.copy=function(){return Ne(e,Me())},o.apply(e,arguments)}function Ie(){var e=$(Ce()).domain([1,10]);return e.copy=function(){return Ne(e,Ie()).base(e.base())},o.apply(e,arguments)}function De(){var e=G(Ce());return e.copy=function(){return Ne(e,De()).constant(e.constant())},o.apply(e,arguments)}function Re(){var e=Z(Ce());return e.copy=function(){return Ne(e,Re()).exponent(e.exponent())},o.apply(e,arguments)}function ze(){return Re.apply(null,arguments).exponent(.5)}function Le(){var e=[],t=O;function n(n){if(!isNaN(n=+n))return t((Object(r.b)(e,n)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var i,o=0,a=t.length;o<a;++o)null==(i=t[o])||isNaN(i=+i)||e.push(i);return e.sort(r.a),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Le(t).domain(e)},o.apply(n,arguments)}function Fe(){var e,t,n,r,i,o,a,s=0,l=.5,u=1,c=O,f=!1;function d(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(e<t?r:i),c(f?Math.max(0,Math.min(1,e)):e))}return d.domain=function(a){return arguments.length?(e=o(s=+a[0]),t=o(l=+a[1]),n=o(u=+a[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d):[s,l,u]},d.clamp=function(e){return arguments.length?(f=!!e,d):f},d.interpolator=function(e){return arguments.length?(c=e,d):c},d.unknown=function(e){return arguments.length?(a=e,d):a},function(a){return o=a,e=a(s),t=a(l),n=a(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d}}function Be(){var e=M(Fe()(O));return e.copy=function(){return Ne(e,Be())},o.apply(e,arguments)}function Ue(){var e=$(Fe()).domain([.1,1,10]);return e.copy=function(){return Ne(e,Ue()).base(e.base())},o.apply(e,arguments)}function qe(){var e=G(Fe());return e.copy=function(){return Ne(e,qe()).constant(e.constant())},o.apply(e,arguments)}function $e(){var e=Z(Fe());return e.copy=function(){return Ne(e,$e()).exponent(e.exponent())},o.apply(e,arguments)}function He(){return $e.apply(null,arguments).exponent(.5)}n.d(t,"scaleBand",(function(){return b})),n.d(t,"scalePoint",(function(){return y})),n.d(t,"scaleIdentity",(function(){return D})),n.d(t,"scaleLinear",(function(){return I})),n.d(t,"scaleLog",(function(){return H})),n.d(t,"scaleSymlog",(function(){return Y})),n.d(t,"scaleOrdinal",(function(){return g})),n.d(t,"scaleImplicit",(function(){return m})),n.d(t,"scalePow",(function(){return Q})),n.d(t,"scaleSqrt",(function(){return ee})),n.d(t,"scaleQuantile",(function(){return te})),n.d(t,"scaleQuantize",(function(){return ne})),n.d(t,"scaleThreshold",(function(){return re})),n.d(t,"scaleTime",(function(){return Oe})),n.d(t,"scaleUtc",(function(){return Pe})),n.d(t,"scaleSequential",(function(){return Me})),n.d(t,"scaleSequentialLog",(function(){return Ie})),n.d(t,"scaleSequentialPow",(function(){return Re})),n.d(t,"scaleSequentialSqrt",(function(){return ze})),n.d(t,"scaleSequentialSymlog",(function(){return De})),n.d(t,"scaleSequentialQuantile",(function(){return Le})),n.d(t,"scaleDiverging",(function(){return Be})),n.d(t,"scaleDivergingLog",(function(){return Ue})),n.d(t,"scaleDivergingPow",(function(){return $e})),n.d(t,"scaleDivergingSqrt",(function(){return He})),n.d(t,"scaleDivergingSymlog",(function(){return qe})),n.d(t,"tickFormat",(function(){return N}))},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r);function o(e,t){return i.a.Children.map(e,(function(e){return i.a.cloneElement(e,t)}))}n(102);var a=n(1),s=n.n(a);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?f(e):t}(this,c(t).call(this,e)),p(f(n),"initRenderer",(function(e){if(e){var t={container:e};n.props.renderer&&(t.type=n.props.renderer),n.sigmaRenderer=n.sigma.addRenderer(t),n.sigma.refresh(),n.setState({renderer:!0})}else n.sigmaRenderer&&(n.sigma.killRenderer(n.sigmaRenderer),n.sigmaRenderer=null,n.setState({renderer:!1}))})),n.state={renderer:!1};var r=n.props.settings?n.props.settings:{};if(n.sigma=new sigma({settings:r}),CustomShapes&&CustomShapes.init(n.sigma),t.bindHandlers(n.props,n.sigma),n.props.graph)try{n.sigma.graph.read(n.props.graph)}catch(e){n.props.onSigmaException&&n.props.onSigmaException(e)}return n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,a=[{key:"bindHandlers",value:function(e,t){["clickNode","overNode","outNode","clickEdge","overEdge","outEdge","clickStage"].forEach((function(n){var r="on"+n[0].toUpperCase()+n.substr(1);e[r]&&t.bind(n,e[r])}))}}],(r=[{key:"componentWillUnmount",value:function(){this.sigma.kill(),this.sigmaRenderer=null}},{key:"render",value:function(){var e=this.state.renderer?o(this.props.children,{sigma:this.sigma}):null;return i.a.createElement("div",{ref:this.initRenderer,style:this.props.style},e)}}])&&u(n.prototype,r),a&&u(n,a),t}(i.a.Component);p(h,"defaultProps",{settings:{defaultNodeColor:"#3388AA",defaultLabelSize:8,defaultLabelColor:"#777",labelThreshold:12,hoverFontStyle:"text-size: 11",batchEdgesDrawing:!0,drawEdges:!0,drawEdgeLabels:!1},style:{maxWidth:"inherit",height:"400px"}}),p(h,"propTypes",{settings:function(){return("function"==typeof Sigma$Settings?s.a.instanceOf(Sigma$Settings):s.a.any).apply(this,arguments)},renderer:s.a.oneOf(["webgl","canvas","svg"]),style:s.a.object,children:s.a.any,graph:function(){return("function"==typeof Sigma$Graph$Data?s.a.instanceOf(Sigma$Graph$Data):s.a.any).apply(this,arguments)},onSigmaException:s.a.func,onClickNode:s.a.func,onClickEdge:s.a.func,onOverNode:s.a.func,onOutNode:s.a.func,onOverEdge:s.a.func,onOutEdge:s.a.func,onClickStage:s.a.func});var m=h;n(895);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?y(e):t}(this,b(t).call(this,e)),x(y(n),"render",(function(){return null})),n.props.sigma&&n.props.default&&n.props.sigma.settings({defaultEdgeType:n.props.default}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),t}(i.a.Component);x(_,"propTypes",{default:function(){return("function"==typeof Sigma$Edge$Shapes?s.a.instanceOf(Sigma$Edge$Shapes):s.a.any).apply(this,arguments)},sigma:function(){return("function"==typeof Sigma?s.a.instanceOf(Sigma):s.a.any).apply(this,arguments)}});var w=_;n(896);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?k(e):t}(this,E(t).call(this,e)),T(k(n),"render",(function(){return null})),n.props.sigma&&n.props.default&&n.props.sigma.settings({defaultNodeType:n.props.default}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),t}(i.a.Component);T(j,"propTypes",{default:function(){return("function"==typeof Sigma$Node$Shapes?s.a.instanceOf(Sigma$Node$Shapes):s.a.any).apply(this,arguments)},sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)}))});var A=j;n(330);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?M(e):t}(this,N(t).call(this,e)),D(M(n),"onLoad",(function(){if(n.props.sigma&&n.props.sigma.refresh(),n.setState({loaded:!0}),n.props.onGraphLoaded)return n.props.onGraphLoaded()})),n.state={loaded:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._load(this.props.path)}},{key:"componentDidUpdate",value:function(e){this.props.path!==e.path&&(this.setState({loaded:!1}),this._load(e.path))}},{key:"render",value:function(){return this.state.loaded?i.a.createElement("div",null,o(this.props.children,{sigma:this.props.sigma})):null}},{key:"_load",value:function(e){sigma.parsers.json(this.props.path,this.props.sigma,this.onLoad)}}])&&C(n.prototype,r),a&&C(n,a),t}(i.a.Component);D(R,"propTypes",{path:s.a.string.isRequired,onGraphLoaded:s.a.func,children:s.a.any,sigma:function(){return("function"==typeof Sigma?s.a.instanceOf(Sigma):s.a.any).apply(this,arguments)}});var z=R;n(897);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?U(e):t}(this,B(t).call(this,e)),$(U(n),"onLoad",(function(){if(n.props.sigma&&n.props.sigma.refresh(),n.setState({loaded:!0}),n.props.onGraphLoaded)return n.props.onGraphLoaded()})),n.state={loaded:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._load(this.props.path)}},{key:"componentWillReceiveProps",value:function(e){this.props.path!==e.path&&(this.setState({loaded:!1}),this._load(e.path))}},{key:"render",value:function(){return this.state.loaded?i.a.createElement("div",null,o(this.props.children,{sigma:this.props.sigma})):null}},{key:"_load",value:function(e){sigma.parsers.gexf(this.props.path,this.props.sigma,this.onLoad)}}])&&F(n.prototype,r),a&&F(n,a),t}(i.a.Component);$(H,"propTypes",{path:s.a.string.isRequired,onGraphLoaded:s.a.func,children:s.a.any,sigma:function(){return("function"==typeof Sigma?s.a.instanceOf(Sigma):s.a.any).apply(this,arguments)}});var W=H;n(898);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?X(e):t}(this,(e=Y(t)).call.apply(e,[this].concat(i))),J(X(n),"render",(function(){return null})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.filter=new sigma.plugins.filter(this.props.sigma),this._apply(this.props)}},{key:"componentWillUpdate",value:function(e){e.nodesBy===this.props.nodesBy&&e.neighborsOf===this.props.neighborsOf||this._apply(e)}},{key:"_apply",value:function(e){this.filter.undo(["neighborsOf","nodesBy"]),e.neighborsOf&&this.filter.neighborsOf(e.neighborsOf,"neighborsOf"),e.nodesBy&&this.filter.nodesBy(e.nodesBy,"nodesBy"),this.filter.apply(),this.props.sigma&&this.props.sigma.refresh()}}])&&G(n.prototype,r),i&&G(n,i),t}(i.a.Component);J(Z,"propTypes",{nodesBy:function(){return("function"==typeof Nodes$Filter?s.a.instanceOf(Nodes$Filter):s.a.any).apply(this,arguments)},neighborsOf:s.a.string,sigma:function(){return("function"==typeof Sigma?s.a.instanceOf(Sigma):s.a.any).apply(this,arguments)}});var Q=Z;n(899);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ne(this,re(t).call(this,e))).state={running:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._refreshGraph()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.sigma;t.running&&!this.state.running&&n&&(n.stopForceAtlas2(),n.settings({drawEdges:!1!==t.drawEdges}),n.refresh())}},{key:"componentWillUnmount",value:function(){this.props.sigma&&this.props.sigma.killForceAtlas2(),this.state.timer&&clearTimeout(this.state.timer)}},{key:"render",value:function(){return this.state.running?null:i.a.createElement("div",null,o(this.props.children,{sigma:this.props.sigma}))}},{key:"_refreshGraph",value:function(){var e=this,t=this.props.sigma;if(sigma&&t){var n=t.settings("drawEdges");t.graph.edges().length>1e3&&t.settings({drawEdges:!1}),t.startForceAtlas2(this._stripOptions(this.props));var r=setTimeout((function(){e.setState({running:!1,timer:void 0})}),this.props.timeout||8*t.graph.nodes().length);this.setState({running:!0,timer:r,drawEdges:n})}}},{key:"_stripOptions",value:function(e){return Object.assign({},e,{sigma:void 0,children:void 0})}}])&&te(n.prototype,r),a&&te(n,a),t}(i.a.Component);oe(ae,"defaultProps",{worker:!0,linLogMode:!0}),oe(ae,"propTypes",{worker:s.a.bool,barnesHutOptimize:s.a.bool,barnesHutTheta:s.a.number,adjustSizes:s.a.bool,iterationsPerRender:s.a.number,linLogMode:s.a.bool,outboundAttractionDistribution:s.a.bool,edgeWeightInfluence:s.a.number,scalingRatio:s.a.number,strongGravityMode:s.a.bool,slowDown:s.a.number,gravity:s.a.number,timeout:s.a.number,sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)})),children:s.a.any});var se=ae;n(900);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?ce(e):t}(this,ue(t).call(this,e)),de(ce(n),"render",(function(){return null})),sigma.plugins.relativeSize(n.props.sigma,n.props.initialSize),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),t}(i.a.Component);de(pe,"propTypes",{initialSize:s.a.number.isRequired,sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)}))});var he=pe;n(901),n(902);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?ye(e):t}(this,be(t).call(this,e)),xe(ye(n),"_mounted",!1),xe(ye(n),"render",(function(){return null})),n.state={running:!1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,i=[{key:"_stripOptions",value:function(e){var t={};for(var n in e)"start"!==n&&"stop"!==n&&"config"!==n&&"sigma"!==n&&"children"!==n&&(t[n]=e[n]);return t}}],(r=[{key:"componentDidMount",value:function(){this._start(),this._mounted=!0}},{key:"componentDidUpdate",value:function(e,t){t.running&&!this.state.running&&this._mounted?this.props.sigma&&this.props.sigma.refresh():function(e,t){for(var n in e)if(e[n]!==t[n])return!0;return!1}(e,this.props)&&(this.props.stop(),this._start())}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.props.stop()}},{key:"_start",value:function(){var e=this;this.props.config(t._stripOptions(this.props)),this.props.start().bind("stop",(function(){e._mounted&&e.setState({running:!1})})),this.setState({running:!0})}}])&&ge(n.prototype,r),i&&ge(n,i),t}(i.a.Component);xe(_e,"propTypes",{config:s.a.func.isRequired,start:s.a.func.isRequired,stop:s.a.func.isRequired,sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)}))});var we=_e;function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ee=function(e){var t=e.sigma;return t?i.a.createElement(we,Oe({start:function(){return t.startNoverlap()},config:function(e){return t.configNoverlap(e)},stop:function(){return!!t&&!!t.stopNoverlap&&t.stopNoverlap()}},e)):null};Ee.propTypes={nodes:s.a.arrayOf((function(){return("function"==typeof Sigma$Node?s.a.instanceOf(Sigma$Node).isRequired:s.a.any.isRequired).apply(this,arguments)})),nodeMargin:s.a.number,scaleNodes:s.a.number,gridSize:s.a.number,permittedExpansion:s.a.number,speed:s.a.number,maxIterations:s.a.number,easing:function(){return("function"==typeof Sigma$Easing?s.a.instanceOf(Sigma$Easing):s.a.any).apply(this,arguments)},duration:s.a.number,sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)}))};var ke=Ee;n(903);function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Te=["#5DA5DA","#60BD68","#B2912F","#F15854","#DECF3F","#FAA43A","#B276B2","#F17CB0","#4D4D4D"],je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._currentColor=0,this._colorsMap={}}var t,n,r;return t=e,(n=[{key:"node",value:function(e){return{id:e.id,label:e.properties.name,x:Math.random(),y:Math.random(),size:1,color:this.colorsMap(e.labels[0]),neo4j_labels:e.labels,neo4j_data:e.properties}}},{key:"edge",value:function(e){return{id:e.id,label:e.type,source:e.startNode,target:e.endNode,color:this.colorsMap(e.type),neo4j_type:e.type,neo4j_data:e.properties}}},{key:"colorsMap",value:function(e){var t=this._colorsMap[e];return t||(t=Te[this._currentColor++%Te.length],this._colorsMap[e]=t),t}}])&&Se(t.prototype,n),r&&Se(t,r),e}();function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?Ne(e):t}(this,Ce(t).call(this,e)),Ie(Ne(n),"onLoad",(function(){if(n.setState({loaded:!0}),n.props.sigma&&n.props.sigma.refresh(),n.props.onGraphLoaded)return n.props.onGraphLoaded()})),n.state={loaded:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._runQuery(this.props.query)}},{key:"componentWillUpdate",value:function(e){this.props.query!==e.query&&(this.setState({loaded:!1}),this._runQuery(e.query))}},{key:"render",value:function(){return this.state.loaded?i.a.createElement("div",null,o(this.props.children,{sigma:this.props.sigma})):null}},{key:"_runQuery",value:function(e){sigma.neo4j.cypher({url:this.props.url,user:this.props.user,password:this.props.password},e,this.props.sigma,this.onLoad,this.props.producers)}}])&&Pe(n.prototype,r),a&&Pe(n,a),t}(i.a.Component);Ie(De,"defaultProps",{producers:new je}),Ie(De,"propTypes",{url:s.a.string.isRequired,user:s.a.string.isRequired,password:s.a.string.isRequired,query:s.a.string.isRequired,producers:s.a.shape({node:s.a.func.isRequired,edge:s.a.func.isRequired}),onGraphLoaded:s.a.func,children:s.a.any,sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)}))});var Re=De;function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe,$e,He,We=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fe(this,Be(t).call(this,e))).props.sigma&&n.props.sigma.graph.nodes().forEach((function(e){e.x=Math.random(),e.y=Math.random()})),n.props.sigma&&n.props.sigma.refresh(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.sigma&&this.props.sigma.refresh()}},{key:"render",value:function(){return i.a.createElement("div",null,o(this.props.children,{sigma:this.props.sigma}))}}])&&Le(n.prototype,r),a&&Le(n,a),t}(i.a.PureComponent);qe=We,$e="propTypes",He={children:s.a.any,sigma:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return("function"==typeof sigma?s.a.instanceOf(sigma):s.a.any).apply(this,arguments)}))},$e in qe?Object.defineProperty(qe,$e,{value:He,enumerable:!0,configurable:!0,writable:!0}):qe[$e]=He;var Ve=We;n(904);var Ge=function(){return null};n(905);var Ye=function(){return null};n.d(t,"Sigma",(function(){return m})),n.d(t,"EdgeShapes",(function(){return w})),n.d(t,"NodeShapes",(function(){return A})),n.d(t,"LoadJSON",(function(){return z})),n.d(t,"LoadGEXF",(function(){return W})),n.d(t,"Filter",(function(){return Q})),n.d(t,"ForceAtlas2",(function(){return se})),n.d(t,"RelativeSize",(function(){return he})),n.d(t,"NOverlap",(function(){return ke})),n.d(t,"NeoCypher",(function(){return Re})),n.d(t,"NeoGraphItemsProducers",(function(){return je})),n.d(t,"RandomizeNodePositions",(function(){return Ve})),n.d(t,"SigmaEnableWebGL",(function(){return Ge})),n.d(t,"SigmaEnableSVG",(function(){return Ye}));t.default=m},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(7),a=n.n(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var u={get:function(e,t,n){if(!t)return e;var r=f(t),i=void 0;try{i=r.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==i?i:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=f(t),i=void 0,o=e;for(;(i=r.shift())&&r.length;)o[i]||(o[i]={}),o=o[i];return o[i]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,i){for(var o=0;o<t.length;o+=1){var a=t[o],s=!1===n[o]||"desc"===n[o],l=a(e,i);if(l)return s?-l:l}return n[0]?e[r]-i[r]:i[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,o=l(t,["children","className"]);return i.a.createElement("div",s({className:a()(e,r)},o),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var i="function"==typeof t?t(n,r):n[t];return e[i]=c(e[i])?e[i]:[],e[i].push(n),e}),{})},isArray:c,splitProps:function(e){var t=e.className,n=e.style,r=l(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map((function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0}));return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return r=e,function(e){return"function"==typeof e&&!!Object.getPrototypeOf(e).isReactComponent}(r)||function(e){return"function"==typeof e&&String(e).includes(".createElement")}(r)?i.a.createElement(e,t):"function"==typeof e?e(t):n;var r},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function c(e){return Array.isArray(e)}function f(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var x=function(e){return i.a.createElement("button",v({type:"button"},e,{className:"-btn"}),e.children)},_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),y(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.page!==e.page&&this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"getPageJumpProperties",value:function(){var e=this;return{onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()},onBlur:this.applyPage,value:""===this.state.page?"":this.state.page+1,onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},inputType:""===this.state.page?"text":"number",pageJumpText:this.props.pageJumpText}}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,o=t.showPageSizeOptions,s=t.pageSizeOptions,l=t.pageSize,u=t.showPageJump,c=t.canPrevious,f=t.canNext,d=t.onPageSizeChange,p=t.className,h=t.PreviousComponent,m=t.NextComponent,g=t.renderPageJump,b=t.renderCurrentPage,y=t.renderTotalPagesCount,v=t.renderPageSizeOptions;return i.a.createElement("div",{className:a()(p,"-pagination"),style:this.props.style},i.a.createElement("div",{className:"-previous"},i.a.createElement(h,{onClick:function(){c&&e.changePage(r-1)},disabled:!c},this.props.previousText)),i.a.createElement("div",{className:"-center"},i.a.createElement("span",{className:"-pageInfo"},this.props.pageText," ",u?g(this.getPageJumpProperties()):b(r)," ",this.props.ofText," ",y(n)),o&&v({pageSize:l,rowsSelectorText:this.props.rowsSelectorText,pageSizeOptions:s,onPageSizeChange:d,rowsText:this.props.rowsText})),i.a.createElement("div",{className:"-next"},i.a.createElement(m,{onClick:function(){f&&e.changePage(r+1)},disabled:!f},this.props.nextText)))}}]),t}(r.Component);_.defaultProps={PreviousComponent:x,NextComponent:x,renderPageJump:function(e){var t=e.onChange,n=e.value,r=e.onBlur,o=e.onKeyPress,a=e.inputType,s=e.pageJumpText;return i.a.createElement("div",{className:"-pageJump"},i.a.createElement("input",{"aria-label":s,type:a,onChange:t,value:n,onBlur:r,onKeyPress:o}))},renderCurrentPage:function(e){return i.a.createElement("span",{className:"-currentPage"},e+1)},renderTotalPagesCount:function(e){return i.a.createElement("span",{className:"-totalPages"},e||1)},renderPageSizeOptions:function(e){var t=e.pageSize,n=e.pageSizeOptions,r=e.rowsSelectorText,o=e.onPageSizeChange,a=e.rowsText;return i.a.createElement("span",{className:"select-wrap -pageSizeOptions"},i.a.createElement("select",{"aria-label":r,onChange:function(e){return o(Number(e.target.value))},value:t},n.map((function(e,t){return i.a.createElement("option",{key:t,value:e},e+" "+a)}))))}};var w=_,O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function E(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var k=function(){return{}},S={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPage:0,defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null==t?"":t,(e="string"==typeof(e=null==e?"":e)?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:k,getTableProps:k,getTheadGroupProps:k,getTheadGroupTrProps:k,getTheadGroupThProps:k,getTheadProps:k,getTheadTrProps:k,getTheadThProps:k,getTheadFilterProps:k,getTheadFilterTrProps:k,getTheadFilterThProps:k,getTbodyProps:k,getTrGroupProps:k,getTrProps:k,getTdProps:k,getTfootProps:k,getTfootTrProps:k,getTfootTdProps:k,getPaginationProps:k,getLoadingProps:k,getNoDataProps:k,getResizerProps:k,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,Placeholder:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,minResizeWidth:11,className:"",style:{},getProps:k,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:k,footerClassName:"",footerStyle:{},getFooterProps:k,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",pageJumpText:"jump to page",rowsSelectorText:"rows per page",TableComponent:function(e){var t=e.children,n=e.className,r=E(e,["children","className"]);return i.a.createElement("div",O({className:a()("rt-table",n),role:"grid"},r),t)},TheadComponent:u.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:u.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=E(e,["children","className"]);return i.a.createElement("div",O({className:a()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=E(e,["children","className"]);return i.a.createElement("div",O({className:a()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,o=E(e,["toggleSort","className","children"]);return(i.a.createElement("div",O({className:a()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},o),r))},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=E(e,["toggleSort","className","children"]);return i.a.createElement("div",O({className:a()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:u.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange,r=e.column;return i.a.createElement("input",{type:"text",style:{width:"100%"},placeholder:r.Placeholder,value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return i.a.createElement("div",{className:a()("rt-expander",t&&"-open")},"•")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return i.a.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return void 0!==e[n.id]})).map((function(e,r){return i.a.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return i.a.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:w,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,o=E(e,["className","loading","loadingText"]);return i.a.createElement("div",O({className:a()("-loading",{"-active":n},t)},o),i.a.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:u.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:u.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return i.a.createElement("span",null," ")}},T=n(1),j=n.n(T),A={data:j.a.any,loading:j.a.bool,showPagination:j.a.bool,showPaginationTop:j.a.bool,showPaginationBottom:j.a.bool,showPageSizeOptions:j.a.bool,pageSizeOptions:j.a.array,defaultPageSize:j.a.number,showPageJump:j.a.bool,collapseOnSortingChange:j.a.bool,collapseOnPageChange:j.a.bool,collapseOnDataChange:j.a.bool,freezeWhenExpanded:j.a.bool,sortable:j.a.bool,resizable:j.a.bool,filterable:j.a.bool,defaultSortDesc:j.a.bool,defaultSorted:j.a.array,defaultFiltered:j.a.array,defaultResized:j.a.array,defaultExpanded:j.a.object,defaultFilterMethod:j.a.func,defaultSortMethod:j.a.func,onPageChange:j.a.func,onPageSizeChange:j.a.func,onSortedChange:j.a.func,onFilteredChange:j.a.func,onResizedChange:j.a.func,onExpandedChange:j.a.func,pivotBy:j.a.array,pivotValKey:j.a.string,pivotIDKey:j.a.string,subRowsKey:j.a.string,aggregatedKey:j.a.string,nestingLevelKey:j.a.string,originalKey:j.a.string,indexKey:j.a.string,groupedByPivotKey:j.a.string,onFetchData:j.a.func,className:j.a.string,style:j.a.object,getProps:j.a.func,getTableProps:j.a.func,getTheadGroupProps:j.a.func,getTheadGroupTrProps:j.a.func,getTheadGroupThProps:j.a.func,getTheadProps:j.a.func,getTheadTrProps:j.a.func,getTheadThProps:j.a.func,getTheadFilterProps:j.a.func,getTheadFilterTrProps:j.a.func,getTheadFilterThProps:j.a.func,getTbodyProps:j.a.func,getTrGroupProps:j.a.func,getTrProps:j.a.func,getTdProps:j.a.func,getTfootProps:j.a.func,getTfootTrProps:j.a.func,getTfootTdProps:j.a.func,getPaginationProps:j.a.func,getLoadingProps:j.a.func,getNoDataProps:j.a.func,getResizerProps:j.a.func,columns:j.a.arrayOf(j.a.shape({Cell:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),Header:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),Footer:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),Aggregated:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),Pivot:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),PivotValue:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),Expander:j.a.oneOfType([j.a.element,j.a.string,j.a.func]),Filter:j.a.oneOfType([j.a.element,j.a.func]),sortable:j.a.bool,resizable:j.a.bool,filterable:j.a.bool,show:j.a.bool,minWidth:j.a.number,minResizeWidth:j.a.number,className:j.a.string,style:j.a.object,getProps:j.a.func,aggregate:j.a.func,headerClassName:j.a.string,headerStyle:j.a.object,getHeaderProps:j.a.func,footerClassName:j.a.string,footerStyle:j.a.object,getFooterProps:j.a.func,filterMethod:j.a.func,filterAll:j.a.bool,sortMethod:j.a.func})),expanderDefaults:j.a.shape({sortable:j.a.bool,resizable:j.a.bool,filterable:j.a.bool,width:j.a.number}),pivotDefaults:j.a.object,previousText:j.a.node,nextText:j.a.node,loadingText:j.a.node,noDataText:j.a.node,pageText:j.a.node,ofText:j.a.node,rowsText:j.a.node,pageJumpText:j.a.node,rowsSelectorText:j.a.node,TableComponent:j.a.elementType,TheadComponent:j.a.elementType,TbodyComponent:j.a.elementType,TrGroupComponent:j.a.elementType,TrComponent:j.a.elementType,ThComponent:j.a.elementType,TdComponent:j.a.elementType,TfootComponent:j.a.elementType,FilterComponent:j.a.elementType,ExpanderComponent:j.a.elementType,PivotValueComponent:j.a.elementType,AggregatedComponent:j.a.elementType,PivotComponent:j.a.elementType,PaginationComponent:j.a.elementType,PreviousComponent:j.a.elementType,NextComponent:j.a.elementType,LoadingComponent:j.a.elementType,NoDataComponent:j.a.elementType,ResizerComponent:j.a.elementType,PadRowComponent:j.a.elementType};n.d(t,"ReactTableDefaults",(function(){return M}));var P=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var M=S,I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:e.defaultPage,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),N(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,o=t.style,s=t.getProps,l=t.getTableProps,c=t.getTheadGroupProps,f=t.getTheadGroupTrProps,d=t.getTheadGroupThProps,p=t.getTheadProps,h=t.getTheadTrProps,m=t.getTheadThProps,g=t.getTheadFilterProps,b=t.getTheadFilterTrProps,y=t.getTheadFilterThProps,v=t.getTbodyProps,x=t.getTrGroupProps,_=t.getTrProps,w=t.getTdProps,O=t.getTfootProps,E=t.getTfootTrProps,k=t.getTfootTdProps,T=t.getPaginationProps,j=t.getLoadingProps,A=t.getNoDataProps,N=t.getResizerProps,M=t.showPagination,I=t.showPaginationTop,D=t.showPaginationBottom,R=t.manual,z=t.loadingText,L=t.noDataText,F=t.sortable,B=t.multiSort,U=t.resizable,q=t.filterable,$=t.pivotIDKey,H=t.pivotValKey,W=t.pivotBy,V=t.subRowsKey,G=t.aggregatedKey,Y=t.originalKey,X=t.indexKey,K=t.groupedByPivotKey,J=t.loading,Z=t.pageSize,Q=t.page,ee=t.sorted,te=t.filtered,ne=t.resized,re=t.expanded,ie=t.pages,oe=t.onExpandedChange,ae=t.TableComponent,se=t.TheadComponent,le=t.TbodyComponent,ue=t.TrGroupComponent,ce=t.TrComponent,fe=t.ThComponent,de=t.TdComponent,pe=t.TfootComponent,he=t.PaginationComponent,me=t.LoadingComponent,ge=t.SubComponent,be=t.NoDataComponent,ye=t.ResizerComponent,ve=t.ExpanderComponent,xe=t.PivotValueComponent,_e=t.PivotComponent,we=t.AggregatedComponent,Oe=t.FilterComponent,Ee=t.PadRowComponent,ke=t.resolvedData,Se=t.allVisibleColumns,Te=t.headerGroups,je=t.hasHeaderGroups,Ae=t.sortedData,Pe=t.currentlyResizing,Ce=Z*Q,Ne=Ce+Z,Me=R?ke:Ae.slice(Ce,Ne),Ie=this.getMinRows(),De=u.range(Math.max(Ie-Me.length,0)),Re=Se.some((function(e){return e.Footer})),ze=q||Se.some((function(e){return e.filterable})),Le=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,i){var o=C({},t,{_viewIndex:r+=1}),a=n.concat([i]);if(o[V]&&u.get(re,a)){var s=e(o[V],a,r),l=P(s,2);o[V]=l[0],r=l[1]}return o})),r]}(Me),Fe=P(Le,1);Me=Fe[0];var Be=Q>0,Ue=Q+1<ie,qe=u.sum(Se.map((function(e){var t=ne.find((function(t){return t.id===e.id}))||{};return u.getFirstDefined(t.value,e.width,e.minWidth)}))),$e=-1,He=C({},t,{startRow:Ce,endRow:Ne,pageRows:Me,minRows:Ie,padRows:De,hasColumnFooter:Re,canPrevious:Be,canNext:Ue,rowMinWidth:qe}),We=u.splitProps(s(He,void 0,void 0,this)),Ve=u.splitProps(l(He,void 0,void 0,this)),Ge=u.splitProps(v(He,void 0,void 0,this)),Ye=j(He,void 0,void 0,this),Xe=A(He,void 0,void 0,this),Ke=function(t,n){var r=function(e){return(ne.find((function(t){return t.id===e.id}))||{}).value},o=u.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),s=u.sum(t.columns.map((function(e){return u.getFirstDefined(r(e),e.width,e.minWidth)}))),l=u.sum(t.columns.map((function(e){return u.getFirstDefined(r(e),e.width,e.maxWidth)}))),c=u.splitProps(d(He,void 0,t,e)),f=u.splitProps(t.getHeaderProps(He,void 0,t,e)),p=[t.headerClassName,c.className,f.className],h=C({},t.headerStyle,c.style,f.style),m=C({},c.rest,f.rest),g={flex:o+" 0 auto",width:u.asPx(s),maxWidth:u.asPx(l)};return i.a.createElement(fe,C({key:n+"-"+t.id,className:a()(p),style:C({},h,g)},m),u.normalizeComponent(t.Header,{data:Ae,column:t}))},Je=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o=ee.find((function(e){return e.id===t.id})),s="function"==typeof t.show?t.show():t.show,l=u.getFirstDefined(r.value,t.width,t.minWidth),c=u.getFirstDefined(r.value,t.width,t.maxWidth),f=u.splitProps(m(He,void 0,t,e)),d=u.splitProps(t.getHeaderProps(He,void 0,t,e)),p=[t.headerClassName,f.className,d.className],h=C({},t.headerStyle,f.style,d.style),g=C({},f.rest,d.rest),b=u.getFirstDefined(t.resizable,U,!1),y=b?i.a.createElement(ye,C({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},N("finalState",void 0,t,e))):null,v=u.getFirstDefined(t.sortable,F,!1);return i.a.createElement(fe,C({key:n+"-"+t.id,className:a()(p,b&&"rt-resizable-header",o?o.desc?"-sort-desc":"-sort-asc":"",v&&"-cursor-pointer",!s&&"-hidden",W&&W.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:C({},h,{flex:l+" 0 auto",width:u.asPx(l),maxWidth:u.asPx(c)}),toggleSort:function(n){v&&e.sortColumn(t,!!B&&n.shiftKey)}},g),i.a.createElement("div",{className:a()(b&&"rt-resizable-header-content")},u.normalizeComponent(t.Header,{data:Ae,column:t})),y)},Ze=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o=u.getFirstDefined(r.value,t.width,t.minWidth),s=u.getFirstDefined(r.value,t.width,t.maxWidth),l=u.splitProps(y(He,void 0,t,e)),c=u.splitProps(t.getHeaderProps(He,void 0,t,e)),f=[t.headerClassName,l.className,c.className],d=C({},t.headerStyle,l.style,c.style),p=C({},l.rest,c.rest),h=te.find((function(e){return e.id===t.id})),m=t.Filter||Oe,g=u.getFirstDefined(t.filterable,q,!1);return i.a.createElement(fe,C({key:n+"-"+t.id,className:a()(f),style:C({},d,{flex:o+" 0 auto",width:u.asPx(o),maxWidth:u.asPx(s)})},p),g?u.normalizeComponent(m,{column:t,filter:h,onChange:function(n){return e.filterColumn(t,n)}},S.column.Filter):null)},Qe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o="function"==typeof t.show?t.show():t.show,s=u.getFirstDefined(r.value,t.width,t.minWidth),l=s,c=u.getFirstDefined(r.value,t.width,t.maxWidth),f=u.splitProps(w(He,void 0,t,e)),d=u.splitProps(t.getProps(He,void 0,t,e)),p=[f.className,t.className,d.className],h=C({},f.style,t.style,d.style);return i.a.createElement(de,C({key:n+"-"+t.id,className:a()(p,!o&&"hidden"),style:C({},h,{flex:l+" 0 auto",width:u.asPx(s),maxWidth:u.asPx(c)})},f.rest),u.normalizeComponent(Ee))},et=function(t,n){var r=x(He,void 0,void 0,e),o=u.splitProps(_(He,void 0,void 0,e));return i.a.createElement(ue,C({key:"pad-"+n},r),i.a.createElement(ce,{className:a()("-padRow",(Me.length+n)%2?"-even":"-odd",o.className),style:o.style||{}},Se.map(Qe)))},tt=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},o="function"==typeof t.show?t.show():t.show,s=u.getFirstDefined(r.value,t.width,t.minWidth),l=u.getFirstDefined(r.value,t.width,t.maxWidth),c=u.splitProps(k(He,void 0,t,e)),f=u.splitProps(t.getProps(He,void 0,t,e)),d=u.splitProps(t.getFooterProps(He,void 0,t,e)),p=[c.className,t.className,f.className,d.className],h=C({},c.style,t.style,f.style,d.style);return i.a.createElement(de,C({key:n+"-"+t.id,className:a()(p,!o&&"hidden"),style:C({},h,{flex:s+" 0 auto",width:u.asPx(s),maxWidth:u.asPx(l)})},f.rest,c.rest,d.rest),u.normalizeComponent(t.Footer,{data:Ae,column:t}))},nt=function(n){var r=u.splitProps(T(He,void 0,void 0,e));return i.a.createElement(he,C({},t,{pages:ie,canPrevious:Be,canNext:Ue,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:r.className,style:r.style,isTop:n},r.rest))},rt=function(){return i.a.createElement("div",C({className:a()("ReactTable",r,We.className),style:C({},o,We.style)},We.rest),M&&I?i.a.createElement("div",{className:"pagination-top"},nt(!0)):null,i.a.createElement(ae,C({className:a()(Ve.className,Pe?"rt-resizing":""),style:Ve.style},Ve.rest),je?(y=u.splitProps(c(He,void 0,void 0,e)),v=u.splitProps(f(He,void 0,void 0,e)),i.a.createElement(se,C({className:a()("-headerGroups",y.className),style:C({},y.style,{minWidth:qe+"px"})},y.rest),i.a.createElement(ce,C({className:v.className,style:v.style},v.rest),Te.map(Ke)))):null,(d=u.splitProps(p(He,void 0,void 0,e)),m=u.splitProps(h(He,void 0,void 0,e)),i.a.createElement(se,C({className:a()("-header",d.className),style:C({},d.style,{minWidth:qe+"px"})},d.rest),i.a.createElement(ce,C({className:m.className,style:m.style},m.rest),Se.map(Je)))),ze?(s=u.splitProps(g(He,void 0,void 0,e)),l=u.splitProps(b(He,void 0,void 0,e)),i.a.createElement(se,C({className:a()("-filters",s.className),style:C({},s.style,{minWidth:qe+"px"})},s.rest),i.a.createElement(ce,C({className:l.className,style:l.style},l.rest),Se.map(Ze)))):null,i.a.createElement(le,C({className:a()(Ge.className),style:C({},Ge.style,{minWidth:qe+"px"})},Ge.rest),Me.map((function(t,n){return function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s={original:n[Y],row:n,index:n[X],viewIndex:$e+=1,pageSize:Z,page:Q,level:o.length,nestingPath:o.concat([r]),aggregated:n[G],groupedByPivot:n[K],subRows:n[V]},l=u.get(re,s.nestingPath),c=x(He,s,void 0,e),f=u.splitProps(_(He,s,void 0,e));return i.a.createElement(ue,C({key:s.nestingPath.join("_")},c),i.a.createElement(ce,C({className:a()(f.className,n._viewIndex%2?"-even":"-odd"),style:f.style},f.rest),Se.map((function(t,r){var o=ne.find((function(e){return e.id===t.id}))||{},c="function"==typeof t.show?t.show():t.show,f=u.getFirstDefined(o.value,t.width,t.minWidth),d=u.getFirstDefined(o.value,t.width,t.maxWidth),p=u.splitProps(w(He,s,t,e)),h=u.splitProps(t.getProps(He,s,t,e)),m=[p.className,t.className,h.className],g=C({},p.style,t.style,h.style),b=C({},s,{isExpanded:l,column:C({},t),value:s.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:c,width:f,maxWidth:d,tdProps:p,columnProps:h,classes:m,styles:g}),y=b.value,v=void 0,x=void 0,_=void 0,O=u.normalizeComponent(t.Cell,b,y),E=t.Aggregated||(t.aggregate?t.Cell:we),k=t.Expander||ve,S=t.PivotValue||xe,T=_e||function(e){return i.a.createElement("div",null,i.a.createElement(k,e),i.a.createElement(S,e))},j=t.Pivot||T;(b.pivoted||b.expander)&&(b.expandable=!0,v=!0,!b.pivoted||b.subRows||ge||(b.expandable=!1)),b.pivoted?(x=s.row[$]===t.id&&b.subRows,_=W.indexOf(t.id)>W.indexOf(s.row[$])&&b.subRows,O=x?u.normalizeComponent(j,C({},b,{value:n[H]}),n[H]):_?u.normalizeComponent(E,b,y):null):b.aggregated&&(O=u.normalizeComponent(E,b,y)),b.expander&&(O=u.normalizeComponent(k,b,n[H]),W&&(b.groupedByPivot&&(O=null),b.subRows||ge||(O=null)));var A=v?function(t){var n=u.clone(re);return n=l?u.set(n,b.nestingPath,!1):u.set(n,b.nestingPath,{}),e.setStateWithData({expanded:n},(function(){return oe&&oe(n,b.nestingPath,t,b)}))}:function(){},P={onClick:A};return p.rest.onClick&&(P.onClick=function(e){p.rest.onClick(e,(function(){return A(e)}))}),h.rest.onClick&&(P.onClick=function(e){h.rest.onClick(e,(function(){return A(e)}))}),i.a.createElement(de,C({key:r+"-"+t.id,className:a()(m,!b.expandable&&!c&&"hidden",b.expandable&&"rt-expandable",(x||_)&&"rt-pivot"),style:C({},g,{flex:f+" 0 auto",width:u.asPx(f),maxWidth:u.asPx(d)})},p.rest,h.rest,P),O)}))),s.subRows&&l&&s.subRows.map((function(e,n){return t(e,n,s.nestingPath)})),ge&&!s.subRows&&l&&ge(s,(function(){var e=u.clone(re);u.set(e,s.nestingPath,!1)})))}(t,n)})),De.map(et)),Re?(t=u.splitProps(O(He,void 0,void 0,e)),n=u.splitProps(E(He,void 0,void 0,e)),i.a.createElement(pe,C({className:t.className,style:C({},t.style,{minWidth:qe+"px"})},t.rest),i.a.createElement(ce,C({className:a()(n.className),style:n.style},n.rest),Se.map(tt)))):null),M&&D?i.a.createElement("div",{className:"pagination-bottom"},nt(!1)):null,!Me.length&&i.a.createElement(be,Xe,u.normalizeComponent(L)),i.a.createElement(me,C({loading:J,loadingText:z},Ye)));var t,n,s,l,d,m,y,v};return n?n(He,rt,this):rt()}}]),t}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),m(t,[{key:"getResolvedState",value:function(e,t){return h({},u.compactObject(this.state),u.compactObject(this.props),u.compactObject(t),u.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,o=e.pivotBy,a=void 0===o?[]:o,s=e.data,l=e.resolveData,c=e.pivotIDKey,f=e.pivotValKey,d=e.subRowsKey,m=e.aggregatedKey,y=e.nestingLevelKey,v=e.originalKey,x=e.indexKey,_=e.groupedByPivotKey,w=e.SubComponent,O=!1;r.forEach((function(e){e.columns&&(O=!0)}));var E=[].concat(b(r)),k=r.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));k&&!k.expander&&(k=k.columns.find((function(e){return e.expander}))),w&&!k&&(E=[k={expander:!0}].concat(b(E)));var S=[],T=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?h({},n.props.column,n.props.expanderDefaults,e):h({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var i=r.accessor;return r.accessor=function(e){return u.get(e,i)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return S.push(r),r},j=E.map((function(e){return e.columns?h({},e,{columns:e.columns.map((function(t){return T(t,e)}))}):T(e)})).slice(),A=[],P=(j=(j=j.map((function(e){if(e.columns){var t=e.columns.filter((function(e){return!(a.indexOf(e.id)>-1)&&u.getFirstDefined(e.show,!0)}));return h({},e,{columns:t})}return e}))).filter((function(e){return e.columns?e.columns.length:!(a.indexOf(e.id)>-1)&&u.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));if(a.length){var C=[];a.forEach((function(e){var t=S.find((function(t){return t.id===e}));t&&C.push(t)}));var N=C.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),C[0].parentColumn),M=O&&N.Header,I={Header:M=M||function(){return i.a.createElement("strong",null,"Pivoted")},columns:C.map((function(e){return h({},n.props.pivotDefaults,e,{pivoted:!0})}))};P>=0?(I=h({},j[P],I),j.splice(P,1,I)):j.unshift(I)}var D=[],R=[],z=function(e,t){D.push(h({},n.props.column,t,{columns:e})),R=[]};j.forEach((function(e){if(e.columns)return A=A.concat(e.columns),R.length>0&&z(R),void z(e.columns,e);A.push(e),R.push(e)})),O&&R.length>0&&z(R);var L=this.resolvedData;this.resolvedData&&!t||(L=l(s),this.resolvedData=L),L=L.map((function(e,t){return function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(g(r={},v,t),g(r,x,n),g(r,d,t[d]),g(r,y,i),r);return S.forEach((function(e){e.expander||(o[e.id]=e.accessor(t))})),o[d]&&(o[d]=o[d].map((function(t,n){return e(t,n,i+1)}))),o}(e,t)}));var F=A.filter((function(e){return!e.expander&&e.aggregate})),B=function(e){var t={};return F.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t};if(a.length){L=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var i=Object.entries(u.groupBy(t,n[r])).map((function(e){var t,i=p(e,2),o=i[0],a=i[1];return g(t={},c,n[r]),g(t,f,o),g(t,n[r],o),g(t,d,a),g(t,y,r),g(t,_,!0),t}));return i=i.map((function(t){var i,o=e(t[d],n,r+1);return h({},t,(g(i={},d,o),g(i,m,!0),i),B(o))}))}(L,a)}return h({},e,{resolvedData:L,allVisibleColumns:A,headerGroups:D,allDecoratedColumns:S,hasHeaderGroups:O})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,i=e.defaultFilterMethod,o=e.resolvedData,a=e.allDecoratedColumns,s={};return a.filter((function(e){return e.sortMethod})).forEach((function(e){s[e.id]=e.sortMethod})),{sortedData:t?o:this.sortData(this.filterData(o,r,i,a),n,s)}}},{key:"fireFetchData",value:function(){var e=h({},this.getResolvedState(),{page:this.getStateOrProp("page"),pageSize:this.getStateOrProp("pageSize"),filtered:this.getStateOrProp("filtered")});this.props.onFetchData(e,this)}},{key:"getPropOrState",value:function(e){return u.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return u.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var i=this,o=e;return t.length&&(o=(o=t.reduce((function(e,t){var i=r.find((function(e){return e.id===t.id}));if(!i||!1===i.filterable)return e;var o=i.filterMethod||n;return i.filterAll?o(t,e,i):e.filter((function(e){return o(t,e,i)}))}),o)).map((function(e){return e[i.props.subRowsKey]?h({},e,g({},i.props.subRowsKey,i.filterData(e[i.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[i.props.subRowsKey]||e[i.props.subRowsKey].length>0}))),o}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var i=(this.props.orderByMethod||u.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return i.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),i}},{key:"getMinRows",value:function(){return u.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,i={page:e};r&&(i.expanded={}),this.setStateWithData(i,(function(){return n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,i=Math.floor(r/e);this.setStateWithData({pageSize:e,page:i},(function(){return t&&t(e,i)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,i=n.skipNextSort,o=n.defaultSortDesc,a=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:o,s=!a;if(i)this.setStateWithData({skipNextSort:!1});else{var l=this.props.onSortedChange,c=u.clone(r||[]).map((function(e){return e.desc=u.isSortingDesc(e),e}));if(u.isArray(e)){var f=c.findIndex((function(t){return t.id===e[0].id}));if(f>-1)c[f].desc===s?t?c.splice(f,e.length):e.forEach((function(e,t){c[f+t].desc=a})):e.forEach((function(e,t){c[f+t].desc=s})),t||(c=c.slice(f,e.length));else c=t?c.concat(e.map((function(e){return{id:e.id,desc:a}}))):e.map((function(e){return{id:e.id,desc:a}}))}else{var d=c.findIndex((function(t){return t.id===e.id}));if(d>-1){var p=c[d];p.desc===s?t?c.splice(d,1):(p.desc=a,c=[p]):(p.desc=s,t||(c=[p]))}else t?c.push({id:e.id,desc:a}):c=[{id:e.id,desc:a}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},(function(){return l&&l(c,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,i=(n||[]).filter((function(t){return t.id!==e.id}));""!==t&&i.push({id:e.id,value:t}),this.setStateWithData({filtered:i},(function(){return r&&r(i,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var i=e.target.parentElement.getBoundingClientRect().width,o=void 0;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:i}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props,n=t.onResizedChange,r=t.column,i=this.getResolvedState(),o=i.resized,a=i.currentlyResizing,s=i.columns.find((function(e){return e.accessor===a.id||e.id===a.id})),l=s&&null!=s.minResizeWidth?s.minResizeWidth:r.minResizeWidth,u=o.filter((function(e){return e.id!==a.id})),c=void 0;"touchmove"===e.type?c=e.changedTouches[0].pageX:"mousemove"===e.type&&(c=e.pageX);var f=Math.max(a.parentWidth+c-a.startX,l);u.push({id:a.id,value:f}),this.setStateWithData({resized:u},(function(){return n&&n(u,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(e)}(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),d(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])})),["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",i="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[i]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),i=this.getResolvedState({},e),o=i.freezeWhenExpanded;if(i.frozen=!1,o)for(var a=Object.keys(i.expanded),s=0;s<a.length;s+=1)if(i.expanded[a[s]]){i.frozen=!0;break}return(r.frozen&&!i.frozen||r.sorted!==i.sorted||r.filtered!==i.filtered||r.showFilters!==i.showFilters||!i.frozen&&r.resolvedData!==i.resolvedData)&&((r.sorted!==i.sorted&&this.props.collapseOnSortingChange||r.filtered!==i.filtered||r.showFilters!==i.showFilters||r.sortedData&&!i.frozen&&r.resolvedData!==i.resolvedData&&this.props.collapseOnDataChange)&&(i.expanded={}),Object.assign(i,this.getSortedData(i))),r.filtered!==i.filtered&&(i.page=0),i.sortedData&&(i.pages=i.manual?i.pages:Math.ceil(i.sortedData.length/i.pageSize),i.page=i.manual?i.page:Math.max(i.page>=i.pages?i.pages-1:i.page,0)),this.setState(i,(function(){t&&t(),r.page===i.page&&r.pageSize===i.pageSize&&r.sorted===i.sorted&&r.filtered===i.filtered||n.fireFetchData()}))}}]),t}(r.Component)));I.propTypes=A,I.defaultProps=S;t.default=I},,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(6),i=n(8);function o(e){return Object(r.a)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/i.e}))}var a=o(0),s=o(1),l=o(2),u=o(3),c=o(4),f=o(5),d=o(6);a.range,s.range,l.range,u.range,c.range,f.range,d.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/i.a}),(function(e){return e.getUTCDate()-1}));t.a=o;o.range},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(6),i=n(8);function o(e){return Object(r.a)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.c)/i.e}))}var a=o(0),s=o(1),l=o(2),u=o(3),c=o(4),f=o(5),d=o(6);a.range,s.range,l.range,u.range,c.range,f.range,d.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i.c)/i.a}),(function(e){return e.getDate()-1}));t.a=o;o.range},function(e,t,n){"use strict";var r=n(6),i=Object(r.a)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Object(r.a)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null},t.a=i;i.range},function(e,t,n){"use strict";var r=n(6),i=Object(r.a)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Object(r.a)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},t.a=i;i.range},function(e,t,n){"use strict";var r=n(6),i=Object(r.a)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.d-e.getMinutes()*i.c)}),(function(e,t){e.setTime(+e+t*i.b)}),(function(e,t){return(t-e)/i.b}),(function(e){return e.getHours()}));t.a=o;o.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.d)}),(function(e,t){e.setTime(+e+t*i.c)}),(function(e,t){return(t-e)/i.c}),(function(e){return e.getMinutes()}));t.a=o;o.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*i.d)}),(function(e,t){return(t-e)/i.d}),(function(e){return e.getUTCSeconds()}));t.a=o;o.range},function(e,t,n){"use strict";var r=n(6),i=Object(r.a)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Object(r.a)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):i:null},t.a=i;i.range},function(e,t,n){"use strict";var r=n(6),i=Object(r.a)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*i.b)}),(function(e,t){return(t-e)/i.b}),(function(e){return e.getUTCHours()}));t.a=o;o.range},function(e,t,n){"use strict";var r=n(6),i=n(8),o=Object(r.a)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*i.c)}),(function(e,t){return(t-e)/i.c}),(function(e){return e.getUTCMinutes()}));t.a=o;o.range},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return _}));var r=n(17),i=n(16),o=n(62),a=.96422,s=1,l=.82521,u=4/29,c=6/29,f=3*c*c,d=c*c*c;function p(e){if(e instanceof m)return new m(e.l,e.a,e.b,e.opacity);if(e instanceof w)return O(e);e instanceof i.b||(e=Object(i.h)(e));var t,n,r=v(e.r),o=v(e.g),u=v(e.b),c=g((.2225045*r+.7168786*o+.0606169*u)/s);return r===o&&o===u?t=n=c:(t=g((.4360747*r+.3850649*o+.1430804*u)/a),n=g((.0139322*r+.0971045*o+.7141733*u)/l)),new m(116*c-16,500*(t-c),200*(c-n),e.opacity)}function h(e,t,n,r){return 1===arguments.length?p(e):new m(e,t,n,null==r?1:r)}function m(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function g(e){return e>d?Math.pow(e,1/3):e/f+u}function b(e){return e>c?e*e*e:f*(e-u)}function y(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function v(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x(e){if(e instanceof w)return new w(e.h,e.c,e.l,e.opacity);if(e instanceof m||(e=p(e)),0===e.a&&0===e.b)return new w(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*o.b;return new w(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _(e,t,n,r){return 1===arguments.length?x(e):new w(e,t,n,null==r?1:r)}function w(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function O(e){if(isNaN(e.h))return new m(e.l,0,0,e.opacity);var t=e.h*o.a;return new m(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Object(r.a)(m,h,Object(r.b)(i.a,{brighter:function(e){return new m(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new m(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=a*b(t),e=s*b(e),n=l*b(n),new i.b(y(3.1338561*t-1.6168667*e-.4906146*n),y(-.9787684*t+1.9161415*e+.033454*n),y(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Object(r.a)(w,_,Object(r.b)(i.a,{brighter:function(e){return new w(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new w(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return O(this).rgb()}}))},function(e,t,n){"use strict";var r=n(966),i=n(967),o=n(968),a=n(969),s=n(970),l=n(971);function u(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function c(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function f(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var d,p,h,m,g,b={"-":"",_:" ",0:"0"},y=/^\s*\d+/,v=/^%/,x=/[\\^$*+?|[\]().{}]/g;function _(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function w(e){return e.replace(x,"\\$&")}function O(e){return new RegExp("^(?:"+e.map(w).join("|")+")","i")}function E(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function k(e,t,n){var r=y.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function S(e,t,n){var r=y.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function T(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function j(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function A(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function P(e,t,n){var r=y.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function C(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function N(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function M(e,t,n){var r=y.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function I(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function D(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function R(e,t,n){var r=y.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function z(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function L(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function F(e,t,n){var r=y.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function B(e,t,n){var r=y.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function U(e,t,n){var r=y.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function q(e,t,n){var r=v.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $(e,t,n){var r=y.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function H(e,t,n){var r=y.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function W(e,t){return _(e.getDate(),t,2)}function V(e,t){return _(e.getHours(),t,2)}function G(e,t){return _(e.getHours()%12||12,t,2)}function Y(e,t){return _(1+a.a.count(Object(s.a)(e),e),t,3)}function X(e,t){return _(e.getMilliseconds(),t,3)}function K(e,t){return X(e,t)+"000"}function J(e,t){return _(e.getMonth()+1,t,2)}function Z(e,t){return _(e.getMinutes(),t,2)}function Q(e,t){return _(e.getSeconds(),t,2)}function ee(e){var t=e.getDay();return 0===t?7:t}function te(e,t){return _(o.b.count(Object(s.a)(e)-1,e),t,2)}function ne(e,t){var n=e.getDay();return e=n>=4||0===n?Object(o.c)(e):o.c.ceil(e),_(o.c.count(Object(s.a)(e),e)+(4===Object(s.a)(e).getDay()),t,2)}function re(e){return e.getDay()}function ie(e,t){return _(o.a.count(Object(s.a)(e)-1,e),t,2)}function oe(e,t){return _(e.getFullYear()%100,t,2)}function ae(e,t){return _(e.getFullYear()%1e4,t,4)}function se(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_(t/60|0,"0",2)+_(t%60,"0",2)}function le(e,t){return _(e.getUTCDate(),t,2)}function ue(e,t){return _(e.getUTCHours(),t,2)}function ce(e,t){return _(e.getUTCHours()%12||12,t,2)}function fe(e,t){return _(1+i.a.count(Object(l.a)(e),e),t,3)}function de(e,t){return _(e.getUTCMilliseconds(),t,3)}function pe(e,t){return de(e,t)+"000"}function he(e,t){return _(e.getUTCMonth()+1,t,2)}function me(e,t){return _(e.getUTCMinutes(),t,2)}function ge(e,t){return _(e.getUTCSeconds(),t,2)}function be(e){var t=e.getUTCDay();return 0===t?7:t}function ye(e,t){return _(r.b.count(Object(l.a)(e)-1,e),t,2)}function ve(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Object(r.c)(e):r.c.ceil(e),_(r.c.count(Object(l.a)(e),e)+(4===Object(l.a)(e).getUTCDay()),t,2)}function xe(e){return e.getUTCDay()}function _e(e,t){return _(r.a.count(Object(l.a)(e)-1,e),t,2)}function we(e,t){return _(e.getUTCFullYear()%100,t,2)}function Oe(e,t){return _(e.getUTCFullYear()%1e4,t,4)}function Ee(){return"+0000"}function ke(){return"%"}function Se(e){return+e}function Te(e){return Math.floor(+e/1e3)}function je(e){return d=function(e){var t=e.dateTime,n=e.date,s=e.time,l=e.periods,d=e.days,p=e.shortDays,h=e.months,m=e.shortMonths,g=O(l),y=E(l),v=O(d),x=E(d),_=O(p),w=E(p),je=O(h),Ae=E(h),Pe=O(m),Ce=E(m),Ne={a:function(e){return p[e.getDay()]},A:function(e){return d[e.getDay()]},b:function(e){return m[e.getMonth()]},B:function(e){return h[e.getMonth()]},c:null,d:W,e:W,f:K,H:V,I:G,j:Y,L:X,m:J,M:Z,p:function(e){return l[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Se,s:Te,S:Q,u:ee,U:te,V:ne,w:re,W:ie,x:null,X:null,y:oe,Y:ae,Z:se,"%":ke},Me={a:function(e){return p[e.getUTCDay()]},A:function(e){return d[e.getUTCDay()]},b:function(e){return m[e.getUTCMonth()]},B:function(e){return h[e.getUTCMonth()]},c:null,d:le,e:le,f:pe,H:ue,I:ce,j:fe,L:de,m:he,M:me,p:function(e){return l[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Se,s:Te,S:ge,u:be,U:ye,V:ve,w:xe,W:_e,x:null,X:null,y:we,Y:Oe,Z:Ee,"%":ke},Ie={a:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.w=w[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.w=x[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=Pe.exec(t.slice(n));return r?(e.m=Ce[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=je.exec(t.slice(n));return r?(e.m=Ae[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return ze(e,t,n,r)},d:D,e:D,f:U,H:z,I:z,j:R,L:B,m:I,M:L,p:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.p=y[r[0].toLowerCase()],n+r[0].length):-1},q:M,Q:$,s:H,S:F,u:S,U:T,V:j,w:k,W:A,x:function(e,t,r){return ze(e,n,t,r)},X:function(e,t,n){return ze(e,s,t,n)},y:C,Y:P,Z:N,"%":q};function De(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=b[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function Re(e,t){return function(n){var s,l,d=f(1900,void 0,1);if(ze(d,e,n+="",0)!=n.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(!t||"Z"in d||(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(l=(s=c(f(d.y,0,1))).getUTCDay(),s=l>4||0===l?r.a.ceil(s):Object(r.a)(s),s=i.a.offset(s,7*(d.V-1)),d.y=s.getUTCFullYear(),d.m=s.getUTCMonth(),d.d=s.getUTCDate()+(d.w+6)%7):(l=(s=u(f(d.y,0,1))).getDay(),s=l>4||0===l?o.a.ceil(s):Object(o.a)(s),s=a.a.offset(s,7*(d.V-1)),d.y=s.getFullYear(),d.m=s.getMonth(),d.d=s.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),l="Z"in d?c(f(d.y,0,1)).getUTCDay():u(f(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(l+5)%7:d.w+7*d.U-(l+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,c(d)):u(d)}}function ze(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=Ie[i in b?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return(Ne.x=De(n,Ne),Ne.X=De(s,Ne),Ne.c=De(t,Ne),Me.x=De(n,Me),Me.X=De(s,Me),Me.c=De(t,Me),{format:function(e){var t=De(e+="",Ne);return t.toString=function(){return e},t},parse:function(e){var t=Re(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=De(e+="",Me);return t.toString=function(){return e},t},utcParse:function(e){var t=Re(e+="",!0);return t.toString=function(){return e},t}})}(e),p=d.format,h=d.parse,m=d.utcFormat,g=d.utcParse,d}n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return je})),je({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})}]);